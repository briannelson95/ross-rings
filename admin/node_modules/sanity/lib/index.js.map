{"version":3,"file":"index.js","sources":["../src/core/components/react-track-elements/createNoopTrackerScope.tsx","../src/core/components/react-track-elements/createUseReporter.tsx","../src/core/components/react-track-elements/createStore.ts","../src/core/components/react-track-elements/createTrackerScope.tsx","../src/core/changeIndicators/constants.ts","../src/core/changeIndicators/tracker.tsx","../src/core/changeIndicators/ConnectorContext.ts","../src/core/changeIndicators/ChangeFieldWrapper.tsx","../src/core/util/useUnique.ts","../src/core/util/createHookFromObservableFactory.ts","../src/core/util/isNonNullable.ts","../src/core/util/draftUtils.ts","../src/core/util/empty.ts","../src/core/util/globalScope.ts","../src/core/util/isArray.ts","../src/core/util/isRecord.ts","../src/core/util/isString.ts","../src/core/util/isTruthy.ts","../src/core/util/resizeObserver.ts","../src/core/util/schemaUtils.ts","../src/core/util/searchUtils.ts","../src/core/util/uncaughtErrorHandler.ts","../src/core/util/useLoadable.ts","../src/core/util/useThrottledCallback.ts","../src/core/changeIndicators/ElementWithChangeBar.styled.tsx","../src/core/changeIndicators/ElementWithChangeBar.tsx","../src/core/changeIndicators/ChangeIndicator.tsx","../src/core/changeIndicators/ChangeIndicatorContext.ts","../src/core/components/scroll/scrollContext.ts","../src/core/components/scroll/hooks.ts","../src/core/components/scroll/scrollContainer.tsx","../src/core/components/scroll/scrollMonitor.tsx","../src/core/changeIndicators/helpers/findMostSpecificTarget.ts","../src/core/changeIndicators/helpers/isChangeBar.ts","../src/core/changeIndicators/helpers/scrollUtils.ts","../src/core/changeIndicators/helpers/scrollIntoView.ts","../src/core/changeIndicators/helpers/getOffsetsTo.ts","../src/core/changeIndicators/overlay/connectorPath.ts","../src/core/changeIndicators/overlay/mapConnectorToLine.ts","../src/core/changeIndicators/overlay/ClampedRect.tsx","../src/core/changeIndicators/overlay/Connector.styled.tsx","../src/core/changeIndicators/overlay/Connector.tsx","../src/core/changeIndicators/overlay/useResizeObserver.ts","../src/core/changeIndicators/overlay/ConnectorsOverlay.styled.tsx","../src/core/changeIndicators/overlay/ConnectorsOverlay.tsx","../src/core/changeIndicators/overlay/ChangeConnectorRoot.tsx","../src/core/components/NoJavascript.tsx","../src/core/components/globalErrorHandler/GlobalErrorHandler.tsx","../src/core/components/Favicons.tsx","../src/core/components/DefaultDocument.tsx","../src/core/components/InsufficientPermissionsMessage.tsx","../src/core/components/IntentButton.tsx","../src/core/components/PreviewCard.tsx","../src/core/components/TextWithTone.tsx","../src/core/store/_legacy/createMultiKeyWeakMap.ts","../src/core/store/_legacy/ResourceCacheProvider.tsx","../src/core/store/_legacy/cors/CorsOriginError.ts","../src/core/store/_legacy/authStore/storage.ts","../src/core/store/_legacy/authStore/createBroadcastChannel.ts","../src/core/store/_legacy/authStore/sessionId.ts","../src/core/store/_legacy/authStore/providerLogos.tsx","../src/core/store/_legacy/authStore/createLoginComponent.tsx","../src/core/store/_legacy/authStore/createAuthStore.ts","../src/core/store/_legacy/authStore/createMockAuthStore.ts","../src/core/store/_legacy/authStore/providerTitle.ts","../src/core/store/_legacy/connection-status/utils/catchWithCount.ts","../src/core/store/_legacy/connection-status/connection-status-store.ts","../src/core/studio/GlobalStyle.tsx","../src/core/config/defineConfig.ts","../src/core/config/definePlugin.ts","../src/core/schema/types/slug.ts","../src/core/schema/types/geopoint.ts","../src/core/schema/types/imageCrop.ts","../src/core/schema/types/imageHotspot.ts","../src/core/schema/types/assetSourceData.ts","../src/core/schema/types/imageAsset.ts","../src/core/schema/types/imagePalette.ts","../src/core/schema/types/imagePaletteSwatch.ts","../src/core/schema/types/imageDimensions.ts","../src/core/schema/types/imageMetadata.ts","../src/core/schema/types/fileAsset.ts","../src/core/schema/createSchema.ts","../src/core/schema/helpers.ts","../src/core/studioClient.ts","../src/core/form/components/FullscreenSpinner.tsx","../src/core/form/components/SpinnerWithText.tsx","../src/core/preview/components/_extractUploadState.ts","../src/core/preview/components/_previewComponents.ts","../src/core/preview/components/SanityDefaultPreview.tsx","../src/core/preview/useDocumentPreview.ts","../src/core/preview/streams/resize.ts","../src/core/preview/streams/scroll.ts","../src/core/preview/streams/orientationChange.ts","../src/core/preview/streams/intersectionObservableFor.ts","../src/core/preview/streams/visibilityChange.ts","../src/core/preview/useVisibility.ts","../src/core/preview/components/_constants.ts","../src/core/preview/components/_resolvePreviewComponent.ts","../src/core/preview/components/SanityPreview.tsx","../src/core/preview/utils/getPreviewPaths.ts","../src/core/preview/utils/getPreviewStateObservable.ts","../src/core/preview/utils/getPreviewValueWithFallback.tsx","../src/core/preview/constants.tsx","../src/core/preview/utils/portableText.ts","../src/core/preview/utils/keysOf.ts","../src/core/preview/utils/prepareForPreview.ts","../src/core/preview/utils/debounceCollect.ts","../src/core/preview/availability.ts","../src/core/preview/utils/props.ts","../src/core/preview/createPathObserver.ts","../src/core/preview/createPreviewObserver.ts","../src/core/preview/documentPair.ts","../src/core/preview/utils/optimizeQuery.ts","../src/core/preview/utils/hasEqualFields.ts","../src/core/preview/utils/isUniqueBy.ts","../src/core/preview/observeFields.ts","../src/core/preview/documentPreviewStore.ts","../src/core/form/studio/assetSource/DocumentList.tsx","../src/core/form/studio/assetSource/ConfirmMessage.tsx","../src/core/form/studio/assetSource/AssetUsageDialog.tsx","../src/core/form/studio/assetSource/AssetMenu.tsx","../src/core/form/studio/assetSource/AssetThumb.tsx","../src/core/form/studio/assetSource/prettyBytes.ts","../src/core/form/studio/assetSource/utils/mimeType.ts","../src/core/form/studio/assetSource/AssetRow.tsx","../src/core/form/studio/assetSource/TableList.tsx","../src/core/form/studio/assetSource/DefaultSource.tsx","../src/core/form/studio/assetSource/FileAssetSource.ts","../src/core/form/studio/assetSource/ImageAssetSource.tsx","../src/core/config/configPropertyReducers.ts","../src/core/config/ConfigPropertyError.ts","../src/core/config/resolveConfigProperty.ts","../src/core/config/ConfigResolutionError.ts","../src/core/config/SchemaError.ts","../src/core/config/createDefaultIcon.tsx","../src/core/config/prepareConfig.ts","../src/core/config/resolveConfig.ts","../src/core/config/useConfigContextFromSource.ts","../src/core/config/components/useMiddlewareComponents.ts","../src/core/studio/components/navbar/StudioLogo.tsx","../src/core/environment/index.ts","../src/core/studio/workspace.tsx","../src/core/studio/colorScheme.tsx","../src/core/studio/workspaces/WorkspacesContext.ts","../src/core/studio/workspaces/WorkspacesProvider.tsx","../src/core/studio/workspaces/helpers.ts","../src/core/studio/workspaces/useWorkspaces.ts","../src/core/studio/workspaces/WorkspaceValidationError.ts","../src/core/studio/workspaces/validateWorkspaces.ts","../src/core/studio/screens/NoToolsScreen.tsx","../src/core/studio/screens/ToolNotFoundScreen.tsx","../src/core/studio/StudioLayout.tsx","../src/core/studio/components/navbar/userMenu/LoginProviderLogo.tsx","../src/core/studio/components/navbar/userMenu/UserMenu.tsx","../src/core/studio/source.tsx","../src/core/studio/components/navbar/NewDocumentButton.tsx","../src/core/studio/components/StatusButton.tsx","../src/core/studio/components/navbar/presence/PresenceMenuItem.tsx","../src/core/studio/components/navbar/presence/PresenceMenu.tsx","../src/core/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcherContext.ts","../src/core/studio/activeWorkspaceMatcher/matchWorkspace.ts","../src/core/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcher.tsx","../src/core/studio/activeWorkspaceMatcher/useActiveWorkspace.ts","../src/core/studio/components/navbar/workspace/WorkspacePreview.tsx","../src/core/studio/components/navbar/workspace/hooks/useWorkspaceAuthStates.ts","../src/core/studio/screens/LoadingScreen.tsx","../src/core/studio/screens/schemaErrors/SchemaProblemGroups.tsx","../src/core/studio/screens/schemaErrors/utils.ts","../src/core/studio/screens/schemaErrors/reportWarnings.ts","../src/core/studio/screens/schemaErrors/SchemaErrorsScreen.tsx","../src/core/studio/screens/NotFoundScreen.tsx","../src/core/studio/screens/AuthenticateScreen.tsx","../src/core/studio/screens/ConfigErrorsScreen.tsx","../src/core/studio/screens/NotAuthenticatedScreen.tsx","../src/core/studio/screens/CorsOriginErrorScreen.tsx","../src/core/studio/components/navbar/workspace/constants.ts","../src/core/studio/components/navbar/workspace/WorkspaceAuth/Layout.tsx","../src/core/studio/components/navbar/workspace/WorkspaceAuth/WorkspaceAuth.tsx","../src/core/studio/components/navbar/workspace/WorkspaceMenuButton.tsx","../src/core/studio/components/navbar/NavDrawer.tsx","../src/core/studio/components/navbar/changelog/portableTextContent/listStyles.tsx","../src/core/studio/components/navbar/changelog/portableTextContent/PortableTextContent.styles.ts","../src/core/studio/components/navbar/changelog/portableTextContent/PortableTextContent.tsx","../src/core/studio/components/navbar/changelog/ChangelogItem.tsx","../src/core/studio/components/navbar/changelog/ChangelogList.tsx","../src/core/studio/components/navbar/changelog/ChangelogDialog.tsx","../src/core/version.ts","../src/core/studio/components/navbar/changelog/module-status/moduleStatus.ts","../src/core/studio/components/navbar/changelog/module-status/hooks.ts","../src/core/studio/components/navbar/changelog/ChangelogAccordion.tsx","../src/core/studio/components/navbar/changelog/ChangelogButton.tsx","../src/core/studio/components/navbar/configIssues/ConfigIssuesButton.tsx","../src/core/studio/components/navbar/LogoButton.tsx","../src/core/studio/components/navbar/search/contexts/search/SearchContext.ts","../src/core/studio/components/navbar/search/contexts/search/useSearchState.ts","../src/core/studio/components/navbar/search/components/Instructions.tsx","../src/core/studio/components/navbar/search/components/PointerOverlay.tsx","../src/core/studio/components/navbar/search/utils/supportsTouch.ts","../src/core/studio/components/navbar/search/contexts/commandList/index.tsx","../src/core/studio/components/navbar/search/components/TypePills.tsx","../src/core/studio/components/navbar/search/components/RecentSearchItem.tsx","../src/core/studio/components/navbar/search/components/RecentSearches.tsx","../src/core/studio/components/navbar/search/components/CustomTextInput.tsx","../src/core/studio/components/navbar/search/components/SearchHeader.tsx","../src/core/studio/components/navbar/search/constants.ts","../src/core/studio/components/navbar/search/components/NoResults.tsx","../src/core/studio/components/navbar/search/components/SearchError.tsx","../src/core/studio/components/navbar/search/components/searchResultItem/DebugOverlay.tsx","../src/core/presence/DocumentPreviewPresence.tsx","../src/core/presence/constants.ts","../src/core/presence/utils.ts","../src/core/presence/FieldPresence.styled.tsx","../src/core/presence/context.tsx","../src/core/presence/PresenceTooltip.tsx","../src/core/presence/overlay/tracker.ts","../src/core/presence/FieldPresence.tsx","../src/core/presence/PresenceScope.tsx","../src/core/presence/overlay/intersectionObserver.ts","../src/core/presence/overlay/WithIntersection.tsx","../src/core/presence/overlay/RegionsWithIntersections.styled.tsx","../src/core/presence/overlay/RegionsWithIntersections.tsx","../src/core/presence/overlay/StickyOverlay.tsx","../src/core/presence/overlay/PresenceOverlay.tsx","../src/core/studio/components/navbar/search/components/searchResultItem/SearchResultItemPreview.tsx","../src/core/studio/components/navbar/search/components/searchResultItem/SearchResultItem.tsx","../src/core/studio/components/navbar/search/types.ts","../src/core/studio/components/navbar/search/components/SortMenu.tsx","../src/core/studio/components/navbar/search/components/SearchResults.tsx","../src/core/search/common/utils.ts","../src/core/studio/components/navbar/search/utils/selectors.ts","../src/core/studio/components/navbar/search/components/TypeFilterItem.tsx","../src/core/studio/components/navbar/search/components/TypeFilters.tsx","../src/core/studio/components/navbar/search/hooks/useMeasureSearchResultsIndex.ts","../src/core/studio/components/navbar/search/hooks/useSearchHotkeys.ts","../src/core/studio/components/navbar/search/utils/hasSearchableTerms.ts","../src/core/studio/components/navbar/search/SearchDialog.tsx","../src/core/studio/components/navbar/search/components/PlaceholderSearchInput.tsx","../src/core/studio/components/navbar/search/components/SearchPopover.tsx","../src/core/studio/components/navbar/search/SearchField.tsx","../src/core/studio/components/navbar/search/datastores/recentSearches.ts","../src/core/search/weighted/applyWeights.ts","../src/core/search/common/tokenize.ts","../src/core/search/weighted/createSearchQuery.ts","../src/core/search/weighted/createWeightedSearch.ts","../src/core/studio/components/navbar/search/hooks/useSearch.ts","../src/core/studio/components/navbar/search/utils/isRecentSearchTerms.ts","../src/core/studio/components/navbar/search/utils/debug.ts","../src/core/studio/components/navbar/search/contexts/search/reducer.ts","../src/core/studio/components/navbar/search/contexts/search/SearchProvider.tsx","../src/core/studio/components/navbar/StudioNavbar.tsx","../src/core/components/collapseMenu/CollapseOverflowMenu.tsx","../src/core/components/collapseMenu/ObserveElement.tsx","../src/core/components/collapseMenu/CollapseMenuDivider.tsx","../src/core/components/collapseMenu/CollapseMenu.tsx","../src/core/components/collapseMenu/CollapseMenuButton.tsx","../src/core/studio/components/navbar/tools/ToolLink.tsx","../src/core/studio/components/navbar/tools/ToolCollapseMenu.tsx","../src/core/studio/components/navbar/tools/ToolVerticalMenu.tsx","../src/core/studio/components/navbar/tools/StudioToolMenu.tsx","../src/core/studio/studio-components-hooks/picks.ts","../src/core/studio/studio-components-hooks/componentHooks.ts","../src/core/user-color/context.ts","../src/core/user-color/hooks.ts","../src/core/user-color/manager.ts","../src/core/user-color/provider.tsx","../src/core/studio/AuthBoundary.tsx","../src/core/studio/StudioThemeProvider.tsx","../src/core/studio/StudioErrorBoundary.tsx","../src/core/studio/constants.ts","../src/core/studio/workspaceLoader/ErrorMessage.tsx","../src/core/studio/router/router.ts","../src/core/studio/router/util/getOrderedTools.ts","../src/core/studio/router/helpers.ts","../src/core/studio/router/routerEvent.ts","../src/core/studio/workspaceLoader/WorkspaceLoader.tsx","../src/core/studio/StudioProvider.tsx","../src/core/studio/Studio.tsx","../src/core/studio/renderStudio.tsx","../src/core/hooks/useClient.ts","../src/core/hooks/useConnectionState.ts","../src/core/hooks/useDataset.ts","../src/core/hooks/useDocumentOperation.ts","../src/core/hooks/useDocumentOperationEvent.ts","../src/core/hooks/useEditState.ts","../src/core/hooks/useProjectId.ts","../src/core/hooks/useSchema.ts","../src/core/hooks/useSyncState.ts","../src/core/hooks/useTemplates.ts","../src/core/hooks/useTimeAgo.ts","../src/core/hooks/useTools.ts","../src/core/hooks/useValidationStatus.ts","../src/core/store/user/hooks.ts","../src/core/store/_legacy/document/buffered-doc/createObservableBufferedDocument.ts","../src/core/store/_legacy/document/buffered-doc/createBufferedDocument.ts","../src/core/store/_legacy/document/getPairListener.ts","../src/core/store/_legacy/document/document-pair/checkoutPair.ts","../src/core/store/_legacy/document/document-pair/utils/isLiveEditEnabled.ts","../src/core/store/_legacy/document/utils/createMemoizer.ts","../src/core/store/_legacy/document/document-pair/memoizedPair.ts","../src/core/store/_legacy/document/document-pair/snapshotPair.ts","../src/core/store/_legacy/document/document-pair/editState.ts","../src/core/store/_legacy/document/document-pair/operationArgs.ts","../src/core/store/_legacy/document/document-pair/operations/delete.ts","../src/core/store/_legacy/document/document-pair/operations/publish.ts","../src/core/store/_legacy/document/document-pair/operations/patch.ts","../src/core/store/_legacy/document/document-pair/operations/commit.ts","../src/core/store/_legacy/document/document-pair/operations/discardChanges.ts","../src/core/store/_legacy/document/document-pair/operations/unpublish.ts","../src/core/store/_legacy/document/document-pair/operations/duplicate.ts","../src/core/store/_legacy/document/document-pair/operations/restore.ts","../src/core/store/_legacy/document/document-pair/consistencyStatus.ts","../src/core/store/_legacy/document/document-pair/operationEvents.ts","../src/core/store/_legacy/document/document-pair/remoteSnapshots.ts","../src/core/store/_legacy/document/document-pair/validation.ts","../src/core/store/_legacy/document/document-pair/documentEvents.ts","../src/core/store/_legacy/document/document-pair/operations/helpers.ts","../src/core/store/_legacy/document/document-pair/editOperations.ts","../src/core/store/_legacy/document/listenQuery.ts","../src/core/store/_legacy/document/resolveTypeForDocument.ts","../src/core/templates/util/isRecord.ts","../src/core/templates/validate.ts","../src/core/templates/util/deepAssign.ts","../src/core/templates/resolve.ts","../src/core/templates/prepare.ts","../src/core/store/_legacy/document/initialValue/initialValue.ts","../src/core/store/_legacy/document/document-store.ts","../src/core/store/_legacy/document/hooks/useDocumentType.ts","../src/core/store/_legacy/document/hooks/useDocumentValues.ts","../src/core/store/_legacy/document/useInitialValue.ts","../src/core/store/_legacy/document/useResolveInitialValueForType.ts","../src/core/store/_legacy/grants/documentPairPermissions.ts","../src/core/store/_legacy/grants/documentValuePermissions.ts","../src/core/store/_legacy/grants/templatePermissions.ts","../src/core/store/_legacy/debugParams/debugParams.ts","../src/core/store/_legacy/grants/debug/exampleGrants.ts","../src/core/store/_legacy/grants/debug/roleGrants.ts","../src/core/store/_legacy/grants/grantsStore.ts","../src/core/store/_legacy/history/history/getJsonStream.ts","../src/core/store/_legacy/history/history/Aligner.ts","../src/core/store/_legacy/history/history/Reconstruction.ts","../src/core/store/_legacy/history/history/TimelineController.ts","../src/core/store/_legacy/history/history/utils.ts","../src/core/store/_legacy/history/history/diffValue.ts","../src/core/store/_legacy/history/history/TwoEndedArray.ts","../src/core/store/_legacy/history/history/chunker.ts","../src/core/store/_legacy/history/history/Timeline.ts","../src/core/store/_legacy/history/createHistoryStore.ts","../src/core/store/_legacy/presence/mock-events.ts","../src/core/store/_legacy/presence/message-transports/bifurTransport.ts","../src/core/store/_legacy/presence/presence-store.ts","../src/core/store/_legacy/presence/useGlobalPresence.tsx","../src/core/store/_legacy/presence/useDocumentPresence.tsx","../src/core/store/_legacy/project/projectStore.ts","../src/core/store/_legacy/project/useProject.ts","../src/core/store/_legacy/project/useProjectDatasets.ts","../src/core/store/_legacy/settings/backends/localStorage.ts","../src/core/store/_legacy/settings/backends/memory.ts","../src/core/store/_legacy/settings/backends/resolve.ts","../src/core/store/_legacy/settings/settingsStore.ts","../src/core/store/_legacy/user/userStore.ts","../src/core/store/_legacy/datastores.ts","../src/core/components/UserAvatar.tsx","../src/core/components/WithReferringDocuments.tsx","../src/core/components/hookCollection/actionId.ts","../src/core/components/hookCollection/HookStateContainer.ts","../src/core/components/hookCollection/requestIdleCallback.ts","../src/core/components/hookCollection/GetHookCollectionState.tsx","../src/core/components/popoverDialog/PopoverDialog.tsx","../src/core/components/previews/constants.ts","../src/core/components/previews/_common/Media.styled.ts","../src/core/components/previews/_common/Media.tsx","../src/core/components/previews/helpers.tsx","../src/core/components/previews/general/DefaultPreview.tsx","../src/core/components/previews/general/DetailPreview.styled.ts","../src/core/components/previews/general/DetailPreview.tsx","../src/core/components/progress/CircularProgress.tsx","../src/core/components/progress/LinearProgress.tsx","../src/core/components/previews/general/MediaPreview.styled.ts","../src/core/components/previews/general/MediaPreview.tsx","../src/core/components/previews/portableText/BlockImagePreview.styled.tsx","../src/core/components/previews/portableText/BlockImagePreview.tsx","../src/core/components/previews/portableText/BlockPreview.tsx","../src/core/components/previews/portableText/InlinePreview.styled.tsx","../src/core/components/previews/portableText/InlinePreview.tsx","../src/core/components/previews/template/TemplatePreview.tsx","../src/core/components/rovingFocus/useRovingFocus.ts","../src/core/components/transitional/ImperativeToast.ts","../src/core/components/zOffsets/defaults.ts","../src/core/components/zOffsets/ZIndexContext.ts","../src/core/components/zOffsets/useZIndex.ts","../src/core/components/transitional/LegacyLayerProvider.tsx","../src/core/components/validation/listItem.tsx","../src/core/components/validation/validationList.tsx","../src/core/components/zOffsets/ZIndexProvider.tsx","../src/core/field/paths/helpers.ts","../src/core/field/diff/annotations/helpers.ts","../src/core/field/diff/annotations/hooks.ts","../src/core/field/diff/components/DiffTooltip.tsx","../src/core/field/diff/components/DiffCard.tsx","../src/core/field/diff/components/ChangeTitleSegment.tsx","../src/core/field/diff/components/ChangeBreadcrumb.tsx","../src/core/field/conditional-property/utils.tsx","../src/core/field/conditional-property/useConditionalProperty.tsx","../src/core/field/diff/contexts/DiffContext.tsx","../src/core/field/validation/index.ts","../src/core/field/schema/helpers.ts","../src/core/field/types/portableText/diff/symbols.ts","../src/core/field/types/portableText/diff/helpers.ts","../src/core/field/TODO.ts","../src/core/field/types/boolean/preview/BooleanPreview.tsx","../src/core/field/types/boolean/diff/BooleanFieldDiff.tsx","../src/core/field/diff/contexts/DocumentChangeContext.tsx","../src/core/field/diff/hooks/useDocumentChange.ts","../src/core/field/diff/hooks/useRefValue.ts","../src/core/field/types/file/diff/helpers.ts","../src/core/field/types/file/diff/FileFieldDiff.tsx","../src/core/field/types/image/diff/helpers.ts","../src/core/field/types/image/diff/HotspotCropSVG.tsx","../src/core/field/types/image/diff/ImagePreview.tsx","../src/core/field/types/image/diff/ImageFieldDiff.tsx","../src/core/field/types/number/preview/NumberPreview.tsx","../src/core/field/types/number/diff/NumberFieldDiff.tsx","../src/core/field/types/portableText/diff/components/Blockquote.tsx","../src/core/field/types/portableText/diff/components/Header.tsx","../src/core/field/types/portableText/diff/components/Paragraph.tsx","../src/core/field/types/portableText/diff/components/Block.tsx","../src/core/field/types/portableText/diff/components/styledComponents.tsx","../src/core/field/types/portableText/diff/components/Annotation.tsx","../src/core/field/types/portableText/diff/components/Decorator.tsx","../src/core/field/types/portableText/diff/components/InlineObject.tsx","../src/core/field/types/portableText/diff/components/Text.tsx","../src/core/field/types/portableText/diff/components/PortableText.tsx","../src/core/field/types/portableText/diff/PTDiff.tsx","../src/core/field/types/reference/preview/ReferencePreview.tsx","../src/core/field/types/reference/diff/ReferenceFieldDiff.tsx","../src/core/field/types/string/preview/StringPreview.tsx","../src/core/field/types/string/diff/StringFieldDiff.tsx","../src/core/field/diff/resolve/defaultComponents.ts","../src/core/field/diff/resolve/resolveDiffComponent.ts","../src/core/field/diff/helpers.ts","../src/core/field/diff/changes/buildChangeList.ts","../src/core/field/diff/changes/helpers.ts","../src/core/field/diff/changes/undoChange.ts","../src/core/field/conditional-property/conditionalReadOnly/ConditionalReadOnlyContext.ts","../src/core/field/conditional-property/conditionalReadOnly/useConditionalReadOnly.ts","../src/core/field/diff/components/DiffErrorBoundary.tsx","../src/core/field/diff/components/FromToArrow.tsx","../src/core/field/diff/components/DiffInspectWrapper.tsx","../src/core/field/diff/components/FromTo.tsx","../src/core/field/diff/components/DiffFromTo.tsx","../src/core/field/diff/components/FallbackDiff.tsx","../src/core/field/diff/components/RevertChangesButton.tsx","../src/core/field/diff/components/ValueError.tsx","../src/core/field/diff/components/FieldChange.styled.tsx","../src/core/field/diff/components/FieldChange.tsx","../src/core/field/utils/useHover.ts","../src/core/field/diff/components/GroupChange.styled.tsx","../src/core/field/diff/components/GroupChange.tsx","../src/core/field/diff/components/ChangeResolver.tsx","../src/core/field/diff/components/NoChanges.tsx","../src/core/field/diff/components/ChangeList.styled.tsx","../src/core/field/diff/components/ChangeList.tsx","../src/core/field/diff/components/DiffString.tsx","../src/core/field/diff/components/MetaInfo.tsx","../src/core/field/types/array/util/arrayUtils.ts","../src/core/field/types/array/diff/ArrayOfOptionsFieldDiff.tsx","../src/core/field/types/datetime/preview/DatetimePreview.tsx","../src/core/field/types/datetime/diff/DatetimeFieldDiff.tsx","../src/core/field/types/url/diff/UrlFieldDiff.tsx","../src/core/field/types/slug/preview/SlugPreview.tsx","../src/core/field/types/slug/diff/SlugFieldDiff.tsx","../src/core/field/diff/resolve/diffResolver.ts","../src/core/form/FormBuilderContext.ts","../src/core/form/utils/asserters.ts","../src/core/form/studio/contexts/FormCallbacks.tsx","../src/core/form/hooks/usePrevious.ts","../src/core/form/hooks/useDidUpdate.ts","../src/core/form/patch/PatchChannel.ts","../src/core/form/patch/patch.ts","../src/core/form/patch/PatchEvent.ts","../src/core/form/utils/randomKey.ts","../src/core/form/utils/ensureKey.ts","../src/core/form/utils/createProtoValue.ts","../src/core/form/inputs/arrays/ArrayOfObjectsInput/createProtoArrayValue.ts","../src/core/form/utils/is.ts","../src/core/form/studio/utils/withMaxConcurrency.ts","../src/core/form/studio/inputs/client-adapters/assets.ts","../src/core/form/studio/uploads/image/readExif.ts","../src/core/form/studio/uploads/image/orient.ts","../src/core/form/studio/uploads/image/rotateImage.ts","../src/core/form/studio/uploads/constants.ts","../src/core/form/studio/uploads/utils.ts","../src/core/form/studio/uploads/uploadImage.ts","../src/core/form/studio/uploads/uploadFile.ts","../src/core/form/studio/uploads/uploaders.ts","../src/core/form/studio/uploads/accepts.ts","../src/core/form/studio/uploads/resolveUploader.ts","../src/core/form/useFormBuilder.ts","../src/core/form/store/utils/isEmptyItem.ts","../src/core/form/members/utils/resolveInitialArrayValues.ts","../src/core/form/members/fields/ArrayOfObjectsField.tsx","../src/core/form/members/fields/PrimitiveField.tsx","../src/core/form/members/fields/ObjectField.tsx","../src/core/form/studio/uploads/file/readAsText.ts","../src/core/form/members/fields/ArrayOfPrimitivesField.tsx","../src/core/form/members/fields/asserters.ts","../src/core/form/members/MemberField.tsx","../src/core/form/components/Alert.tsx","../src/core/form/components/Details.tsx","../src/core/form/inputs/InvalidValueInput/converters.ts","../src/core/form/inputs/InvalidValueInput/UntypedValueInput.tsx","../src/core/form/inputs/InvalidValueInput/InvalidValueInput.tsx","../src/core/form/components/formField/FormFieldValidationStatus.tsx","../src/core/form/components/formField/FormFieldHeaderText.tsx","../src/core/form/components/formField/FormFieldHeader.tsx","../src/core/form/components/formField/FormField.tsx","../src/core/form/components/formField/styles.ts","../src/core/form/components/formField/FormFieldSetLegend.tsx","../src/core/form/components/formField/FormFieldSet.tsx","../src/core/form/components/formField/FormFieldStatus.tsx","../src/core/form/inputs/arrays/errors/MissingKeysAlert.tsx","../src/core/form/inputs/arrays/errors/DuplicateKeysAlert.tsx","../src/core/form/inputs/arrays/errors/MixedArrayAlert.tsx","../src/core/form/members/MemberFieldError.tsx","../src/core/form/members/MemberFieldset.tsx","../src/core/form/members/items/ArrayOfObjectsItem.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue.ts","../src/core/form/members/items/ArrayOfPrimitivesItem.tsx","../src/core/form/members/views/IncompatibleItemType.tsx","../src/core/form/members/MemberItemError.tsx","../src/core/form/members/ObjectMembers.tsx","../src/core/form/members/ArrayOfObjectsMembers.tsx","../src/core/form/components/FormInput.tsx","../src/core/form/components/ActivateOnFocus/ActivateOnFocus.styles.tsx","../src/core/form/components/ActivateOnFocus/ActivateOnFocus.tsx","../src/core/form/inputs/PortableText/callbacks/insertCallback.ts","../src/core/form/inputs/PortableText/callbacks/setCallback.ts","../src/core/form/inputs/PortableText/callbacks/unsetCallback.ts","../src/core/form/inputs/PortableText/BlockActions.tsx","../src/core/form/inputs/PortableText/_common/ReviewChangesHighlightBlock.tsx","../src/core/form/inputs/PortableText/_common/StyledChangeIndicatorWithProvidedFullPath.tsx","../src/core/form/store/utils/immutableReconcile.ts","../src/core/form/studio/contexts/Validation.tsx","../src/core/form/inputs/PortableText/_helpers.ts","../src/core/form/inputs/PortableText/hooks/useMemberValidation.tsx","../src/core/form/inputs/PortableText/contexts/PortableTextMarkers.tsx","../src/core/form/inputs/PortableText/hooks/usePortableTextMarkers.tsx","../src/core/form/inputs/PortableText/contexts/PortableTextMembers.tsx","../src/core/form/inputs/PortableText/hooks/usePortableTextMembers.tsx","../src/core/form/inputs/PortableText/debugRender.ts","../src/core/form/inputs/PortableText/object/BlockObjectPreview.tsx","../src/core/form/inputs/PortableText/object/BlockObject.styles.ts","../src/core/form/inputs/PortableText/object/BlockObject.tsx","../src/core/form/inputs/PortableText/object/InlineObjectToolbarPopover.tsx","../src/core/form/inputs/PortableText/object/InlineObject.tsx","../src/core/form/inputs/PortableText/_legacyDefaultParts/Markers.tsx","../src/core/form/inputs/PortableText/text/AnnotationToolbarPopover.tsx","../src/core/form/inputs/PortableText/text/Annotation.tsx","../src/core/form/inputs/PortableText/text/constants.ts","../src/core/form/inputs/PortableText/text/Decorator.tsx","../src/core/form/inputs/PortableText/text/helpers.ts","../src/core/form/inputs/PortableText/text/TextBlock.styles.ts","../src/core/form/inputs/PortableText/text/textStyles.tsx","../src/core/form/inputs/PortableText/text/TextBlock.tsx","../src/core/form/inputs/PortableText/toolbar/CustomIcon.tsx","../src/core/form/inputs/PortableText/toolbar/helpers.tsx","../src/core/form/inputs/PortableText/toolbar/hooks.ts","../src/core/form/inputs/PortableText/toolbar/ActionMenu.tsx","../src/core/form/inputs/PortableText/toolbar/BlockStyleSelect.tsx","../src/core/form/inputs/PortableText/toolbar/InsertMenu.tsx","../src/core/form/inputs/PortableText/toolbar/Toolbar.tsx","../src/core/form/inputs/PortableText/Editor.styles.tsx","../src/core/form/inputs/PortableText/hooks/useSpellCheck.tsx","../src/core/form/inputs/PortableText/hooks/useScrollSelectionIntoView.tsx","../src/core/form/inputs/PortableText/Editor.tsx","../src/core/form/components/withFocusRing/helpers.ts","../src/core/form/inputs/PortableText/Compositor.styles.tsx","../src/core/form/inputs/PortableText/hooks/useHotKeys.tsx","../src/core/form/inputs/PortableText/object/helpers.ts","../src/core/form/inputs/PortableText/object/renderers/DefaultEditDialog.tsx","../src/core/form/inputs/PortableText/object/renderers/debug.ts","../src/core/form/inputs/PortableText/object/renderers/PopoverEditDialog.tsx","../src/core/form/inputs/PortableText/object/renderers/ObjectEditModal.tsx","../src/core/form/inputs/PortableText/hooks/useScrollToOpenedMember.tsx","../src/core/form/inputs/PortableText/Compositor.tsx","../src/core/form/inputs/PortableText/InvalidValue.tsx","../src/core/form/inputs/PortableText/usePatches.ts","../src/core/form/inputs/PortableText/PortableTextInput.tsx","../src/core/form/types/asserters.ts","../src/core/form/inputs/arrays/common/sortable.tsx","../src/core/form/inputs/arrays/common/list.tsx","../src/core/form/inputs/arrays/common/DragHandle.tsx","../src/core/form/inputs/arrays/layouts/RowLayout.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/IncompatibleItemType.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/ErrorItem.tsx","../src/core/form/components/withFocusRing/withFocusRing.ts","../src/core/form/inputs/common/fileTarget/utils/extractFiles.ts","../src/core/form/inputs/common/fileTarget/utils/imageUrlToBlob.ts","../src/core/form/inputs/common/fileTarget/fileTarget.tsx","../src/core/form/inputs/files/common/DropMessage.tsx","../src/core/form/inputs/arrays/common/uploadTarget/styles.ts","../src/core/form/inputs/arrays/common/uploadTarget/uploadTarget.tsx","../src/core/form/inputs/arrays/common/UploadTargetCard.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/utils/nearestIndex.ts","../src/core/form/inputs/arrays/ArrayOfObjectsInput/InsertMenu.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/ItemRow.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesFunctions.tsx","../src/core/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesInput.tsx","../src/core/form/inputs/arrays/ArrayOfOptionsInput/ArrayOfObjectOptionsInput.tsx","../src/core/form/inputs/arrays/ArrayOfOptionsInput/ArrayOfPrimitiveOptionsInput.tsx","../src/core/form/inputs/arrays/ArrayOfOptionsInput/ArrayOfOptionsInput.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/ArrayOfObjectsFunctions.tsx","../src/core/form/hooks/useScrollIntoViewOnFocusWithin.ts","../src/core/form/studio/contexts/Presence.tsx","../src/core/form/inputs/arrays/layouts/CellLayout.tsx","../src/core/form/components/EditPortal.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/GridItem.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/IncompatibleItemType.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/ErrorItem.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/Grid/GridArrayInput.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/ListArrayInput.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/ArrayOfObjectsInput.tsx","../src/core/form/inputs/arrays/UniversalArrayInput.tsx","../src/core/form/components/tagInput/styles.ts","../src/core/form/components/tagInput/tagInput.tsx","../src/core/form/inputs/TagsArrayInput.tsx","../src/core/form/inputs/BooleanInput.tsx","../src/core/form/inputs/DateInputs/base/calendar/CalendarDay.tsx","../src/core/form/inputs/DateInputs/base/calendar/constants.ts","../src/core/form/inputs/DateInputs/base/calendar/utils.ts","../src/core/form/inputs/DateInputs/base/calendar/CalendarMonth.tsx","../src/core/form/inputs/DateInputs/base/calendar/features.ts","../src/core/form/inputs/DateInputs/base/LazyTextInput.tsx","../src/core/form/inputs/DateInputs/base/calendar/YearInput.tsx","../src/core/form/inputs/DateInputs/base/calendar/Calendar.tsx","../src/core/form/inputs/DateInputs/base/DatePicker.tsx","../src/core/form/inputs/DateInputs/base/DateTimeInput.tsx","../src/core/form/inputs/DateInputs/CommonDateTimeInput.tsx","../src/core/form/inputs/DateInputs/utils.ts","../src/core/form/inputs/DateInputs/DateTimeInput.tsx","../src/core/form/inputs/DateInputs/DateInput.tsx","../src/core/form/utils/getValidationRule.ts","../src/core/form/inputs/NumberInput.tsx","../src/core/form/inputs/ObjectInput/UnknownFields.tsx","../src/core/form/inputs/ObjectInput/ObjectInput.styled.tsx","../src/core/form/inputs/ObjectInput/fieldGroups/GroupTab.tsx","../src/core/form/inputs/ObjectInput/fieldGroups/FieldGroupTabs.tsx","../src/core/form/inputs/ObjectInput/ObjectInput.tsx","../src/core/form/inputs/Slug/utils/slugify.ts","../src/core/form/inputs/Slug/utils/useAsync.tsx","../src/core/form/inputs/Slug/utils/useSlugContext.ts","../src/core/form/inputs/Slug/SlugInput.tsx","../src/core/form/inputs/StringInput.tsx","../src/core/form/inputs/TextInput.tsx","../src/core/form/inputs/TelephoneInput.tsx","../src/core/form/inputs/SelectInput.tsx","../src/core/form/inputs/UrlInput.tsx","../src/core/form/inputs/EmailInput.tsx","../src/core/form/store/stateTreeHelper.ts","../src/core/form/store/utils/getExpandOperations.ts","../src/core/form/studio/inputResolver/helpers.ts","../src/core/form/store/conditional-property/resolveConditionalProperty.ts","../src/core/form/store/constants.ts","../src/core/form/store/utils/getItemType.ts","../src/core/form/store/utils/getCollapsibleOptions.ts","../src/core/form/store/formState.ts","../src/core/form/store/useFormState.ts","../src/core/form/inputs/PortableText/_legacyDefaultParts/CustomMarkers.tsx","../src/core/form/FormBuilderProvider.tsx","../src/core/form/studio/inputs/client-adapters/reference.ts","../src/core/form/useFormValue.ts","../src/core/form/inputs/ReferenceInput/useReferenceInput.tsx","../src/core/form/inputs/ReferenceInput/useReferenceInfo.ts","../src/core/form/inputs/ReferenceInput/utils/TimeAgo.tsx","../src/core/form/inputs/ReferenceInput/ReferencePreview.tsx","../src/core/form/inputs/ReferenceInput/OptionPreview.tsx","../src/core/form/inputs/ReferenceInput/CreateButton.tsx","../src/core/form/inputs/ReferenceInput/ReferenceAutocomplete.tsx","../src/core/form/inputs/ReferenceInput/AutocompleteContainer.tsx","../src/core/form/inputs/ReferenceInput/ReferenceInput.tsx","../src/core/form/studio/contexts/ReferenceInputOptions.tsx","../src/core/form/studio/contexts/reviewChanges/ReviewChangesContext.ts","../src/core/form/studio/contexts/reviewChanges/useReviewChanges.ts","../src/core/form/studio/inputs/reference/StudioReferenceInput.tsx","../src/core/form/studio/inputResolver/resolveArrayInput.ts","../src/core/form/studio/inputResolver/resolveStringInput.ts","../src/core/form/studio/inputResolver/resolveNumberInput.ts","../src/core/form/inputs/files/common/FileInputButton/styles.ts","../src/core/form/inputs/files/common/FileInputButton/FileInputButton.tsx","../src/core/form/inputs/files/common/PlaceholderText.tsx","../src/core/form/inputs/files/common/UploadPlaceholder.tsx","../src/core/form/utils/WithReferencedAsset.tsx","../src/core/form/inputs/files/common/styles.ts","../src/core/form/inputs/files/common/UploadProgress.styled.tsx","../src/core/form/inputs/files/common/UploadProgress.tsx","../src/core/form/inputs/files/ImageInput/utils/image.ts","../src/core/form/inputs/files/common/assetSource.ts","../src/core/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.styled.tsx","../src/core/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.tsx","../src/core/form/inputs/files/common/ActionsMenu.tsx","../src/core/form/inputs/files/common/UploadWarning.tsx","../src/core/form/inputs/files/common/RatioBox.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/ImageLoader.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/getBackingStoreRatio.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/2d/utils.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/2d/shapes.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/makeDragAware.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.styles.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/cursors.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/constants.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/Resize.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/ImageTool.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/calculateStyles.ts","../src/core/form/inputs/files/ImageToolInput/imagetool/HotspotImage.styles.tsx","../src/core/form/inputs/files/ImageToolInput/imagetool/HotspotImage.tsx","../src/core/form/inputs/files/ImageToolInput/useLoadImage.ts","../src/core/form/inputs/files/ImageToolInput/ImageToolInput.tsx","../src/core/form/inputs/files/ImageInput/ImageActionsMenu.tsx","../src/core/form/inputs/files/ImageInput/ImagePreview.styled.tsx","../src/core/form/inputs/files/ImageInput/ImagePreview.tsx","../src/core/form/inputs/files/ImageInput/InvalidImageWarning.tsx","../src/core/form/inputs/files/ImageInput/ImageInput.tsx","../src/core/form/studio/inputs/StudioImageInput.tsx","../src/core/form/inputs/files/FileInput/styles.ts","../src/core/form/inputs/common/helper.ts","../src/core/form/inputs/files/FileInput/FileDetails.tsx","../src/core/form/inputs/files/FileInput/FileSkeleton.tsx","../src/core/form/inputs/files/FileInput/InvalidFileWarning.tsx","../src/core/form/inputs/files/FileInput/FileInput.tsx","../src/core/form/studio/inputs/StudioFileInput.tsx","../src/core/form/components/AlertStrip.tsx","../src/core/form/hooks/useOnClickOutside.ts","../src/core/form/inputs/CrossDatasetReferenceInput/useReferenceInfo.ts","../src/core/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferencePreview.styled.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferencePreview.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/utils/useProjectId.ts","../src/core/form/inputs/CrossDatasetReferenceInput/OptionPreview.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/PreviewReferenceValue.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/ReferenceAutocomplete.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/DisabledFeatureWarning.tsx","../src/core/form/inputs/CrossDatasetReferenceInput/useFeatureEnabled.ts","../src/core/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferenceInput.tsx","../src/core/form/studio/inputs/crossDatasetReference/datastores/search.ts","../src/core/form/studio/inputs/crossDatasetReference/datastores/getReferenceInfo.ts","../src/core/form/studio/inputs/crossDatasetReference/StudioCrossDatasetReferenceInput.tsx","../src/core/form/studio/inputResolver/defaultInputs.ts","../src/core/form/studio/inputResolver/inputResolver.tsx","../src/core/form/inputs/ReferenceInput/PreviewReferenceValue.tsx","../src/core/form/inputs/ReferenceInput/ReferenceItem.tsx","../src/core/form/inputs/ReferenceInput/ReferenceField.tsx","../src/core/form/studio/inputResolver/fieldResolver.tsx","../src/core/form/inputs/arrays/ArrayOfObjectsInput/List/PreviewItem.tsx","../src/core/form/studio/inputResolver/itemResolver.tsx","../src/core/form/form-components-hooks/components.ts","../src/core/form/form-components-hooks/picks.ts","../src/core/form/form-components-hooks/componentHooks.ts","../src/core/form/studio/FormProvider.tsx","../src/core/form/studio/FormBuilder.tsx","../src/core/form/studio/defaults.ts","../src/core/form/utils/path.ts","../src/core/form/studio/focusManagers/HashFocusManager.ts","../src/core/form/studio/focusManagers/SimpleFocusManager.ts","../src/core/form/utils/mutationPatch.ts","../src/core/theme/_legacy/helpers.ts","../src/core/theme/_legacy/color.ts","../src/core/theme/_legacy/fonts.ts","../src/core/theme/_legacy/palette.ts","../src/core/theme/_legacy/tones.ts","../src/core/theme/_legacy/theme.ts","../src/core/theme/index.ts"],"sourcesContent":["import React from 'react'\nimport {Reported} from './types'\n\n// eslint-disable-next-line no-empty-function, @typescript-eslint/no-empty-function\nfunction noop() {}\n\nfunction NoopTracker({children}: {children: React.ReactNode}) {\n  return <>{children}</>\n}\n\n/** @internal */\nexport function createNoopTrackerScope<T>() {\n  return {\n    useReportedValues: noop as () => Reported<T>[],\n    Tracker: NoopTracker,\n    useReporter: noop as (id: string | null, value: T | (() => T)) => void,\n  }\n}\n","import React from 'react'\nimport {TrackerContext} from './types'\n\n/** @internal */\nexport type ReporterHook<Payload> = (\n  id: string | null,\n  value: Payload | (() => Payload),\n  isEqual?: (a: Payload, b: Payload) => boolean\n) => void\n\nfunction isFunc<T>(value: T | (() => T)): value is () => T {\n  return typeof value === 'function'\n}\n\nfunction read<T>(value: T | (() => T)): T {\n  return isFunc(value) ? value() : value\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => undefined\n\n/** @internal */\nexport type IsEqualFunction<Value> = (a: Value, b: Value) => boolean\n\n/** @internal */\nexport function createUseReporter<Value>(\n  Context: React.Context<TrackerContext<Value>>\n): ReporterHook<Value> {\n  return function useReporter(\n    // No reporting will happen if id=null\n    id: string | null,\n    value: Value | (() => Value),\n    isEqual: IsEqualFunction<Value> = Object.is\n  ) {\n    const {add, update, remove} = React.useContext(Context)\n    const previous = React.useRef<Value>()\n\n    React.useLayoutEffect(() => {\n      if (id === null) {\n        return noop\n      }\n      const current = read(value)\n      add(id, current)\n      previous.current = current\n      return () => {\n        remove(id)\n      }\n    }, [add, id, remove, value])\n\n    React.useLayoutEffect(() => {\n      const current = read(value)\n      if (\n        typeof previous.current !== 'undefined' &&\n        !isEqual(previous.current, current) &&\n        id !== null\n      ) {\n        update(id, current)\n      }\n      previous.current = current\n    })\n  }\n}\n","import {debounce} from 'lodash'\nimport createPubsub from 'nano-pubsub'\nimport {Reported} from './types'\n\nexport function createStore<Value>() {\n  const reportedValues = new Map<string, Value>()\n  const {publish, subscribe} = createPubsub<Reported<Value>[]>()\n\n  const debouncedPublish = debounce(publish, 10, {trailing: true})\n  const read = () => Array.from(reportedValues.entries())\n\n  function add(id: string, value: Value) {\n    if (reportedValues.has(id)) {\n      // eslint-disable-next-line no-console\n      // console.error(\n      //   new Error(\n      //     `Invalid call to useReporter(${id}): A component reporting on \"${id}\" is already mounted in the subtree. Make sure that all reporters within the same <Tracker> subtree have unique ids.`\n      //   )\n      // )\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function update(id: string, value: Value) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known.`)\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function remove(id: string) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known`)\n    }\n    reportedValues.delete(id)\n    debouncedPublish(read())\n  }\n\n  return {\n    add,\n    remove,\n    update,\n    read,\n    subscribe,\n  }\n}\n","import React from 'react'\nimport {Reported, TrackerContext} from './types'\nimport {createUseReporter, IsEqualFunction} from './createUseReporter'\nimport {createStore} from './createStore'\n\n// Todo: consider memozing individual functions or move the context assertion/guard to a separate step.\nlet didWarn = false\nconst useReporterGuard = (id: string): void => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        `No context provided for reporter. Make sure that the component calling \"useReporter(${id}, ...)\", is wrapped in a <Tracker> element`\n      )\n    )\n  }\n  didWarn = true\n}\n\nfunction useReportedValueGuard(): Reported<unknown>[] {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  return []\n}\n\nconst useSubscribeGuard = () => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  return () => {}\n}\n\nconst DEFAULT_CONTEXT: TrackerContext<unknown> = {\n  add: useReporterGuard,\n  update: useReporterGuard,\n  remove: useReporterGuard,\n  subscribe: useSubscribeGuard,\n  read: useReportedValueGuard,\n}\n\nlet id = 0\nconst getNextId = () => ++id\n\n/** @internal */\nexport function createTrackerScope<Value>() {\n  const Context = React.createContext(DEFAULT_CONTEXT as TrackerContext<Value>)\n\n  function useReportedValues() {\n    const context = React.useContext(Context)\n    const [values, setValues] = React.useState(context.read())\n    React.useLayoutEffect(() => {\n      setValues(context.read())\n      return context.subscribe(setValues)\n    }, [context])\n    return values\n  }\n\n  function Tracker(props: {children: React.ReactNode}) {\n    const store = React.useMemo(() => createStore<Value>(), [])\n    return <Context.Provider value={store}>{props.children}</Context.Provider>\n  }\n\n  const useReporter = createUseReporter(Context)\n\n  return {\n    Tracker,\n    useReportedValues,\n    useReporter,\n    useAutoIdReporter: (\n      value: Value | (() => Value),\n      isEqual: IsEqualFunction<Value> = Object.is\n    ) => useReporter(`element-${React.useRef(getNextId()).current}`, value, isEqual),\n  }\n}\n","// Toggle tracking of change indicator DOM positions and connectors overlay rendering\nexport const ENABLED = true\n\nexport const CORNER_RADIUS = 4\n\nexport const INTERACTIVE_STROKE_WIDTH = 16\n\nexport const CONNECTOR_MARGIN = 8\nexport const ARROW_MARGIN_X = 8\nexport const ARROW_MARGIN_Y = 2\nexport const ARROW_SIZE = 4\nexport const ARROW_THRESHOLD = 12\nexport const STROKE_WIDTH = 2\n\nexport const DEBUG = false\nexport const DEBUG_LAYER_BOUNDS = DEBUG || false\n","import {Path} from '@sanity/types'\nimport {createNoopTrackerScope, createTrackerScope} from '../components/react-track-elements'\nimport {ENABLED} from './constants'\n\n/** @internal */\nexport interface TrackedChange {\n  element: HTMLElement\n  path: Path\n  isChanged: boolean\n  hasFocus: boolean\n  hasHover: boolean\n  hasRevertHover: boolean\n  zIndex: number\n}\n\n/** @internal */\nexport interface TrackedArea {\n  element: HTMLElement\n}\n\nconst trackerScope = ENABLED\n  ? createTrackerScope<TrackedChange | TrackedArea>()\n  : createNoopTrackerScope<TrackedChange | TrackedArea>()\n\n/** @internal */\nexport const Tracker = trackerScope.Tracker\n\n/** @internal */\nexport const useReportedValues = trackerScope.useReportedValues\n\n/** @internal */\nexport const useReporter = trackerScope.useReporter\n","import {createContext} from 'react'\nimport {Path} from '@sanity/types'\n\n/** @internal */\nexport interface ConnectorContextValue {\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void | undefined\n  onSetFocus: (nextPath: Path) => void | undefined\n}\n\n/** @internal */\nexport const ConnectorContext = createContext<ConnectorContextValue>({\n  isReviewChangesOpen: false,\n  onOpenReviewChanges: () => undefined,\n  onSetFocus: () => undefined,\n} as ConnectorContextValue)\n","import * as PathUtils from '@sanity/util/paths'\nimport React, {SyntheticEvent, useCallback} from 'react'\nimport {Path} from '@sanity/types'\nimport deepCompare from 'react-fast-compare'\nimport {useReporter} from './tracker'\nimport {ConnectorContext} from './ConnectorContext'\n\n/**\n * This is used to draw the bar that wraps the diff components in the changes panel\n *\n * @internal\n */\nexport const ChangeFieldWrapper = (props: {\n  path: Path\n  children: React.ReactNode\n  hasHover: boolean\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const [isHover, setHover] = React.useState(false)\n\n  const onMouseEnter = React.useCallback(() => {\n    setHover(true)\n  }, [])\n\n  const onMouseLeave = React.useCallback(() => {\n    setHover(false)\n  }, [])\n\n  useReporter(\n    `change-${PathUtils.toString(props.path)}`,\n    () => ({\n      element: ref.current!,\n      path: props.path,\n      isChanged: true,\n      hasFocus: false,\n      hasHover: isHover,\n      hasRevertHover: props.hasHover,\n    }),\n    // note: deepCompare should be ok here since we're not comparing deep values\n    deepCompare\n  )\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      setFocusWithStopPropagation(event, onSetFocus, props.path)\n    },\n    [onSetFocus, props.path]\n  )\n\n  return (\n    <div ref={ref} onClick={handleClick} onMouseLeave={onMouseLeave} onMouseEnter={onMouseEnter}>\n      {props.children}\n    </div>\n  )\n}\n\n// Stop the propagation here, or it will trigger the parent diff component's onClick.\nfunction setFocusWithStopPropagation(\n  event: React.SyntheticEvent,\n  onSetFocus: (toPath: Path) => void,\n  path: Path\n): void {\n  event.stopPropagation()\n  onSetFocus(path)\n}\n","import {isEqual} from 'lodash'\nimport {useRef} from 'react'\n\n/**\n * This React hook should be considered an escape hatch  to make sure that a value is the same\n * on every render. SHOULD NOT BE USED IN MOST CASES.\n * @deprecated please use `useMemo` and `useCallback` strategies instead to make deps stable, this hook runs comparisons on every single render and while each comparison can be fast, it quickly adds up\n *\n * @internal\n */\nexport function useUnique<ValueType>(value: ValueType): ValueType {\n  const valueRef = useRef<ValueType>(value)\n\n  if (!isEqual(valueRef.current, value)) {\n    valueRef.current = value\n  }\n\n  return valueRef.current\n}\n","import {useMemoObservable} from 'react-rx'\nimport {concat, Observable, of} from 'rxjs'\nimport {catchError, distinctUntilChanged, map, scan, switchMap} from 'rxjs/operators'\nimport {useUnique} from './useUnique'\n\n/** @internal */\nexport type LoadingTuple<T> = [T, boolean]\n\n/** @internal */\nexport type ReactHook<TArgs, TResult> = (args: TArgs) => TResult\n\n/** @internal */\n// overloads to handle types where an initial value is passed\nexport function createHookFromObservableFactory<T, TArg = void>(\n  observableFactory: (arg: TArg) => Observable<T>,\n  initialValue: T\n): ReactHook<TArg, LoadingTuple<T>>\n/** @internal */\nexport function createHookFromObservableFactory<T, TArg = void>(\n  observableFactory: (arg: TArg) => Observable<T>,\n  initialValue?: T\n): ReactHook<TArg, LoadingTuple<T | undefined>>\n\n/**\n * A function that will create a hook from a function that returns an\n * observable. The parameters of the hook will be the parameters of the function\n * and the return of the hook will be a loading tuple with the value of the\n * observable at the first index and a boolean with the loading state as the\n * second index.\n *\n * The loading state will become true as soon as new incoming args are given and\n * will flip to false when the observable from the function emits the next\n * value.\n *\n * @internal\n */\nexport function createHookFromObservableFactory<T, TArg = void>(\n  observableFactory: (arg: TArg) => Observable<T>,\n  initialValue?: T\n): ReactHook<TArg, LoadingTuple<T | undefined>> {\n  const initialLoadingTuple: LoadingTuple<T | undefined> = [initialValue, true]\n  const initialResult = {type: 'tuple', tuple: initialLoadingTuple} as const\n\n  return function useLoadableFromCreateLoadable(_arg: TArg) {\n    // @todo refactor callsites to make use of useMemo so that this hook can be removed\n    const memoArg = useUnique(_arg)\n    const result = useMemoObservable(\n      () =>\n        of(memoArg).pipe(\n          switchMap((arg) =>\n            concat(\n              of({type: 'loading'} as const),\n              observableFactory(arg).pipe(map((value) => ({type: 'value', value} as const)))\n            )\n          ),\n          scan(([prevValue], next): LoadingTuple<T | undefined> => {\n            if (next.type === 'loading') return [prevValue, true]\n            return [next.value, false]\n          }, initialLoadingTuple),\n          distinctUntilChanged(([prevValue, prevIsLoading], [nextValue, nextIsLoading]) => {\n            if (prevValue !== nextValue) return false\n            if (prevIsLoading !== nextIsLoading) return false\n            return true\n          }),\n          map((tuple) => ({type: 'tuple', tuple} as const)),\n          catchError((error) => of({type: 'error', error} as const))\n        ),\n      [memoArg],\n      initialResult\n    )\n\n    if (result.type === 'error') throw result.error\n\n    return result.tuple\n  }\n}\n","/**\n * @internal\n */\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {SanityDocument} from '@sanity/types'\nimport {isNonNullable} from './isNonNullable'\n\n/** @internal */\n// nominal/opaque type hack\nexport type Opaque<T, K> = T & {__opaqueId__: K}\n\n/** @internal */\nexport type DraftId = Opaque<string, 'draftId'>\n\n/** @internal */\nexport type PublishedId = Opaque<string, 'publishedId'>\n\n/** @internal */\nexport const DRAFTS_FOLDER = 'drafts'\nconst DRAFTS_PREFIX = `${DRAFTS_FOLDER}.`\n\n/** @internal */\nexport function isDraft(document: SanityDocument): boolean {\n  return isDraftId(document._id)\n}\n\n/** @internal */\nexport function isDraftId(id: string): id is DraftId {\n  return id.startsWith(DRAFTS_PREFIX)\n}\n\n/** @internal */\nexport function getIdPair(id: string): {draftId: DraftId; publishedId: PublishedId} {\n  return {\n    draftId: getDraftId(id),\n    publishedId: getPublishedId(id),\n  }\n}\n\n/** @internal */\nexport function isPublishedId(id: string): id is PublishedId {\n  return !isDraftId(id)\n}\n\n/** @internal */\nexport function getDraftId(id: string): DraftId {\n  return isDraftId(id) ? id : ((DRAFTS_PREFIX + id) as DraftId)\n}\n\n/** @internal */\nexport function getPublishedId(id: string): PublishedId {\n  return (isDraftId(id) ? id.slice(DRAFTS_PREFIX.length) : id) as PublishedId\n}\n\n/** @internal */\nexport function createDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getDraftId(document._id),\n  }\n}\n\n/** @internal */\nexport function newDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: DRAFTS_PREFIX,\n  }\n}\n\n/** @internal */\nexport function createPublishedFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getPublishedId(document._id),\n  }\n}\n\n/**\n * Takes a list of documents and collates draft/published pairs into single entries\n * `{id: <published id>, draft?: <draft document>, published?: <published document>}`\n *\n * Note: because Map is ordered by insertion key the resulting array will be ordered by whichever\n * version appeared first\n *\n * @internal\n */\nexport interface CollatedHit<T extends {_id: string} = {_id: string}> {\n  id: string\n  type: string\n  draft?: T\n  published?: T\n}\n\n/** @internal */\nexport function collate<T extends {_id: string; _type: string}>(documents: T[]): CollatedHit<T>[] {\n  const byId = documents.reduce((res, doc) => {\n    const publishedId = getPublishedId(doc._id)\n    let entry = res.get(publishedId)\n    if (!entry) {\n      entry = {id: publishedId, type: doc._type, published: undefined, draft: undefined}\n      res.set(publishedId, entry)\n    }\n\n    entry[publishedId === doc._id ? 'published' : 'draft'] = doc\n    return res\n  }, new Map())\n\n  return Array.from(byId.values())\n}\n\n/** @internal */\n// Removes published documents that also has a draft\nexport function removeDupes(documents: SanityDocument[]): SanityDocument[] {\n  return collate(documents)\n    .map((entry) => entry.draft || entry.published)\n    .filter(isNonNullable)\n}\n","/** @internal */\nexport const EMPTY_OBJECT: Record<string, unknown> = Object.freeze({})\n\n/** @internal */\nexport const EMPTY_ARRAY: never[] = Object.freeze([]) as never[]\n","import {GlobalErrorChannel} from '../components/globalErrorHandler'\n\n/**\n * Gets the global scope instance in a given environment.\n *\n * The strategy is to return the most modern, and if not, the most common:\n * - The `globalThis` variable is the modern approach to accessing the global scope\n * - The `window` variable is the global scope in a web browser\n * - The `self` variable is the global scope in workers and others\n * - The `global` variable is the global scope in Node.js\n */\nfunction getGlobalScope(): typeof globalThis & {__sanityErrorChannel?: GlobalErrorChannel} {\n  if (typeof globalThis !== 'undefined') return globalThis\n  if (typeof window !== 'undefined') return window\n  if (typeof self !== 'undefined') return self\n  if (typeof global !== 'undefined') return global\n\n  throw new Error('@sanity/ui: could not locate global scope')\n}\n\n/** @internal */\nexport const globalScope = getGlobalScope()\n","/** @internal */\nexport function isArray(value: unknown): value is unknown[] {\n  return Array.isArray(value)\n}\n","/**\n * @internal\n */\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return Boolean(value) && typeof value === 'object' && !Array.isArray(value)\n}\n","/** @internal */\nexport function isString(value: unknown): value is string {\n  return typeof value === 'string'\n}\n","/** @internal */\nexport function isTruthy<T>(value: T | false): value is T {\n  return Boolean(value)\n}\n","import {ResizeObserver as Polyfill, ResizeObserverEntry} from '@juggle/resize-observer'\nimport createPubSub, {Subscriber} from 'nano-pubsub'\n\nconst ResizeObserver: typeof Polyfill =\n  typeof document === 'object' && typeof window === 'object' && window.ResizeObserver\n    ? window.ResizeObserver\n    : Polyfill\n\n/** @internal */\nexport interface SharedResizeObserver {\n  observe: (\n    element: Element,\n    observer: Subscriber<ResizeObserverEntry>,\n    options?: ResizeObserverOptions\n  ) => () => void\n}\n\n/** @internal */\nexport const createSharedResizeObserver = (): SharedResizeObserver => {\n  const event = createPubSub<ResizeObserverEntry[]>()\n\n  const resizeObserver = new ResizeObserver((entries: ResizeObserverEntry[]) =>\n    event.publish(entries)\n  )\n\n  return {\n    observe: (\n      element: Element,\n      observer: Subscriber<ResizeObserverEntry>,\n      options?: ResizeObserverOptions\n    ) => {\n      const unsubscribe = event.subscribe((entries) => {\n        const entry = entries.find((e) => e.target === element)\n        if (entry) {\n          observer(entry)\n        }\n      })\n\n      resizeObserver.observe(element, options)\n\n      return () => {\n        unsubscribe()\n        resizeObserver.unobserve(element)\n      }\n    },\n  }\n}\n\n/** @internal */\nexport const resizeObserver = createSharedResizeObserver()\n","import {SchemaTypeDefinition} from '@sanity/types'\n\nconst BUNDLED_DOC_TYPES = ['sanity.imageAsset', 'sanity.fileAsset']\n\n/**\n * @internal\n */\nexport function _isSanityDocumentTypeDefinition(\n  def: SchemaTypeDefinition\n): def is SchemaTypeDefinition<'document'> {\n  return def.type === 'document' && BUNDLED_DOC_TYPES.includes(def.name)\n}\n\n/**\n * @internal\n */\nexport function _isCustomDocumentTypeDefinition(\n  def: SchemaTypeDefinition\n): def is SchemaTypeDefinition<'document'> {\n  return def.type === 'document' && !_isSanityDocumentTypeDefinition(def)\n}\n","type SearchPathSegment = string | number | []\n\nconst GROQ_KEYWORDS = ['match', 'in', 'asc', 'desc', 'true', 'false', 'null']\nconst VALID_FIELD = /^[a-zA-Z_][a-zA-Z0-9_]*$/\n\n/** @internal */\nexport const fieldNeedsEscape = (fieldName: string): boolean =>\n  !VALID_FIELD.test(fieldName) || GROQ_KEYWORDS.includes(fieldName)\n\n/** @internal */\nexport const escapeField = (fieldName: string): string => `[\"${fieldName}\"]`\n\nconst escapeFirst = (fieldName: string): string => `@${escapeField(fieldName)}`\n\nconst isEmptyArray = (value: unknown): value is [] => Array.isArray(value) && value.length === 0\n\n/** @internal */\nexport const joinPath = (pathArray: SearchPathSegment[]): string => {\n  let path = ''\n  for (let i = 0; i < pathArray.length; i++) {\n    const pathSegment = pathArray[i]\n    if (isEmptyArray(pathSegment)) {\n      path += `[]`\n      continue\n    }\n\n    if (typeof pathSegment === 'number') {\n      path += `[${pathSegment}]`\n      continue\n    }\n\n    const isFirst = i === 0\n    const needsEscape = fieldNeedsEscape(pathSegment)\n\n    if (needsEscape) {\n      path = isFirst ? escapeFirst(pathSegment) : `${path}${escapeField(pathSegment)}`\n    } else {\n      path = isFirst ? pathSegment : `${path}.${pathSegment}`\n    }\n  }\n\n  return path\n}\n","const FONT_SANS_SERIF = `-apple-system, BlinkMacSystemFont, \\\\'Segoe UI\\\\', Roboto, \\\\'Helvetica Neue\\\\', Helvetica, Arial, system-ui, sans-serif`\nconst FONT_MONOSPACE = `-apple-system-ui-monospace, \\\\'SF Mono\\\\', Menlo, Monaco, Consolas, monospace`\n\n/** @internal */\nexport const uncaughtErrorHandler = (): string =>\n  // prettier-ignore\n  [\n    `window.onerror = function(m,u,l,c,e) {`,\n      `var p=window.location.port;`,\n      `var h=window.location.protocol+'//'+window.location.hostname+(p?':'+p:'');`,\n      `var r=document.getElementById('sanity');`,\n      `while(r.firstChild){r.removeChild(r.firstChild);}`,\n      `var s=document.createElement('style');`,\n      `s.appendChild(document.createTextNode('`,\n        `html,body,#sanityBody,#sanity,#sanityError{height:100%;}`,\n        `body{-webkit-font-smoothing:antialiased;margin:0;}`,\n        `#sanityError{position:fixed;top:0;left:0;width:100%;height:100%;overflow:auto;background-color:#fff;color:#121923;font-family:${FONT_SANS_SERIF};font-size:16px;line-height:21px;min-height:100%;}`,\n        `#sanityError>div{background-color:#fff;max-width:960px;margin:0 auto;padding:47px 32px 52px;}`,\n        `@media(min-width:512px){`,\n          `#sanityError>div{`,\n            `padding:47px 84px;`,\n          `}`,\n        `}`,\n        `#sanityError button{-webkit-font-smoothing:inherit;font:inherit;font-weight:500;background-color:#2276FC;color:#fff;padding:7px 12px;border-radius:3px;border:0;}`,\n        `#sanityError button:hover{background-color:#1E63D0;}`,\n        `#sanityError button:active{background-color:#1B50A5;}`,\n      `'));`,\n      `document.head.appendChild(s);`,\n      `var f=document.createElement('div');`,\n      `f.id='sanityError';`,\n      `f.innerHTML='`,\n        `<div>`,\n          `<h1 style=\"font-size:21px;line-height:27px;margin: 0 0 10px;\">Unhandled error</h1>`,\n          `<p style=\"color:#66758D;margin:10px 0 14px;\">Encountered an unhandled error in this Studio.</p>`,\n          `<button class=\"sanity-error-handler__reload-btn\" type=\"button\">Reload page</button>`,\n          `<pre style=\"background-color:#FDEBEA;color:#C3362C;font-size:13px;line-height:17px;padding:8px 12px;border-radius:3px;margin:32px 0 0;overflow:auto;\">`,\n            `<code style=\"font-family:${FONT_MONOSPACE};\">`,\n              `'+e.stack.replaceAll(h,'')+'`,\n            `</code>`,\n          `</pre>`,\n        `</div>`,\n      `';`,\n      `var b=f.querySelector('.sanity-error-handler__reload-btn');`,\n      `if(b){`,\n        `b.onclick=function() {`,\n          `window.location.reload();`,\n        `}`,\n      `};`,\n      `r.appendChild(f);`,\n    `};`,\n  ].join('')\n","import {useMemoObservable} from 'react-rx'\nimport {Observable, of, OperatorFunction} from 'rxjs'\nimport {catchError, map} from 'rxjs/operators'\n\n/** @internal */\nexport type LoadableState<T> = LoadingState | LoadedState<T> | ErrorState\n\n/** @internal */\nexport interface LoadingState {\n  value: undefined\n  error: null\n  isLoading: true\n}\n\n/** @internal */\nexport interface LoadedState<T> {\n  value: T\n  error: null\n  isLoading: false\n}\n\n/** @internal */\nexport interface ErrorState {\n  value: undefined\n  error: Error\n  isLoading: false\n}\n\nconst LOADING_STATE: LoadingState = {\n  isLoading: true,\n  value: undefined,\n  error: null,\n}\n\n/** @internal */\nexport function useLoadable<T>(value$: Observable<T>): LoadableState<T | undefined>\n/** @internal */\nexport function useLoadable<T>(value$: Observable<T>, initialValue: T): LoadableState<T>\n/** @internal */\nexport function useLoadable<T>(\n  value$: Observable<T>,\n  initialValue?: T\n): LoadableState<T | undefined> {\n  const initial: LoadableState<T> =\n    typeof initialValue === 'undefined'\n      ? LOADING_STATE\n      : {isLoading: false, value: initialValue, error: null}\n\n  return useMemoObservable(() => value$.pipe(asLoadable()), [value$], initial)\n}\n\n/** @internal */\nexport function asLoadable<T>(): OperatorFunction<T, LoadableState<T>> {\n  return (value$: Observable<T>) =>\n    value$.pipe(\n      map((value) => ({isLoading: false, value, error: null} as const)),\n      catchError((error): Observable<ErrorState> => of({isLoading: false, value: undefined, error}))\n    )\n}\n","import {throttle} from 'lodash'\nimport type {ThrottleSettings} from 'lodash'\nimport {useMemo} from 'react'\n\n/**\n * @internal\n *\n * @example\n * ```tsx\n * // First create a callback using Reacts `useCallback` hook\n * const myCallback = useCallback(() => {\n *   // this is not throttled\n * }, [])\n *\n * // Then make a throttled version using the `useThrottledCallback` hook\n * const myThrottledCallback = useThrottledCallback(myCallback, 100)\n *\n * // Call the throttled callback\n * <Button onClick={myThrottledCallback} />\n * ```\n */\nexport function useThrottledCallback(\n  callback: (...args: any[]) => any,\n  wait: number,\n  options: ThrottleSettings\n): (...args: any[]) => any {\n  const throttledCallback = useMemo(\n    () => throttle(callback, wait, options),\n    [callback, options, wait]\n  )\n\n  return throttledCallback\n}\n","import styled, {css} from 'styled-components'\nimport {Theme} from '@sanity/ui'\n\ninterface ThemeContext {\n  theme: Theme\n}\n\ninterface RootProps {\n  focus: boolean\n  hover: boolean\n  changed?: boolean\n  isReviewChangeOpen: boolean\n  disabled?: boolean\n  $withHoverEffect?: boolean\n}\n\nconst animationSpeed = 250\n\nexport const ChangeBarWrapper = styled.div(({changed, disabled, isReviewChangeOpen}: RootProps) => {\n  if (disabled)\n    return css`\n      ${ChangeBar} {\n        display: none;\n      }\n    `\n\n  return css`\n    --change-bar-offset: 2px;\n\n    display: flex;\n    position: relative;\n\n    @media (hover: hover) {\n      &:hover {\n        z-index: 10;\n      }\n    }\n\n    /* hide when field is not changed */\n    ${!changed &&\n    css`\n      ${ChangeBar} {\n        opacity: 0;\n        pointer-events: none;\n      }\n    `}\n\n    /* hide hover effect when review changes is open */\n    ${isReviewChangeOpen &&\n    css`\n      ${ChangeBarButton} {\n        opacity: 0;\n      }\n    `}\n  `\n})\n\nexport const FieldWrapper = styled.div`\n  flex-grow: 1;\n  min-width: 0;\n`\n\nexport const ChangeBar = styled.div<{$zIndex: number}>`\n  position: relative;\n  opacity: 1;\n  transition: opacity 100ms;\n  z-index: ${({$zIndex}) => $zIndex};\n`\n\nexport const ChangeBarMarker = styled.div(({theme}: ThemeContext) => {\n  /* these colours aren't freely available on the current theme */\n  const notSelectedColor = theme.sanity.color.spot.yellow\n  const screenMedium = theme.sanity.media[0]\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: var(--change-bar-offset);\n    width: 2px;\n    bottom: 0;\n    background-color: ${notSelectedColor};\n    border-radius: 1px;\n\n    @media (min-width: ${screenMedium}px) {\n      display: unset;\n    }\n  `\n})\n\nexport const ChangeBarButton = styled.button(\n  ({theme, $withHoverEffect}: {theme: Theme; $withHoverEffect?: boolean}) => {\n    /* these colours aren't freely available on the current theme */\n    const notSelectedColor = theme.sanity.color.spot.yellow\n\n    return css`\n      appearance: none;\n      border: 0;\n      outline: 0;\n      display: block;\n      padding: 0;\n      background: transparent;\n      opacity: 0;\n      position: absolute;\n      height: 100%;\n      cursor: pointer;\n      pointer-events: all;\n      left: calc(-0.25rem + var(--change-bar-offset));\n      width: 1rem;\n      transition: opacity ${animationSpeed}ms;\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      &:after {\n        content: '';\n        width: 16px;\n        height: calc(100% + 14px);\n        display: block;\n        position: absolute;\n        top: -7px;\n        left: -3px;\n        border-radius: 8px;\n        background: ${notSelectedColor};\n      }\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      ${$withHoverEffect &&\n      css`\n        @media (hover: hover) {\n          &:hover {\n            opacity: 0.2;\n          }\n        }\n      `}\n    `\n  }\n)\n","import {useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {ConnectorContext} from './ConnectorContext'\nimport {\n  ChangeBarWrapper,\n  FieldWrapper,\n  ChangeBar,\n  ChangeBarMarker,\n  ChangeBarButton,\n} from './ElementWithChangeBar.styled'\n\nexport function ElementWithChangeBar(props: {\n  children: React.ReactNode\n  disabled?: boolean\n  hasFocus: boolean\n  isChanged?: boolean\n  withHoverEffect?: boolean\n}) {\n  const {children, disabled, hasFocus, isChanged, withHoverEffect = true} = props\n\n  const [hover, setHover] = useState(false)\n  const {onOpenReviewChanges, isReviewChangesOpen} = React.useContext(ConnectorContext)\n  const {zIndex} = useLayer()\n\n  const handleMouseEnter = useCallback(() => setHover(true), [])\n  const handleMouseLeave = useCallback(() => setHover(false), [])\n\n  const changeBar = useMemo(\n    () =>\n      disabled || !isChanged ? null : (\n        <ChangeBar data-testid=\"change-bar\" $zIndex={zIndex}>\n          <ChangeBarMarker data-testid=\"change-bar__marker\" />\n\n          <ChangeBarButton\n            aria-label=\"Review changes\"\n            data-testid=\"change-bar__button\"\n            onClick={isReviewChangesOpen ? undefined : onOpenReviewChanges}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n            tabIndex={-1}\n            type=\"button\"\n            $withHoverEffect={withHoverEffect}\n          />\n        </ChangeBar>\n      ),\n    [\n      disabled,\n      isChanged,\n      zIndex,\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      handleMouseEnter,\n      handleMouseLeave,\n      withHoverEffect,\n    ]\n  )\n\n  return (\n    <ChangeBarWrapper\n      changed={isChanged}\n      data-testid=\"change-bar-wrapper\"\n      disabled={disabled}\n      focus={hasFocus}\n      hover={hover}\n      isReviewChangeOpen={isReviewChangesOpen}\n    >\n      <FieldWrapper data-testid=\"change-bar__field-wrapper\">{children}</FieldWrapper>\n      {changeBar}\n    </ChangeBarWrapper>\n  )\n}\n","import {useLayer} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport deepCompare from 'react-fast-compare'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {EMPTY_ARRAY} from '../util'\nimport {useReporter} from './tracker'\nimport {ElementWithChangeBar} from './ElementWithChangeBar'\n\nconst ChangeBarWrapper = memo(function ChangeBarWrapper(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    disabled?: boolean\n    path: Path\n    hasFocus: boolean\n    isChanged?: boolean\n    withHoverEffect?: boolean\n  }\n) {\n  const {\n    children,\n    className,\n    disabled,\n    hasFocus,\n    isChanged,\n    path = EMPTY_ARRAY,\n    withHoverEffect,\n  } = props\n  const layer = useLayer()\n  const [hasHover, setHover] = React.useState(false)\n  const onMouseEnter = React.useCallback(() => setHover(true), [])\n  const onMouseLeave = React.useCallback(() => setHover(false), [])\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  useReporter(\n    disabled ? null : `field-${PathUtils.toString(path)}`,\n    () => ({\n      element: ref.current!,\n      path: path,\n      isChanged: isChanged,\n      hasFocus: hasFocus,\n      hasHover: hasHover,\n      zIndex: layer.zIndex,\n    }),\n    deepCompare // note: deepCompare should be ok here since we're not comparing deep values\n  )\n\n  return (\n    <div ref={ref} className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n      <ElementWithChangeBar\n        hasFocus={hasFocus}\n        isChanged={isChanged}\n        disabled={disabled}\n        withHoverEffect={withHoverEffect}\n      >\n        {children}\n      </ElementWithChangeBar>\n    </div>\n  )\n})\n\n/** @internal */\nexport interface ChangeIndicatorProps {\n  children?: React.ReactNode\n  className?: string\n  disabled?: boolean\n  path: Path\n  hasFocus: boolean\n  isChanged: boolean\n  withHoverEffect?: boolean\n}\n\n/** @internal */\nexport function ChangeIndicator(props: ChangeIndicatorProps) {\n  const {children, className, disabled, hasFocus, isChanged, path, withHoverEffect} = props\n  return (\n    <ChangeBarWrapper\n      className={className}\n      disabled={disabled}\n      path={path}\n      hasFocus={hasFocus}\n      isChanged={isChanged}\n      withHoverEffect={withHoverEffect}\n    >\n      {children}\n    </ChangeBarWrapper>\n  )\n}\n","import React from 'react'\nimport {Path} from '@sanity/types'\n\n/** @internal */\nexport interface ChangeIndicatorContextValue {\n  value?: unknown\n  focusPath: Path\n  path: Path\n  fullPath: Path\n  isChanged: boolean\n}\n\n/** @internal */\nexport const ChangeIndicatorContext: React.Context<ChangeIndicatorContextValue> =\n  React.createContext({\n    path: [],\n    fullPath: [],\n    focusPath: [],\n    isChanged: false,\n  } as ChangeIndicatorContextValue)\n","import React from 'react'\nimport {PubSub} from 'nano-pubsub'\n\nexport const ScrollContext = React.createContext<null | PubSub<Event>>(null)\n","import React from 'react'\nimport {ScrollContext} from './scrollContext'\nimport {Subscriber} from 'nano-pubsub'\n\n/** @internal */\nexport function useOnScroll(callback: Subscriber<Event>) {\n  const parentContext = React.useContext(ScrollContext)\n  React.useEffect(() => {\n    return parentContext?.subscribe(callback)\n  }, [callback])\n}\n","import {useForwardedRef} from '@sanity/ui'\nimport createPubSub from 'nano-pubsub'\nimport React, {useContext, useEffect, useMemo} from 'react'\nimport {ScrollContext} from './scrollContext'\n\n/** @internal */\nexport interface ScrollContainerProps<T extends React.ElementType>\n  extends Omit<React.HTMLProps<T>, 'as' | 'onScroll'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  onScroll?: (event: Event) => () => void\n}\n\nconst noop = () => undefined\n\n/**\n * This provides a utility function for use within Sanity Studios to create scrollable containers\n * It also provides a way for components inside a scrollable container to track onScroll on their first parent scroll container\n * NOTE: this is used by different studio utilities to track positions of elements on screen\n * NOTE: It will call any given `onScroll` callback with a Native DOM Event, and not a React Synthetic event\n * NOTE: It will not make sure the element is actually scrollable, this still needs to be done with css as usual\n *\n * @internal\n */\nexport const ScrollContainer = React.forwardRef(function ScrollContainer<\n  T extends React.ElementType = 'div'\n>(props: ScrollContainerProps<T>, ref: React.ForwardedRef<HTMLDivElement>) {\n  const {as = 'div', onScroll, ...rest} = props\n  const forwardedRef = useForwardedRef(ref)\n\n  // const selfRef = useRef<HTMLElement | null>(null)\n  const parentContext = useContext(ScrollContext)\n  const childContext = useMemo(() => createPubSub<Event>(), [])\n\n  useEffect(() => {\n    if (onScroll) {\n      // emit scroll events from children\n      return childContext.subscribe(onScroll)\n    }\n    return noop\n  }, [childContext, onScroll])\n\n  useEffect(() => {\n    // let events bubble up\n    if (parentContext) {\n      return childContext.subscribe(parentContext.publish)\n    }\n    return noop\n  }, [parentContext, childContext])\n\n  useEffect(() => {\n    const handleScroll = (event: Event) => {\n      childContext.publish(event)\n    }\n\n    const el = forwardedRef.current\n\n    if (!el) {\n      return undefined\n    }\n\n    el.addEventListener('scroll', handleScroll, {\n      passive: true,\n      capture: true,\n    })\n\n    return () => {\n      el.removeEventListener('scroll', handleScroll)\n    }\n  }, [childContext, forwardedRef])\n\n  return (\n    <ScrollContext.Provider value={childContext}>\n      {React.createElement(as, {ref: forwardedRef, 'data-testid': 'scroll-container', ...rest})}\n    </ScrollContext.Provider>\n  )\n})\n","import React from 'react'\nimport {useOnScroll} from './hooks'\nimport {ScrollEventHandler} from './types'\n\n/** @internal */\nexport interface ScrollMonitorProps {\n  onScroll: ScrollEventHandler\n  children?: React.ReactNode\n}\n\n/** @internal */\nexport function ScrollMonitor({onScroll, children}: ScrollMonitorProps) {\n  useOnScroll(onScroll)\n  return <>{children}</>\n}\n","import {isKeyedObject} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {TrackedChange, TrackedArea} from '../tracker'\n\nexport function findMostSpecificTarget(\n  targetType: 'change' | 'field',\n  id: string,\n  values: Map<string, TrackedChange | TrackedArea>\n): TrackedChange | undefined {\n  const pathString = id.slice(id.indexOf('-') + 1) || '[]'\n  const path = PathUtils.fromString(pathString)\n  const exactId = `${targetType}-${PathUtils.toString(path)}`\n  if (values.has(exactId)) {\n    return values.get(exactId) as TrackedChange\n  }\n\n  let mostSpecific: TrackedChange | undefined\n  for (const [targetId, target] of values) {\n    if (!('path' in target) || !targetId.startsWith(targetType)) {\n      continue\n    }\n\n    const numEqual = PathUtils.numEqualSegments(path, target.path)\n    const lastPathSegment = target.path[target.path.length - 1]\n    const pathOnlyDiffersByKey =\n      numEqual === target.path.length - 1 && isKeyedObject(lastPathSegment)\n\n    if (numEqual === 0) {\n      continue\n    } else if (numEqual !== target.path.length && !pathOnlyDiffersByKey) {\n      /*\n       * We only allow matching to shorter paths if the last element in the path is a keyed object.\n       * `foo.bar.portableTextField[_key=abc123]` should resolve to `foo.bar.portableTextField`.\n       *\n       * Otherwise we'll only get a connector line when you add new elements to a portable text\n       * field and not when you alter an existing part.\n       */\n      continue\n    }\n\n    mostSpecific = target\n\n    if (numEqual === path.length) {\n      // On exact match, return early\n      break\n    }\n  }\n\n  // if (!mostSpecific) {\n  //   throw new Error(`target not found: \"${id}\"`)\n  // }\n\n  return mostSpecific\n}\n","import {Reported} from '../../components/react-track-elements'\nimport {TrackedArea, TrackedChange} from '../tracker'\n\nexport function isChangeBar(\n  v: Reported<TrackedArea | TrackedChange>\n): v is Reported<TrackedChange> {\n  return v[0] !== 'changePanel'\n}\n","export function hasOverflowScroll(el: HTMLElement): boolean {\n  const overflow = getComputedStyle(el).overflow\n\n  return overflow.includes('auto') || overflow.includes('scroll')\n}\n\n// Check whether an element is currently scrollable (meaning it must both have overflow scroll *and* content overflowing)\nexport function isScrollable(el: HTMLElement): boolean {\n  const scrollableContent = el.scrollHeight !== el.offsetHeight || el.scrollWidth !== el.offsetWidth\n\n  return scrollableContent && hasOverflowScroll(el)\n}\n","import {Rect} from '../overlay/types'\nimport {isScrollable} from './scrollUtils'\n\nconst SCROLL_INTO_VIEW_TOP_PADDING = -15\n\nexport function scrollIntoView(field: {element: HTMLElement; rect: Rect; bounds: Rect}): void {\n  const element = field.element\n\n  /*\n   * Start at current element and check the parent for a scroll\n   * bar until a scrollable element has been found.\n   */\n  let parentElementWithScroll: HTMLElement | null = element\n\n  while (!isScrollable(parentElementWithScroll)) {\n    parentElementWithScroll = parentElementWithScroll.parentElement\n\n    /*\n     * If the parent element is null it means we are at the root\n     * element, which has no parent. Since no scroll bar has\n     * been found so far it does not make sense to scroll.\n     */\n    if (!parentElementWithScroll) {\n      return\n    }\n  }\n\n  parentElementWithScroll.scroll({\n    top:\n      parentElementWithScroll.scrollTop +\n      field.rect.top -\n      field.bounds.top +\n      SCROLL_INTO_VIEW_TOP_PADDING,\n    left: 0,\n    behavior: 'smooth',\n  })\n}\n","import {Rect} from '../overlay/types'\nimport {hasOverflowScroll} from './scrollUtils'\n\nexport const getOffsetsTo = (\n  source: HTMLElement,\n  target: HTMLElement\n): {rect: Rect; bounds: Rect} => {\n  const bounds: Rect = {\n    top: 0,\n    left: 0,\n    height: target.offsetHeight,\n    width: target.offsetWidth,\n  }\n\n  const rect: Rect = {\n    top: 0,\n    left: 0,\n    height: source.offsetHeight,\n    width: source.offsetWidth,\n  }\n\n  let foundScrollContainer = false\n  let el: HTMLElement | null = source\n\n  while (el && el !== target && target.contains(el)) {\n    if (foundScrollContainer) {\n      bounds.top += el.offsetTop\n      bounds.left += el.offsetLeft\n    }\n\n    if (hasOverflowScroll(el)) {\n      bounds.top = el.offsetTop\n      bounds.height = el.offsetHeight\n      bounds.left = el.offsetLeft\n      bounds.width = el.offsetWidth\n\n      foundScrollContainer = true\n    }\n\n    rect.top += el.offsetTop - el.scrollTop\n    rect.left += el.offsetLeft - el.scrollLeft\n\n    el = el.offsetParent as HTMLElement\n  }\n\n  return {rect, bounds}\n}\n","import {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_SIZE,\n  ARROW_THRESHOLD,\n  CORNER_RADIUS,\n} from '../constants'\nimport {ConnectorLine} from './types'\n\nexport function arrowPath(x: number, y: number, dir: number): string {\n  return [\n    `M ${x - ARROW_SIZE} ${y - ARROW_SIZE * dir} `,\n    `L ${x} ${y}`,\n    `L ${x + ARROW_SIZE} ${y - ARROW_SIZE * dir}`,\n  ].join('')\n}\n\nfunction moveTo(x: number, y: number) {\n  return `M${x} ${y}`\n}\n\nfunction lineTo(x: number, y: number) {\n  return `L${x} ${y}`\n}\n\nfunction join(strings: string[], delim = '') {\n  return strings.join(delim)\n}\n\nfunction quadCurve(x1: number, y1: number, x: number, y: number) {\n  return `Q${x1} ${y1} ${x} ${y}`\n}\n\nexport function generateConnectorPath(line: ConnectorLine): string {\n  const {from, to} = line\n  const {left: fromX, top: fromY} = from\n  const {left: toX, top: toY} = to\n\n  const cmds: string[] = []\n\n  // Calculate maximum corner radius\n  const r1 = Math.min(CORNER_RADIUS, Math.abs(fromY - toY) / 2)\n\n  // FROM\n  if (from.isAbove) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY - ARROW_THRESHOLD + ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY - CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else if (from.isBelow) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY + ARROW_THRESHOLD - ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY + CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else {\n    cmds.push(moveTo(fromX, fromY))\n  }\n\n  // TO\n  if (to.isAbove) {\n    if (fromY < to.bounds.top) {\n      cmds.push(\n        lineTo(to.bounds.left - 8 - r1, fromY),\n        quadCurve(to.bounds.left - 8, fromY, to.bounds.left - 8, fromY + r1),\n        lineTo(to.bounds.left - 8, toY - r1),\n        quadCurve(to.bounds.left - 8, toY, to.bounds.left - 8 + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    }\n  } else if (to.isBelow) {\n    if (fromY > to.bounds.top + to.bounds.height) {\n      // curl around\n      cmds.push(\n        lineTo(to.bounds.left - ARROW_MARGIN_X - r1, fromY),\n        quadCurve(\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY - r1\n        ),\n        lineTo(to.bounds.left - ARROW_MARGIN_X, toY + r1),\n        quadCurve(to.bounds.left - ARROW_MARGIN_X, toY, to.bounds.left - ARROW_MARGIN_X + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    }\n  } else if (fromY < toY) {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY + r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY - r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  } else {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY - r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY + r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  }\n\n  return join(cmds)\n}\n","import {ARROW_MARGIN_Y, ARROW_THRESHOLD, CONNECTOR_MARGIN} from '../constants'\nimport {ConnectorLinePoint, Rect} from './types'\n\nfunction getConnectorLinePoint(rect: Rect, bounds: Rect): ConnectorLinePoint {\n  const centerY = rect.top + rect.height / 2\n  const isAbove = rect.top + rect.height < bounds.top + ARROW_MARGIN_Y\n  const isBelow = rect.top > bounds.top + bounds.height - ARROW_MARGIN_Y\n\n  return {\n    bounds: bounds,\n    left: rect.left,\n    top: centerY,\n    centerY,\n    startY: rect.top + CONNECTOR_MARGIN,\n    endY: rect.top + rect.height - CONNECTOR_MARGIN,\n    isAbove,\n    isBelow,\n    outOfBounds: isAbove || isBelow,\n  }\n}\n\ninterface Connector {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport function mapConnectorToLine(connector: Connector): {\n  from: ConnectorLinePoint\n  to: ConnectorLinePoint\n} {\n  const fromBounds = {\n    top: connector.from.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.from.bounds.top + connector.from.bounds.height - ARROW_THRESHOLD,\n    left: connector.from.bounds.left,\n    right: connector.from.bounds.left + connector.from.bounds.width,\n    width: connector.from.bounds.width,\n    height: connector.from.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const from = getConnectorLinePoint(connector.from.rect, fromBounds)\n  from.left = connector.from.rect.left + connector.from.rect.width + 1\n\n  const toBounds = {\n    top: connector.to.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.to.bounds.top + connector.to.bounds.height - ARROW_THRESHOLD,\n    left: connector.to.bounds.left,\n    right: connector.to.bounds.left + connector.to.bounds.width,\n    width: connector.to.bounds.width,\n    height: connector.to.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const to = getConnectorLinePoint(connector.to.rect, toBounds)\n\n  const maxStartY = Math.max(to.startY, from.startY)\n\n  // Align from <-> to vertically\n  from.top = Math.min(maxStartY, from.endY)\n  if (from.top < toBounds.top) {\n    from.top = Math.min(toBounds.top, from.endY)\n  } else if (from.top > toBounds.bottom) {\n    from.top = Math.max(toBounds.bottom, from.startY)\n  }\n  to.top = Math.min(maxStartY, to.endY)\n  if (to.top < fromBounds.top) {\n    to.top = Math.min(fromBounds.top, to.endY)\n  } else if (to.top > fromBounds.bottom) {\n    to.top = Math.max(fromBounds.bottom, to.startY)\n  }\n\n  // Keep within bounds\n  from.top = Math.min(Math.max(from.top, fromBounds.top), fromBounds.bottom)\n  to.top = Math.min(Math.max(to.top, toBounds.top), toBounds.bottom)\n\n  return {from, to}\n}\n","import React from 'react'\nimport {Rect} from './types'\n\nexport function ClampedRect(\n  props: {top: number; left: number; height: number; width: number; bounds: Rect} & Omit<\n    React.ComponentProps<'rect'>,\n    'top' | 'left' | 'height' | 'width'\n  >\n) {\n  const {bounds, ...rest} = props\n  const x = Math.max(bounds.left, props.left)\n  const y = Math.max(props.top, bounds.top)\n  const height = Math.max(0, props.height - (y - props.top))\n  const width = Math.max(0, props.width - (x - props.left))\n\n  return <rect {...rest} x={x} y={y} height={height} width={width} />\n}\n","import {Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ClampedRect} from './ClampedRect'\n\ninterface PathProps {\n  theme: Theme\n}\n\nexport const DebugRect = styled.rect`\n  stroke: #ccc;\n  fill: none;\n  pointer-events: none;\n  stroke-linecap: round;\n`\n\nexport const ConnectorPath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: none;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke: ${strokeColor};\n  `\n})\n\nexport const InteractivePath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: stroke;\n    stroke: ${strokeColor};\n    cursor: pointer;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    opacity: 0;\n\n    &:hover {\n      opacity: 0.2;\n    }\n  `\n})\n\nexport const RightBarWrapper = styled(ClampedRect)(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    stroke: none;\n    pointer-events: none;\n    fill: ${strokeColor};\n  `\n})\n","import React, {memo} from 'react'\nimport {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_THRESHOLD,\n  DEBUG,\n  INTERACTIVE_STROKE_WIDTH,\n  STROKE_WIDTH,\n} from '../constants'\nimport {arrowPath, generateConnectorPath} from './connectorPath'\nimport {mapConnectorToLine} from './mapConnectorToLine'\nimport {Rect} from './types'\nimport {DebugRect, ConnectorPath, InteractivePath, RightBarWrapper} from './Connector.styled'\n\ninterface Props {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport const Connector = memo(function Connector({from, to}: Props) {\n  const line = mapConnectorToLine({from, to})\n\n  // If both ends of the connector are out of bounds, then do not render\n  if (line.from.outOfBounds && line.to.outOfBounds) {\n    return null\n  }\n\n  const linePathDescription = generateConnectorPath(line)\n\n  return (\n    <>\n      <InteractivePath d={linePathDescription} strokeWidth={INTERACTIVE_STROKE_WIDTH} />\n\n      <ConnectorPath d={linePathDescription} strokeWidth={STROKE_WIDTH} />\n      <RightBarWrapper\n        top={to.rect.top}\n        left={to.rect.left}\n        height={to.rect.height}\n        width={STROKE_WIDTH}\n        bounds={to.bounds}\n      />\n\n      {line.from.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.from.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top + line.from.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top + line.to.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {DEBUG && (\n        <>\n          <DebugRect\n            x={line.from.bounds.left}\n            y={line.from.bounds.top}\n            width={line.from.bounds.width}\n            height={line.from.bounds.height}\n            stroke=\"green\"\n          />\n\n          <DebugRect\n            x={line.to.bounds.left}\n            y={line.to.bounds.top}\n            width={line.to.bounds.width}\n            height={line.to.bounds.height}\n            stroke=\"yellow\"\n          />\n\n          {!line.from.outOfBounds && (\n            <g transform={`translate(${line.from.bounds.left} ${line.from.bounds.top})`}>\n              <DebugRect\n                width={line.from.bounds.width}\n                height={line.from.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"green\"\n              />\n            </g>\n          )}\n\n          {!line.to.outOfBounds && (\n            <g transform={`translate(${line.to.bounds.left} ${line.to.bounds.top})`}>\n              <DebugRect\n                width={line.to.bounds.width}\n                height={line.to.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"red\"\n              />\n            </g>\n          )}\n        </>\n      )}\n    </>\n  )\n})\n","import {useEffect} from 'react'\nimport {resizeObserver} from '../../util'\n\nexport function useResizeObserver(\n  element: HTMLDivElement,\n  onResize: (event: ResizeObserverEntry) => void\n): void {\n  useEffect(() => resizeObserver.observe(element, onResize), [element, onResize])\n}\n","import styled from 'styled-components'\n\nexport const SvgWrapper = styled.svg`\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {sortBy} from 'lodash'\nimport {Path} from '@sanity/types'\nimport {ScrollMonitor} from '../../components/scroll'\nimport {findMostSpecificTarget} from '../helpers/findMostSpecificTarget'\nimport {isChangeBar} from '../helpers/isChangeBar'\nimport {scrollIntoView} from '../helpers/scrollIntoView'\nimport {DEBUG_LAYER_BOUNDS} from '../constants'\nimport {getOffsetsTo} from '../helpers/getOffsetsTo'\nimport {TrackedArea, TrackedChange, useReportedValues} from '../tracker'\nimport {Reported} from '../../components/react-track-elements'\nimport {isNonNullable} from '../../util'\nimport {Connector} from './Connector'\nimport {DebugLayers} from './DebugLayers'\nimport {useResizeObserver} from './useResizeObserver'\nimport {SvgWrapper} from './ConnectorsOverlay.styled'\n\nexport interface Rect {\n  height: number\n  width: number\n  top: number\n  left: number\n}\n\ninterface State {\n  connectors: {\n    field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    hasFocus: boolean\n    hasHover: boolean\n    hasRevertHover: boolean\n  }[]\n  isHoverConnector: boolean\n}\n\ninterface ConnectorsOverlayProps {\n  rootElement: HTMLDivElement\n  onSetFocus: (nextFocusPath: Path) => void\n}\n\nfunction getState(\n  allReportedValues: Reported<TrackedChange | TrackedArea>[],\n  hovered: string | null,\n  byId: Map<string, TrackedChange | TrackedArea>,\n  rootElement: HTMLElement\n): State {\n  const changeBarsWithHover: Reported<TrackedChange>[] = []\n  const changeBarsWithFocus: Reported<TrackedChange>[] = []\n\n  for (const value of allReportedValues) {\n    if (!isChangeBar(value) || !value[1].isChanged) {\n      continue\n    }\n\n    const [id, reportedChangeBar] = value\n\n    if (id === hovered) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasHover) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasFocus) {\n      changeBarsWithFocus.push(value)\n      continue\n    }\n  }\n\n  const isHoverConnector = changeBarsWithHover.length > 0\n\n  const changeBars = isHoverConnector ? changeBarsWithHover : changeBarsWithFocus\n\n  const connectors = changeBars\n    .map(([id]) => {\n      const field = findMostSpecificTarget('field', id, byId)\n      const change = findMostSpecificTarget('change', id, byId)\n\n      if (!field || !change) return null\n\n      return {field: {id, ...field}, change: {id, ...change}}\n    })\n    .filter(isNonNullable)\n    // .filter(({field, change}) => field && change && field.element && change.element)\n    .map(({field, change}) => ({\n      hasHover: field.hasHover || change.hasHover,\n      hasFocus: field.hasFocus,\n      hasRevertHover: change.hasRevertHover,\n      field: {...field, ...getOffsetsTo(field.element, rootElement)},\n      change: {...change, ...getOffsetsTo(change.element, rootElement)},\n    }))\n\n  return {connectors, isHoverConnector}\n}\n\nexport function ConnectorsOverlay(props: ConnectorsOverlayProps) {\n  const {rootElement, onSetFocus} = props\n  const [hovered, setHovered] = React.useState<string | null>(null)\n  const allReportedValues = useReportedValues()\n  const byId: Map<string, TrackedChange | TrackedArea> = useMemo(\n    () => new Map(allReportedValues),\n    [allReportedValues]\n  )\n\n  const [{connectors}, setState] = useState<State>(() =>\n    getState(allReportedValues, hovered, byId, rootElement)\n  )\n\n  const visibleConnectors = useMemo(\n    () => sortBy(connectors, (c) => 0 - c.field.path.length).slice(0, 1),\n    [connectors]\n  )\n\n  const handleScrollOrResize = useCallback(() => {\n    setState(getState(allReportedValues, hovered, byId, rootElement))\n  }, [byId, allReportedValues, hovered, rootElement])\n\n  useResizeObserver(rootElement, handleScrollOrResize)\n\n  return (\n    <ScrollMonitor onScroll={handleScrollOrResize}>\n      <SvgWrapper style={{zIndex: visibleConnectors[0] && visibleConnectors[0].field.zIndex}}>\n        {visibleConnectors.map(({field, change}) => {\n          if (!change) {\n            return null\n          }\n\n          return (\n            <ConnectorGroup\n              field={field}\n              change={change}\n              key={field.id}\n              onSetFocus={onSetFocus}\n              setHovered={setHovered}\n            />\n          )\n        })}\n      </SvgWrapper>\n    </ScrollMonitor>\n  )\n}\n\ninterface ConnectorGroupProps {\n  field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  setHovered: (id: string | null) => void\n  onSetFocus: (path: Path) => void\n}\n\nfunction ConnectorGroup(props: ConnectorGroupProps) {\n  const {change, field, onSetFocus, setHovered} = props\n\n  const onConnectorClick = useCallback(() => {\n    scrollIntoView(field)\n    scrollIntoView(change)\n    onSetFocus(field.path)\n  }, [field, change, onSetFocus])\n\n  const handleMouseEnter = useCallback(() => setHovered(field.id), [field, setHovered])\n  const handleMouseLeave = useCallback(() => setHovered(null), [setHovered])\n\n  const from = useMemo(\n    () => ({\n      rect: {\n        left: field.rect.left + 2,\n        top: field.rect.top,\n        height: field.rect.height,\n        width: field.rect.width,\n      },\n      bounds: field.bounds,\n    }),\n    [field.bounds, field.rect]\n  )\n\n  const to = useMemo(\n    () => ({rect: change.rect, bounds: change.bounds}),\n    [change.bounds, change.rect]\n  )\n\n  return (\n    <>\n      <g onClick={onConnectorClick} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n        <Connector from={from} to={to} />\n      </g>\n\n      {DEBUG_LAYER_BOUNDS && <DebugLayers field={field} change={change} />}\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {ScrollContainer} from '../../components/scroll'\nimport {ConnectorContext} from '../ConnectorContext'\nimport {ENABLED} from '../constants'\nimport {Tracker} from '../tracker'\nimport {ConnectorsOverlay} from './ConnectorsOverlay'\n\n/** @internal */\nexport interface EnabledChangeConnectorRootProps {\n  children: React.ReactNode\n  className?: string\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void\n  onSetFocus: (path: Path) => void\n}\n\n/** @internal */\nexport function EnabledChangeConnectorRoot({\n  children,\n  className,\n  isReviewChangesOpen,\n  onOpenReviewChanges,\n  onSetFocus,\n  ...restProps\n}: EnabledChangeConnectorRootProps) {\n  const [rootElement, setRootElement] = React.useState<HTMLDivElement | null>()\n\n  const contextValue = useMemo(\n    () => ({\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      onSetFocus,\n    }),\n    [isReviewChangesOpen, onOpenReviewChanges, onSetFocus]\n  )\n\n  return (\n    <ConnectorContext.Provider value={contextValue}>\n      <Tracker>\n        <ScrollContainer {...restProps} ref={setRootElement} className={className}>\n          {children}\n          {rootElement && <ConnectorsOverlay rootElement={rootElement} onSetFocus={onSetFocus} />}\n        </ScrollContainer>\n      </Tracker>\n    </ConnectorContext.Provider>\n  )\n}\n\n/** @internal */\nexport interface DisabledChangeConnectorRootProps {\n  className?: string\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function DisabledChangeConnectorRoot({\n  children,\n  className,\n}: DisabledChangeConnectorRootProps) {\n  return <ScrollContainer className={className}>{children}</ScrollContainer>\n}\n\n/** @internal */\nexport const ChangeConnectorRoot = ENABLED\n  ? EnabledChangeConnectorRoot\n  : DisabledChangeConnectorRoot\n","import React from 'react'\n\nconst NoJsStyles = `\n.sanity-app-no-js__root {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background: #fff;\n}\n\n.sanity-app-no-js__content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-family: helvetica, arial, sans-serif;\n}\n`\n\n/** @internal */\nexport function NoJavascript() {\n  return (\n    <noscript>\n      <div className=\"sanity-app-no-js__root\">\n        <div className=\"sanity-app-no-js__content\">\n          <style type=\"text/css\">{NoJsStyles}</style>\n          <h1>JavaScript disabled</h1>\n          <p>\n            Please <a href=\"https://www.enable-javascript.com/\">enable JavaScript</a> in your\n            browser and reload the page to proceed.\n          </p>\n        </div>\n      </div>\n    </noscript>\n  )\n}\n","import React from 'react'\n\nconst errorHandlerScript = `\n;(function () {\n  var _caughtErrors = []\n\n  var errorChannel = (function () {\n    var subscribers = []\n\n    function publish(msg) {\n      for (var i = 0; i < subscribers.length; i += 1) {\n        subscribers[i](msg)\n      }\n    }\n\n    function subscribe(subscriber) {\n      subscribers.push(subscriber)\n\n      return function () {\n        var idx = subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          subscribers.splice(idx, 1)\n        }\n      }\n    }\n\n    return {publish, subscribe, subscribers}\n  })()\n\n  // NOTE: Store the error channel instance in the global scope so that the Studio application can\n  // access it and subscribe to errors.\n  window.__sanityErrorChannel = {\n    subscribe: errorChannel.subscribe,\n  }\n\n  function _nextTick(callback) {\n    setTimeout(callback, 0)\n  }\n\n  function _handleError(error, params) {\n    _nextTick(function () {\n      // - If there are error channel subscribers, then we notify them (no console error).\n      // - If there are no subscribers, then we log the error to the console and render the error overlay.\n      if (errorChannel.subscribers.length) {\n        errorChannel.publish({error, params})\n      } else {\n        console.error(error)\n\n        _renderErrorOverlay(error, params)\n      }\n    })\n  }\n\n  var ERROR_BOX_STYLE = [\n    'background: #fff',\n    'border-radius: 6px',\n    'box-sizing: border-box',\n    'color: #121923',\n    'flex: 1',\n    \"font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue','Liberation Sans',Helvetica,Arial,system-ui,sans-serif\",\n    'font-size: 16px',\n    'line-height: 21px',\n    'margin: 0 auto',\n    'max-width: 960px',\n    'overflow: auto',\n    'padding: 20px',\n    'width: 100%',\n  ].join(';')\n\n  var ERROR_CODE_STYLE = [\n    'color: #972E2A',\n    \"font-family: -apple-system-ui-monospace, 'SF Mono', Menlo, Monaco, Consolas, monospace\",\n    'font-size: 13px',\n    'line-height: 17px',\n    'margin: 0',\n  ].join(';')\n\n  function _renderErrorOverlay(error, params) {\n    var errorElement = document.querySelector('#__sanityError') || document.createElement('div')\n    var colno = params.event.colno\n    var lineno = params.event.lineno\n    var filename = params.event.filename\n\n    errorElement.id = '__sanityError'\n    errorElement.innerHTML = [\n      '<div style=\"' + ERROR_BOX_STYLE + '\">',\n      '<div style=\"font-weight: 700;\">Uncaught error: ' + error.message + '</div>',\n      '<div style=\"color: #515E72; font-size: 13px; line-height: 17px; margin: 10px 0;\">' +\n        filename +\n        ':' +\n        lineno +\n        ':' +\n        colno +\n        '</div>',\n      '<pre style=\"' + ERROR_CODE_STYLE + '\">' + error.stack + '</pre>',\n      '</div>',\n    ].join('')\n\n    errorElement.style.position = 'fixed'\n    errorElement.style.zIndex = 1000000\n    errorElement.style.top = 0\n    errorElement.style.left = 0\n    errorElement.style.right = 0\n    errorElement.style.bottom = 0\n    errorElement.style.padding = '20px'\n    errorElement.style.background = 'rgba(16,17,18,0.66)'\n    errorElement.style.display = 'flex'\n    errorElement.style.alignItems = 'center'\n    errorElement.style.justifyContent = 'center'\n\n    document.body.appendChild(errorElement)\n  }\n\n  // NOTE:\n  // Yes  we're attaching 2 error listeners below \n  // This is because React makes the same error throw twice (in development mode).\n  // See: https://github.com/facebook/react/issues/10384\n\n  // Error listener #1\n  window.onerror = function (event, source, lineno, colno, error) {\n    _nextTick(function () {\n      if (_caughtErrors.indexOf(error) !== -1) return\n\n      _caughtErrors.push(error)\n\n      _handleError(error, {\n        event,\n        lineno,\n        colno,\n        source,\n      })\n\n      _nextTick(function () {\n        var idx = _caughtErrors.indexOf(error)\n\n        if (idx > -1) _caughtErrors.splice(idx, 1)\n      })\n    })\n\n    // IMPORTANT: this callback must return \\`true\\` to prevent the error from being rendered in\n    // the browsers console.\n    return true\n  }\n\n  // Error listener #2\n  window.addEventListener('error', function (event) {\n    if (_caughtErrors.indexOf(event.error) !== -1) return true\n\n    _caughtErrors.push(event.error)\n\n    _handleError(event.error, {\n      event,\n      lineno: event.lineno,\n      colno: event.colno,\n    })\n\n    _nextTick(function () {\n      _nextTick(function () {\n        var idx = _caughtErrors.indexOf(event.error)\n\n        if (idx > -1) _caughtErrors.splice(idx, 1)\n      })\n    })\n\n    return true\n  })\n})()\n`\n\n/** @internal */\nexport function GlobalErrorHandler() {\n  // eslint-disable-next-line react/no-danger\n  return <script dangerouslySetInnerHTML={{__html: errorHandlerScript}} />\n}\n","import React from 'react'\n\nexport interface FaviconProps {\n  basePath: string\n}\n\nexport function Favicons({basePath}: FaviconProps) {\n  const base = `${basePath.replace(/\\/+$/, '')}/static`\n  return (\n    <>\n      <link rel=\"icon\" href={`${base}/favicon.ico`} sizes=\"any\" />\n      <link rel=\"icon\" href={`${base}/favicon.svg`} type=\"image/svg+xml\" />\n      <link rel=\"apple-touch-icon\" href={`${base}/apple-touch-icon.png`} />\n      <link rel=\"manifest\" href={`${base}/manifest.webmanifest`} />\n    </>\n  )\n}\n","import React from 'react'\nimport {NoJavascript} from './NoJavascript'\nimport {GlobalErrorHandler} from './globalErrorHandler'\nimport {Favicons} from './Favicons'\n\nconst globalStyles = `\n  html {\n    background-color: #f1f3f6;\n  }\n  html,\n  body,\n  #sanity {\n    height: 100%;\n  }\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n  }\n`\n\n/** @beta */\nexport interface DefaultDocumentProps {\n  entryPath: string\n  css?: string[]\n  basePath?: string\n}\n\nconst EMPTY_ARRAY: never[] = []\n\n/** @beta */\nexport function DefaultDocument(props: DefaultDocumentProps): React.ReactElement {\n  const {entryPath, css = EMPTY_ARRAY, basePath = '/'} = props\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\" />\n        <meta name=\"robots\" content=\"noindex\" />\n        <meta name=\"referrer\" content=\"same-origin\" />\n\n        <Favicons basePath={basePath} />\n\n        <title>Sanity Studio</title>\n\n        <GlobalErrorHandler />\n\n        {css.map((href) => (\n          <link key={href} rel=\"stylesheet\" href={href} />\n        ))}\n        <style>{globalStyles}</style>\n      </head>\n      <body>\n        <div id=\"sanity\" />\n        <script type=\"module\" src={entryPath} />\n        <NoJavascript />\n      </body>\n    </html>\n  )\n}\n","import {AccessDeniedIcon} from '@sanity/icons'\nimport {CurrentUser} from '@sanity/types'\nimport {Text, Inline, Box} from '@sanity/ui'\nimport React from 'react'\n\n/** @internal */\nexport interface InsufficientPermissionsMessageProps {\n  title?: string\n  operationLabel?: string\n  currentUser?: CurrentUser | null\n}\n\n/** @internal */\nexport function InsufficientPermissionsMessage(props: InsufficientPermissionsMessageProps) {\n  const {\n    currentUser,\n    title = 'Insufficient permissions',\n    operationLabel = 'access this feature',\n  } = props\n\n  const roles = currentUser?.roles || []\n  const plural = roles.length !== 1\n\n  return (\n    <Box padding={2}>\n      <Inline space={2}>\n        <Text size={1}>\n          <AccessDeniedIcon />\n        </Text>\n        <Text weight=\"semibold\">{title}</Text>\n      </Inline>\n      <Inline marginTop={4}>\n        <Text size={1}>\n          {roles.length === 0 ? (\n            <>You have no role that grants you permission to {operationLabel}</>\n          ) : (\n            <>\n              Your role{plural && 's'}{' '}\n              {join(\n                roles.map((r) => <code key={r.name}>{r.title}</code>),\n                <>, </>\n              )}{' '}\n              do{plural || 'es'} not have permissions to {operationLabel}\n            </>\n          )}\n        </Text>\n      </Inline>\n    </Box>\n  )\n}\n\nfunction join(array: React.ReactElement[], sep: React.ReactElement) {\n  return array.reduce<React.ReactElement[] | null>(\n    (result, item) => (result === null ? [item] : [...result, sep, item]),\n    null\n  )\n}\n","import {Button, ButtonProps} from '@sanity/ui'\nimport React, {HTMLProps} from 'react'\nimport {IntentLink, IntentLinkProps} from 'sanity/router'\n\n/**\n * @beta\n */\nexport function IntentButton(\n  props: IntentLinkProps & ButtonProps & Omit<HTMLProps<HTMLButtonElement>, 'as' | 'href' | 'ref'>\n) {\n  return props.disabled ? (\n    <Button {...props} as=\"a\" role=\"link\" aria-disabled=\"true\" />\n  ) : (\n    <Button {...props} as={IntentLink} />\n  )\n}\n","import {Card, CardProps} from '@sanity/ui'\nimport React, {createContext, forwardRef, useContext} from 'react'\nimport styled, {css} from 'styled-components'\n\n/** @internal */\nconst StyledCard = styled(Card)(() => {\n  return css`\n    /* this is a hack to avoid layout jumps while previews are loading\n    there's probably better ways of solving this */\n    min-height: 35px;\n\n    /* TextWithTone uses its own logic to set color, and we therefore need */\n    /* to override this logic in order to set the correct color in different states */\n    &[data-selected],\n    &[data-pressed],\n    &:active {\n      [data-ui='TextWithTone'] {\n        color: inherit;\n      }\n    }\n  `\n})\n\n/** @internal */\nexport interface PreviewCardContextValue {\n  selected?: boolean\n}\n\nconst PreviewCardContext = createContext<PreviewCardContextValue>({selected: false})\n\n/** @internal */\nexport function usePreviewCard(): PreviewCardContextValue {\n  const context = useContext(PreviewCardContext)\n\n  if (!context) {\n    throw new Error('PreviewCard: missing context value')\n  }\n\n  return context\n}\n\n/** @internal */\nexport const PreviewCard = forwardRef(function PreviewCard(\n  props: CardProps & Omit<React.HTMLProps<HTMLDivElement>, 'height'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, selected, as, ...restProps} = props\n\n  return (\n    <StyledCard data-ui=\"PreviewCard\" {...restProps} forwardedAs={as} ref={ref} selected={selected}>\n      <PreviewCardContext.Provider value={{selected}}>{children}</PreviewCardContext.Provider>\n    </StyledCard>\n  )\n})\n","import styled, {css} from 'styled-components'\nimport {ButtonTone, Text, Theme} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\n\n/** @internal */\nexport interface TextWithToneProps extends ComponentProps<typeof Text> {\n  tone: ButtonTone\n  dimmed?: boolean\n}\n\n/** @internal */\nconst TextWithToneStyle = styled(Text)(({$tone, theme}: {$tone: ButtonTone; theme: Theme}) => {\n  const tone = theme.sanity.color.muted[$tone]\n\n  return css`\n    &:not([data-muted]) {\n      --card-fg-color: ${tone ? tone.enabled.fg : undefined};\n    }\n\n    &[data-dimmed] {\n      opacity: 0.3;\n    }\n  `\n})\n\n/** @internal */\nexport const TextWithTone = React.forwardRef(function TextWithTone(\n  props: TextWithToneProps,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const {tone, dimmed, muted, ...rest} = props\n\n  return (\n    <TextWithToneStyle\n      data-ui=\"TextWithTone\"\n      data-dimmed={dimmed ? '' : undefined}\n      data-muted={muted ? '' : undefined}\n      $tone={tone}\n      muted={muted}\n      ref={ref}\n      {...rest}\n    />\n  )\n})\n","interface MultiKeyWeakMapNode {\n  type: 'multi-key-weak-map-node'\n  value: unknown\n  next: WeakMap<object, MultiKeyWeakMapNode>\n}\n\nexport interface MultiKeyWeakMap {\n  get<T>(keys: object[]): T | undefined\n  get(keys: object[]): unknown\n\n  set(keys: object[], value: unknown): void\n}\n\nexport function createMultiKeyWeakMap(): MultiKeyWeakMap {\n  const rootMap = new WeakMap<object, MultiKeyWeakMapNode>()\n  const idCache = new WeakMap<object, string>()\n\n  function randomId() {\n    return Array.from({length: 10})\n      .map(() =>\n        Math.floor(Math.random() * 255)\n          .toString(16)\n          .padStart(2, '0')\n      )\n      .join('')\n  }\n\n  function assignId(key: object) {\n    const cachedId = idCache.get(key)\n    if (cachedId) return cachedId\n    const id = randomId()\n    idCache.set(key, id)\n    return id\n  }\n\n  function arrangeKeys(keys: object[]) {\n    return Array.from(new Set(keys))\n      .map((key) => [assignId(key), key] as const)\n      .sort(([a], [b]) => a.localeCompare(b, 'en'))\n      .map(([, key]) => key)\n  }\n\n  function getDeep(keys: object[], map: WeakMap<object, MultiKeyWeakMapNode>): unknown {\n    if (!keys.length) return undefined\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey)\n\n    if (!node) return undefined\n    if (!restOfKeys.length) return node.value\n    return getDeep(restOfKeys, node.next)\n  }\n\n  function setDeep(\n    keys: object[],\n    map: WeakMap<object, MultiKeyWeakMapNode>,\n    value: unknown\n  ): void {\n    if (!keys.length) return\n\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey) || {\n      type: 'multi-key-weak-map-node',\n      value: undefined,\n      next: new WeakMap(),\n    }\n    map.set(firstKey, node)\n\n    if (!restOfKeys.length) {\n      node.value = value\n      return\n    }\n\n    setDeep(restOfKeys, node.next, value)\n  }\n\n  function get<T>(keys: object[]): T | undefined\n  function get(keys: object[]) {\n    return getDeep(arrangeKeys(keys), rootMap)\n  }\n\n  function set(keys: object[], value: unknown) {\n    setDeep(arrangeKeys(keys), rootMap, value)\n  }\n\n  return {get, set}\n}\n","import React, {createContext, useContext, useMemo} from 'react'\nimport {createMultiKeyWeakMap, MultiKeyWeakMap} from './createMultiKeyWeakMap'\n\n/** @internal */\nexport interface ResourceCache {\n  get<T = unknown>(options: {namespace: string; dependencies: (object | null)[]}): T | undefined\n  set(options: {namespace: string; dependencies: (object | null)[]; value: unknown}): void\n}\n\nconst ResourceCacheContext = createContext<ResourceCache | null>(null)\n\n/** @internal */\nexport interface ResourceCacheProviderProps {\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function ResourceCacheProvider({children}: ResourceCacheProviderProps) {\n  const resourceCache = useMemo((): ResourceCache => {\n    const namespaces = new Map<string, MultiKeyWeakMap>()\n\n    // this is used to replace the `null` values in any `dependencies` so that\n    // they can be used in the `MultiKeyWeakMap` which doesn't accept null\n    const nullReplacer = {}\n\n    return {\n      get: ({namespace, dependencies}) => {\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        const namespaceMap = namespaces.get(namespace)\n        return namespaceMap?.get(dependenciesWithoutNull)\n      },\n\n      set: ({namespace, dependencies, value}) => {\n        const namespaceMap = namespaces.get(namespace) || createMultiKeyWeakMap()\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        namespaces.set(namespace, namespaceMap)\n        namespaceMap.set(dependenciesWithoutNull, value)\n      },\n    }\n  }, [])\n\n  return (\n    <ResourceCacheContext.Provider value={resourceCache}>{children}</ResourceCacheContext.Provider>\n  )\n}\n\n/** @internal */\nexport function useResourceCache(): ResourceCache {\n  const cache = useContext(ResourceCacheContext)\n  if (!cache) throw new Error('Could not find `cache` context')\n  return cache\n}\n","/** @internal */\nexport interface CorsOriginErrorOptions {\n  projectId?: string\n}\n\n/** @internal */\nexport class CorsOriginError extends Error {\n  projectId?: string\n\n  constructor({projectId}: CorsOriginErrorOptions) {\n    super('CorsOriginError')\n    this.projectId = projectId\n  }\n}\n","const supportsLocalStorage = (() => {\n  const key = '__tmp_supports_local_storage'\n\n  try {\n    if (typeof localStorage === 'undefined') {\n      return false\n    }\n\n    localStorage.setItem(key, '---')\n    localStorage.removeItem(key)\n    return true\n  } catch (err) {\n    return false\n  }\n})()\n\nconst memStore: Record<string, string> = {}\n\nexport function setItem(key: string, value: string): void {\n  if (supportsLocalStorage) {\n    localStorage[key] = value\n  } else {\n    memStore[key] = value\n  }\n}\n\nexport function getItem(key: string): string | undefined {\n  return supportsLocalStorage ? localStorage[key] : memStore[key]\n}\n\nexport function removeItem(key: string): void {\n  if (supportsLocalStorage) {\n    localStorage.removeItem(key)\n  } else {\n    delete memStore[key]\n  }\n}\n","import {fromEvent, merge, Observable, of, Subject} from 'rxjs'\nimport {filter, map, shareReplay} from 'rxjs/operators'\nimport {isNonNullable} from '../../../util'\nimport * as storage from './storage'\n\nexport interface BroadcastChannel<T> {\n  messages: Observable<T>\n  broadcast: (message: T) => void\n}\n\nexport function createBroadcastChannel<T>(namespace: string): BroadcastChannel<T> {\n  const storageEvents$ =\n    typeof window === 'undefined'\n      ? of<StorageEvent>() // No storage events in non-browser environments\n      : fromEvent<StorageEvent>(window, 'storage')\n\n  const storageKey = `__studio_local_storage_messaging_${namespace}`\n\n  // note: the the `storageEvents$` stream does not emit for the current\n  // window/tab. this subject is used to re-broadcast messages broadcast outward\n  // to itself\n  const broadcastedMessages$ = new Subject<T>()\n\n  const messages$ = merge(\n    broadcastedMessages$,\n    storageEvents$.pipe(\n      filter((event) => event.key === storageKey),\n      map((event) => event.newValue),\n      filter(isNonNullable),\n      map((newValue) => JSON.parse(newValue))\n    )\n  ).pipe(\n    // this is important to ensure all new subscribers get a message on subscribe\n    shareReplay(1)\n  )\n\n  function broadcast(message: T) {\n    try {\n      storage.setItem(storageKey, JSON.stringify(message))\n      // clear the value afterwards so that next message will still emit a\n      // new event even if it's identical to the previous one\n      storage.removeItem(storageKey)\n\n      broadcastedMessages$.next(message)\n    } catch (err) {\n      // intentional noop\n    }\n  }\n\n  return {messages: messages$, broadcast}\n}\n","const sidPattern = /sid=[^&]{20,}/\n\nfunction consumeSessionId(): string | null {\n  // Are we in a browser-like environment?\n  if (typeof window === 'undefined' || typeof window.location !== 'object') {\n    return null\n  }\n\n  // Does the hash contain a valid session ID?\n  const hash = window.location.hash\n  const [sidParam] = hash.match(sidPattern) || []\n  if (!sidParam) {\n    return null\n  }\n\n  // Extract just the sid from the hash\n  const sid = sidParam.slice(sidParam.indexOf('=') + 1)\n\n  // Remove the parameter from the URL\n  const newHash = hash.replace(sidPattern, '')\n  const newUrl = new URL(window.location.href)\n  newUrl.hash = newHash.length > 1 ? newHash : ''\n  history.replaceState(null, '', newUrl)\n\n  return sid\n}\n\n// this module consumes the session ID as a side-effect as soon as its loaded\n// to remove the session ID from the history (vs waiting to remove the sid hash\n// until react mounts)\nexport const sessionId = consumeSessionId()\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {AuthProvider} from './createAuthStore'\n\nconst GithubRoot = styled.svg(({theme}: {theme: Theme}) => {\n  const {fg} = theme.sanity.color.base\n\n  return css`\n    fill: ${fg};\n  `\n})\n\nconst GithubLogo = () => (\n  <GithubRoot\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 438.55 438.55\"\n  >\n    <path d=\"M409.13 114.57a218.32 218.32 0 0 0-79.8-79.8Q278.94 5.36 219.27 5.36T109.21 34.77a218.29 218.29 0 0 0-79.8 79.8Q0 165 0 224.63q0 71.67 41.83 128.91t108.06 79.23q7.71 1.43 11.42-2a11.17 11.17 0 0 0 3.69-8.57q0-.86-.14-15.42t-.14-25.41l-6.57 1.14a83.77 83.77 0 0 1-15.85 1 120.73 120.73 0 0 1-19.84-2 44.34 44.34 0 0 1-19.11-8.51 36.23 36.23 0 0 1-12.56-17.6l-2.86-6.57a71.34 71.34 0 0 0-9-14.56q-6.14-8-12.42-10.85l-2-1.43a21 21 0 0 1-3.71-3.43 15.66 15.66 0 0 1-2.57-4q-.86-2 1.43-3.29C61.2 310.42 64 310 68 310l5.71.85q5.71 1.14 14.13 6.85a46.08 46.08 0 0 1 13.85 14.84q6.57 11.71 15.85 17.85t18.7 6.14a81.19 81.19 0 0 0 16.27-1.42 56.78 56.78 0 0 0 12.85-4.29q2.57-19.14 14-29.41a195.49 195.49 0 0 1-29.36-5.13 116.52 116.52 0 0 1-26.83-11.14 76.86 76.86 0 0 1-23-19.13q-9.14-11.42-15-30t-5.8-42.81q0-34.55 22.56-58.82-10.57-26 2-58.24 8.28-2.57 24.55 3.85t23.84 11q7.57 4.56 12.13 7.71a206.2 206.2 0 0 1 109.64 0l10.85-6.85a153.65 153.65 0 0 1 26.26-12.56q15.13-5.71 23.13-3.14 12.84 32.26 2.28 58.24 22.55 24.27 22.56 58.82 0 24.27-5.85 43t-15.12 30a79.82 79.82 0 0 1-23.13 19 116.74 116.74 0 0 1-26.84 11.14 195.29 195.29 0 0 1-29.23 5.07q14.8 12.84 14.81 40.58v60.2a11.37 11.37 0 0 0 3.57 8.56q3.57 3.42 11.28 2 66.24-22 108.07-79.23t41.83-128.91q-.03-59.62-29.43-110.05z\" />\n  </GithubRoot>\n)\n\nconst GoogleLogo = () => (\n  <svg\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 48 48\"\n  >\n    <path\n      d=\"M11 24a13 13 0 0 1 .66-4.08l-7.4-5.66a22.18 22.18 0 0 0 0 19.49l7.4-5.67A13 13 0 0 1 11 24z\"\n      fill=\"#fbbc05\"\n    />\n    <path\n      d=\"M24 11a12.72 12.72 0 0 1 8.1 2.9l6.4-6.4a22 22 0 0 0-34.24 6.75l7.4 5.66A13 13 0 0 1 24 11z\"\n      fill=\"#ea4335\"\n    />\n    <path\n      d=\"M24 37a13 13 0 0 1-12.34-8.92l-7.4 5.66A21.93 21.93 0 0 0 24 46a21 21 0 0 0 14.33-5.48l-7-5.44A13.59 13.59 0 0 1 24 37zm-12.35-8.93l-7.4 5.67 7.4-5.66z\"\n      fill=\"#34a853\"\n    />\n    <path\n      d=\"M44.5 20H24v8.5h11.8a9.91 9.91 0 0 1-4.49 6.58l7 5.44C42.37 36.76 45 31.17 45 24a18.25 18.25 0 0 0-.5-4z\"\n      fill=\"#4285f4\"\n    />\n  </svg>\n)\n\nfunction CustomLogo(props: {provider: AuthProvider}) {\n  const {provider} = props\n\n  return (\n    provider.logo ? <img src={provider.logo} alt={`Logo for ${provider.name}`} /> : undefined\n  ) as any\n}\n\nexport const providerLogos: Record<string, React.ComponentType<{provider: AuthProvider}>> = {\n  google: GoogleLogo,\n  github: GithubLogo,\n  custom: CustomLogo,\n  // sanity: () => <SanityMonogram data-sanity-icon=\"\" />,\n}\n","import {SanityClient} from '@sanity/client'\nimport {Button, Flex, Heading, Spinner, Stack, Text} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\nimport {Observable} from 'rxjs'\nimport {createHookFromObservableFactory} from '../../../util'\nimport {providerLogos} from './providerLogos'\nimport {LoginComponentProps} from './types'\n\ninterface GetProvidersOptions {\n  client: SanityClient\n  mode?: 'append' | 'replace'\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface ProvidersResponse {\n  thirdPartyLogin?: boolean\n  sso?: {\n    saml?: boolean\n  }\n  providers: Provider[]\n}\n\ninterface Provider {\n  name: string\n  title: string\n  url: string\n}\n\nasync function getProviders({client, mode, providers: customProviders = []}: GetProvidersOptions) {\n  const {providers, thirdPartyLogin, sso} = await client.request<ProvidersResponse>({\n    uri: '/auth/providers',\n  })\n\n  if (!customProviders.length) return providers\n\n  const custom = customProviders.map((provider) => {\n    // taken from here:\n    // https://github.com/sanity-io/sanity/blob/795637999b67c23de1657a3701091a337383f632/packages/%40sanity/default-login/src/util/getProviders.js#L19\n    // A user may want to remove certain login options (eg GitHub) and thus\n    // provide \"official\" login options through the config. These shouldn't be\n    // treated as custom login providers which require the third-party login\n    // feature, but as the official provider\n    const isOfficial = providers.some((official) => official.url === provider.url)\n    const isSupported = isOfficial || thirdPartyLogin || (sso && Object.values(sso).some(Boolean))\n    return {...provider, custom: !isOfficial, supported: isSupported}\n  })\n\n  if (mode === 'replace') return custom\n\n  // Append to the list of official providers, but replace any provider that has\n  // the same URL with the custom one (allows customizing the title, name)\n  return providers\n    .filter((official) => custom.some((provider) => provider.url !== official.url))\n    .concat(custom)\n}\n\ninterface CreateLoginComponentOptions {\n  getClient: () => Observable<SanityClient>\n  loginMethod: 'dual' | 'cookie'\n  mode?: 'append' | 'replace'\n  redirectOnSingle?: boolean\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface CreateHrefForProviderOptions {\n  projectId: string\n  loginMethod: 'dual' | 'cookie'\n  url: string\n  basePath: string\n}\n\nfunction createHrefForProvider({\n  loginMethod,\n  projectId,\n  url,\n  basePath,\n}: CreateHrefForProviderOptions) {\n  const params = new URLSearchParams()\n  params.set('origin', `${window.location.origin}${basePath}`)\n  params.set('projectId', projectId)\n  params.set('type', loginMethod)\n  return `${url}?${params}`\n}\n\nexport function createLoginComponent({\n  getClient,\n  loginMethod,\n  redirectOnSingle,\n  ...providerOptions\n}: CreateLoginComponentOptions) {\n  const useClient = createHookFromObservableFactory(getClient)\n\n  function LoginComponent({projectId, basePath}: LoginComponentProps) {\n    const [providers, setProviders] = useState<Provider[] | null>(null)\n    const [error, setError] = useState<unknown>(null)\n    if (error) throw error\n\n    const [client] = useClient()\n\n    useEffect(() => {\n      if (!client) return\n\n      getProviders({client, ...providerOptions})\n        .then(setProviders)\n        .catch(setError)\n    }, [client])\n\n    // only create a direct URL if `redirectOnSingle` is true and there is only\n    // one provider available\n    const redirectUrl =\n      redirectOnSingle &&\n      providers?.length === 1 &&\n      providers?.[0] &&\n      createHrefForProvider({\n        loginMethod,\n        projectId,\n        url: providers[0].url,\n        basePath,\n      })\n\n    const loading = !providers || redirectUrl\n\n    useEffect(() => {\n      if (redirectUrl) {\n        window.location.href = redirectUrl\n      }\n    }, [redirectUrl])\n\n    if (loading) {\n      return (\n        <Flex\n          align=\"center\"\n          direction=\"column\"\n          gap={4}\n          justify=\"center\"\n          padding={6}\n          sizing=\"border\"\n        >\n          <Text muted>Loading</Text>\n          <Spinner muted />\n        </Flex>\n      )\n    }\n\n    return (\n      <Stack space={4}>\n        <Heading align=\"center\" size={1}>\n          Choose login provider\n        </Heading>\n\n        <Stack space={2}>\n          {providers.map((provider, index) => (\n            <Button\n              // eslint-disable-next-line react/no-array-index-key\n              icon={providerLogos[provider.name]}\n              key={`${provider.url}_${index}`}\n              as=\"a\"\n              href={createHrefForProvider({\n                loginMethod,\n                projectId,\n                url: provider.url,\n                basePath,\n              })}\n              mode=\"ghost\"\n              text={provider.title}\n            />\n          ))}\n        </Stack>\n      </Stack>\n    )\n  }\n\n  return LoginComponent\n}\n","import createClient, {SanityClient} from '@sanity/client'\nimport {defer} from 'rxjs'\nimport {map, shareReplay, startWith, switchMap} from 'rxjs/operators'\nimport {memoize} from 'lodash'\nimport {CorsOriginError} from '../cors'\nimport {AuthState, AuthStore} from './types'\nimport {createBroadcastChannel} from './createBroadcastChannel'\nimport {sessionId} from './sessionId'\nimport * as storage from './storage'\nimport {createLoginComponent} from './createLoginComponent'\n\n/** @internal */\nexport interface AuthProvider {\n  name: string\n  title: string\n  url: string\n  logo?: string\n}\n\n/** @internal */\nexport interface AuthStoreOptions {\n  projectId: string\n  dataset: string\n  /**\n   * Login method to use for the studio the studio. Can be one of:\n   * - `dual` (default) - attempt to use cookies where possible, falling back to\n   *   storing authentication token in `localStorage` otherwise\n   * - `cookie` - explicitly disable `localStorage` method, relying only on\n   *   cookies\n   */\n  loginMethod?: 'dual' | 'cookie'\n  /**\n   * Append the custom providers to the default providers or replace them.\n   */\n  mode?: 'append' | 'replace'\n  /**\n   * If true, don't show the choose provider logo screen, automatically redirect\n   * to the single provider login\n   */\n  redirectOnSingle?: boolean\n  /**\n   * The custom provider implementations\n   */\n  providers?: AuthProvider[]\n}\n\nconst getStorageKey = (projectId: string) => {\n  // Project ID is part of the localStorage key so that different projects can\n  // store their separate tokens, and it's easier to do book keeping.\n  if (!projectId) throw new Error('Invalid project id')\n  return `__studio_auth_token_${projectId}`\n}\n\nconst getToken = (projectId: string): string | null => {\n  try {\n    const item = storage.getItem(getStorageKey(projectId))\n    if (item) {\n      const {token} = JSON.parse(item) as {token: string}\n      if (token && typeof token === 'string') {\n        return token\n      }\n    }\n  } catch (err) {\n    console.error(err)\n  }\n  return null\n}\n\nconst clearToken = (projectId: string): void => {\n  try {\n    storage.removeItem(getStorageKey(projectId))\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst saveToken = ({token, projectId}: {token: string; projectId: string}): void => {\n  try {\n    storage.setItem(\n      getStorageKey(projectId),\n      JSON.stringify({token, time: new Date().toISOString()})\n    )\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst getCurrentUser = async (\n  client: SanityClient,\n  broadcastToken: (token: string | null) => void\n) => {\n  try {\n    const user = await client.request({\n      uri: '/users/me',\n      withCredentials: true,\n      tag: 'users.get-current',\n    })\n\n    // if the user came back with an id, assume it's a full CurrentUser\n    return typeof user?.id === 'string' ? user : null\n  } catch (err) {\n    // 401 means the user had some kind of credentials, but failed to authenticate,\n    // we should clear any local token in this case and treat it as if the used was\n    // logged out\n    if (err.statusCode === 401) {\n      clearToken(client.config().projectId || '')\n      broadcastToken(null)\n      return null\n    }\n\n    // Request failed for a non-auth reason, see if this was a CORS-error by\n    // checking the `/ping` endpoint, which allows all origins\n    const invalidCorsConfig = await client\n      .request({uri: '/ping', withCredentials: false, tag: 'cors-check'})\n      .then(\n        () => true, // Request succeeded, so likely the CORS origin is disallowed\n        () => false // Request failed, so likely a network error of some kind\n      )\n\n    if (invalidCorsConfig) {\n      // Throw a specific error on CORS-errors, to allow us to show a customized dialog\n      throw new CorsOriginError({projectId: client.config()?.projectId})\n    }\n\n    // Some non-CORS error - is it one of those undefinable network errors?\n    if (err.isNetworkError && !err.message && err.request && err.request.url) {\n      const host = new URL(err.request.url).host\n      throw new Error(`Unknown network error attempting to reach ${host}`)\n    }\n\n    // Some other error, just throw it\n    throw err\n  }\n}\n\n/**\n * @internal\n */\nexport function _createAuthStore({\n  projectId,\n  dataset,\n  loginMethod = 'dual',\n  ...providerOptions\n}: AuthStoreOptions): AuthStore {\n  // this broadcast channel receives either a token as a `string` or `null`.\n  // a new client will be created from it, otherwise, it'll only trigger a retry\n  // for cookie-based auth\n  const {broadcast, messages} = createBroadcastChannel<string | null>(`dual_mode_auth_${projectId}`)\n\n  // // TODO: there is currently a bug where the AuthBoundary flashes the\n  // // `NotAuthenticatedComponent` on the first load after a login with\n  // // cookieless mode. A potential solution to fix this bug is to delay\n  // // emitting `state$` until the session ID has been converted to a token\n  // const firstMessage = messages.pipe(first())\n\n  const token$ = messages.pipe(startWith(loginMethod === 'dual' ? getToken(projectId) : null))\n\n  const state$ = token$.pipe(\n    // // see above\n    // debounce(() => firstMessage),\n    map((token) =>\n      createClient({\n        projectId,\n        dataset,\n        apiVersion: '2021-06-07',\n        useCdn: false,\n        ...(token && {token}),\n        withCredentials: true,\n        requestTagPrefix: 'sanity.studio',\n        ignoreBrowserTokenWarning: true,\n        allowReconfigure: false,\n      })\n    ),\n    switchMap((client) =>\n      defer(async (): Promise<AuthState> => {\n        const currentUser = await getCurrentUser(client, broadcast)\n\n        return {\n          currentUser,\n          client,\n          authenticated: !!currentUser,\n        }\n      })\n    ),\n    shareReplay(1)\n  )\n\n  async function handleCallbackUrl() {\n    if (sessionId && loginMethod === 'dual') {\n      const requestClient = createClient({\n        projectId,\n        dataset,\n        useCdn: true,\n        withCredentials: true,\n        apiVersion: '2021-06-07',\n        requestTagPrefix: 'sanity.studio',\n      })\n\n      // try to get the current user by using the cookie credentials\n      const currentUser = await getCurrentUser(requestClient, broadcast)\n\n      if (currentUser) {\n        // if that worked, then we don't need to fetch a token\n        broadcast(null)\n      } else {\n        // if that didn't work, then we need to trade the session ID for a token\n        const {token} = await requestClient.request<{token: string}>({\n          method: 'GET',\n          uri: `/auth/fetch`,\n          query: {sid: sessionId},\n          tag: 'auth.fetch-token',\n        })\n\n        saveToken({token, projectId})\n        broadcast(token)\n      }\n    } else {\n      broadcast(loginMethod === 'dual' ? getToken(projectId) : null)\n    }\n  }\n\n  async function logout() {\n    const requestClient = createClient({\n      projectId,\n      dataset,\n      useCdn: true,\n      withCredentials: true,\n      apiVersion: '2021-06-07',\n      requestTagPrefix: 'sanity.studio',\n    })\n\n    clearToken(projectId)\n    await requestClient.auth.logout()\n    broadcast(null)\n  }\n\n  const LoginComponent = createLoginComponent({\n    ...providerOptions,\n    getClient: () => state$.pipe(map((state) => state.client)),\n    loginMethod,\n  })\n\n  return {\n    handleCallbackUrl,\n    token: token$,\n    state: state$,\n    LoginComponent,\n    logout,\n  }\n}\n\nfunction hash(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return `${value}`\n\n  // note: this code path works for arrays as well as objects\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(value)\n        .sort(([a], [b]) => a.localeCompare(b, 'en'))\n        .map(([k, v]) => [k, hash(v)])\n    )\n  )\n}\n\n/**\n * @internal\n */\nexport const createAuthStore = memoize(_createAuthStore, hash)\n","import {of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {CurrentUser} from '@sanity/types'\nimport {AuthStore} from './types'\n\n/** @internal */\nexport interface MockAuthStoreOptions {\n  currentUser: CurrentUser | null\n  client: SanityClient\n}\n\n/**\n * Creates a mock `AuthStore` (for testing) that emits an `AuthState` derived\n * from the `client` and `currentUser` given.\n *\n * @internal\n */\nexport function createMockAuthStore({client, currentUser = null}: MockAuthStoreOptions): AuthStore {\n  return {\n    state: of({authenticated: true, client, currentUser}),\n  }\n}\n","/** @internal */\nexport function getProviderTitle(provider?: string): string | undefined {\n  if (provider === 'google') {\n    return 'Google'\n  }\n\n  if (provider === 'github') {\n    return 'GitHub'\n  }\n\n  if (provider === 'sanity') {\n    return 'Sanity'\n  }\n\n  if (provider?.startsWith('saml-')) {\n    return 'SAML/SSO'\n  }\n\n  return undefined\n}\n","import {Observable, OperatorFunction} from 'rxjs'\nimport {catchError, tap} from 'rxjs/operators'\n\ntype Selector<T, K> = (error: any, attemptNo: number, caught: Observable<T>) => Observable<K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>): OperatorFunction<T, K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>) {\n  return (input$: Observable<T>) => {\n    let errors: any[] = []\n\n    const errorOp: OperatorFunction<any, any> = catchError((err, caught: Observable<T>) => {\n      errors.push(err)\n      return selector(err, errors.length, caught).pipe(errorOp)\n    })\n    return input$.pipe(\n      tap(() => {\n        errors = []\n      }),\n      errorOp\n    )\n  }\n}\n","import {BifurClient} from '@sanity/bifur-client'\nimport {observableCallback} from 'observable-callback'\nimport {map, mergeMapTo, startWith, take, takeUntil} from 'rxjs/operators'\nimport {concat, fromEvent, merge, NEVER, Observable, of, throwError, timer} from 'rxjs'\nimport {catchWithCount} from './utils/catchWithCount'\n\n/** @internal */\nexport interface ConnectionStatusStore {\n  connectionStatus$: Observable<ConnectionStatus>\n}\n\nconst onOnline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'online')\nconst onOffline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'offline')\n\nconst expBackoff = (retryCount: number) => Math.pow(2, retryCount) * 100\n\n/** @internal */\nexport type ConnectingStatus = {\n  type: 'connecting'\n}\n\n/** @internal */\nexport type ErrorStatus = {\n  type: 'error'\n  error: Error\n  attemptNo: number\n  isOffline: boolean\n  retryAt: Date\n}\n\n/** @internal */\nexport type RetryingStatus = {\n  type: 'retrying'\n}\n\n/** @internal */\nexport type ConnectedStatus = {type: 'connected'; lastHeartbeat: Date}\n\n/** @internal */\nexport const CONNECTING: ConnectingStatus = {type: 'connecting'}\n\n/** @internal */\nexport type ConnectionStatus = ConnectingStatus | ErrorStatus | ConnectedStatus | RetryingStatus\n\nconst _callback = observableCallback()\n\nconst onRetry$ = _callback[0]\n\n/** @internal */\nexport const onRetry = _callback[1]\n\nconst createErrorStatus = ({\n  error,\n  isOffline,\n  attemptNo,\n  retryAt,\n}: {\n  error: Error\n  isOffline: boolean\n  attemptNo: number\n  retryAt: Date\n}): ErrorStatus => ({\n  type: 'error',\n  error,\n  attemptNo,\n  isOffline,\n  retryAt,\n})\n\n/** @internal */\nexport interface ConnectionStatusStoreOptions {\n  bifur: BifurClient\n}\n\n/**\n * This is the beginning of what should be the data store tracking connection status in the Sanity studio.\n *\n * @internal\n */\nexport function createConnectionStatusStore({\n  bifur,\n}: ConnectionStatusStoreOptions): ConnectionStatusStore {\n  const connectionStatus$: Observable<ConnectionStatus> = merge(\n    bifur.heartbeats,\n    onOffline$.pipe(mergeMapTo(throwError(new Error('The browser went offline'))))\n  ).pipe(\n    map((ts): ConnectionStatus => ({type: 'connected', lastHeartbeat: ts})),\n    catchWithCount((error, successiveErrorsCount, caught) => {\n      const timeUntilRetry = Math.min(1000 * 240, expBackoff(successiveErrorsCount))\n      const retryAt = new Date(new Date().getTime() + timeUntilRetry)\n      const expiry$ = timer(retryAt)\n      const isOffline = !navigator.onLine\n      const initialErrorStatus = createErrorStatus({\n        error,\n        retryAt,\n        isOffline,\n        attemptNo: successiveErrorsCount,\n      })\n\n      const triggerRetry$ = NEVER.pipe(\n        takeUntil(isOffline ? onOnline$ : merge(expiry$, onOnline$, onRetry$))\n      )\n\n      return concat(of(initialErrorStatus), triggerRetry$.pipe(take(1)), caught)\n    }),\n    startWith(CONNECTING)\n  )\n\n  return {connectionStatus$}\n}\n","import {createGlobalStyle} from 'styled-components'\n\nexport const GlobalStyle = createGlobalStyle(({theme}) => {\n  const {color, fonts} = theme.sanity\n\n  return {\n    html: {\n      backgroundColor: color.base.bg,\n    },\n\n    '#sanity': {\n      fontFamily: fonts.text.family,\n    },\n  }\n})\n","import type {Config} from './types'\n\n/** @beta */\nexport function defineConfig<T extends Config>(config: T): T {\n  return config\n}\n\n/**\n * @deprecated Use `defineConfig` instead\n * @beta\n */\nexport function createConfig<T extends Config>(config: T): T {\n  return defineConfig(config)\n}\n","import {isString} from 'lodash'\nimport {Plugin, PluginOptions} from './types'\n\n/** @beta */\nexport type PluginFactory<TOptions> = (options: TOptions) => PluginOptions\n\nfunction validatePlugin(pluginResult: PluginOptions) {\n  // TODO: name is required etc\n  const messages = [\n    'projectId' in pluginResult && '`projectId` not allowed in plugin configuration',\n    'dataset' in pluginResult && '`dataset` not allowed in plugin configuration',\n  ].filter(isString)\n\n  if (messages.length)\n    throw new Error(\n      `Invalid plugin configuration:\\n${messages.map((message) => `\\t${message}`).join('\\n')}`\n    )\n}\n\n/** @beta */\nexport function definePlugin<TOptions = void>(\n  arg: PluginFactory<TOptions> | PluginOptions\n): Plugin<TOptions> {\n  if (typeof arg === 'function') {\n    const pluginFactory = arg\n\n    return (options: TOptions) => {\n      // TODO: there's a possiblity of passing default arguments to users'\n      // plugin factories or reading from default options in `TOptions`\n      const result = pluginFactory(options)\n\n      validatePlugin(result)\n      return result\n    }\n  }\n\n  validatePlugin(arg)\n  return () => arg\n}\n\n/**\n * @deprecated Use `definePlugin` instead\n * @beta\n */\nexport function createPlugin<TOptions = void>(\n  arg: PluginFactory<TOptions> | PluginOptions\n): Plugin<TOptions> {\n  return definePlugin(arg)\n}\n","export default {\n  title: 'Slug',\n  name: 'slug',\n  type: 'object',\n  fields: [\n    {\n      name: 'current',\n      title: 'Current slug',\n      type: 'string',\n    },\n    {\n      // The source field is deprecated/unused, but leaving it included and hidden\n      // to prevent rendering \"Unknown field\" warnings on legacy data\n      name: 'source',\n      title: 'Source field',\n      type: 'string',\n      hidden: true,\n    },\n  ],\n}\n","export default {\n  title: 'Geographical Point',\n  name: 'geopoint',\n  type: 'object',\n  fields: [\n    {\n      name: 'lat',\n      type: 'number',\n      title: 'Latitude',\n    },\n    {\n      name: 'lng',\n      type: 'number',\n      title: 'Longitude',\n    },\n    {\n      name: 'alt',\n      type: 'number',\n      title: 'Altitude',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageCrop',\n  title: 'Image crop',\n  type: 'object',\n  fields: [\n    {\n      name: 'top',\n      type: 'number',\n    },\n    {\n      name: 'bottom',\n      type: 'number',\n    },\n    {\n      name: 'left',\n      type: 'number',\n    },\n    {\n      name: 'right',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageHotspot',\n  title: 'Image hotspot',\n  type: 'object',\n  fields: [\n    {\n      name: 'x',\n      type: 'number',\n    },\n    {\n      name: 'y',\n      type: 'number',\n    },\n    {\n      name: 'height',\n      type: 'number',\n    },\n    {\n      name: 'width',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.assetSourceData',\n  title: 'Asset Source Data',\n  type: 'object',\n  fields: [\n    {\n      name: 'name',\n      title: 'Source name',\n      description: 'A canonical name for the source this asset is originating from',\n      type: 'string',\n    },\n    {\n      name: 'id',\n      title: 'Asset Source ID',\n      description:\n        'The unique ID for the asset within the originating source so you can programatically find back to it',\n      type: 'string',\n    },\n    {\n      name: 'url',\n      title: 'Asset information URL',\n      description: 'A URL to find more information about this asset in the originating source',\n      type: 'string',\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/types'\n\nexport default {\n  name: 'sanity.imageAsset',\n  title: 'Image',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      readOnly: true,\n      title: 'File extension',\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      readOnly: true,\n      title: 'Mime type',\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'uploadId',\n      type: 'string',\n      readOnly: true,\n      hidden: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'metadata',\n      type: 'sanity.imageMetadata',\n      title: 'Metadata',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      id: '_id',\n      title: 'originalFilename',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || (typeof doc.path === 'string' && doc.path.split('/').slice(-1)[0]),\n        media: {asset: {_ref: doc.id}},\n        subtitle: `${doc.mimeType} (${(Number(doc.size) / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imagePalette',\n  title: 'Image palette',\n  type: 'object',\n  fields: [\n    {name: 'darkMuted', type: 'sanity.imagePaletteSwatch', title: 'Dark Muted'},\n    {name: 'lightVibrant', type: 'sanity.imagePaletteSwatch', title: 'Light Vibrant'},\n    {name: 'darkVibrant', type: 'sanity.imagePaletteSwatch', title: 'Dark Vibrant'},\n    {name: 'vibrant', type: 'sanity.imagePaletteSwatch', title: 'Vibrant'},\n    {name: 'dominant', type: 'sanity.imagePaletteSwatch', title: 'Dominant'},\n    {name: 'lightMuted', type: 'sanity.imagePaletteSwatch', title: 'Light Muted'},\n    {name: 'muted', type: 'sanity.imagePaletteSwatch', title: 'Muted'},\n  ],\n}\n","export default {\n  name: 'sanity.imagePaletteSwatch',\n  title: 'Image palette swatch',\n  type: 'object',\n  fields: [\n    {name: 'background', type: 'string', title: 'Background', readOnly: true},\n    {name: 'foreground', type: 'string', title: 'Foreground', readOnly: true},\n    {name: 'population', type: 'number', title: 'Population', readOnly: true},\n    {name: 'title', type: 'string', title: 'String', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageDimensions',\n  type: 'object',\n  title: 'Image dimensions',\n  fields: [\n    {name: 'height', type: 'number', title: 'Height', readOnly: true},\n    {name: 'width', type: 'number', title: 'Width', readOnly: true},\n    {name: 'aspectRatio', type: 'number', title: 'Aspect ratio', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageMetadata',\n  title: 'Image metadata',\n  type: 'object',\n  fieldsets: [\n    {\n      name: 'extra',\n      title: 'Extra metadata',\n      options: {\n        collapsable: true,\n      },\n    },\n  ],\n  fields: [\n    {\n      name: 'location',\n      type: 'geopoint',\n    },\n    {\n      name: 'dimensions',\n      title: 'Dimensions',\n      type: 'sanity.imageDimensions',\n      fieldset: 'extra',\n    },\n    {\n      name: 'palette',\n      type: 'sanity.imagePalette',\n      title: 'Palette',\n      fieldset: 'extra',\n    },\n    {\n      name: 'lqip',\n      title: 'LQIP (Low-Quality Image Placeholder)',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'blurHash',\n      title: 'BlurHash',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'hasAlpha',\n      title: 'Has alpha channel',\n      type: 'boolean',\n      readOnly: true,\n    },\n    {\n      name: 'isOpaque',\n      title: 'Is opaque',\n      type: 'boolean',\n      readOnly: true,\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/client'\n\nexport default {\n  name: 'sanity.fileAsset',\n  title: 'File',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      title: 'File extension',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      title: 'Mime type',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      title: 'originalFilename',\n      path: 'path',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || doc.path.split('/').slice(-1)[0],\n        subtitle: `${doc.mimeType} (${(doc.size / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","import SchemaBuilder, {type SchemaValidationResult} from '@sanity/schema'\nimport {validateSchema, groupProblems} from '@sanity/schema/_internal'\nimport {Schema} from '@sanity/types'\nimport {inferFromSchema as inferValidation} from '@sanity/validation'\nimport slug from './types/slug'\nimport geopoint from './types/geopoint'\nimport imageCrop from './types/imageCrop'\nimport imageHotspot from './types/imageHotspot'\nimport assetSourceData from './types/assetSourceData'\nimport imageAsset from './types/imageAsset'\nimport imagePalette from './types/imagePalette'\nimport imagePaletteSwatch from './types/imagePaletteSwatch'\nimport imageDimensions from './types/imageDimensions'\nimport imageMetadata from './types/imageMetadata'\nimport fileAsset from './types/fileAsset'\n\nconst isError = (problem: SchemaValidationResult) => problem.severity === 'error'\n\nconst builtinTypes = [\n  assetSourceData,\n  slug,\n  geopoint,\n  // legacyRichDate,\n  imageAsset,\n  fileAsset,\n  imageCrop,\n  imageHotspot,\n  imageMetadata,\n  imageDimensions,\n  imagePalette,\n  imagePaletteSwatch,\n]\n\n/** @beta */\nexport function createSchema(schemaDef: {name: string; types: any[]}): Schema {\n  const validated = validateSchema(schemaDef.types).getTypes()\n  const validation = groupProblems(validated)\n  const hasErrors = validation.some((group) => group.problems.some(isError))\n\n  const compiled = SchemaBuilder.compile({\n    name: schemaDef.name,\n    types: hasErrors ? [] : [...schemaDef.types, ...builtinTypes].filter(Boolean),\n  })\n\n  // ;(compiled as any)._source = schemaDef\n  ;(compiled as any)._validation = validation\n\n  return inferValidation(compiled as Schema)\n}\n","import type {SchemaType} from '@sanity/types'\n\n/**\n * Get the most specific defined title of a schema type\n * If not set directly on the given type, it will traverse up the tree until it\n * finds one, falling back to the _name_ of the type.\n *\n * @param type - The schema type to get the title of\n * @returns A title, alternatively the schema type _name_\n * @internal\n */\nexport function getSchemaTypeTitle(type: SchemaType): string {\n  if (typeof type.title === 'string') {\n    return type.title\n  }\n\n  if (type.type) {\n    return getSchemaTypeTitle(type.type)\n  }\n\n  return type.name || type.jsonType\n}\n","import type {SourceClientOptions} from './config'\n\n/**\n * Unless otherwise specified, this is the API version we use for controlled\n * requests on internal studio APIs. The user should always ask for a specific\n * API version when using the client - this way we can upgrade which version we\n * use internally without having the users code break unexpectedly. It also\n * means the user can easily upgrade to newer versions of GROQ when it arrives.\n *\n * @internal\n */\nexport const DEFAULT_STUDIO_CLIENT_OPTIONS: SourceClientOptions = {\n  apiVersion: '2022-09-09',\n}\n","import {Flex, Layer, Spinner} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst FullscreenLayer = styled(Layer)`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n`\n\nexport function FullscreenSpinner() {\n  return (\n    <FullscreenLayer>\n      <Flex height=\"fill\" align=\"center\" justify=\"center\">\n        <Spinner />\n      </Flex>\n    </FullscreenLayer>\n  )\n}\n","import {Box, Flex, Spinner, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function SpinnerWithText(props: {text: string}) {\n  const {text} = props\n\n  return (\n    <Flex direction=\"row\" justify=\"center\" align=\"center\">\n      <Spinner />\n      <Box marginLeft={2}>\n        <Text>{text}</Text>\n      </Box>\n    </Flex>\n  )\n}\n","import {UploadState} from '@sanity/types'\nimport {isRecord, isString} from '../../util'\n\nexport function _extractUploadState(value: unknown): {\n  _upload?: UploadState\n  value: unknown\n} {\n  if (isRecord(value)) {\n    const {_upload, ...restValue} = value\n\n    return {\n      _upload: _resolveUploadValue(_upload),\n      value: restValue,\n    }\n  }\n\n  return {_upload: undefined, value}\n}\n\nfunction _resolveUploadValue(value: unknown): UploadState | undefined {\n  if (!isRecord(value)) return undefined\n\n  const progress = typeof value.progress === 'number' ? value.progress : undefined\n  const initiated = isString(value.initiated) ? value.initiated : undefined\n  const updated = isString(value.updated) ? value.updated : undefined\n  const fileName = isRecord(value.file) && isString(value.file.name) ? value.file.name : undefined\n  const fileType = isRecord(value.file) && isString(value.file.type) ? value.file.type : undefined\n  const previewImage = isString(value.previewImage) ? value.previewImage : undefined\n\n  if (progress && initiated && updated && fileName && fileType) {\n    return {\n      progress,\n      initiated,\n      updated,\n      file: {name: fileName, type: fileType},\n      previewImage,\n    }\n  }\n\n  return undefined\n}\n","import {ComponentType} from 'react'\nimport {\n  BlockImagePreview,\n  BlockPreview,\n  DefaultPreview,\n  DetailPreview,\n  InlinePreview,\n  MediaPreview,\n  PreviewLayoutKey,\n  PreviewProps,\n} from '../../components'\n\nexport const _previewComponents: {\n  [TLayoutKey in PreviewLayoutKey]: ComponentType<PreviewProps<TLayoutKey>>\n} = {\n  default: DefaultPreview,\n  media: MediaPreview,\n  detail: DetailPreview,\n  inline: InlinePreview,\n  block: BlockPreview,\n  blockImage: BlockImagePreview,\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageUrlFitMode, isImage, isReference} from '@sanity/types'\nimport React, {\n  ComponentType,\n  createElement,\n  ElementType,\n  isValidElement,\n  ReactElement,\n  useCallback,\n  useMemo,\n} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewProps} from '../../components/previews'\nimport {useClient} from '../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {isRecord, isString} from '../../util'\nimport {_extractUploadState} from './_extractUploadState'\nimport {_previewComponents} from './_previewComponents'\n\nfunction FallbackIcon() {\n  return <DocumentIcon className=\"sanity-studio__preview-fallback-icon\" />\n}\n\n/** @internal */\nexport interface SanityDefaultPreviewProps\n  extends Omit<PreviewProps, 'value' | 'renderDefault' | 'schemaType'> {\n  error?: Error | null\n  icon?: ElementType | false\n  value?: unknown\n}\n\n/** @internal */\nexport function SanityDefaultPreview(props: SanityDefaultPreviewProps): ReactElement {\n  const {\n    description: descriptionProp,\n    icon,\n    layout,\n    media: mediaProp,\n    subtitle: subtitleProp,\n    title: titleProp,\n    value: valueProp,\n    ...restProps\n  } = props\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  const component = _previewComponents[layout || 'default'] || _previewComponents.default\n\n  const {_upload, value} = useMemo(() => {\n    return valueProp ? _extractUploadState(valueProp) : {_upload: undefined, value: undefined}\n  }, [valueProp])\n\n  const description: PreviewProps['description'] =\n    descriptionProp ||\n    (isRecord(value) && value?.description ? String(value?.description) : undefined)\n\n  const title: PreviewProps['title'] =\n    titleProp || (isRecord(value) && value?.title ? String(value?.title) : undefined)\n\n  const subtitle: PreviewProps['subtitle'] =\n    subtitleProp || (isRecord(value) && value?.subtitle ? String(value?.subtitle) : undefined)\n\n  // NOTE: This function exists because the previews provides options\n  // for the rendering of the media (dimensions)\n  const renderMedia = useCallback(\n    (options: {\n      dimensions: {width?: number; height?: number; fit: ImageUrlFitMode; dpr?: number}\n    }) => {\n      if (!isImage(mediaProp)) {\n        return null\n      }\n\n      const {dimensions} = options\n\n      // Handle sanity image\n      return (\n        <img\n          alt={isString(title) ? title : undefined}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n          src={\n            imageBuilder\n              .image(mediaProp)\n              .width(dimensions.width || 100)\n              .height(dimensions.height || 100)\n              .fit(dimensions.fit)\n              .dpr(dimensions.dpr || 1)\n              .url() || ''\n          }\n        />\n      )\n    },\n    [imageBuilder, mediaProp, title]\n  )\n\n  const renderIcon = useCallback(() => {\n    return createElement(icon || FallbackIcon)\n  }, [icon])\n\n  const media = useMemo(() => {\n    if (icon === false) {\n      // Explicitly disabled\n      return false\n    }\n\n    if (isValidElementType(mediaProp)) {\n      return mediaProp\n    }\n\n    if (isValidElement(mediaProp)) {\n      return mediaProp\n    }\n\n    // If the asset is on media\n    if (isReference(mediaProp) && mediaProp._type === 'reference') {\n      return renderMedia\n    }\n\n    // Handle sanity image\n    if (isImage(mediaProp)) {\n      return renderMedia\n    }\n\n    // Render fallback icon\n    return renderIcon\n  }, [icon, mediaProp, renderIcon, renderMedia])\n\n  const previewProps: Omit<PreviewProps, 'renderDefault'> = useMemo(\n    () => ({\n      imageUrl: _upload?.previewImage,\n      progress: _upload?.progress,\n      ...restProps,\n      // @todo: fix `TS2769: No overload matches this call.`\n      media: media as any,\n      description,\n      title,\n      subtitle,\n      value,\n    }),\n    [\n      _upload?.previewImage,\n      _upload?.progress,\n      description,\n      media,\n      restProps,\n      subtitle,\n      title,\n      value,\n    ]\n  )\n\n  return createElement(\n    component as ComponentType<Omit<PreviewProps, 'renderDefault'>>,\n    previewProps\n  )\n}\n","import {PreviewValue, SchemaType, SortOrdering} from '@sanity/types'\nimport {useEffect, useState} from 'react'\nimport {catchError, distinctUntilChanged, map, tap} from 'rxjs/operators'\nimport {of} from 'rxjs'\nimport {useDocumentPreviewStore} from '../store'\nimport {Previewable} from './types'\n\nexport {useDocumentPreview as unstable_useDocumentPreview}\n\ninterface State {\n  isLoading: boolean\n  error?: Error\n  value?: PreviewValue\n}\nconst INITIAL_STATE: State = {\n  isLoading: true,\n}\n/**\n * @internal\n * @deprecated FOR INTERNAL USE.\n */\nfunction useDocumentPreview(props: {\n  enabled?: boolean\n  ordering?: SortOrdering\n  schemaType?: SchemaType\n  value: Previewable | undefined\n}): State {\n  const {enabled = true, ordering, schemaType, value: previewValue} = props || {}\n  const {observeForPreview} = useDocumentPreviewStore()\n  const [state, setState] = useState<State>(INITIAL_STATE)\n  useEffect(() => {\n    if (!enabled || !previewValue || !schemaType) return undefined\n\n    const snapshotEvent$ = observeForPreview(previewValue, schemaType, {ordering})\n\n    const sub = snapshotEvent$\n      .pipe(\n        map((event) => ({isLoading: false, value: event.snapshot || undefined})),\n        catchError((error) => of({isLoading: false, error})),\n        tap((nextState) => setState(nextState))\n      )\n      .subscribe()\n\n    return () => sub.unsubscribe()\n  }, [enabled, observeForPreview, ordering, schemaType, previewValue])\n\n  return state\n}\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const resize$ =\n  typeof window === 'undefined' ? EMPTY : fromEvent(window, 'resize').pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const scroll$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'scroll', {passive: true, capture: true}).pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const orientationChange$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'orientationchange').pipe(shareReplay(1))\n","import {Subject, Observable, merge, of as observableOf} from 'rxjs'\nimport {map, mergeMap, filter} from 'rxjs/operators'\nimport {resize$} from './resize'\nimport {scroll$} from './scroll'\nimport {orientationChange$} from './orientationChange'\n\nconst ROOT_MARGIN_PX = 150\n\n/*\n  Adapted from the polyfill at https://github.com/WICG/IntersectionObserver\n*/\nfunction isIntersectionObserverSupported() {\n  if (\n    typeof window !== 'undefined' &&\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in IntersectionObserverEntry.prototype\n  ) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/WICG/IntersectionObserver/issues/211\n    if (!('isIntersecting' in IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get() {\n          return this.intersectionRatio > 0\n        },\n      })\n    }\n    return true\n  }\n  return false\n}\n\ntype IntersectionEvent = {isIntersecting: boolean}\n\nexport const intersectionObservableFor = isIntersectionObserverSupported()\n  ? createIntersectionObserverBased()\n  : createLegacyBased()\n\ntype IntersectionObservableFor = (element: Element) => Observable<IntersectionEvent>\n\nfunction createIntersectionObserverBased(): IntersectionObservableFor {\n  const intersectionObserverEntriesSubject = new Subject<IntersectionObserverEntry>()\n\n  const intersectionObserver = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        intersectionObserverEntriesSubject.next(entry)\n      })\n    },\n    {\n      threshold: 0,\n      rootMargin: `${ROOT_MARGIN_PX}px`,\n    }\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element) {\n    return new Observable((observer) => {\n      intersectionObserver.observe(element)\n      observer.next()\n      return () => intersectionObserver.unobserve(element)\n    }).pipe(\n      mergeMap(() => intersectionObserverEntriesSubject.asObservable()),\n      filter((entry: IntersectionObserverEntry) => entry.target === element),\n      map((ev) => ({\n        isIntersecting: ev.isIntersecting,\n      }))\n    )\n  }\n}\n\n// This can be removed when intersection observer are supported by the browsers we support\nfunction createLegacyBased() {\n  function getViewport() {\n    return {\n      left: 0,\n      right: window.innerWidth,\n      top: 0,\n      bottom: window.innerHeight,\n    }\n  }\n\n  function intersects(\n    rect: DOMRect,\n    viewport: {left: number; right: number; top: number; bottom: number},\n    margin: number\n  ) {\n    return (\n      rect.left <= viewport.right + margin &&\n      rect.right >= viewport.left - margin &&\n      rect.top <= viewport.bottom + margin &&\n      rect.bottom >= viewport.top - margin\n    )\n  }\n\n  function inViewport(element: HTMLElement) {\n    return () => intersects(element.getBoundingClientRect(), getViewport(), ROOT_MARGIN_PX)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element: HTMLElement): Observable<IntersectionEvent> {\n    const isElementInViewport = inViewport(element)\n    return merge(observableOf(isElementInViewport()), resize$, scroll$, orientationChange$).pipe(\n      // @todo: consider \"faking\" more of the IntersectionObserverEntry api if possible\n      map(isElementInViewport),\n      map((isIntersecting) => ({isIntersecting}))\n    )\n  }\n}\n","import {EMPTY, fromEvent, Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const visibilityChange$: Observable<Event> =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(document, 'visibilitychange').pipe(shareReplay(1))\n","import {useEffect, useState} from 'react'\nimport {concat, of} from 'rxjs'\nimport {delay, distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {intersectionObservableFor} from './streams/intersectionObservableFor'\nimport {visibilityChange$} from './streams/visibilityChange'\n\nexport function useVisibility(props: {element: HTMLElement | null; hideDelay?: number}): boolean {\n  const {element, hideDelay = 0} = props\n  const [visible, setVisible] = useState(false)\n\n  useEffect(() => {\n    if (!element) {\n      return undefined\n    }\n\n    const isDocumentVisible$ = concat(\n      of(!document.hidden),\n      visibilityChange$.pipe(\n        map((event) => (event.target instanceof Document ? !event?.target?.hidden : false))\n      )\n    ).pipe(distinctUntilChanged())\n\n    const inViewport$ = intersectionObservableFor(element).pipe(\n      map((event) => event.isIntersecting)\n    )\n\n    const visible$ = isDocumentVisible$.pipe(\n      switchMap((isDocumentVisible) => (isDocumentVisible ? inViewport$ : of(false))),\n      switchMap((isVisible) => (isVisible ? of(true) : of(false).pipe(delay(hideDelay)))),\n      distinctUntilChanged()\n    )\n\n    const sub = visible$.subscribe(setVisible)\n\n    return () => sub.unsubscribe()\n  }, [element, hideDelay])\n\n  return visible\n}\n","export const _HIDE_DELAY = 1000 * 2 // 2 seconds\n","import {SchemaType} from '@sanity/types'\nimport {ElementType} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {SanityDefaultPreview} from './SanityDefaultPreview'\n\ntype PreviewElementType = ElementType<\n  Omit<PreviewProps, 'renderDefault'> & {\n    icon?: React.ElementType\n    schemaType?: SchemaType\n  }\n>\n\nexport function _resolvePreviewComponent(type: SchemaType): PreviewElementType {\n  // @todo: find out why `type.components?.preview` isn't inferred as `PreviewElementType`\n  return (type.components?.preview as any) || SanityDefaultPreview\n}\n","import {SchemaType, SortOrdering} from '@sanity/types'\nimport React, {createElement, CSSProperties, useCallback, useMemo, useState} from 'react'\nimport {PreviewProps} from '../../components'\nimport {Previewable} from '../types'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../useDocumentPreview'\nimport {useVisibility} from '../useVisibility'\nimport {_HIDE_DELAY} from './_constants'\nimport {_resolvePreviewComponent} from './_resolvePreviewComponent'\n\n/** @internal */\nexport interface SanityPreviewProps\n  extends Omit<PreviewProps, 'value' | 'renderDefault' | 'schemaType'> {\n  ordering?: SortOrdering\n  schemaType: SchemaType\n  value: Previewable\n}\n\n/** @internal */\nexport function SanityPreview(props: SanityPreviewProps & {style?: CSSProperties}) {\n  const {\n    layout = 'default',\n    ordering,\n    schemaType,\n    style: styleProp,\n    value: valueProp,\n    media,\n    description,\n    title,\n    subtitle,\n    ...restProps\n  } = props\n  const component = _resolvePreviewComponent(schemaType)\n  const [element, setElement] = useState<HTMLDivElement | null>(null)\n  const isPTE = ['inline', 'block', 'blockImage'].includes(layout)\n\n  const icon = useMemo(() => {\n    return schemaType?.icon\n  }, [schemaType])\n\n  // Subscribe to visiblity\n  const visibility = useVisibility({\n    // NOTE: disable when PTE preview\n    element: isPTE ? null : element,\n    hideDelay: _HIDE_DELAY,\n  })\n\n  // Subscribe document preview value\n  const {error, value, isLoading} = useDocumentPreview({\n    enabled: isPTE || visibility,\n    ordering,\n    schemaType,\n    value: valueProp,\n  })\n\n  const setRef = useCallback((refValue: HTMLDivElement | null) => {\n    setElement(refValue)\n  }, [])\n\n  const style: CSSProperties = useMemo(\n    () => ({\n      ...styleProp,\n      minWidth: styleProp?.minWidth || 1,\n      minHeight: styleProp?.minHeight || 1,\n    }),\n    [styleProp]\n  )\n\n  const previewProps: Omit<PreviewProps, 'renderDefault'> = useMemo(\n    () => ({\n      ...restProps,\n      description: description || value?.description,\n      error,\n      isPlaceholder: isLoading,\n      icon,\n      layout,\n      media: media || value?.media,\n      schemaType,\n      subtitle: subtitle || value?.subtitle,\n      title: title || value?.title,\n      value,\n    }),\n    [\n      description,\n      error,\n      icon,\n      isLoading,\n      layout,\n      media,\n      restProps,\n      schemaType,\n      subtitle,\n      title,\n      value,\n    ]\n  )\n\n  // Remove components property to avoid component rendering itself\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const {components, ...restSchemaType} = schemaType\n\n  return (\n    <div ref={setRef} style={style}>\n      {createElement(component, {...previewProps, schemaType: restSchemaType})}\n    </div>\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {PreviewPath} from '../types'\n\n/** @internal */\nexport function getPreviewPaths(preview: SchemaType['preview']): PreviewPath[] | undefined {\n  const selection = preview?.select\n\n  if (!selection) return undefined\n\n  return Object.values(selection).map((value) => String(value).split('.'))\n}\n","import {PreviewValue, SanityDocument, SchemaType} from '@sanity/types'\nimport React from 'react'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, startWith} from 'rxjs/operators'\nimport {getDraftId, getPublishedId} from '../../util/draftUtils'\nimport {DocumentPreviewStore} from '../documentPreviewStore'\n\nexport interface PreviewState {\n  isLoading?: boolean\n  draft?: PreviewValue | Partial<SanityDocument> | null\n  published?: PreviewValue | Partial<SanityDocument> | null\n}\n\nconst isLiveEditEnabled = (schemaType: SchemaType) => schemaType.liveEdit === true\n\n/**\n * Obtain a document's published and draft state, along with loading status.\n *\n * @internal\n */\nexport function getPreviewStateObservable(\n  documentPreviewStore: DocumentPreviewStore,\n  schemaType: SchemaType,\n  documentId: string,\n  title: React.ReactNode\n): Observable<PreviewState> {\n  const draft$ = isLiveEditEnabled(schemaType)\n    ? of({snapshot: null})\n    : documentPreviewStore.observeForPreview(\n        {_type: 'reference', _ref: getDraftId(documentId)},\n        schemaType\n      )\n\n  const published$ = documentPreviewStore.observeForPreview(\n    {_type: 'reference', _ref: getPublishedId(documentId)},\n    schemaType\n  )\n\n  return combineLatest([draft$, published$]).pipe(\n    map(([draft, published]) => ({\n      draft: draft.snapshot ? {title, ...(draft.snapshot || {})} : null,\n      isLoading: false,\n      published: published.snapshot ? {title, ...(published.snapshot || {})} : null,\n    })),\n    startWith({draft: null, isLoading: true, published: null})\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport type {PreviewValue, SanityDocument} from '@sanity/types'\nimport {assignWith} from 'lodash'\nimport React from 'react'\n\nconst getMissingDocumentFallback = (item: SanityDocument) => ({\n  title: <em>{item.title ? String(item.title) : 'Missing document'}</em>,\n  subtitle: <em>{item.title ? `Missing document ID: ${item._id}` : `Document ID: ${item._id}`}</em>,\n  media: () => <WarningOutlineIcon />,\n})\n\n/**\n * Obtain document preview values used in <SanityPreview> and <SanityDefaultPreview> components.\n * Also displays fallback values if the document cannot be found.\n *\n * @internal\n */\nexport const getPreviewValueWithFallback = ({\n  value,\n  draft,\n  published,\n}: {\n  value: SanityDocument\n  draft?: Partial<SanityDocument> | PreviewValue | null\n  published?: Partial<SanityDocument> | PreviewValue | null\n}) => {\n  const snapshot = draft || published\n\n  if (!snapshot) {\n    return getMissingDocumentFallback(value)\n  }\n\n  return assignWith({}, snapshot, value, (objValue, srcValue) => {\n    return typeof srcValue === 'undefined' ? objValue : srcValue\n  }) as PreviewValue\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {PreviewValue} from '@sanity/types'\nimport React from 'react'\n\nexport const INCLUDE_FIELDS_QUERY = ['_id', '_rev', '_type']\nexport const INCLUDE_FIELDS = [...INCLUDE_FIELDS_QUERY, '_key']\n\nexport const AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nexport const AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nexport const AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\nexport const INVALID_PREVIEW_FALLBACK: PreviewValue = {\n  title: 'Invalid preview config',\n  subtitle: 'Check the error log in the console',\n  media: <WarningOutlineIcon />,\n}\n","import {Block, isBlock, isSpan} from '@sanity/types'\n\nexport function isPortableTextArray(blocks: unknown): blocks is Block[] {\n  return Array.isArray(blocks) && (blocks.length === 0 || blocks.some(isBlock))\n}\n\nexport function extractTextFromBlocks(blocks: Block[]): string {\n  const firstBlock = blocks.find(isBlock)\n  if (!firstBlock || !firstBlock.children) {\n    return ''\n  }\n\n  return firstBlock.children\n    .filter(isSpan)\n    .map((span) => span.text)\n    .join('')\n}\n","export function keysOf<T extends object>(value: T) {\n  return Object.keys(value) as (keyof T)[]\n}\n","import {\n  isTitledListValue,\n  PrepareViewOptions,\n  PreviewValue,\n  SchemaType,\n  TitledListValue,\n} from '@sanity/types'\nimport {debounce, flatten, get, isPlainObject, pick, uniqBy} from 'lodash'\nimport {INVALID_PREVIEW_FALLBACK} from '../constants'\nimport {PreviewableType} from '../types'\nimport {isRecord} from '../../util'\nimport {isPortableTextArray, extractTextFromBlocks} from './portableText'\nimport {keysOf} from './keysOf'\n\nconst PRESERVE_KEYS = ['_id', '_type', '_upload', '_createdAt', '_updatedAt']\nconst EMPTY: never[] = []\n\ntype SelectedValue = Record<string, unknown>\n\nexport type PrepareInvocationResult = {\n  selectedValue?: SelectedValue\n  returnValue: null | PreviewValue\n  errors: Error[]\n}\n\nconst errorCollector = (() => {\n  let errorsByType: Record<string, {error: Error; type: SchemaType; value: SelectedValue}[]> = {}\n\n  return {\n    add: (type: SchemaType, value: SelectedValue, error: Error) => {\n      if (!errorsByType[type.name]) {\n        errorsByType[type.name] = []\n      }\n      errorsByType[type.name].push({error: error, type: type, value})\n    },\n    getAll() {\n      return errorsByType\n    },\n    clear() {\n      errorsByType = {}\n    },\n  }\n})()\n\nconst reportErrors = debounce(() => {\n  /* eslint-disable no-console */\n  const errorsByType = errorCollector.getAll()\n  const uniqueErrors = flatten(\n    Object.keys(errorsByType).map((typeName) => {\n      const entries = errorsByType[typeName]\n      return uniqBy(entries, (entry) => entry.error.message)\n    })\n  )\n  const errorCount = uniqueErrors.length\n  if (errorCount === 0) {\n    return\n  }\n\n  console.groupCollapsed(\n    `%cHeads up! Got ${\n      errorCount === 1 ? 'error' : `${errorCount} errors`\n    } while preparing data for preview. Click for details.`,\n    'color: #ff7e7c'\n  )\n\n  Object.keys(errorsByType).forEach((typeName) => {\n    const entries = errorsByType[typeName]\n    const first = entries[0]\n    console.group(`Check the preview config for schema type \"${typeName}\": %o`, first.type.preview)\n    const uniqued = uniqBy(entries, (entry) => entry.error.message)\n    uniqued.forEach((entry) => {\n      if ((entry.error as any).type === 'returnValueError') {\n        const hasPrepare = typeof entry.type.preview?.prepare === 'function'\n        const {value, error} = entry\n        console.log(\n          `Encountered an invalid ${\n            hasPrepare\n              ? 'return value when calling prepare(%o)'\n              : 'value targeted by preview.select'\n          }:`,\n          value\n        )\n        console.error(error)\n      }\n      if ((entry.error as any).type === 'prepareError') {\n        const {value, error} = entry\n        console.log('Encountered an error when calling prepare(%o):', value)\n        console.error(error)\n      }\n    })\n    console.groupEnd()\n  })\n  console.groupEnd()\n  errorCollector.clear()\n  /* eslint-enable no-console */\n}, 1000)\n\nconst isRenderable =\n  (fieldName: string) =>\n  (value: unknown): Error[] => {\n    const type = typeof value\n    if (\n      value === null ||\n      type === 'undefined' ||\n      type === 'string' ||\n      type === 'number' ||\n      type === 'boolean'\n    ) {\n      return EMPTY\n    }\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `The \"${fieldName}\" field should be a string, number, boolean, undefined or null, instead saw ${inspect(\n            value\n          )}`\n        )\n      ),\n    ]\n  }\nconst FIELD_NAME_VALIDATORS: Record<string, (value: unknown) => Error[]> = {\n  media: () => {\n    // not sure how to validate media as it would  possibly involve executing a function and check the\n    // return value\n    return EMPTY\n  },\n  title: isRenderable('title'),\n  subtitle: isRenderable('subtitle'),\n  description: isRenderable('description'),\n  imageUrl: isRenderable('imageUrl'),\n  date: isRenderable('date'),\n}\n\nfunction inspect(val: unknown, prefixType = true): string {\n  if (isRecord(val)) {\n    const keys = Object.keys(val)\n    const ellipse = keys.length > 3 ? '...' : ''\n    const prefix = `object with keys `\n    return `${prefixType ? prefix : ''}{${keys.slice(0, 3).join(', ')}${ellipse}}`\n  }\n  if (Array.isArray(val)) {\n    const ellipse = val.length > 3 ? '...' : ''\n    const prefix = `array with `\n    return `${prefixType ? prefix : ''}[${val.map((v) => inspect(v, false))}${ellipse}]`\n  }\n  return `the ${typeof val} ${val}`\n}\n\nfunction validateFieldValue(fieldName: string, fieldValue: unknown) {\n  if (typeof fieldValue === 'undefined') {\n    return EMPTY\n  }\n  const validator = FIELD_NAME_VALIDATORS[fieldName]\n  return (validator && validator(fieldValue)) || EMPTY\n}\n\nfunction assignType(type: string, error: Error) {\n  return Object.assign(error, {type})\n}\n\nfunction validatePreparedValue(preparedValue: PreviewValue | null) {\n  if (!isPlainObject(preparedValue) || preparedValue === null) {\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `Invalid return value. Expected a plain object with at least a 'title' field, instead saw ${inspect(\n            preparedValue\n          )}`\n        )\n      ),\n    ]\n  }\n\n  return Object.entries(preparedValue).reduce<Error[]>((acc, [fieldName, fieldValue]) => {\n    return [...acc, ...validateFieldValue(fieldName, fieldValue)]\n  }, EMPTY)\n}\n\nfunction validateReturnedPreview(result: PrepareInvocationResult) {\n  return {\n    ...result,\n    errors: [...(result.errors || []), ...validatePreparedValue(result.returnValue)],\n  }\n}\n\nfunction defaultPrepare(value: SelectedValue) {\n  return keysOf(value).reduce((acc: SelectedValue, fieldName: keyof SelectedValue) => {\n    const val = value[fieldName]\n    return {\n      ...acc,\n      [fieldName]: isPortableTextArray(val) ? extractTextFromBlocks(val) : value[fieldName],\n    }\n  }, {})\n}\n\nexport function invokePrepare(\n  type: PreviewableType,\n  value: SelectedValue,\n  viewOptions: PrepareViewOptions = {}\n): PrepareInvocationResult {\n  const prepare = type.preview?.prepare\n  try {\n    return {\n      returnValue: prepare\n        ? (prepare(value, viewOptions) as Record<string, unknown>)\n        : defaultPrepare(value),\n      errors: EMPTY,\n    }\n  } catch (error) {\n    return {\n      returnValue: null,\n      errors: [assignType('prepareError', error)],\n    }\n  }\n}\n\nfunction withErrors(\n  result: {errors: Error[]},\n  type: SchemaType,\n  selectedValue: SelectedValue\n): PreviewValue {\n  result.errors.forEach((error) => errorCollector.add(type, selectedValue, error))\n  reportErrors()\n\n  return INVALID_PREVIEW_FALLBACK\n}\n\ninterface EnumListOptions {\n  list: TitledListValue[] | unknown[]\n}\n\nfunction hasEnumListOptions(\n  type: SchemaType\n): type is SchemaType & {options: SchemaType['options'] & EnumListOptions} {\n  const options = type.options && typeof type.options === 'object' ? type.options : false\n  if (!options || !('list' in options)) {\n    return false\n  }\n\n  const listOptions = (options as EnumListOptions).list\n  return Array.isArray(listOptions)\n}\n\nfunction getListOptions(type: SchemaType): TitledListValue[] | undefined {\n  if (!hasEnumListOptions(type)) {\n    return undefined\n  }\n\n  const listOptions = type.options.list as EnumListOptions['list']\n  return listOptions.map((option) =>\n    isTitledListValue(option) ? option : ({title: option, value: option} as TitledListValue)\n  )\n}\n\n/** @internal */\nexport function prepareForPreview(\n  rawValue: unknown,\n  type: SchemaType,\n  viewOptions: PrepareViewOptions = {}\n): PreviewValue & {_createdAt?: string; _updatedAt?: string} {\n  const hasCustomPrepare = typeof type.preview?.prepare === 'function'\n  const selection: Record<string, string> = type.preview?.select || {}\n  const targetKeys = Object.keys(selection)\n\n  const selectedValue = targetKeys.reduce<Record<string, unknown>>((acc, key) => {\n    // Find the field the value belongs to\n    const typeWithFields = 'fields' in type ? type : null\n    const targetFieldName = selection[key]\n    const valueField = typeWithFields?.fields?.find((f) => f.name === targetFieldName)\n    const listOptions = valueField && getListOptions(valueField.type)\n\n    // If the user has _not_ specified a `prepare()` function for the preview, and the\n    // field type has an `options.list`, we want to use the title of the selected item\n    // as the preview value. If, however, there _is_ a custom `prepare()`, we leave this\n    // mapping up to the user to perform should they want to. This is both to maintain\n    // backwards compatiblity, but also to allow using the raw value for prepare operations\n    if (!hasCustomPrepare && listOptions) {\n      // Find the selected option that matches the raw value\n      const selectedOption =\n        listOptions && listOptions.find((opt) => opt.value === get(rawValue, selection[key]))\n      acc[key] = selectedOption ? selectedOption.value : get(rawValue, selection[key])\n    } else {\n      acc[key] = get(rawValue, selection[key])\n    }\n\n    return acc\n  }, {})\n\n  const prepareResult = invokePrepare(type, selectedValue, viewOptions)\n  if (prepareResult.errors.length > 0) {\n    return withErrors(prepareResult, type, selectedValue)\n  }\n\n  const returnValueResult = validateReturnedPreview(invokePrepare(type, selectedValue, viewOptions))\n  return returnValueResult.errors.length > 0\n    ? withErrors(returnValueResult, type, selectedValue)\n    : {...pick(rawValue, PRESERVE_KEYS), ...prepareResult.returnValue}\n}\n","import {Observable, Subscriber} from 'rxjs'\nimport {isNonNullable} from '../../util'\n\ninterface QueueItem {\n  args: any[]\n  observer: Subscriber<any>\n  completed: boolean\n}\n\n// Takes an observable returning function and returns a debounced function that, when called\n// collects its passed arguments until wait time has passed without receiving new calls.\n// When wait period is over, calls the original function with the collected arguments\nexport function debounceCollect<Fn extends (...args: any[]) => Observable<any[]>>(\n  fn: Fn,\n  wait: number\n): Fn extends (collectedArgs: [...infer TArgs][]) => Observable<(infer TReturnValue)[]>\n  ? (...args: TArgs) => Observable<TReturnValue>\n  : never\nexport function debounceCollect(fn: any, wait: number) {\n  let timer: ReturnType<typeof setTimeout>\n  let queue: Record<number | string, QueueItem | undefined> = {}\n  let idx = 0\n  return function debounced(...args: any[]) {\n    return new Observable((obs) => {\n      clearTimeout(timer)\n      timer = setTimeout(flush, wait)\n      const queueItem: QueueItem = {\n        args: args,\n        observer: obs,\n        completed: false,\n      }\n      const id = idx++\n      queue[id] = queueItem\n      return () => {\n        // console.log('completed', queueItem.args)\n        queueItem.completed = true\n      }\n    })\n  }\n\n  function flush() {\n    const currentlyFlushingQueue = queue\n    queue = {}\n\n    const queueItemIds = Object.keys(currentlyFlushingQueue) // Todo: use debug\n      // .map(id => {\n      //   if (currentlyFlushingQueue[id].completed) {\n      //     console.log('Dropped', currentlyFlushingQueue[id].args)\n      //   }\n      //   return id\n      // })\n      .filter((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && !queueItem.completed\n      })\n\n    if (queueItemIds.length === 0) {\n      // nothing to do\n      return\n    }\n    const collectedArgs = queueItemIds\n      .map((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && queueItem.args\n      })\n      .filter(isNonNullable)\n    fn(collectedArgs).subscribe({\n      next(results: any[]) {\n        results.forEach((result, i) => {\n          const queueItem = currentlyFlushingQueue[queueItemIds[i]]\n          if (queueItem && !queueItem.completed) {\n            queueItem.observer.next(results[i])\n          }\n        })\n      },\n      complete() {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.complete()\n          }\n        })\n      },\n      error(err: Error) {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.error(err)\n          }\n        })\n      },\n    })\n  }\n}\n","/* eslint-disable max-nested-callbacks */\n\nimport type {SanityClient} from '@sanity/client'\nimport {combineLatest, defer, from, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, mergeMap, switchMap} from 'rxjs/operators'\nimport shallowEquals from 'shallow-equals'\nimport {flatten, keyBy} from 'lodash'\nimport {getDraftId, getPublishedId, isRecord} from '../util'\nimport type {\n  AvailabilityResponse,\n  DocumentAvailability,\n  DraftsModelDocumentAvailability,\n} from './types'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {\n  AVAILABILITY_NOT_FOUND,\n  AVAILABILITY_PERMISSION_DENIED,\n  AVAILABILITY_READABLE,\n} from './constants'\nimport {ObservePathsFn} from './types'\n\nconst MAX_DOCUMENT_ID_CHUNK_SIZE = 11164\n\n/**\n * Takes an array of document IDs and puts them into individual chunks.\n * Because document IDs can vary greatly in size, we want to chunk by the length of the\n * combined comma-separated ID set. We try to stay within 11164 bytes - this is about the\n * same length the Sanity client uses for max query size, and accounts for rather large\n * headers to be present - so this _should_ be safe.\n *\n * @param documentIds - Unique document IDs to chunk\n * @returns Array of document ID chunks\n */\nfunction chunkDocumentIds(documentIds: string[]): string[][] {\n  let chunk: string[] = []\n  let chunkSize = 0\n\n  const chunks: string[][] = []\n\n  for (const documentId of documentIds) {\n    // Reached the max length? start a new chunk\n    if (chunkSize + documentId.length + 1 >= MAX_DOCUMENT_ID_CHUNK_SIZE) {\n      chunks.push(chunk)\n      chunk = []\n      chunkSize = 0\n    }\n\n    chunkSize += documentId.length + 1 // +1 is to account for a comma between IDs\n    chunk.push(documentId)\n  }\n\n  if (!chunks.includes(chunk)) {\n    chunks.push(chunk)\n  }\n\n  return chunks\n}\n\nexport function create_preview_availability(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observeDocumentPairAvailability(id: string): Observable<DraftsModelDocumentAvailability>\n} {\n  /**\n   * Returns an observable of metadata for a given drafts model document\n   */\n  function observeDocumentPairAvailability(\n    id: string\n  ): Observable<DraftsModelDocumentAvailability> {\n    const draftId = getDraftId(id)\n    const publishedId = getPublishedId(id)\n    return combineLatest([\n      observeDocumentAvailability(draftId),\n      observeDocumentAvailability(publishedId),\n    ]).pipe(\n      distinctUntilChanged(shallowEquals),\n      map(([draftReadability, publishedReadability]) => {\n        return {\n          draft: draftReadability,\n          published: publishedReadability,\n        }\n      })\n    )\n  }\n\n  /**\n   * Observable of metadata for the document with the given id\n   * If we can't read a document it is either because it's not readable or because it doesn't exist\n   *\n   * @internal\n   */\n  function observeDocumentAvailability(id: string): Observable<DocumentAvailability> {\n    // check for existence\n    return observePaths({_ref: id}, [['_rev']]).pipe(\n      map((res) => isRecord(res) && Boolean('_rev' in res && res?._rev)),\n      distinctUntilChanged(),\n      switchMap((hasRev) => {\n        return hasRev\n          ? // short circuit: if we can read the _rev field we know it both exists and is readable\n            of(AVAILABILITY_READABLE)\n          : // we can't read the _rev field for two possible reasons: 1) the document isn't readable or 2) the document doesn't exist\n            fetchDocumentReadability(id)\n      })\n    )\n  }\n\n  const fetchDocumentReadability = debounceCollect(function fetchDocumentReadability(\n    args: string[][]\n  ): Observable<DocumentAvailability[]> {\n    const uniqueIds = [...new Set(flatten(args))]\n    return from(chunkDocumentIds(uniqueIds)).pipe(\n      mergeMap(fetchDocumentReadabilityChunked, 10),\n      map((res) => args.map(([id]) => res[uniqueIds.indexOf(id)]))\n    )\n  },\n  1)\n\n  function fetchDocumentReadabilityChunked(ids: string[]): Observable<DocumentAvailability[]> {\n    return defer(() => {\n      const requestOptions = {\n        uri: versionedClient.getDataUrl('doc', ids.join(',')),\n        json: true,\n        query: {excludeContent: 'true'},\n        tag: 'preview.documents-availability',\n      }\n      return versionedClient.observable.request<AvailabilityResponse>(requestOptions).pipe(\n        map((response) => {\n          const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n          return ids.map((id) => {\n            const omittedEntry = omitted[id]\n            if (!omittedEntry) {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_READABLE\n            }\n            if (omittedEntry.reason === 'existence') {\n              return AVAILABILITY_NOT_FOUND\n            }\n            if (omittedEntry.reason === 'permission') {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_PERMISSION_DENIED\n            }\n            throw new Error(`Unexpected reason for omission: \"${omittedEntry.reason}\"`)\n          })\n        })\n      )\n    })\n  }\n\n  return {observeDocumentPairAvailability}\n}\n","import {Observable, of as observableOf, from as observableFrom, isObservable} from 'rxjs'\nimport {map, mergeAll, combineAll, switchMap, scan} from 'rxjs/operators'\nimport {keysOf} from './keysOf'\n\nfunction setKey(source: Record<string, unknown>, key: any, value: unknown) {\n  return {\n    ...source,\n    [key]: value,\n  }\n}\n\ntype Props<K extends keyof any, T> = {\n  [P in K]: T | Observable<T>\n}\n\nexport function props<K extends keyof any, T>(options: {wait?: boolean} = {}) {\n  return (source: Observable<Props<K, T>>) => {\n    return new Observable<Props<K, T>>((observer) => source.subscribe(observer)).pipe(\n      switchMap((object) => {\n        const keyObservables = keysOf(object).map((key) => {\n          const value = object[key]\n          return isObservable(value)\n            ? observableFrom(value).pipe(map((val) => [key, val]))\n            : observableOf([key, value])\n        })\n\n        return options.wait\n          ? observableFrom(keyObservables).pipe(\n              combineAll(),\n              map((pairs) => pairs.reduce((acc, [key, value]) => setKey(acc, key, value), {}))\n            )\n          : observableFrom(keyObservables).pipe(\n              mergeAll(),\n              scan((acc, [key, value]) => setKey(acc, key, value), {})\n            )\n      })\n    )\n  }\n}\n","import {uniq} from 'lodash'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {isRecord} from '../util'\nimport {ApiConfig, FieldName, PreviewPath, Previewable} from './types'\nimport {props} from './utils/props'\n\nfunction createEmpty(fields: FieldName[]) {\n  return fields.reduce((result: Record<string, undefined>, field) => {\n    result[field] = undefined\n    return result\n  }, {})\n}\n\nfunction resolveMissingHeads(value: Record<string, unknown>, paths: string[][]) {\n  return paths.filter((path) => !(path[0] in value))\n}\n\nfunction isReferenceLike(value: Previewable): value is {_ref: string} {\n  return '_ref' in value\n}\n\ntype ObserveFieldsFn = (\n  id: string,\n  fields: FieldName[],\n  apiConfig?: ApiConfig\n) => Observable<Record<string, unknown> | null>\n\nfunction observePaths(\n  value: Previewable,\n  paths: PreviewPath[],\n  observeFields: ObserveFieldsFn,\n  apiConfig?: ApiConfig\n): Observable<Record<string, unknown> | null> {\n  if (!value || typeof value !== 'object') {\n    // Reached a leaf. Return as is\n    return observableOf(value as null) // @todo\n  }\n\n  const id: string | undefined = isReferenceLike(value) ? value._ref : value._id\n\n  const currentValue: Record<string, unknown> = {...value, _id: id}\n\n  if (currentValue._type === 'reference') {\n    delete currentValue._type\n    delete currentValue._ref\n    delete currentValue._weak\n    delete currentValue._dataset\n    delete currentValue._projectId\n    delete currentValue._strengthenOnPublish\n  }\n\n  const pathsWithMissingHeads = resolveMissingHeads(currentValue, paths)\n\n  if (id && pathsWithMissingHeads.length > 0) {\n    // Reached a node that is either a document (with _id), or a reference (with _ref) that\n    // needs to be \"materialized\"\n\n    const nextHeads: string[] = uniq(pathsWithMissingHeads.map((path: string[]) => path[0]))\n\n    const dataset = isReferenceLike(value) ? value._dataset : undefined\n    const projectId = isReferenceLike(value) ? value._projectId : undefined\n\n    const refApiConfig =\n      // if it's a cross dataset reference we want to use it's `_projectId` + `_dataset`\n      // attributes as api config\n      dataset && projectId ? {projectId: projectId, dataset: dataset} : apiConfig\n\n    return observeFields(id, nextHeads, refApiConfig).pipe(\n      switchMap((snapshot) => {\n        if (snapshot === null) {\n          return observableOf(null)\n        }\n\n        return observePaths(\n          {\n            ...createEmpty(nextHeads),\n            ...(isReferenceLike(value) ? {...value, ...refApiConfig} : value),\n            ...snapshot,\n          } as Previewable,\n          paths,\n          observeFields,\n          refApiConfig\n        )\n      })\n    )\n  }\n\n  // We have all the fields needed already present on value\n  const leads: Record<string, string[][]> = {}\n  paths.forEach((path) => {\n    const [head, ...tail] = path\n    if (!leads[head]) {\n      leads[head] = []\n    }\n    leads[head].push(tail)\n  })\n\n  const next = Object.keys(leads).reduce((res: Record<string, unknown>, head) => {\n    const tails = leads[head].filter((tail) => tail.length > 0)\n    if (tails.length === 0) {\n      res[head] = isRecord(value) ? (value as Record<string, unknown>)[head] : undefined\n    } else {\n      res[head] = observePaths((value as any)[head], tails, observeFields, apiConfig)\n    }\n    return res\n  }, currentValue)\n\n  return observableOf(next).pipe(props({wait: true}))\n}\n\n// Normalizes path arguments so it supports both dot-paths and array paths, e.g.\n// - ['propA.propB', 'propA.propC']\n// - [['propA', 'propB'], ['propA', 'propC']]\nfunction normalizePaths(path: (FieldName | PreviewPath)[]): PreviewPath[] {\n  return path.map((segment: FieldName | PreviewPath) =>\n    typeof segment === 'string' ? segment.split('.') : segment\n  )\n}\n\nexport function createPathObserver(context: {observeFields: ObserveFieldsFn}) {\n  const {observeFields} = context\n\n  return {\n    observePaths(\n      value: Previewable,\n      paths: (FieldName | PreviewPath)[],\n      apiConfig?: ApiConfig\n    ): Observable<Record<string, unknown> | null> {\n      return observePaths(value, normalizePaths(paths), observeFields, apiConfig)\n    },\n  }\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {\n  isCrossDatasetReference,\n  isCrossDatasetReferenceSchemaType,\n  isReferenceSchemaType,\n  PrepareViewOptions,\n} from '@sanity/types'\nimport {isPlainObject} from 'lodash'\nimport {invokePrepare, prepareForPreview} from './utils/prepareForPreview'\nimport type {ApiConfig, PreviewPath, PreparedSnapshot} from './types'\nimport {getPreviewPaths} from './utils/getPreviewPaths'\nimport {Previewable, PreviewableType} from './types'\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n\nfunction isReference(value: unknown): value is {_ref: string} {\n  return isPlainObject(value)\n}\n\n// Takes a value and its type and prepares a snapshot for it that can be passed to a preview component\nexport function createPreviewObserver(context: {\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n  observePaths: (value: Previewable, paths: PreviewPath[], apiConfig?: ApiConfig) => any\n}): (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot> {\n  const {observeDocumentTypeFromId, observePaths} = context\n\n  return function observeForPreview(\n    value: Previewable,\n    type: PreviewableType,\n    viewOptions?: PrepareViewOptions,\n    apiConfig?: ApiConfig\n  ): Observable<PreparedSnapshot> {\n    if (isCrossDatasetReferenceSchemaType(type)) {\n      // if the value is of type crossDatasetReference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isCrossDatasetReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n\n      const refApiConfig = {projectId: value._projectId, dataset: value._dataset}\n\n      return observeDocumentTypeFromId(value._ref, refApiConfig).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.type === typeName)\n            return observeForPreview(value, refType as any, {}, refApiConfig)\n          }\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    if (isReferenceSchemaType(type)) {\n      // if the value is of type reference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n      // Previewing references actually means getting the referenced value,\n      // and preview using the preview config of its type\n      // todo: We need a way of knowing the type of the referenced value by looking at the reference record alone\n      return observeDocumentTypeFromId(value._ref).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.name === typeName)\n            return observeForPreview(value, refType as any)\n          }\n          // todo: in case we can't read the document type, we can figure out the reason why e.g. whether it's because\n          //  the document doesn't exist or it's not readable due to lack of permission.\n          //  We can use the \"observeDocumentAvailability\" function\n          //  for this, but currently not sure if needed\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    const paths = getPreviewPaths(type.preview)\n    if (paths) {\n      return observePaths(value, paths, apiConfig).pipe(\n        map((snapshot) => ({\n          type: type,\n          snapshot: snapshot && prepareForPreview(snapshot, type as any, viewOptions),\n        }))\n      )\n    }\n\n    // Note: this case is typically rare (or non-existent) and occurs only if\n    // the SchemaType doesn't have a `select` field. The schema compiler\n    // provides a default `preview` implementation for `object`s, `image`s,\n    // `file`s, and `document`s\n    return observableOf({\n      type,\n      snapshot:\n        value && isRecord(value) ? invokePrepare(type, value, viewOptions).returnValue : null,\n    })\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {getIdPair, isRecord} from '../util'\nimport {DraftsModelDocument, ObservePathsFn, PreviewPath, Previewable} from './types'\nimport {create_preview_availability} from './availability'\n\nexport function create_preview_documentPair(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    value: Previewable,\n    paths: PreviewPath[]\n  ) => Observable<DraftsModelDocument<T>>\n} {\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n\n  const ALWAYS_INCLUDED_SNAPSHOT_PATHS: PreviewPath[] = [['_updatedAt'], ['_createdAt'], ['_type']]\n\n  return {observePathsDocumentPair}\n\n  function observePathsDocumentPair<T extends SanityDocument = SanityDocument>(\n    value: Previewable,\n    paths: PreviewPath[]\n  ): Observable<DraftsModelDocument<T>> {\n    const {draftId, publishedId} = getIdPair('_id' in value ? value._id : value._ref)\n\n    return observeDocumentPairAvailability(draftId).pipe(\n      switchMap((availability) => {\n        if (!availability.draft.available && !availability.published.available) {\n          // short circuit, neither draft nor published is available so no point in trying to get a snapshot\n          return of({\n            id: publishedId,\n            type: null,\n            draft: {\n              availability: availability.draft,\n              snapshot: undefined,\n            },\n            published: {\n              availability: availability.published,\n              snapshot: undefined,\n            },\n          })\n        }\n\n        const snapshotPaths = [...paths, ...ALWAYS_INCLUDED_SNAPSHOT_PATHS]\n\n        return combineLatest([\n          observePaths({_type: 'reference', _ref: draftId}, snapshotPaths),\n          observePaths({_type: 'reference', _ref: publishedId}, snapshotPaths),\n        ]).pipe(\n          map(([draftSnapshot, publishedSnapshot]) => {\n            // note: assume type is always the same\n            const type =\n              (isRecord(draftSnapshot) && '_type' in draftSnapshot && draftSnapshot._type) ||\n              (isRecord(publishedSnapshot) &&\n                '_type' in publishedSnapshot &&\n                publishedSnapshot._type) ||\n              null\n\n            return {\n              id: publishedId,\n              type: typeof type === 'string' ? type : null,\n              draft: {\n                availability: availability.draft,\n                snapshot: draftSnapshot as T,\n              },\n              published: {\n                availability: availability.published,\n                snapshot: publishedSnapshot as T,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n","import {identity, sortBy, values} from 'lodash'\nimport {FieldName, Id, Selection} from '../types'\nimport {INCLUDE_FIELDS_QUERY} from '../constants'\nimport {escapeField, fieldNeedsEscape} from '../../util'\n\ntype CombinedSelection = {\n  ids: Id[]\n  fields: FieldName[]\n  map: number[]\n}\n\ntype Doc = {\n  _id: string\n}\n\ntype Result = Doc[]\n\nexport function combineSelections(selections: Selection[]): CombinedSelection[] {\n  return values(\n    selections.reduce((output: {[key: string]: any}, [id, fields], index) => {\n      const key = sortBy(fields.join(','), identity).join('.')\n      if (!output[key]) {\n        output[key] = {fields: fields, ids: [], map: []}\n      }\n      const idx = output[key].ids.length\n      output[key].ids[idx] = id\n      output[key].map[idx] = index\n      return output\n    }, {})\n  )\n}\n\nfunction stringifyId(id: string) {\n  return JSON.stringify(id)\n}\n\nconst maybeEscape = (fieldName: string) =>\n  fieldNeedsEscape(fieldName) ? `\"${fieldName}\": @${escapeField(fieldName)}` : fieldName\n\nfunction toSubQuery({ids, fields}: {ids: string[]; fields: string[]}) {\n  const allFields = [...INCLUDE_FIELDS_QUERY, ...fields]\n  return `*[_id in [${ids.map(stringifyId).join(',')}]][0...${ids.length}]{${allFields\n    .map(maybeEscape)\n    .join(',')}}`\n}\n\nexport function toQuery(combinedSelections: CombinedSelection[]): string {\n  return `[${combinedSelections.map(toSubQuery).join(',')}][0...${combinedSelections.length}]`\n}\n\nexport function reassemble(\n  queryResult: Result[],\n  combinedSelections: CombinedSelection[]\n): (Doc | null)[] {\n  return queryResult.reduce((reprojected: (Doc | null)[], subResult, index) => {\n    const map = combinedSelections[index].map\n    map.forEach((resultIdx, i) => {\n      const id = combinedSelections[index].ids[i]\n      const found = subResult.find((doc) => doc._id === id)\n      reprojected[resultIdx] = found || null\n    })\n    return reprojected\n  }, [])\n}\n","export function hasEqualFields(fields: string[]) {\n  return (object: Record<string, any> | null, otherObject: Record<string, any> | null) => {\n    if (object === otherObject) {\n      return true\n    }\n    if (!object || !otherObject) {\n      return false\n    }\n    if (typeof object !== 'object' || typeof otherObject !== 'object') {\n      return false\n    }\n    return fields.every((field) => object[field] === otherObject[field])\n  }\n}\n","const id = <T>(value: T): T => value\n\ntype ItemSelector<T> = (element: T) => any\n\n// Takes an array and checks if each item is unique,\n// optionally by specifying an itemSelector function that will be called with\n// each item, returning the value to compare for uniqueness\nexport function isUniqueBy<T>(array: Array<T>, itemSelector: ItemSelector<T> = id): boolean {\n  let prevItem\n  let currItem\n  for (let i = 0; i < array.length; i++) {\n    if (i === 0) {\n      prevItem = itemSelector(array[i])\n      continue\n    }\n    currItem = itemSelector(array[i])\n    if (prevItem !== currItem) {\n      return false\n    }\n    prevItem = currItem\n  }\n  return true\n}\n","import {\n  combineLatest,\n  concat,\n  defer,\n  EMPTY,\n  from,\n  fromEvent,\n  merge,\n  Observable,\n  of as observableOf,\n  timer,\n} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  publishReplay,\n  refCount,\n  share,\n  startWith,\n  switchMap,\n  tap,\n} from 'rxjs/operators'\nimport {difference, flatten, memoize} from 'lodash'\nimport {SanityClient} from '@sanity/client'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {combineSelections, reassemble, toQuery} from './utils/optimizeQuery'\nimport {ApiConfig, FieldName, Id, ObservePathsFn, PreviewPath, Selection} from './types'\nimport {INCLUDE_FIELDS} from './constants'\nimport {hasEqualFields} from './utils/hasEqualFields'\nimport {isUniqueBy} from './utils/isUniqueBy'\n\ntype CachedFieldObserver = {\n  id: Id\n  fields: FieldName[]\n  changes$: Observable<any>\n}\n\ntype Cache = {\n  [id: string]: CachedFieldObserver[]\n}\n\nexport function create_preview_observeFields(context: {\n  observePaths: ObservePathsFn\n  versionedClient: SanityClient\n}) {\n  const {observePaths, versionedClient} = context\n\n  let _globalListener: any\n\n  const getGlobalEvents = () => {\n    if (!_globalListener) {\n      const allEvents$ = from(\n        versionedClient.listen(\n          '*[!(_id in path(\"_.**\"))]',\n          {},\n          {\n            events: ['welcome', 'mutation'],\n            includeResult: false,\n            visibility: 'query',\n            tag: 'preview.global',\n          }\n        )\n      ).pipe(share())\n\n      // This is a stream of welcome events from the server, each telling us that we have established listener connection\n      // We map these to snapshot fetch/sync. It is good to wait for the first welcome event before fetching any snapshots as, we may miss\n      // events that happens in the time period after initial fetch and before the listener is established.\n      const welcome$ = allEvents$.pipe(\n        filter((event: any) => event.type === 'welcome'),\n        publishReplay(1),\n        refCount()\n      )\n\n      // This will keep the listener active forever and in turn reduce the number of initial fetches\n      // as less 'welcome' events will be emitted.\n      // @todo: see if we can delay unsubscribing or connect with some globally defined shared listener\n      welcome$.subscribe()\n\n      const mutations$ = allEvents$.pipe(filter((event: any) => event.type === 'mutation'))\n\n      _globalListener = {\n        welcome$,\n        mutations$,\n      }\n    }\n\n    return _globalListener\n  }\n\n  function listen(id: Id) {\n    const globalEvents = getGlobalEvents()\n    return merge(\n      globalEvents.welcome$,\n      globalEvents.mutations$.pipe(filter((event: any) => event.documentId === id))\n    )\n  }\n\n  function fetchAllDocumentPathsWith(client: SanityClient) {\n    return function fetchAllDocumentPath(selections: Selection[]) {\n      const combinedSelections = combineSelections(selections)\n      return client.observable\n        .fetch(toQuery(combinedSelections), {}, {tag: 'preview.document-paths'} as any)\n        .pipe(map((result: any) => reassemble(result, combinedSelections)))\n    }\n  }\n\n  const fetchDocumentPathsFast = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 100)\n  const fetchDocumentPathsSlow = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 1000)\n\n  function currentDatasetListenFields(id: Id, fields: PreviewPath[]) {\n    return listen(id).pipe(\n      switchMap((event: any) => {\n        if (event.type === 'welcome' || event.visibility === 'query') {\n          return fetchDocumentPathsFast(id, fields as any).pipe(\n            mergeMap((result) => {\n              return concat(\n                observableOf(result),\n                result === undefined // hack: if we get undefined as result here it can be because the document has\n                  ? // just been created and is not yet indexed. We therefore need to wait a bit\n                    // and then re-fetch.\n                    fetchDocumentPathsSlow(id, fields as any)\n                  : []\n              )\n            })\n          )\n        }\n        return fetchDocumentPathsSlow(id, fields as any)\n      })\n    )\n  }\n\n  // keep for debugging purposes for now\n  // function fetchDocumentPaths(id, selection) {\n  //   return client.observable.fetch(`*[_id==$id]{_id,_type,${selection.join(',')}}`, {id})\n  //     .map(result => result[0])\n  // }\n\n  const CACHE: Cache = {} // todo: use a LRU cache instead (e.g. hashlru or quick-lru)\n\n  const getBatchFetcherForDataset = memoize(\n    function getBatchFetcherForDataset(apiConfig: ApiConfig) {\n      const client = versionedClient.withConfig(apiConfig)\n      const fetchAll = fetchAllDocumentPathsWith(client)\n      return debounceCollect(fetchAll, 10)\n    },\n    (apiConfig) => apiConfig.dataset + apiConfig.projectId\n  )\n\n  const CROSS_DATASET_PREVIEW_POLL_INTERVAL = 10000\n  // We want to poll for changes in the other dataset, but only when window/tab is visible\n  // This sets up a shared stream that emits an event every `POLL_INTERVAL` milliseconds as long as the\n  // document is visible. It starts emitting immediately (if the page is visible)\n  const visiblePoll$ = fromEvent(document, 'visibilitychange').pipe(\n    startWith(0),\n    map(() => document.visibilityState === 'visible'),\n    switchMap((visible) => (visible ? timer(0, CROSS_DATASET_PREVIEW_POLL_INTERVAL) : EMPTY)),\n    share()\n  )\n\n  function crossDatasetListenFields(id: Id, fields: PreviewPath[], apiConfig: ApiConfig) {\n    return visiblePoll$.pipe(startWith(0)).pipe(\n      switchMap(() => {\n        const batchFetcher = getBatchFetcherForDataset(apiConfig)\n        return batchFetcher(id, fields as any)\n      })\n    )\n  }\n\n  function createCachedFieldObserver<T>(\n    id: any,\n    fields: any,\n    apiConfig: ApiConfig\n  ): CachedFieldObserver {\n    let latest: T | null = null\n    const changes$ = merge<T | null>(\n      defer(() => (latest === null ? EMPTY : observableOf(latest))),\n      (apiConfig\n        ? (crossDatasetListenFields(id, fields, apiConfig) as any)\n        : currentDatasetListenFields(id, fields)) as Observable<T>\n    ).pipe(\n      tap((v: T | null) => (latest = v)),\n      publishReplay(1),\n      refCount()\n    )\n\n    return {id, fields, changes$}\n  }\n\n  function cachedObserveFields(id: Id, fields: FieldName[], apiConfig?: ApiConfig) {\n    const cacheKey = apiConfig\n      ? `${apiConfig.projectId}:${apiConfig.dataset}:${id}`\n      : `$current$-${id}`\n\n    if (!(cacheKey in CACHE)) {\n      CACHE[cacheKey] = []\n    }\n\n    const existingObservers = CACHE[cacheKey]\n    const missingFields = difference(\n      fields,\n      flatten(existingObservers.map((cachedFieldObserver) => cachedFieldObserver.fields))\n    )\n\n    if (missingFields.length > 0) {\n      existingObservers.push(createCachedFieldObserver(id, fields, apiConfig as any))\n    }\n\n    const cachedFieldObservers = existingObservers\n      .filter((observer) => observer.fields.some((fieldName) => fields.includes(fieldName)))\n      .map((cached) => cached.changes$)\n\n    return combineLatest(cachedFieldObservers).pipe(\n      // in the event that a document gets deleted, the cached values will be updated to store `undefined`\n      // if this happens, we should not pick any fields from it, but rather just return null\n      map((snapshots) => snapshots.filter(Boolean)), // make sure all snapshots agree on same revision\n      filter((snapshots) => isUniqueBy(snapshots, (snapshot) => snapshot._rev)), // pass on value with the requested fields (or null if value is deleted)\n      map((snapshots) => (snapshots.length === 0 ? null : pickFrom(snapshots, fields))), // emit values only if changed\n      distinctUntilChanged(hasEqualFields(fields))\n    )\n  }\n\n  // API\n  return {observeFields: cachedObserveFields}\n\n  function pickFrom(objects: Record<string, any>[], fields: string[]) {\n    return [...INCLUDE_FIELDS, ...fields].reduce((result, fieldName) => {\n      const value = getFirstFieldValue(objects, fieldName)\n      if (value !== undefined) {\n        ;(result as any)[fieldName] = value\n      }\n      return result\n    }, {})\n  }\n\n  function getFirstFieldValue(objects: Record<string, any>[], fieldName: string) {\n    let value\n    objects.some((object) => {\n      if (fieldName in object) {\n        value = object[fieldName]\n        return true\n      }\n      return false\n    })\n    return value\n  }\n}\n","import {Observable} from 'rxjs'\nimport {distinctUntilChanged, map, tap} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {PrepareViewOptions, SanityDocument} from '@sanity/types'\nimport {isRecord} from '../util'\nimport {create_preview_availability} from './availability'\nimport {createPathObserver} from './createPathObserver'\nimport {createPreviewObserver} from './createPreviewObserver'\nimport {create_preview_documentPair} from './documentPair'\nimport {create_preview_observeFields} from './observeFields'\nimport {\n  ApiConfig,\n  DraftsModelDocument,\n  DraftsModelDocumentAvailability,\n  ObservePathsFn,\n  PreviewPath,\n  PreparedSnapshot,\n  Previewable,\n  PreviewableType,\n} from './types'\n\n/** @beta */\nexport type ObserveForPreviewFn = (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot>\n\n/** @beta */\nexport interface DocumentPreviewStore {\n  observePaths: ObservePathsFn\n  observeForPreview: ObserveForPreviewFn\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n\n  /**\n   * @beta\n   */\n  unstable_observeDocumentPairAvailability: (\n    id: string\n  ) => Observable<DraftsModelDocumentAvailability>\n\n  unstable_observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    id: Previewable,\n    paths: PreviewPath[]\n  ) => Observable<DraftsModelDocument<T>>\n}\n\n/** @internal */\nexport interface DocumentPreviewStoreOptions {\n  client: SanityClient\n}\n\n/** @internal */\nexport function createDocumentPreviewStore({\n  client,\n}: DocumentPreviewStoreOptions): DocumentPreviewStore {\n  const versionedClient = client.withConfig({apiVersion: '1'})\n\n  // NOTE: this is workaroudn for circumventing a circular dependency between `observePaths` and\n  // `observeFields`.\n  // eslint-disable-next-line camelcase\n  const __proxy_observePaths: ObservePathsFn = (value, paths, apiConfig) => {\n    return observePaths(value, paths, apiConfig)\n  }\n\n  const {observeFields} = create_preview_observeFields({\n    observePaths: __proxy_observePaths,\n    versionedClient,\n  })\n\n  const {observePaths} = createPathObserver({observeFields})\n\n  function observeDocumentTypeFromId(\n    id: string,\n    apiConfig?: ApiConfig\n  ): Observable<string | undefined> {\n    return observePaths({_type: 'reference', _ref: id}, ['_type'], apiConfig).pipe(\n      map((res) => (isRecord(res) && typeof res._type === 'string' ? res._type : undefined)),\n      distinctUntilChanged()\n    )\n  }\n\n  // const {createPreviewObserver} = create_preview_createPreviewObserver(observeDocumentTypeFromId)\n  const observeForPreview = createPreviewObserver({observeDocumentTypeFromId, observePaths})\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n  const {observePathsDocumentPair} = create_preview_documentPair(versionedClient, observePaths)\n\n  // @todo: explain why the API is like this now, and that it should not be like this in the future!\n  return {\n    observePaths,\n    observeForPreview,\n    observeDocumentTypeFromId,\n\n    // eslint-disable-next-line camelcase\n    unstable_observeDocumentPairAvailability: observeDocumentPairAvailability,\n    unstable_observePathsDocumentPair: observePathsDocumentPair,\n  }\n}\n","import React, {useCallback} from 'react'\nimport {Card, Text, Flex} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {useSchema} from '../../../hooks'\nimport {SanityPreview} from '../../../preview'\nimport {IntentLink} from 'sanity/router'\n\nexport const DocumentList = ({\n  asset,\n  assetType,\n  referringDocuments,\n}: {\n  asset: AssetType\n  assetType: 'image' | 'file'\n  referringDocuments: SanityDocument[]\n}) => {\n  const count = referringDocuments.length\n  const hasResults = count > 0\n  const filenamePlaceholder = asset.originalFilename ? (\n    <strong>{asset.originalFilename}</strong>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (!hasResults) {\n    return (\n      <Text size={[1, 1, 2, 2]} as=\"h2\" weight=\"regular\">\n        No documents are using {filenamePlaceholder}\n      </Text>\n    )\n  }\n\n  return (\n    <>\n      <Card borderBottom marginTop={2} paddingBottom={2} marginBottom={1}>\n        <Text as=\"h2\" size={[1, 1, 2, 2]} weight=\"regular\" textOverflow=\"ellipsis\">\n          {count} {count === 1 ? `document is` : `documents are`} using {filenamePlaceholder}\n        </Text>\n      </Card>\n      {referringDocuments.map((document: SanityDocument) => (\n        <DocumentLink key={document._id} document={document} />\n      ))}\n    </>\n  )\n}\n\nconst DocumentLink = ({document}: {document: SanityDocument}) => {\n  const schema = useSchema()\n\n  const LinkComponent = useCallback(\n    (linkProps: Omit<React.HTMLProps<HTMLAnchorElement>, 'ref'>) => (\n      <IntentLink {...linkProps} params={{id: document._id, type: document._type}} intent=\"edit\" />\n    ),\n\n    [document]\n  )\n\n  return (\n    <Card\n      as={LinkComponent}\n      paddingY={2}\n      paddingX={1}\n      radius={2}\n      key={document._id}\n      data-as=\"a\"\n      tabIndex={0}\n    >\n      <Flex align=\"center\" gap={2}>\n        <SanityPreview\n          layout=\"default\"\n          value={{_type: 'reference', _ref: document._id}}\n          schemaType={schema.get(document._type)!}\n        />\n      </Flex>\n    </Card>\n  )\n}\n","import React, {CSSProperties} from 'react'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Text, Grid, Flex} from '@sanity/ui'\nimport {UsageDialogProps} from './AssetUsageDialog'\n\ntype ConfirmMessageProps = Omit<UsageDialogProps, 'onClose' | 'onDelete'> & {\n  hasResults?: boolean\n}\n\nconst STYLE_ASSET_IMAGE: CSSProperties = {\n  maxWidth: '100%',\n  height: '120px',\n  objectFit: 'contain',\n  objectPosition: 'center',\n}\nconst STYLE_CONFIRM_CARD: CSSProperties = {\n  gridColumn: 'span 1',\n  overflow: 'hidden',\n  display: 'flex',\n  alignSelf: 'center',\n  justifyContent: 'center',\n}\nconst STYLE_IMAGE_WRAPPER: CSSProperties = {height: '100%'}\n\nexport const ConfirmMessage = ({asset, assetType, hasResults = false}: ConfirmMessageProps) => {\n  const isImage = assetType === 'image'\n  const filenamePlaceholder = asset.originalFilename ? (\n    <>\n      The {assetType} <strong>{asset.originalFilename}</strong>\n    </>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (hasResults) {\n    return (\n      <Card tone=\"caution\" padding={[3, 3, 4]} border radius={2} marginBottom={3}>\n        <Grid columns={3} gap={[2, 3, 4]}>\n          <Flex gap={[3, 4]} align=\"center\" style={{gridColumn: isImage ? 'span 2' : 'span 3'}}>\n            <Text>\n              <WarningOutlineIcon />\n            </Text>\n            <Text size={1}>\n              {filenamePlaceholder} cannot be deleted because it's being used. In order to delete\n              the {assetType} you need the remove all uses of it.\n            </Text>\n          </Flex>\n          {isImage && (\n            <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n              <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n                <img\n                  src={`${asset.url}?w=200`}\n                  style={STYLE_ASSET_IMAGE}\n                  alt=\"Preview of image\"\n                  referrerPolicy=\"strict-origin-when-cross-origin\"\n                />\n              </Flex>\n            </Card>\n          )}\n        </Grid>\n      </Card>\n    )\n  }\n\n  return (\n    <Card paddingX={[2, 3, 4]} paddingY={[3, 3, 3, 4]}>\n      <Grid columns={3} gap={3}>\n        <Flex style={{gridColumn: isImage ? 'span 2' : 'span 3'}} align=\"center\">\n          <Text>\n            You are about to delete the {assetType}\n            {asset.originalFilename && (\n              <>\n                {' '}\n                <strong>{asset.originalFilename}</strong>\n              </>\n            )}{' '}\n            and its metadata.\n            <br />\n            <br />\n            Are you sure?\n          </Text>\n        </Flex>\n        {isImage && (\n          <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n            <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n              <img\n                src={`${asset.url}?w=200`}\n                style={STYLE_ASSET_IMAGE}\n                alt=\"Preview of image\"\n                referrerPolicy=\"strict-origin-when-cross-origin\"\n              />\n            </Flex>\n          </Card>\n        )}\n      </Grid>\n    </Card>\n  )\n}\n","import React, {useEffect, useState} from 'react'\nimport {TrashIcon} from '@sanity/icons'\nimport {Box, Dialog, Grid, Button, Stack} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {useDocumentStore} from '../../../store'\nimport {WithReferringDocuments} from '../../../components'\nimport {SpinnerWithText} from '../../components/SpinnerWithText'\nimport {DocumentList} from './DocumentList'\nimport {ConfirmMessage} from './ConfirmMessage'\n\nexport interface UsageDialogProps {\n  assetType?: 'file' | 'image'\n  mode?: 'listUsage' | 'confirmDelete'\n  asset: AssetType\n  isDeleting?: boolean\n  assetIsLoading?: boolean\n  referringDocuments?: SanityDocument[]\n  onClose: () => void\n  onDelete: () => void\n}\n\nconst MODE_CONFIRM_DELETE = 'confirmDelete'\nconst MODE_LIST_USAGE = 'listUsage'\n\nexport function AssetUsageDialog(props: UsageDialogProps) {\n  const documentStore = useDocumentStore()\n\n  return (\n    <WithReferringDocuments documentStore={documentStore} id={props.asset._id}>\n      {({isLoading, referringDocuments}) => (\n        <InnerAssetUsageDialog\n          {...props}\n          assetIsLoading={isLoading}\n          referringDocuments={referringDocuments}\n        />\n      )}\n    </WithReferringDocuments>\n  )\n}\n\nconst InnerAssetUsageDialog = ({\n  asset,\n  assetType = 'image',\n  mode = MODE_LIST_USAGE,\n  isDeleting = false,\n  assetIsLoading = false,\n  referringDocuments = [],\n  onClose,\n  onDelete,\n}: UsageDialogProps) => {\n  const isListMode = mode === MODE_LIST_USAGE\n  const defaultHeaderTitle = isListMode ? `Documents using ${assetType}` : `Delete ${assetType}`\n  const [canDelete, setCanDelete] = useState(false)\n  const [isLoadingParent, setIsLoadingParent] = useState(true)\n  const [publishedDocuments, setPublishedDocuments] = useState<SanityDocument[]>([])\n  const showActionFooter = mode === MODE_CONFIRM_DELETE\n  const hasResults = publishedDocuments.length > 0\n  const showDocumentList = mode === MODE_LIST_USAGE || hasResults\n  const noPaddingOnStack = mode === MODE_CONFIRM_DELETE && !hasResults\n  const footer = showActionFooter ? (\n    <Grid padding={2} gap={2} columns={2}>\n      <Button mode=\"bleed\" text=\"Cancel\" onClick={onClose} />\n      <Button\n        text=\"Delete\"\n        tone=\"critical\"\n        icon={TrashIcon}\n        onClick={onDelete}\n        loading={isDeleting}\n        disabled={!canDelete}\n      />\n    </Grid>\n  ) : undefined\n  useEffect(() => {\n    const drafts = referringDocuments.reduce<string[]>(\n      (acc, doc) => (doc._id.startsWith('drafts.') ? acc.concat(doc._id.slice(7)) : acc),\n      []\n    )\n\n    const documentsWithoutDrafts = referringDocuments.filter((doc) => !drafts.includes(doc._id))\n\n    setPublishedDocuments(documentsWithoutDrafts)\n    setCanDelete(documentsWithoutDrafts.length === 0 && !assetIsLoading)\n    setIsLoadingParent(assetIsLoading)\n  }, [assetIsLoading, referringDocuments])\n\n  return (\n    <Dialog\n      id=\"asset-dialog\"\n      header={defaultHeaderTitle}\n      width={1}\n      onClose={onClose}\n      footer={footer}\n      __unstable_autoFocus={!isLoadingParent}\n    >\n      {isLoadingParent && (\n        <Box padding={4}>\n          <SpinnerWithText text=\"Loading...\" />\n        </Box>\n      )}\n\n      {!isLoadingParent && (\n        <Stack\n          paddingX={noPaddingOnStack ? 0 : [2, 3, 4]}\n          paddingY={noPaddingOnStack ? 0 : [3, 3, 3, 4]}\n          space={1}\n        >\n          {mode === MODE_CONFIRM_DELETE && (\n            <ConfirmMessage asset={asset} assetType={assetType} hasResults={hasResults} />\n          )}\n\n          {showDocumentList && (\n            <DocumentList\n              asset={asset}\n              referringDocuments={publishedDocuments}\n              assetType={assetType}\n            />\n          )}\n        </Stack>\n      )}\n    </Dialog>\n  )\n}\n","import React from 'react'\nimport {LinkIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Button, Menu, MenuItem, MenuButton} from '@sanity/ui'\nimport {AssetMenuAction} from './types'\n\nexport function AssetMenu({\n  isSelected,\n  border = true,\n  onAction,\n}: {\n  isSelected: boolean\n  border?: boolean\n  onAction: (action: AssetMenuAction) => void\n}) {\n  const triggerButtonMode = isSelected ? 'default' : 'bleed'\n  const triggerButtonTone = isSelected ? 'primary' : 'default'\n\n  return (\n    <MenuButton\n      button={\n        <Button\n          padding={2}\n          mode={border ? 'ghost' : triggerButtonMode}\n          icon={EllipsisVerticalIcon}\n          tone={border ? 'default' : triggerButtonTone}\n        />\n      }\n      id=\"asset-menu\"\n      portal\n      menu={\n        <Menu>\n          <MenuItem\n            text=\"Show uses\"\n            icon={LinkIcon}\n            onClick={() => {\n              onAction({type: 'showUsage'})\n            }}\n          />\n          <MenuItem\n            text=\"Delete\"\n            icon={TrashIcon}\n            tone=\"critical\"\n            onClick={() => {\n              onAction({type: 'delete'})\n            }}\n          />\n        </Menu>\n      }\n      placement=\"right\"\n    />\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useEffect, useRef, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {Button, Card, useToast} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {FullscreenSpinner} from '../../components/FullscreenSpinner'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\n\ninterface AssetProps {\n  asset: AssetType\n  isSelected: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n}\n\n// Get pixel density of the current device\nconst DPI =\n  typeof window === 'undefined' || !window.devicePixelRatio\n    ? 1\n    : Math.round(window.devicePixelRatio)\n\nconst Image = styled.img`\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: contain;\n`\n\nconst Container = styled(Card)`\n  position: relative;\n  z-index: 1;\n  padding-bottom: 100%;\n`\n\nconst Root = styled.div`\n  position: relative;\n  display: inherit;\n`\n\nconst MenuContainer = styled.div`\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 2;\n  display: none;\n  top: 3px;\n  right: 3px;\n\n  ${Root}:hover & {\n    display: block;\n  }\n`\n\nexport const AssetThumb = React.memo(function AssetThumb(props: AssetProps) {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected} = props\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n\n  useEffect(() => {\n    return () => {\n      if (deleteRef$.current) {\n        deleteRef$.current.unsubscribe()\n      }\n    }\n  }, [])\n\n  const handleConfirmDelete = useCallback(() => {\n    setShowDeleteDialog(true)\n  }, [setShowDeleteDialog])\n\n  const handleDialogClose = useCallback(() => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }, [setShowUsageDialog, setShowDeleteDialog])\n\n  const handleToggleUsageDialog = useCallback(() => {\n    setShowUsageDialog(true)\n  }, [setShowUsageDialog])\n\n  const handleDeleteError = useCallback(\n    (error: any) => {\n      toast.push({\n        closable: true,\n        status: 'error',\n        title: 'Image could not be deleted',\n        description: error.message,\n      })\n    },\n    [toast]\n  )\n\n  const handleDeleteSuccess = useCallback(() => {\n    toast.push({\n      status: 'success',\n      title: 'Image was deleted',\n    })\n  }, [toast])\n\n  const handleDeleteAsset = useCallback(() => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }, [asset._id, handleDeleteError, handleDeleteSuccess, onDeleteFinished])\n\n  const handleMenuAction = useCallback(\n    (action: AssetMenuAction) => {\n      if (action.type === 'delete') {\n        handleConfirmDelete()\n      }\n\n      if (action.type === 'showUsage') {\n        handleToggleUsageDialog()\n      }\n    },\n    [handleConfirmDelete, handleToggleUsageDialog]\n  )\n\n  // const {asset, onClick, onKeyPress, isSelected} = props\n  const {originalFilename, _id, url} = asset\n  const imgH = 200 * Math.max(1, DPI)\n\n  // Mead can't convert gifs, so we might end up with large gifs that will cause the source window to use a lot of CPU\n  // We instead force them to display as jpgs\n  const imageUrl = url.includes('.gif')\n    ? `${url}?h=${imgH}&fit=max&fm=jpg`\n    : `${url}?h=${imgH}&fit=max`\n\n  return (\n    <Root>\n      <Button\n        tone=\"primary\"\n        selected={isSelected}\n        tabIndex={0}\n        data-id={_id}\n        mode=\"ghost\"\n        onKeyPress={onKeyPress}\n        padding={0}\n        style={{padding: 2}}\n      >\n        <Container __unstable_checkered>\n          <Image alt={originalFilename} src={imageUrl} onClick={onClick} data-id={_id} />\n          {isDeleting && <FullscreenSpinner />}\n        </Container>\n      </Button>\n      <MenuContainer>\n        <AssetMenu isSelected={isSelected} onAction={handleMenuAction} />\n      </MenuContainer>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </Root>\n  )\n})\n","const BYTE_UNITS = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\nconst BIBYTE_UNITS = ['B', 'kiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\nconst BIT_UNITS = ['b', 'kbit', 'Mbit', 'Gbit', 'Tbit', 'Pbit', 'Ebit', 'Zbit', 'Ybit']\nconst BIBIT_UNITS = ['b', 'kibit', 'Mibit', 'Gibit', 'Tibit', 'Pibit', 'Eibit', 'Zibit', 'Yibit']\n\n/**\n * Formats the given number using `Number#toLocaleString`.\n * - If locale is a string, the value is expected to be a locale-key (for example: `de`).\n * - If locale is true, the system default locale is used for translation.\n * - If no value for locale is specified, the number is returned unmodified.\n */\nconst toLocaleString = (\n  number: string | number,\n  locale: string | string[] | undefined | boolean,\n  options: Intl.NumberFormatOptions | undefined\n) => {\n  let result = number\n  if (typeof locale === 'string' || Array.isArray(locale)) {\n    result = number.toLocaleString(locale, options)\n  } else if (locale === true || options !== undefined) {\n    result = number.toLocaleString(undefined, options)\n  }\n\n  return result\n}\n\ninterface PrettyBytesOptions {\n  /**\n   * Include plus sign for positive numbers. If the difference is exactly zero a\n   * space character will be prepended instead for better alignment.\n   */\n  signed?: boolean\n  /**\n   * Format the number as bits instead of bytes. This can be useful when, for\n   * example, referring to bit rate.\n   */\n  bits?: boolean\n  /**\n   * Format the number using the Binary Prefix instead of the SI Prefix. This\n   * can be useful for presenting memory amounts. However, this should not be used for presenting file sizes.\n   */\n  binary?: boolean\n  /**\n   * Important: Only the number and decimal separator are localized. The unit\n   * title is not and will not be localized.\n   */\n  locale?: boolean | string | string[]\n  /**\n   * The minimum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  minimumFractionDigits?: number\n  /**\n   * The maximum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  maximumFractionDigits?: number\n}\n\n/**\n * Taken from here:\n * https://github.com/sindresorhus/pretty-bytes/blob/a0335ab397a1bc88831f317e4d6d46b7e03ea6be/index.js\n */\nexport function prettyBytes(\n  input: number,\n  {\n    bits = false,\n    binary = false,\n    signed = false,\n    minimumFractionDigits,\n    maximumFractionDigits,\n    locale,\n  }: PrettyBytesOptions = {}\n): string {\n  let number: string | number = input\n\n  if (!Number.isFinite(number)) {\n    throw new TypeError(`Expected a finite number, got ${typeof number}: ${number}`)\n  }\n\n  // eslint-disable-next-line no-nested-ternary\n  const UNITS = bits ? (binary ? BIBIT_UNITS : BIT_UNITS) : binary ? BIBYTE_UNITS : BYTE_UNITS\n\n  if (signed && number === 0) {\n    return ` 0 ${UNITS[0]}`\n  }\n\n  const isNegative = number < 0\n  // eslint-disable-next-line no-nested-ternary\n  const prefix = isNegative ? '-' : signed ? '+' : ''\n\n  if (isNegative) {\n    number = -number\n  }\n\n  let localeOptions: Intl.NumberFormatOptions | undefined\n\n  if (minimumFractionDigits !== undefined) {\n    localeOptions = {minimumFractionDigits}\n  }\n\n  if (maximumFractionDigits !== undefined) {\n    localeOptions = {maximumFractionDigits, ...localeOptions}\n  }\n\n  if (number < 1) {\n    const numberString = toLocaleString(number, locale, localeOptions)\n    return `${prefix + numberString} ${UNITS[0]}`\n  }\n\n  const exponent = Math.min(\n    Math.floor(binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3),\n    UNITS.length - 1\n  )\n  number /= (binary ? 1024 : 1000) ** exponent\n\n  if (!localeOptions) {\n    number = number.toPrecision(3)\n  }\n\n  const numberString = toLocaleString(Number(number), locale, localeOptions)\n\n  const unit = UNITS[exponent]\n\n  return `${prefix + numberString} ${unit}`\n}\n","interface MimeTypeInfo {\n  title: string\n}\n\nconst MIME_TYPES: Record<string, MimeTypeInfo> = {\n  // Images\n  'image/bmp': {\n    title: 'Bitmap Image',\n  },\n  'image/jpeg': {\n    title: 'JPEG Image',\n  },\n  'image/gif': {\n    title: 'GIF Image',\n  },\n  'image/vnd.microsoft.icon': {\n    title: 'Icon',\n  },\n  'image/png': {\n    title: 'PNG Image',\n  },\n  'image/svg+xml': {\n    title: 'SVG Image',\n  },\n  'image/webp': {\n    title: 'WebP Image',\n  },\n  'image/tiff': {\n    title: 'TIFF Image',\n  },\n  'image/heic': {\n    title: 'HEIC Image',\n  },\n  // Audio\n  'audio/midi': {\n    title: 'MIDI Audio',\n  },\n  'audio/midi-x': {\n    title: 'MIDI Audio',\n  },\n  'audio/mpeg': {\n    title: 'MP3 Audio',\n  },\n  'audio/ogg': {\n    title: 'OGG Audio',\n  },\n  'audio/wav': {\n    title: 'WAV Audio',\n  },\n  'audio/webm': {\n    title: 'WebM Audio',\n  },\n  'audio/aac': {\n    title: 'AAC Audio',\n  },\n  // Video\n  'video/x-msvideo': {\n    title: 'AVI Video',\n  },\n  'video/mp4': {\n    title: 'MP4 Video',\n  },\n  'video/mpeg': {\n    title: 'MPEG Video',\n  },\n  'video/ogg': {\n    title: 'OGG Video',\n  },\n  'video/webm': {\n    title: 'WebM Video',\n  },\n  'video/quicktime': {\n    title: 'QuickTime Video',\n  },\n  // Documents\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': {\n    title: 'Excel Spreadsheet',\n  },\n  'application/vnd.ms-excel': {\n    title: 'Excel Spreadsheet',\n  },\n  'text/plain': {\n    title: 'Text',\n  },\n  'text/javascript': {\n    title: 'JavaScript',\n  },\n  'text/markdown': {\n    title: 'Markdown',\n  },\n  'text/csv': {\n    title: 'CSV',\n  },\n  'text/css': {\n    title: 'CSS',\n  },\n  'application/pdf': {\n    title: 'PDF Document',\n  },\n  'application/xml': {\n    title: 'XML Document',\n  },\n  'text/xml': {\n    title: 'XML Document',\n  },\n  'application/zip': {\n    title: 'ZIP Archive',\n  },\n  'application/vnd.rar': {\n    title: 'RAR Archive',\n  },\n  'application/x-7z-compressed': {\n    title: '7-zip Archive',\n  },\n  'application/octet-stream': {\n    title: 'Binary',\n  },\n}\n\nfunction convertMimeTypeToSomethingNice(mimeType: string): string {\n  const part = mimeType.replace('x-', '').split('/')[1]\n\n  return part.charAt(0).toUpperCase() + part.slice(1)\n}\n\nexport function formatMimeType(mimeType: string): string {\n  if (MIME_TYPES?.[mimeType]) {\n    return MIME_TYPES[mimeType].title\n  }\n\n  return convertMimeTypeToSomethingNice(mimeType)\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Button, Box, Card, Flex, Stack, Label, Text, Tooltip, Grid, useToast} from '@sanity/ui'\nimport {DocumentIcon, ChevronUpIcon, ChevronDownIcon, LinkIcon, TrashIcon} from '@sanity/icons'\nimport {Asset as AssetType} from '@sanity/types'\nimport {FIXME} from '../../../FIXME'\nimport {useClient, useTimeAgo} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {prettyBytes} from './prettyBytes'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\nimport {formatMimeType} from './utils/mimeType'\n\ninterface RowProps {\n  isMobile?: boolean\n  asset: AssetType\n  isSelected?: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished?: (...args: any[]) => any\n}\n\nconst CardIconWrapper = styled.span`\n  background-color: transparent;\n  flex-shrink: 0;\n`\n\n// These are here because using vanilla UI components caused a type issue inside of styled-components\nconst CustomFlex = styled(Flex)``\nconst CustomText = styled(Text)``\nconst CustomCard = styled(Card)<RowProps>`\n  &:hover-within ${CustomText} {\n    --card-muted-fg-color: var(--card-muted-fg-color);\n    --card-fg-color: var(--card-fg-color);\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n    `}\n`\n\nconst RowButton = styled(Button)<RowProps>`\n  box-shadow: none;\n  min-width: 0;\n  cursor: pointer;\n  position: initial;\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n  }\n\n  &:before {\n    z-index: 0;\n    pointer-events: none;\n    border-radius: 0.1875rem;\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n\n      &:before {\n        background-color: var(--card-focus-ring-color);\n      }\n\n      ${CardIconWrapper} {\n        --card-muted-fg-color: var(--card-bg-color);\n      }\n\n      ${CustomFlex} {\n        --card-muted-fg-color: var(--card-bg-color);\n        --card-fg-color: var(--card-bg-color);\n      }\n    `}\n\n  ${(props) =>\n    !props.isSelected &&\n    css`\n      &:hover:before {\n        background-color: var(--card-bg-color);\n      }\n\n      &:focus:before {\n        background-color: var(--card-code-bg-color);\n      }\n\n      &:focus-within:before {\n        background-color: var(--card-bg-color);\n      }\n    `}\n`\n\nconst STYLES_ROW_CARD = {position: 'relative' as FIXME}\nconst STYLES_ICON_CARD = {flexShrink: 0}\nconst STYLES_BUTTON_TEXT = {minWidth: 0}\nconst STYLES_ASSETMENU_WRAPPER = {\n  zIndex: 3,\n  marginTop: '-0.5rem',\n  marginBottom: '-0.5rem',\n}\n\nconst DISABLED_DELETE_TITLE = 'Cannot delete current file'\n\nexport const AssetRow = (props: RowProps) => {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [isOpen, setIsOpen] = useState(false)\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected, isMobile} = props\n  const {originalFilename, _id, mimeType, size, _createdAt} = asset\n  const formattedTime = useTimeAgo(_createdAt, {agoSuffix: true})\n  const formattedMimeType = formatMimeType(mimeType)\n  const formattedSize = prettyBytes(size)\n  const showTooltip = (originalFilename || '').length > 37\n\n  const handleConfirmDelete = () => {\n    setShowDeleteDialog(true)\n  }\n\n  const handleDeleteError = (error: Error) => {\n    toast.push({\n      closable: true,\n      status: 'error',\n      title: 'File could not be deleted',\n      description: error.message,\n    })\n  }\n\n  const handleDeleteSuccess = () => {\n    toast.push({\n      status: 'success',\n      title: 'File was deleted',\n    })\n  }\n\n  const handleDeleteAsset = () => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished?.(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }\n\n  const handleDialogClose = () => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }\n\n  const handleToggleUsageDialog = () => {\n    setShowUsageDialog(true)\n  }\n\n  const handleToggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const handleMenuAction = (action: AssetMenuAction) => {\n    if (action.type === 'delete') {\n      handleConfirmDelete()\n    }\n\n    if (action.type === 'showUsage') {\n      handleToggleUsageDialog()\n    }\n  }\n\n  if (isMobile) {\n    return (\n      <Card paddingBottom={2} style={STYLES_ROW_CARD}>\n        <Grid\n          columns={4}\n          gap={1}\n          style={{\n            position: 'relative',\n            gridTemplateColumns: '1fr 30px',\n            opacity: isDeleting ? 0.5 : 1,\n          }}\n        >\n          <RowButton\n            asset={asset}\n            mode=\"bleed\"\n            padding={0}\n            data-id={_id}\n            onClick={onClick}\n            paddingY={1}\n          >\n            <Flex gap={2} flex={2} align=\"center\">\n              <Card as={CardIconWrapper} padding={2} tone=\"transparent\" radius={2}>\n                <Text muted size={2} style={STYLES_ICON_CARD}>\n                  <DocumentIcon />\n                </Text>\n              </Card>\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            </Flex>\n          </RowButton>\n          <Flex justify=\"flex-end\" align=\"center\" paddingRight={1} style={STYLES_ASSETMENU_WRAPPER}>\n            <Button\n              mode=\"bleed\"\n              fontSize={1}\n              padding={2}\n              onClick={handleToggleOpen}\n              icon={isOpen ? ChevronUpIcon : ChevronDownIcon}\n            />\n          </Flex>\n        </Grid>\n        {isOpen && (\n          <>\n            <Grid marginTop={3} columns={3} gap={1}>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Size\n                </Label>\n                <Text size={1} muted>\n                  {formattedSize}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Type\n                </Label>\n                <Text size={1} muted>\n                  {formattedMimeType}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Date added\n                </Label>\n                <Text size={1} muted>\n                  {formattedTime}\n                </Text>\n              </Stack>\n            </Grid>\n            <Stack space={2} marginTop={3}>\n              <Button\n                fontSize={1}\n                tone=\"default\"\n                mode=\"ghost\"\n                text=\"Show uses\"\n                onClick={handleToggleUsageDialog}\n                icon={LinkIcon}\n              />\n\n              <Button\n                fontSize={1}\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Delete\"\n                icon={TrashIcon}\n                disabled={isSelected}\n                title={isSelected ? DISABLED_DELETE_TITLE : 'Delete file'}\n                onClick={handleConfirmDelete}\n              />\n            </Stack>\n          </>\n        )}\n\n        {(showUsageDialog || showDeleteDialog) && (\n          <AssetUsageDialog\n            assetType=\"file\"\n            asset={asset}\n            mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n            onClose={handleDialogClose}\n            onDelete={handleDeleteAsset}\n            isDeleting={isDeleting}\n          />\n        )}\n      </Card>\n    )\n  }\n\n  return (\n    <CustomCard\n      asset={asset}\n      paddingBottom={1}\n      style={STYLES_ROW_CARD}\n      radius={0}\n      overflow={'hidden'}\n      isSelected={isSelected}\n      aria-selected=\"true\"\n    >\n      <Grid\n        columns={4}\n        gap={1}\n        data-id={_id}\n        paddingY={1}\n        style={{\n          position: 'relative',\n          gridTemplateColumns: '3fr 1fr 1fr 2fr 30px',\n          opacity: isDeleting ? 0.5 : 1,\n        }}\n      >\n        <RowButton\n          asset={asset}\n          mode=\"bleed\"\n          data-id={_id}\n          onClick={onClick}\n          padding={0}\n          onKeyPress={onKeyPress}\n          title={`Select the file ${originalFilename}`}\n          isSelected={isSelected}\n        >\n          <CustomFlex\n            gap={2}\n            flex={2}\n            paddingRight={1}\n            align=\"center\"\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            data-id={_id}\n            title={`Select the file ${originalFilename}`}\n          >\n            <Card\n              as={CardIconWrapper}\n              padding={2}\n              tone=\"transparent\"\n              radius={2}\n              style={STYLES_ICON_CARD}\n            >\n              <Text muted size={2}>\n                <DocumentIcon />\n              </Text>\n            </Card>\n            {showTooltip && (\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>{originalFilename}</Text>\n                  </Box>\n                }\n                fallbackPlacements={['right', 'left']}\n                placement=\"top\"\n                portal\n              >\n                <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                  {originalFilename}\n                </Text>\n              </Tooltip>\n            )}\n\n            {!showTooltip && (\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            )}\n          </CustomFlex>\n        </RowButton>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedSize}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedMimeType}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text as=\"time\" size={1} muted dateTime={_createdAt}>\n            {formattedTime}\n          </Text>\n        </CustomFlex>\n        <CustomFlex\n          justify=\"flex-end\"\n          align=\"center\"\n          paddingX={1}\n          paddingY={1}\n          style={STYLES_ASSETMENU_WRAPPER}\n        >\n          <AssetMenu border={false} isSelected={false} onAction={handleMenuAction} />\n        </CustomFlex>\n      </Grid>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          assetType=\"file\"\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </CustomCard>\n  )\n}\n","import React from 'react'\nimport {Box, Card, Flex, Grid, Label, Spinner, Stack, useMediaIndex} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {AssetRow} from './AssetRow'\n\ninterface Props {\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n  assets: AssetType[]\n  isLoading?: boolean\n  selectedAssets: AssetType[]\n}\n\nconst STYLES_FILENAME = {paddingLeft: '2.2rem'}\nconst STYLES_GRID = {gridTemplateColumns: '3fr 1fr 1fr 2fr 30px'}\n\nexport function TableList(props: Props) {\n  const mediaIndex = useMediaIndex()\n  const isMobile = mediaIndex < 2\n  const {assets, onClick, onKeyPress, onDeleteFinished, selectedAssets, isLoading} = props\n\n  return (\n    <Box padding={4}>\n      <Card borderBottom paddingBottom={2} marginBottom={1}>\n        {isMobile ? (\n          <Grid style={STYLES_GRID}>\n            <Box flex={2} paddingLeft={5}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n          </Grid>\n        ) : (\n          <Grid gap={1} style={STYLES_GRID}>\n            <Box flex={2} style={STYLES_FILENAME}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Size\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Type\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Date added\n              </Label>\n            </Box>\n          </Grid>\n        )}\n      </Card>\n      <Stack>\n        {isLoading && assets.length === 0 && (\n          <Box paddingTop={4} paddingBottom={2}>\n            <Flex justify=\"center\">\n              <Spinner muted />\n            </Flex>\n          </Box>\n        )}\n        {assets.map((asset) => (\n          <AssetRow\n            key={asset._id}\n            asset={asset}\n            isMobile={isMobile}\n            isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            onDeleteFinished={onDeleteFinished}\n          />\n        ))}\n      </Stack>\n    </Box>\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useRef, useCallback, useMemo, useEffect} from 'react'\nimport {DownloadIcon} from '@sanity/icons'\nimport {Box, Button, Card, Dialog, Flex, Grid, Spinner, Text} from '@sanity/ui'\nimport {Asset as AssetType, AssetFromSource, AssetSourceComponentProps} from '@sanity/types'\nimport {uniqueId} from 'lodash'\nimport styled from 'styled-components'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {AssetThumb} from './AssetThumb'\nimport {TableList} from './TableList'\n\nconst PER_PAGE = 200\nconst ASSET_TYPE_IMAGE = 'sanity.imageAsset'\nconst ASSET_TYPE_FILE = 'sanity.fileAsset'\n\nconst buildQuery = (start = 0, end = PER_PAGE, assetType = ASSET_TYPE_IMAGE) => `\n  *[_type == \"${assetType}\"] | order(_updatedAt desc) [${start}...${end}] {\n    _id,\n    _updatedAt,\n    _createdAt,\n    url,\n    originalFilename,\n    mimeType,\n    extension,\n    size,\n    metadata {dimensions}\n  }\n`\n\nconst ThumbGrid = styled(Grid)`\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n`\n\nconst CardLoadMore = styled(Card)`\n  border-top: 1px solid var(--card-border-color);\n  position: sticky;\n  bottom: 0;\n  z-index: 200;\n`\n\nconst DefaultAssetSource = function DefaultAssetSource(\n  props: AssetSourceComponentProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(() => client.withConfig({apiVersion: '1'}), [client])\n  const _elementId = useRef(`default-asset-source-${uniqueId()}`)\n  const currentPageNumber = useRef(0)\n  const fetch$ = useRef<Subscription>()\n  const [assets, setAssets] = useState<AssetType[]>([])\n  const [isLastPage, setIsLastPage] = useState(false)\n  const [hasResetAutoFocus, setHasResetFocus] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const {\n    selectedAssets,\n    assetType = 'image',\n    dialogHeaderTitle = 'Select image',\n    onClose,\n    onSelect,\n  } = props\n\n  const fetchPage = useCallback(\n    (pageNumber: number) => {\n      const start = pageNumber * PER_PAGE\n      const end = start + PER_PAGE\n      const isImageAssetType = assetType === 'image'\n      const tag = isImageAssetType ? 'asset.image-list' : 'asset.file-list'\n      const assetTypeParam = isImageAssetType ? ASSET_TYPE_IMAGE : ASSET_TYPE_FILE\n\n      setIsLoading(true)\n\n      fetch$.current = versionedClient.observable\n        .fetch(buildQuery(start, end, assetTypeParam), {}, {tag})\n        .subscribe((result) => {\n          setIsLastPage(result.length < PER_PAGE)\n          // eslint-disable-next-line max-nested-callbacks\n          setAssets((prevState) => prevState.concat(result))\n          setIsLoading(false)\n        })\n    },\n    [assetType, setIsLoading, setAssets, setIsLastPage, versionedClient]\n  )\n\n  const handleDeleteFinished = useCallback(\n    (id: any) => {\n      // eslint-disable-next-line max-nested-callbacks\n      setAssets((prevState) => prevState.filter((asset) => asset._id !== id))\n    },\n    [setAssets]\n  )\n\n  const select = useCallback(\n    (id: any) => {\n      const selected = assets.find((doc) => doc._id === id)\n\n      if (selected) {\n        const selectedSource: AssetFromSource[] = [{kind: 'assetDocumentId', value: id}]\n\n        onSelect(selectedSource)\n      }\n    },\n    [assets, onSelect]\n  )\n\n  const handleItemClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault()\n\n      select(event.currentTarget.getAttribute('data-id'))\n    },\n    [select]\n  )\n\n  const handleItemKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        event.preventDefault()\n        select(event.currentTarget.getAttribute('data-id'))\n      }\n    },\n    [select]\n  )\n\n  const handleClose = useCallback(() => {\n    if (onClose) {\n      onClose()\n    }\n  }, [onClose])\n\n  const handleFetchNextPage = useCallback(\n    (event: any) => {\n      event.preventDefault()\n      fetchPage(++currentPageNumber.current)\n    },\n    [fetchPage]\n  )\n\n  useEffect(() => {\n    fetchPage(currentPageNumber.current)\n\n    return () => {\n      if (fetch$.current) {\n        fetch$.current.unsubscribe()\n      }\n    }\n  }, [fetchPage])\n\n  useEffect(() => {\n    // We focus on the first item after we're doing loading, but only on initial load, as\n    // this will reset the scroll position to the top if we do it on the second page\n    if (!isLoading && (!currentPageNumber.current || currentPageNumber.current === 0)) {\n      setHasResetFocus(true)\n    }\n  }, [isLoading])\n\n  const renderedThumbView = useMemo(() => {\n    return (\n      <Box padding={4}>\n        <ThumbGrid gap={2}>\n          {assets.map((asset) => (\n            <AssetThumb\n              key={asset._id}\n              asset={asset}\n              isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n              onClick={handleItemClick}\n              onKeyPress={handleItemKeyPress}\n              onDeleteFinished={handleDeleteFinished}\n            />\n          ))}\n        </ThumbGrid>\n\n        {isLoading && assets.length === 0 && (\n          <Flex justify=\"center\">\n            <Spinner muted />\n          </Flex>\n        )}\n\n        {!isLoading && assets.length === 0 && (\n          <Text align=\"center\" muted>\n            No images\n          </Text>\n        )}\n      </Box>\n    )\n  }, [assets, handleDeleteFinished, handleItemClick, handleItemKeyPress, isLoading, selectedAssets])\n\n  const renderedTableView = useMemo(() => {\n    return (\n      <TableList\n        isLoading={isLoading}\n        assets={assets}\n        selectedAssets={selectedAssets}\n        onClick={handleItemClick}\n        onKeyPress={handleItemKeyPress}\n        onDeleteFinished={handleDeleteFinished}\n      />\n    )\n  }, [isLoading, assets, selectedAssets, handleItemClick, handleItemKeyPress, handleDeleteFinished])\n\n  return (\n    <Dialog\n      ref={ref}\n      id={_elementId.current}\n      header={dialogHeaderTitle}\n      width={2}\n      onClose={handleClose}\n      __unstable_autoFocus={hasResetAutoFocus}\n    >\n      {assetType === 'image' && renderedThumbView}\n      {assetType === 'file' && renderedTableView}\n      {assets.length > 0 && !isLastPage && (\n        <CardLoadMore tone=\"default\" padding={4}>\n          <Flex direction=\"column\">\n            <Button\n              type=\"button\"\n              icon={DownloadIcon}\n              loading={isLoading}\n              onClick={handleFetchNextPage}\n              text=\"Load more\"\n              tone=\"primary\"\n            />\n          </Flex>\n        </CardLoadMore>\n      )}\n    </Dialog>\n  )\n}\n\nexport const DefaultSource = React.memo(React.forwardRef(DefaultAssetSource))\n","import {DocumentsIcon} from '@sanity/icons'\nimport {AssetSource} from '@sanity/types'\nimport {FIXME} from '../../../FIXME'\nimport {DefaultSource} from './DefaultSource'\n\nexport const FileSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded files',\n  component: DefaultSource as FIXME,\n  icon: DocumentsIcon as FIXME,\n}\n","import {ImageIcon} from '@sanity/icons'\nimport {AssetSource} from '@sanity/types'\nimport {FIXME} from '../../../FIXME'\nimport {DefaultSource} from './DefaultSource'\n\nexport const ImageSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded images',\n  component: DefaultSource as FIXME,\n  icon: ImageIcon as FIXME,\n}\n","import type {AssetSource, SchemaTypeDefinition} from '@sanity/types'\nimport type {Template, TemplateResponse} from '../templates'\nimport {DocumentActionComponent} from './document/actions'\nimport {DocumentBadgeComponent} from './document/badges'\nimport type {\n  DocumentLanguageFilterComponent,\n  DocumentLanguageFilterContext,\n  AsyncConfigPropertyReducer,\n  ConfigContext,\n  ConfigPropertyReducer,\n  DocumentActionsContext,\n  DocumentBadgesContext,\n  NewDocumentOptionsContext,\n  ResolveProductionUrlContext,\n  Tool,\n} from './types'\n\nexport const initialDocumentBadges: DocumentBadgeComponent[] = []\n\nexport const initialDocumentActions: DocumentActionComponent[] = []\n\nexport const initialLanguageFilter: DocumentLanguageFilterComponent[] = []\n\nexport const schemaTypesReducer: ConfigPropertyReducer<\n  SchemaTypeDefinition[],\n  Omit<ConfigContext, 'schema' | 'currentUser' | 'client' | 'getClient'>\n> = (prev, {schema}, context) => {\n  const schemaTypes = schema?.types\n\n  if (!schemaTypes) return prev\n  if (typeof schemaTypes === 'function') return schemaTypes(prev, context)\n  if (Array.isArray(schemaTypes)) return [...prev, ...schemaTypes]\n\n  throw new Error(\n    `Expected \\`schema.types\\` to an array or a function but found ${typeof schemaTypes} instead.`\n  )\n}\n\nexport const resolveProductionUrlReducer: AsyncConfigPropertyReducer<\n  string | undefined,\n  ResolveProductionUrlContext\n> = async (prev, {document}, context) => {\n  const resolveProductionUrl = document?.productionUrl\n  // the redundant await is useful for error logging because the error is caught\n  // in this stack vs somewhere down stream\n  // eslint-disable-next-line no-return-await\n  if (resolveProductionUrl) return await resolveProductionUrl(prev, context)\n  return prev\n}\n\nexport const toolsReducer: ConfigPropertyReducer<Tool[], ConfigContext> = (\n  prev,\n  {tools},\n  context\n) => {\n  if (!tools) return prev\n  if (typeof tools === 'function') return tools(prev, context)\n  if (Array.isArray(tools)) return [...prev, ...tools]\n\n  throw new Error(`Expected \\`tools\\` to an array or a function but found ${typeof tools} instead.`)\n}\n\nexport const schemaTemplatesReducer: ConfigPropertyReducer<Template[], ConfigContext> = (\n  prev,\n  {schema},\n  context\n) => {\n  const schemaTemplates = schema?.templates\n  if (!schemaTemplates) return prev\n  if (typeof schemaTemplates === 'function') return schemaTemplates(prev, context)\n  if (Array.isArray(schemaTemplates)) return [...prev, ...schemaTemplates]\n\n  throw new Error(\n    `Expected \\`schema.templates\\` to an array or a function but found ${typeof schemaTemplates} instead.`\n  )\n}\n\nexport const documentBadgesReducer: ConfigPropertyReducer<\n  DocumentBadgeComponent[],\n  DocumentBadgesContext\n> = (prev, {document}, context) => {\n  const documentBadges = document?.badges\n  if (!documentBadges) return prev\n\n  if (typeof documentBadges === 'function') return documentBadges(prev, context)\n  if (Array.isArray(documentBadges)) return [...prev, ...documentBadges]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentBadges} instead.`\n  )\n}\n\nexport const documentActionsReducer: ConfigPropertyReducer<\n  DocumentActionComponent[],\n  DocumentActionsContext\n> = (prev, {document}, context) => {\n  const documentActions = document?.actions\n  if (!documentActions) return prev\n\n  if (typeof documentActions === 'function') return documentActions(prev, context)\n  if (Array.isArray(documentActions)) return [...prev, ...documentActions]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentActions} instead.`\n  )\n}\n\nexport const newDocumentOptionsResolver: ConfigPropertyReducer<\n  TemplateResponse[],\n  NewDocumentOptionsContext\n> = (prev, {document}, context) => {\n  const resolveNewDocumentOptions = document?.newDocumentOptions\n  if (!resolveNewDocumentOptions) return prev\n\n  if (typeof resolveNewDocumentOptions !== 'function') {\n    throw new Error(\n      `Expected \\`document.resolveNewDocumentOptions\\` a function but found ${typeof resolveNewDocumentOptions} instead.`\n    )\n  }\n\n  return resolveNewDocumentOptions(prev, context)\n}\n\nexport const fileAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.file?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`file.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\nexport const imageAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.image?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`image.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\n/**\n * @internal\n */\nexport const documentLanguageFilterReducer: ConfigPropertyReducer<\n  DocumentLanguageFilterComponent[],\n  DocumentLanguageFilterContext\n> = (prev, {document}, context) => {\n  const resolveDocumentLanguageFilter = document?.unstable_languageFilter\n  if (!resolveDocumentLanguageFilter) return prev\n\n  if (typeof resolveDocumentLanguageFilter === 'function')\n    return resolveDocumentLanguageFilter(prev, context)\n\n  if (Array.isArray(resolveDocumentLanguageFilter))\n    return [...prev, ...resolveDocumentLanguageFilter]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof resolveDocumentLanguageFilter} instead.`\n  )\n}\n","import {isRecord} from '../util'\n\n/** @internal */\nexport interface ConfigPropertyErrorOptions {\n  propertyName: string\n  path: string[]\n  cause: unknown\n}\n\n/** @internal */\nexport class ConfigPropertyError extends Error {\n  propertyName: string\n  path: string[]\n  cause: unknown\n\n  constructor({propertyName, path, cause}: ConfigPropertyErrorOptions) {\n    const message =\n      isRecord(cause) && typeof cause?.message === 'string' ? `: ${cause.message}` : ''\n\n    super(\n      `An error occurred while resolving \\`${propertyName}\\` from ${path.join(' > ')}${message}`\n    )\n\n    this.propertyName = propertyName\n    this.cause = cause\n    this.path = path\n  }\n}\n","import {ConfigPropertyError} from './ConfigPropertyError'\nimport {PluginOptions, ConfigPropertyReducer, AsyncConfigPropertyReducer} from './types'\n\nconst flattenConfig = (\n  {plugins = [], ...currentConfig}: PluginOptions,\n  path: string[]\n): Array<{config: PluginOptions; path: string[]}> => {\n  return [\n    {config: currentConfig, path: [...path, currentConfig.name]},\n    ...plugins.flatMap((config) => flattenConfig(config, [...path, currentConfig.name])),\n  ]\n}\n\ninterface ResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  reducer: ConfigPropertyReducer<TValue, TContext>\n}\ninterface AsyncResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  asyncReducer: AsyncConfigPropertyReducer<TValue, TContext>\n}\n\nexport function resolveConfigProperty<TValue, TContext>(\n  options: ResolveConfigPropertyOptions<TValue, TContext>\n): TValue\nexport function resolveConfigProperty<TValue, TContext>(\n  options: AsyncResolveConfigPropertyOptions<TValue, TContext>\n): Promise<TValue>\nexport function resolveConfigProperty<TValue, TContext>({\n  config: inputConfig,\n  context,\n  initialValue,\n  propertyName,\n  ...reducers\n}:\n  | ResolveConfigPropertyOptions<TValue, TContext>\n  | AsyncResolveConfigPropertyOptions<TValue, TContext>): TValue | Promise<TValue> {\n  const configs = flattenConfig(inputConfig, [])\n\n  if ('reducer' in reducers) {\n    return configs.reduce((acc, {config, path}) => {\n      try {\n        return reducers.reducer(acc, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path: path,\n          cause: e,\n        })\n      }\n    }, initialValue)\n  }\n\n  const reducer = reducers.asyncReducer\n  return (async () => {\n    let current = initialValue\n    for (const {config, path} of configs) {\n      try {\n        current = await reducer(current, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path,\n          cause: e,\n        })\n      }\n    }\n    return current\n  })()\n}\n","import {isRecord} from '../util'\n\n/** @internal */\nexport interface ConfigResolutionErrorOptions {\n  name: string\n  type: string\n  causes: Array<ConfigResolutionError | Error | unknown>\n}\n\n/** @internal */\nexport class ConfigResolutionError extends Error {\n  name: string\n  type: string\n  causes: unknown[]\n\n  constructor({causes, name, type}: ConfigResolutionErrorOptions) {\n    const messages = causes\n      .filter(Boolean)\n      .map((cause) =>\n        isRecord(cause) && typeof cause?.message === 'string' ? cause.message : String(cause)\n      )\n\n    super(\n      `Could not resolve ${type}${name ? ` \\`${name}\\`` : ''}:\\n${messages\n        .map((message) => `\\t- ${message}`)\n        .join('\\n')}\\n\\n`\n    )\n\n    this.name = name\n    this.causes = causes\n    this.type = type\n  }\n}\n","import {Schema} from '@sanity/types'\n\n/** @internal */\n// TODO: consider removing this error in favor of the `ConfigResolutionError`\nexport class SchemaError extends Error {\n  constructor(public schema: Schema) {\n    super('SchemaError')\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {COLOR_HUES, hues} from '@sanity/color'\nimport {darken, lighten, hasBadContrast, readableColor} from 'color2k'\n\nfunction pseudoRandomNumber(seed: string) {\n  const hashCode = seed\n    .split('')\n    // eslint-disable-next-line no-bitwise\n    .reduce((prevHash, currVal) => ((prevHash << 5) - prevHash + currVal.charCodeAt(0)) | 0, 0)\n  return Math.abs((hashCode * 16807) % 2147483647) / 2147483647\n}\n\nconst SvgText = styled.text`\n  font-family: ${({theme}) => theme.sanity.fonts.heading.family};\n  font-weight: ${({theme}) => theme.sanity.fonts.heading.weights.bold};\n  font-size: 16px;\n  transform: translateY(1px);\n`\n\n/**\n * Creates an icon element based on the input title\n */\nexport function createDefaultIcon(title: string, subtitle: string) {\n  const rng1 = pseudoRandomNumber(`${title} ${subtitle}`)\n\n  const huesWithoutGray = COLOR_HUES.filter((hue) => hue !== 'gray')\n  const colorHue = huesWithoutGray[Math.floor(rng1 * huesWithoutGray.length)]\n  const possibleTints = ['300', '400', '500', '600', '700'] as const\n  const rng2 = pseudoRandomNumber(rng1.toString())\n  const tint = possibleTints[Math.floor(rng2 * possibleTints.length)]\n  const color = hues[colorHue][tint].hex\n\n  const letters = title\n    // split by whitespace\n    .split(/\\s/g)\n    // replace all non-word characters with empty string\n    .map((word) => word.replace(/\\\\W/g, ''))\n    // remove empty strings\n    .filter(Boolean)\n    // take the first two words\n    .slice(0, 2)\n    // grab the first letter and make it upper case\n    .map((i) => i.charAt(0).toUpperCase())\n\n  const darkened = darken(color, 0.4)\n  const lightened = lighten(color, 0.4)\n\n  /* eslint-disable no-negated-condition */\n  // eslint-disable-next-line no-nested-ternary\n  const textColor = !hasBadContrast(color, 'readable', darkened)\n    ? darkened\n    : !hasBadContrast(color, 'readable', lightened)\n    ? lightened\n    : readableColor(color)\n  /* eslint-enable no-negated-condition */\n\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n      <rect width={32} height={32} rx={2} fill={color} />\n      <SvgText\n        x=\"50%\"\n        y=\"50%\"\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        dominantBaseline=\"middle\"\n        fill={textColor}\n      >\n        {letters}\n      </SvgText>\n    </svg>\n  )\n}\n","/* eslint-disable max-nested-callbacks */\n\nimport {SanityClient} from '@sanity/client'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {CurrentUser, Schema} from '@sanity/types'\nimport {studioTheme} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport {fromUrl} from '@sanity/bifur-client'\nimport {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {createSchema} from '../schema'\nimport {AuthStore, createAuthStore} from '../store/_legacy'\nimport {FileSource, ImageSource} from '../form/studio/assetSource'\nimport {InitialValueTemplateItem, Template, TemplateResponse} from '../templates'\nimport {isNonNullable} from '../util'\nimport {validateWorkspaces} from '../studio'\nimport {\n  Config,\n  PreparedConfig,\n  SingleWorkspace,\n  Source,\n  SourceClientOptions,\n  SourceOptions,\n  WorkspaceOptions,\n  WorkspaceSummary,\n} from './types'\nimport {\n  documentLanguageFilterReducer,\n  documentActionsReducer,\n  documentBadgesReducer,\n  fileAssetSourceResolver,\n  imageAssetSourceResolver,\n  initialDocumentActions,\n  initialDocumentBadges,\n  initialLanguageFilter,\n  newDocumentOptionsResolver,\n  resolveProductionUrlReducer,\n  schemaTemplatesReducer,\n  schemaTypesReducer,\n  toolsReducer,\n} from './configPropertyReducers'\nimport {resolveConfigProperty} from './resolveConfigProperty'\nimport {ConfigResolutionError} from './ConfigResolutionError'\nimport {SchemaError} from './SchemaError'\nimport {createDefaultIcon} from './createDefaultIcon'\n\ntype InternalSource = WorkspaceSummary['__internal']['sources'][number]\n\nfunction normalizeIcon(\n  icon: React.ComponentType | React.ElementType | undefined,\n  title: string,\n  subtitle = ''\n): JSX.Element {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return createDefaultIcon(title, subtitle)\n}\n\n/**\n * Takes in a config (created from the `defineConfig` function) and returns\n * an array of `WorkspaceSummary`. Note: this only partially resolves a config.\n *\n * For usage inside the Studio, it's preferred to pull the pre-resolved\n * workspaces and sources via `useWorkspace` or `useSource`. For usage outside\n * the Studio or for testing, use `resolveConfig`.\n *\n * @internal\n */\nexport function prepareConfig(config: Config): PreparedConfig {\n  const workspaceOptions: WorkspaceOptions[] | [SingleWorkspace] = Array.isArray(config)\n    ? config\n    : [config]\n\n  try {\n    validateWorkspaces({workspaces: workspaceOptions})\n  } catch (e) {\n    throw new ConfigResolutionError({\n      name: '',\n      type: 'workspace',\n      causes: [e.message],\n    })\n  }\n\n  const workspaces = workspaceOptions.map(\n    ({unstable_sources: nestedSources = [], ...rootSource}): WorkspaceSummary => {\n      const sources = [rootSource as SourceOptions, ...nestedSources]\n\n      const resolvedSources = sources.map((source): InternalSource => {\n        const projectId = source.projectId\n        const dataset = source.dataset\n\n        const auth = source.auth || createAuthStore({dataset, projectId})\n\n        let schemaTypes\n        try {\n          schemaTypes = resolveConfigProperty({\n            propertyName: 'schema.types',\n            config: source,\n            context: {projectId, dataset},\n            initialValue: [],\n            reducer: schemaTypesReducer,\n          })\n        } catch (e) {\n          throw new ConfigResolutionError({\n            name: source.name,\n            type: 'source',\n            causes: [e],\n          })\n        }\n\n        const schema = createSchema({\n          name: source.name,\n          types: schemaTypes,\n        })\n\n        const schemaValidationProblemGroups = schema._validation\n        const schemaErrors = schemaValidationProblemGroups?.filter((msg) =>\n          msg.problems.some((p) => p.severity === 'error')\n        )\n\n        if (schemaValidationProblemGroups && schemaErrors?.length) {\n          // TODO: consider using the `ConfigResolutionError`\n          throw new SchemaError(schema)\n        }\n\n        const source$ = auth.state.pipe(\n          map(({client, authenticated, currentUser}) => {\n            return resolveSource({\n              config: source,\n              client,\n              currentUser,\n              schema,\n              authenticated,\n              auth,\n            })\n          }),\n          shareReplay(1)\n        )\n\n        return Object.assign(source$, {\n          name: source.name,\n          projectId: source.projectId,\n          dataset: source.dataset,\n          title: source.title || startCase(source.name),\n          auth,\n          schema,\n        })\n      })\n\n      const title = rootSource.title || startCase(rootSource.name)\n\n      const workspaceSummary: WorkspaceSummary = {\n        type: 'workspace-summary',\n        auth: resolvedSources[0].auth,\n        basePath: rootSource.basePath || '/',\n        dataset: rootSource.dataset,\n        schema: resolvedSources[0].schema,\n        icon: normalizeIcon(\n          rootSource.icon,\n          title,\n          `${rootSource.projectId} ${rootSource.dataset}`\n        ),\n        name: rootSource.name || 'default',\n        projectId: rootSource.projectId,\n        theme: rootSource.theme || studioTheme,\n        title,\n        subtitle: rootSource.subtitle,\n        __internal: {\n          sources: resolvedSources,\n        },\n      }\n\n      return workspaceSummary\n    }\n  )\n\n  return {type: 'prepared-config', workspaces}\n}\n\ninterface ResolveSourceOptions {\n  config: SourceOptions\n  schema: Schema\n  client: SanityClient\n  currentUser: CurrentUser | null\n  authenticated: boolean\n  auth: AuthStore\n}\n\nfunction getBifurClient(client: SanityClient, auth: AuthStore) {\n  const bifurVersionedClient = client.withConfig({apiVersion: '2022-06-30'})\n  const dataset = bifurVersionedClient.config().dataset\n\n  const url = bifurVersionedClient.getUrl(`/socket/${dataset}`).replace(/^http/, 'ws')\n\n  const options = auth.token ? {token$: auth.token} : {}\n  return fromUrl(url, options)\n}\n\nfunction resolveSource({\n  config,\n  client,\n  currentUser,\n  schema,\n  authenticated,\n  auth,\n}: ResolveSourceOptions): Source {\n  const {dataset, projectId} = config\n  const bifur = getBifurClient(client, auth)\n  const errors: unknown[] = []\n  const clients: Record<string, SanityClient> = {}\n  const getClient = (options: SourceClientOptions): SanityClient => {\n    if (!options || !options.apiVersion) {\n      throw new Error('Missing required `apiVersion` option')\n    }\n\n    if (!clients[options.apiVersion]) {\n      clients[options.apiVersion] = client.withConfig(options)\n    }\n\n    return clients[options.apiVersion]\n  }\n\n  const context = {\n    client,\n    getClient,\n    currentUser,\n    dataset,\n    projectId,\n    schema,\n  }\n\n  // <TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n  /* eslint-disable no-proto */\n  const wrappedClient = client as any\n  context.client = [...Object.keys(client), ...Object.keys(wrappedClient.__proto__)].reduce(\n    (acc, key) => {\n      const original = Object.hasOwnProperty.call(client, key)\n        ? wrappedClient[key]\n        : wrappedClient.__proto__[key]\n\n      return Object.defineProperty(acc, key, {\n        get() {\n          console.warn(\n            '`configContext.client` is deprecated and will be removed in the next release! Use `context.getClient({apiVersion: \"2021-06-07\"})` instead'\n          )\n          return original\n        },\n      })\n    },\n    {}\n  ) as any as SanityClient\n  /* eslint-enable no-proto */\n  // </TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n\n  let templates!: Source['templates']\n  try {\n    templates = resolveConfigProperty({\n      config,\n      context,\n      propertyName: 'schema.templates',\n      reducer: schemaTemplatesReducer,\n      initialValue: schema\n        .getTypeNames()\n        .filter((typeName) => !/^sanity\\./.test(typeName))\n        .map((typeName) => schema.get(typeName))\n        .filter(isNonNullable)\n        .filter((schemaType) => schemaType.type?.name === 'document')\n        .map((schemaType) => {\n          const template: Template = {\n            id: schemaType.name,\n            schemaType: schemaType.name,\n            title: schemaType.title || schemaType.name,\n            icon: schemaType.icon,\n            value: schemaType.initialValue || {_type: schemaType.name},\n          }\n\n          return template\n        }),\n    })\n    // TODO: validate templates\n    // TODO: validate that each one has a unique template ID\n  } catch (e) {\n    errors.push(e)\n  }\n\n  let tools!: Source['tools']\n  try {\n    tools = resolveConfigProperty({\n      config,\n      context,\n      initialValue: [],\n      propertyName: 'tools',\n      reducer: toolsReducer,\n    })\n  } catch (e) {\n    errors.push(e)\n  }\n\n  // In this case we want to throw an error because it is not possible to have\n  // a tool with the name \"tool\" due to logic that happens in the router.\n  if (tools.some(({name}) => name === 'tool')) {\n    throw new Error('A tool cannot have the name \"tool\". Please enter a different name.')\n  }\n\n  const initialTemplatesResponses = templates\n    // filter out the ones with parameters to fill\n    .filter((template) => !template.parameters?.length)\n    .map(\n      (template): TemplateResponse => ({\n        templateId: template.id,\n        description: template.description,\n        icon: template.icon,\n        title: template.title,\n      })\n    )\n\n  const templateMap = templates.reduce((acc, template) => {\n    acc.set(template.id, template)\n    return acc\n  }, new Map<string, Template>())\n\n  // TODO: extract this function\n  const resolveNewDocumentOptions: Source['document']['resolveNewDocumentOptions'] = (\n    creationContext\n  ) => {\n    const {schemaType: schemaTypeName} = creationContext\n\n    const templateResponses = resolveConfigProperty({\n      config,\n      context: {...context, creationContext},\n      initialValue: initialTemplatesResponses,\n      propertyName: 'document.resolveNewDocumentOptions',\n      reducer: newDocumentOptionsResolver,\n    })\n\n    const templateErrors: unknown[] = []\n\n    // TODO: validate template responses\n    // ensure there is a matching template per each one\n    if (templateErrors.length) {\n      throw new ConfigResolutionError({\n        name: config.name,\n        // TODO: figure out this name\n        type: 'source',\n        causes: templateErrors,\n      })\n    }\n\n    return (\n      templateResponses\n        // take the template responses and transform them into the formal\n        // `InitialValueTemplateItem`\n        .map((response, index): InitialValueTemplateItem => {\n          const template = templateMap.get(response.templateId)\n          if (!template) {\n            throw new Error(`Could not find template with ID \\`${response.templateId}\\``)\n          }\n\n          const schemaType = schema.get(template.schemaType)\n\n          if (!schemaType) {\n            throw new Error(\n              `Could not find matching schema type \\`${template.schemaType}\\` for template \\`${template.id}\\``\n            )\n          }\n\n          const title = response.title || template.title\n          // Don't show the type name as subtitle if it's the same as the template name\n          const defaultSubtitle = schemaType?.title === title ? undefined : schemaType?.title\n\n          return {\n            id: `${response.templateId}-${index}`,\n            templateId: response.templateId,\n            type: 'initialValueTemplateItem',\n            title,\n            subtitle: response.subtitle || defaultSubtitle,\n            description: response.description || template.description,\n            icon: response.icon || template.icon || schemaType?.icon,\n            initialDocumentId: response.initialDocumentId,\n            parameters: response.parameters,\n            schemaType: template.schemaType,\n          }\n        })\n        .filter((item) => {\n          // if we are in a creationContext where there is no schema type,\n          // then keep everything\n          if (!schemaTypeName) return true\n\n          // else only keep the `schemaType`s that match the creationContext\n          return schemaTypeName === templateMap.get(item.templateId)?.schemaType\n        })\n    )\n  }\n\n  let staticInitialValueTemplateItems!: InitialValueTemplateItem[]\n  try {\n    staticInitialValueTemplateItems = resolveNewDocumentOptions({type: 'global'})\n  } catch (e) {\n    errors.push(e)\n  }\n\n  if (errors.length) {\n    throw new ConfigResolutionError({\n      name: config.name,\n      type: 'source',\n      causes: errors,\n    })\n  }\n\n  const source: Source = {\n    type: 'source',\n    name: config.name,\n    title: config.title || startCase(config.name),\n    schema,\n    getClient,\n    dataset,\n    projectId,\n    tools,\n    currentUser,\n    authenticated,\n    templates,\n    auth,\n    document: {\n      actions: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentActions,\n          propertyName: 'document.actions',\n          reducer: documentActionsReducer,\n        }),\n      badges: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentBadges,\n          propertyName: 'document.badges',\n          reducer: documentBadgesReducer,\n        }),\n      resolveProductionUrl: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: undefined,\n          propertyName: 'resolveProductionUrl',\n          asyncReducer: resolveProductionUrlReducer,\n        }),\n      resolveNewDocumentOptions,\n      unstable_languageFilter: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialLanguageFilter,\n          propertyName: 'document.unstable_languageFilter',\n          reducer: documentLanguageFilterReducer,\n        }),\n    },\n    form: {\n      file: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: [FileSource],\n          propertyName: 'formBuilder.file.assetSources',\n          reducer: fileAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n      image: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: [ImageSource],\n          propertyName: 'formBuilder.image.assetSources',\n          reducer: imageAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n    },\n\n    __internal: {\n      bifur,\n      staticInitialValueTemplateItems,\n      options: config,\n    },\n  }\n\n  return source\n}\n","import {combineLatest, Observable} from 'rxjs'\nimport {first, map} from 'rxjs/operators'\nimport {CurrentUser} from '@sanity/types'\nimport {SanityClient} from '@sanity/client'\nimport {createMockAuthStore} from '../store'\nimport {Config, SingleWorkspace, Source, Workspace, SchemaPluginOptions} from './types'\nimport {prepareConfig} from './prepareConfig'\n\n/**\n * Fully resolves a configuration including subscribing to all sources and\n * workspaces from a config. Returns an `Observable` that waits till all sources\n * emit once before emitting an array of fully resolved sources and workspaces.\n *\n * @internal\n */\nexport function resolveConfig(config: Config): Observable<Workspace[]> {\n  const {workspaces} = prepareConfig(config)\n\n  return combineLatest(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    workspaces.flatMap((workspaceSummary) =>\n      combineLatest(workspaceSummary.__internal.sources.map(({source}) => source)).pipe(\n        map(\n          (sources): Workspace => ({\n            ...workspaceSummary,\n            ...sources[0],\n            unstable_sources: sources,\n            type: 'workspace',\n          })\n        )\n      )\n    )\n  )\n}\n\n/** @internal */\nexport type CreateWorkspaceFromConfigOptions =\n  | SingleWorkspace\n  | (SingleWorkspace & {\n      currentUser: CurrentUser\n      getClient: (options: {apiVersion: string}) => SanityClient\n      schema?: SchemaPluginOptions\n    })\n\n/**\n * PRIMARILY FOR TESTING PURPOSES.\n *\n * This will create a fully resolved workspace from a config and optionally\n * allows a `client` and `currentUser` override. This exists primarily for\n * testing purposes. If you need to use a workspace, we recommend using the\n * `useWorkspace` hook to grab the fully resolved workspace from the\n * `StudioProvider`\n *\n * @internal\n */\nexport async function createWorkspaceFromConfig(\n  options: CreateWorkspaceFromConfigOptions\n): Promise<Workspace> {\n  const client = 'getClient' in options ? options.getClient({apiVersion: '2022-09-09'}) : undefined\n  const [workspace] = await resolveConfig({\n    ...options,\n    ...(client &&\n      'currentUser' in options && {\n        auth: createMockAuthStore({...options, client}),\n      }),\n  })\n    .pipe(first())\n    .toPromise()\n\n  return workspace\n}\n\n/**\n * PRIMARILY FOR TESTING PURPOSES.\n *\n * This will create a fully resolved source from a config and optionally\n * allows a `client` and `currentUser` override. This exists primarily for\n * testing purposes. If you need to use a source, we recommend using the\n * `useSource` hook to grab the fully resolved source from the `StudioProvider`\n *\n * @internal\n */\nexport async function createSourceFromConfig(\n  options: CreateWorkspaceFromConfigOptions\n): Promise<Source> {\n  const workspace = await createWorkspaceFromConfig(options)\n  return workspace.unstable_sources[0]\n}\n","import {useMemo} from 'react'\nimport type {Source, ConfigContext} from './types'\n\n/**\n * Reduce a {@link Source} down to a {@link ConfigContext}, memoizing using `React.useMemo`\n *\n * @param source - Source to convert\n * @returns A config context containing only the defined properties of that interface\n * @internal\n */\nexport function useConfigContextFromSource(source: Source): ConfigContext {\n  const {projectId, dataset, schema, currentUser, getClient} = source\n  return useMemo(() => {\n    const client = getClient({apiVersion: '2021-06-07'})\n    const context = Object.defineProperty(\n      {projectId, dataset, schema, currentUser, getClient, client},\n      'client',\n      {\n        get() {\n          console.warn(\n            '`configContext.client` is deprecated and will be removed in the next version! Use `configContext.getClient({apiVersion: \"2021-06-07\"})` instead.'\n          )\n          return client\n        },\n      }\n    )\n    return context\n  }, [projectId, dataset, schema, currentUser, getClient])\n}\n\n/**\n * Reduce a {@link Source} down to a {@link ConfigContext}, without memoization - use for non-react contexts\n *\n * @param source - Source to convert\n * @returns A config context containing only the defined properties of that interface\n * @internal\n */\nexport function getConfigContextFromSource(source: Source): ConfigContext {\n  const {projectId, dataset, schema, currentUser, getClient} = source\n  const client = getClient({apiVersion: '2021-06-07'})\n  return {projectId, dataset, schema, currentUser, getClient, client}\n}\n","/* eslint-disable @typescript-eslint/ban-types */\n\nimport {ComponentType, createElement, Fragment, useMemo} from 'react'\nimport {useSource} from '../../studio'\nimport {PluginOptions} from '../types'\n\nconst emptyRender = () => createElement(Fragment)\n\nfunction _createMiddlewareComponent<T extends {}>(\n  defaultComponent: ComponentType<T>,\n  middlewareComponents: ComponentType<T>[]\n): ComponentType<T> {\n  return (outerProps: T) => {\n    // This is the inner \"layer\" of the middleware chain\n    // Here we render the _default_ component (typically Sanity's component)\n    let next = (props: T) => createElement(defaultComponent, props)\n\n    // Since the middleware array is actually a middleware _stack_ data structure, we are\n    // essentially looping backwards here. This makes it possible to define the _next_ layer for\n    // each layer.\n    for (const middleware of middlewareComponents) {\n      // As we progress through the chain, the meaning of \"renderDefault\" changes.\n      // At a given layer in the chain, the _next_ layer is the \"default\".\n      const renderDefault = next\n\n      // Here we replace `next` so that the _previous_ layer may use this as its _next_.\n      next = (props) => createElement(middleware, {...props, renderDefault})\n    }\n\n    return next({\n      ...outerProps,\n      // NOTE: it's safe to pass the empty render function, since it'll be overwritten in the next step (above).\n      // NOTE: it's important that the default component does not use `renderDefault`, since it will\n      // get the `emptyRender` callback will be passed when the middleware stack is empty.\n      renderDefault: emptyRender,\n    })\n  }\n}\n\nfunction _collectPluginValues<T>(\n  middleware: T[],\n  plugins: PluginOptions[],\n  pick: (p: PluginOptions) => T | undefined\n): void {\n  for (const plugin of plugins) {\n    const value = pick(plugin)\n\n    if (value) {\n      middleware.push(value)\n    }\n\n    if (plugin.plugins) {\n      _collectPluginValues(middleware, plugin.plugins, pick)\n    }\n  }\n}\n\nfunction _pickFromPluginOptions<T>(\n  plugin: PluginOptions,\n  pick: (p: PluginOptions) => T | undefined\n): T[] {\n  const _middleware: T[] = []\n\n  _collectPluginValues(_middleware, [plugin], pick)\n\n  return _middleware\n}\n\n/** @internal */\nexport function useMiddlewareComponents<T extends {}>(props: {\n  pick: (plugin: PluginOptions) => ComponentType<T>\n  defaultComponent: ComponentType<T>\n}): ComponentType<T> {\n  const {options} = useSource().__internal\n  const {defaultComponent, pick} = props\n\n  const middlewareComponents = useMemo(() => {\n    return _pickFromPluginOptions(options, pick)\n  }, [options, pick])\n\n  return useMemo(\n    () => _createMiddlewareComponent(defaultComponent, middlewareComponents),\n    [defaultComponent, middlewareComponents]\n  )\n}\n","import {Text} from '@sanity/ui'\nimport React from 'react'\nimport {LogoProps} from '../../../config'\n\n/** @beta */\nexport function StudioLogo(props: LogoProps) {\n  const {title} = props\n\n  return <Text weight=\"bold\">{title}</Text>\n}\n","/** @internal */\n// eslint-disable-next-line no-process-env\nexport const isDev = process.env.NODE_ENV !== 'production'\n\n/** @internal */\nexport const isProd = !isDev\n","import React, {createContext, useContext} from 'react'\nimport {Workspace} from '../config'\n\n/** @internal */\nexport interface WorkspaceProviderProps {\n  workspace: Workspace\n  children?: React.ReactChild\n}\nconst WorkspaceContext = createContext<Workspace | null>(null)\n\n/** @internal */\nexport function WorkspaceProvider({children, workspace}: WorkspaceProviderProps) {\n  return <WorkspaceContext.Provider value={workspace}>{children}</WorkspaceContext.Provider>\n}\n\n/** @beta */\nexport function useWorkspace(): Workspace {\n  const workspace = useContext(WorkspaceContext)\n\n  if (!workspace) throw new Error('Workspace: missing context value')\n\n  return workspace\n}\n","import React, {createContext, useContext, useEffect, useMemo, useState} from 'react'\nimport {studioTheme, ThemeColorSchemeKey, ThemeProvider, usePrefersDark} from '@sanity/ui'\n\n/** @internal */\nexport const ColorSchemeContext = createContext<{\n  scheme: ThemeColorSchemeKey\n  setScheme: (colorScheme: ThemeColorSchemeKey) => void\n} | null>(null)\n\n/** @internal */\nexport interface ColorSchemeProviderProps {\n  children: React.ReactNode\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n}\n\n/** @internal */\nexport function ColorSchemeProvider({\n  children,\n  onSchemeChange,\n  scheme: schemeProp,\n}: ColorSchemeProviderProps) {\n  const prefersDark = usePrefersDark()\n  const [scheme, setScheme] = useState<ThemeColorSchemeKey>(schemeProp || 'light')\n\n  // if the preferred color scheme changes, then react to this change\n  useEffect(() => {\n    const nextScheme = prefersDark ? 'dark' : 'light'\n    setScheme(nextScheme)\n    onSchemeChange?.(nextScheme)\n  }, [onSchemeChange, prefersDark])\n\n  const colorScheme = useMemo(() => ({scheme, setScheme}), [scheme])\n\n  return (\n    <ColorSchemeContext.Provider value={colorScheme}>\n      {/* Note: this is a fallback ThemeProvider that is for any components */}\n      {/* that may render before the StudioThemeProvider renders. this is */}\n      {/* required because the StudioThemeProvider has a dependence on the */}\n      {/* active workspace provided via the ActiveWorkspaceMatcher */}\n      <ThemeProvider scheme={scheme} theme={studioTheme} tone=\"transparent\">\n        {children}\n      </ThemeProvider>\n    </ColorSchemeContext.Provider>\n  )\n}\n\n/** @internal */\nexport function useColorScheme() {\n  const value = useContext(ColorSchemeContext)\n  if (!value) throw new Error('Could not find `colorScheme` context')\n  return value\n}\n","import {createContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\n\n/** @internal */\nexport type WorkspacesContextValue = WorkspaceSummary[]\n\n/** @internal */\nexport const WorkspacesContext = createContext<WorkspacesContextValue | null>(null)\n","import React, {useMemo} from 'react'\nimport {Config, prepareConfig} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\n/** @internal */\nexport interface WorkspacesProviderProps {\n  config: Config\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function WorkspacesProvider({config, children}: WorkspacesProviderProps) {\n  const {workspaces} = useMemo(() => prepareConfig(config), [config])\n  return <WorkspacesContext.Provider value={workspaces}>{children}</WorkspacesContext.Provider>\n}\n","import {WorkspaceLike} from './types'\n\n/**\n * Gets a printable identifer for the workspace - either the name, or the index\n * and any potential title set for it\n *\n * @param workspace - The workspace to get the indentifier for\n * @param index - The index at which the workspace appeared in the source array\n * @returns Printable string (eg `intranet`, or `at index 5 (titled \"Intranet\")`)\n * @internal\n */\nexport function getWorkspaceIdentifier({name, title}: WorkspaceLike, index: number): string {\n  if (typeof name === 'string' && name.trim().length > 0) {\n    return name\n  }\n\n  return getNamelessWorkspaceIdentifier(title, index)\n}\n\n/** @internal */\nexport function getNamelessWorkspaceIdentifier(title: string | undefined, index: number): string {\n  const withTitle =\n    typeof title === 'string' && title.trim().length > 0 ? ` (titled \"${title}\")` : ''\n  return `at index ${index}${withTitle}`\n}\n","import {useContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\n/** @internal */\nexport function useWorkspaces(): WorkspaceSummary[] {\n  const workspaces = useContext(WorkspacesContext)\n  if (!workspaces) throw new Error('Could not find `workspaces` context')\n  return workspaces\n}\n","import {getWorkspaceIdentifier} from './helpers'\nimport type {WorkspaceLike} from './types'\n\nexport interface WorkspaceValidationErrorOptions {\n  workspace: WorkspaceLike\n  index: number\n}\n\n/**\n * Thrown on workspace validation errors. Includes an identifier that is either the name of\n * the workspace, or in the case of a missing or invalid name, an index and a potential title\n */\nexport class WorkspaceValidationError extends Error {\n  index?: number\n  identifier?: string\n\n  constructor(message: string, options?: WorkspaceValidationErrorOptions) {\n    super(message)\n    this.index = options?.index\n    this.identifier = options?.workspace && getWorkspaceIdentifier(options.workspace, options.index)\n  }\n}\n","import {getWorkspaceIdentifier, getNamelessWorkspaceIdentifier} from './helpers'\nimport type {WorkspaceLike} from './types'\nimport {WorkspaceValidationError} from './WorkspaceValidationError'\n\n/** @internal */\nexport interface ValidateWorkspaceOptions {\n  workspaces: WorkspaceLike[]\n}\n\n/**\n * Validates workspace configuration, throwing if:\n *\n * - Workspaces do not all have base paths and names (if multiple given)\n * - Base paths or names are invalid\n * - Base paths or names are not unique\n *\n * @internal\n */\nexport function validateWorkspaces({workspaces}: ValidateWorkspaceOptions): void {\n  if (workspaces.length === 0) {\n    throw new WorkspaceValidationError('At least one workspace is required.')\n  }\n\n  validateNames(workspaces)\n  validateBasePaths(workspaces)\n}\n\n/**\n * Validates the workspace names of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateNames(workspaces: WorkspaceLike[]): void {\n  const isSingleWorkspace = workspaces.length === 1\n  const names = new Map<string, {index: number; workspace: WorkspaceLike}>()\n  workspaces.forEach((workspace, index) => {\n    const {name: rawName, title} = workspace\n    const thisIdentifier = getNamelessWorkspaceIdentifier(title, index)\n\n    if (!rawName && !isSingleWorkspace) {\n      throw new WorkspaceValidationError(\n        'All workspaces must have a `name`, unless only a single workspace is defined. ' +\n          `Workspace ${thisIdentifier} did not define a \\`name\\`.`,\n        {workspace, index}\n      )\n    }\n\n    const name = isSingleWorkspace && typeof rawName === 'undefined' ? 'default' : rawName\n\n    if (typeof name !== 'string') {\n      throw new WorkspaceValidationError(\n        `Workspace at index ${index} defined an invalid \\`name\\` - must be a string.`,\n        {workspace, index}\n      )\n    }\n\n    const normalized = name.toLowerCase()\n    const existingWorkspace = names.get(normalized)\n\n    if (existingWorkspace) {\n      const prevIdentifier = getNamelessWorkspaceIdentifier(\n        existingWorkspace.workspace.title,\n        existingWorkspace.index\n      )\n      throw new WorkspaceValidationError(\n        `\\`name\\`s must be unique. Workspace ${prevIdentifier} and ` +\n          `workspace ${thisIdentifier} both have the \\`name\\` \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n\n    names.set(normalized, {index, workspace})\n\n    if (!/^[a-z0-9][a-z0-9_-]*$/i.test(name)) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`name\\`s must consist of only a-z, 0-9, underscore and dashes, ` +\n          `and cannot begin with an underscore or dash. ` +\n          `Workspace ${thisIdentifier} has the invalid name \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n  })\n}\n\n/**\n * Validates the base paths of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateBasePaths(workspaces: WorkspaceLike[]): void {\n  // If we have more than a single workspace, every workspace needs a basepath\n  if (workspaces.length > 1) {\n    workspaces.every(hasBasePath) // Throws on missing basePath\n  }\n\n  workspaces.every(validateBasePath)\n\n  const [firstWorkspace, ...restOfWorkspaces] = workspaces\n  const firstWorkspaceSegmentCount = (firstWorkspace.basePath || '/')\n    // remove starting slash before splitting\n    .substring(1)\n    .split('/')\n    .filter(Boolean).length\n\n  restOfWorkspaces.forEach((workspace, index) => {\n    const workspaceSegmentCount = (workspace.basePath || '/')\n      // remove starting slash before splitting\n      .substring(1)\n      .split('/').length\n\n    if (firstWorkspaceSegmentCount !== workspaceSegmentCount) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`basePath\\`s must have the same amount of segments. Workspace \\`${getWorkspaceIdentifier(\n          firstWorkspace,\n          index\n        )}\\` had ${firstWorkspaceSegmentCount} segment${\n          firstWorkspaceSegmentCount === 1 ? '' : 's'\n        } \\`${firstWorkspace.basePath}\\` but workspace \\`${getWorkspaceIdentifier(\n          workspace,\n          index\n        )}\\` had ${workspaceSegmentCount} segment${workspaceSegmentCount === 1 ? '' : 's'} \\`${\n          workspace.basePath\n        }\\``,\n        {workspace, index}\n      )\n    }\n  })\n\n  const basePaths = new Map<string, string>()\n  workspaces.forEach((workspace, index) => {\n    const basePath = (workspace.basePath || '').toLowerCase()\n\n    const existingWorkspace = basePaths.get(basePath)\n    if (existingWorkspace) {\n      throw new WorkspaceValidationError(\n        `\\`basePath\\`s must be unique. Workspaces \\`${existingWorkspace}\\` and ` +\n          `\\`${getWorkspaceIdentifier(\n            workspace,\n            index\n          )}\\` both have the \\`basePath\\` \\`${basePath}\\``,\n        {workspace, index}\n      )\n    }\n\n    basePaths.set(basePath, getWorkspaceIdentifier(workspace, index))\n  })\n}\n\nfunction hasBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n  if (basePath && typeof basePath === 'string') {\n    return true\n  }\n\n  if (typeof basePath === 'undefined') {\n    throw new WorkspaceValidationError(\n      `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n        `Workspace \\`${name}\\` is missing a \\`basePath\\``,\n      {workspace, index}\n    )\n  }\n\n  throw new WorkspaceValidationError(\n    `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n      `Workspace \\`${name}\\` has an invalid \\`basePath\\` (must be a non-empty string)`,\n    {workspace, index}\n  )\n}\n\nfunction validateBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n\n  // Empty base paths are okay (we're validating uniqueness and presence on more\n  // than a single workspace in `validateBasePaths`)\n  if (!basePath || basePath === '/') {\n    return\n  }\n\n  if (!/^\\/[a-z0-9/_-]*[a-z0-9_-]+$/i.test(basePath)) {\n    throw new WorkspaceValidationError(\n      `All workspace \\`basePath\\`s must start with a leading \\`/\\`, ` +\n        `consist of only URL safe characters, ` +\n        `and cannot end with a trailing \\`/\\`. ` +\n        `Workspace \\`${name}\\`'s basePath is \\`${basePath}\\``,\n      {workspace, index}\n    )\n  }\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoToolsScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No configured tools!\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please configure a tool in your Studio configuration.\n                </Text>\n                <Text as=\"p\" hidden muted size={1}>\n                  <a href=\"\">Learn how to add a tool &rarr;</a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function ToolNotFoundScreen(props: {toolName: string}) {\n  const {toolName} = props\n\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  Tool not found: <code>{toolName}</code>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {Box, Button, Card, Code, ErrorBoundary, Flex, Heading, Spinner, Stack} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport React, {\n  createContext,\n  createElement,\n  Suspense,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react'\nimport styled from 'styled-components'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {NoToolsScreen} from './screens/NoToolsScreen'\nimport {ToolNotFoundScreen} from './screens/ToolNotFoundScreen'\nimport {useNavbarComponent} from './studio-components-hooks'\nimport {useWorkspace} from './workspace'\nimport {RouteScope, useRouter} from 'sanity/router'\n\nconst SearchFullscreenPortalCard = styled(Card)`\n  height: 100%;\n  left: 0;\n  overflow: hidden;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 200;\n`\n\n/** @internal */\nexport interface NavbarContextValue {\n  onSearchFullscreenOpenChange: (open: boolean) => void\n  searchFullscreenOpen: boolean\n  searchFullscreenPortalEl: HTMLElement | null\n}\n\n/** @internal */\nexport const NavbarContext = createContext<NavbarContextValue>({\n  onSearchFullscreenOpenChange: () => '',\n  searchFullscreenOpen: false,\n  searchFullscreenPortalEl: null,\n})\n\n/** @public */\nexport function StudioLayout() {\n  const {state: routerState} = useRouter()\n  const {name, title, tools} = useWorkspace()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n  const activeTool = tools.find((tool) => tool.name === activeToolName)\n  const [searchFullscreenOpen, setSearchFullscreenOpen] = useState<boolean>(false)\n  const [searchFullscreenPortalEl, setSearchFullscreenPortalEl] = useState<HTMLDivElement | null>(\n    null\n  )\n  const [toolError, setToolError] = useState<{error: Error; info: React.ErrorInfo} | null>(null)\n\n  const documentTitle = useMemo(() => {\n    const mainTitle = title || startCase(name)\n\n    if (activeToolName) {\n      return `${mainTitle}  ${startCase(activeToolName)}`\n    }\n\n    return mainTitle\n  }, [activeToolName, name, title])\n\n  useEffect(() => {\n    document.title = documentTitle\n  }, [documentTitle])\n\n  const handleSearchFullscreenOpenChange = useCallback((open: boolean) => {\n    setSearchFullscreenOpen(open)\n  }, [])\n\n  const resetToolError = useCallback(() => setToolError(null), [setToolError])\n\n  useEffect(resetToolError, [activeToolName, resetToolError])\n  useHotModuleReload(resetToolError)\n\n  const navbarContextValue = useMemo(\n    () => ({\n      searchFullscreenOpen,\n      searchFullscreenPortalEl,\n      onSearchFullscreenOpenChange: handleSearchFullscreenOpenChange,\n    }),\n    [searchFullscreenOpen, searchFullscreenPortalEl, handleSearchFullscreenOpenChange]\n  )\n\n  const Navbar = useNavbarComponent()\n\n  return (\n    <Flex data-ui=\"ToolScreen\" direction=\"column\" height=\"fill\" data-testid=\"studio-layout\">\n      <NavbarContext.Provider value={navbarContextValue}>\n        <Navbar />\n      </NavbarContext.Provider>\n\n      {tools.length === 0 && <NoToolsScreen />}\n\n      {tools.length > 0 && !activeTool && activeToolName && (\n        <ToolNotFoundScreen toolName={activeToolName} />\n      )}\n\n      {toolError && activeTool && (\n        <Card flex={1} overflow=\"auto\" padding={4} sizing=\"border\">\n          <Stack space={4}>\n            <Heading as=\"h1\">\n              The <code>{activeToolName}</code> tool crashed\n            </Heading>\n            <Box>\n              <Button onClick={resetToolError} text=\"Retry\" />\n            </Box>\n\n            <Card overflow=\"auto\" padding={3} tone=\"critical\" radius={2}>\n              <Code size={1}>{toolError.error.stack}</Code>\n            </Card>\n\n            <Card overflow=\"auto\" padding={3} tone=\"critical\" radius={2}>\n              <Code size={1}>{toolError.info.componentStack}</Code>\n            </Card>\n          </Stack>\n        </Card>\n      )}\n\n      {searchFullscreenOpen && (\n        <SearchFullscreenPortalCard ref={setSearchFullscreenPortalEl} overflow=\"auto\" />\n      )}\n\n      {!toolError && (\n        <Card flex={1} hidden={searchFullscreenOpen}>\n          {activeTool && activeToolName && (\n            <RouteScope scope={activeToolName}>\n              <ErrorBoundary onCatch={setToolError}>\n                <Suspense fallback={<LoadingTool />}>\n                  {createElement(activeTool.component, {tool: activeTool})}\n                </Suspense>\n              </ErrorBoundary>\n            </RouteScope>\n          )}\n        </Card>\n      )}\n    </Flex>\n  )\n}\n\nfunction LoadingTool() {\n  return (\n    <Flex align=\"center\" height=\"fill\" justify=\"center\">\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {SanityMonogram} from '@sanity/logos'\n\nconst Root = styled.div`\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  background: var(--card-bg-color);\n  bottom: -4px;\n  right: -4px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid var(--card-bg-color);\n  box-sizing: content-box;\n\n  svg {\n    box-sizing: content-box;\n    border: 1px solid var(--card-hairline-soft-color);\n    border-radius: 50%;\n    padding: 2px;\n    width: 12px;\n    height: 12px;\n  }\n\n  &[data-logo='github'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n\n  &[data-logo='saml'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n`\n\nconst Google = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M12 6.13764C12 5.72977 11.9663 5.31971 11.8943 4.91846H6.12036V7.22895H9.42684C9.28963 7.97412 8.84876 8.63332 8.20322 9.05221V10.5514H10.1759C11.3342 9.50637 12 7.9631 12 6.13764Z\"\n        fill=\"#4285F4\"\n      />\n      <path\n        d=\"M6.12019 12.0002C7.77118 12.0002 9.16349 11.4688 10.1779 10.5517L8.20529 9.05253C7.65646 9.41851 6.94793 9.62574 6.12244 9.62574C4.52544 9.62574 3.17136 8.56971 2.68552 7.1499H0.649902V8.69537C1.68908 10.7215 3.80567 12.0002 6.12019 12.0002V12.0002Z\"\n        fill=\"#34A853\"\n      />\n      <path\n        d=\"M2.68332 7.14986C2.4269 6.40469 2.4269 5.59778 2.68332 4.8526V3.30713H0.649951C-0.218278 5.00252 -0.218278 6.99995 0.649951 8.69533L2.68332 7.14986V7.14986Z\"\n        fill=\"#FBBC04\"\n      />\n      <path\n        d=\"M6.12019 2.37483C6.99291 2.3616 7.8364 2.68348 8.46845 3.27433L10.2161 1.56131C9.1095 0.542752 7.64071 -0.017233 6.12019 0.000404333C3.80566 0.000404333 1.68908 1.27911 0.649902 3.3074L2.68326 4.85288C3.16686 3.43087 4.52319 2.37483 6.12019 2.37483V2.37483Z\"\n        fill=\"#EA4335\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst GitHub = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M11.195 3.13503C10.6711 2.22838 9.91808 1.47537 9.01144 0.951471C8.09222 0.414976 7.08837 0.146729 5.99987 0.146729C4.91137 0.146729 3.90752 0.414976 2.98831 0.951471C2.08163 1.47534 1.32862 2.22836 0.804744 3.13503C0.268248 4.05497 0 5.05883 0 6.14659C0 7.45399 0.381531 8.62978 1.14459 9.67394C1.90765 10.7181 2.89327 11.4408 4.10143 11.8419C4.24208 11.868 4.34624 11.8497 4.41392 11.7872C4.44666 11.7577 4.47263 11.7215 4.49006 11.681C4.50749 11.6405 4.51595 11.5967 4.51488 11.5527C4.51488 11.537 4.51361 11.3963 4.51105 11.1307C4.5085 10.8651 4.50722 10.6334 4.50722 10.4355L4.32745 10.4666C4.18407 10.4895 4.03885 10.4986 3.89375 10.494C3.71159 10.4908 3.53001 10.4725 3.35087 10.4393C3.16049 10.4045 2.98119 10.3246 2.82796 10.2064C2.66705 10.0846 2.54715 9.91661 2.48428 9.72484L2.40602 9.54506C2.34022 9.40286 2.25754 9.2691 2.15976 9.14666C2.04775 9.00072 1.93447 8.90176 1.81991 8.84977L1.76518 8.81064C1.72769 8.78356 1.6936 8.75205 1.66367 8.71679C1.63479 8.6841 1.61108 8.64719 1.59334 8.60734C1.57766 8.57085 1.5907 8.54085 1.63247 8.51731C1.67461 8.49405 1.75123 8.48256 1.86068 8.48256L2.01692 8.50582C2.12108 8.52662 2.24996 8.5891 2.40356 8.69326C2.5585 8.79876 2.68797 8.93748 2.78254 9.09932C2.90239 9.31294 3.04695 9.47575 3.21624 9.58775C3.38552 9.69976 3.55609 9.75576 3.72793 9.75576C3.87725 9.7578 4.02641 9.74479 4.17312 9.7169C4.29459 9.69195 4.41264 9.65254 4.52473 9.59952C4.57162 9.25037 4.69931 8.98212 4.90782 8.79477C4.63684 8.76849 4.36827 8.72157 4.10444 8.6544C3.84797 8.58382 3.60133 8.48141 3.37029 8.34958C3.12825 8.218 2.91442 8.04015 2.74095 7.82613C2.57421 7.6178 2.4374 7.34417 2.3305 7.00524C2.2236 6.6663 2.1707 6.27584 2.1718 5.83383C2.1718 5.20357 2.37757 4.66708 2.7891 4.22435C2.59629 3.75006 2.61453 3.21885 2.84383 2.63073C2.99487 2.58385 3.21879 2.61897 3.51559 2.73608C3.81239 2.85319 4.02983 2.95352 4.16792 3.03707C4.30601 3.12025 4.41665 3.19058 4.49983 3.24804C5.48153 2.9773 6.51821 2.9773 7.49991 3.24804L7.79679 3.0606C8.0249 2.92356 8.26549 2.80849 8.51535 2.71693C8.79135 2.61276 9.00231 2.58412 9.14825 2.63101C9.38248 3.21949 9.40327 3.7507 9.21064 4.22462C9.62199 4.66735 9.82776 5.20385 9.82795 5.83411C9.82795 6.27684 9.77459 6.66904 9.66787 7.01071C9.56116 7.35238 9.42325 7.62601 9.25415 7.8316C9.07785 8.04326 8.86311 8.21966 8.62124 8.35149C8.39008 8.48329 8.14337 8.5857 7.88682 8.65632C7.62412 8.72277 7.35674 8.76915 7.087 8.79505C7.35698 9.02927 7.49206 9.3994 7.49225 9.90543V11.5527C7.49115 11.5964 7.49929 11.6398 7.51612 11.6802C7.53295 11.7206 7.5581 11.7569 7.58993 11.7869C7.65505 11.8493 7.75794 11.8675 7.89858 11.8416C9.10693 11.4403 10.0926 10.7177 10.8557 9.67367C11.6188 8.62968 12.0003 7.4539 12.0003 6.14632C11.9997 5.05873 11.7313 4.05497 11.195 3.13503V3.13503Z\"\n        fill=\"black\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst Saml = (\n  <svg width=\"17\" height=\"9\" viewBox=\"0 0 17 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0.0691681 5.98162C0.115833 7.24157 1.07247 8.00221 2.59841 8.00221C4.17102 8.00221 5.12299 7.19957 5.12299 5.86962C5.12299 4.83832 4.55367 4.25501 3.25172 3.96569L2.56108 3.80703C1.8331 3.64837 1.53445 3.38704 1.53445 2.91106C1.53445 2.40708 1.94977 2.09442 2.61708 2.09442C3.27505 2.09442 3.6997 2.43508 3.75103 2.99039H5.00166C4.95966 1.78643 4.01236 0.997795 2.60308 0.997795C1.14713 0.997795 0.218496 1.79577 0.218496 3.05105C0.218496 4.04968 0.815808 4.69366 2.03376 4.96898L2.73374 5.13231C3.51304 5.30497 3.8117 5.54763 3.8117 6.00495C3.8117 6.55093 3.34972 6.90092 2.62174 6.90092C1.85644 6.90092 1.38045 6.56493 1.31979 5.98162H0.0691681Z\" />\n    <path d=\"M5.97695 5.98162C6.02362 7.24157 6.98025 8.00221 8.5062 8.00221C10.0788 8.00221 11.0308 7.19957 11.0308 5.86962C11.0308 4.83832 10.4615 4.25501 9.15951 3.96569L8.46886 3.80703C7.74089 3.64837 7.44223 3.38704 7.44223 2.91106C7.44223 2.40708 7.85755 2.09442 8.52486 2.09442C9.18284 2.09442 9.60749 2.43508 9.65882 2.99039H10.9094C10.8674 1.78643 9.92015 0.997795 8.51086 0.997795C7.05492 0.997795 6.12628 1.79577 6.12628 3.05105C6.12628 4.04968 6.72359 4.69366 7.94155 4.96898L8.64153 5.13231C9.42083 5.30497 9.71949 5.54763 9.71949 6.00495C9.71949 6.55093 9.2575 6.90092 8.52953 6.90092C7.76422 6.90092 7.28824 6.56493 7.22758 5.98162H5.97695Z\" />\n    <path d=\"M16.9852 5.01565V3.98435C16.9852 2.11309 16.0099 0.997795 14.3953 0.997795C12.7807 0.997795 11.8054 2.11309 11.8054 3.98435V5.01565C11.8054 6.88692 12.7807 8.00221 14.3953 8.00221C16.0099 8.00221 16.9852 6.88692 16.9852 5.01565ZM14.3953 6.82625C13.5833 6.82625 13.154 6.21494 13.154 5.00165V3.99835C13.154 2.78506 13.5833 2.17375 14.3953 2.17375C15.2073 2.17375 15.6366 2.78506 15.6366 3.99835V5.00165C15.6366 6.21494 15.2073 6.82625 14.3953 6.82625Z\" />\n  </svg>\n)\n\ninterface Props {\n  provider: string | undefined\n}\n\nexport const LoginProviderLogo = ({provider}: Props) => {\n  const isSaml = provider?.startsWith('saml-')\n  const logoName = isSaml ? 'saml' : provider\n\n  return (\n    <Root data-logo={logoName}>\n      {provider === 'google' && Google}\n      {provider === 'github' && GitHub}\n      {provider === 'sanity' && <SanityMonogram />}\n      {isSaml && Saml}\n    </Root>\n  )\n}\n","import {SunIcon, MoonIcon, LeaveIcon, ChevronDownIcon, CogIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Label,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n  Tooltip,\n  useRootTheme,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components'\nimport {getProviderTitle} from '../../../../store'\nimport {StudioTheme} from '../../../../theme'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {LoginProviderLogo} from './LoginProviderLogo'\n\nconst StyledMenu = styled(Menu)`\n  min-width: 125px;\n  max-width: 350px;\n`\n\nconst AvatarBox = styled(Box)`\n  position: relative;\n`\n\nexport function UserMenu() {\n  const {currentUser, projectId, auth} = useWorkspace()\n  const theme = useRootTheme().theme as StudioTheme\n  const {scheme, setScheme} = useColorScheme()\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({\n      placement: 'bottom',\n      portal: true,\n      preventOverflow: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  const handleToggleScheme = useCallback(() => {\n    setScheme(scheme === 'dark' ? 'light' : 'dark')\n  }, [scheme, setScheme])\n\n  return (\n    <MenuButton\n      button={\n        <Button mode=\"bleed\" padding={0} paddingX={1}>\n          <Flex align=\"center\" gap={1}>\n            <UserAvatar user=\"me\" size={1} />\n            <Text size={1} muted>\n              <ChevronDownIcon />\n            </Text>\n          </Flex>\n        </Button>\n      }\n      id=\"user-menu\"\n      menu={\n        <StyledMenu>\n          <Card padding={2}>\n            <Box marginBottom={3}>\n              <Label size={1} muted>\n                Signed in as\n              </Label>\n            </Box>\n\n            <Flex align=\"center\">\n              <Tooltip\n                disabled={!providerTitle}\n                portal\n                content={\n                  providerTitle && (\n                    <Box padding={2}>\n                      <Text size={1}>Signed in with {providerTitle}</Text>\n                    </Box>\n                  )\n                }\n              >\n                <AvatarBox marginRight={3}>\n                  <UserAvatar size={1} user=\"me\" />\n                  {currentUser?.provider && <LoginProviderLogo provider={currentUser.provider} />}\n                </AvatarBox>\n              </Tooltip>\n\n              <Stack space={2} flex={1}>\n                <Text size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n                  {currentUser?.name}\n                </Text>\n\n                <Text size={1} muted textOverflow=\"ellipsis\">\n                  {currentUser?.email}\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n\n          {!theme?.__legacy && (\n            <>\n              <MenuDivider />\n\n              <MenuItem\n                icon={scheme === 'dark' ? SunIcon : MoonIcon}\n                onClick={handleToggleScheme}\n                text={scheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}\n              />\n            </>\n          )}\n\n          <MenuDivider />\n\n          <MenuItem\n            as=\"a\"\n            href={`https://sanity.io/manage/project/${projectId}`}\n            target=\"_blank\"\n            text=\"Manage project\"\n            icon={CogIcon}\n          />\n\n          {auth.logout && (\n            <>\n              <MenuDivider />\n              <MenuItem\n                iconRight={LeaveIcon}\n                text=\"Sign out\"\n                disabled={!auth.logout}\n                {...(auth.logout && {onClick: auth.logout})}\n              />\n            </>\n          )}\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import React, {createContext, useContext} from 'react'\nimport {Source} from '../config'\nimport {useWorkspace} from './workspace'\n\n/** @internal */\nexport type SourceProviderProps =\n  | {source: Source; children?: React.ReactNode}\n  | {name: string; children?: React.ReactNode}\n\nconst SourceContext = createContext<Source | null>(null)\n\n/** @internal */\nexport function SourceProvider({children, ...props}: SourceProviderProps) {\n  const parentSource = useContext(SourceContext)\n  const {unstable_sources: sources} = useWorkspace()\n\n  if ('source' in props) {\n    const {source} = props\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  if ('name' in props) {\n    const {name} = props\n    const source = sources.find((s) => s.name === name)\n    if (!source) {\n      throw new Error(`Could not find source with name \\`${name}\\` in current workspace`)\n    }\n    if (parentSource === source) return <>{children}</>\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  throw new Error(\n    'Invalid props passed into SourceProvider. A `name` or a `source` object is required.'\n  )\n}\n\n/**\n * @internal\n * @deprecated INTERNAL USE ONLY\n */\nexport function useSource(): Source {\n  const source = useContext(SourceContext)\n  if (!source) throw new Error('Could not find `source` context')\n  return source\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Dialog, Grid, Button, Flex, Box, Tooltip, Spinner, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {ComposeIcon} from '@sanity/icons'\nimport {useSource} from '../../source'\nimport {useColorScheme} from '../../colorScheme'\nimport {TemplatePermissionsResult, useTemplatePermissions} from '../../../store'\nimport {DefaultPreview, InsufficientPermissionsMessage} from '../../../components'\nimport {IntentLink} from 'sanity/router'\n\nconst DocumentButton = styled(Button)`\n  text-decoration: none;\n`\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 300px;\n`\n\nconst DisabledButtonWrapper = styled.div`\n  & > * {\n    width: 100%;\n  }\n`\n\nexport function NewDocumentButton() {\n  const [newDocumentButtonEl, setNewDocumentButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [open, setOpen] = useState<boolean>(false)\n\n  const {scheme} = useColorScheme()\n\n  const {\n    __internal: {staticInitialValueTemplateItems},\n    currentUser,\n  } = useSource()\n\n  const [permissions, loading] = useTemplatePermissions({\n    templateItems: staticInitialValueTemplateItems,\n  })\n\n  const keyedPermissions = useMemo(() => {\n    if (!permissions) return {}\n    return permissions.reduce<Record<string, TemplatePermissionsResult>>((acc, next) => {\n      acc[next.id] = next\n      return acc\n    }, {})\n  }, [permissions])\n\n  const hasNewDocumentOptions = staticInitialValueTemplateItems.length > 0\n\n  const canCreateDocument = staticInitialValueTemplateItems.some(\n    (t) => keyedPermissions[t.id]?.granted\n  )\n\n  const tooltipContent = useMemo(() => {\n    if (!hasNewDocumentOptions) {\n      return <Text size={1}>No document types</Text>\n    }\n\n    if (canCreateDocument) {\n      return <Text size={1}>New document...</Text>\n    }\n\n    return (\n      <InsufficientPermissionsMessage\n        currentUser={currentUser}\n        operationLabel=\"create any document\"\n      />\n    )\n  }, [canCreateDocument, currentUser, hasNewDocumentOptions])\n\n  const handleOpen = useCallback(() => {\n    setOpen(true)\n  }, [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n    newDocumentButtonEl?.focus()\n  }, [newDocumentButtonEl])\n\n  const handleLinkClick = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  return (\n    <>\n      <Tooltip\n        content={<TooltipContentBox padding={2}>{tooltipContent}</TooltipContentBox>}\n        disabled={loading}\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            aria-label=\"New document\"\n            disabled={!canCreateDocument || !hasNewDocumentOptions || loading}\n            icon={ComposeIcon}\n            mode=\"bleed\"\n            onClick={handleOpen}\n            ref={setNewDocumentButtonEl}\n            style={{\n              cursor: !canCreateDocument || !hasNewDocumentOptions ? 'not-allowed' : undefined,\n            }}\n          />\n        </Box>\n      </Tooltip>\n\n      {open && (\n        <Dialog\n          header=\"New document\"\n          id=\"new-document-dialog\"\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          scheme={scheme}\n          width={2}\n        >\n          {loading && (\n            <Flex padding={4} align=\"center\" justify=\"center\">\n              <Spinner muted aria-label=\"Loading\" />\n            </Flex>\n          )}\n\n          {!loading && (\n            <Grid padding={4} columns={[1, 1, 2, 3]} gap={3}>\n              {staticInitialValueTemplateItems.map((template) => {\n                if (keyedPermissions[template.id]?.granted) {\n                  return (\n                    <DocumentButton\n                      forwardedAs={IntentLink}\n                      intent=\"create\"\n                      key={template.id}\n                      mode=\"ghost\"\n                      onClick={handleLinkClick}\n                      padding={2}\n                      params={{template: template.templateId, type: template.schemaType}}\n                    >\n                      <DefaultPreview\n                        media={template.icon}\n                        subtitle={template.subtitle}\n                        title={template.title}\n                      />\n                    </DocumentButton>\n                  )\n                }\n\n                return (\n                  <Tooltip\n                    key={template.id}\n                    content={\n                      <TooltipContentBox padding={2}>\n                        <InsufficientPermissionsMessage\n                          currentUser={currentUser}\n                          operationLabel=\"create this document\"\n                        />\n                      </TooltipContentBox>\n                    }\n                  >\n                    {/* this wrapper is required for the tooltip to show up */}\n                    <DisabledButtonWrapper>\n                      <DocumentButton key={template.id} mode=\"ghost\" padding={2} disabled>\n                        <DefaultPreview\n                          media={template.icon}\n                          subtitle={template.subtitle}\n                          title={template.title}\n                        />\n                      </DocumentButton>\n                    </DisabledButtonWrapper>\n                  </Tooltip>\n                )\n              })}\n            </Grid>\n          )}\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import {Button, ButtonTone, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nconst dot = css`\n  &:after {\n    content: '';\n    width: 6px;\n    height: 6px;\n    background-color: var(--status-button-dot-bg);\n    position: absolute;\n    top: 0;\n    right: 0;\n    border-radius: 50%;\n    transform: translate(-7px, 7px);\n    border: 1px solid var(--card-bg-color);\n  }\n`\n\nexport const StatusButton = styled(Button)(\n  ({theme, active, statusTone}: {theme: Theme; active: boolean; statusTone: ButtonTone}) => {\n    const {color} = theme.sanity\n\n    const tone = color.selectable && color.selectable[statusTone].selected.bg\n    const showDot = active && tone\n\n    return css`\n      position: relative;\n      --status-button-dot-bg: ${tone};\n\n      ${showDot && dot}\n    `\n  }\n)\n","import React, {forwardRef, memo, useCallback, useEffect, useMemo, useState} from 'react'\nimport {orderBy} from 'lodash'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Card, Flex, MenuItem, Text} from '@sanity/ui'\nimport {LinkIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {GlobalPresence} from '../../../../store'\nimport {UserAvatar} from '../../../../components'\nimport {IntentLink} from 'sanity/router'\n\nconst AvatarCard = styled(Card)`\n  background: transparent;\n  margin: calc((-35px + 11px) / 2);\n`\n\ninterface PresenceListRowProps {\n  focused: boolean\n  onFocus: (id: string) => void\n  presence: GlobalPresence\n}\n\nexport const PresenceMenuItem = memo(function PresenceMenuItem(props: PresenceListRowProps) {\n  const {presence, focused, onFocus} = props\n  const [menuItemElement, setMenuItemElement] = useState<HTMLElement | null>(null)\n\n  const lastActiveLocation = orderBy(presence.locations || [], ['lastActiveAt'], ['desc']).find(\n    (location) => location.documentId\n  )\n  const hasLink = Boolean(lastActiveLocation?.documentId)\n\n  /**\n   * This is a workaround to keep focus on the selected menu item\n   * when the list of users in the menu is updated\n   */\n  useEffect(() => {\n    if (focused && menuItemElement) {\n      menuItemElement.focus()\n      menuItemElement.setAttribute('data-selected', '')\n    }\n\n    if (!focused) {\n      menuItemElement?.removeAttribute('data-selected')\n    }\n  }, [menuItemElement, focused])\n\n  const handleFocus = useCallback(() => {\n    onFocus(presence.user.id)\n  }, [onFocus, presence.user.id])\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        if (!lastActiveLocation?.path) return null\n\n        return (\n          <IntentLink\n            {...linkProps}\n            intent=\"edit\"\n            params={{\n              id: lastActiveLocation?.documentId,\n              path: PathUtils.toString(lastActiveLocation?.path),\n            }}\n            ref={ref}\n          />\n        )\n      }),\n    [lastActiveLocation]\n  )\n\n  return (\n    <MenuItem\n      as={lastActiveLocation ? LinkComponent : 'div'}\n      data-as={lastActiveLocation ? 'a' : 'div'}\n      onFocus={handleFocus}\n      padding={4}\n      paddingRight={3}\n      ref={setMenuItemElement}\n    >\n      <Flex align=\"center\">\n        <AvatarCard>\n          <UserAvatar size={1} key={presence.user.id} user={presence.user} />\n        </AvatarCard>\n\n        <Box flex={1} marginLeft={4}>\n          <Text textOverflow=\"ellipsis\">{presence.user.displayName}</Text>\n        </Box>\n\n        {hasLink && (\n          <Box marginLeft={3}>\n            <Text>\n              <LinkIcon />\n            </Text>\n          </Box>\n        )}\n      </Flex>\n    </MenuItem>\n  )\n})\n","import {CogIcon, UsersIcon} from '@sanity/icons'\nimport {\n  AvatarStack,\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components'\nimport {useGlobalPresence} from '../../../../store'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {StatusButton} from '../../StatusButton'\nimport {PresenceMenuItem} from './PresenceMenuItem'\n\nconst MAX_AVATARS = 4\n\nconst AvatarStackCard = styled(Card)`\n  background: transparent;\n`\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nconst FooterStack = styled(Stack)`\n  position: sticky;\n  bottom: 0;\n`\n\ninterface PresenceMenuProps {\n  collapse?: boolean\n}\n\nexport function PresenceMenu(props: PresenceMenuProps) {\n  const {collapse} = props\n  const presence = useGlobalPresence()\n  const {projectId} = useWorkspace()\n  const {scheme} = useColorScheme()\n  const hasPresence = presence.length > 0\n\n  /**\n   * This id is used as a workaround to keep focus on the selected menu item\n   * when the list of users in the menu is updated\n   */\n  const [focusedId, setFocusedId] = useState<string>()\n\n  const handleItemFocus = useCallback((id: string) => {\n    setFocusedId(id)\n  }, [])\n\n  const handleClearFocusedItem = useCallback(() => {\n    setFocusedId('')\n  }, [])\n\n  const button = useMemo(() => {\n    if (collapse) {\n      return (\n        <StatusButton icon={UsersIcon} mode=\"bleed\" active={hasPresence} statusTone=\"positive\" />\n      )\n    }\n\n    return (\n      <Button mode=\"bleed\" padding={1}>\n        <AvatarStackCard>\n          <AvatarStack maxLength={MAX_AVATARS}>\n            {presence.map((item) => (\n              <UserAvatar key={item.user.id} user={item.user} />\n            ))}\n          </AvatarStack>\n        </AvatarStackCard>\n      </Button>\n    )\n  }, [collapse, hasPresence, presence])\n\n  const popoverProps = useMemo(\n    () => ({\n      constrainSize: true,\n      portal: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      button={button}\n      id=\"global-presence-menu\"\n      onClose={handleClearFocusedItem}\n      menu={\n        <StyledMenu padding={1}>\n          {hasPresence && (\n            <Stack space={2}>\n              {presence.map((item) => (\n                <PresenceMenuItem\n                  focused={focusedId === item.user.id}\n                  key={item.user.id}\n                  onFocus={handleItemFocus}\n                  presence={item}\n                />\n              ))}\n            </Stack>\n          )}\n\n          {!hasPresence && (\n            <Box paddingX={3} paddingY={4}>\n              <Stack space={3}>\n                <Text weight=\"semibold\" size={2}>\n                  No one else is here\n                </Text>\n\n                <Text size={1} muted>\n                  Invite people to the project to see their online status.\n                </Text>\n              </Stack>\n            </Box>\n          )}\n\n          <FooterStack space={1}>\n            <MenuDivider />\n\n            <MenuItem\n              as=\"a\"\n              href={`https://sanity.io/manage/project/${projectId}`}\n              iconRight={CogIcon}\n              onFocus={handleClearFocusedItem}\n              paddingY={4}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              text=\"Manage members\"\n            />\n          </FooterStack>\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {createContext} from 'react'\nimport {History} from 'history'\nimport {WorkspaceSummary} from '../../config'\n\n/** @internal */\nexport interface ActiveWorkspaceMatcherContextValue {\n  activeWorkspace: WorkspaceSummary\n  setActiveWorkspace: (workspaceName: string) => void\n  /**\n   * @deprecated internal use only\n   */\n  __internal: {\n    history: History\n  }\n}\n\n/** @internal */\nexport const ActiveWorkspaceMatcherContext =\n  createContext<ActiveWorkspaceMatcherContextValue | null>(null)\n","import {escapeRegExp} from 'lodash'\nimport {WorkspaceLike} from '../workspaces'\n\n/** @internal */\nexport interface MatchWorkspaceOptions<TWorkspace extends WorkspaceLike> {\n  workspaces: TWorkspace[]\n  pathname: string\n}\n\n/** @internal */\nexport type MatchWorkspaceResult<TWorkspace extends WorkspaceLike> =\n  | {type: 'match'; workspace: TWorkspace}\n  | {type: 'redirect'; pathname: string}\n  | {type: 'not-found'}\n\n/**\n * Given a pathname and a list of workspaces, returns either a workspace match,\n * a redirect, or not-found.\n *\n * Throws if the workspace `basePaths` could result in ambiguous matches.\n *\n * @internal\n */\nexport function matchWorkspace<TWorkspace extends WorkspaceLike>({\n  pathname,\n  workspaces,\n}: MatchWorkspaceOptions<TWorkspace>): MatchWorkspaceResult<TWorkspace> {\n  const normalized = workspaces.map((workspace) => ({\n    workspace,\n    name: workspace.name,\n    basePath: workspace.basePath || '/',\n  }))\n\n  const [firstWorkspace] = normalized\n  for (const {workspace, basePath} of normalized) {\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    // e.g. if the `workspace.basePath` is `/base/foobar` and the current\n    // pathname is `/base/foo`, then that should not be a match\n    if (new RegExp(`^${escapeRegExp(basePath)}(\\\\/|$)`, 'i').test(pathname) || basePath === '/') {\n      return {type: 'match', workspace}\n    }\n  }\n\n  const workspaceSegments = normalized.map((workspace) =>\n    // gets the segments from the basePath\n    workspace.basePath\n      // removes the leading `/`\n      .substring(1)\n      .split('/')\n  )\n\n  // if the pathname is only a leading slash, then return a redirect\n  if (pathname === '/') {\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // this common base path is used to check if we should redirect. it's the base\n  // path that is common between all the workspaces.\n  const commonBasePath = workspaceSegments.reduce((commonSegments, segments) => {\n    for (let i = 0; i < commonSegments.length; i++) {\n      const commonSegment = commonSegments[i]\n      const segment = segments[i].toLowerCase()\n\n      if (commonSegment !== segment) {\n        return commonSegments.slice(0, i)\n      }\n    }\n\n    return commonSegments\n  })\n\n  // recursively creates a matching expression\n  // `/foo/bar/baz` becomes `(\\/foo(\\/bar(\\/baz(\\/|$))?(\\/|$))?(\\/|$))?`\n  function createCommonBasePathRegex([first, ...rest]: string[]): string {\n    if (!first) return ''\n    return `(\\\\/${escapeRegExp(first)}${createCommonBasePathRegex(rest)}(\\\\/|$))?`\n  }\n\n  if (new RegExp(`^${createCommonBasePathRegex(commonBasePath)}$`, 'i').test(pathname)) {\n    // redirect to the first workspace configured\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // if the pathname was not a subset of the common base path, then the route\n  // the user is looking for is not present and we should show some sort of 404\n  // screen\n  return {type: 'not-found'}\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {History, createBrowserHistory, createMemoryHistory} from 'history'\nimport {Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {useWorkspaces} from '../workspaces'\nimport {WorkspaceSummary} from '../../config'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\nimport {matchWorkspace} from './matchWorkspace'\n\n/** @internal */\nexport interface ActiveWorkspaceMatcherProps {\n  children?: React.ReactChild\n  unstable_history?: History\n  NotFoundComponent: React.ComponentType<{onNavigateToDefaultWorkspace: () => void}>\n  LoadingComponent: React.ComponentType\n}\n\nconst createHistory = () =>\n  typeof document === 'undefined' ? createMemoryHistory() : createBrowserHistory()\n\n/** @internal */\nexport function ActiveWorkspaceMatcher({\n  children,\n  LoadingComponent,\n  NotFoundComponent,\n  unstable_history: historyProp,\n}: ActiveWorkspaceMatcherProps) {\n  const [error, setError] = useState<unknown>(null)\n\n  // Throw error to closest error boundary\n  if (error) throw error\n\n  const workspaces = useWorkspaces()\n\n  const [activeWorkspace, setActiveWorkspace] = useState<WorkspaceSummary | null>(null)\n  const [notFound, setNotFound] = useState(false)\n\n  const history = useMemo(() => historyProp || createHistory(), [historyProp])\n\n  useEffect(() => {\n    const pathname$ = new Observable<string>((observer) => {\n      const unlisten = history.listen((location) => observer.next(location.pathname))\n\n      // Emit initial pathname\n      observer.next(history.location.pathname || '/')\n\n      return unlisten\n    })\n\n    const subscription = pathname$\n      .pipe(map((pathname) => matchWorkspace({pathname, workspaces})))\n      .subscribe({\n        error: setError,\n        next: (result) => {\n          if (result.type === 'match') {\n            setNotFound(false)\n            setActiveWorkspace(result.workspace)\n          }\n\n          if (result.type === 'redirect') {\n            history.replace(result.pathname)\n          }\n\n          if (result.type === 'not-found') {\n            setNotFound(true)\n          }\n        },\n      })\n\n    return () => subscription.unsubscribe()\n  }, [history, workspaces])\n\n  const setActiveWorkspaceName = useCallback(\n    (workspaceName: string) => {\n      const foundWorkspace = workspaces.find((workspace) => workspace.name === workspaceName)\n      if (foundWorkspace) {\n        history.push(foundWorkspace.basePath)\n      }\n    },\n    [history, workspaces]\n  )\n\n  const defaultWorkspaceName = workspaces[0].name\n  const handleNavigateToDefaultWorkspace = useCallback(() => {\n    setActiveWorkspaceName(defaultWorkspaceName)\n  }, [setActiveWorkspaceName, defaultWorkspaceName])\n\n  const value = useMemo(\n    () => ({\n      __internal: {history},\n      activeWorkspace,\n      setActiveWorkspace: setActiveWorkspaceName,\n    }),\n    [history, activeWorkspace, setActiveWorkspaceName]\n  )\n\n  if (notFound) {\n    return <NotFoundComponent onNavigateToDefaultWorkspace={handleNavigateToDefaultWorkspace} />\n  }\n\n  if (!value.activeWorkspace) {\n    return <LoadingComponent />\n  }\n\n  return (\n    <ActiveWorkspaceMatcherContext.Provider value={value as ActiveWorkspaceMatcherContextValue}>\n      {children}\n    </ActiveWorkspaceMatcherContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\n\n/** @internal */\nexport function useActiveWorkspace(): ActiveWorkspaceMatcherContextValue {\n  const value = useContext(ActiveWorkspaceMatcherContext)\n  if (!value) throw new Error('Could not find `ActiveWorkspaceMatcher` context')\n  return value\n}\n","import {CheckmarkIcon} from '@sanity/icons'\nimport {Flex, Stack, Box, Text, Card} from '@sanity/ui'\nimport React, {createElement, isValidElement, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport styled from 'styled-components'\n\nconst STATE_TITLES = {\n  'logged-in': '',\n  'logged-out': 'Signed out',\n  'no-access': '',\n}\n\nexport const MediaCard = styled(Card)`\n  width: 35px;\n  height: 35px;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst createIcon = (icon: React.ComponentType | React.ReactNode) => {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return undefined\n}\n\nexport interface WorkspacePreviewProps {\n  icon?: React.ComponentType | React.ReactNode\n  iconRight?: React.ComponentType | React.ReactNode\n  selected?: boolean\n  state?: 'logged-in' | 'logged-out' | 'no-access'\n  subtitle?: string\n  title: string\n}\n\nexport function WorkspacePreview(props: WorkspacePreviewProps) {\n  const {state, subtitle, selected, title, icon, iconRight} = props\n\n  const iconComponent = useMemo(() => createIcon(icon), [icon])\n  const iconRightComponent = useMemo(() => createIcon(iconRight), [iconRight])\n\n  return (\n    <Flex align=\"center\" flex=\"none\" gap={3}>\n      <MediaCard radius={2} tone=\"transparent\">\n        {iconComponent}\n      </MediaCard>\n\n      <Stack flex={1} space={2}>\n        <Text textOverflow=\"ellipsis\" weight=\"medium\">\n          {title}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\">\n            {subtitle}\n          </Text>\n        )}\n      </Stack>\n\n      {state && STATE_TITLES[state] && (\n        <Box paddingLeft={1}>\n          <Text size={1} muted textOverflow=\"ellipsis\">\n            {STATE_TITLES[state]}\n          </Text>\n        </Box>\n      )}\n\n      {(selected || iconRightComponent) && (\n        <Flex align=\"center\" gap={4} paddingLeft={3} paddingRight={2}>\n          {selected && (\n            <Text size={1} muted>\n              <CheckmarkIcon />\n            </Text>\n          )}\n\n          {iconRightComponent && (\n            <Text size={1} muted>\n              {iconRightComponent}\n            </Text>\n          )}\n        </Flex>\n      )}\n    </Flex>\n  )\n}\n","import {map} from 'rxjs/operators'\nimport {combineLatest} from 'rxjs'\nimport {WorkspaceSummary} from '../../../../../config'\nimport {createHookFromObservableFactory} from '../../../../../util'\n\nexport const useWorkspaceAuthStates = createHookFromObservableFactory(\n  (workspaces: WorkspaceSummary[]) =>\n    combineLatest(\n      workspaces.map((workspace) =>\n        // eslint-disable-next-line max-nested-callbacks\n        workspace.auth.state.pipe(map((state) => [workspace.name, state] as const))\n      )\n    ).pipe(map((entries) => Object.fromEntries(entries)))\n)\n","import React from 'react'\nimport {Flex, Spinner, Card, Text} from '@sanity/ui'\n\nexport function LoadingScreen() {\n  return (\n    // TODO: improve the design of this\n    // think about having it load in the `_document` too\n    <Flex\n      // TODO: currently this card is here to accommodate dark mode vs light\n      // mode backgrounds, however that logic should probably exist globally\n      as={Card}\n      justify=\"center\"\n      align=\"center\"\n      height=\"fill\"\n      direction=\"column\"\n      gap={4}\n    >\n      <Text muted>Loading</Text>\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Breadcrumbs, Card, Flex, Stack, Text, ThemeColorToneKey} from '@sanity/ui'\nimport {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SchemaValidationProblemGroup} from '@sanity/types'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {capitalize} from 'lodash'\n\nconst TONES: Record<'error' | 'warning', ThemeColorToneKey> = {\n  error: 'critical',\n  warning: 'caution',\n}\n\nconst SegmentSpan = styled.code`\n  && {\n    background: none;\n    color: inherit;\n  }\n`\n\nconst ErrorMessageText = styled(Text)`\n  white-space: pre-line;\n`\n\nexport function SchemaProblemGroups(props: {problemGroups: SchemaValidationProblemGroup[]}) {\n  const {problemGroups} = props\n\n  const items = useMemo(() => {\n    const ret = []\n\n    for (const problemGroup of problemGroups) {\n      for (const problem of problemGroup.problems) {\n        ret.push({group: problemGroup, problem})\n      }\n    }\n\n    return ret\n  }, [problemGroups])\n\n  return (\n    <Stack as=\"ul\" space={4}>\n      {items.map(({group, problem}, i) => {\n        const isError = problem.severity === 'error'\n        const isWarning = problem.severity === 'warning'\n        const schemaType = getTypeInfo(group)\n        return (\n          <Card border key={i} padding={4} radius={2} tone={TONES[problem.severity]}>\n            <Flex>\n              <Box marginRight={3}>\n                <Text muted size={1}>\n                  {isError && <ErrorOutlineIcon />}\n                  {isWarning && <WarningOutlineIcon />}\n                </Text>\n              </Box>\n\n              <Box flex={1}>\n                <Text size={1} weight=\"semibold\">\n                  {schemaType ? (\n                    <>\n                      {capitalize(schemaType.type)} type \"{schemaType.name}\"\n                    </>\n                  ) : null}\n                </Text>\n              </Box>\n            </Flex>\n            <Box marginTop={4}>\n              <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n                <Breadcrumbs\n                  separator={\n                    <Text muted size={1}>\n                      &rarr;\n                    </Text>\n                  }\n                >\n                  {group.path.map((segment, j) => {\n                    if (segment.kind === 'type') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{`${_renderSegmentName(segment.name)}:${\n                            segment.type\n                          }`}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    if (segment.kind === 'property') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{segment.name}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    return null\n                  })}\n                </Breadcrumbs>\n              </Card>\n            </Box>\n\n            <Box as=\"ul\" marginTop={4}>\n              <Box as=\"li\">\n                <Stack space={3}>\n                  <ErrorMessageText muted size={1}>\n                    {problem.message}\n                  </ErrorMessageText>\n\n                  {problem.helpId && (\n                    <Text muted size={1}>\n                      <a\n                        href={generateHelpUrl(problem.helpId)}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        View documentation &rarr;\n                      </a>\n                    </Text>\n                  )}\n                </Stack>\n              </Box>\n            </Box>\n          </Card>\n        )\n      })}\n    </Stack>\n  )\n}\n\nfunction getTypeInfo(problem: SchemaValidationProblemGroup): {name: string; type: string} | null {\n  // note: unsure if the first segment here can ever be anything else than a type\n  // a possible API improvement is to add schemaType info to the problem group interface itself\n  const first = problem.path[0]\n  if (first.kind === 'type') {\n    return {name: first.name, type: first.type}\n  }\n  return null\n}\n\nfunction _renderSegmentName(str: string) {\n  if (str.startsWith('<unnamed_type_@_index')) {\n    const parts = str.slice(1, -1).split('_')\n\n    return `[${parts[4]}]`\n  }\n\n  return str\n}\n","import {SchemaValidationProblemPath} from '@sanity/types'\n\nexport function renderPath(path: SchemaValidationProblemPath) {\n  return path\n    .map((segment) => {\n      if (segment.kind === 'type') {\n        return `${segment.name || '<unnamed>'}(${segment.type})`\n      }\n\n      if (segment.kind === 'property') {\n        return segment.name\n      }\n\n      return null\n    })\n    .filter(Boolean)\n    .join(' > ')\n}\n","import {Schema} from '@sanity/types'\nimport {renderPath} from './utils'\n\nexport function reportWarnings(schema: Schema) {\n  /* eslint-disable no-console */\n  const problemGroups = schema._validation\n\n  const groupsWithWarnings = problemGroups?.filter((group) =>\n    group.problems.some((problem) => problem.severity === 'warning')\n  )\n  if (groupsWithWarnings?.length === 0) {\n    return\n  }\n  console.groupCollapsed(` Schema has ${groupsWithWarnings?.length} warnings`)\n  groupsWithWarnings?.forEach((group) => {\n    const path = renderPath(group.path)\n\n    console.group(`%cAt ${path}`, 'color: #FF7636')\n\n    group.problems.forEach((problem) => {\n      console.log(problem.message)\n    })\n\n    console.groupEnd()\n  })\n  console.groupEnd()\n  /* eslint-enable no-console */\n}\n","import {Schema} from '@sanity/types'\nimport {Card, Container, Heading, Stack} from '@sanity/ui'\nimport React, {useEffect} from 'react'\nimport {SchemaProblemGroups} from './SchemaProblemGroups'\nimport {reportWarnings} from './reportWarnings'\n\ninterface SchemaErrorsScreenProps {\n  schema: Schema\n}\n\nexport function SchemaErrorsScreen({schema}: SchemaErrorsScreenProps) {\n  const groupsWithErrors =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'error')\n    ) || []\n\n  useEffect(() => reportWarnings(schema), [schema])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" paddingY={[4, 5, 6, 7]} paddingX={4} sizing=\"border\">\n      <Container width={1}>\n        <Stack space={5}>\n          <Heading as=\"h1\">Schema errors</Heading>\n          <SchemaProblemGroups problemGroups={groupsWithErrors} />\n        </Stack>\n      </Container>\n    </Card>\n  )\n}\n","import {Button, Card, Flex, Heading, Inline, Stack} from '@sanity/ui'\nimport React from 'react'\n\nexport function NotFoundScreen(props: {onNavigateToDefaultWorkspace: () => void}) {\n  return (\n    <Card height=\"fill\" sizing=\"border\" tone=\"caution\" display=\"flex\">\n      <Flex direction=\"row\" justify=\"center\" flex={1} align=\"center\">\n        <Stack space={4}>\n          <Heading as=\"h1\">Workspace not found</Heading>\n          <Inline>\n            <Button\n              text=\"Go to default workspace\"\n              onClick={props.onNavigateToDefaultWorkspace}\n              mode=\"ghost\"\n            />\n          </Inline>\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n","import {Flex, Card, Container} from '@sanity/ui'\nimport React from 'react'\nimport {WorkspaceAuth} from '../components/navbar/workspace'\n\nexport function AuthenticateScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" justify=\"center\" height=\"fill\">\n        <Container width={0}>\n          <WorkspaceAuth />\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\n\n// const Root = styled(Card).attrs({height: 'fill', overflow: 'auto'})``\n// const Content = styled(Box).attrs({padding: 4})`\n//   margin: auto;\n//   width: 640px;\n//   max-width: 100%;\n// `\n\nexport function ConfigErrorsScreen() {\n  return <>TODO: implement config errors screen</>\n  // return (\n  //   <Root forwardedAs={Flex}>\n  //     <Content forwardedAs={Flex} direction=\"column\" gap={4}>\n  //       <Flex direction=\"column\" gap={2}>\n  //         <Box>\n  //           <Heading as=\"h1\">Configuration Error</Heading>\n  //         </Box>\n  //         <Box muted>\n  //           <Text>An error occurred while trying to resolve your Studio's configuration.</Text>\n  //         </Box>\n  //         <Box>\n  //           <Text size={1} muted>\n  //             Note: the design of this page may change.\n  //           </Text>\n  //         </Box>\n  //       </Flex>\n  //       <Card shadow={1}>\n  //         {errors.map((errorInfo, index) => (\n  //           // eslint-disable-next-line react/no-array-index-key\n  //           <ErrorMessage key={index} {...errorInfo} />\n  //         ))}\n  //       </Card>\n  //       <Button\n  //         tone=\"primary\"\n  //         // eslint-disable-next-line react/jsx-no-bind\n  //         onClick={() => window.location.reload()}\n  //         type=\"button\"\n  //         text=\"Retry\"\n  //       />\n  //     </Content>\n  //   </Root>\n  // )\n}\n","import {CurrentUser} from '@sanity/types'\nimport {Button, Card, Dialog, Stack, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {getProviderTitle} from '../../store'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\n\nexport function NotAuthenticatedScreen() {\n  const [currentUser, setCurrentUser] = useState<CurrentUser | null>(null)\n  const [error, handleError] = useState<unknown>(null)\n\n  if (error) throw error\n\n  const {activeWorkspace} = useActiveWorkspace()\n\n  const handleLogout = useCallback(() => {\n    activeWorkspace.auth.logout?.()\n  }, [activeWorkspace])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({currentUser: user}) => {\n        setCurrentUser(user)\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n  const providerHelp = providerTitle ? ` through ${providerTitle}` : ''\n\n  return (\n    <Card height=\"fill\">\n      <Dialog\n        id=\"not-authorized-dialog\"\n        header=\"Not authorized\"\n        width={1}\n        footer={\n          <Stack paddingX={3} paddingY={2}>\n            <Button text=\"Sign out\" onClick={handleLogout} />\n          </Stack>\n        }\n      >\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            You are not authorized to access this studio. Maybe you could ask someone to invite you\n            to collaborate on this project?\n          </Text>\n\n          <Text>\n            If you think this is an error, verify that you are signed in with the correct account.\n            You are currently signed in as{' '}\n            <strong>\n              {currentUser?.name} ({currentUser?.email})\n            </strong>\n            {providerHelp}.\n          </Text>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import {Card, Dialog, Stack, Button, Text, TextInput, Flex} from '@sanity/ui'\nimport React, {useEffect, useMemo} from 'react'\nimport {LaunchIcon} from '@sanity/icons'\nimport styled from 'styled-components'\n\ninterface CorsOriginErrorScreenProps {\n  projectId?: string\n}\n\nexport const ScreenReaderLabel = styled.label`\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n`\n\nexport function CorsOriginErrorScreen(props: CorsOriginErrorScreenProps) {\n  const {projectId} = props\n\n  const origin = window.location.origin\n  const corsUrl = useMemo(() => {\n    const url = new URL(`https://sanity.io/manage/project/${projectId}/api`)\n    url.searchParams.set('cors', 'add')\n    url.searchParams.set('origin', origin)\n    url.searchParams.set('credentials', '')\n\n    return url.toString()\n  }, [origin, projectId])\n\n  useEffect(() => {\n    const handleFocus = () => {\n      window.location.reload()\n    }\n    window.addEventListener('focus', handleFocus)\n    return () => {\n      window.removeEventListener('focus', handleFocus)\n    }\n  }, [])\n\n  return (\n    <Card height=\"fill\">\n      <Dialog id=\"cors-error-dialog\" header=\"Before you continue...\" width={1}>\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            To access your content, you need to <b>add the following URL as a CORS origin</b> to\n            your Sanity project.\n          </Text>\n\n          {/* added for accessibility */}\n          <ScreenReaderLabel aria-hidden=\"true\">CORS URL to be added</ScreenReaderLabel>\n          <TextInput value={origin} readOnly />\n\n          <Button as=\"a\" href={corsUrl} target=\"_blank\" rel=\"noopener noreferrer\" tone=\"primary\">\n            <Flex align=\"center\" justify=\"center\" gap={3}>\n              <Text weight=\"medium\">Continue</Text>\n              <Text weight=\"medium\">\n                <LaunchIcon />\n              </Text>\n            </Flex>\n          </Button>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","export const WORKSPACES_DOCS_URL = 'https://beta.sanity.io/docs/platform/studio/config/workspaces'\n","import {SanityLogo} from '@sanity/logos'\nimport {Box, Card, Flex, Heading, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst LINKS = [\n  {\n    url: 'https://slack.sanity.io/',\n    title: 'Community',\n  },\n  {\n    url: 'https://www.sanity.io/docs',\n    title: 'Docs',\n  },\n  {\n    url: 'https://www.sanity.io/legal/privacy',\n    title: 'Privacy',\n  },\n  {\n    url: 'https://www.sanity.io',\n    title: 'sanity.io',\n  },\n]\n\nconst StyledText = styled(Text)`\n  a {\n    color: inherit;\n  }\n`\n\ninterface LayoutProps {\n  header?: React.ReactNode\n  children: React.ReactNode\n  footer?: React.ReactNode\n}\n\nexport function Layout(props: LayoutProps) {\n  const {children, footer, header} = props\n\n  return (\n    <Stack space={6}>\n      <Card border radius={3} overflow=\"auto\">\n        <Stack>\n          {typeof header === 'object' && <Box>{header}</Box>}\n          {typeof header === 'string' && (\n            <Box paddingY={4}>\n              <Heading align=\"center\" size={1}>\n                {header}\n              </Heading>\n            </Box>\n          )}\n\n          <Box paddingX={1}>\n            <Card borderTop={Boolean(header)} borderBottom={Boolean(footer)}>\n              {children}\n            </Card>\n          </Box>\n\n          {footer && <Box>{footer}</Box>}\n        </Stack>\n      </Card>\n\n      <Flex direction=\"column\" gap={4} justify=\"center\" align=\"center\">\n        <Text size={3}>\n          <SanityLogo />\n        </Text>\n\n        <Flex align=\"center\" gap={2}>\n          {LINKS.map((link, index) => (\n            <React.Fragment key={link.title}>\n              <StyledText muted size={1}>\n                <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {link.title}\n                </a>\n              </StyledText>\n\n              {index < LINKS.length - 1 && (\n                <Text size={1} muted>\n                  \n                </Text>\n              )}\n            </React.Fragment>\n          ))}\n        </Flex>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Button, Card, Flex, Stack} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {omit} from 'lodash'\nimport {AddIcon, ArrowLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {useActiveWorkspace} from '../../../../activeWorkspaceMatcher'\nimport {useWorkspaces} from '../../../../workspaces'\nimport {WorkspacePreview} from '../WorkspacePreview'\nimport {useWorkspaceAuthStates} from '../hooks'\nimport {LoadingScreen} from '../../../../screens'\nimport {WORKSPACES_DOCS_URL} from '../constants'\nimport {Layout} from './Layout'\n\nexport function WorkspaceAuth() {\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const [selectedWorkspaceName, setSelectedWorkspaceName] = useState<string | null>(\n    activeWorkspace?.name || null\n  )\n  const selectedWorkspace =\n    workspaces.length === 1\n      ? workspaces[0]\n      : workspaces.find((workspace) => workspace.name === selectedWorkspaceName)\n  const LoginComponent = selectedWorkspace?.auth?.LoginComponent\n\n  const handleBack = useCallback(() => setSelectedWorkspaceName(null), [])\n\n  if (!authStates) return <LoadingScreen />\n\n  if (LoginComponent && selectedWorkspace) {\n    return (\n      <Stack space={2}>\n        {workspaces.length > 1 && (\n          <Flex>\n            <Button\n              fontSize={1}\n              icon={ArrowLeftIcon}\n              mode=\"bleed\"\n              onClick={handleBack}\n              padding={2}\n              text=\"Choose another workspace\"\n            />\n          </Flex>\n        )}\n\n        <Layout\n          header={\n            <Box padding={3}>\n              <WorkspacePreview\n                icon={selectedWorkspace.icon}\n                title={selectedWorkspace.title}\n                subtitle={selectedWorkspace?.subtitle}\n              />\n            </Box>\n          }\n        >\n          <Stack padding={2} paddingBottom={3} paddingTop={4}>\n            <LoginComponent\n              {...omit(selectedWorkspace, ['type', '__internal'])}\n              key={selectedWorkspaceName}\n            />\n          </Stack>\n        </Layout>\n      </Stack>\n    )\n  }\n\n  return (\n    <Layout\n      header=\"Choose your workspace\"\n      footer={\n        <Stack padding={1}>\n          <Button\n            as=\"a\"\n            href={WORKSPACES_DOCS_URL}\n            icon={AddIcon}\n            justify=\"flex-start\"\n            mode=\"bleed\"\n            rel=\"noopener noreferrer\"\n            target=\"__blank\"\n            text=\"Add workspace\"\n          />\n        </Stack>\n      }\n    >\n      <Stack space={1} paddingX={1} paddingY={2}>\n        {workspaces.map((workspace) => {\n          const authState = authStates[workspace.name]\n          // eslint-disable-next-line no-nested-ternary\n          const state = authState.authenticated\n            ? 'logged-in'\n            : workspace.auth.LoginComponent\n            ? 'logged-out'\n            : 'no-access'\n\n          const handleSelectWorkspace = () => {\n            if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n              setActiveWorkspace(workspace.name)\n            }\n\n            if (state === 'logged-out') {\n              setSelectedWorkspaceName(workspace.name)\n            }\n          }\n\n          return (\n            <Card\n              as=\"button\"\n              radius={2}\n              key={workspace.name}\n              padding={2}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={handleSelectWorkspace}\n            >\n              <WorkspacePreview\n                icon={workspace?.icon}\n                iconRight={ChevronRightIcon}\n                state={state}\n                subtitle={workspace?.subtitle}\n                title={workspace?.title || workspace.name}\n              />\n            </Card>\n          )\n        })}\n      </Stack>\n    </Layout>\n  )\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {\n  Button,\n  MenuButton,\n  MenuItem,\n  Menu,\n  MenuButtonProps,\n  ButtonProps,\n  Box,\n  Label,\n} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {useActiveWorkspace} from '../../../activeWorkspaceMatcher'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspaces} from '../../../workspaces'\nimport {useWorkspaceAuthStates} from './hooks'\nimport {WorkspacePreview} from './WorkspacePreview'\nimport {useRouter} from 'sanity/router'\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nexport function WorkspaceMenuButton(props: ButtonProps) {\n  const {scheme} = useColorScheme()\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const {navigateUrl} = useRouter()\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({constrainSize: true, scheme, portal: true}),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      button={<Button icon={SelectIcon} mode=\"bleed\" {...props} disabled={!authStates} />}\n      id=\"workspace-menu\"\n      menu={\n        <StyledMenu>\n          <Box paddingX={3} paddingY={3}>\n            <Label size={1} muted>\n              Workspaces\n            </Label>\n          </Box>\n\n          {authStates &&\n            workspaces.map((workspace) => {\n              const authState = authStates[workspace.name]\n\n              // eslint-disable-next-line no-nested-ternary\n              const state = authState.authenticated\n                ? 'logged-in'\n                : workspace.auth.LoginComponent\n                ? 'logged-out'\n                : 'no-access'\n\n              const handleSelectWorkspace = () => {\n                if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n                  setActiveWorkspace(workspace.name)\n                }\n\n                // Navigate to the base path of the workspace to authenticate\n                if (state === 'logged-out') {\n                  navigateUrl({path: workspace.basePath})\n                }\n              }\n\n              return (\n                <MenuItem\n                  key={workspace.name}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={handleSelectWorkspace}\n                  padding={2}\n                  pressed={workspace.name === activeWorkspace.name}\n                >\n                  <WorkspacePreview\n                    icon={workspace?.icon}\n                    selected={workspace.name === activeWorkspace.name}\n                    state={state}\n                    subtitle={workspace?.subtitle}\n                    title={workspace?.title || workspace.name}\n                  />\n                </MenuItem>\n              )\n            })}\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Layer, Card, Flex, Text, Box, Button, Stack, useGlobalKeyDown} from '@sanity/ui'\nimport {CloseIcon, LeaveIcon} from '@sanity/icons'\nimport React, {memo, useEffect, useState} from 'react'\nimport styled from 'styled-components'\nimport {useWorkspace} from '../../workspace'\nimport {Tool} from '../../../config'\nimport {useToolMenuComponent} from '../../studio-components-hooks'\nimport {UserAvatar, useRovingFocus} from '../../../components'\nimport {WorkspaceMenuButton} from './workspace'\n\nconst Root = styled(Layer)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n`\n\nconst Backdrop = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--card-shadow-penumbra-color);\n  transition: 200ms opacity ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n\n  &[data-open='true'] {\n    opacity: 1;\n    pointer-events: all;\n  }\n`\n\nconst InnerCard = styled(Card)`\n  position: relative;\n  pointer-events: all;\n  flex-direction: column;\n  min-width: 200px;\n  max-width: 280px;\n  transition: 200ms transform ease-in-out;\n  transform: translate3d(calc(-100% - 1px), 0, 0);\n\n  &[data-open='true'] {\n    transform: translate3d(0, 0, 0);\n  }\n`\n\ninterface NavDrawerProps {\n  activeToolName?: string\n  isOpen: boolean\n  onClose: () => void\n  tools: Tool[]\n}\n\nexport const NavDrawer = memo(function NavDrawer(props: NavDrawerProps) {\n  const {activeToolName, isOpen, onClose, tools} = props\n  const [closeButtonElement, setCloseButtonElement] = useState<HTMLButtonElement | null>(null)\n  const [innerCardElement, setInnerCardElement] = useState<HTMLDivElement | null>(null)\n  const tabIndex = isOpen ? 0 : -1\n  const {auth, currentUser} = useWorkspace()\n\n  useRovingFocus({\n    rootElement: innerCardElement,\n    navigation: ['tab'],\n  })\n\n  useGlobalKeyDown((e: KeyboardEvent) => {\n    if (e.key === 'Escape' && isOpen) {\n      onClose()\n    }\n  })\n\n  useEffect(() => {\n    if (isOpen) {\n      closeButtonElement?.focus()\n    }\n  }, [closeButtonElement, isOpen])\n\n  const ToolMenu = useToolMenuComponent()\n\n  return (\n    <Root>\n      <Backdrop data-open={isOpen} onClick={onClose} />\n\n      <InnerCard\n        display=\"flex\"\n        height=\"fill\"\n        data-open={isOpen}\n        shadow={1}\n        ref={setInnerCardElement}\n      >\n        <Card borderBottom>\n          <Stack space={3} padding={[3, 3, 4]}>\n            <Flex align=\"center\">\n              <Flex flex={1} align=\"center\" paddingRight={2}>\n                <Flex flex={1} align=\"center\">\n                  <Box>\n                    <UserAvatar size={1} user=\"me\" />\n                  </Box>\n\n                  <Box flex={1} marginLeft={2} title={currentUser?.name || currentUser?.email}>\n                    <Text textOverflow=\"ellipsis\">{currentUser?.name || currentUser?.email}</Text>\n                  </Box>\n                </Flex>\n              </Flex>\n\n              <Box>\n                <Button\n                  icon={CloseIcon}\n                  mode=\"bleed\"\n                  onClick={onClose}\n                  ref={setCloseButtonElement}\n                  tabIndex={tabIndex}\n                  title=\"Close menu\"\n                />\n              </Box>\n            </Flex>\n\n            <WorkspaceMenuButton text=\"Select workspace\" justify=\"flex-start\" />\n          </Stack>\n        </Card>\n\n        <Box flex=\"auto\" overflow=\"auto\" padding={[3, 3, 4]}>\n          <ToolMenu\n            activeToolName={activeToolName}\n            closeSidebar={onClose}\n            context=\"sidebar\"\n            isSidebarOpen={isOpen}\n            tools={tools}\n          />\n        </Box>\n\n        {auth.logout && (\n          <Card flex=\"none\" padding={[3, 3, 4]} borderTop>\n            <Stack>\n              <Button\n                iconRight={LeaveIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={auth.logout}\n                tabIndex={tabIndex}\n                text=\"Sign out\"\n              />\n            </Stack>\n          </Card>\n        )}\n      </InnerCard>\n    </Root>\n  )\n})\n","import {css} from 'styled-components'\n\nexport const listStyles = css`\n  --margin-top: ${({theme}) => theme.sanity.space[1]}px;\n\n  &:not([data-list-type='number']) {\n    counter-reset: section;\n  }\n\n  &[data-list-type='bullet'] {\n    --bullet-marker: '';\n    margin-top: var(--margin-top);\n\n    [data-list-type='bullet'] {\n      --bullet-marker: '';\n      margin-top: var(--margin-top);\n\n      [data-list-type='bullet'] {\n        --bullet-marker: '';\n        margin-top: var(--margin-top);\n\n        [data-list-type='bullet'] {\n          --bullet-marker: '';\n          margin-top: var(--margin-top);\n\n          [data-list-type='bullet'] {\n            --bullet-marker: '';\n            margin-top: var(--margin-top);\n\n            [data-list-type='bullet'] {\n              --bullet-marker: '';\n              margin-top: var(--margin-top);\n\n              [data-list-type='bullet'] {\n                --bullet-marker: '';\n                margin-top: var(--margin-top);\n\n                [data-list-type='bullet'] {\n                  --bullet-marker: '';\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='bullet'] {\n                    --bullet-marker: '';\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='bullet'] {\n                      --bullet-marker: '';\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='bullet'] {\n                        --bullet-marker: '';\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='bullet'] {\n                          --bullet-marker: '';\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  &[data-list-type='number'] {\n    --bullet-marker: counter(section, number) '. ';\n    counter-reset: section;\n    margin-top: var(--margin-top);\n\n    [data-list-type='number'] {\n      --bullet-marker: counter(section, lower-alpha) '. ';\n      counter-reset: section;\n      margin-top: var(--margin-top);\n\n      [data-list-type='number'] {\n        --bullet-marker: counter(section, lower-roman) '. ';\n        counter-reset: section;\n        margin-top: var(--margin-top);\n\n        [data-list-type='number'] {\n          --bullet-marker: counter(section, number) '. ';\n          counter-reset: section;\n          margin-top: var(--margin-top);\n\n          [data-list-type='number'] {\n            --bullet-marker: counter(section, lower-alpha) '. ';\n            counter-reset: section;\n            margin-top: var(--margin-top);\n\n            [data-list-type='number'] {\n              --bullet-marker: counter(section, lower-roman) '. ';\n              counter-reset: section;\n              margin-top: var(--margin-top);\n\n              [data-list-type='number'] {\n                --bullet-marker: counter(section, number) '. ';\n                counter-reset: section;\n                margin-top: var(--margin-top);\n\n                [data-list-type='number'] {\n                  --bullet-marker: counter(section, lower-alpha) '. ';\n                  counter-reset: section;\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='number'] {\n                    --bullet-marker: counter(section, lower-roman) '. ';\n                    counter-reset: section;\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='number'] {\n                      --bullet-marker: counter(section, number) '. ';\n                      counter-reset: section;\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='number'] {\n                        --bullet-marker: counter(section, lower-alpha) '. ';\n                        counter-reset: section;\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='number'] {\n                          --bullet-marker: counter(section, lower-roman) '. ';\n                          counter-reset: section;\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","import {Box, Card} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {listStyles} from './listStyles'\n\nexport const SpaceBox = styled(Box)`\n  ${listStyles};\n`\n\nexport const RootBox = styled(Box)`\n  ${SpaceBox}:first-child {\n    &:not([data-list-type='number'], [data-list-type='bullet']) {\n      margin-top: 0;\n    }\n  }\n\n  ${SpaceBox}:last-child {\n    margin-bottom: 0;\n  }\n`\n\nexport const ListBoxOuter = styled(Box)`\n  line-height: 1;\n`\n\nexport const ListBox = styled(Box)(() => {\n  return css`\n    &:not([hidden]) {\n      position: relative;\n      padding-left: 2rem;\n      display: inline-flex;\n    }\n\n    & > [data-list-prefix] {\n      position: absolute;\n      width: 3rem;\n      left: -2rem;\n      text-align: right;\n\n      &[data-list-prefix='bullet'] {\n        top: -0.1875em;\n\n        & > span:before {\n          content: var(--bullet-marker);\n          font-size: 0.46666em;\n        }\n      }\n\n      &[data-list-prefix='number'] {\n        counter-increment: section;\n\n        & > span:before {\n          font-size: 1em;\n          content: var(--bullet-marker);\n        }\n      }\n    }\n  `\n})\n\nexport const ImageCard = styled(Card)<{$aspectRatio: number; $lqip?: string}>`\n  position: relative;\n  padding-bottom: ${({$aspectRatio}) => $aspectRatio}%;\n  background-image: ${({$lqip}) => `url(${$lqip})`};\n  background-size: cover;\n\n  img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n`\n","import React from 'react'\nimport {PortableText, PortableTextComponents} from '@portabletext/react'\nimport {Box, Card, Code, Heading, Stack, Text} from '@sanity/ui'\nimport urlBuilder from '@sanity/image-url'\nimport {getProject} from '@sanity/asset-utils'\nimport {StudioBlockContent, MaterializedImage, CodeBlock} from '../module-status'\nimport {ImageCard, ListBox, ListBoxOuter, RootBox, SpaceBox} from './PortableTextContent.styles'\n\ninterface PortableTextContentProps {\n  value: StudioBlockContent[]\n}\n\nfunction Image({value}: {value: MaterializedImage}) {\n  if (!value?.asset) {\n    return null\n  }\n\n  const project = getProject(value.asset)\n  const url = urlBuilder(project).image(value).fit('max').auto('format').url()\n\n  const {asset, alt, caption} = value\n  const {dimensions, lqip} = asset?.metadata || {}\n  const aspectRatio = (dimensions.height / dimensions.width) * 100\n\n  return (\n    <SpaceBox marginY={4}>\n      <Stack space={3} as=\"figure\">\n        <ImageCard radius={1} shadow={1} overflow=\"hidden\" $aspectRatio={aspectRatio} $lqip={lqip}>\n          <img src={url} alt={alt || caption} referrerPolicy=\"strict-origin-when-cross-origin\" />\n        </ImageCard>\n        {caption && (\n          <Text align=\"center\" as=\"figcaption\" muted size={1}>\n            {value.caption}\n          </Text>\n        )}\n      </Stack>\n    </SpaceBox>\n  )\n}\n\nconst components: PortableTextComponents = {\n  types: {\n    image: ({value}) => <Image value={value} />,\n    code: ({value}: {value: CodeBlock}) => (\n      <SpaceBox marginY={4}>\n        <Card padding={3} tone=\"transparent\" radius={1} overflow=\"auto\">\n          <Code size={1} language={value?.language}>\n            {value?.code}\n          </Code>\n        </Card>\n      </SpaceBox>\n    ),\n  },\n  block: {\n    h1: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={5}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h2: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={4}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h3: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={3}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h4: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={2}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h5: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={1}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h6: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={0}>{children}</Heading>\n      </SpaceBox>\n    ),\n    normal: ({children}) => (\n      <SpaceBox marginY={4}>\n        <Text as=\"p\" muted size={1}>\n          {children}\n        </Text>\n      </SpaceBox>\n    ),\n  },\n  list: {\n    bullet: ({children}) => (\n      <SpaceBox data-list-type=\"bullet\" marginBottom={4}>\n        <Box as=\"ul\">{children}</Box>\n      </SpaceBox>\n    ),\n    number: ({children}) => (\n      <SpaceBox data-list-type=\"number\" marginBottom={4}>\n        <Box as=\"ol\">{children}</Box>\n      </SpaceBox>\n    ),\n  },\n  listItem: {\n    bullet: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted size={1} data-list-prefix=\"bullet\" />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n    number: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted data-list-prefix=\"number\" size={1} />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n  },\n}\n\nexport function PortableTextContent(props: PortableTextContentProps) {\n  const {value} = props\n\n  return (\n    <RootBox>\n      <PortableText value={value} components={components} />\n    </RootBox>\n  )\n}\n","import {Card, Stack, Label, Heading} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from './module-status'\nimport {PortableTextContent} from './portableTextContent'\n\nconst LABELS: Record<'bugfix' | 'feature', string> = {\n  bugfix: 'Bugfixes',\n  feature: 'Feature',\n}\n\nexport function ChangelogItem(props: ChangeItem) {\n  const {changeType, description, title} = props\n  const label = LABELS[changeType]\n\n  return (\n    <Card padding={4} shadow={1} radius={2}>\n      <Stack space={title ? 4 : 3}>\n        {label && <Label size={1}>{label}</Label>}\n\n        <Stack space={3}>\n          {title && <Heading size={1}>{title}</Heading>}\n\n          {description && <PortableTextContent value={description} />}\n        </Stack>\n      </Stack>\n    </Card>\n  )\n}\n","import {Stack, Flex, Heading, Badge, Text} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from './module-status'\nimport {ChangelogItem} from './ChangelogItem'\n\ninterface ChangelogListProps {\n  changeItems: ChangeItem[]\n  isLatest: boolean\n  version: string\n}\n\nexport function ChangelogList(props: ChangelogListProps) {\n  const {changeItems, isLatest, version} = props\n\n  const features = changeItems.filter((c) => c.changeType === 'feature')\n  const bugfixes = changeItems.filter((c) => c.changeType === 'bugfix')\n  const bugFixesDescription = bugfixes.map(({description}) => description).flat()\n\n  return (\n    <Stack space={4}>\n      <Flex align=\"center\" gap={2}>\n        <Heading size={1}>v{version}</Heading>\n\n        {isLatest && <Badge tone=\"positive\">Latest</Badge>}\n      </Flex>\n\n      <Stack space={3}>\n        {features?.map((change) => (\n          <ChangelogItem\n            key={change.title}\n            changeType={change.changeType}\n            description={change?.description}\n            title={change.title}\n          />\n        ))}\n\n        {bugFixesDescription.length > 0 && (\n          <ChangelogItem changeType=\"bugfix\" description={bugFixesDescription} />\n        )}\n      </Stack>\n\n      <Flex justify=\"flex-end\">\n        <Text size={1}>\n          <a\n            href=\"https://github.com/sanity-io/sanity/releases\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            See full changelog on GitHub\n          </a>\n        </Text>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Card, Dialog, DialogProps, MenuDivider, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {Changelog} from './module-status'\nimport {ChangelogList} from './ChangelogList'\n\nconst StickyBox = styled(Box)`\n  position: sticky;\n  top: 0;\n  z-index: 1;\n`\n\nconst EMPTY_ARRAY: [] = []\n\ninterface ChangelogDialogProps {\n  changelog: Changelog\n  currentVersion?: string\n  dialogProps?: Omit<DialogProps, 'id'>\n  latestVersion?: string\n}\n\nexport function ChangelogDialog(props: ChangelogDialogProps) {\n  const {changelog, currentVersion, dialogProps, latestVersion} = props\n\n  const changelogWithChangeItems = (changelog || EMPTY_ARRAY).filter(\n    (c) => (c?.changeItems || EMPTY_ARRAY)?.length > 0\n  )\n  const hasChangelog = changelogWithChangeItems.length > 0\n\n  return (\n    <Dialog header=\"Upgrade the Sanity Studio\" width={1} {...dialogProps} id=\"changelog-dialog\">\n      <>\n        <StickyBox>\n          <Card padding={4} borderBottom={hasChangelog}>\n            <Stack space={4}>\n              <Stack space={3}>\n                {hasChangelog && <Text weight=\"semibold\">Changelog</Text>}\n\n                {currentVersion && latestVersion && (\n                  <Text muted size={1}>\n                    Your Sanity Studio is version <code>{currentVersion}</code>. The latest version\n                    is <code>{latestVersion}</code>.\n                  </Text>\n                )}\n              </Stack>\n            </Stack>\n          </Card>\n        </StickyBox>\n\n        {hasChangelog && (\n          <Stack space={5} paddingY={4}>\n            {changelogWithChangeItems?.map((log, index) => {\n              const {changeItems, version} = log\n              const showDivider = index < changelogWithChangeItems.length - 1\n              const isLatest = version === latestVersion\n\n              return (\n                <React.Fragment key={version}>\n                  <Box paddingX={4}>\n                    <ChangelogList\n                      changeItems={changeItems || EMPTY_ARRAY}\n                      version={version}\n                      isLatest={isLatest}\n                    />\n                  </Box>\n\n                  {showDivider && <MenuDivider />}\n                </React.Fragment>\n              )\n            })}\n          </Stack>\n        )}\n      </>\n    </Dialog>\n  )\n}\n","/**\n * TODO: rename to `VERSION`\n *\n * @beta\n */\n// This string is overwritten by prepublish script with `.version` from package.json\n// The version you see here is only read in monorepo development\nexport const SANITY_VERSION = '0.0.0-development' as string\n","import type {Observable} from 'rxjs'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {SANITY_VERSION} from '../../../../../version'\nimport {CheckModuleVersionsOptions, VersionsResponse, ModuleStatusResponse} from './types'\n\nconst sanityModuleVersions = {sanity: SANITY_VERSION}\n\n// Used to keep track of lookups to prevent multiple requests\nconst CACHED_LOOKUPS = new Map<string, Observable<ModuleStatusResponse>>()\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options - Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function checkModuleStatus(\n  options: CheckModuleVersionsOptions\n): Observable<ModuleStatusResponse> {\n  const {moduleVersions = getInstalledModules(), client} = options\n  const query = buildQueryString(moduleVersions)\n  const hash = hashQuery(query.m)\n\n  let request$ = CACHED_LOOKUPS.get(hash)\n  if (request$) {\n    return request$\n  }\n\n  request$ = client.observable\n    .request<VersionsResponse>({\n      url: '/versions',\n      query,\n      json: true,\n      tag: 'module.version-check',\n    })\n    .pipe(\n      map((result) => ({...result, installed: moduleVersions})),\n      shareReplay(1)\n    )\n\n  CACHED_LOOKUPS.set(hash, request$)\n  return request$\n}\n\n/**\n * Returns the currently installed version of the given module\n *\n * @param moduleName - Name of module to get version number for\n * @internal Not a stable API yet\n */\nexport function getInstalledModuleVersion(moduleName: string): string | undefined {\n  const versions = getInstalledModules()\n  return versions[moduleName]\n}\n\n/**\n * Builds to: `{m: ['sanity@3.0.2', '@sanity/vision@3.14.3']}`\n * Serializes to: `?m=sanity@3.0.2&m=@sanity/vision@3.14.3`\n */\nfunction buildQueryString(versions: Record<string, string>): {m: string[]} {\n  return {\n    m: Object.keys(versions)\n      .sort()\n      .filter((pkg) => versions[pkg])\n      .map((pkg) => `${pkg}@${versions[pkg]}`),\n  }\n}\n\n/**\n * Returns an object of installed `@sanity`-modules and their installed version numbers\n */\nfunction getInstalledModules(): Record<string, string> {\n  // Ugly hack, but this allows for testing the version checker even when running\n  // the latest module versions, by pretending we're using an outdated module\n  const fakeOutdatedModule = false\n  if (fakeOutdatedModule) {\n    return {...sanityModuleVersions, '@sanity/vision': '1.118.0'}\n  }\n\n  return sanityModuleVersions\n}\n\n/**\n * Reduce the module array string by stripping sanity-prefixes and joining them together\n */\nfunction hashQuery(items: string[]): string {\n  return items.join(',').replace(/@?sanity[/-]/g, '')\n}\n","import {useMemo} from 'react'\nimport {LoadableState, useLoadable} from '../../../../../util'\nimport {checkModuleStatus} from './moduleStatus'\nimport {CheckModuleVersionsOptions, ModuleStatusResponse} from './types'\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options - Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function useModuleStatus(\n  options: CheckModuleVersionsOptions\n): LoadableState<ModuleStatusResponse | undefined> {\n  const moduleStatus$ = useMemo(() => checkModuleStatus(options), [options])\n\n  return useLoadable(moduleStatus$)\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Card, Stack, Button, Text, Code, Box} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\n\nconst COMMANDS = ['npm i @sanity/cli -g', 'sanity upgrade']\n\nconst Icon = styled(ToggleArrowRightIcon)`\n  &[data-rotate='true'] {\n    transform: rotate(90deg);\n  }\n`\n\ninterface ChangelogAccordionProps {\n  defaultOpen: boolean\n}\n\nexport function ChangelogAccordion(props: ChangelogAccordionProps) {\n  const {defaultOpen} = props\n  const [open, setOpen] = useState<boolean>(defaultOpen)\n\n  const handleClick = useCallback(() => setOpen((v) => !v), [])\n\n  return (\n    <Card overflow=\"hidden\">\n      <Stack>\n        <Button\n          aria-controls=\"upgrade-commands\"\n          icon={<Icon data-rotate={open} />}\n          justify=\"flex-start\"\n          mode=\"bleed\"\n          onClick={handleClick}\n          padding={4}\n          radius={0}\n          space={2}\n          text=\"How to upgrade\"\n        />\n      </Stack>\n\n      <Card\n        aria-hidden={!open}\n        hidden={!open}\n        id=\"upgrade-commands\"\n        overflow=\"auto\"\n        paddingX={4}\n        paddingY={2}\n        role=\"region\"\n        tone=\"inherit\"\n      >\n        <Stack space={2}>\n          <Card tone=\"transparent\" padding={3} radius={2}>\n            <Stack space={3}>\n              <Code language=\"bash\" size={1}>\n                {[`# Run these commands to upgrade`, ...COMMANDS].join('\\n')}\n              </Code>\n            </Stack>\n          </Card>\n\n          <Box paddingX={2} paddingY={3}>\n            <Text size={1} muted>\n              If you have problems upgrading, please get in touch with us in the{' '}\n              <a href=\"https://slack.sanity.io/\" rel=\"noopener noreferrer\" target=\"_blank\">\n                Sanity Community\n              </a>\n              .\n            </Text>\n          </Box>\n        </Stack>\n      </Card>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {PackageIcon} from '@sanity/icons'\nimport {DialogProps} from '@sanity/ui'\nimport {isDev} from '../../../../environment'\nimport {useClient} from '../../../../hooks'\nimport {useColorScheme} from '../../../colorScheme'\nimport {StatusButton} from '../../StatusButton'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useModuleStatus} from './module-status'\nimport {ChangelogDialog} from './ChangelogDialog'\nimport {ChangelogAccordion} from './ChangelogAccordion'\n\nconst EMPTY_ARRAY: [] = []\n\nexport function ChangelogButton() {\n  const [open, setOpen] = useState<boolean>(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(\n    () =>\n      client.withConfig({\n        apiVersion: '1',\n      }),\n    [client]\n  )\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const {value, error, isLoading} = useModuleStatus({\n    client: versionedClient,\n  })\n\n  const {changelog, currentVersion, latestVersion, isUpToDate} = value || {}\n\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  const dialogProps: Omit<DialogProps, 'id'> = useMemo(\n    () => ({\n      footer: <ChangelogAccordion defaultOpen={isDev} />,\n      onClickOutside: handleClose,\n      onClose: handleClose,\n      // force root scheme here to \"break out\" of the navbar's dark scheme\n      scheme,\n    }),\n    [handleClose, scheme]\n  )\n\n  if (error || isLoading || isUpToDate) {\n    return null\n  }\n\n  return (\n    <>\n      <StatusButton\n        active\n        icon={PackageIcon}\n        mode=\"bleed\"\n        onClick={handleOpen}\n        ref={setButtonElement}\n        selected={open}\n        statusTone=\"primary\"\n      />\n\n      {open && (\n        <ChangelogDialog\n          changelog={changelog || EMPTY_ARRAY}\n          currentVersion={currentVersion}\n          dialogProps={dialogProps}\n          latestVersion={latestVersion}\n        />\n      )}\n    </>\n  )\n}\n","import React, {useCallback, useState, useId} from 'react'\nimport {Box, Button, Dialog, Heading, Stack, Text, Tooltip} from '@sanity/ui'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {useSchema} from '../../../../hooks'\nimport {SchemaProblemGroups} from '../../../screens/schemaErrors/SchemaProblemGroups'\nimport {useColorScheme} from '../../../colorScheme'\n\nexport function ConfigIssuesButton() {\n  const schema = useSchema()\n  const groupsWithWarnings =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'warning')\n    ) || []\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const dialogId = useId()\n\n  const [isDialogOpen, setDialogOpen] = useState(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const handleOpen = useCallback(() => setDialogOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setDialogOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  if (groupsWithWarnings.length === 0) {\n    return null\n  }\n\n  return (\n    <>\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <Text size={1}>Found configuration issues</Text>\n          </Box>\n        }\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            icon={WarningOutlineIcon}\n            mode=\"bleed\"\n            tone=\"caution\"\n            onClick={handleOpen}\n            ref={setButtonElement}\n            selected={isDialogOpen}\n          />\n        </Box>\n      </Tooltip>\n\n      {isDialogOpen && (\n        <Dialog\n          header={\n            <Stack space={3}>\n              <Text weight=\"semibold\">Configuration issues</Text>\n              <Text muted size={1}>\n                Configuration checks are only performed during development and will not be visible\n                in production builds\n              </Text>\n            </Stack>\n          }\n          width={2}\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          // force root scheme here to \"break out\" of the navbar's dark scheme\n          scheme={scheme}\n          id={dialogId}\n        >\n          <Stack space={4} padding={4}>\n            <Heading as=\"h2\" size={1}>\n              Found {groupsWithWarnings.length} schema warnings\n            </Heading>\n            <SchemaProblemGroups problemGroups={groupsWithWarnings} />\n          </Stack>\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import React from 'react'\nimport {Button} from '@sanity/ui'\n\ninterface LogoButtonProps {\n  onClick: React.MouseEventHandler<HTMLElement>\n  children: React.ReactNode\n  href: string\n  title: string\n}\n\nexport function LogoButton(props: LogoButtonProps) {\n  const {title, children, href, onClick} = props\n\n  return (\n    <Button\n      aria-label={title}\n      as=\"a\"\n      data-testid=\"logo\"\n      href={href}\n      mode=\"bleed\"\n      onClick={onClick}\n      padding={3}\n    >\n      {children}\n    </Button>\n  )\n}\n","import {createContext, Dispatch} from 'react'\nimport {RecentSearchesStore} from '../../datastores/recentSearches'\nimport {SearchAction, SearchReducerState} from './reducer'\n\nexport interface SearchContextValue {\n  dispatch: Dispatch<SearchAction>\n  state: SearchReducerState\n  recentSearchesStore?: RecentSearchesStore\n}\n\nexport const SearchContext = createContext<SearchContextValue | undefined>(undefined)\n","import {useContext} from 'react'\nimport {SearchContext, SearchContextValue} from './SearchContext'\n\nexport function useSearchState(): SearchContextValue {\n  const context = useContext(SearchContext)\n  if (context === undefined) {\n    throw new Error('useSearchState must be used within an SearchProvider')\n  }\n  return context\n}\n","import {ControlsIcon} from '@sanity/icons'\nimport {Flex, Inline, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function Instructions() {\n  return (\n    <Flex align=\"center\" direction=\"column\" gap={4} paddingX={4} paddingY={5}>\n      <Inline space={3}>\n        <Text muted>Use the</Text>\n        <Text muted>\n          <ControlsIcon />\n        </Text>\n        <Text muted>Filter to refine your search</Text>\n      </Inline>\n    </Flex>\n  )\n}\n","import React, {forwardRef} from 'react'\nimport styled from 'styled-components'\n\nconst PointerOverlayDiv = styled.div`\n  bottom: 0;\n  display: none;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: 1;\n\n  @media (hover: hover) {\n    &[data-enabled='true'] {\n      display: block;\n    }\n  }\n`\n\n/**\n * Simple component which conditionally appears over command list items to cancel\n * existing :hover states for all child elements.\n *\n * It should only appear if hover capabilities are available (not on touch devices)\n */\nexport const PointerOverlay = forwardRef<HTMLDivElement>(function PointerOverlay(_props, ref) {\n  return <PointerOverlayDiv aria-hidden=\"true\" ref={ref} />\n})\n","export const supportsTouch = (() => {\n  return typeof window !== 'undefined' && 'ontouchstart' in window\n})()\n","import {throttle} from 'lodash'\nimport React, {\n  createContext,\n  MouseEvent,\n  ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n} from 'react'\nimport {supportsTouch} from '../../utils/supportsTouch'\n\n/**\n * This provider adds the following:\n * - Keyboard navigation + events ( /  / ENTER) to children with a specified container (`childContainerRef`)\n * - Focus redirection when clicking child elements\n * - Pointer blocking when navigating with arrow keys (to ensure that only one active state is visible at any given time)\n * - ARIA attributes to define a `combobox` header input that controls a separate `listbox`\n *\n * Requirements:\n * - All child items must have `data-index` attributes defined with their index in the list. This is to help with\n * interoperability with virtual lists (whilst preventing costly re-renders)\n * - You have to supply `childCount` which is the total number of list items. Again, this is specifically for virtual\n * list support.\n * - All child items have to use the supplied context functions (`onChildClick` etc) to ensure consistent behaviour\n * when clicking and hovering over items, as well as preventing unwanted focus.\n * - All elements (including the pointer overlay) must be defined and passed to this Provider.\n */\n\n/**\n * TODO: We should look to either create an dynamic pointer overlay in future, or create a custom list item component\n * with more control over dynamically applying (and removing) hover states.\n */\n\ninterface CommandListContextValue {\n  level: number\n  onChildClick: () => void\n  onChildMouseDown: (event: MouseEvent) => void\n  onChildMouseEnter: (index: number) => () => void\n  setVirtualListScrollToIndex: (scrollToIndex: (index: number, options?: any) => void) => void\n}\n\nconst CommandListContext = createContext<CommandListContextValue | undefined>(undefined)\n\n// Allowable tag names to pass through click events when selecting with the ENTER key\nconst CLICKABLE_CHILD_TAGS: string[] = ['a', 'button']\n\ninterface CommandListProviderProps {\n  ariaChildrenLabel: string\n  ariaHeaderLabel: string\n  ariaMultiselectable?: boolean\n  autoFocus?: boolean\n  children?: ReactNode\n  childContainerElement: HTMLDivElement | null\n  childCount: number\n  containerElement: HTMLDivElement | null\n  headerInputElement: HTMLInputElement | null\n  id: string\n  initialSelectedIndex?: number\n  level: number\n  pointerOverlayElement: HTMLDivElement | null\n  virtualList?: boolean\n}\n\n/**\n * @internal\n */\nexport function CommandListProvider({\n  ariaChildrenLabel,\n  ariaHeaderLabel,\n  ariaMultiselectable = false,\n  autoFocus,\n  children,\n  childContainerElement,\n  childCount,\n  containerElement,\n  id,\n  initialSelectedIndex = 0,\n  level = 0,\n  headerInputElement,\n  pointerOverlayElement,\n  virtualList,\n}: CommandListProviderProps) {\n  const selectedIndexRef = useRef<number>(-1)\n\n  const virtualListScrollToIndexRef = useRef<\n    ((index: number, options?: Record<string, any>) => void) | null\n  >(null)\n\n  /**\n   * Toggle pointer overlay element which will kill existing hover states\n   */\n  const enableChildContainerPointerEvents = useCallback(\n    (enabled: boolean) =>\n      pointerOverlayElement?.setAttribute('data-enabled', (!enabled).toString()),\n    [pointerOverlayElement]\n  )\n\n  const getChildDescendantId = useCallback(\n    (index: number) => {\n      return `${id}-item-${index}`\n    },\n    [id]\n  )\n\n  /**\n   * Assign selected state on all child elements.\n   */\n  const handleAssignSelectedState = useCallback(\n    (scrollSelectedIntoView?: boolean) => {\n      const selectedIndex = selectedIndexRef?.current\n\n      headerInputElement?.setAttribute('aria-activedescendant', getChildDescendantId(selectedIndex))\n\n      const childElements = Array.from(childContainerElement?.children || []) as HTMLElement[]\n      childElements?.forEach((child) => {\n        // Derive id from data-index attribute - especially relevant when dealing with virtual lists\n        const childIndex = Number(child.dataset?.index)\n\n        child.setAttribute('aria-posinset', (childIndex + 1).toString())\n        child.setAttribute('aria-setsize', childCount.toString())\n        child.setAttribute('data-active', (childIndex === selectedIndex).toString())\n        child.setAttribute('id', getChildDescendantId(childIndex))\n        child.setAttribute('role', 'option')\n        child.setAttribute('tabIndex', '-1')\n      })\n\n      /**\n       * Scroll into view: delegate to `react-virtual` if a virtual list, otherwise use `scrollIntoView`\n       */\n      if (scrollSelectedIntoView) {\n        if (virtualList) {\n          virtualListScrollToIndexRef?.current?.(selectedIndex, {align: 'start'})\n        } else {\n          const selectedElement = childElements.find(\n            (element) => Number(element.dataset?.index) === selectedIndex\n          )\n          selectedElement?.scrollIntoView({block: 'nearest'})\n        }\n      }\n    },\n    [childContainerElement, childCount, getChildDescendantId, headerInputElement, virtualList]\n  )\n\n  /**\n   * Throttled version of the above, used when DOM mutations are detected in virtual lists\n   */\n  const handleReassignSelectedStateThrottled = useMemo(\n    () => throttle(handleAssignSelectedState.bind(undefined, false), 200),\n    [handleAssignSelectedState]\n  )\n\n  /**\n   * Mark an index as active, assign aria-selected state on all children and optionally scroll into view\n   */\n  const setActiveIndex = useCallback(\n    ({index, scrollIntoView = true}: {index: number; scrollIntoView?: boolean}) => {\n      selectedIndexRef.current = index\n      handleAssignSelectedState(scrollIntoView)\n    },\n    [handleAssignSelectedState]\n  )\n\n  /**\n   * Prevent child items from receiving focus\n   */\n  const handleChildMouseDown = useCallback((event: MouseEvent) => {\n    event.preventDefault()\n  }, [])\n\n  /**\n   * Always focus header input on child item click (non-touch only)\n   */\n  const handleChildClick = useCallback(() => {\n    if (!supportsTouch) {\n      headerInputElement?.focus()\n    }\n  }, [headerInputElement])\n\n  /**\n   * Mark hovered child item as active\n   */\n  const handleChildMouseEnter = useCallback(\n    (index: number) => {\n      return function () {\n        setActiveIndex({index, scrollIntoView: false})\n      }\n    },\n    [setActiveIndex]\n  )\n\n  /**\n   * Store virtual list's scrollToIndex function\n   */\n  const handleSetVirtualListScrollToIndex = useCallback(\n    (scrollToIndex: (index: number, options?: Record<string, any>) => void) => {\n      virtualListScrollToIndexRef.current = scrollToIndex\n    },\n    []\n  )\n\n  const scrollToAdjacentItem = useCallback(\n    (direction: 'previous' | 'next') => {\n      let nextIndex = -1\n      if (direction === 'next') {\n        nextIndex = selectedIndexRef.current < childCount - 1 ? selectedIndexRef.current + 1 : 0\n      }\n      if (direction === 'previous') {\n        nextIndex = selectedIndexRef.current > 0 ? selectedIndexRef.current - 1 : childCount - 1\n      }\n\n      // Delegate scrolling to virtual list if necessary\n      if (virtualList) {\n        virtualListScrollToIndexRef?.current?.(nextIndex)\n        setActiveIndex({index: nextIndex, scrollIntoView: false})\n      } else {\n        setActiveIndex({index: nextIndex})\n      }\n\n      enableChildContainerPointerEvents(false)\n    },\n    [childCount, enableChildContainerPointerEvents, setActiveIndex, virtualList]\n  )\n\n  /**\n   * Set active index whenever initial index changes\n   */\n  useEffect(() => {\n    setActiveIndex({index: initialSelectedIndex, scrollIntoView: true})\n  }, [initialSelectedIndex, setActiveIndex])\n\n  /**\n   * Re-enable child pointer events on any mouse move event\n   */\n  useEffect(() => {\n    function handleMouseMove() {\n      enableChildContainerPointerEvents(true)\n    }\n    document.addEventListener('mousemove', handleMouseMove)\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove)\n    }\n  }, [enableChildContainerPointerEvents])\n\n  /**\n   * Listen to keyboard events on header input element\n   */\n  useEffect(() => {\n    function handleKeyDown(event: KeyboardEvent) {\n      const childElements = Array.from(childContainerElement?.children || []) as HTMLElement[]\n\n      if (!childElements.length) {\n        return\n      }\n\n      if (event.key === 'ArrowDown') {\n        event.preventDefault()\n        scrollToAdjacentItem('next')\n      }\n      if (event.key === 'ArrowUp') {\n        event.preventDefault()\n        scrollToAdjacentItem('previous')\n      }\n      if (event.key === 'Enter') {\n        event.preventDefault()\n        const currentElement = childElements.find(\n          (el) => Number(el.dataset.index) === selectedIndexRef.current\n        )\n\n        if (currentElement) {\n          // Find the closest available clickable element - if not the current element, then query its children.\n          const clickableElement = CLICKABLE_CHILD_TAGS.includes(\n            currentElement.tagName.toLowerCase()\n          )\n            ? currentElement\n            : (currentElement.querySelector(CLICKABLE_CHILD_TAGS.join(',')) as HTMLElement)\n          clickableElement?.click()\n        }\n      }\n    }\n    headerInputElement?.addEventListener('keydown', handleKeyDown)\n    return () => {\n      headerInputElement?.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [childContainerElement, headerInputElement, scrollToAdjacentItem])\n\n  /**\n   * Listen to keyboard arrow events on the 'closest' parent [data-overflow] element to the child container.\n   * On arrow press: focus the header input element and then navigate accordingly.\n   *\n   * Done to account for when users focus a wrapping element with overflow (by dragging its scroll handle)\n   * and then try navigate with the keyboard.\n   */\n  useEffect(() => {\n    function handleKeydown(event: KeyboardEvent) {\n      if (event.key === 'ArrowDown') {\n        event.preventDefault()\n        headerInputElement?.focus()\n        scrollToAdjacentItem('next')\n      }\n      if (event.key === 'ArrowUp') {\n        event.preventDefault()\n        headerInputElement?.focus()\n        scrollToAdjacentItem('previous')\n      }\n    }\n\n    const parentOverflowElement = childContainerElement?.closest('[data-overflow]')\n    parentOverflowElement?.addEventListener('keydown', handleKeydown as EventListener)\n    return () => {\n      parentOverflowElement?.removeEventListener('keydown', handleKeydown as EventListener)\n    }\n  }, [childContainerElement, headerInputElement, scrollToAdjacentItem])\n\n  /**\n   * Track focus / blur state on the list's input element and store state in `data-focused` attribute on\n   * a separate container element.\n   */\n  useEffect(() => {\n    function handleMarkContainerAsFocused(focused: boolean) {\n      return () => containerElement?.setAttribute('data-focused', focused.toString())\n    }\n\n    headerInputElement?.addEventListener('blur', handleMarkContainerAsFocused(false))\n    headerInputElement?.addEventListener('focus', handleMarkContainerAsFocused(true))\n    return () => {\n      headerInputElement?.removeEventListener('blur', handleMarkContainerAsFocused(false))\n      headerInputElement?.removeEventListener('focus', handleMarkContainerAsFocused(true))\n    }\n  }, [containerElement, headerInputElement])\n\n  /**\n   * Track mouse enter / leave state on child container and store state in `data-hovered` attribute on\n   * a separate container element.\n   */\n  useEffect(() => {\n    function handleMarkChildrenAsHovered(hovered: boolean) {\n      return () => containerElement?.setAttribute('data-hovered', hovered.toString())\n    }\n\n    childContainerElement?.addEventListener('mouseenter', handleMarkChildrenAsHovered(true))\n    childContainerElement?.addEventListener('mouseleave', handleMarkChildrenAsHovered(false))\n    return () => {\n      childContainerElement?.removeEventListener('mouseenter', handleMarkChildrenAsHovered(true))\n      childContainerElement?.removeEventListener('mouseleave', handleMarkChildrenAsHovered(false))\n    }\n  }, [childContainerElement, containerElement])\n\n  /**\n   * Temporarily disable pointer events (or 'flush' existing hover states) on child count changes.\n   */\n  useEffect(() => {\n    enableChildContainerPointerEvents(false)\n  }, [childCount, enableChildContainerPointerEvents])\n\n  /**\n   * If this is a virtual list - re-assign aria-selected state on all child elements on any DOM mutations.\n   *\n   * Useful since virtual lists will constantly mutate the DOM on scroll, and we want to ensure that\n   * new elements coming into view are rendered with the correct selected state.\n   */\n  useEffect(() => {\n    if (!virtualList) {\n      return undefined\n    }\n\n    const mutationObserver = new MutationObserver(handleReassignSelectedStateThrottled)\n\n    if (childContainerElement) {\n      mutationObserver.observe(childContainerElement, {\n        childList: true,\n        subtree: true,\n      })\n    }\n\n    return () => {\n      mutationObserver.disconnect()\n    }\n  }, [childContainerElement, handleReassignSelectedStateThrottled, virtualList])\n\n  /**\n   * Apply initial attributes\n   */\n  useEffect(() => {\n    childContainerElement?.setAttribute('aria-multiselectable', ariaMultiselectable.toString())\n    childContainerElement?.setAttribute('aria-label', ariaChildrenLabel)\n    childContainerElement?.setAttribute('id', `${id}-children`)\n    childContainerElement?.setAttribute('role', 'listbox')\n\n    containerElement?.setAttribute('data-level', level.toString())\n\n    headerInputElement?.setAttribute('aria-autocomplete', 'list')\n    headerInputElement?.setAttribute('aria-expanded', 'true')\n    headerInputElement?.setAttribute('aria-controls', `${id}-children`)\n    headerInputElement?.setAttribute('aria-label', ariaHeaderLabel)\n    headerInputElement?.setAttribute('role', 'combobox')\n\n    pointerOverlayElement?.setAttribute('data-enabled', 'true')\n  }, [\n    ariaChildrenLabel,\n    ariaHeaderLabel,\n    ariaMultiselectable,\n    childContainerElement,\n    containerElement,\n    headerInputElement,\n    id,\n    level,\n    pointerOverlayElement,\n  ])\n\n  /**\n   * Focus header input on mount (non-touch only)\n   */\n  useEffect(() => {\n    if (autoFocus) {\n      if (!supportsTouch) {\n        headerInputElement?.focus()\n      }\n    }\n  }, [autoFocus, headerInputElement])\n\n  return (\n    <CommandListContext.Provider\n      value={{\n        level,\n        onChildClick: handleChildClick,\n        onChildMouseDown: handleChildMouseDown,\n        onChildMouseEnter: handleChildMouseEnter,\n        setVirtualListScrollToIndex: handleSetVirtualListScrollToIndex,\n      }}\n    >\n      {children}\n    </CommandListContext.Provider>\n  )\n}\n\nexport function useCommandList() {\n  const context = useContext(CommandListContext)\n  if (context === undefined) {\n    throw new Error('useCommandList must be used within a CommandListProvider')\n  }\n  return context\n}\n","import {Box, Card, Flex, Text, Theme} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {TextWithTone} from '../../../../../components/TextWithTone'\nimport type {SearchableType} from '../../../../../search'\n\ninterface TypePillsProps {\n  availableCharacters?: number\n  types: SearchableType[]\n}\n\nconst DEFAULT_AVAILABLE_CHARS = 40 // excluding \"+x more\" suffix\n\nconst PillCard = styled(Card)<{$collapsible?: boolean}>`\n  background: ${({theme}: {theme: Theme}) =>\n    theme.sanity.color.selectable?.primary.enabled.code.bg};\n  flex-shrink: ${({$collapsible}) => ($collapsible ? 1 : 0)};\n  overflow: hidden;\n`\n\nconst RemainingCountBox = styled(Box)`\n  flex-shrink: 0;\n`\n\nexport function TypePills({availableCharacters = DEFAULT_AVAILABLE_CHARS, types}: TypePillsProps) {\n  /**\n   * Get the total number of visible document types whose titles fit within `availableCharacters` count.\n   * The first document is always included, regardless of whether it fits within `availableCharacters` or not.\n   */\n  const visibleTypes = useMemo(\n    () =>\n      types.reduce<SearchableType[]>(\n        (function () {\n          let remaining = availableCharacters\n          return function (acc, val, index) {\n            const title = typeTitle(val)\n            remaining -= title.length\n\n            // Always include the first type, regardless of title length\n            if (index === 0) {\n              acc.push(val)\n            } else if (availableCharacters > title.length && remaining > title.length) {\n              acc.push(val)\n            }\n            return acc\n          }\n        })(),\n        []\n      ),\n    [availableCharacters, types]\n  )\n\n  const remainingCount = types.length - visibleTypes.length\n\n  if (!types.length) {\n    return null\n  }\n\n  return (\n    <Flex align=\"center\" gap={1}>\n      {visibleTypes.map((schemaType) => {\n        const title = typeTitle(schemaType)\n\n        return (\n          <PillCard $collapsible={visibleTypes.length === 1} key={title} padding={2} radius={2}>\n            <TextWithTone size={1} textOverflow=\"ellipsis\" tone=\"primary\" weight=\"medium\">\n              {title}\n            </TextWithTone>\n          </PillCard>\n        )\n      })}\n      {!!remainingCount && (\n        <Text muted size={1}>\n          <RemainingCountBox marginLeft={1}>+{remainingCount} more</RemainingCountBox>\n        </Text>\n      )}\n    </Flex>\n  )\n}\n\nfunction typeTitle(schemaType: SearchableType) {\n  return schemaType.title ?? schemaType.name\n}\n","import {ClockIcon, CloseIcon} from '@sanity/icons'\nimport {Box, Button, Flex, Text} from '@sanity/ui'\nimport React, {MouseEvent, useCallback} from 'react'\nimport styled, {css} from 'styled-components'\nimport {useCommandList} from '../contexts/commandList'\nimport type {RecentSearchTerms} from '../datastores/recentSearches'\nimport {TypePills} from './TypePills'\n\nexport interface RecentSearchesProps {\n  index: number\n  maxVisibleTypePillChars?: number\n  onClick: (value: RecentSearchTerms) => void\n  onDelete: (event: MouseEvent) => void\n  value: RecentSearchTerms\n}\n\nconst DEFAULT_COMBINED_TYPE_COUNT = 40\n\nconst RecentSearchItemButton = styled(Button)<{$level: number}>(({$level}) => {\n  return css`\n    [data-focused='true'][data-level='${$level}'] &,\n    [data-hovered='true'][data-level='${$level}'] & {\n      &[data-active='true'] {\n        // TODO: investigate issue where this background isn't respected after switching studio theme _multiple_ times (at least twice)\n        background: ${({theme}) => theme.sanity.color.button.bleed.default.hovered.bg};\n        // Disable box-shadow to hide the halo effect when we have keyboard focus over a selected <Button>\n        box-shadow: none;\n      }\n    }\n  `\n})\n\nconst SearchItemPillsBox = styled(Box)`\n  flex-shrink: 3;\n`\n\nconst SearchItemQueryBox = styled(Box)`\n  flex-shrink: 2;\n`\n\nconst CloseButtonDiv = styled.div`\n  opacity: 0.8;\n  visibility: hidden;\n\n  @media (hover: hover) {\n    ${RecentSearchItemButton}:hover & {\n      visibility: visible;\n    }\n    &:hover {\n      opacity: 0.4;\n    }\n  }\n`\n\nexport function RecentSearchItem(props: RecentSearchesProps) {\n  const {\n    index,\n    maxVisibleTypePillChars = DEFAULT_COMBINED_TYPE_COUNT,\n    value,\n    onClick,\n    onDelete,\n  } = props\n\n  const {level, onChildClick, onChildMouseDown, onChildMouseEnter} = useCommandList()\n\n  const handleRecentSearchClick = useCallback(() => {\n    onChildClick?.()\n    onClick(value)\n  }, [onChildClick, onClick, value])\n\n  const typesSelected = value.types.length > 0\n\n  // Determine how many characters are left to render type pills\n  const availableCharacters = maxVisibleTypePillChars - value.query.length\n\n  return (\n    <RecentSearchItemButton\n      $level={level}\n      data-index={index}\n      mode=\"bleed\"\n      onClick={handleRecentSearchClick}\n      onMouseDown={onChildMouseDown}\n      onMouseEnter={onChildMouseEnter(index)}\n      paddingLeft={3}\n      paddingRight={1}\n      paddingY={1}\n    >\n      <Flex align=\"center\">\n        <Box paddingY={2}>\n          <Text size={1}>\n            <ClockIcon />\n          </Text>\n        </Box>\n        <Flex align=\"center\" flex={1} gap={3} justify=\"flex-start\" marginLeft={3}>\n          {value.query && (\n            <SearchItemQueryBox marginLeft={1}>\n              <Text textOverflow=\"ellipsis\">{value.query}</Text>\n            </SearchItemQueryBox>\n          )}\n          {typesSelected && (\n            <SearchItemPillsBox>\n              <TypePills availableCharacters={availableCharacters} types={value.types} />\n            </SearchItemPillsBox>\n          )}\n        </Flex>\n\n        {/* TODO: this is neither semantic nor accessible, consider revising */}\n        <CloseButtonDiv onClick={onDelete}>\n          <Flex padding={2}>\n            <Text size={1}>\n              <CloseIcon />\n            </Text>\n          </Flex>\n        </CloseButtonDiv>\n      </Flex>\n    </RecentSearchItemButton>\n  )\n}\n","import {Box, Button, Label, Stack, Text, useMediaIndex} from '@sanity/ui'\nimport React, {Dispatch, MouseEvent, SetStateAction, useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport type {SearchTerms} from '../../../../../search'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {Instructions} from './Instructions'\nimport {PointerOverlay} from './PointerOverlay'\nimport {RecentSearchItem} from './RecentSearchItem'\n\ninterface RecentSearchesProps {\n  setChildContainerRef: Dispatch<SetStateAction<HTMLDivElement | null>>\n  setPointerOverlayRef: Dispatch<SetStateAction<HTMLDivElement | null>>\n  showFiltersOnClick?: boolean\n  onClear?: () => void\n}\n\n// Max character count of selected document types (combined) by breakpoint\nconst MAX_COMBINED_TYPE_COUNT_SMALL = 20\nconst MAX_COMBINED_TYPE_COUNT_LARGE = 40\n\nconst RecentSearchesBox = styled(Box)`\n  position: relative;\n`\n\nconst RecentSearchesInnerBox = styled(Box)`\n  position: relative;\n`\n\nexport function RecentSearches({\n  setChildContainerRef,\n  setPointerOverlayRef,\n  showFiltersOnClick,\n  onClear,\n}: RecentSearchesProps) {\n  const {\n    dispatch,\n    recentSearchesStore,\n    state: {recentSearches},\n  } = useSearchState()\n\n  const mediaIndex = useMediaIndex()\n\n  const maxVisibleTypePillChars = useMemo(() => {\n    return mediaIndex < 2 ? MAX_COMBINED_TYPE_COUNT_SMALL : MAX_COMBINED_TYPE_COUNT_LARGE\n  }, [mediaIndex])\n\n  const handleClearRecentSearchesClick = useCallback(() => {\n    // Remove terms from Local Storage\n    if (recentSearchesStore) {\n      const updatedRecentSearches = recentSearchesStore.removeSearchTerms()\n      dispatch({recentSearches: updatedRecentSearches, type: 'RECENT_SEARCHES_SET'})\n    }\n    onClear?.()\n  }, [dispatch, recentSearchesStore, onClear])\n\n  const handleRecentSearchClick = useCallback(\n    (searchTerms: SearchTerms) => {\n      // Optionally show filters panel if search terms are present\n      if (showFiltersOnClick && searchTerms.types.length) {\n        dispatch({type: 'FILTERS_SHOW'})\n      }\n      dispatch({type: 'TERMS_SET', terms: searchTerms})\n      // Add to Local Storage\n      if (recentSearchesStore) {\n        const updatedRecentSearches = recentSearchesStore?.addSearchTerm(searchTerms)\n        dispatch({recentSearches: updatedRecentSearches, type: 'RECENT_SEARCHES_SET'})\n      }\n    },\n    [dispatch, recentSearchesStore, showFiltersOnClick]\n  )\n\n  const handleRecentSearchDelete = useCallback(\n    (index: number) => (event: MouseEvent) => {\n      event.stopPropagation()\n      // Remove from Local Storage\n      if (recentSearchesStore) {\n        const updatedRecentSearches = recentSearchesStore?.removeSearchTermAtIndex(index)\n        dispatch({recentSearches: updatedRecentSearches, type: 'RECENT_SEARCHES_SET'})\n      }\n    },\n    [dispatch, recentSearchesStore]\n  )\n\n  return (\n    <RecentSearchesBox flex={1}>\n      {recentSearches.length ? (\n        <>\n          <Box paddingBottom={2} paddingTop={4} paddingX={3}>\n            <Label muted size={1}>\n              Recent searches\n            </Label>\n          </Box>\n          <RecentSearchesInnerBox>\n            <PointerOverlay ref={setPointerOverlayRef} />\n            <Stack paddingX={1} paddingTop={1} ref={setChildContainerRef} space={1}>\n              {recentSearches?.map((recentSearch, index) => (\n                <RecentSearchItem\n                  data-index={index}\n                  index={index}\n                  key={recentSearch.__recent.timestamp}\n                  maxVisibleTypePillChars={maxVisibleTypePillChars}\n                  onClick={handleRecentSearchClick}\n                  onDelete={handleRecentSearchDelete(index)}\n                  value={recentSearch}\n                />\n              ))}\n            </Stack>\n          </RecentSearchesInnerBox>\n          <Box padding={1}>\n            <Button\n              justify=\"flex-start\"\n              fontSize={1}\n              mode=\"bleed\"\n              onClick={handleClearRecentSearchesClick}\n              paddingX={2}\n              paddingY={3}\n              tone=\"default\"\n            >\n              <Text muted size={1}>\n                Clear recent searches\n              </Text>\n            </Button>\n          </Box>\n        </>\n      ) : (\n        <Instructions />\n      )}\n    </RecentSearchesBox>\n  )\n}\n","import {Box, TextInput} from '@sanity/ui'\nimport React, {ComponentProps, forwardRef} from 'react'\nimport styled, {css} from 'styled-components'\n\ninterface CustomTextInputProps extends ComponentProps<typeof TextInput> {\n  smallClearButton?: boolean\n}\n\nconst CustomTextInputBox = styled(Box)(({smallClearButton}: {smallClearButton?: boolean}) => {\n  return css`\n    width: 100%;\n\n    input + span {\n      background: none;\n    }\n\n    [data-qa='clear-button'] {\n      background: none;\n      box-shadow: none;\n      display: flex; /* TODO: hack, currently used to vertically center <TextInput>'s clearButton */\n      transform: ${smallClearButton ? 'scale(0.8)' : 'scale(1)'};\n      &:hover {\n        opacity: 0.5;\n      }\n    }\n  `\n})\n\nexport const CustomTextInput = forwardRef<HTMLInputElement, CustomTextInputProps>(\n  function CustomTextInput(props, ref) {\n    const {smallClearButton, ...rest} = props\n\n    return (\n      <CustomTextInputBox smallClearButton={smallClearButton}>\n        <TextInput {...rest} ref={ref} />\n      </CustomTextInputBox>\n    )\n  }\n)\n","import {CloseIcon, ControlsIcon, SearchIcon, SpinnerIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, studioTheme, Theme} from '@sanity/ui'\nimport React, {Dispatch, SetStateAction, useCallback, useEffect, useRef, useState} from 'react'\nimport styled, {keyframes} from 'styled-components'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {supportsTouch} from '../utils/supportsTouch'\nimport {CustomTextInput} from './CustomTextInput'\n\ninterface SearchHeaderProps {\n  onClose?: () => void\n  setHeaderInputRef: Dispatch<SetStateAction<HTMLInputElement | null>>\n}\n\nconst rotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`\n\nconst AnimatedSpinnerIcon = styled(SpinnerIcon)`\n  animation: ${rotate} 500ms linear infinite;\n`\n\nconst FilterBox = styled(Box)`\n  position: relative;\n`\n\nconst SearchHeaderCard = styled(Card)`\n  flex-shrink: 0;\n`\n\nconst NotificationBadge = styled.div`\n  align-items: center;\n  background: ${({theme}: {theme: Theme}) => theme.sanity.color.solid.primary.hovered.bg};\n  color: ${({theme}: {theme: Theme}) => theme.sanity.color.solid.primary.hovered.fg};\n  border-radius: 100%;\n  display: flex;\n  font-family: ${studioTheme.fonts.text.family};\n  font-size: calc(8 / 16 * 1rem);\n  font-weight: ${studioTheme.fonts.text.weights.semibold};\n  height: 14px;\n  justify-content: center;\n  pointer-events: none;\n  position: absolute;\n  right: -2px;\n  top: -2px;\n  width: 14px;\n`\n\nexport function SearchHeader({onClose, setHeaderInputRef}: SearchHeaderProps) {\n  const [filterButtonElement, setFilterButtonRef] = useState<HTMLButtonElement | null>(null)\n  const isMountedRef = useRef(false)\n\n  const {\n    dispatch,\n    state: {\n      filtersVisible,\n      result: {loading},\n      terms,\n    },\n  } = useSearchState()\n\n  const handleFiltersToggle = useCallback(() => dispatch({type: 'FILTERS_TOGGLE'}), [dispatch])\n  const handleQueryChange = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) =>\n      dispatch({type: 'TERMS_QUERY_SET', query: e.currentTarget.value}),\n    [dispatch]\n  )\n  const handleQueryClear = useCallback(() => {\n    dispatch({type: 'TERMS_QUERY_SET', query: ''})\n  }, [dispatch])\n\n  // Focus filter button (when filters are hidden after initial mount)\n  useEffect(() => {\n    if (isMountedRef?.current && !filtersVisible && !supportsTouch) {\n      filterButtonElement?.focus()\n    }\n  }, [filterButtonElement, filtersVisible])\n\n  useEffect(() => {\n    isMountedRef.current = true\n  }, [])\n\n  return (\n    <SearchHeaderCard borderBottom>\n      <Flex align=\"center\" flex={1}>\n        {/* Search field */}\n        <Box\n          flex={1}\n          paddingLeft={onClose ? 2 : 1}\n          paddingRight={onClose ? 2 : 0}\n          paddingY={onClose ? 2 : 1}\n        >\n          <CustomTextInput\n            autoComplete=\"off\"\n            // border={false} // TODO: re-enable when flashing border issue is fixed\n            clearButton={!!terms.query}\n            fontSize={2}\n            icon={loading ? AnimatedSpinnerIcon : SearchIcon}\n            onChange={handleQueryChange}\n            onClear={handleQueryClear}\n            placeholder=\"Search\"\n            ref={setHeaderInputRef}\n            // smallClearButton\n            spellCheck={false}\n            value={terms.query}\n          />\n        </Box>\n\n        {/* Filter toggle */}\n        <Card borderLeft={!!onClose} padding={onClose ? 2 : 1}>\n          <FilterBox>\n            <Button\n              aria-expanded={filtersVisible}\n              aria-label=\"Filter\"\n              height=\"fill\"\n              icon={ControlsIcon}\n              mode=\"bleed\"\n              onClick={handleFiltersToggle}\n              padding={3}\n              ref={setFilterButtonRef}\n              selected={filtersVisible}\n              tone=\"default\"\n            />\n            {terms.types.length > 0 && <NotificationBadge>{terms.types.length}</NotificationBadge>}\n          </FilterBox>\n        </Card>\n\n        {/* (Fullscreen) Close button */}\n        {onClose && (\n          <Card borderLeft padding={2}>\n            <Button aria-label=\"Close search\" icon={CloseIcon} mode=\"bleed\" onClick={onClose} />\n          </Card>\n        )}\n      </Flex>\n    </SearchHeaderCard>\n  )\n}\n","import {studioTheme} from '@sanity/ui'\n\nconst IS_MAC =\n  typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n\n// Enable debug mode when the current URL contains the below fragment.\n// Must be prefixed with `_debug_`\nexport const DEBUG_FRAGMENT = '_debug_search_score'\n\n// Findability version, prepended to every search query for future measurement\nexport const FINDABILITY_MVI = 2\n\n// Max number of records to fetch per search request - intentionally set high to workaround\n// current limitations with studio search config\nexport const SEARCH_LIMIT = 1000\n\nexport const GLOBAL_SEARCH_KEY = 'k'\nexport const GLOBAL_SEARCH_KEY_MODIFIER = IS_MAC ? 'Cmd' : 'Ctrl'\n\nexport const POPOVER_INPUT_PADDING = studioTheme.space[1] // px\nexport const POPOVER_MAX_HEIGHT = 735 // px\nexport const POPOVER_MAX_WIDTH = 800 // px\n\nexport const SUBHEADER_HEIGHT_LARGE = 51 // px\nexport const SUBHEADER_HEIGHT_SMALL = 43 // px\n\nexport const VIRTUAL_LIST_ITEM_HEIGHT = 55 // px\nexport const VIRTUAL_LIST_OVERSCAN = 4\n","import {Flex, Inline, Text, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {TypePills} from './TypePills'\n\nconst Semibold = styled.span`\n  font-weight: ${({theme}: {theme: Theme}) => theme.sanity.fonts.text.weights.semibold};\n`\n\nexport function NoResults() {\n  const {state} = useSearchState()\n\n  const typesSelected = state.terms.types.length > 0\n\n  return (\n    <Flex\n      align=\"center\"\n      aria-live=\"assertive\"\n      direction=\"column\"\n      flex={1}\n      gap={4}\n      paddingX={4}\n      paddingY={5}\n    >\n      <Text muted>\n        No results for <Semibold>{state.terms.query}</Semibold>\n      </Text>\n      {typesSelected && (\n        <Flex align=\"center\">\n          <Inline space={2}>\n            <Text muted size={1}>\n              in\n            </Text>\n            <TypePills types={state.terms.types} />\n          </Inline>\n        </Flex>\n      )}\n    </Flex>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {TextWithTone} from '../../../../../components/TextWithTone'\n\nexport function SearchError() {\n  return (\n    <Flex\n      align=\"center\"\n      aria-live=\"assertive\"\n      direction=\"column\"\n      flex={1}\n      gap={3}\n      marginY={2}\n      padding={4}\n    >\n      <Box marginBottom={1}>\n        <TextWithTone tone=\"critical\">\n          <WarningOutlineIcon />\n        </TextWithTone>\n      </Box>\n      <TextWithTone size={2} tone=\"critical\" weight=\"semibold\">\n        Something went wrong while searching\n      </TextWithTone>\n      <TextWithTone size={1} tone=\"critical\">\n        Please try again or check your connection\n      </TextWithTone>\n    </Flex>\n  )\n}\n","import {Box, Card, CardTone, Code, Inline, Stack, Tooltip} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {WeightedHit} from '../../../../../../search'\n\ninterface DebugScoreProps {\n  data: WeightedHit\n}\n\nconst DebugScoreCard = styled(Card)`\n  cursor: help;\n  left: 0;\n  position: absolute;\n  top: 0;\n`\n\nexport function DebugOverlay({data}: DebugScoreProps) {\n  const {score} = data\n\n  let tone: CardTone = 'default'\n  if (score <= 0.1) {\n    tone = 'critical'\n  } else if (score >= 0.5) {\n    tone = 'primary'\n  }\n\n  const matchingStories = data.stories.filter((story) => story.score > 0)\n\n  return (\n    <>\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <Stack space={2}>\n              {matchingStories.length ? (\n                <>\n                  {matchingStories.map((story) => (\n                    <Inline key={story.path} space={3}>\n                      <Code size={0} weight=\"semibold\">\n                        {story.path}\n                      </Code>\n                      <Code size={0}>{story.why}</Code>\n                    </Inline>\n                  ))}\n                </>\n              ) : (\n                <Code size={0}>No matches</Code>\n              )}\n            </Stack>\n          </Box>\n        }\n        placement=\"bottom-start\"\n        portal\n      >\n        <DebugScoreCard padding={1} shadow={1} tone={tone}>\n          <Code size={0}>score: {score}</Code>\n        </DebugScoreCard>\n      </Tooltip>\n    </>\n  )\n}\n","import {AvatarStack, Box, Card, Text, Theme, Tooltip, TooltipProps} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled, {css, useTheme} from 'styled-components'\nimport {usePreviewCard, UserAvatar} from '../components'\nimport {DocumentPresence} from '../store'\nimport {isNonNullable} from '../util'\n\n/** @internal */\nexport interface DocumentPreviewPresenceProps {\n  presence: Omit<DocumentPresence, 'path'>[]\n}\n\nconst PRESENCE_MENU_POPOVER_PROPS: TooltipProps = {\n  portal: true,\n}\n\nconst AvatarStackCard = styled(Card)(({theme, $selected}: {theme: Theme; $selected?: boolean}) => {\n  const {color} = theme.sanity\n\n  return css`\n    --card-bg-color: inherit;\n    --card-fg-color: inherit;\n    --card-hairline-hard-color: ${$selected ? color.selectable?.default.pressed.border : undefined};\n  `\n})\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 150px;\n`\n\nconst getTooltipText = (presence: Omit<DocumentPresence, 'path'>[]) => {\n  if (presence.length === 1) {\n    return `${presence[0].user.displayName} is editing this document`\n  }\n\n  if (presence.length > 1) {\n    return `${presence.length} people are editing this document right now`\n  }\n\n  return undefined\n}\n\n/** @internal */\nexport function DocumentPreviewPresence(props: DocumentPreviewPresenceProps) {\n  const {presence} = props\n  const {color} = useTheme().sanity\n  const invertedScheme = color.dark ? 'light' : 'dark'\n  const {selected} = usePreviewCard()\n\n  const uniqueUsers = useMemo(\n    () =>\n      Array.from(new Set(presence.map((a) => a.user.id)))\n        .map((id) => {\n          return presence.find((a) => a.user.id === id)\n        })\n        .filter(isNonNullable),\n    [presence]\n  )\n\n  const tooltipContent = useMemo(() => {\n    return (\n      <TooltipContentBox padding={2}>\n        <Text align=\"center\" size={1}>\n          {getTooltipText(uniqueUsers)}\n        </Text>\n      </TooltipContentBox>\n    )\n  }, [uniqueUsers])\n\n  return (\n    <Tooltip content={tooltipContent} {...PRESENCE_MENU_POPOVER_PROPS}>\n      <AvatarStackCard scheme={selected ? invertedScheme : undefined} $selected={selected}>\n        <AvatarStack maxLength={2}>\n          {uniqueUsers.map((item) => (\n            <UserAvatar key={item.user.id} user={item.user} />\n          ))}\n        </AvatarStack>\n      </AvatarStackCard>\n    </Tooltip>\n  )\n}\n","// disable overlay rendering entirely and only display presence in fields\nexport const DISABLE_OVERLAY = false\n\n// number of avatars to display on each fields (will be stacked and have a counter if more than 3 users in a field)\nexport const MAX_AVATARS_DOCK = 3\nexport const MAX_AVATARS_GLOBAL = 3\nexport const DEFAULT_MAX_AVATARS_FIELDS = 3\n\n// distance between avatars in pixels (negative number means overlap)\nexport const AVATAR_DISTANCE = -4\n\n// height/width of the avatars in pixels\nexport const AVATAR_SIZE = 23\n\nexport const AVATAR_ARROW_HEIGHT = 4\n\n// these are the thresholds in which the intersection observers will notify about regions going in/out of viewport\n// these will affect the thresholds below, so make sure to coordinate edits\nexport const INTERSECTION_THRESHOLDS = [0, 0.25, 0.75, 1]\n\n// The elements that reports intersection changes are padded top+bottom in order to detect when entering leaving\nexport const INTERSECTION_ELEMENT_PADDING = 23\n\n// Make the avatars snap to the top dock when they are closer than this from the top\nexport const SNAP_TO_DOCK_DISTANCE_TOP = 8\n\n// Make the avatars snap to the bottom dock when they are closer than this from the bottom\nexport const SNAP_TO_DOCK_DISTANCE_BOTTOM = 8\n\n// The avatar will move to the right when this close (in pixels) to the top\nexport const SLIDE_RIGHT_THRESHOLD_TOP = 20\n\n// The avatar will move to the right when this close (in pixels) to the bottom\nexport const SLIDE_RIGHT_THRESHOLD_BOTTOM = 20\n\n// Switch on debug mode (will display regions)\nexport const DEBUG = false\n","export const splitRight = <T>(array: T[], max: number): [T[], T[]] => {\n  const indexFromMax = array.length > max ? max - 1 : max\n  const idx = Math.max(0, array.length - indexFromMax)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n\n// export const splitRight = <T>(array: T[], index: number): [T[], T[]] => {\n//   const idx = Math.max(0, array.length - index)\n//   return [array.slice(0, idx), array.slice(idx)]\n// }\n//\nexport const split = <T>(array: T[], index: number): [T[], T[]] => {\n  const idx = Math.max(0, index)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n","import styled from 'styled-components'\nimport {Flex} from '@sanity/ui'\n\nexport const FlexWrapper = styled(Flex)`\n  & > div:first-child {\n    flex: 1;\n    min-width: 0;\n  }\n`\n\nexport const InnerBox = styled(Flex)`\n  height: 23px;\n  min-width: 23px;\n  vertical-align: top;\n`\n","import React from 'react'\nimport {FormNodePresence} from './types'\n\n/** @internal */\nexport const FormFieldPresenceContext = React.createContext<FormNodePresence[]>([])\n","import React, {useMemo} from 'react'\nimport {Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {FormNodePresence} from './types'\n\ninterface PresenceTooltipProps {\n  children?: React.ReactElement\n  items: FormNodePresence[]\n}\n\n/**\n * The \"documentScrollElement\" is being passed to the PortalProvider in DocumentPanel.\n * The default portal element provided by the PortalProvider causes some layout issues with the Tooltip.\n * Therefore, another portal element (i.e. the \"documentScrollElement\") is being used to solve this.\n */\n\nexport function PresenceTooltip(props: PresenceTooltipProps) {\n  const {children, items} = props\n\n  const content = useMemo(\n    () => (\n      <Stack padding={1}>\n        {items.map((item) => (\n          <Flex align=\"center\" gap={2} padding={1} key={item.user.id}>\n            <div>\n              <UserAvatar user={item.user} status=\"online\" />\n            </div>\n\n            <Text size={1}>{item.user.displayName}</Text>\n          </Flex>\n        ))}\n      </Stack>\n    ),\n    [items]\n  )\n\n  return (\n    <Tooltip content={content} placement=\"top\" portal=\"documentScrollElement\">\n      {children}\n    </Tooltip>\n  )\n}\n","import {createTrackerScope, Reported} from '../../components/react-track-elements'\nimport {FieldPresenceData} from '../types'\n\nexport type ReportedPresenceData = Reported<FieldPresenceData>\n\nconst {Tracker, useReporter, useReportedValues} = createTrackerScope<FieldPresenceData>()\n\nexport {Tracker, useReporter, useReportedValues}\n","import React, {memo, useContext, useId} from 'react'\nimport {sortBy, uniqBy} from 'lodash'\nimport {AvatarCounter, AvatarPosition} from '@sanity/ui'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEFAULT_MAX_AVATARS_FIELDS,\n  DISABLE_OVERLAY,\n} from './constants'\nimport {splitRight} from './utils'\nimport {FlexWrapper, InnerBox} from './FieldPresence.styled'\nimport {FormFieldPresenceContext} from './context'\nimport {PresenceTooltip} from './PresenceTooltip'\nimport {useReporter} from './overlay/tracker'\nimport {FormNodePresence} from './types'\n\n/** @internal */\nexport interface FieldPresenceProps {\n  presence: FormNodePresence[]\n  maxAvatars: number\n}\n\n/** @internal */\nexport const FieldPresence = DISABLE_OVERLAY\n  ? FieldPresenceWithoutOverlay\n  : FieldPresenceWithOverlay\n\n/** @internal */\nexport function FieldPresenceWithOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n  const ref = React.useRef(null)\n\n  useReporter(useId(), () => ({presence, element: ref.current!, maxAvatars: maxAvatars}))\n\n  const minWidth = -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * props.maxAvatars\n\n  return (\n    <FlexWrapper\n      justify=\"flex-end\"\n      ref={ref}\n      style={{minWidth: minWidth, minHeight: AVATAR_SIZE}}\n    />\n  )\n}\n\n/** @internal */\nexport function FieldPresenceWithoutOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n\n  if (!presence.length) {\n    return null\n  }\n\n  return <FieldPresenceInner presence={presence} maxAvatars={maxAvatars} />\n}\n\n/** @internal */\nexport interface FieldPresenceInnerProps {\n  maxAvatars?: number\n  presence: FormNodePresence[]\n  stack?: boolean\n  position?: AvatarPosition\n  animateArrowFrom?: AvatarPosition\n}\n\nfunction calcAvatarStackWidth(len: number) {\n  return -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * len\n}\n\n/** @internal */\nexport const FieldPresenceInner = memo(function FieldPresenceInner({\n  presence,\n  position = 'inside',\n  animateArrowFrom = 'inside',\n  maxAvatars = DEFAULT_MAX_AVATARS_FIELDS,\n  stack = true,\n}: FieldPresenceInnerProps) {\n  const uniquePresence = uniqBy(presence || [], (item) => item.user.id)\n  const sorted = sortBy(uniquePresence, (_presence) => _presence.lastActiveAt)\n  const [hidden, visible] = stack ? splitRight(sorted, maxAvatars) : [[], sorted]\n\n  const avatars = [\n    ...visible.reverse().map((_visible) => ({\n      key: _visible.user.id,\n      element: (\n        <UserAvatar\n          animateArrowFrom={animateArrowFrom}\n          position={position}\n          status=\"online\"\n          user={_visible.user}\n        />\n      ),\n    })),\n    hidden.length >= 2\n      ? {\n          key: 'counter',\n          element: <AvatarCounter count={hidden.length} />,\n        }\n      : null,\n  ].filter(Boolean)\n\n  const maxWidth = calcAvatarStackWidth(maxAvatars)\n  const currWidth = Math.min(calcAvatarStackWidth(uniquePresence.length), maxWidth)\n\n  return (\n    <FlexWrapper justify=\"flex-end\" style={{width: maxWidth}}>\n      <div />\n\n      <PresenceTooltip items={uniquePresence}>\n        <InnerBox direction=\"row-reverse\" style={{width: currWidth}}>\n          {avatars.map(\n            (av, i) =>\n              av && (\n                <div\n                  key={av.key}\n                  style={{\n                    position: 'absolute',\n                    transform: `translate3d(${-i * (AVATAR_SIZE + AVATAR_DISTANCE)}px, 0px, 0px)`,\n                    transitionProperty: 'transform',\n                    transitionDuration: '200ms',\n                    transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n                    zIndex: 100 - i,\n                  }}\n                >\n                  {av.element}\n                </div>\n              )\n          )}\n        </InnerBox>\n      </PresenceTooltip>\n    </FlexWrapper>\n  )\n})\n","import {Path} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport React, {useMemo} from 'react'\nimport {FormFieldPresenceContext} from './context'\n\nconst EMPTY_ARRAY: never[] = []\n\nfunction trimChildPath(path: Path, childPath: Path) {\n  return PathUtils.startsWith(path, childPath) ? PathUtils.trimLeft(path, childPath) : EMPTY_ARRAY\n}\n\n/** @internal */\nexport interface PresenceScopeProps {\n  readOnly?: boolean\n  path: Path\n  children: React.ReactNode\n}\n\n/** @internal */\nexport function PresenceScope(props: PresenceScopeProps) {\n  const {readOnly, path, children} = props\n  const contextPresence = React.useContext(FormFieldPresenceContext)\n\n  const childPresence = useMemo(() => {\n    return readOnly\n      ? EMPTY_ARRAY\n      : (contextPresence || EMPTY_ARRAY)\n          .filter((presence) => {\n            return PathUtils.startsWith(path, presence.path)\n          })\n          .map((presence) => ({\n            ...presence,\n            path: trimChildPath(path, presence.path),\n          }))\n  }, [contextPresence, path, readOnly])\n\n  return (\n    <FormFieldPresenceContext.Provider value={childPresence}>\n      {children}\n    </FormFieldPresenceContext.Provider>\n  )\n}\n","import {Subject, Observable} from 'rxjs'\nimport {filter} from 'rxjs/operators'\n\nexport interface ObservableIntersectionObserver {\n  observe: (element: Element) => Observable<IntersectionObserverEntry>\n}\n\nexport const createIntersectionObserver = (\n  options?: IntersectionObserverInit\n): ObservableIntersectionObserver => {\n  const entries$ = new Subject<IntersectionObserverEntry>()\n  const intersectionObserver = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      entries$.next(entry)\n    })\n  }, options)\n  return {\n    observe: (element: Element) => {\n      return new Observable<IntersectionObserverEntry>((subscriber) => {\n        const subscription = entries$\n          .pipe(filter((entry) => entry.target === element))\n          .subscribe(subscriber)\n        intersectionObserver.observe(element)\n        return () => {\n          subscription.unsubscribe()\n          intersectionObserver.unobserve(element)\n        }\n      })\n    },\n  }\n}\n","import React from 'react'\nimport {tap} from 'rxjs/operators'\nimport type {ObservableIntersectionObserver} from './intersectionObserver'\n\nexport interface WithIntersectionProps {\n  onIntersection: (id: string, entry: IntersectionObserverEntry) => void\n  io: ObservableIntersectionObserver\n  id: string\n}\n\nexport const WithIntersection = (\n  props: WithIntersectionProps & React.HTMLProps<HTMLDivElement>\n) => {\n  const {onIntersection, io, id, ...rest} = props\n  const element = React.useRef<HTMLDivElement | null>(null)\n  React.useEffect(() => {\n    const el = element.current\n    if (!el) return undefined\n    const subscription = io\n      .observe(el)\n      .pipe(tap((entry) => onIntersection(id, entry)))\n      .subscribe()\n    return () => subscription.unsubscribe()\n  }, [io, id, onIntersection])\n  return <div ref={element} {...rest} />\n}\n","import styled, {css} from 'styled-components'\nimport {WithIntersection} from './WithIntersection'\n\ninterface StyleProps {\n  $debug: boolean\n  margins?: [number, number, number, number]\n}\n\nexport const RootWrapper = styled.div`\n  position: relative;\n`\n\nexport const OverlayWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  z-index: 13;\n`\n\nexport const RegionWrapper = css`\n  overflow: hidden;\n  pointer-events: none;\n  position: absolute;\n`\n\nexport const TopRegionWrapper = styled(WithIntersection)(({$debug, margins}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    z-index: 100;\n    position: sticky;\n    height: 1px;\n    top: ${margins ? `${margins[0] - 1}px` : undefined};\n    background-color: ${$debug ? 'red' : 'none'};\n  `\n})\n\nexport const MiddleRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    visibility: none;\n\n    ${$debug &&\n    css`\n      background: rgba(255, 0, 0, 0.25);\n      outline: 1px solid #00b;\n      visibility: visible;\n    `}\n  `\n})\n\nexport const BottomRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    position: sticky;\n    bottom: -1px;\n    height: 1px;\n    background-color: ${$debug ? 'blue' : 'transparent'};\n  `\n})\n","import React, {forwardRef, useCallback, useMemo, useRef, useState} from 'react'\nimport {\n  SNAP_TO_DOCK_DISTANCE_BOTTOM,\n  SNAP_TO_DOCK_DISTANCE_TOP,\n  DEBUG,\n  INTERSECTION_ELEMENT_PADDING,\n  INTERSECTION_THRESHOLDS,\n} from '../constants'\nimport {ReportedRegionWithRect, RegionWithIntersectionDetails, FieldPresenceData} from '../types'\nimport {createIntersectionObserver} from './intersectionObserver'\n\nimport {\n  RootWrapper,\n  OverlayWrapper,\n  TopRegionWrapper,\n  MiddleRegionWrapper,\n  BottomRegionWrapper,\n} from './RegionsWithIntersections.styled'\n\ninterface RegionsWithIntersectionsProps {\n  regions: ReportedRegionWithRect<FieldPresenceData>[]\n  render: (\n    regionsWithIntersectionDetails: RegionWithIntersectionDetails[],\n    containerWidth: number\n  ) => React.ReactNode | null\n  children: React.ReactNode\n  margins: [number, number, number, number]\n}\n\nconst toPx = (num: number) => `${num}px`\nconst negate = (num: number) => 0 - num\n\nexport const RegionsWithIntersections = forwardRef(function RegionsWithIntersections(\n  props: RegionsWithIntersectionsProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {regions, render, children, margins: marginsProp} = props\n\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Make sure `margins` is memoized\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const margins = useMemo(() => marginsProp, [JSON.stringify(marginsProp)])\n\n  const io = useMemo(\n    () =>\n      createIntersectionObserver({\n        rootMargin: margins.map(negate).map(toPx).join(' '),\n        threshold: INTERSECTION_THRESHOLDS,\n      }),\n    [margins]\n  )\n\n  const [intersections, setIntersections] = useState<\n    Record<\n      string,\n      | {\n          boundingClientRect: {top: number; bottom: number}\n          isIntersecting: boolean\n          intersectionRect: {top: number; bottom: number}\n        }\n      | undefined\n    >\n  >({})\n\n  const onIntersection = useCallback((id: any, entry: any) => {\n    setIntersections((current) => ({...current, [id]: entry}))\n  }, [])\n\n  const top = intersections['::top']\n  const bottom = intersections['::bottom']\n  const regionsWithIntersectionDetails: RegionWithIntersectionDetails[] = useMemo(\n    () =>\n      (top && bottom\n        ? regions\n            .filter((region) => region.presence?.length > 0)\n            .map((region): RegionWithIntersectionDetails | null => {\n              const intersection = intersections[region.id]\n\n              if (!intersection) {\n                return null\n              }\n\n              const {bottom: boundsBottom, top: boundsTop} = intersection.boundingClientRect\n\n              const aboveTop = intersection.boundingClientRect.top < top.boundingClientRect.bottom\n              const belowBottom =\n                intersection.boundingClientRect.top < bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceTop = intersection.isIntersecting\n                ? boundsTop - (intersection.intersectionRect.top - INTERSECTION_ELEMENT_PADDING)\n                : aboveTop\n                ? -top.boundingClientRect.bottom\n                : bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceBottom = intersection.isIntersecting\n                ? -(\n                    boundsBottom -\n                    (intersection.intersectionRect.bottom + INTERSECTION_ELEMENT_PADDING)\n                  )\n                : belowBottom\n                ? bottom.boundingClientRect.top\n                : -top.boundingClientRect.bottom\n\n              const position =\n                // eslint-disable-next-line no-nested-ternary\n                distanceTop <= SNAP_TO_DOCK_DISTANCE_TOP\n                  ? 'top'\n                  : distanceBottom <= SNAP_TO_DOCK_DISTANCE_BOTTOM\n                  ? 'bottom'\n                  : 'inside'\n\n              return {\n                distanceTop,\n                distanceBottom,\n                region,\n                position,\n              }\n            })\n            .filter(Boolean)\n        : []) as RegionWithIntersectionDetails[],\n    [bottom, intersections, regions, top]\n  )\n\n  return (\n    <RootWrapper ref={ref}>\n      <TopRegionWrapper\n        $debug={DEBUG}\n        io={io}\n        id=\"::top\"\n        onIntersection={onIntersection}\n        margins={margins}\n      />\n      <div>{children}</div>\n      <OverlayWrapper ref={overlayRef}>\n        {overlayRef.current &&\n          render(regionsWithIntersectionDetails, overlayRef.current.offsetWidth)}\n      </OverlayWrapper>\n      {regions.map((region) => {\n        const forceWidth = region.rect.width === 0\n        return (\n          <MiddleRegionWrapper\n            $debug={DEBUG}\n            io={io}\n            onIntersection={onIntersection}\n            key={region.id}\n            id={region.id}\n            style={{\n              width: forceWidth ? 1 : region.rect.width,\n              left: region.rect.left - (forceWidth ? 1 : 0),\n              top: region.rect.top - INTERSECTION_ELEMENT_PADDING,\n              height: region.rect.height + INTERSECTION_ELEMENT_PADDING * 2,\n            }}\n          />\n        )\n      })}\n      <BottomRegionWrapper $debug={DEBUG} id=\"::bottom\" io={io} onIntersection={onIntersection} />\n    </RootWrapper>\n  )\n})\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport React, {memo, useMemo} from 'react'\nimport {flatten, groupBy, orderBy, sortBy} from 'lodash'\nimport {\n  AVATAR_ARROW_HEIGHT,\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEBUG,\n  MAX_AVATARS_DOCK,\n  SLIDE_RIGHT_THRESHOLD_BOTTOM,\n  SLIDE_RIGHT_THRESHOLD_TOP,\n} from '../constants'\nimport {\n  FieldPresenceData,\n  Rect,\n  ReportedRegionWithRect,\n  RegionWithIntersectionDetails,\n} from '../types'\nimport {FieldPresenceInner} from '../FieldPresence'\n\nimport {RegionsWithIntersections} from './RegionsWithIntersections'\nimport {ReportedPresenceData, useReportedValues} from './tracker'\n\nconst ITEM_TRANSITION: React.CSSProperties = {\n  transitionProperty: 'transform',\n  transitionDuration: '200ms',\n  transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n}\n\nconst bottom = (rect: {top: number; height: number}) => rect.top + rect.height\n\ntype RegionWithSpacerHeight = RegionWithIntersectionDetails & {\n  spacerHeight: number\n}\n\nfunction withSpacerHeight(\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n): RegionWithSpacerHeight[] {\n  return regionsWithIntersectionDetails.map(\n    (withIntersection, idx, _regionsWithIntersectionDetails) => {\n      const prevRect = _regionsWithIntersectionDetails[idx - 1]?.region.rect\n      const prevBottom = prevRect ? bottom(prevRect) : 0\n      return {...withIntersection, spacerHeight: withIntersection.region.rect.top - prevBottom}\n    }\n  )\n}\n\nconst orderByTop = (regionsWithIntersectionDetails: RegionWithIntersectionDetails[]) =>\n  orderBy(regionsWithIntersectionDetails, (withIntersection) => withIntersection.region.rect.top)\n\nconst plus = (a: number, b: number) => a + b\nconst sum = (array: number[]) => array.reduce(plus, 0)\n\ntype Margins = [number, number, number, number]\ntype RegionWithSpacerHeightAndIndent = RegionWithSpacerHeight & {indent: number}\n\nfunction group(regionsWithIntersectionDetails: RegionWithIntersectionDetails[]): {\n  top: RegionWithSpacerHeightAndIndent[]\n  inside: RegionWithSpacerHeightAndIndent[]\n  bottom: RegionWithSpacerHeightAndIndent[]\n} {\n  const regionsWithSpacerHeight = withSpacerHeight(orderByTop(regionsWithIntersectionDetails))\n  const grouped: {\n    top: RegionWithSpacerHeight[]\n    inside: RegionWithSpacerHeight[]\n    bottom: RegionWithSpacerHeight[]\n  } = {\n    top: [],\n    inside: [],\n    bottom: [],\n    ...groupBy(regionsWithSpacerHeight, (_withSpacerHeight) => _withSpacerHeight.position),\n  }\n\n  return {\n    top: orderByTop(grouped.top).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(i + 1)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n    inside: orderByTop(grouped.inside).map(\n      (withIntersection): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: 0,\n      })\n    ),\n    bottom: orderByTop(grouped.bottom).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(0, i)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n  }\n}\n\nconst Spacer = ({height, ...rest}: {height: number; style?: React.CSSProperties}) => (\n  <div style={{height: Math.max(0, height), ...rest?.style}} />\n)\n\nconst DEFAULT_MARGINS: Margins = [0, 0, 0, 0]\n\nconst getOffsetsTo = (source: HTMLElement, target: HTMLElement) => {\n  let el: HTMLElement | null = source\n  let top = -el.scrollTop\n  let left = 0\n  while (el && el !== target) {\n    top += el.offsetTop - el.scrollTop\n    left += el.offsetLeft\n    el = el.offsetParent instanceof HTMLElement ? el.offsetParent : null\n  }\n  return {top, left}\n}\n\nfunction getRelativeRect(element: HTMLElement, parent: HTMLElement): Rect {\n  return {\n    ...getOffsetsTo(element, parent),\n    width: element.offsetWidth,\n    height: element.offsetHeight,\n  }\n}\n\nfunction regionsWithComputedRects(\n  regions: ReportedPresenceData[],\n  parent: HTMLElement\n): ReportedRegionWithRect<FieldPresenceData>[] {\n  return regions.map(([id, region]) => ({\n    ...region,\n    id,\n    rect: getRelativeRect(region.element, parent),\n  }))\n}\n\ntype Props = {margins: Margins; children: React.ReactNode}\nexport function StickyOverlay(props: Props) {\n  const {children, margins = DEFAULT_MARGINS} = props\n  const reportedValues = useReportedValues()\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  const regions = React.useMemo(\n    () => (ref.current ? regionsWithComputedRects(reportedValues, ref.current) : EMPTY_ARRAY),\n    [reportedValues]\n  )\n\n  const renderCallback = React.useCallback(\n    (regionsWithIntersectionDetails: RegionWithIntersectionDetails[], containerWidth: any) => {\n      const grouped = group(\n        regionsWithIntersectionDetails.filter((item) => item.region.presence.length > 0)\n      )\n      const topSpacing = sum(grouped.top.map((n) => n.region.rect.height + n.spacerHeight))\n      const bottomSpacing = sum(\n        [...grouped.inside, ...grouped.bottom].map((n) => n.region.rect.height + n.spacerHeight)\n      )\n\n      // todo: this needs cleaning up, should process all the needed layout data in one go\n      const counts = grouped.inside.reduce(\n        (_counts, withIntersection) => {\n          const {distanceTop, distanceBottom} = withIntersection\n\n          const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n          const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n          return {\n            nearTop: _counts.nearTop + (nearTop ? withIntersection.region.presence.length : 0),\n            nearBottom:\n              _counts.nearBottom + (nearBottom ? withIntersection.region.presence.length : 0),\n          }\n        },\n        {nearTop: 0, nearBottom: 0}\n      )\n\n      return (\n        <>\n          <PresenceDock\n            closeCount={counts.nearTop}\n            margins={margins}\n            position=\"top\"\n            regionsWithIntersectionDetails={grouped.top}\n          />\n          <Spacer height={topSpacing} />\n          <PresenceInside\n            containerWidth={containerWidth}\n            regionsWithIntersectionDetails={grouped.inside}\n          />\n          <Spacer height={bottomSpacing} />\n          <PresenceDock\n            closeCount={counts.nearBottom}\n            margins={margins}\n            position=\"bottom\"\n            regionsWithIntersectionDetails={grouped.bottom}\n          />\n        </>\n      )\n    },\n    [margins]\n  )\n\n  return (\n    <RegionsWithIntersections ref={ref} margins={margins} regions={regions} render={renderCallback}>\n      {children}\n    </RegionsWithIntersections>\n  )\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst PresenceDock = memo(function PresenceDock(props: {\n  closeCount: number\n  margins: Margins\n  position: 'top' | 'bottom'\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n}) {\n  const {closeCount, margins, position, regionsWithIntersectionDetails} = props\n  const dir = position === 'top' ? 1 : -1\n  const allPresenceItems = useMemo(() => {\n    if (!regionsWithIntersectionDetails.length) {\n      return EMPTY_ARRAY\n    }\n\n    return flatten(\n      sortBy(regionsWithIntersectionDetails, (r) => r.region.rect.top * dir).map(\n        (withIntersection) => withIntersection.region.presence || EMPTY_ARRAY\n      )\n    )\n  }, [dir, regionsWithIntersectionDetails])\n  const [topMargin, rightMargin, bottomMargin, leftMargin] = margins\n  const leftOffset =\n    (leftMargin || 0) +\n    (allPresenceItems.length > 0 ? -closeCount * (AVATAR_SIZE + AVATAR_DISTANCE) : 0) -\n    rightMargin\n\n  const margin = position === 'top' ? topMargin : bottomMargin\n\n  const style: React.CSSProperties = useMemo(\n    () => ({\n      zIndex: 2,\n      position: 'sticky',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-end',\n      ...ITEM_TRANSITION,\n      transform: `translate3d(${leftOffset}px, 0px, 0px)`,\n      top: AVATAR_ARROW_HEIGHT + 1 + margin,\n      bottom: AVATAR_ARROW_HEIGHT + 1 + margin,\n    }),\n    [leftOffset, margin]\n  )\n\n  return (\n    <div data-dock={position} key={`sticky-${position}`} style={style}>\n      <FieldPresenceInner\n        position={position}\n        maxAvatars={MAX_AVATARS_DOCK}\n        presence={allPresenceItems}\n      />\n    </div>\n  )\n})\n\nfunction PresenceInside(props: {\n  containerWidth: number\n  regionsWithIntersectionDetails: RegionWithSpacerHeight[]\n}) {\n  const {regionsWithIntersectionDetails, containerWidth} = props\n\n  return (\n    <>\n      {regionsWithIntersectionDetails.map((withIntersection) => {\n        const originalLeft = withIntersection.region.rect.left\n        const {distanceTop, distanceBottom} = withIntersection\n\n        const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n        const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n\n        const diffRight = containerWidth - originalLeft - withIntersection.region.rect.width\n\n        const {presence, maxAvatars} = withIntersection.region\n        return (\n          <React.Fragment key={withIntersection.region.id}>\n            <div\n              style={{\n                zIndex: 2,\n                position: 'absolute',\n                pointerEvents: 'all',\n                ...ITEM_TRANSITION,\n                left: originalLeft,\n                transform: `translate3d(${nearTop || nearBottom ? diffRight : 0}px, 0px, 0px)`,\n                height: withIntersection.region.rect.height,\n                top: withIntersection.region.rect.top,\n              }}\n            >\n              <DebugValue value={() => `${distanceTop} | ${distanceBottom}`}>\n                <FieldPresenceInner\n                  stack={!nearTop && !nearBottom}\n                  // eslint-disable-next-line no-nested-ternary\n                  position={nearTop ? 'top' : nearBottom ? 'bottom' : 'inside'}\n                  maxAvatars={maxAvatars}\n                  presence={presence}\n                />\n              </DebugValue>\n            </div>\n          </React.Fragment>\n        )\n      })}\n    </>\n  )\n}\n\nconst PassThrough = (props: {children: React.ReactElement; [prop: string]: any}) => props.children\n\nconst DebugValue = DEBUG\n  ? function DebugValue(props: any) {\n      return (\n        <div style={{position: 'absolute'}}>\n          {props.children}\n          <span\n            style={{\n              top: 0,\n              left: -15,\n              fontSize: 11,\n              right: -15,\n              textAlign: 'center',\n              height: AVATAR_SIZE,\n              color: 'white',\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\n              position: 'absolute',\n              zIndex: 1000,\n            }}\n          >\n            {props.value()}\n          </span>\n        </div>\n      )\n    }\n  : PassThrough\n","import React from 'react'\nimport {DISABLE_OVERLAY} from '../constants'\nimport {Tracker} from './tracker'\nimport {StickyOverlay} from './StickyOverlay'\n\n/** @internal */\nexport interface PresenceOverlayProps {\n  children: React.ReactNode\n  margins?: [number, number, number, number]\n}\n\nconst DEFAULT_MARGINS: [number, number, number, number] = [0, 0, 0, 0]\n\nfunction OverlayEnabled({children, margins}: PresenceOverlayProps) {\n  return (\n    <Tracker>\n      <StickyOverlay margins={margins || DEFAULT_MARGINS}>{children}</StickyOverlay>\n    </Tracker>\n  )\n}\n\n/** @internal */\nexport function OverlayDisabled(props: PresenceOverlayProps) {\n  return props.children as JSX.Element\n}\n\n/** @internal */\nexport const PresenceOverlay = DISABLE_OVERLAY ? OverlayDisabled : OverlayEnabled\n","import type {SanityDocument} from '@sanity/client'\nimport type {SchemaType} from '@sanity/types'\nimport {Box, Inline, Label} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport {useMemoObservable} from 'react-rx'\nimport styled from 'styled-components'\nimport {DocumentPreviewPresence} from '../../../../../../presence'\nimport {\n  DocumentPreviewStore,\n  getPreviewStateObservable,\n  getPreviewValueWithFallback,\n  SanityDefaultPreview,\n} from '../../../../../../preview'\nimport type {DocumentPresence} from '../../../../../../store'\n\ninterface SearchResultItemPreviewProps {\n  documentId: string\n  documentPreviewStore: DocumentPreviewStore\n  presence?: DocumentPresence[]\n  schemaType: SchemaType\n}\n\n/**\n * Temporary workaround: force all nested boxes on iOS to use `background-attachment: scroll`\n * to allow <Skeleton> components to render correctly within virtual lists.\n */\nconst SearchResultItemPreviewBox = styled(Box)`\n  @supports (-webkit-overflow-scrolling: touch) {\n    * [data-ui='Box'] {\n      background-attachment: scroll;\n    }\n  }\n`\n\nconst TypeLabel = styled(Label)`\n  max-width: 150px;\n`\n\nexport default function SearchResultItemPreview({\n  documentId,\n  documentPreviewStore,\n  presence,\n  schemaType,\n}: SearchResultItemPreviewProps) {\n  // NOTE: this emits sync so can never be null\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const {draft, published, isLoading} = useMemoObservable(\n    () => getPreviewStateObservable(documentPreviewStore, schemaType, documentId, ''),\n    [documentId, documentPreviewStore, schemaType]\n  )!\n\n  const sanityDocument = useMemo(() => {\n    return {\n      _id: documentId,\n      _type: schemaType.name,\n    } as SanityDocument\n  }, [documentId, schemaType.name])\n\n  const status = useMemo(() => {\n    if (isLoading) return null\n    return (\n      <Inline space={3}>\n        {presence && presence.length > 0 && <DocumentPreviewPresence presence={presence} />}\n        <TypeLabel size={0} muted textOverflow=\"ellipsis\">\n          {schemaType.title}\n        </TypeLabel>\n      </Inline>\n    )\n  }, [isLoading, presence, schemaType.title])\n\n  return (\n    <SearchResultItemPreviewBox>\n      <SanityDefaultPreview\n        {...getPreviewValueWithFallback({\n          draft,\n          published,\n          value: sanityDocument,\n        })}\n        isPlaceholder={isLoading ?? true}\n        layout=\"default\"\n        icon={schemaType.icon}\n        status={status}\n      />\n    </SearchResultItemPreviewBox>\n  )\n}\n","import {Box, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {forwardRef, MouseEvent, useMemo} from 'react'\nimport type {VirtualItem} from '@tanstack/react-virtual'\nimport styled, {css} from 'styled-components'\nimport {PreviewCard} from '../../../../../../components/PreviewCard'\nimport {FIXME} from '../../../../../../FIXME'\nimport {useSchema} from '../../../../../../hooks'\nimport type {WeightedHit} from '../../../../../../search'\nimport {useDocumentPresence, useDocumentPreviewStore} from '../../../../../../store'\nimport {getPublishedId} from '../../../../../../util/draftUtils'\nimport {useCommandList} from '../../contexts/commandList'\nimport {DebugOverlay} from './DebugOverlay'\nimport SearchResultItemPreview from './SearchResultItemPreview'\nimport {IntentLink} from 'sanity/router'\n\ninterface SearchItemProps extends ResponsivePaddingProps {\n  data: WeightedHit\n  debug?: boolean\n  index: number\n  onClick?: () => void\n  onMouseDown?: (event: MouseEvent) => void\n  onMouseEnter?: () => void\n  documentId: string\n  virtualRow: VirtualItem<unknown>\n}\n\nconst SearchResultItemBox = styled(Box)<{$level: number}>(({$level}) => {\n  return css`\n    left: 0;\n    position: absolute;\n    top: 0;\n    width: 100%;\n\n    [data-focused='true'][data-level='${$level}'] &,\n    [data-hovered='true'][data-level='${$level}'] & {\n      &[data-active='true'] a {\n        // Allow nested cards to inherit the correct background color\n        --card-bg-color: ${({theme}) => theme.sanity.color.button.bleed.default.hovered.bg};\n        background: var(--card-bg-color);\n        // Disable box-shadow to hide the halo effect when we have keyboard focus over a selected <Button>\n        box-shadow: none;\n      }\n    }\n  `\n})\n\nexport function SearchResultItem({\n  data,\n  debug,\n  documentId,\n  index,\n  onClick,\n  onMouseDown,\n  onMouseEnter,\n  virtualRow,\n}: SearchItemProps) {\n  const {hit, resultIndex} = data\n  const schema = useSchema()\n  const type = schema.get(hit?._type)\n  const documentPresence = useDocumentPresence(documentId)\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {level} = useCommandList()\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        if (!type?.name) return null\n        return (\n          <IntentLink\n            {...linkProps}\n            data-hit-index={resultIndex}\n            intent=\"edit\"\n            params={{id: getPublishedId(hit._id), type: type.name}}\n            ref={ref}\n          />\n        )\n      }),\n    [hit._id, resultIndex, type?.name]\n  )\n\n  if (!type) return null\n\n  return (\n    <SearchResultItemBox\n      $level={level}\n      data-index={index}\n      flex={1}\n      style={{\n        // Kept inline to prevent styled-components from generating loads of classes on virtual list scroll\n        height: `${virtualRow.size}px`,\n        transform: `translateY(${virtualRow.start}px)`,\n      }}\n    >\n      <PreviewCard\n        as={LinkComponent as FIXME}\n        data-as=\"a\"\n        onClick={onClick}\n        onMouseDown={onMouseDown}\n        onMouseEnter={onMouseEnter}\n        marginTop={1}\n        marginX={1}\n        padding={2}\n        radius={2}\n        tabIndex={-1}\n      >\n        <SearchResultItemPreview\n          documentId={hit._id}\n          documentPreviewStore={documentPreviewStore}\n          presence={documentPresence}\n          schemaType={type}\n        />\n      </PreviewCard>\n      {debug && <DebugOverlay data={data} />}\n    </SearchResultItemBox>\n  )\n}\n","import type {SearchOptions, SearchSort, SearchTerms, WeightedHit} from '../../../../search'\n\nexport interface SearchOrdering {\n  customMeasurementLabel?: string\n  ignoreScore?: boolean\n  sort: SearchSort\n  title: string\n}\nexport interface SearchState {\n  hits: WeightedHit[]\n  loading: boolean\n  error: Error | null\n  options?: SearchOptions\n  terms: SearchTerms\n}\n\nexport const ORDER_RELEVANCE: SearchOrdering = {\n  customMeasurementLabel: 'relevance',\n  sort: {direction: 'desc', field: '_updatedAt'},\n  title: 'Relevance',\n}\n\nexport const ORDER_CREATED_ASC: SearchOrdering = {\n  ignoreScore: true,\n  sort: {direction: 'asc', field: '_createdAt'},\n  title: 'Created: Oldest first',\n}\n\nexport const ORDER_CREATED_DESC: SearchOrdering = {\n  ignoreScore: true,\n  sort: {direction: 'desc', field: '_createdAt'},\n  title: 'Created: Newest first',\n}\n\nexport const ORDER_UPDATED_ASC: SearchOrdering = {\n  ignoreScore: true,\n  sort: {direction: 'asc', field: '_updatedAt'},\n  title: 'Updated: Oldest first',\n}\n\nexport const ORDER_UPDATED_DESC: SearchOrdering = {\n  ignoreScore: true,\n  sort: {direction: 'desc', field: '_updatedAt'},\n  title: 'Updated: Newest first',\n}\n","import {CheckmarkIcon, SortIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Text,\n} from '@sanity/ui'\nimport isEqual from 'lodash/isEqual'\nimport React, {useCallback, useId, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {SUBHEADER_HEIGHT_LARGE, SUBHEADER_HEIGHT_SMALL} from '../constants'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {\n  SearchOrdering,\n  ORDER_CREATED_ASC,\n  ORDER_CREATED_DESC,\n  ORDER_RELEVANCE,\n  ORDER_UPDATED_ASC,\n  ORDER_UPDATED_DESC,\n} from '../types'\n\ninterface SortMenuProps {\n  small?: boolean\n}\n\ninterface SearchDivider {\n  type: 'divider'\n}\n\nconst MENU_ORDERINGS: (SearchDivider | SearchOrdering)[] = [\n  ORDER_RELEVANCE,\n  {type: 'divider'},\n  ORDER_CREATED_ASC,\n  ORDER_CREATED_DESC,\n  {type: 'divider'},\n  ORDER_UPDATED_ASC,\n  ORDER_UPDATED_DESC,\n]\n\nconst IconWrapperBox = styled(Box)<{$visible: boolean}>`\n  visibility: ${({$visible}) => ($visible ? 'visible' : 'hidden')};\n`\n\nconst SortMenuContentFlex = styled(Flex)<{$small?: boolean}>`\n  box-sizing: border-box;\n  height: ${({$small}) => ($small ? SUBHEADER_HEIGHT_SMALL : SUBHEADER_HEIGHT_LARGE)}px;\n`\n\nfunction isSearchDivider(item: SearchDivider | SearchOrdering): item is SearchDivider {\n  return (item as SearchDivider).type === 'divider'\n}\n\nfunction CustomMenuItem({ordering}: {ordering: SearchOrdering}) {\n  const {\n    dispatch,\n    state: {ordering: currentOrdering},\n  } = useSearchState()\n\n  const handleClick = useCallback(() => {\n    dispatch({ordering, type: 'SEARCH_ORDERING_SET'})\n  }, [dispatch, ordering])\n\n  const isSelected = useMemo(() => isEqual(currentOrdering, ordering), [currentOrdering, ordering])\n\n  return (\n    <MenuItem onClick={handleClick} padding={3} selected={isSelected} tone=\"default\">\n      <Flex align=\"center\" justify=\"space-between\" gap={4}>\n        <Inline space={1}>\n          <Text size={1} weight=\"medium\">\n            {ordering.title}\n          </Text>\n        </Inline>\n        <IconWrapperBox $visible={isSelected}>\n          <Text size={1}>\n            <CheckmarkIcon />\n          </Text>\n        </IconWrapperBox>\n      </Flex>\n    </MenuItem>\n  )\n}\n\nexport function SortMenu({small}: SortMenuProps) {\n  const {\n    state: {ordering},\n  } = useSearchState()\n\n  const menuButtonId = useId()\n\n  const currentMenuItem = MENU_ORDERINGS.find(\n    (item): item is SearchOrdering => isEqual(ordering, item) && !isSearchDivider(item)\n  )\n\n  if (!currentMenuItem) {\n    return null\n  }\n\n  return (\n    <Card borderBottom>\n      <SortMenuContentFlex\n        $small={small}\n        align=\"center\"\n        flex={1}\n        marginLeft={small ? 0 : 1}\n        padding={1}\n      >\n        <MenuButton\n          button={\n            <Button mode=\"bleed\" padding={3}>\n              <Flex align=\"center\" gap={1} justify=\"space-between\">\n                <Box marginRight={1}>\n                  <Text size={1}>\n                    <SortIcon />\n                  </Text>\n                </Box>\n                <Inline space={2}>\n                  <Text size={1} weight=\"medium\">\n                    {currentMenuItem.title}\n                  </Text>\n                </Inline>\n              </Flex>\n            </Button>\n          }\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {MENU_ORDERINGS.map((item, index) => {\n                if (isSearchDivider(item)) {\n                  // eslint-disable-next-line react/no-array-index-key\n                  return <MenuDivider key={index} />\n                }\n                return (\n                  <CustomMenuItem\n                    // eslint-disable-next-line react/no-array-index-key\n                    key={index}\n                    ordering={item}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          placement=\"bottom-start\"\n          popover={{portal: true, radius: 2}}\n        />\n      </SortMenuContentFlex>\n    </Card>\n  )\n}\n","import {Box, Flex} from '@sanity/ui'\nimport {useVirtualizer} from '@tanstack/react-virtual'\nimport React, {Dispatch, SetStateAction, useCallback, useEffect, useRef} from 'react'\nimport styled from 'styled-components'\nimport {getPublishedId} from '../../../../../util/draftUtils'\nimport {VIRTUAL_LIST_ITEM_HEIGHT, VIRTUAL_LIST_OVERSCAN} from '../constants'\nimport {useCommandList} from '../contexts/commandList'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {NoResults} from './NoResults'\nimport {PointerOverlay} from './PointerOverlay'\nimport {SearchError} from './SearchError'\nimport {SearchResultItem} from './searchResultItem'\nimport {SortMenu} from './SortMenu'\n\ninterface SearchResultsProps {\n  onClose: () => void\n  setChildContainerRef: Dispatch<SetStateAction<HTMLDivElement | null>>\n  setPointerOverlayRef: Dispatch<SetStateAction<HTMLDivElement | null>>\n  small?: boolean\n}\n\nconst SearchResultsFlex = styled(Flex)`\n  height: 100%;\n`\n\nconst SearchResultsInnerFlex = styled(Flex)<{$loading: boolean}>`\n  opacity: ${({$loading}) => ($loading ? 0.5 : 1)};\n  overflow: hidden;\n  position: relative;\n  transition: 300ms opacity;\n  width: 100%;\n`\n\nconst VirtualListBox = styled(Box)`\n  height: 100%;\n  outline: none;\n  overflow-x: hidden;\n  overflow-y: auto;\n  width: 100%;\n`\n\nconst VirtualListChildBox = styled(Box)<{$height: number}>`\n  height: ${({$height}) => `${$height}px`};\n  position: relative;\n  width: 100%;\n`\n\nexport function SearchResults({\n  onClose,\n  setChildContainerRef,\n  setPointerOverlayRef,\n  small,\n}: SearchResultsProps) {\n  const {\n    dispatch,\n    recentSearchesStore,\n    state: {debug, terms, result},\n  } = useSearchState()\n\n  const childParentRef = useRef<HTMLDivElement | null>(null)\n\n  const {getTotalSize, getVirtualItems, scrollToIndex} = useVirtualizer({\n    count: result.hits.length,\n    enableSmoothScroll: false,\n    getScrollElement: () => childParentRef.current,\n    estimateSize: () => VIRTUAL_LIST_ITEM_HEIGHT,\n    overscan: VIRTUAL_LIST_OVERSCAN,\n  })\n\n  const {onChildClick, onChildMouseDown, onChildMouseEnter, setVirtualListScrollToIndex} =\n    useCommandList()\n\n  /**\n   * Send react-virtual's `scrollToIndex` function to shared CommandList context\n   */\n  useEffect(() => {\n    setVirtualListScrollToIndex(scrollToIndex)\n  }, [setVirtualListScrollToIndex, scrollToIndex])\n\n  /**\n   * Add current search terms to recent searches, trigger child item click and close search\n   */\n  const handleResultClick = useCallback(() => {\n    // Add terms to Local Storage\n    if (recentSearchesStore) {\n      const updatedRecentSearches = recentSearchesStore.addSearchTerm(terms)\n      dispatch({\n        recentSearches: updatedRecentSearches,\n        type: 'RECENT_SEARCHES_SET',\n      })\n    }\n    onChildClick?.()\n    onClose()\n  }, [dispatch, onChildClick, onClose, recentSearchesStore, terms])\n\n  const hasSearchResults = !!result.hits.length\n\n  return (\n    <SearchResultsFlex direction=\"column\">\n      {/* Sort menu */}\n      {hasSearchResults && <SortMenu small={small} />}\n\n      {/* Results */}\n      <SearchResultsInnerFlex $loading={result.loading} aria-busy={result.loading} flex={1}>\n        {result.error ? (\n          <SearchError />\n        ) : (\n          <>\n            {hasSearchResults && (\n              // (Has search results)\n              <VirtualListBox data-overflow ref={childParentRef} tabIndex={-1}>\n                <PointerOverlay ref={setPointerOverlayRef} />\n                <VirtualListChildBox\n                  $height={getTotalSize()}\n                  paddingBottom={1}\n                  ref={setChildContainerRef}\n                >\n                  {getVirtualItems().map((virtualRow) => {\n                    const hit = result.hits[virtualRow.index]\n                    return (\n                      <SearchResultItem\n                        data={hit}\n                        debug={debug}\n                        documentId={getPublishedId(hit.hit._id) || ''}\n                        index={virtualRow.index}\n                        key={virtualRow.key}\n                        onClick={handleResultClick}\n                        onMouseDown={onChildMouseDown}\n                        onMouseEnter={onChildMouseEnter(virtualRow.index)}\n                        virtualRow={virtualRow}\n                      />\n                    )\n                  })}\n                </VirtualListChildBox>\n              </VirtualListBox>\n            )}\n\n            {!result.hits.length && result.loaded && <NoResults />}\n          </>\n        )}\n      </SearchResultsInnerFlex>\n    </SearchResultsFlex>\n  )\n}\n","import {ObjectSchemaType, Schema, SchemaType} from '@sanity/types'\nimport {isNonNullable} from '../../util/isNonNullable'\n\nconst isDocumentType = (type: SchemaType): type is ObjectSchemaType =>\n  Boolean(type.type && type.type.name === 'document')\n\nconst isSanityType = (type: SchemaType): boolean => type.name.startsWith('sanity.')\n\nexport const getSearchableTypes = (schema: Schema): ObjectSchemaType[] =>\n  schema\n    .getTypeNames()\n    .map((typeName) => schema.get(typeName))\n    .filter(isNonNullable)\n    .filter((schemaType) => isDocumentType(schemaType))\n    .filter((type) => !isSanityType(type)) as ObjectSchemaType[]\n","import type {ObjectSchemaType, Schema, SchemaType} from '@sanity/types'\nimport {getSearchableTypes} from '../../../../../search/common/utils'\nimport {SearchableType} from '../../../../../search'\n\n/**\n * Returns a list of all available document types filtered by a search string.\n * Types containing the search string in its `title` or `name` will be returned.\n */\nexport function getSelectableOmnisearchTypes(schema: Schema, typeFilter: string): SearchableType[] {\n  return getSearchableOmnisearchTypes(schema)\n    .filter((type) => inTypeFilter(type, typeFilter))\n    .sort(sortTypes)\n}\n\n/**\n * Return all searchable document types that are visible to omnisearch.\n * Documents with `__experimental_omnisearch_visibility: false` will be hidden.\n */\nexport function getSearchableOmnisearchTypes(schema: Schema): ObjectSchemaType[] {\n  return getSearchableTypes(schema).filter(\n    (type) => !(type.__experimental_omnisearch_visibility === false)\n  )\n}\n\nexport function sortTypes(a: SearchableType, b: SearchableType): number {\n  return (a.title ?? a.name).localeCompare(b.title ?? b.name)\n}\n\nfunction inTypeFilter(type: SchemaType, typeFilter: string): boolean {\n  return !typeFilter || (type.title ?? type.name).toLowerCase().includes(typeFilter?.toLowerCase())\n}\n","import {CheckmarkIcon} from '@sanity/icons'\nimport {Button} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport styled, {css} from 'styled-components'\nimport type {SearchableType} from '../../../../../search'\nimport {useCommandList} from '../contexts/commandList'\nimport {useSearchState} from '../contexts/search/useSearchState'\n\ninterface TypeFilterItemProps {\n  index: number\n  selected: boolean\n  small?: boolean\n  type: SearchableType\n}\n\nconst TypeFilterItemButton = styled(Button)<{$level: number}>(({$level}) => {\n  return css`\n    [data-focused='true'][data-level='${$level}'] &,\n    [data-hovered='true'][data-level='${$level}'] & {\n      &[data-active='true'] {\n        // TODO: investigate issue where this background isn't respected after switching studio theme _multiple_ times (at least twice)\n        background: ${({theme}) => theme.sanity.color.button.bleed.default.hovered.bg};\n        // Disable box-shadow to hide the halo effect when we have keyboard focus over a selected <Button>\n        box-shadow: none;\n      }\n    }\n  `\n})\n\nexport function TypeFilterItem({index, selected, small, type}: TypeFilterItemProps) {\n  const {dispatch} = useSearchState()\n\n  const {level, onChildClick, onChildMouseDown, onChildMouseEnter} = useCommandList()\n\n  const handleTypeAdd = useCallback(() => {\n    dispatch({type: 'TERMS_TYPE_ADD', schemaType: type})\n  }, [dispatch, type])\n\n  const handleTypeRemove = useCallback(() => {\n    dispatch({type: 'TERMS_TYPE_REMOVE', schemaType: type})\n  }, [dispatch, type])\n\n  const handleClick = useCallback(() => {\n    onChildClick?.()\n    if (selected) {\n      handleTypeRemove()\n    } else {\n      handleTypeAdd()\n    }\n  }, [handleTypeAdd, handleTypeRemove, onChildClick, selected])\n\n  return (\n    <TypeFilterItemButton\n      $level={level}\n      aria-selected={selected}\n      data-index={index}\n      fontSize={small ? 1 : 2}\n      iconRight={selected && CheckmarkIcon}\n      justify=\"flex-start\"\n      key={type.title ?? type.name}\n      mode=\"bleed\"\n      onClick={handleClick}\n      onMouseDown={onChildMouseDown}\n      onMouseEnter={onChildMouseEnter(index)}\n      selected={selected}\n      text={type.title ?? type.name}\n      tone={selected ? 'primary' : 'default'}\n    />\n  )\n}\n","import {SearchIcon} from '@sanity/icons'\nimport {Box, Button, Flex, Stack, Text} from '@sanity/ui'\nimport React, {useCallback, useId, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {useSchema} from '../../../../../hooks'\nimport {SUBHEADER_HEIGHT_LARGE, SUBHEADER_HEIGHT_SMALL} from '../constants'\nimport {CommandListProvider} from '../contexts/commandList'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {getSelectableOmnisearchTypes} from '../utils/selectors'\nimport {supportsTouch} from '../utils/supportsTouch'\nimport {CustomTextInput} from './CustomTextInput'\nimport {PointerOverlay} from './PointerOverlay'\nimport {TypeFilterItem} from './TypeFilterItem'\n\ninterface TypeFiltersProps {\n  small?: boolean\n}\n\nconst ClearButtonBox = styled(Box)`\n  border-top: 1px solid ${({theme}) => theme.sanity.color.base.border};\n`\n\nconst SearchHeaderBox = styled(Box)`\n  border-bottom: 1px solid ${({theme}) => theme.sanity.color.base.border};\n`\n\nconst SearchHeaderContentFlex = styled(Flex)<{$small?: boolean}>`\n  box-sizing: border-box;\n  height: ${({$small}) => ($small ? SUBHEADER_HEIGHT_SMALL : SUBHEADER_HEIGHT_LARGE)}px;\n`\n\nconst TypeFiltersContentBox = styled(Box)`\n  outline: none;\n  overflow-x: hidden;\n  overflow-y: scroll;\n`\n\nconst TypeFiltersContentDiv = styled.div`\n  position: relative;\n`\n\nconst TypeFiltersFlex = styled(Flex)<{$lightHighlight: boolean}>`\n  height: 100%;\n`\n\nexport function TypeFilters({small}: TypeFiltersProps) {\n  const [childContainerElement, setChildContainerRef] = useState<HTMLDivElement | null>(null)\n  const [containerElement, setContainerRef] = useState<HTMLDivElement | null>(null)\n  const [filtersContentElement, setFiltersContentRef] = useState<HTMLDivElement | null>(null)\n  const [headerInputElement, setHeaderInputRef] = useState<HTMLInputElement | null>(null)\n  const [pointerOverlayElement, setPointerOverlayRef] = useState<HTMLDivElement | null>(null)\n  const [typeFilter, setTypeFilter] = useState('')\n\n  const schema = useSchema()\n\n  const {\n    dispatch,\n    state: {\n      terms: {types: selectedTypes},\n    },\n  } = useSearchState()\n\n  const selectableDocumentTypes = useMemo(\n    () => getSelectableOmnisearchTypes(schema, typeFilter),\n    [schema, typeFilter]\n  )\n\n  const handleClearTypes = useCallback(() => {\n    if (!supportsTouch) {\n      headerInputElement?.focus()\n    }\n    filtersContentElement?.scrollTo(0, 0)\n    dispatch({type: 'TERMS_TYPES_CLEAR'})\n  }, [dispatch, filtersContentElement, headerInputElement])\n  const handleFilterChange = useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => setTypeFilter(e.currentTarget.value),\n    [setTypeFilter]\n  )\n  const handleFilterClear = useCallback(() => setTypeFilter(''), [])\n\n  const padding = small ? 1 : 2\n\n  const commandListId = useId()\n\n  return (\n    <CommandListProvider\n      ariaChildrenLabel=\"Document types\"\n      ariaHeaderLabel=\"Filter by document type\"\n      ariaMultiselectable\n      childContainerElement={childContainerElement}\n      childCount={selectableDocumentTypes.length}\n      containerElement={containerElement}\n      headerInputElement={headerInputElement}\n      id={commandListId}\n      level={1}\n      pointerOverlayElement={pointerOverlayElement}\n    >\n      <TypeFiltersFlex $lightHighlight={!small} direction=\"column\" ref={setContainerRef}>\n        {/* Search header */}\n        <SearchHeaderBox>\n          <SearchHeaderContentFlex $small={small} align=\"center\" flex={1} padding={padding}>\n            <CustomTextInput\n              autoComplete=\"off\"\n              // border={false} // TODO: re-enable when flashing border issue is fixed\n              clearButton={!!typeFilter}\n              fontSize={small ? 1 : 2}\n              icon={SearchIcon}\n              muted\n              onChange={handleFilterChange}\n              onClear={handleFilterClear}\n              placeholder=\"Document type\"\n              ref={setHeaderInputRef}\n              smallClearButton\n              spellCheck={false}\n              radius={2}\n              value={typeFilter}\n            />\n          </SearchHeaderContentFlex>\n        </SearchHeaderBox>\n\n        <TypeFiltersContentBox\n          data-overflow\n          flex={1}\n          padding={padding}\n          ref={setFiltersContentRef}\n          tabIndex={-1}\n        >\n          <TypeFiltersContentDiv>\n            <PointerOverlay ref={setPointerOverlayRef} />\n\n            {/* Selectable document types */}\n            <Stack ref={setChildContainerRef} space={1}>\n              {selectableDocumentTypes.map((type, index) => (\n                <TypeFilterItem\n                  index={index}\n                  key={type.name}\n                  selected={selectedTypes.includes(type)}\n                  small={small}\n                  type={type}\n                />\n              ))}\n            </Stack>\n          </TypeFiltersContentDiv>\n\n          {/* No results */}\n          {!selectableDocumentTypes.length && (\n            <Box padding={3}>\n              <Text muted size={small ? 1 : 2} textOverflow=\"ellipsis\">\n                No matches for '{typeFilter}'.\n              </Text>\n            </Box>\n          )}\n        </TypeFiltersContentBox>\n\n        {/* Clear button */}\n        {!typeFilter && selectedTypes.length > 0 && (\n          <ClearButtonBox padding={padding}>\n            <Stack>\n              <Button\n                aria-label=\"Clear checked filters\"\n                data-name=\"type-filter-button\"\n                disabled={selectedTypes.length === 0}\n                fontSize={small ? 1 : 2}\n                mode=\"bleed\"\n                onClick={handleClearTypes}\n                padding={3}\n                text=\"Clear\"\n                tone=\"primary\"\n              />\n            </Stack>\n          </ClearButtonBox>\n        )}\n      </TypeFiltersFlex>\n    </CommandListProvider>\n  )\n}\n","import {useCallback, useState} from 'react'\nimport {VIRTUAL_LIST_ITEM_HEIGHT} from '../constants'\n\nexport function useMeasureSearchResultsIndex(childContainerElement: HTMLDivElement | null): {\n  lastSearchIndex: number\n  resetLastSearchIndex: () => void\n  setLastSearchIndex: () => void\n} {\n  const [lastSearchIndex, setSavedSearchIndex] = useState<number>(0)\n\n  const resetLastSearchIndex = useCallback(() => {\n    setSavedSearchIndex(0)\n  }, [])\n\n  /**\n   * Query search result children for the 'top most' visible element (factoring in overscan)\n   * and obtain its index.\n   */\n  const setLastSearchIndex = useCallback(() => {\n    const childContainerParentElement = childContainerElement?.parentElement\n\n    if (childContainerParentElement && childContainerElement) {\n      const childContainerParentElementTop = childContainerParentElement.getBoundingClientRect().top\n      const childContainerElementTop = childContainerElement.getBoundingClientRect().top\n      const index = Math.floor(\n        (childContainerParentElementTop - childContainerElementTop) / VIRTUAL_LIST_ITEM_HEIGHT\n      )\n      setSavedSearchIndex(index)\n    } else {\n      setSavedSearchIndex(0)\n    }\n  }, [childContainerElement])\n\n  return {\n    lastSearchIndex,\n    resetLastSearchIndex,\n    setLastSearchIndex,\n  }\n}\n","import {useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport isHotkey from 'is-hotkey'\nimport {useCallback} from 'react'\nimport {GLOBAL_SEARCH_KEY} from '../constants'\n\nconst isSearchHotKey = isHotkey(`mod+${GLOBAL_SEARCH_KEY}`)\nconst isEscape = isHotkey('escape')\n\n/**\n * This hook binds a global shortcut combination, as well as the ESC key, to open / close callbacks.\n *\n * It will prevent the ESC key from firing `onClose` callbacks if it's not the top most layer\n * (i.e. if a nested dialog is mounted).\n */\nexport function useSearchHotkeys({\n  open,\n  onClose,\n  onOpen,\n}: {\n  open: boolean\n  onClose: () => void\n  onOpen: () => void\n}): void {\n  const {isTopLayer} = useLayer()\n\n  const handleClose = useCallback(() => {\n    onClose()\n  }, [onClose])\n\n  const handleGlobalKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (isSearchHotKey(event)) {\n        event.preventDefault()\n        if (open) {\n          handleClose()\n        } else {\n          onOpen()\n        }\n      }\n      if (isEscape(event) && open && isTopLayer) {\n        handleClose()\n      }\n    },\n    [handleClose, isTopLayer, open, onOpen]\n  )\n\n  useGlobalKeyDown(handleGlobalKeyDown)\n}\n","import type {SearchTerms} from '../../../../../search'\n\nexport function hasSearchableTerms(terms: SearchTerms): boolean {\n  return terms.query.trim() !== '' || !!terms.types.length\n}\n","import {Box, Card, Dialog, Portal} from '@sanity/ui'\nimport React, {useCallback, useEffect, useId, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport styled from 'styled-components'\nimport {useColorScheme} from '../../../colorScheme'\nimport {RecentSearches} from './components/RecentSearches'\nimport {SearchHeader} from './components/SearchHeader'\nimport {SearchResults} from './components/SearchResults'\nimport {TypeFilters} from './components/TypeFilters'\nimport {CommandListProvider} from './contexts/commandList'\nimport {useSearchState} from './contexts/search/useSearchState'\nimport {useMeasureSearchResultsIndex} from './hooks/useMeasureSearchResultsIndex'\nimport {useSearchHotkeys} from './hooks/useSearchHotkeys'\nimport {hasSearchableTerms} from './utils/hasSearchableTerms'\n\ninterface SearchDialogProps {\n  onClose: () => void\n  onOpen: () => void\n  open: boolean\n}\n\nconst DialogContentCard = styled(Card)`\n  height: 100%;\n`\n\nconst InnerCard = styled(Card)`\n  flex-direction: column;\n  overflow: hidden;\n  pointer-events: all;\n  position: relative;\n`\n\nconst SearchDialogBox = styled(Box)`\n  height: 100%;\n  left: 0;\n  overflow: hidden;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  width: 100%;\n  z-index: 1;\n`\n\nconst SearchContentBox = styled(Box)`\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`\n\nconst StyledDialog = styled(Dialog)`\n  [data-ui='DialogCard'] > [data-ui='Card'] {\n    flex: 1;\n  }\n`\n\n/**\n * @internal\n */\nexport function SearchDialog({onClose, onOpen, open}: SearchDialogProps) {\n  const [childContainerElement, setChildContainerRef] = useState<HTMLDivElement | null>(null)\n  const [containerElement, setContainerRef] = useState<HTMLDivElement | null>(null)\n  const [headerInputElement, setHeaderInputRef] = useState<HTMLInputElement | null>(null)\n  const [pointerOverlayElement, setPointerOverlayRef] = useState<HTMLDivElement | null>(null)\n\n  const isMountedRef = useRef(false)\n\n  const {\n    dispatch,\n    state: {filtersVisible, recentSearches, result, terms},\n  } = useSearchState()\n\n  const {scheme} = useColorScheme()\n\n  const hasValidTerms = hasSearchableTerms(terms)\n\n  /**\n   * Measure top-most visible search result index\n   */\n  const {lastSearchIndex, resetLastSearchIndex, setLastSearchIndex} =\n    useMeasureSearchResultsIndex(childContainerElement)\n\n  /**\n   * Store top-most search result scroll index on close\n   */\n  const handleClose = useCallback(() => {\n    setLastSearchIndex()\n    onClose()\n  }, [onClose, setLastSearchIndex])\n\n  /**\n   * Bind hotkeys to open / close actions\n   */\n  useSearchHotkeys({onClose: handleClose, onOpen, open})\n\n  /**\n   * Reset last search index when new results are loaded, or visiting recent searches\n   * TODO: Revise if/when we introduce pagination\n   */\n  useEffect(() => {\n    if ((!hasValidTerms || result.loaded) && isMountedRef.current) {\n      resetLastSearchIndex()\n    }\n  }, [hasValidTerms, resetLastSearchIndex, result.loaded])\n\n  /**\n   * Reset ordering when popover is closed (without valid search terms)\n   */\n  useEffect(() => {\n    if (!hasValidTerms && isMountedRef.current && !open) {\n      dispatch({type: 'SEARCH_ORDERING_RESET'})\n    }\n  }, [dispatch, hasValidTerms, open])\n\n  /**\n   * Store mounted state (must be last)\n   */\n  useEffect(() => {\n    if (!isMountedRef?.current) {\n      isMountedRef.current = true\n    }\n  }, [])\n\n  const commandListId = useId()\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <CommandListProvider\n      ariaChildrenLabel={hasValidTerms ? 'Search results' : 'Recent searches'}\n      ariaHeaderLabel=\"Search\"\n      autoFocus\n      childContainerElement={childContainerElement}\n      childCount={hasValidTerms ? result.hits.length : recentSearches.length}\n      containerElement={containerElement}\n      headerInputElement={headerInputElement}\n      id={commandListId || ''}\n      data-testid=\"search-results-dialog\"\n      initialSelectedIndex={hasValidTerms ? lastSearchIndex : 0}\n      level={0}\n      pointerOverlayElement={pointerOverlayElement}\n      virtualList={hasValidTerms}\n    >\n      <Portal>\n        <FocusLock autoFocus={false} returnFocus>\n          <SearchDialogBox ref={setContainerRef}>\n            <InnerCard display=\"flex\" height=\"fill\" scheme={scheme} tone=\"default\">\n              <SearchHeader onClose={handleClose} setHeaderInputRef={setHeaderInputRef} />\n              <SearchContentBox flex={1}>\n                {hasValidTerms ? (\n                  <SearchResults\n                    onClose={handleClose}\n                    setChildContainerRef={setChildContainerRef}\n                    setPointerOverlayRef={setPointerOverlayRef}\n                  />\n                ) : (\n                  <RecentSearches\n                    setChildContainerRef={setChildContainerRef}\n                    setPointerOverlayRef={setPointerOverlayRef}\n                  />\n                )}\n              </SearchContentBox>\n              {filtersVisible && <SearchDialogFilters />}\n            </InnerCard>\n          </SearchDialogBox>\n        </FocusLock>\n      </Portal>\n    </CommandListProvider>\n  )\n}\n\nfunction SearchDialogFilters() {\n  const {dispatch} = useSearchState()\n\n  const handleClose = useCallback(() => {\n    dispatch({type: 'FILTERS_HIDE'})\n  }, [dispatch])\n\n  return (\n    <FocusLock autoFocus={false}>\n      <StyledDialog\n        cardRadius={1}\n        header=\"Filter\"\n        height=\"fill\"\n        id=\"search-filter\"\n        onClose={handleClose}\n        width={2}\n      >\n        <DialogContentCard tone=\"default\">\n          <TypeFilters />\n        </DialogContentCard>\n      </StyledDialog>\n    </FocusLock>\n  )\n}\n","/* eslint-disable react/jsx-pascal-case */\nimport {SearchIcon} from '@sanity/icons'\nimport {Flex, KBD, TextInput} from '@sanity/ui'\nimport React, {forwardRef, KeyboardEvent as ReactKeyboardEvent, Ref, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {GLOBAL_SEARCH_KEY, GLOBAL_SEARCH_KEY_MODIFIER} from '../constants'\nimport {useSearchState} from '../contexts/search/useSearchState'\n\nconst KeyboardShortcutFlex = styled(Flex)`\n  position: absolute;\n  right: 0;\n  top: 0;\n\n  & > :first-child {\n    margin-right: 1px;\n  }\n`\n\nconst PlaceholderSearchInputFlex = styled(Flex)`\n  min-width: 253px;\n  max-width: 350px;\n  position: relative;\n`\n\nconst PlaceholderTextInput = styled(TextInput)`\n  padding-right: 60px;\n`\n\nexport const PlaceholderSearchInput = forwardRef(function DummyInput(\n  {onOpen}: {onOpen: () => void},\n  ref: Ref<HTMLInputElement>\n) {\n  const {\n    dispatch,\n    state: {terms},\n  } = useSearchState()\n\n  const handleChange = useCallback(\n    (event: ReactKeyboardEvent<HTMLInputElement>) => {\n      dispatch({type: 'TERMS_QUERY_SET', query: event.currentTarget.value})\n      onOpen()\n    },\n    [dispatch, onOpen]\n  )\n\n  const handleKeyDown = useCallback(\n    (event: ReactKeyboardEvent<HTMLInputElement>) => {\n      if (event.key === 'Enter') {\n        onOpen()\n      }\n    },\n    [onOpen]\n  )\n\n  return (\n    <PlaceholderSearchInputFlex align=\"center\">\n      <PlaceholderTextInput\n        aria-autocomplete=\"list\"\n        aria-expanded=\"false\"\n        autoComplete=\"off\"\n        icon={SearchIcon}\n        data-testid=\"studio-search\"\n        onChange={handleChange}\n        onClick={onOpen}\n        onKeyDown={handleKeyDown}\n        placeholder=\"Search\"\n        radius={2}\n        ref={ref}\n        role=\"combobox\"\n        value={terms.query}\n      />\n      <KeyboardShortcutFlex align=\"center\" height=\"fill\" marginRight={2}>\n        <KBD>{GLOBAL_SEARCH_KEY_MODIFIER.toUpperCase()}</KBD>\n        <KBD>{GLOBAL_SEARCH_KEY.toUpperCase()}</KBD>\n      </KeyboardShortcutFlex>\n    </PlaceholderSearchInputFlex>\n  )\n})\n","import {Box, Card, Flex, Portal, Theme, useClickOutside, useLayer} from '@sanity/ui'\nimport React, {useCallback, useEffect, useId, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport styled, {css} from 'styled-components'\nimport {useColorScheme} from '../../../../colorScheme'\nimport {POPOVER_INPUT_PADDING, POPOVER_MAX_HEIGHT, POPOVER_MAX_WIDTH} from '../constants'\nimport {CommandListProvider} from '../contexts/commandList'\nimport {useSearchState} from '../contexts/search/useSearchState'\nimport {useMeasureSearchResultsIndex} from '../hooks/useMeasureSearchResultsIndex'\nimport {useSearchHotkeys} from '../hooks/useSearchHotkeys'\nimport {hasSearchableTerms} from '../utils/hasSearchableTerms'\nimport {RecentSearches} from './RecentSearches'\nimport {SearchHeader} from './SearchHeader'\nimport {SearchResults} from './SearchResults'\nimport {TypeFilters} from './TypeFilters'\n\nexport type PopoverPosition = {\n  x: number | null\n  y: number\n}\nexport interface SearchPopoverProps {\n  disableFocusLock?: boolean\n  onClose: () => void\n  onOpen: () => void\n  open: boolean\n  position: PopoverPosition\n}\n\nconst Overlay = styled.div`\n  background-color: ${({theme}: {theme: Theme}) => theme.sanity.color.base.shadow.ambient};\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n`\n\nconst SearchContentBox = styled(Box)`\n  overflow-x: hidden;\n  overflow-y: auto;\n  position: relative;\n`\n\nconst SearchPopoverCard = styled(Card)<{$position: PopoverPosition}>`\n  ${({$position}) =>\n    $position.x\n      ? css`\n          left: ${$position.x}px;\n        `\n      : css`\n          left: 50%;\n          transform: translateX(-50%);\n        `}\n  display: flex !important;\n  flex-direction: column;\n  max-height: ${({$position}) =>\n    `min(calc(100vh - ${$position.y}px - ${POPOVER_INPUT_PADDING}px), ${POPOVER_MAX_HEIGHT}px)`};\n  position: absolute;\n  top: ${({$position}) => $position.y}px;\n  width: min(calc(100vw - ${POPOVER_INPUT_PADDING * 2}px), ${POPOVER_MAX_WIDTH}px);\n`\n\nconst TypeFilterCard = styled(Card)`\n  border-left: 1px solid ${({theme}) => theme.sanity.color.base.border};\n  max-width: 250px;\n  width: 100%;\n`\n\nexport function SearchPopover({\n  disableFocusLock,\n  onClose,\n  onOpen,\n  open,\n  position,\n}: SearchPopoverProps) {\n  const [childContainerElement, setChildContainerRef] = useState<HTMLDivElement | null>(null)\n  const [containerElement, setContainerRef] = useState<HTMLDivElement | null>(null)\n  const [headerInputElement, setHeaderInputRef] = useState<HTMLInputElement | null>(null)\n  const [pointerOverlayElement, setPointerOverlayRef] = useState<HTMLDivElement | null>(null)\n\n  const isMountedRef = useRef(false)\n\n  const {isTopLayer, zIndex} = useLayer()\n  const {scheme} = useColorScheme()\n\n  const {\n    dispatch,\n    state: {recentSearches, result, terms},\n  } = useSearchState()\n\n  const hasValidTerms = hasSearchableTerms(terms)\n\n  /**\n   * Measure top-most visible search result index\n   */\n  const {lastSearchIndex, resetLastSearchIndex, setLastSearchIndex} =\n    useMeasureSearchResultsIndex(childContainerElement)\n\n  /**\n   * Store top-most search result scroll index on close\n   */\n  const handleClose = useCallback(() => {\n    setLastSearchIndex()\n    onClose()\n  }, [onClose, setLastSearchIndex])\n\n  const handleClearRecentSearches = useCallback(() => {\n    headerInputElement?.focus()\n  }, [headerInputElement])\n\n  /**\n   * Check for top-most layer to prevent closing if a portalled element (i.e. menu button) is active\n   */\n  const handleClickOutside = useCallback(() => {\n    if (open && isTopLayer) {\n      handleClose()\n    }\n  }, [handleClose, isTopLayer, open])\n\n  /**\n   * Bind hotkeys to open / close actions\n   */\n  useSearchHotkeys({onClose: handleClose, onOpen, open})\n\n  useClickOutside(handleClickOutside, [containerElement])\n\n  /**\n   * Reset last search index when new results are loaded, or visiting recent searches\n   * TODO: Revise if/when we introduce pagination\n   */\n  useEffect(() => {\n    if ((!hasValidTerms || result.loaded) && isMountedRef.current) {\n      resetLastSearchIndex()\n    }\n  }, [hasValidTerms, resetLastSearchIndex, result.loaded])\n\n  /**\n   * Reset ordering when popover is closed (without valid search terms)\n   */\n  useEffect(() => {\n    if (!hasValidTerms && isMountedRef.current && !open) {\n      dispatch({type: 'SEARCH_ORDERING_RESET'})\n    }\n  }, [dispatch, hasValidTerms, open])\n\n  /**\n   * Store mounted state (must be last)\n   */\n  useEffect(() => {\n    if (!isMountedRef?.current) {\n      isMountedRef.current = true\n    }\n  }, [])\n\n  const commandListId = useId()\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <Portal>\n      <FocusLock autoFocus={false} disabled={disableFocusLock} returnFocus>\n        <Overlay style={{zIndex}} />\n\n        <CommandListProvider\n          ariaChildrenLabel={hasValidTerms ? 'Search results' : 'Recent searches'}\n          ariaHeaderLabel=\"Search results\"\n          autoFocus\n          childContainerElement={childContainerElement}\n          childCount={hasValidTerms ? result.hits.length : recentSearches?.length}\n          containerElement={containerElement}\n          headerInputElement={headerInputElement}\n          id={commandListId || ''}\n          data-testid=\"search-results-popover\"\n          initialSelectedIndex={hasValidTerms ? lastSearchIndex : 0}\n          level={0}\n          pointerOverlayElement={pointerOverlayElement}\n          virtualList={hasValidTerms}\n        >\n          <SearchPopoverCard\n            $position={position}\n            overflow=\"hidden\"\n            radius={2}\n            ref={setContainerRef}\n            scheme={scheme}\n            shadow={2}\n            style={{zIndex}}\n          >\n            <SearchHeader setHeaderInputRef={setHeaderInputRef} />\n\n            {/* Reverse flex direction is used to ensure filters are focusable before recent searches */}\n            <Flex align=\"stretch\" direction=\"row-reverse\">\n              <SearchPopoverFilters />\n              <SearchContentBox flex={1}>\n                {hasValidTerms ? (\n                  <SearchResults\n                    onClose={handleClose}\n                    setChildContainerRef={setChildContainerRef}\n                    setPointerOverlayRef={setPointerOverlayRef}\n                    small\n                  />\n                ) : (\n                  <RecentSearches\n                    setChildContainerRef={setChildContainerRef}\n                    setPointerOverlayRef={setPointerOverlayRef}\n                    onClear={handleClearRecentSearches}\n                    showFiltersOnClick\n                  />\n                )}\n              </SearchContentBox>\n            </Flex>\n          </SearchPopoverCard>\n        </CommandListProvider>\n      </FocusLock>\n    </Portal>\n  )\n}\n\nfunction SearchPopoverFilters() {\n  const {\n    state: {filtersVisible},\n  } = useSearchState()\n\n  if (!filtersVisible) {\n    return null\n  }\n\n  return (\n    <TypeFilterCard tone=\"transparent\">\n      <TypeFilters small />\n    </TypeFilterCard>\n  )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport {PlaceholderSearchInput} from './components/PlaceholderSearchInput'\nimport {PopoverPosition, SearchPopover} from './components/SearchPopover'\nimport {POPOVER_INPUT_PADDING, POPOVER_MAX_WIDTH} from './constants'\n\n/**\n * @internal\n */\nexport function SearchField() {\n  const [placeholderElement, setPlaceholderElement] = useState<HTMLInputElement | null>(null)\n  const [open, setOpen] = useState(false)\n\n  const handleClose = useCallback(() => setOpen(false), [])\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  const popoverPosition = usePopoverPosition(placeholderElement)\n\n  return (\n    <>\n      <PlaceholderSearchInput onOpen={handleOpen} ref={setPlaceholderElement} />\n      {popoverPosition && (\n        <SearchPopover\n          onClose={handleClose}\n          onOpen={handleOpen}\n          open={open}\n          position={popoverPosition}\n        />\n      )}\n    </>\n  )\n}\n\nfunction calcDialogPosition(element: HTMLElement): PopoverPosition {\n  const placeholderRect = element.getBoundingClientRect()\n\n  // Offset positioning to account for dialog padding. This should ensure that our popover search input\n  // sits directly over the top of the existing placeholder input.\n  return {\n    x:\n      window.innerWidth - placeholderRect.x > POPOVER_MAX_WIDTH\n        ? placeholderRect.x - POPOVER_INPUT_PADDING\n        : null,\n    y: placeholderRect.y - POPOVER_INPUT_PADDING,\n  }\n}\n\nfunction usePopoverPosition(element: HTMLElement | null) {\n  const [popoverPosition, setPopoverPosition] = useState<PopoverPosition | null>(null)\n\n  useEffect(() => {\n    if (element) {\n      setPopoverPosition(calcDialogPosition(element))\n    }\n  }, [element])\n\n  /**\n   * Update popover position on window resize based off current placeholder input\n   */\n  const handleWindowResize = useCallback(() => {\n    if (element) {\n      setPopoverPosition(calcDialogPosition(element))\n    }\n  }, [element])\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize)\n    return () => window.removeEventListener('resize', handleWindowResize)\n  }, [handleWindowResize])\n\n  return popoverPosition\n}\n","import type {CurrentUser, ObjectSchemaType, Schema} from '@sanity/types'\nimport type {SearchTerms} from '../../../../../search'\nimport {getSearchableOmnisearchTypes} from '../utils/selectors'\n\nconst SEARCH_TERMS_KEY = 'search-terms::recent'\nexport const MAX_RECENT_SEARCHES = 5\n// might come in handy in the future\nconst CURRENT_VERSION = 1\n\nexport type RecentSearchTerms = SearchTerms & {\n  __recent: {\n    index: number\n    timestamp: number\n  }\n}\n\nexport interface RecentSearchesStore {\n  addSearchTerm: (searchTerm: SearchTerms) => RecentSearchTerms[]\n  getRecentSearchTerms: () => RecentSearchTerms[]\n  removeSearchTerms: () => RecentSearchTerms[]\n  removeSearchTermAtIndex: (index: number) => RecentSearchTerms[]\n}\n\ninterface StoredSearch {\n  version: number\n  recentSearches: StoredSearchItem[]\n}\n\ninterface StoredSearchItem {\n  created: string\n  terms: Omit<SearchTerms, 'types'> & {typeNames: string[]}\n}\n\nexport function createRecentSearchesStore({\n  dataset,\n  projectId,\n  schema,\n  user,\n}: {\n  dataset?: string\n  projectId?: string\n  schema: Schema\n  user: CurrentUser | null\n}): RecentSearchesStore | undefined {\n  if (!dataset || !projectId || !supportsLocalStorage || !user) {\n    return undefined\n  }\n\n  const lsKey = `${SEARCH_TERMS_KEY}__${projectId}:${dataset}:${user.id}`\n\n  return {\n    /**\n     * Write a search term to Local Storage and return updated recent searches.\n     */\n    addSearchTerm: (searchTerm: SearchTerms): RecentSearchTerms[] => {\n      const saveTerm: StoredSearchItem = {\n        created: new Date().toISOString(),\n        terms: {\n          query: searchTerm.query.trim(),\n          typeNames: searchTerm.types.map((s) => s.name),\n        },\n      }\n      const comparator = JSON.stringify(saveTerm.terms)\n      const newRecent: StoredSearch = {\n        version: CURRENT_VERSION,\n        recentSearches: [\n          saveTerm,\n          ...getRecentStoredSearchTerms(lsKey).recentSearches.filter((r) => {\n            return JSON.stringify(r.terms) !== comparator\n          }),\n        ].slice(0, MAX_RECENT_SEARCHES),\n      }\n      window.localStorage.setItem(lsKey, JSON.stringify(newRecent))\n\n      return getRecentSearchTerms(lsKey, schema)\n    },\n    /**\n     * Fetch all recent searches from Local Storage.\n     * Invalid search terms will be filtered out and terms will be re-written to Local Storage.\n     */\n    getRecentSearchTerms: getRecentSearchTerms.bind(undefined, lsKey, schema),\n    /**\n     * Remove all search terms from Local Storage and return updated recent searches.\n     */\n    removeSearchTerms: () => {\n      const searchTerms = getRecentStoredSearchTerms(lsKey)\n\n      const newRecent: StoredSearch = {\n        ...searchTerms,\n        recentSearches: [],\n      }\n\n      window.localStorage.setItem(lsKey, JSON.stringify(newRecent))\n\n      return getRecentSearchTerms(lsKey, schema)\n    },\n    /**\n     * Remove a search term from Local Storage and return updated recent searches.\n     */\n    removeSearchTermAtIndex: (index: number) => {\n      const searchTerms = getRecentStoredSearchTerms(lsKey)\n\n      if (index < 0 || index > searchTerms.recentSearches.length) {\n        return getRecentSearchTerms(lsKey, schema)\n      }\n\n      const newRecent: StoredSearch = {\n        ...searchTerms,\n        recentSearches: [\n          ...searchTerms.recentSearches.slice(0, index),\n          ...searchTerms.recentSearches.slice(index + 1),\n        ],\n      }\n\n      window.localStorage.setItem(lsKey, JSON.stringify(newRecent))\n\n      return getRecentSearchTerms(lsKey, schema)\n    },\n  }\n}\n\n/**\n * Get the 'raw' stored search terms from Local Storage.\n * Stored search terms are the minimal representation of saved terms and only include schema names.\n */\nfunction getRecentStoredSearchTerms(lsKey: string): StoredSearch {\n  const recentString = supportsLocalStorage ? window.localStorage.getItem(lsKey) : undefined\n\n  return recentString\n    ? (JSON.parse(recentString) as StoredSearch)\n    : {version: CURRENT_VERSION, recentSearches: []}\n}\n\n/**\n * Get a list of recent searches from Local Storage.\n * Recent searches contain full document schemas.\n */\nfunction getRecentSearchTerms(lsKey: string, schema: Schema): RecentSearchTerms[] {\n  const storedSearchTerms = getRecentStoredSearchTerms(lsKey)\n\n  return sanitizeStoredSearchTerms(schema, storedSearchTerms, lsKey)\n    .recentSearches.filter((r) => !!r.terms)\n    .map((r, index) => ({\n      __recent: {\n        index,\n        timestamp: new Date(r.created).getTime(),\n      },\n      query: r.terms.query,\n      types: r.terms.typeNames\n        .map((typeName) => schema.get(typeName))\n        .filter((s): s is ObjectSchemaType => !!(s && s.jsonType === 'object')),\n    }))\n}\n\n/**\n * Sanitize stored search terms - recent searches containing _any_ number of invalid document schemas are removed.\n * Document types hidden from omnisearch with __experimental_omnisearch_visibility are also omitted.\n * This mutates Local Storage if any invalid terms are found.\n */\nfunction sanitizeStoredSearchTerms(\n  studioSchema: Schema,\n  storedSearchTerms: StoredSearch,\n  lsKey: string\n): StoredSearch {\n  const searchableTypeNames = getSearchableOmnisearchTypes(studioSchema).map(\n    (schema) => schema.name\n  )\n\n  const filteredSearchTerms = storedSearchTerms.recentSearches.filter((searchTerm) => {\n    return searchTerm.terms.typeNames.every((typeName) => searchableTypeNames.includes(typeName))\n  })\n\n  const newStoredSearchTerms: StoredSearch = {\n    version: CURRENT_VERSION,\n    recentSearches: filteredSearchTerms,\n  }\n\n  if (newStoredSearchTerms.recentSearches.length < storedSearchTerms.recentSearches.length) {\n    window.localStorage.setItem(lsKey, JSON.stringify(newStoredSearchTerms))\n  }\n\n  return getRecentStoredSearchTerms(lsKey)\n}\n\nconst supportsLocalStorage = (() => {\n  const key = '__tmp__can_use'\n  try {\n    if (typeof localStorage === 'undefined') {\n      return false\n    }\n\n    localStorage.setItem(key, '---')\n    localStorage.removeItem(key)\n    return true\n  } catch (err) {\n    return false\n  }\n})()\n","import {compact, intersection, keyBy, partition, toLower, union, uniq, words} from 'lodash'\nimport {SearchHit, WeightedHit, SearchSpec} from './types'\n\ntype SearchScore = [number, string]\n\n/**\n * Takes a set of terms and a value and returns a [score, story] pair where score is a value between 0, 1 and story is the explanation.\n *\n * @internal\n */\nexport const calculateScore = (searchTerms: string[], value: string): SearchScore => {\n  // Separate search terms by phrases (wrapped with quotes) and words.\n  const {phrases: uniqueSearchPhrases, words: uniqueSearchWords} =\n    partitionAndSanitizeSearchTerms(searchTerms)\n\n  // Calculate an aggregated score of both phrase and word matches.\n  const [phraseScore, phraseWhy] = calculatePhraseScore(uniqueSearchPhrases, value)\n  const [wordScore, wordWhy] = calculateWordScore(uniqueSearchWords, value)\n  return [phraseScore + wordScore, [wordWhy, phraseWhy].join(', ')]\n}\n\nconst stringify = (value: unknown): string =>\n  typeof value === 'string' ? value : JSON.stringify(value)\n\n/**\n * @internal\n */\nexport function applyWeights(\n  searchSpec: SearchSpec[],\n  hits: SearchHit[],\n  terms: string[] = []\n): WeightedHit[] {\n  const specByType = keyBy(searchSpec, (spec) => spec.typeName)\n  return hits.map((hit, index) => {\n    const typeSpec = specByType[hit._type]\n    const stories = (typeSpec.paths || [])?.map((pathSpec, idx) => {\n      const value = stringify(hit[`w${idx}`])\n      if (!value) {\n        return {path: pathSpec.path, score: 0, why: 'No match'}\n      }\n      const [score, why] = calculateScore(terms, value)\n      return {\n        path: pathSpec.path,\n        score: score * pathSpec.weight,\n        why: `${why} (*${pathSpec.weight})`,\n      }\n    })\n\n    const totalScore = stories.reduce((acc, rank) => acc + rank.score, 0)\n\n    return {hit, resultIndex: hits.length - index, score: totalScore, stories: stories}\n  })\n}\n/**\n * For phrases: score on the total number of matching characters.\n * E.g. given the phrases [\"the fox\", \"of london\"] for the target value \"the wily fox of london\"\n *\n * - \"the fox\" isn't included in the target value (score: 0)\n * - \"of london\" is included in the target value, and 9 out of 22 characters match (score: 9/22 = ~0.408)\n * - non-exact matches have their score divided in half (final score: ~0.204)\n *\n * @internal\n */\nexport function calculatePhraseScore(uniqueSearchPhrases: string[], value: string): SearchScore {\n  const sanitizedValue = value.toLowerCase().trim()\n\n  let fieldScore = 0\n  let matchCount = 0\n  uniqueSearchPhrases.forEach((term) => {\n    if (sanitizedValue.includes(term)) {\n      fieldScore += term.length / sanitizedValue.length\n      matchCount += term.length\n    }\n  })\n\n  return fieldScore === 1\n    ? [1, '[Phrase] Exact match']\n    : [fieldScore / 2, `[Phrase] Matched ${matchCount} of ${sanitizedValue.length} characters`]\n}\n\n/**\n * For words: score on the total number of matching words.\n * E.g. given the words [\"the\", \"fox\", \"of\", \"london\"] for the target value \"the wily fox of london\"\n *\n * - 4 out of 5 words match (score: 4/5 = 0.8)\n * - non-exact matches have their score divided in half (final score: 0.4)\n *\n * @internal\n */\nexport function calculateWordScore(uniqueSearchTerms: string[], value: string): SearchScore {\n  const uniqueValueTerms = uniq(compact(words(toLower(value))))\n\n  const matches = intersection(uniqueSearchTerms, uniqueValueTerms)\n  const all = union(uniqueValueTerms, uniqueSearchTerms)\n  const fieldScore = matches.length / all.length\n  return fieldScore === 1\n    ? [1, '[Word] Exact match']\n    : [\n        fieldScore / 2,\n        `[Word] Matched ${matches.length} of ${all.length} terms: [${matches.join(', ')}]`,\n      ]\n}\n\n/**\n * @internal\n */\nexport function partitionAndSanitizeSearchTerms(searchTerms: string[]): {\n  phrases: string[]\n  words: string[]\n} {\n  const uniqueSearchTerms = uniq(searchTerms.map(toLower))\n\n  const [searchPhrases, searchWords] = partition(uniqueSearchTerms, (term) => /^\".*\"$/.test(term))\n  return {\n    phrases: uniq(searchPhrases).map(toLower).map(stripWrappingQuotes), //\n    words: uniq(searchWords.map(toLower)),\n  }\n}\n\nfunction stripWrappingQuotes(str: string) {\n  return str.replace(/^\"(.*)\"$/, '$1')\n}\n","const SPECIAL_CHARS = /([^!@#$%^&*(),\\\\/?\";:{}|[\\]+<>\\s-])+/g\nconst STRIP_EDGE_CHARS = /(^[.]+)|([.]+$)/\n\nexport function tokenize(string: string): string[] {\n  return (string.match(SPECIAL_CHARS) || []).map((token) => token.replace(STRIP_EDGE_CHARS, ''))\n}\n","import {compact, flatten, flow, toLower, trim, union, uniq, words} from 'lodash'\nimport {joinPath} from '../../../core/util/searchUtils'\nimport {tokenize} from '../common/tokenize'\nimport type {\n  SearchableType,\n  SearchOptions,\n  SearchPath,\n  SearchSpec,\n  SearchTerms,\n  SortDirection,\n  WeightedSearchOptions,\n} from './types'\n\nexport interface SearchParams {\n  __types: string[]\n  __limit: number\n  __offset: number\n  [key: string]: unknown\n}\n\nexport interface SearchQuery {\n  query: string\n  params: SearchParams\n  options: Record<string, unknown>\n  searchSpec: SearchSpec[]\n  terms: string[]\n}\n\nexport const DEFAULT_LIMIT = 1000\n\nconst combinePaths: (paths: string[][]) => string[] = flow([flatten, union, compact])\n\n/**\n * Create an object containing all available document types and weighted paths, used to construct a GROQ query for search.\n * System fields `_id` and `_type` are included by default.\n *\n * If `optimizeIndexPaths` is true, this will will convert all `__experimental_search` paths containing numbers\n * into array syntax. E.g. ['cover', 0, 'cards', 0, 'title'] =\\> \"cover[].cards[].title\"\n *\n * This optimization will yield more search results than may be intended, but offers better performance over arrays with indices.\n * (which are currently unoptimizable by Content Lake)\n */\nfunction createSearchSpecs(types: SearchableType[], optimizeIndexedPaths: boolean) {\n  let hasIndexedPaths = false\n\n  const specs = types.map((type) => ({\n    typeName: type.name,\n    paths: type.__experimental_search.map((config) => {\n      const path = config.path.map((p) => {\n        if (typeof p === 'number') {\n          hasIndexedPaths = true\n          if (optimizeIndexedPaths) {\n            return [] as []\n          }\n        }\n        return p\n      })\n      return {\n        weight: config.weight,\n        path: joinPath(path),\n        mapWith: config.mapWith,\n      }\n    }),\n  }))\n  return {\n    specs,\n    hasIndexedPaths,\n  }\n}\n\nconst pathWithMapper = ({mapWith, path}: SearchPath): string =>\n  mapWith ? `${mapWith}(${path})` : path\n\n/**\n * Create GROQ constraints, given search terms and the full spec of available document types and fields.\n * Essentially a large list of all possible fields (joined by logical OR) to match our search terms against.\n */\nfunction createConstraints(terms: string[], specs: SearchSpec[]) {\n  const combinedSearchPaths = combinePaths(\n    specs.map((configForType) => (configForType.paths || []).map((opt) => pathWithMapper(opt)))\n  )\n\n  const constraints = terms\n    .map((_term, i) => combinedSearchPaths.map((joinedPath) => `${joinedPath} match $t${i}`))\n    .filter((constraint) => constraint.length > 0)\n\n  return constraints.map((constraint) => `(${constraint.join(' || ')})`)\n}\n\n/**\n * Convert a string into an array of tokenized terms.\n *\n * Any (multi word) text wrapped in double quotes will be treated as \"phrases\", or separate tokens that\n * will not have its special characters removed.\n * E.g.`\"the\" \"fantastic mr\" fox fox book` =\\> [\"the\", `\"fantastic mr\"`, \"fox\", \"book\"]\n *\n * Phrases wrapped in quotes are assigned relevance scoring differently from regular words.\n *\n * @internal\n */\nexport function extractTermsFromQuery(query: string): string[] {\n  const quotedQueries = [] as string[]\n  const unquotedQuery = query.replace(/(\"[^\"]*\")/g, (match) => {\n    if (words(match).length > 1) {\n      quotedQueries.push(match)\n      return ''\n    }\n    return match\n  })\n\n  // Lowercase and trim quoted queries\n  const quotedTerms = quotedQueries.map((str) => trim(toLower(str)))\n\n  /**\n   * Convert (remaining) search query into an array of deduped, sanitized tokens.\n   * All white space and special characters are removed.\n   * e.g. \"The saint of Saint-Germain-des-Prs\" =\\> ['the', 'saint', 'of', 'germain', 'des', 'pres']\n   */\n  const remainingTerms = uniq(compact(tokenize(toLower(unquotedQuery))))\n\n  return [...quotedTerms, ...remainingTerms]\n}\n\n/**\n * @internal\n */\nexport function createSearchQuery(\n  searchTerms: SearchTerms,\n  searchOpts: SearchOptions & WeightedSearchOptions = {}\n): SearchQuery {\n  const {filter, params, tag} = searchOpts\n\n  /**\n   * First pass: create initial search specs and determine if this subset of types contains\n   * any indexed paths in `__experimental_search`.\n   * e.g. \"authors.0.title\" or [\"authors\", 0, \"title\"]\n   */\n  const {specs: exactSearchSpecs, hasIndexedPaths} = createSearchSpecs(searchTerms.types, false)\n\n  // Extract search terms from string query, factoring in phrases wrapped in quotes\n  const terms = extractTermsFromQuery(searchTerms.query)\n\n  /**\n   * Second pass: create an optimized spec (with array indices removed), but only if types with any\n   * indexed paths have been previously found. Otherwise, passthrough original search specs.\n   *\n   * These optimized specs are only used when building constraints in this search query.\n   */\n  const optimizedSpecs = hasIndexedPaths\n    ? createSearchSpecs(searchTerms.types, true).specs\n    : exactSearchSpecs\n\n  // Construct search filters used in this GROQ query\n  const filters = [\n    '_type in $__types',\n    searchOpts.includeDrafts === false && `!(_id in path('drafts.**'))`,\n    ...createConstraints(terms, optimizedSpecs),\n    filter ? `(${filter})` : '',\n  ].filter(Boolean)\n\n  const selections = exactSearchSpecs.map((spec) => {\n    const constraint = `_type == \"${spec.typeName}\" => `\n    const selection = `{ ${spec.paths.map((cfg, i) => `\"w${i}\": ${pathWithMapper(cfg)}`)} }`\n    return `${constraint}${selection}`\n  })\n\n  const selection = selections.length > 0 ? `...select(${selections.join(',\\n')})` : ''\n\n  // Default to `_id asc` (GROQ default) if no search sort is provided\n  const sortDirection = searchOpts?.sort?.direction || ('asc' as SortDirection)\n  const sortField = searchOpts?.sort?.field || '_id'\n\n  const query =\n    `*[${filters.join(' && ')}]` +\n    `| order(${sortField} ${sortDirection})` +\n    `[$__offset...$__limit]` +\n    // the following would improve search quality for paths-with-numbers, but increases the size of the query by up to 50%\n    // `${hasIndexedPaths ? `[${createConstraints(terms, exactSearchSpec).join(' && ')}]` : ''}` +\n    `{_type, _id, ${selection}}`\n\n  // Prepend optional GROQ comments to query\n  const groqComments = (searchOpts?.comments || []).map((s) => `// ${s}`).join('\\n')\n  const updatedQuery = groqComments ? `${groqComments}\\n${query}` : query\n\n  const offset = searchOpts?.offset ?? 0\n  const limit = (searchOpts?.limit ?? DEFAULT_LIMIT) + offset\n\n  return {\n    query: updatedQuery,\n    params: {\n      ...toGroqParams(terms),\n      __types: exactSearchSpecs.map((spec) => spec.typeName),\n      __limit: limit,\n      __offset: offset,\n      ...(params || {}),\n    },\n    options: {tag},\n    searchSpec: exactSearchSpecs,\n    terms,\n  }\n}\n\nconst toGroqParams = (terms: string[]): Record<string, string> => {\n  const params: Record<string, string> = {}\n  return terms.reduce((acc, term, i) => {\n    acc[`t${i}`] = `${term}*` // \"t\" is short for term\n    return acc\n  }, params)\n}\n","import type {SanityClient} from '@sanity/client'\nimport {sortBy} from 'lodash'\nimport type {Observable} from 'rxjs'\nimport {map, tap} from 'rxjs/operators'\nimport {removeDupes} from '../../util/draftUtils'\nimport {applyWeights} from './applyWeights'\nimport {createSearchQuery} from './createSearchQuery'\nimport type {\n  SearchableType,\n  SearchHit,\n  SearchOptions,\n  SearchTerms,\n  WeightedHit,\n  WeightedSearchOptions,\n} from './types'\n\nfunction getSearchTerms(searchParams: string | SearchTerms, types: SearchableType[]) {\n  if (typeof searchParams === 'string') {\n    return {\n      query: searchParams,\n      types: types,\n    }\n  }\n  return searchParams.types.length ? searchParams : {...searchParams, types}\n}\n\n/**\n * @internal\n */\nexport function createWeightedSearch(\n  types: SearchableType[],\n  client: SanityClient,\n  commonOpts: WeightedSearchOptions = {}\n): (searchTerms: string | SearchTerms, searchOpts?: SearchOptions) => Observable<WeightedHit[]> {\n  // Search currently supports both strings (reference + cross dataset reference inputs)\n  // or a SearchTerms object (omnisearch).\n  return function search(searchParams, searchOpts = {}) {\n    const searchTerms = getSearchTerms(searchParams, types)\n\n    const {query, params, options, searchSpec, terms} = createSearchQuery(searchTerms, {\n      ...commonOpts,\n      ...searchOpts,\n    })\n\n    return client.observable.fetch(query, params, options).pipe(\n      commonOpts.unique ? map(removeDupes) : tap(),\n      // Assign weighting and scores based on current search terms.\n      // No scores will be assigned when terms are empty.\n      map((hits: SearchHit[]) => applyWeights(searchSpec, hits, terms)),\n      // Optionally skip client-side score sorting.\n      // This can be relevant when ordering results by specific fields, especially dates.\n      searchOpts?.skipSortByScore ? tap() : map((hits) => sortBy(hits, (hit) => -hit.score))\n    )\n  }\n}\n","import type {Schema} from '@sanity/types'\nimport isEqual from 'lodash/isEqual'\nimport {useCallback, useMemo, useState} from 'react'\nimport {useObservableCallback} from 'react-rx'\nimport {concat, Observable, of} from 'rxjs'\nimport {\n  catchError,\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  map,\n  scan,\n  switchMap,\n  tap,\n} from 'rxjs/operators'\nimport {useClient} from '../../../../../hooks'\nimport {createWeightedSearch, SearchOptions, SearchTerms, WeightedHit} from '../../../../../search'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../../studioClient'\nimport {SearchState} from '../types'\nimport {hasSearchableTerms} from '../utils/hasSearchableTerms'\nimport {getSearchableOmnisearchTypes} from '../utils/selectors'\n\ninterface SearchRequest {\n  options?: SearchOptions\n  terms: SearchTerms\n}\n\nconst INITIAL_SEARCH_STATE: SearchState = {\n  error: null,\n  hits: [],\n  loading: false,\n  options: {},\n  terms: {\n    query: '',\n    types: [],\n  },\n}\n\nfunction nonNullable<T>(v: T): v is NonNullable<T> {\n  return v !== null\n}\n\nfunction sanitizeRequest(request: SearchRequest) {\n  return {\n    ...request,\n    terms: {\n      ...request.terms,\n      query: request.terms.query.trim(),\n    },\n  }\n}\n\nexport function useSearch({\n  initialState,\n  onComplete,\n  onError,\n  onStart,\n  schema,\n}: {\n  initialState: SearchState\n  onComplete?: (hits: WeightedHit[]) => void\n  onError?: (error: Error) => void\n  onStart?: () => void\n  schema: Schema\n}): {\n  handleSearch: (request: SearchRequest) => void\n  handleClearSearch: () => void\n  searchState: SearchState\n} {\n  const [searchState, setSearchState] = useState(initialState)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const searchWeighted = useMemo(\n    () =>\n      createWeightedSearch(getSearchableOmnisearchTypes(schema), client, {\n        tag: 'search.global',\n        unique: true,\n      }),\n    [client, schema]\n  )\n\n  const handleQueryChange = useObservableCallback(\n    (inputValue$: Observable<SearchRequest | null>) => {\n      return inputValue$.pipe(\n        filter(nonNullable),\n        map(sanitizeRequest),\n        distinctUntilChanged(isEqual),\n        filter((request: SearchRequest) => hasSearchableTerms(request.terms)),\n        debounceTime(300),\n        tap(onStart),\n        switchMap((request) =>\n          concat(\n            of({\n              ...INITIAL_SEARCH_STATE,\n              loading: true,\n              options: request.options,\n              terms: request.terms,\n            }),\n            (searchWeighted(request.terms, request.options) as Observable<WeightedHit[]>).pipe(\n              map((hits) => ({hits})),\n              tap(({hits}) => onComplete?.(hits)),\n              catchError((error) => {\n                onError?.(error)\n                return of({\n                  ...INITIAL_SEARCH_STATE,\n                  error,\n                  loading: false,\n                  options: request.options,\n                  terms: request.terms,\n                })\n              })\n            ),\n            of({loading: false})\n          )\n        ),\n        scan((prevState, nextState): SearchState => {\n          return {...prevState, ...nextState}\n        }, INITIAL_SEARCH_STATE),\n        tap(setSearchState)\n      )\n    },\n    []\n  )\n\n  const handleClearSearch = useCallback(() => {\n    setSearchState(INITIAL_SEARCH_STATE)\n    handleQueryChange({terms: INITIAL_SEARCH_STATE.terms}) // cancel current request\n  }, [handleQueryChange])\n\n  const handleSearch = useCallback(\n    (searchRequest: SearchRequest) => handleQueryChange(searchRequest),\n    [handleQueryChange]\n  )\n\n  return {handleSearch, handleClearSearch, searchState}\n}\n","import type {RecentSearchTerms} from '../datastores/recentSearches'\nimport type {SearchTerms} from '../../../../../search'\n\nexport function isRecentSearchTerms(\n  terms: SearchTerms | RecentSearchTerms\n): terms is RecentSearchTerms {\n  return typeof (terms as RecentSearchTerms).__recent !== 'undefined'\n}\n","import debug from 'debug'\nimport {DEBUG_FRAGMENT} from '../constants'\n\nconst rootName = 'core:studio:navbar:search:'\n\nexport default debug(rootName)\nexport function debugWithName(name: string): debug.Debugger {\n  const namespace = `${rootName}${name}`\n  if (debug && debug.enabled(namespace)) {\n    return debug(namespace)\n  }\n  return debug(rootName)\n}\n\nexport function isDebugMode(): boolean {\n  return typeof window === 'undefined'\n    ? false\n    : window.location.hash.slice(1).split(';').includes(DEBUG_FRAGMENT)\n}\n","import type {CurrentUser} from '@sanity/types'\nimport type {SearchableType, SearchTerms, WeightedHit} from '../../../../../../search'\nimport type {RecentSearchTerms} from '../../datastores/recentSearches'\nimport {ORDER_RELEVANCE, SearchOrdering} from '../../types'\nimport {debugWithName, isDebugMode} from '../../utils/debug'\nimport {isRecentSearchTerms} from '../../utils/isRecentSearchTerms'\nimport {sortTypes} from '../../utils/selectors'\n\nexport interface SearchReducerState {\n  currentUser: CurrentUser | null\n  debug: boolean\n  filtersVisible: boolean\n  ordering: SearchOrdering\n  pageIndex: number\n  recentSearches: RecentSearchTerms[]\n  result: SearchResult\n  terms: RecentSearchTerms | SearchTerms\n}\n\nexport interface SearchResult {\n  error: Error | null\n  hasMore?: boolean | null\n  hits: WeightedHit[]\n  loaded: boolean\n  loading: boolean\n}\n\nexport function initialSearchState(\n  currentUser: CurrentUser | null,\n  recentSearches?: RecentSearchTerms[]\n): SearchReducerState {\n  return {\n    currentUser,\n    debug: isDebugMode(),\n    filtersVisible: false,\n    ordering: ORDER_RELEVANCE,\n    pageIndex: 0,\n    recentSearches: recentSearches || [],\n    result: {\n      error: null,\n      hasMore: null,\n      hits: [],\n      loaded: false,\n      loading: false,\n    },\n    terms: {\n      query: '',\n      types: [],\n    },\n  }\n}\n\nexport type FiltersHide = {type: 'FILTERS_HIDE'}\nexport type FiltersShow = {type: 'FILTERS_SHOW'}\nexport type FiltersToggle = {type: 'FILTERS_TOGGLE'}\nexport type PageIncrement = {type: 'PAGE_INCREMENT'}\nexport type RecentSearchesSet = {\n  recentSearches: RecentSearchTerms[]\n  type: 'RECENT_SEARCHES_SET'\n}\nexport type SearchClear = {type: 'SEARCH_CLEAR'}\nexport type SearchOrderingReset = {type: 'SEARCH_ORDERING_RESET'}\nexport type SearchOrderingSet = {ordering: SearchOrdering; type: 'SEARCH_ORDERING_SET'}\nexport type SearchRequestComplete = {\n  type: 'SEARCH_REQUEST_COMPLETE'\n  hits: WeightedHit[]\n}\nexport type SearchRequestError = {type: 'SEARCH_REQUEST_ERROR'; error: Error}\nexport type SearchRequestStart = {type: 'SEARCH_REQUEST_START'}\nexport type TermsQuerySet = {type: 'TERMS_QUERY_SET'; query: string}\nexport type TermsSet = {type: 'TERMS_SET'; terms: SearchTerms}\nexport type TermsTypeAdd = {type: 'TERMS_TYPE_ADD'; schemaType: SearchableType}\nexport type TermsTypeRemove = {type: 'TERMS_TYPE_REMOVE'; schemaType: SearchableType}\nexport type TermsTypesClear = {type: 'TERMS_TYPES_CLEAR'}\n\nexport type SearchAction =\n  | FiltersHide\n  | FiltersShow\n  | FiltersToggle\n  | PageIncrement\n  | RecentSearchesSet\n  | SearchClear\n  | SearchRequestComplete\n  | SearchRequestError\n  | SearchRequestStart\n  | SearchOrderingReset\n  | SearchOrderingSet\n  | TermsQuerySet\n  | TermsSet\n  | TermsTypeAdd\n  | TermsTypeRemove\n  | TermsTypesClear\n\nconst debug = debugWithName('reducer')\n\nexport function searchReducer(state: SearchReducerState, action: SearchAction): SearchReducerState {\n  let prefix = ''\n  if (action.type.startsWith('SEARCH_REQUEST')) {\n    prefix = ''\n  }\n  if (action.type.startsWith('RECENT_SEARCHES')) {\n    prefix = ''\n  }\n  debug(prefix, action)\n\n  switch (action.type) {\n    case 'FILTERS_HIDE':\n      return {\n        ...state,\n        filtersVisible: false,\n      }\n    case 'FILTERS_SHOW':\n      return {\n        ...state,\n        filtersVisible: true,\n      }\n    case 'FILTERS_TOGGLE':\n      return {\n        ...state,\n        filtersVisible: !state.filtersVisible,\n      }\n    case 'PAGE_INCREMENT':\n      return {\n        ...state,\n        pageIndex: state.pageIndex + 1,\n        terms: stripRecent(state.terms),\n      }\n    case 'RECENT_SEARCHES_SET':\n      return {\n        ...state,\n        recentSearches: action.recentSearches,\n      }\n    case 'SEARCH_CLEAR':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          hasMore: null,\n          hits: [],\n        },\n      }\n    case 'SEARCH_ORDERING_RESET':\n      return {\n        ...state,\n        ordering: ORDER_RELEVANCE,\n        terms: stripRecent(state.terms),\n      }\n    case 'SEARCH_ORDERING_SET':\n      return {\n        ...state,\n        ordering: action.ordering,\n        terms: stripRecent(state.terms),\n      }\n    case 'SEARCH_REQUEST_COMPLETE':\n      return {\n        ...state,\n        result: {\n          ...state.result,\n          error: null,\n          hasMore: action.hits.length > 0,\n          hits: state.pageIndex > 0 ? [...state.result.hits, ...action.hits] : action.hits,\n          loaded: true,\n          loading: false,\n        },\n      }\n    case 'SEARCH_REQUEST_ERROR':\n      return {\n        ...state,\n        result: {\n          ...state.result,\n          error: action.error,\n          loaded: false,\n          loading: false,\n        },\n      }\n    case 'SEARCH_REQUEST_START':\n      return {\n        ...state,\n        result: {\n          ...state.result,\n          loaded: false,\n          loading: true,\n        },\n      }\n    case 'TERMS_QUERY_SET':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          query: action.query,\n        }),\n      }\n    case 'TERMS_SET':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: action.terms,\n      }\n    case 'TERMS_TYPE_ADD':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          types: [...state.terms.types, action.schemaType].sort(sortTypes),\n        }),\n      }\n    case 'TERMS_TYPE_REMOVE':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          types: state.terms.types.filter((s) => s !== action.schemaType),\n        }),\n      }\n    case 'TERMS_TYPES_CLEAR':\n      return {\n        ...state,\n        pageIndex: 0,\n        result: {\n          ...state.result,\n          loaded: false,\n        },\n        terms: stripRecent({\n          ...state.terms,\n          types: [],\n        }),\n      }\n    default:\n      return state\n  }\n}\n\n/**\n * This function is used to strip __recent from terms, generally whenever there's a change in\n * search terms or options that would otherwise trigger an additional search request.\n * (e.g. updating the search query, changing a sort filter, adding / removing document types)\n *\n * This is done so we can better disambiguate between requests sent as a result of clicking a 'recent search'\n * for purposes of measurement.\n *\n * TODO: remove this (and associated tests) once client-side instrumentation is available\n */\nfunction stripRecent(terms: RecentSearchTerms | SearchTerms) {\n  if (isRecentSearchTerms(terms)) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const {__recent, ...rest} = terms\n    return rest\n  }\n  return terms\n}\n","import isEqual from 'lodash/isEqual'\nimport React, {ReactNode, useEffect, useMemo, useReducer, useRef} from 'react'\nimport {useClient, useSchema} from '../../../../../../hooks'\nimport type {SearchTerms} from '../../../../../../search'\nimport {useCurrentUser} from '../../../../../../store'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../../../studioClient'\nimport {FINDABILITY_MVI, SEARCH_LIMIT} from '../../constants'\nimport {createRecentSearchesStore, RecentSearchTerms} from '../../datastores/recentSearches'\nimport {useSearch} from '../../hooks/useSearch'\nimport type {SearchOrdering} from '../../types'\nimport {hasSearchableTerms} from '../../utils/hasSearchableTerms'\nimport {isRecentSearchTerms} from '../../utils/isRecentSearchTerms'\nimport {initialSearchState, searchReducer} from './reducer'\nimport {SearchContext} from './SearchContext'\n\ninterface SearchProviderProps {\n  children?: ReactNode\n}\n\n/**\n * @internal\n */\nexport function SearchProvider({children}: SearchProviderProps) {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n\n  const {dataset, projectId} = client.config()\n\n  // Create local storage store\n  const recentSearchesStore = useMemo(\n    () => createRecentSearchesStore({dataset, projectId, schema, user: currentUser}),\n    [currentUser, dataset, projectId, schema]\n  )\n\n  const recentSearches = useMemo(\n    () => recentSearchesStore?.getRecentSearchTerms(),\n    [recentSearchesStore]\n  )\n\n  const initialState = useMemo(\n    () => initialSearchState(currentUser, recentSearches),\n    [currentUser, recentSearches]\n  )\n  const [state, dispatch] = useReducer(searchReducer, initialState)\n\n  const {ordering, pageIndex, result, terms} = state\n\n  const isMountedRef = useRef(false)\n  const previousOrderingRef = useRef<SearchOrdering>(initialState.ordering)\n  const previousPageIndexRef = useRef<number>(initialState.pageIndex)\n  const previousTermsRef = useRef<SearchTerms | RecentSearchTerms>(initialState.terms)\n\n  const {handleSearch, searchState} = useSearch({\n    initialState: {...result, terms},\n    onComplete: (hits) => dispatch({hits, type: 'SEARCH_REQUEST_COMPLETE'}),\n    onError: (error) => dispatch({error, type: 'SEARCH_REQUEST_ERROR'}),\n    onStart: () => dispatch({type: 'SEARCH_REQUEST_START'}),\n    schema,\n  })\n\n  const hasValidTerms = hasSearchableTerms(terms)\n\n  /**\n   * Trigger search when any terms (query or selected types) OR current pageIndex has changed\n   *\n   * Note that we compare inbound terms with our last local snapshot, and not the value of\n   * `searchState` from `useSearch`, as that only contains a reference to the last fully _executed_ request.\n   * There are cases were we may not run searches when terms change (e.g. when search terms are empty / invalid).\n   */\n  useEffect(() => {\n    const orderingChanged = !isEqual(ordering, previousOrderingRef.current)\n    const pageIndexChanged = pageIndex !== previousPageIndexRef.current\n    const termsChanged = !isEqual(terms, previousTermsRef.current)\n\n    if (orderingChanged || pageIndexChanged || termsChanged) {\n      // Use a custom label if provided, otherwise return field and direction, e.g. `_updatedAt desc`\n      const sortLabel =\n        ordering?.customMeasurementLabel || `${ordering.sort.field} ${ordering.sort.direction}`\n\n      handleSearch({\n        options: {\n          // Comments prepended to each query for future measurement\n          comments: [\n            `findability-mvi:${FINDABILITY_MVI}`,\n            ...(isRecentSearchTerms(terms)\n              ? [`findability-recent-search:${terms.__recent.index}`]\n              : []),\n            `findability-selected-types:${terms.types.length}`,\n            `findability-sort:${sortLabel}`,\n          ],\n          limit: SEARCH_LIMIT,\n          offset: pageIndex * SEARCH_LIMIT,\n          skipSortByScore: ordering.ignoreScore,\n          sort: ordering.sort,\n        },\n        terms,\n      })\n\n      // Update pageIndex snapshot only on a valid search request\n      previousPageIndexRef.current = pageIndex\n    }\n\n    // Update snapshots, even if no search request was executed\n    previousOrderingRef.current = ordering\n    previousTermsRef.current = terms\n  }, [handleSearch, hasValidTerms, ordering, pageIndex, searchState.terms, terms])\n\n  /**\n   * Reset search hits / state when (after initial amount):\n   * - we have no valid search terms and\n   * - we have existing hits\n   */\n  useEffect(() => {\n    if (!hasValidTerms && isMountedRef?.current && result.hits.length > 0) {\n      dispatch({type: 'SEARCH_CLEAR'})\n    }\n\n    isMountedRef.current = true\n  }, [dispatch, hasValidTerms, result.hits, terms.query, terms.types])\n\n  return (\n    <SearchContext.Provider value={{dispatch, recentSearchesStore, state}}>\n      {children}\n    </SearchContext.Provider>\n  )\n}\n","import {MenuIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Layer,\n  LayerProvider,\n  PortalProvider,\n  Text,\n  Tooltip,\n  useMediaIndex,\n  useRootTheme,\n} from '@sanity/ui'\nimport React, {useCallback, useState, useMemo, useEffect, useRef, useContext} from 'react'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\nimport {isDev} from '../../../environment'\nimport {useWorkspace} from '../../workspace'\nimport {useColorScheme} from '../../colorScheme'\nimport {useWorkspaces} from '../../workspaces'\nimport {NavbarContext} from '../../StudioLayout'\nimport {useLogoComponent, useToolMenuComponent} from '../../studio-components-hooks'\nimport {StudioTheme} from '../../../theme'\nimport {UserMenu} from './userMenu'\nimport {NewDocumentButton} from './NewDocumentButton'\nimport {PresenceMenu} from './presence'\nimport {NavDrawer} from './NavDrawer'\nimport {ChangelogButton} from './changelog'\nimport {WorkspaceMenuButton} from './workspace'\nimport {ConfigIssuesButton} from './configIssues/ConfigIssuesButton'\nimport {LogoButton} from './LogoButton'\nimport {SearchDialog, SearchField} from './search'\nimport {SearchProvider} from './search/contexts/search/SearchProvider'\nimport {RouterState, useRouterState, useStateLink} from 'sanity/router'\n\nconst RootLayer = styled(Layer)`\n  min-height: auto;\n  position: relative;\n\n  &[data-search-open='true'] {\n    top: 0;\n    position: sticky;\n  }\n`\n\nconst RootCard = styled(Card)`\n  line-height: 0;\n`\n\nconst LeftFlex = styled(Flex)`\n  width: max-content;\n`\n\n/** @beta */\nexport function StudioNavbar() {\n  const {name, tools, ...workspace} = useWorkspace()\n  const theme = useRootTheme().theme as StudioTheme\n  const workspaces = useWorkspaces()\n  const routerState = useRouterState()\n  const {scheme} = useColorScheme()\n  const {href: rootHref, onClick: handleRootClick} = useStateLink({state: {}})\n  const mediaIndex = useMediaIndex()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n\n  const {onSearchFullscreenOpenChange, searchFullscreenOpen, searchFullscreenPortalEl} =\n    useContext(NavbarContext)\n\n  const Logo = useLogoComponent()\n  const ToolMenu = useToolMenuComponent()\n\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false)\n\n  const routerStateRef = useRef<RouterState>(routerState)\n  const workspaceNameRef = useRef<string>(name)\n\n  // Close the NavDrawer when changing tool or workspace\n  useEffect(() => {\n    if (routerStateRef.current.tool !== routerState.tool || name !== workspaceNameRef.current) {\n      setDrawerOpen(false)\n    }\n\n    routerStateRef.current = routerState\n    workspaceNameRef.current = name\n  }, [name, routerState])\n\n  const [drawerButtonEl, setDrawerButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [searchOpenButtonEl, setSearchOpenButtonEl] = useState<HTMLButtonElement | null>(null)\n\n  const shouldRender = useMemo(\n    () => ({\n      brandingCenter: mediaIndex <= 1,\n      changelog: mediaIndex > 1,\n      collapsedPresenceMenu: mediaIndex <= 1,\n      loginStatus: mediaIndex > 1,\n      searchFullscreen: mediaIndex <= 1,\n      configIssues: mediaIndex > 1 && isDev,\n      workspaces: mediaIndex >= 3 && workspaces.length > 1,\n      tools: mediaIndex >= 3,\n    }),\n    [mediaIndex, workspaces.length]\n  )\n  const formattedName = typeof name === 'string' && name !== 'root' ? startCase(name) : null\n  const title = workspace.title || formattedName || 'Studio'\n\n  useEffect(() => {\n    onSearchFullscreenOpenChange(searchFullscreenOpen)\n  }, [searchFullscreenOpen, onSearchFullscreenOpenChange])\n\n  // Disable fullscreen search on media query change (if already open)\n  useEffect(() => {\n    if (onSearchFullscreenOpenChange && !shouldRender.searchFullscreen) {\n      onSearchFullscreenOpenChange(false)\n    }\n  }, [onSearchFullscreenOpenChange, shouldRender.searchFullscreen])\n\n  const handleOpenSearchFullscreen = useCallback(() => {\n    onSearchFullscreenOpenChange(true)\n  }, [onSearchFullscreenOpenChange])\n\n  const handleCloseSearchFullscreen = useCallback(() => {\n    onSearchFullscreenOpenChange(false)\n    searchOpenButtonEl?.focus()\n  }, [onSearchFullscreenOpenChange, searchOpenButtonEl])\n\n  const handleCloseDrawer = useCallback(() => {\n    setDrawerOpen(false)\n    drawerButtonEl?.focus()\n  }, [drawerButtonEl])\n\n  const handleOpenDrawer = useCallback(() => {\n    setDrawerOpen(true)\n  }, [])\n\n  return (\n    <RootLayer zOffset={100} data-search-open={searchFullscreenOpen}>\n      <RootCard\n        data-testid=\"navbar\"\n        data-ui=\"Navbar\"\n        padding={2}\n        scheme=\"dark\"\n        shadow={theme.__legacy || scheme === 'dark' ? 1 : undefined}\n        sizing=\"border\"\n      >\n        <Flex align=\"center\" justify=\"space-between\">\n          <LeftFlex align=\"center\" flex={shouldRender.brandingCenter ? undefined : 1}>\n            {!shouldRender.tools && (\n              <Box marginRight={1}>\n                <Button\n                  mode=\"bleed\"\n                  icon={MenuIcon}\n                  onClick={handleOpenDrawer}\n                  ref={setDrawerButtonEl}\n                />\n              </Box>\n            )}\n\n            {!shouldRender.brandingCenter && (\n              <Box marginRight={1}>\n                <LogoButton href={rootHref} onClick={handleRootClick} title={title}>\n                  <Logo title={title} />\n                </LogoButton>\n              </Box>\n            )}\n\n            {shouldRender.workspaces && (\n              <Box marginRight={2}>\n                <Tooltip\n                  content={\n                    <Box padding={2}>\n                      <Text size={1}>Select workspace</Text>\n                    </Box>\n                  }\n                  placement=\"bottom\"\n                  portal\n                  scheme={scheme}\n                >\n                  <Box>\n                    <WorkspaceMenuButton />\n                  </Box>\n                </Tooltip>\n              </Box>\n            )}\n\n            <Box marginRight={shouldRender.brandingCenter ? undefined : 2}>\n              <NewDocumentButton />\n            </Box>\n\n            {/* Search */}\n            <LayerProvider>\n              <SearchProvider>\n                <PortalProvider element={searchFullscreenPortalEl}>\n                  {shouldRender.searchFullscreen && (\n                    <SearchDialog\n                      onClose={handleCloseSearchFullscreen}\n                      onOpen={handleOpenSearchFullscreen}\n                      open={searchFullscreenOpen}\n                    />\n                  )}\n                </PortalProvider>\n                {!shouldRender.searchFullscreen && <SearchField />}\n              </SearchProvider>\n            </LayerProvider>\n\n            {shouldRender.tools && (\n              <Card borderRight flex={1} marginX={2} overflow=\"visible\" paddingRight={1}>\n                <ToolMenu\n                  activeToolName={activeToolName}\n                  closeSidebar={handleCloseDrawer}\n                  context=\"topbar\"\n                  isSidebarOpen={false}\n                  tools={tools}\n                />\n              </Card>\n            )}\n          </LeftFlex>\n\n          {shouldRender.brandingCenter && (\n            <Box marginX={1}>\n              <LogoButton href={rootHref} onClick={handleRootClick} title={title}>\n                <Logo title={title} />\n              </LogoButton>\n            </Box>\n          )}\n\n          <Flex align=\"center\">\n            <Box marginRight={1}>\n              <PresenceMenu collapse={shouldRender.collapsedPresenceMenu} />\n            </Box>\n\n            {shouldRender.changelog && (\n              <Box marginRight={1}>\n                <ChangelogButton />\n              </Box>\n            )}\n\n            {shouldRender.configIssues && (\n              <Box marginRight={2}>\n                <ConfigIssuesButton />\n              </Box>\n            )}\n\n            {shouldRender.tools && (\n              <Box>\n                <UserMenu />\n              </Box>\n            )}\n\n            {shouldRender.searchFullscreen && (\n              <Button\n                aria-label=\"Open search\"\n                icon={SearchIcon}\n                mode=\"bleed\"\n                onClick={handleOpenSearchFullscreen}\n                ref={setSearchOpenButtonEl}\n              />\n            )}\n          </Flex>\n        </Flex>\n      </RootCard>\n\n      {!shouldRender.tools && (\n        <NavDrawer\n          activeToolName={activeToolName}\n          isOpen={drawerOpen}\n          onClose={handleCloseDrawer}\n          tools={tools}\n        />\n      )}\n    </RootLayer>\n  )\n}\n","import {Menu, MenuButton, MenuButtonProps, MenuDivider, MenuItem} from '@sanity/ui'\nimport React from 'react'\nimport {CollapseMenuProps} from './CollapseMenu'\n\nconst MENU_BUTTON_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  portal: true,\n  constrainSize: true,\n}\n\nexport function CollapseOverflowMenu(\n  props: Pick<\n    CollapseMenuProps,\n    'disableRestoreFocusOnClose' | 'menuButtonProps' | 'onMenuClose'\n  > & {menuOptionsArray: React.ReactElement[]; menuButton: React.ReactElement}\n) {\n  const {disableRestoreFocusOnClose, menuButton, menuButtonProps, menuOptionsArray, onMenuClose} =\n    props\n\n  return (\n    <MenuButton\n      __unstable_disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n      id=\"menu-button\"\n      onClose={onMenuClose}\n      popover={MENU_BUTTON_POPOVER_PROPS}\n      {...menuButtonProps}\n      button={menuButton}\n      menu={\n        <Menu>\n          {menuOptionsArray.map((c, index) => {\n            const {\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              collapsedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              expandedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipText,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              dividerBefore,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              fontSize,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              padding,\n              text,\n              icon,\n              selected,\n              ...rest\n            } = c.props\n\n            return (\n              <React.Fragment key={c.key}>\n                {dividerBefore && index !== 0 && <MenuDivider />}\n                <MenuItem text={text} icon={icon} pressed={selected} {...rest} />\n              </React.Fragment>\n            )\n          })}\n        </Menu>\n      }\n    />\n  )\n}\n","import {Flex} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\n\ninterface ObserveElementProps {\n  children: React.ReactElement\n  options?: IntersectionObserverInit\n  callback: IntersectionObserverCallback\n}\n\nexport function ObserveElement(props: ObserveElementProps) {\n  const {callback, children, options, ...rest} = props\n  const [el, setEl] = useState<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (!el) return undefined\n\n    const io = new IntersectionObserver(callback, options)\n    io.observe(el)\n\n    return () => {\n      io.unobserve(el)\n      io.disconnect()\n    }\n  }, [el, callback, options])\n\n  return (\n    <Flex ref={setEl} {...rest}>\n      {children}\n    </Flex>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst DividerDiv = styled.div`\n  border-right: 1px solid var(--card-border-color);\n  height: auto;\n\n  &[data-hidden] {\n    opacity: 0;\n  }\n`\n\ninterface CollapseMenuDividerProps {\n  hidden?: boolean\n}\n\nexport function CollapseMenuDivider(props: CollapseMenuDividerProps) {\n  const {hidden, ...rest} = props\n\n  return (\n    <DividerDiv data-ui=\"CollapseMenuDivider\" data-hidden={hidden ? '' : undefined} {...rest} />\n  )\n}\n","import {EllipsisVerticalIcon} from '@sanity/icons'\nimport {Box, Button, Flex, MenuButtonProps, Text, Tooltip, useElementRect} from '@sanity/ui'\nimport React, {cloneElement, forwardRef, useCallback, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {CollapseOverflowMenu} from './CollapseOverflowMenu'\nimport {ObserveElement} from './ObserveElement'\nimport {CollapseMenuDivider} from './CollapseMenuDivider'\n\n/** @internal */\nexport interface CollapseMenuProps {\n  children: React.ReactNode\n  collapsed?: boolean\n  collapseText?: boolean\n  disableRestoreFocusOnClose?: boolean\n  gap?: number | number[]\n  menuButtonProps?: Omit<MenuButtonProps, 'id' | 'menu' | 'button'> & {\n    id?: string\n    button?: React.ReactElement\n  }\n  onMenuClose?: () => void\n}\n\nconst FOCUS_RING_PADDING = 3\n\nconst OPTION_STYLE = css`\n  list-style: none;\n  display: flex;\n  white-space: nowrap;\n\n  &[data-hidden='true'] {\n    opacity: 0;\n    visibility: hidden;\n  }\n`\n\nconst OuterFlex = styled(Flex)`\n  padding: ${FOCUS_RING_PADDING}px;\n  margin: -${FOCUS_RING_PADDING}px;\n  box-sizing: border-box;\n`\n\nconst RootFlex = styled(Flex)`\n  border-radius: inherit;\n  position: relative;\n`\n\nconst RowFlex = styled(Flex)`\n  width: max-content;\n\n  &[data-hidden='true'] {\n    height: 0px;\n    visibility: hidden;\n  }\n`\n\nconst OptionObserveElement = styled(ObserveElement)`\n  ${OPTION_STYLE}\n`\n\nconst OptionHiddenFlex = styled(Flex)`\n  ${OPTION_STYLE}\n`\n\nfunction _isReactElement(node: unknown): node is React.ReactElement {\n  return Boolean(node)\n}\n\n/** @internal */\nexport const CollapseMenu = forwardRef(function CollapseMenu(\n  props: CollapseMenuProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    children: childrenProp,\n    collapsed,\n    collapseText = true,\n    disableRestoreFocusOnClose,\n    gap,\n    menuButtonProps,\n    onMenuClose,\n    ...rest\n  } = props\n  const [rootEl, setRootEl] = useState<HTMLDivElement | null>(null)\n  const [hiddenRowEl, setHiddenRowEl] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootEl)\n  const [menuOptions, setMenuOptions] = useState<React.ReactElement[]>([])\n\n  const hasOverflow = useMemo(() => {\n    if (rootRect && rootEl && hiddenRowEl) {\n      return rootRect.width < hiddenRowEl.scrollWidth\n    }\n    return false\n  }, [hiddenRowEl, rootEl, rootRect])\n\n  const menuButton = useMemo(\n    () => menuButtonProps?.button || <Button icon={EllipsisVerticalIcon} mode=\"bleed\" />,\n    [menuButtonProps]\n  )\n\n  const intersectionOptions = useMemo(\n    () => ({\n      root: rootEl,\n      threshold: 1,\n      rootMargin: '2px',\n    }),\n    [rootEl]\n  )\n\n  const children = useMemo(\n    () => React.Children.toArray(childrenProp).filter(_isReactElement),\n    [childrenProp]\n  )\n\n  const menuOptionsArray = useMemo(\n    // eslint-disable-next-line max-nested-callbacks\n    () => children.filter(({key}) => menuOptions.find((o: React.ReactElement) => o.key === key)),\n    [children, menuOptions]\n  )\n\n  const menuIsVisible = useMemo(\n    () => collapsed || menuOptionsArray.length > 0,\n    [collapsed, menuOptionsArray.length]\n  )\n\n  const isInMenu = useCallback(\n    (childKey: any) => menuOptionsArray.some((o) => o.key === childKey),\n    [menuOptionsArray]\n  )\n\n  const handleIntersection = useCallback(\n    (e: IntersectionObserverEntry, child: React.ReactElement) => {\n      const exists = isInMenu(child.key)\n\n      if (!e.isIntersecting && !exists) {\n        setMenuOptions((prev) => [child, ...prev])\n      }\n\n      if (e.isIntersecting && exists) {\n        const updatedOptions = menuOptionsArray.filter(({key}) => key !== child.key)\n\n        setMenuOptions(updatedOptions)\n      }\n    },\n    [isInMenu, menuOptionsArray]\n  )\n\n  const items = useMemo(\n    () =>\n      children.map((child) => {\n        const {collapsedProps, expandedProps} = child.props\n        const modeProps = hasOverflow ? collapsedProps : expandedProps\n        const text = hasOverflow && collapseText ? undefined : child.props.text\n\n        return cloneElement(child, {\n          ...modeProps,\n          text: text,\n        })\n      }),\n    [children, collapseText, hasOverflow]\n  )\n\n  if (collapsed) {\n    return (\n      <CollapseOverflowMenu\n        disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n        menuButton={menuButton}\n        menuButtonProps={menuButtonProps}\n        menuOptionsArray={children}\n        onMenuClose={onMenuClose}\n      />\n    )\n  }\n\n  return (\n    <OuterFlex\n      align=\"center\"\n      data-ui=\"CollapseMenu\"\n      overflow=\"hidden\"\n      sizing=\"border\"\n      ref={ref}\n      {...rest}\n    >\n      <RootFlex direction=\"column\" flex={1} justify=\"center\" ref={setRootEl}>\n        {/* Content */}\n        <RowFlex gap={gap}>\n          {items.map((child, index) => {\n            const {dividerBefore, tooltipText = '', tooltipProps = {}} = child.props\n            const hidden = isInMenu(child.key)\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider hidden={hidden} />}\n\n                <OptionObserveElement\n                  options={intersectionOptions}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  callback={(e) => handleIntersection(e[0], child)}\n                  aria-hidden={hidden}\n                  data-hidden={hidden}\n                >\n                  <Tooltip\n                    portal\n                    disabled={!tooltipText}\n                    content={\n                      <Box padding={2} sizing=\"border\">\n                        <Text size={1}>{tooltipText}</Text>\n                      </Box>\n                    }\n                    {...tooltipProps}\n                  >\n                    <Flex>\n                      {cloneElement(child, {\n                        disabled: child.props.disabled || hidden,\n                        'aria-hidden': hidden,\n                      })}\n                    </Flex>\n                  </Tooltip>\n                </OptionObserveElement>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n\n        {/* Hidden row used to detect when to collapse/collapse the layout  */}\n        <RowFlex data-hidden aria-hidden=\"true\" gap={gap} ref={setHiddenRowEl}>\n          {children.map((child, index) => {\n            const {dividerBefore} = child.props\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider />}\n                <OptionHiddenFlex key={child.key}>\n                  {cloneElement(child, {\n                    disabled: true,\n                    'aria-hidden': true,\n                  })}\n                </OptionHiddenFlex>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n      </RootFlex>\n\n      {menuIsVisible && (\n        <Flex marginLeft={gap}>\n          <CollapseOverflowMenu\n            disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n            menuButton={menuButton}\n            menuButtonProps={menuButtonProps}\n            menuOptionsArray={menuOptionsArray}\n            onMenuClose={onMenuClose}\n          />\n        </Flex>\n      )}\n    </OuterFlex>\n  )\n})\n","import {Button, ButtonProps, TooltipProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\n\n/** @internal */\nexport interface CommonProps extends Omit<ButtonProps, 'text' | 'iconRight'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  dividerBefore?: boolean\n  focused?: boolean\n  tooltipProps?: TooltipProps\n  tooltipText?: React.ReactNode\n}\n\n/** @internal */\nexport interface CollapseMenuButtonProps extends CommonProps {\n  collapsedProps?: Omit<CommonProps, 'text'>\n  expandedProps?: CommonProps\n  text: ButtonProps['text']\n}\n\n/** @internal */\nexport const CollapseMenuButton = forwardRef(function CollapseMenuButton(\n  props: CollapseMenuButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'as'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    collapsedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    expandedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipText,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    dividerBefore,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ...rest\n  } = props\n\n  return <Button data-ui=\"CollapseMenuButton\" {...rest} ref={ref} />\n})\n","import React, {forwardRef, useMemo} from 'react'\nimport {StateLink, useRouterState} from 'sanity/router'\n\n/** @beta */\nexport interface ToolLinkProps {\n  children: React.ReactNode\n  name: string\n}\n\n/** @beta */\nexport const ToolLink = forwardRef(function ToolLink(\n  props: ToolLinkProps & Omit<React.HTMLProps<HTMLAnchorElement>, 'href' | 'name'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {name, ...rest} = props\n  const routerState = useRouterState()\n\n  const state = useMemo(\n    () => ({...routerState, tool: name, [name]: undefined}),\n    [routerState, name]\n  )\n\n  return <StateLink state={state} {...rest} ref={ref} />\n})\n","import {UnknownIcon} from '@sanity/icons'\nimport React, {forwardRef, useMemo, useState} from 'react'\nimport {startCase} from 'lodash'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {useRovingFocus} from '../../../../components'\nimport {useColorScheme} from '../../../colorScheme'\nimport {Tool} from '../../../../config'\nimport {ToolLink, ToolLinkProps} from './ToolLink'\n\ninterface ToolCollapseMenuProps {\n  activeToolName?: string\n  tools: Tool[]\n}\n\nexport function ToolCollapseMenu(props: ToolCollapseMenuProps) {\n  const {activeToolName, tools} = props\n  const {scheme} = useColorScheme()\n  const [collapseMenuEl, setCollapseMenuEl] = useState<HTMLDivElement | null>(null)\n\n  useRovingFocus({\n    rootElement: collapseMenuEl,\n    navigation: ['arrows'],\n  })\n\n  const menuButtonProps = useMemo(\n    () => ({\n      popover: {\n        constrainSize: true,\n        portal: true,\n        scheme: scheme,\n      },\n    }),\n    [scheme]\n  )\n\n  const children = useMemo(\n    () =>\n      tools.map((tool, index) => {\n        const title = tool?.title || startCase(tool.name) || undefined\n\n        const Link = forwardRef(function Link(\n          linkProps: ToolLinkProps,\n          ref: React.Ref<HTMLAnchorElement>\n        ) {\n          return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n        })\n\n        return (\n          <CollapseMenuButton\n            as={Link}\n            data-as=\"a\"\n            collapsedProps={{tooltipText: tool.title}}\n            icon={tool.icon || UnknownIcon}\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${tool.name}-${index}`}\n            mode=\"bleed\"\n            selected={activeToolName === tool.name}\n            text={title}\n            tooltipProps={{scheme: scheme}}\n          />\n        )\n      }),\n    [activeToolName, scheme, tools]\n  )\n\n  return (\n    <CollapseMenu\n      data-testid=\"tool-collapse-menu\"\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      ref={setCollapseMenuEl}\n    >\n      {children}\n    </CollapseMenu>\n  )\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Button, Stack} from '@sanity/ui'\nimport {PlugIcon} from '@sanity/icons'\nimport {startCase} from 'lodash'\nimport {Tool} from '../../../../config'\nimport {ToolLinkProps, ToolLink} from './ToolLink'\n\ninterface ToolVerticalMenuProps {\n  activeToolName?: string\n  isVisible: boolean\n  tools: Tool[]\n}\n\nexport function ToolVerticalMenu(props: ToolVerticalMenuProps) {\n  const {activeToolName, isVisible, tools} = props\n\n  return useMemo(\n    () => (\n      <Stack as=\"ul\" space={[1, 2]}>\n        {tools.map((tool) => {\n          const title = tool?.title || startCase(tool.name) || undefined\n\n          const Link = forwardRef(function Link(\n            linkProps: ToolLinkProps,\n            ref: React.Ref<HTMLAnchorElement>\n          ) {\n            return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n          })\n\n          return (\n            <Stack as=\"li\" key={tool.name}>\n              <Button\n                as={Link}\n                icon={tool.icon || PlugIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                selected={activeToolName === tool.name}\n                tabIndex={isVisible ? 0 : -1}\n                text={title}\n              />\n            </Stack>\n          )\n        })}\n      </Stack>\n    ),\n    [activeToolName, isVisible, tools]\n  )\n}\n","import React from 'react'\nimport {ToolMenuProps} from '../../../../config'\nimport {ToolCollapseMenu} from './ToolCollapseMenu'\nimport {ToolVerticalMenu} from './ToolVerticalMenu'\n\n/** @beta */\nexport function StudioToolMenu(props: ToolMenuProps) {\n  const {context, isSidebarOpen, ...restProps} = props\n\n  if (context === 'sidebar') {\n    return <ToolVerticalMenu isVisible={isSidebarOpen} {...restProps} />\n  }\n\n  return <ToolCollapseMenu {...restProps} />\n}\n","import {ComponentType} from 'react'\nimport {LayoutProps, LogoProps, NavbarProps, PluginOptions, ToolMenuProps} from '../../config'\n\nexport function pickToolMenuComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<ToolMenuProps, 'renderDefault'>> {\n  return plugin.studio?.components?.toolMenu as ComponentType<Omit<ToolMenuProps, 'renderDefault'>>\n}\n\nexport function pickNavbarComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<NavbarProps, 'renderDefault'>> {\n  return plugin.studio?.components?.navbar as ComponentType<Omit<NavbarProps, 'renderDefault'>>\n}\n\nexport function pickLayoutComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<LayoutProps, 'renderDefault'>> {\n  return plugin.studio?.components?.layout as ComponentType<Omit<LayoutProps, 'renderDefault'>>\n}\n\nexport function pickLogoComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<LogoProps, 'renderDefault'>> {\n  return plugin.studio?.components?.logo as ComponentType<Omit<LogoProps, 'renderDefault'>>\n}\n","import {ComponentType} from 'react'\nimport {LayoutProps, LogoProps, NavbarProps, ToolMenuProps} from '../../config/studio'\nimport {useMiddlewareComponents} from '../../config'\nimport {StudioLogo, StudioNavbar, StudioToolMenu} from '../components'\nimport {StudioLayout} from '../StudioLayout'\nimport {\n  pickToolMenuComponent,\n  pickNavbarComponent,\n  pickLogoComponent,\n  pickLayoutComponent,\n} from './picks'\n\n/**\n * @internal\n */\nexport function useToolMenuComponent(): ComponentType<Omit<ToolMenuProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioToolMenu as ComponentType<Omit<ToolMenuProps, 'renderDefault'>>,\n    pick: pickToolMenuComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useNavbarComponent(): ComponentType<Omit<NavbarProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioNavbar as ComponentType<Omit<NavbarProps, 'renderDefault'>>,\n    pick: pickNavbarComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useLogoComponent(): ComponentType<Omit<LogoProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioLogo as ComponentType<Omit<LogoProps, 'renderDefault'>>,\n    pick: pickLogoComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useLayoutComponent(): ComponentType<Omit<LayoutProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: StudioLayout as ComponentType<Omit<LayoutProps, 'renderDefault'>>,\n    pick: pickLayoutComponent,\n  })\n}\n","import {createContext} from 'react'\nimport {UserColorManager} from './types'\n\nexport const UserColorManagerContext = createContext<UserColorManager | null>(null)\n","import {useContext} from 'react'\nimport {empty} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {UserColorManagerContext} from './context'\nimport {UserColor, UserColorManager} from './types'\n\n/** @internal */\nexport function useUserColorManager(): UserColorManager {\n  const userColorManager = useContext(UserColorManagerContext)\n\n  if (!userColorManager) {\n    throw new Error('UserColorManager: missing context value')\n  }\n\n  return userColorManager\n}\n\n/** @internal */\nexport function useUserColor(userId: string | null): UserColor {\n  const manager = useUserColorManager()\n\n  return useMemoObservable(userId ? manager.listen(userId) : empty(), [userId], manager.get(null))\n}\n","import {Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\nimport {hues, ColorHueKey, COLOR_HUES} from '@sanity/color'\nimport {UserColorHue, UserColorManager, UserColor, UserId} from './types'\n\n/** @internal */\nexport interface UserColorManagerOptions {\n  anonymousColor?: UserColor\n  userStore?: {me: Observable<{id: string} | null>}\n  colors?: Record<UserColorHue, UserColor>\n  currentUserColor?: UserColorHue\n}\n\nconst defaultCurrentUserHue: ColorHueKey = 'purple'\n\n// Exclude green and red because they can be confused with \"add\" and \"remove\"\n// Exclude gray because it looks like \"color not found\"\nconst USER_COLOR_EXCLUDE_HUES = ['green', 'red', 'gray']\n\nconst defaultHues: ColorHueKey[] = COLOR_HUES.filter(\n  (hue) => !USER_COLOR_EXCLUDE_HUES.includes(hue)\n)\n\nconst defaultColors = defaultHues.reduce((colors, hue) => {\n  colors[hue] = {\n    name: hue,\n    background: hues[hue][100].hex,\n    border: hues[hue][300].hex,\n    text: hues[hue][700].hex,\n    tints: hues[hue],\n  }\n  return colors\n}, {} as Record<ColorHueKey, UserColor>)\n\nconst defaultAnonymousColor: UserColor = {\n  name: 'gray',\n  background: hues.gray[100].hex,\n  border: hues.gray[300].hex,\n  text: hues.gray[700].hex,\n  tints: hues.gray,\n}\n\n/** @internal */\nexport function createUserColorManager(options?: UserColorManagerOptions): UserColorManager {\n  const userColors = (options && options.colors) || defaultColors\n  const anonymousColor = options?.anonymousColor || defaultAnonymousColor\n  const currentUserColor = (options && options.currentUserColor) || defaultCurrentUserHue\n\n  if (!userColors.hasOwnProperty(currentUserColor)) {\n    throw new Error(`'colors' must contain 'currentUserColor' (${currentUserColor})`)\n  }\n\n  const userColorKeys: UserColorHue[] = Object.keys(userColors)\n  const subscriptions = new Map<UserId, Observable<UserColor>>()\n  const previouslyAssigned = new Map<UserId, UserColorHue>()\n  const assignedCounts: Record<UserColorHue, number> = userColorKeys.reduce((counts, color) => {\n    counts[color] = 0\n    return counts\n  }, {} as Record<UserColorHue, number>)\n\n  // This isn't really needed because we're reusing subscriptions,\n  // but is useful for debugging and poses a minimal overhead\n  const assigned = new Map<UserId, UserColorHue>()\n\n  let currentUserId: UserId | null\n\n  if (options?.userStore) {\n    options.userStore.me.subscribe((user) => setCurrentUser(user ? user.id : null))\n  }\n\n  return {get, listen}\n\n  function get(userId: UserId | null): UserColor {\n    if (!userId) {\n      return anonymousColor\n    }\n\n    return userColors[getUserHue(userId)]\n  }\n\n  function getUserHue(userId: UserId): UserColorHue {\n    if (userId === currentUserId) {\n      return currentUserColor\n    }\n\n    const assignedHue = assigned.get(userId)\n    if (assignedHue) {\n      return assignedHue\n    }\n\n    // Prefer to reuse the color previously assigned, BUT:\n    // ONLY if it's unused -or- there are no other unused colors\n    const prevHue = previouslyAssigned.get(userId)\n    if (prevHue && (assignedCounts[prevHue] === 0 || !hasUnusedColor())) {\n      return assignHue(userId, prevHue)\n    }\n\n    // Prefer \"static\" color based on user ID if unused\n    const preferredHue = getPreferredHue(userId)\n    if (assignedCounts[preferredHue] === 0) {\n      return assignHue(userId, preferredHue)\n    }\n\n    // Fall back to least used color, with a preference on the previous\n    // used color if there are ties for least used\n    return assignHue(userId, getLeastUsedHue(prevHue))\n  }\n\n  function listen(userId: string): Observable<UserColor> {\n    let subscription = subscriptions.get(userId)\n    if (subscription) {\n      return subscription\n    }\n\n    const hue = getUserHue(userId)\n    subscription = getObservableColor(userId, hue)\n    subscriptions.set(userId, subscription)\n    return subscription\n  }\n\n  function assignHue(userId: string, hue: UserColorHue): UserColorHue {\n    assigned.set(userId, hue)\n    previouslyAssigned.set(userId, hue)\n    assignedCounts[hue]++\n    return hue\n  }\n\n  function unassignHue(userId: string, hue: UserColorHue) {\n    assigned.delete(userId)\n    assignedCounts[hue]--\n  }\n\n  function getUnusedColor(): UserColorHue | undefined {\n    return userColorKeys.find((colorHue) => assignedCounts[colorHue] === 0)\n  }\n\n  function hasUnusedColor(): boolean {\n    return Boolean(getUnusedColor())\n  }\n\n  function getLeastUsedHue(tieBreakerPreference?: UserColorHue): UserColorHue {\n    let leastUses = +Infinity\n    let leastUsed: UserColorHue[] = []\n\n    userColorKeys.forEach((colorHue) => {\n      const uses = assignedCounts[colorHue]\n      if (uses === leastUses) {\n        leastUsed.push(colorHue)\n      } else if (uses < leastUses) {\n        leastUses = uses\n        leastUsed = [colorHue]\n      }\n    })\n\n    return tieBreakerPreference && leastUsed.includes(tieBreakerPreference)\n      ? tieBreakerPreference\n      : leastUsed[0]\n  }\n\n  function getObservableColor(userId: string, hue: UserColorHue): Observable<UserColor> {\n    return new Observable<UserColor>((subscriber) => {\n      const userColor = userColors[hue]\n      subscriber.next(userColor)\n      return () => {\n        subscriptions.delete(userId)\n        unassignHue(userId, hue)\n      }\n    }).pipe(shareReplay({refCount: true}))\n  }\n\n  function setCurrentUser(userId: string | null) {\n    currentUserId = userId\n    assignedCounts[currentUserColor] += userId ? 1 : -1\n  }\n\n  function getPreferredHue(userId: string): UserColorHue {\n    let hash = 0\n    for (let i = 0; i < userId.length; i++) {\n      // eslint-disable-next-line no-bitwise\n      hash = ((hash << 5) - hash + userId.charCodeAt(i)) | 0\n    }\n    return userColorKeys[Math.abs(hash) % userColorKeys.length]\n  }\n}\n","import React, {useMemo} from 'react'\nimport {UserColorManagerContext} from './context'\nimport {UserColorManager} from './types'\nimport {createUserColorManager} from './manager'\n\n/** @internal */\nexport interface UserColorManagerProviderProps {\n  children: React.ReactNode\n  manager?: UserColorManager\n}\n\n/** @internal */\nexport function UserColorManagerProvider({\n  children,\n  manager: managerFromProps,\n}: UserColorManagerProviderProps): React.ReactElement {\n  const manager = useMemo(() => {\n    return managerFromProps || createUserColorManager()\n  }, [managerFromProps])\n\n  return (\n    <UserColorManagerContext.Provider value={manager}>{children}</UserColorManagerContext.Provider>\n  )\n}\n","import React, {useEffect, useState} from 'react'\nimport {LoadingScreen, AuthenticateScreen, NotAuthenticatedScreen} from './screens'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\n\ninterface AuthBoundaryProps {\n  children: React.ReactNode\n  AuthenticateComponent?: React.ComponentType\n  LoadingComponent?: React.ComponentType\n  NotAuthenticatedComponent?: React.ComponentType\n}\n\nexport function AuthBoundary({\n  children,\n  AuthenticateComponent = AuthenticateScreen,\n  LoadingComponent = LoadingScreen,\n  NotAuthenticatedComponent = NotAuthenticatedScreen,\n}: AuthBoundaryProps) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const [loggedIn, setLoggedIn] = useState<'logged-in' | 'logged-out' | 'loading' | 'unauthorized'>(\n    'loading'\n  )\n  const {activeWorkspace} = useActiveWorkspace()\n\n  useEffect(() => {\n    activeWorkspace.auth.handleCallbackUrl?.().catch(handleError)\n  }, [activeWorkspace.auth])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({authenticated, currentUser}) => {\n        if (currentUser?.roles?.length === 0) {\n          setLoggedIn('unauthorized')\n\n          return\n        }\n\n        setLoggedIn(authenticated ? 'logged-in' : 'logged-out')\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  if (loggedIn === 'loading') return <LoadingComponent />\n\n  if (loggedIn === 'unauthorized') return <NotAuthenticatedComponent />\n\n  // NOTE: there is currently a bug where the `AuthenticateComponent` will\n  // flash after the first login with cookieless mode. See `createAuthStore`\n  // for details\n  if (loggedIn === 'logged-out') return <AuthenticateComponent />\n\n  return <>{children}</>\n}\n","/* eslint-disable no-nested-ternary */\n\nimport React from 'react'\nimport {ThemeProvider, LayerProvider} from '@sanity/ui'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\nimport {ColorSchemeContext, useColorScheme} from './colorScheme'\n\ninterface StudioThemeProviderProps {\n  children: React.ReactChild\n}\n\n/** @internal */\nexport function StudioThemeProvider({children}: StudioThemeProviderProps) {\n  const theme = useActiveWorkspace().activeWorkspace.theme\n  const colorScheme = useColorScheme()\n  const scheme = theme.__legacy ? (theme.__dark ? 'dark' : 'light') : colorScheme.scheme\n\n  return (\n    <ColorSchemeContext.Provider value={{...colorScheme, scheme}}>\n      <ThemeProvider scheme={scheme} theme={theme} tone=\"transparent\">\n        <LayerProvider>{children}</LayerProvider>\n      </ThemeProvider>\n    </ColorSchemeContext.Provider>\n  )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport {Button, Card, Code, Container, ErrorBoundary, Heading, Stack, useToast} from '@sanity/ui'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {ConfigResolutionError, SchemaError} from '../config'\nimport {globalScope, isRecord} from '../util'\nimport {CorsOriginError} from '../store'\nimport {CorsOriginErrorScreen, SchemaErrorsScreen} from './screens'\n\ninterface StudioErrorBoundaryProps {\n  children: React.ReactNode\n}\n\nconst errorChannel = globalScope.__sanityErrorChannel\n\nfunction isKnownError(err: Error): boolean {\n  if (err instanceof SchemaError) {\n    return true\n  }\n\n  if (err instanceof CorsOriginError) {\n    return true\n  }\n\n  if (err instanceof ConfigResolutionError) {\n    return true\n  }\n\n  return false\n}\n\nexport function StudioErrorBoundary({children}: StudioErrorBoundaryProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n  const {push: pushToast} = useToast()\n\n  const message = isRecord(error) && typeof error.message === 'string' && error.message\n  const stack = isRecord(error) && typeof error.stack === 'string' && error.stack\n\n  const handleResetError = useCallback(() => setError({error: null}), [setError])\n\n  useHotModuleReload(handleResetError)\n\n  useEffect(() => {\n    if (!errorChannel) return undefined\n\n    return errorChannel.subscribe((msg) => {\n      // NOTE: Certain errors (such as the `ResizeObserver loop limit exceeded` error) is thrown\n      // by the browser, and does not include an `error` property. We ignore these errors.\n      if (!msg.error) {\n        return\n      }\n\n      // For errors that we \"expect\", eg have specific error screens for, do not push a toast\n      if (isKnownError(msg.error)) {\n        return\n      }\n\n      console.error(msg.error)\n\n      pushToast({\n        closable: true,\n        description: msg.error.message,\n        duration: 5000,\n        title: 'Uncaught error',\n        status: 'error',\n      })\n    })\n  }, [pushToast])\n\n  if (error instanceof CorsOriginError) {\n    return <CorsOriginErrorScreen projectId={error?.projectId} />\n  }\n\n  if (error instanceof SchemaError) {\n    return <SchemaErrorsScreen schema={error.schema} />\n  }\n\n  if (error) {\n    return (\n      <Card\n        height=\"fill\"\n        overflow=\"auto\"\n        paddingY={[4, 5, 6, 7]}\n        paddingX={4}\n        sizing=\"border\"\n        tone=\"critical\"\n      >\n        <Container width={3}>\n          <Stack space={4}>\n            {/* TODO: better error boundary */}\n\n            <Heading>An error occurred</Heading>\n\n            <div>\n              <Button onClick={handleResetError} text=\"Retry\" tone=\"default\" />\n            </div>\n\n            <Card border radius={2} overflow=\"auto\" padding={4} tone=\"inherit\">\n              <Stack space={4}>\n                {message && (\n                  <Code size={1}>\n                    <strong>Error: {message}</strong>\n                  </Code>\n                )}\n                {stack && <Code size={1}>{stack}</Code>}\n              </Stack>\n            </Card>\n          </Stack>\n        </Container>\n      </Card>\n    )\n  }\n\n  return <ErrorBoundary onCatch={setError}>{children}</ErrorBoundary>\n}\n","export const Z_OFFSET = {\n  toast: [100, 11000],\n}\n","import React, {useEffect} from 'react'\nimport {Flex, Box, Card, Code, Text} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\n\nconst ListItem = styled(Flex)``\n\nconst ErrorMessageRoot = styled(Box).attrs({padding: 4})``\n\nexport interface ErrorMessageProps {\n  message: string\n  stack?: string\n  error: unknown\n  path: Array<{name: string; type: string}>\n}\n\nexport function ErrorMessage({error, message, path, stack}: ErrorMessageProps) {\n  useEffect(() => {\n    console.error(error)\n  }, [error])\n\n  const last = path[path.length - 1]\n\n  return (\n    <ErrorMessageRoot forwardedAs={Flex} direction=\"column\" gap={4}>\n      <Flex direction=\"column\" gap={2}>\n        <Text weight=\"semibold\" size={3}>\n          {startCase(last.type)} Error\n        </Text>\n      </Flex>\n\n      <Card tone=\"critical\" overflow=\"auto\" padding={4}>\n        <Code>{message}</Code>\n      </Card>\n\n      <Flex as=\"ul\" direction=\"column\" gap={2}>\n        {path.map(({name, type}, index) => (\n          <ListItem forwardedAs=\"li\" gap={2} align=\"center\" key={index}>\n            <Box>\n              <Code>{name}</Code>\n            </Box>\n            <Box>\n              <Text muted size={1}>\n                {type}\n              </Text>\n            </Box>\n          </ListItem>\n        ))}\n      </Flex>\n\n      {stack && (\n        <details>\n          <Text as=\"summary\">Stack Trace</Text>\n\n          <Box overflow=\"auto\" marginTop={4}>\n            <Code>{stack}</Code>\n          </Box>\n        </details>\n      )}\n    </ErrorMessageRoot>\n  )\n}\n","import {Tool} from '../../config'\nimport {route, Router} from 'sanity/router'\n\nexport function createRouter(opts: {basePath?: string; tools: Tool[]}): Router {\n  const {basePath = '/', tools} = opts\n\n  const toolRoute = route.create('/:tool', (toolParams) => {\n    const tool = tools.find((current) => current.name === toolParams.tool)\n    return tool ? route.scope(tool.name, '/', tool.router) : route.create('/')\n  })\n\n  return route.create(basePath, [route.intents('/intent'), toolRoute])\n}\n","import {Tool} from '../../../config'\n\nexport function getOrderedTools(tools: Tool[]): Tool[] {\n  const pluginConfig: {toolSwitcher?: {order?: string[]; hidden?: string[]}} = {}\n  const config = pluginConfig.toolSwitcher || {}\n  const order = config.order || []\n  const hidden = config.hidden || []\n\n  if (!order.length && !hidden.length) {\n    return tools\n  }\n\n  const keyed = tools.reduce<Record<string, {index: number; tool: Tool}>>((target, tool) => {\n    const title = tool.title || '<unknown>'\n\n    if (!tool.name) {\n      console.warn(`Tool \"${title}\" does not have the required \"name\" property`)\n      return target\n    }\n\n    if (target[tool.name]) {\n      const existing = target[tool.name].tool.title\n      console.warn(`Tools with duplicate name \"${tool.name}\" found (\"${title}\" and \"${existing}\")`)\n      return target\n    }\n\n    const toolIndex = order.indexOf(tool.name)\n\n    target[tool.name] = {\n      tool: tool,\n      index: toolIndex === -1 ? +Infinity : toolIndex,\n    }\n\n    return target\n  }, {})\n\n  const isVisible = (tool: Tool) => hidden.indexOf(tool.name) === -1\n\n  const ret = tools.filter(isVisible)\n\n  ret.sort((tool1, tool2) => {\n    const toolA = keyed[tool1.name]\n    const toolB = keyed[tool2.name]\n\n    const indexA = toolA ? toolA.index : +Infinity\n    const indexB = toolB ? toolB.index : +Infinity\n\n    if (indexA === indexB) {\n      return 0\n    }\n\n    return indexA - indexB\n  })\n\n  return ret\n}\n","import {Tool} from '../../config'\nimport {isRecord} from '../../util/isRecord'\nimport {RouterEvent, RouterStateEvent} from './types'\nimport {getOrderedTools} from './util/getOrderedTools'\nimport {RouterState, Router} from 'sanity/router'\n\nfunction resolveUrlStateWithDefaultTool(tools: Tool[], state: Record<string, unknown> | null) {\n  const orderedTools = getOrderedTools(tools)\n  const defaultTool = orderedTools[0]\n\n  if (!state || state.tool || !defaultTool) {\n    return state\n  }\n\n  return Object.assign({}, state, {\n    tool: defaultTool.name,\n  })\n}\n\nfunction makeBackwardsCompatible(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): Record<string, unknown> | null {\n  if (!state) {\n    return state\n  }\n\n  if (getOrderedTools(tools).find((tool) => tool.name === state.space)) {\n    return {...state, tool: state.space, space: undefined}\n  }\n\n  return state\n}\n\nexport function resolveDefaultState(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): RouterState | null {\n  const urlStateWithDefaultTool = resolveUrlStateWithDefaultTool(\n    tools,\n    makeBackwardsCompatible(tools, state)\n  )\n\n  return urlStateWithDefaultTool\n}\n\nexport function resolveIntentState(\n  tools: Tool[],\n  currentState: RouterState | null,\n  intentState: RouterState\n): RouterEvent {\n  const {intent, params, payload} = intentState\n\n  if (typeof intent !== 'string') {\n    throw new Error('intent must be a string')\n  }\n\n  if (!isRecord(params)) {\n    throw new Error('intent params must be a string')\n  }\n\n  const orderedTools = getOrderedTools(tools)\n\n  const currentTool = currentState?.tool\n    ? orderedTools.find((tool) => tool.name === currentState.tool)\n    : null\n\n  // If current tool can handle intent and if so, give it precedence\n  const matchingTool = (currentTool ? [currentTool, ...orderedTools] : orderedTools).find(\n    (tool) =>\n      tool &&\n      typeof tool.canHandleIntent === 'function' &&\n      tool.canHandleIntent(intent, params, currentState && currentState[tool.name])\n  )\n\n  if (matchingTool?.getIntentState) {\n    const toolState = matchingTool.getIntentState(\n      intent,\n      params as any,\n      currentState && (currentState[matchingTool.name] as any),\n      payload\n    )\n\n    return {\n      type: 'state',\n      isNotFound: false,\n      state: {\n        ...currentState,\n        tool: matchingTool.name,\n        [matchingTool.name]: toolState,\n      },\n    }\n  }\n\n  return {\n    type: 'intent',\n    isNotFound: true,\n    intent: {name: intent, params},\n  }\n}\n\nexport function decodeUrlState(rootRouter: Router, pathname: string): RouterStateEvent {\n  return {\n    type: 'state',\n    state: rootRouter.decode(pathname) || {},\n    isNotFound: rootRouter.isNotFound(pathname),\n  }\n}\n\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {escapeRegExp, isEqual} from 'lodash'\nimport {EMPTY, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, filter, map, mergeScan, shareReplay} from 'rxjs/operators'\nimport {History, Location} from 'history'\nimport {Tool} from '../../config'\nimport {decodeUrlState, isNonNullable, resolveDefaultState, resolveIntentState} from './helpers'\nimport {RouterEvent} from './types'\nimport {Router} from 'sanity/router'\n\ninterface RouterEventStreamOptions {\n  unstable_history: History\n  router: Router\n  tools: Tool[]\n}\n\n/**\n * @internal\n */\nexport function createRouterEventStream({\n  unstable_history: history,\n  router,\n  tools,\n}: RouterEventStreamOptions): Observable<RouterEvent> {\n  function maybeHandleIntent(\n    prevEvent: RouterEvent | null,\n    currentEvent: RouterEvent\n  ): Observable<RouterEvent> {\n    if (currentEvent?.type === 'state' && currentEvent.state?.intent) {\n      const redirectState = resolveIntentState(\n        tools,\n        prevEvent?.type === 'state' ? prevEvent.state : {},\n        currentEvent.state\n      )\n\n      if (redirectState?.type === 'state') {\n        history.replace(router.encode(redirectState.state))\n        // This will not push anything downstream and preserve the prevEvent for the next received value\n        // Since we are calling history.replace here, a new event will be received immediately\n        return EMPTY\n      }\n    }\n\n    return of(currentEvent)\n  }\n\n  function maybeRedirectDefaultState(event: RouterEvent) {\n    if (event.type === 'state') {\n      const defaultState = resolveDefaultState(tools, event.state)\n\n      if (defaultState && defaultState !== event.state) {\n        history.replace(router.encode(defaultState))\n        return null\n      }\n    }\n\n    return event\n  }\n\n  const routerBasePath = router.getBasePath()\n\n  const state$: Observable<RouterEvent> = new Observable<Location>((observer) => {\n    const unlisten = history.listen((location) => observer.next(location))\n\n    // emit on mount\n    observer.next(history.location)\n    return unlisten\n  }).pipe(\n    // this is necessary to prevent emissions intended for other workspaces.\n    //\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    filter(({pathname}) =>\n      routerBasePath === '/'\n        ? true\n        : new RegExp(`^${escapeRegExp(routerBasePath)}(\\\\/|$)`, 'i').test(pathname)\n    ),\n    map(({pathname}) => decodeUrlState(router, pathname)),\n    mergeScan(maybeHandleIntent, null),\n    filter(isNonNullable),\n    map(maybeRedirectDefaultState),\n    filter(isNonNullable),\n    distinctUntilChanged(isEqual),\n    shareReplay(1)\n  )\n\n  return state$\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {map, filter, scan, catchError} from 'rxjs/operators'\nimport {combineLatest, of} from 'rxjs'\nimport {History} from 'history'\nimport {ErrorBoundary} from '@sanity/ui'\nimport {createHookFromObservableFactory} from '../../util'\nimport {ConfigResolutionError, Tool, Source, Workspace} from '../../config'\nimport {createRouter, createRouterEventStream} from '../router'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\nimport {WorkspaceProvider} from '../workspace'\nimport {SourceProvider} from '../source'\nimport {Router, RouterProvider, RouterState} from 'sanity/router'\n// TODO: work on error handler\n// import {flattenErrors} from './flattenErrors'\n\nconst isStateEvent = <T extends {type: string}>(e: T): e is Extract<T, {type: 'state'}> =>\n  e.type === 'state'\n\nconst initialState: StudioRouterState = {isNotFound: true, state: {}}\n\ninterface StudioRouterState {\n  isNotFound: boolean\n  state: RouterState\n}\n\ntype UseRouterStateOptions = [\n  unstable_history: History,\n  router: Router | undefined,\n  tools: Tool[] | undefined\n]\n\nconst useRouterState = createHookFromObservableFactory(\n  ([unstable_history, router, tools]: UseRouterStateOptions) => {\n    if (!router || !tools) return of(initialState)\n\n    return createRouterEventStream({\n      unstable_history,\n      router,\n      tools,\n    }).pipe(\n      filter(isStateEvent),\n      scan((prevState, event) => {\n        return {\n          ...prevState,\n          isNotFound: event.isNotFound,\n          state: event.state,\n        }\n      }, initialState)\n    )\n  },\n  initialState\n)\n\ninterface WorkspaceLoaderProps {\n  children: React.ReactNode\n  ConfigErrorsComponent: React.ComponentType\n  LoadingComponent: React.ComponentType\n}\n\nfunction WorkspaceLoader({\n  children,\n  LoadingComponent,\n}: Omit<WorkspaceLoaderProps, 'ConfigErrorsComponent'>) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const {\n    activeWorkspace,\n    __internal: {history},\n  } = useActiveWorkspace()\n  const [workspace, setWorkspace] = useState<Workspace | null>(null)\n\n  const handleNavigate = useCallback(\n    (opts: {path: string; replace?: boolean}) => {\n      if (opts.replace) {\n        history.replace(opts.path)\n      } else {\n        history.push(opts.path)\n      }\n    },\n    [history]\n  )\n\n  useEffect(() => {\n    const subscription = combineLatest(\n      activeWorkspace.__internal.sources.map(({source}) =>\n        source.pipe(\n          catchError((err) => {\n            if (err instanceof ConfigResolutionError) return of(err)\n            throw err\n          })\n        )\n      )\n    )\n      .pipe(\n        map((results): Source[] => {\n          const errors = results.filter((result) => result instanceof ConfigResolutionError)\n          if (errors.length) {\n            throw new ConfigResolutionError({\n              name: activeWorkspace.name,\n              causes: errors,\n              type: 'workspace',\n            })\n          }\n\n          return results as Source[]\n        }),\n        map(\n          ([rootSource, ...restOfSources]): Workspace => ({\n            ...activeWorkspace,\n            ...rootSource,\n            unstable_sources: [rootSource, ...restOfSources],\n            type: 'workspace',\n          })\n        )\n      )\n      .subscribe({\n        next: setWorkspace,\n        error: handleError,\n      })\n\n    return () => subscription.unsubscribe()\n  }, [activeWorkspace])\n\n  const tools = workspace?.tools\n  const router = useMemo(() => {\n    if (!workspace) return undefined\n    return createRouter(workspace)\n  }, [workspace])\n\n  const [routerState] = useRouterState(\n    useMemo(() => [history, router, tools], [history, router, tools])\n  )\n  if (!router || !workspace) return <LoadingComponent />\n\n  // TODO: may need a screen if one of the sources is not logged in. e.g. it\n  // is currently possible for the user to be logged into the current workspace\n  // but not all of its nested sources.\n  // if (!allSourcesLoggedIn) return <NotAllSourcesAuthenticatedComponent />\n\n  return (\n    <WorkspaceProvider workspace={workspace}>\n      <SourceProvider\n        // the first source is always the root source and is always present\n        source={workspace.unstable_sources[0]}\n      >\n        <RouterProvider onNavigate={handleNavigate} router={router} state={routerState.state}>\n          {children}\n        </RouterProvider>\n      </SourceProvider>\n    </WorkspaceProvider>\n  )\n}\n\nfunction WorkspaceLoaderBoundary({ConfigErrorsComponent, ...props}: WorkspaceLoaderProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  // TODO: implement this\n  // const errors = useMemo(() => flattenErrors(error, []), [error])\n\n  //TODO: implement config error screen\n  // if (error instanceof ConfigResolutionError) return <ConfigErrorsComponent />\n\n  // otherwise hand off to other boundaries\n  if (error) throw error\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <WorkspaceLoader {...props} />\n    </ErrorBoundary>\n  )\n}\n\nexport {WorkspaceLoaderBoundary as WorkspaceLoader}\n","import {ToastProvider} from '@sanity/ui'\nimport React, {Fragment, useMemo} from 'react'\nimport Refractor from 'react-refractor'\nimport bash from 'refractor/lang/bash'\nimport javascript from 'refractor/lang/javascript'\nimport json from 'refractor/lang/json'\nimport jsx from 'refractor/lang/jsx'\nimport typescript from 'refractor/lang/typescript'\nimport {UserColorManagerProvider} from '../user-color'\nimport {ResourceCacheProvider} from '../store'\nimport {AuthBoundary} from './AuthBoundary'\nimport {StudioProps} from './Studio'\nimport {StudioThemeProvider} from './StudioThemeProvider'\nimport {StudioErrorBoundary} from './StudioErrorBoundary'\nimport {ActiveWorkspaceMatcher} from './activeWorkspaceMatcher'\nimport {ColorSchemeProvider} from './colorScheme'\nimport {Z_OFFSET} from './constants'\nimport {\n  ConfigErrorsScreen,\n  LoadingScreen,\n  AuthenticateScreen,\n  NotFoundScreen,\n  NotAuthenticatedScreen,\n} from './screens'\nimport {WorkspaceLoader} from './workspaceLoader'\nimport {WorkspacesProvider} from './workspaces'\n\nRefractor.registerLanguage(bash)\nRefractor.registerLanguage(javascript)\nRefractor.registerLanguage(json)\nRefractor.registerLanguage(jsx)\nRefractor.registerLanguage(typescript)\n\n/** @beta */\nexport interface StudioProviderProps extends StudioProps {\n  children: React.ReactNode\n}\n\n/** @beta */\nexport function StudioProvider({\n  children,\n  config,\n  onSchemeChange,\n  scheme,\n  unstable_history: history,\n  unstable_noAuthBoundary: noAuthBoundary,\n}: StudioProviderProps) {\n  const ConditionalAuthBoundary = useMemo(\n    () => (noAuthBoundary ? Fragment : AuthBoundary),\n    [noAuthBoundary]\n  )\n\n  return (\n    <ColorSchemeProvider onSchemeChange={onSchemeChange} scheme={scheme}>\n      <ToastProvider paddingY={7} zOffset={Z_OFFSET.toast}>\n        <StudioErrorBoundary>\n          <WorkspacesProvider config={config}>\n            <ActiveWorkspaceMatcher\n              unstable_history={history}\n              NotFoundComponent={NotFoundScreen}\n              LoadingComponent={LoadingScreen}\n            >\n              <StudioThemeProvider>\n                <UserColorManagerProvider>\n                  <ConditionalAuthBoundary\n                    LoadingComponent={LoadingScreen}\n                    AuthenticateComponent={AuthenticateScreen}\n                    NotAuthenticatedComponent={NotAuthenticatedScreen}\n                  >\n                    <WorkspaceLoader\n                      LoadingComponent={LoadingScreen}\n                      ConfigErrorsComponent={ConfigErrorsScreen}\n                    >\n                      <ResourceCacheProvider>{children}</ResourceCacheProvider>\n                    </WorkspaceLoader>\n                  </ConditionalAuthBoundary>\n                </UserColorManagerProvider>\n              </StudioThemeProvider>\n            </ActiveWorkspaceMatcher>\n          </WorkspacesProvider>\n        </StudioErrorBoundary>\n      </ToastProvider>\n    </ColorSchemeProvider>\n  )\n}\n","import {ThemeColorSchemeKey} from '@sanity/ui'\nimport {History} from 'history'\nimport React, {ReactElement} from 'react'\nimport {Config} from '../config'\nimport {GlobalStyle} from './GlobalStyle'\nimport {useLayoutComponent} from './studio-components-hooks'\nimport {StudioProvider} from './StudioProvider'\n\n/** @beta */\nexport interface StudioProps {\n  config: Config\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n  /** @beta */\n  unstable_history?: History\n  /** @beta */\n  unstable_globalStyles?: boolean\n  /** @beta */\n  unstable_noAuthBoundary?: boolean\n}\n\nfunction StudioLayout() {\n  const Layout = useLayoutComponent()\n\n  return <Layout />\n}\n\n/** @beta */\nexport function Studio(props: StudioProps): ReactElement {\n  const {unstable_globalStyles: globalStyles, ...restProps} = props\n\n  return (\n    <StudioProvider {...restProps}>\n      {globalStyles && <GlobalStyle />}\n      <StudioLayout />\n    </StudioProvider>\n  )\n}\n","import React, {StrictMode} from 'react'\nimport {createRoot} from 'react-dom/client'\nimport type {Config} from '../config'\nimport {Studio} from './Studio'\n\n/** @internal */\nexport function renderStudio(\n  rootElement: HTMLElement | null,\n  config: Config,\n  reactStrictMode = false\n): () => void {\n  if (!rootElement) {\n    throw new Error('Missing root element to mount application into')\n  }\n\n  const root = createRoot(rootElement)\n\n  root.render(\n    reactStrictMode ? (\n      <StrictMode>\n        <Studio config={config} unstable_globalStyles />\n      </StrictMode>\n    ) : (\n      <Studio config={config} unstable_globalStyles />\n    )\n  )\n\n  return () => root.unmount()\n}\n","import type {SanityClient} from '@sanity/client'\nimport type {SourceClientOptions} from '../config'\nimport {useSource} from '../studio'\n\n/** @beta */\nexport function useClient(clientOptions?: SourceClientOptions): SanityClient {\n  const source = useSource()\n  if (!clientOptions) {\n    console.warn(\n      'Calling `useClient()` without specifying an API version is deprecated and will stop working in the next dev-preview release - please migrate to use `useClient({apiVersion: \"2021-06-07\"})`.'\n    )\n    return source.getClient({apiVersion: '2021-06-07'})\n  }\n\n  return source.getClient(clientOptions)\n}\n","import {distinctUntilChanged, map, mapTo, startWith, switchMap} from 'rxjs/operators'\nimport {of, timer} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../store'\n\n/** @internal */\nexport type ConnectionState = 'connecting' | 'reconnecting' | 'connected'\n\nconst INITIAL: ConnectionState = 'connecting'\n\n/** @internal */\nexport function useConnectionState(publishedDocId: string, docTypeName: string): ConnectionState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () =>\n      documentStore.pair.documentEvents(publishedDocId, docTypeName).pipe(\n        map((ev: {type: string}) => ev.type),\n        map((eventType) => eventType !== 'reconnect'),\n        switchMap((isConnected) =>\n          isConnected ? of('connected') : timer(200).pipe(mapTo('reconnecting'))\n        ),\n        startWith(INITIAL as any),\n        distinctUntilChanged()\n      ),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {useSource} from '../studio'\n\n/**\n * @beta\n */\nexport function useDataset(): string {\n  return useSource().dataset\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore, OperationsAPI} from '../store'\n\n/** @internal */\nexport function useDocumentOperation(publishedDocId: string, docTypeName: string): OperationsAPI {\n  const documentStore = useDocumentStore()\n  return useMemoObservable(\n    () => documentStore.pair.editOperations(publishedDocId, docTypeName),\n    [docTypeName, documentStore.pair, publishedDocId]\n  )!\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../store'\n\n/** @internal */\nexport function useDocumentOperationEvent(publishedDocId: string, docTypeName: string) {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.operationEvents(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName]\n  )\n}\n","import {useMemoObservable} from 'react-rx'\nimport {merge, timer} from 'rxjs'\nimport {debounce, share, skip, take} from 'rxjs/operators'\nimport {EditStateFor, useDocumentStore} from '../store'\n\n/** @internal */\nexport function useEditState(\n  publishedDocId: string,\n  docTypeName: string,\n  priority: 'default' | 'low' = 'default'\n): EditStateFor {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(() => {\n    const base = documentStore.pair.editState(publishedDocId, docTypeName).pipe(share())\n    if (priority === 'low') {\n      return merge(\n        base.pipe(take(1)),\n        base.pipe(\n          skip(1),\n          debounce(() => timer(1000))\n        )\n      )\n    }\n    return documentStore.pair.editState(publishedDocId, docTypeName)\n  }, [publishedDocId, docTypeName, priority]) as EditStateFor\n}\n","import {useSource} from '../studio'\n\n/**\n * @beta\n */\nexport function useProjectId(): string {\n  return useSource().projectId\n}\n","import {Schema} from '@sanity/types'\nimport {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useSchema(): Schema {\n  return useSource().schema\n}\n","import {useMemoObservable} from 'react-rx'\nimport {map} from 'rxjs/operators'\nimport {useDocumentStore} from '../store'\n\n/** @internal */\nexport interface SyncState {\n  isSyncing: boolean\n}\n\nconst SYNCING = {isSyncing: true}\nconst NOT_SYNCING = {isSyncing: false}\n\n/** @internal */\nexport function useSyncState(publishedDocId: string, documentType: string): SyncState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable<SyncState>(\n    () =>\n      documentStore.pair\n        .consistencyStatus(publishedDocId, documentType)\n        .pipe(map((isConsistent) => (isConsistent ? NOT_SYNCING : SYNCING))),\n    [publishedDocId],\n    NOT_SYNCING\n  )\n}\n","import {useSource} from '../studio'\nimport {Template} from '../templates'\n\n/**\n * @beta\n */\nexport function useTemplates(): Template[] {\n  return useSource().templates\n}\n","import {useEffect, useReducer} from 'react'\nimport {\n  differenceInDays,\n  differenceInHours,\n  differenceInMinutes,\n  differenceInMonths,\n  differenceInSeconds,\n  differenceInWeeks,\n  differenceInYears,\n  format,\n} from 'date-fns'\nimport pluralize from 'pluralize-esm'\n\ninterface TimeSpec {\n  timestamp: string\n  refreshInterval: number | null\n}\n\nconst FIVE_SECONDS = 1000 * 5\nconst TWENTY_SECONDS = 1000 * 20\nconst ONE_MINUTE = 1000 * 60\nconst ONE_HOUR = ONE_MINUTE * 60\n\n/** @internal */\nexport interface TimeAgoOpts {\n  minimal?: boolean\n  agoSuffix?: boolean\n}\n\n/** @internal */\nexport function useTimeAgo(time: Date | string, {minimal, agoSuffix}: TimeAgoOpts = {}): string {\n  const resolved = formatRelativeTime(time, {minimal, agoSuffix})\n\n  const [, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  useEffect(() => {\n    let timerId: number | null\n\n    function tick(interval: number) {\n      timerId = window.setTimeout(() => {\n        forceUpdate()\n        // avoid pile-up of setInterval callbacks,\n        // e.g. schedule the next update at `refreshInterval` *after* the previous one finishes\n        timerId = window.setTimeout(() => tick(interval), interval)\n      }, interval)\n    }\n\n    if (resolved.refreshInterval !== null) {\n      tick(resolved.refreshInterval)\n    }\n\n    return () => {\n      if (timerId !== null) {\n        clearTimeout(timerId)\n      }\n    }\n  }, [forceUpdate, resolved.refreshInterval])\n\n  return resolved.timestamp\n}\n\nfunction formatRelativeTime(date: Date | string, opts: TimeAgoOpts = {}): TimeSpec {\n  const parsedDate = date instanceof Date ? date : new Date(date)\n\n  // Invalid date? Return empty timestamp and `null` as refresh interval, to save us from\n  // continuously trying to format an invalid date. The `useEffect` calls in the hook will\n  // trigger a re-evaluation of the timestamp when the date changes, so this is safe.\n  if (!parsedDate.getTime()) {\n    return {\n      timestamp: '',\n      refreshInterval: null,\n    }\n  }\n\n  const now = Date.now()\n  const diffMonths = differenceInMonths(now, parsedDate)\n  const diffYears = differenceInYears(now, parsedDate)\n\n  if (diffMonths || diffYears) {\n    if (opts.minimal && diffYears === 0) {\n      // same year\n      return {\n        timestamp: format(parsedDate, 'MMM d'),\n        refreshInterval: null,\n      }\n    }\n\n    if (opts.minimal) {\n      return {\n        timestamp: format(parsedDate, 'MMM d, yyyy'),\n        refreshInterval: null,\n      }\n    }\n\n    return {\n      timestamp: format(parsedDate, 'MMM d, yyyy, hh:mm a'),\n      refreshInterval: null,\n    }\n  }\n\n  const diffWeeks = differenceInWeeks(now, parsedDate)\n  const weekSuffix = pluralize('week', diffWeeks)\n\n  if (diffWeeks) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffWeeks}w ago` : `${diffWeeks}w`,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffWeeks} ${weekSuffix} ago` : `${diffWeeks} ${weekSuffix}`,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffDays = differenceInDays(now, parsedDate)\n  const daysSuffix = pluralize('days', diffDays)\n\n  if (diffDays) {\n    if (opts.minimal) {\n      const daysSince = opts.agoSuffix ? `${diffDays}d ago` : `${diffDays}d`\n      return {\n        timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n    const daysSince = opts.agoSuffix ? `${diffDays} ${daysSuffix} ago` : `${diffDays} ${daysSuffix}`\n    return {\n      timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffHours = differenceInHours(now, parsedDate)\n  const hoursSuffix = pluralize('hour', diffHours)\n\n  if (diffHours) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffHours}h ago` : `${diffHours}h`,\n        refreshInterval: ONE_MINUTE,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffHours} ${hoursSuffix} ago` : `${diffHours} ${hoursSuffix}`,\n      refreshInterval: ONE_MINUTE,\n    }\n  }\n\n  const diffMins = differenceInMinutes(now, parsedDate)\n  const minsSuffix = pluralize('minute', diffMins)\n\n  if (diffMins) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffMins}m ago` : `${diffMins}m`,\n        refreshInterval: TWENTY_SECONDS,\n      }\n    }\n    return {\n      timestamp: opts.agoSuffix ? `${diffMins} ${minsSuffix} ago` : `${diffMins} ${minsSuffix}`,\n      refreshInterval: TWENTY_SECONDS,\n    }\n  }\n\n  const diffSeconds = differenceInSeconds(now, parsedDate)\n  const secsSuffix = pluralize('second', diffSeconds)\n\n  if (diffSeconds > 10) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffSeconds}s ago` : `${diffSeconds}s`,\n        refreshInterval: FIVE_SECONDS,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix\n        ? `${diffSeconds} ${secsSuffix} ago`\n        : `${diffSeconds} ${secsSuffix}`,\n      refreshInterval: FIVE_SECONDS,\n    }\n  }\n\n  return {timestamp: 'just now', refreshInterval: FIVE_SECONDS}\n}\n","import {Tool} from '../config'\nimport {useSource} from '../studio'\n\n/**\n * @beta\n */\nexport function useTools(): Tool[] {\n  return useSource().tools\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore, ValidationStatus} from '../store'\n\nconst INITIAL: ValidationStatus = {validation: [], isValidating: false}\n\n/** @internal */\nexport function useValidationStatus(publishedDocId: string, docTypeName: string): ValidationStatus {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.validation(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {CurrentUser, User} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {from} from 'rxjs'\nimport {useSource} from '../../studio'\nimport {UserStore, useUserStore} from '../_legacy'\nimport {createHookFromObservableFactory, LoadingTuple} from '../../util'\n\nconst useUserViaUserStore = createHookFromObservableFactory(\n  ([userStore, userId]: [UserStore, string]) => from(userStore.getUser(userId))\n)\n\n/** @internal */\nexport function useUser(userId: string): LoadingTuple<User | null | undefined> {\n  const userStore = useUserStore()\n  return useUserViaUserStore(useMemo(() => [userStore, userId], [userId, userStore]))\n}\n\n/** @internal */\nexport function useCurrentUser(): CurrentUser | null {\n  const {currentUser} = useSource()\n  return currentUser\n}\n","import {BufferedDocument, Mutation} from '@sanity/mutator'\nimport {SanityDocument} from '@sanity/types'\nimport {BehaviorSubject, EMPTY, merge, Observable, Subject} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMapTo,\n  publishReplay,\n  refCount,\n  scan,\n  share,\n  take,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {ListenerEvent} from '../getPairListener'\nimport {MutationEvent} from '../types'\nimport {\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  MutationPayload,\n  SnapshotEvent,\n  DocumentRemoteMutationEvent,\n  RemoteSnapshotEvent,\n} from './types'\n\ninterface MutationAction {\n  type: 'mutation'\n  mutations: MutationPayload[]\n}\n\ninterface CommitAction {\n  type: 'commit'\n}\n\ntype Action = MutationAction | CommitAction\n\n/**\n * Represents \"commit requests\" from the mutator.\n * These are emitted from the BufferedDocument instance's `requestHandler` callback\n *\n * @internal\n */\nexport interface CommitRequest {\n  mutation: Mutation\n  success: () => void\n  failure: (error: Error) => void\n  cancel: (error: Error) => void\n}\n\n// BufferedDocument.LOCAL never updates its revision due to its internal consistency checks\n// but we sometimes we need the most current _rev on the document in UI land, e.g.\n// in order to do optimistic locking on the edited document to make sure we publish the document the user\n// actually are looking at, and not the one currently at the server\n// Also - the mutator is not setting _updatedAt on patches applied optimistically or\n// when they are received from server\nconst getUpdatedSnapshot = (bufferedDocument: BufferedDocument) => {\n  const LOCAL = bufferedDocument.LOCAL\n  const HEAD = bufferedDocument.document.HEAD\n  if (!LOCAL) {\n    return LOCAL\n  }\n\n  return {\n    ...LOCAL,\n    _type: (HEAD || LOCAL)._type,\n    _rev: (HEAD || LOCAL)._rev,\n    _updatedAt: new Date().toISOString(),\n  }\n}\n\nconst toSnapshotEvent = (document: any): SnapshotEvent => ({type: 'snapshot', document})\nconst getDocument = <T extends {document: any}>(event: T): T['document'] => event.document\n\n/** @internal */\n// This is an observable interface for BufferedDocument in an attempt\n// to make it easier to work with the api provided by it\nexport const createObservableBufferedDocument = (listenerEvent$: Observable<ListenerEvent>) => {\n  // Incoming local actions (e.g. a request to mutate, a request to commit pending changes, etc.)\n  const actions$ = new Subject<Action>()\n\n  // Stream of commit requests. Must be handled by a commit handler\n  const consistency$ = new BehaviorSubject<boolean>(true)\n\n  // Stream of mutations for this document\n  // NOTE: this will *not* include remote mutations received over the listener\n  // that has *already* applied locally/optimistically\n  const mutations$ = new Subject<DocumentMutationEvent>()\n\n  // a stream of rebase events emitted from the mutator\n  const rebase$ = new Subject<DocumentRebaseEvent>()\n\n  // a stream of remote mutations with effetcs\n  const remoteMutations = new Subject<DocumentRemoteMutationEvent>()\n\n  const commitRequests = new Subject<CommitRequest>()\n\n  const createInitialBufferedDocument = (initialSnapshot: SanityDocument | null) => {\n    const bufferedDocument = new BufferedDocument(initialSnapshot)\n    bufferedDocument.onMutation = ({mutation, remote}: any) => {\n      // this is called after either when:\n      // 1) local mutations has been added, optimistically applied and queued for sending\n      // 2) remote mutations originating from another client has arrived and been applied\n      mutations$.next({\n        type: 'mutation',\n        document: getUpdatedSnapshot(bufferedDocument) as any,\n        mutations: mutation.mutations,\n        origin: remote ? 'remote' : 'local',\n      })\n    }\n    bufferedDocument.onRemoteMutation = (mutation: any) => {\n      remoteMutations.next({\n        type: 'remoteMutation',\n        head: bufferedDocument.document.HEAD as any,\n        transactionId: mutation.transactionId,\n        timestamp: mutation.timestamp,\n        author: mutation.identity,\n        effects: mutation.effects,\n      })\n    }\n\n    bufferedDocument.onRebase = (edge: any, nextRemoteMutations: any, localMutations: any) => {\n      rebase$.next({\n        type: 'rebase',\n        document: edge,\n        remoteMutations: nextRemoteMutations,\n        localMutations,\n      })\n    }\n\n    bufferedDocument.onConsistencyChanged = (isConsistent) => {\n      consistency$.next(isConsistent)\n    }\n\n    bufferedDocument.commitHandler = (commitArg: CommitRequest) => commitRequests.next(commitArg)\n\n    return bufferedDocument\n  }\n\n  const currentBufferedDocument$ = listenerEvent$.pipe(\n    scan((bufferedDocument: BufferedDocument | null, listenerEvent) => {\n      // consider renaming 'snapshot' to initial/welcome\n      if (listenerEvent.type === 'snapshot') {\n        if (bufferedDocument) {\n          // we received a new snapshot and already got an old one. When we receive a snapshot again\n          // it is usually because the connection has been down. Attempt to save pending changes (if any)\n          bufferedDocument.commit()\n        }\n        return createInitialBufferedDocument(listenerEvent.document || null)\n      }\n      if (bufferedDocument === null) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Ignoring event of type \"%s\" since buffered document has not yet been set up with snapshot',\n          listenerEvent.type\n        )\n        return null\n      }\n      return bufferedDocument\n    }, null),\n    filter(\n      <T>(bufferedDocument: T): bufferedDocument is NonNullable<T> => bufferedDocument !== null\n    ),\n    distinctUntilChanged(),\n    publishReplay(1),\n    refCount()\n  )\n\n  // this is a stream of document snapshots where each new snapshot are emitted after listener mutations\n  // has been applied. Since the optimistic patches is not emitted on the mutation$ stream, we need this\n  // in order to update the document with a new _rev (and _updatedAt)\n  const snapshotAfterSync$ = listenerEvent$.pipe(\n    filter((ev): ev is MutationEvent => ev.type === 'mutation'),\n    withLatestFrom(currentBufferedDocument$),\n    map(([mutationEvent, bufferedDocument]) => {\n      bufferedDocument!.arrive(new Mutation(mutationEvent))\n      return getUpdatedSnapshot(bufferedDocument!)\n    })\n  )\n\n  // this is where the side effects mandated by local actions actually happens\n  const actionHandler$ = actions$.pipe(\n    withLatestFrom(currentBufferedDocument$),\n    tap(([action, bufferedDocument]: [Action, BufferedDocument]) => {\n      if (action.type === 'mutation') {\n        bufferedDocument!.add(new Mutation({mutations: action.mutations}))\n      }\n      if (action.type === 'commit') {\n        bufferedDocument!.commit()\n      }\n    }),\n    // We subscribe to this only for the side effects\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  const emitAction = (action: any) => actions$.next(action)\n\n  const addMutations = (mutations: MutationPayload[]) => emitAction({type: 'mutation', mutations})\n  const addMutation = (mutation: MutationPayload) => addMutations([mutation])\n\n  const commit = () => {\n    currentBufferedDocument$\n      .pipe(\n        take(1),\n        tap((bufferedDocument) => bufferedDocument!.commit())\n      )\n      .subscribe()\n  }\n\n  // A stream of this document's snapshot\n  const snapshot$ = merge(\n    currentBufferedDocument$.pipe(map((bufferedDocument) => bufferedDocument!.LOCAL)),\n    mutations$.pipe(map(getDocument)),\n    rebase$.pipe(map(getDocument)),\n    snapshotAfterSync$\n  ).pipe(map(toSnapshotEvent), publishReplay(1), refCount())\n\n  const remoteSnapshot$: Observable<RemoteSnapshotEvent> = merge(\n    currentBufferedDocument$.pipe(\n      map((bufferedDocument) => bufferedDocument!.document.HEAD as any),\n      map(toSnapshotEvent)\n    ),\n    remoteMutations\n  ).pipe(publishReplay(1), refCount())\n\n  return {\n    updates$: merge(snapshot$, actionHandler$, mutations$, rebase$),\n    consistency$: consistency$.pipe(distinctUntilChanged(), publishReplay(1), refCount()),\n    remoteSnapshot$,\n    commitRequest$: commitRequests,\n    addMutation,\n    addMutations,\n    commit,\n  }\n}\n","import {SanityDocument} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {ListenerEvent} from '../getPairListener'\nimport {CommitRequest, createObservableBufferedDocument} from './createObservableBufferedDocument'\nimport {\n  CommittedEvent,\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  MutationPayload,\n  RemoteSnapshotEvent,\n  SnapshotEvent,\n} from './types'\n\n/** @beta */\nexport type BufferedDocumentEvent =\n  | SnapshotEvent\n  | DocumentRebaseEvent\n  | DocumentMutationEvent\n  | CommittedEvent\n\nconst prepare = (id: string) => (document: Partial<SanityDocument>) => {\n  const {_id, _rev, _updatedAt, ...rest} = document\n  return {_id: id, ...rest}\n}\n\n/** @internal */\nexport interface BufferedDocumentWrapper {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotEvent>\n  events: Observable<BufferedDocumentEvent>\n  commitRequest$: Observable<CommitRequest>\n  // helper functions\n  patch: (patches: any[]) => MutationPayload[]\n  create: (document: Partial<SanityDocument>) => MutationPayload\n  createIfNotExists: (document: SanityDocument) => MutationPayload\n  createOrReplace: (document: SanityDocument) => MutationPayload\n  delete: () => MutationPayload\n\n  mutate: (mutations: MutationPayload[]) => void\n  commit: () => void\n}\n\n/** @internal */\nexport const createBufferedDocument = (\n  documentId: string,\n  // consider naming it remoteEvent$\n  listenerEvent$: Observable<ListenerEvent>\n): BufferedDocumentWrapper => {\n  const bufferedDocument = createObservableBufferedDocument(listenerEvent$)\n\n  const prepareDoc = prepare(documentId)\n\n  const DELETE = {delete: {id: documentId}}\n\n  return {\n    events: bufferedDocument.updates$,\n    consistency$: bufferedDocument.consistency$,\n    remoteSnapshot$: bufferedDocument.remoteSnapshot$,\n    commitRequest$: bufferedDocument.commitRequest$,\n\n    patch: (patches) => patches.map((patch) => ({patch: {...patch, id: documentId}})),\n    create: (document) => ({create: prepareDoc(document)}),\n    createIfNotExists: (document) => ({createIfNotExists: prepareDoc(document)}),\n    createOrReplace: (document) => ({createOrReplace: prepareDoc(document)}),\n    delete: () => DELETE,\n\n    mutate: (mutations: MutationPayload[]) => bufferedDocument.addMutations(mutations),\n    commit: () => bufferedDocument.commit(),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {SanityDocument} from '@sanity/types'\nimport {defer, Observable, of as observableOf} from 'rxjs'\nimport {concatMap, map, mergeMap, scan} from 'rxjs/operators'\nimport {groupBy} from 'lodash'\nimport {SanityClient} from '@sanity/client'\nimport type {\n  IdPair,\n  MutationEvent,\n  PendingMutationsEvent,\n  ReconnectEvent,\n  WelcomeEvent,\n} from './types'\n\ninterface Snapshots {\n  draft: SanityDocument | null\n  published: SanityDocument | null\n}\n\n/** @internal */\nexport interface InitialSnapshotEvent {\n  type: 'snapshot'\n  documentId: string\n  document: SanityDocument | null\n}\n\n/** @internal */\nexport interface PairListenerOptions {\n  tag?: string\n}\n\n/** @internal */\nexport type ListenerEvent =\n  | MutationEvent\n  | ReconnectEvent\n  | InitialSnapshotEvent\n  | PendingMutationsEvent\n\nconst PENDING_START: PendingMutationsEvent = {type: 'pending', phase: 'begin'}\nconst PENDING_END: PendingMutationsEvent = {type: 'pending', phase: 'end'}\n\nfunction isMutationEvent(msg: ListenerEvent): msg is MutationEvent {\n  return msg.type === 'mutation'\n}\nfunction isMultiTransactionEvent(msg: MutationEvent) {\n  return msg.transactionTotalEvents > 1\n}\n\nfunction allPendingTransactionEventsReceived(listenerEvents: ListenerEvent[]) {\n  const groupedMutations = groupBy(\n    listenerEvents.filter((ev): ev is MutationEvent => ev.type === 'mutation'),\n    (e) => e.transactionId\n  )\n  // Note: we can't assume that the events come in order, so instead of checking the counter attributes we check that we have actually received all\n  return Object.values(groupedMutations).every(\n    (mutations) => mutations.length === mutations[0].transactionTotalEvents\n  )\n}\n\n/** @internal */\nexport function getPairListener(\n  client: SanityClient,\n  idPair: IdPair,\n  options: PairListenerOptions = {}\n): Observable<ListenerEvent> {\n  const {publishedId, draftId} = idPair\n  return defer(\n    () =>\n      client.observable.listen(\n        `*[_id == $publishedId || _id == $draftId]`,\n        {\n          publishedId,\n          draftId,\n        },\n        {\n          includeResult: false,\n          events: ['welcome', 'mutation', 'reconnect'],\n          effectFormat: 'mendoza',\n          tag: options.tag || 'document.pair-listener',\n        }\n      ) as Observable<WelcomeEvent | MutationEvent | ReconnectEvent>\n  ).pipe(\n    concatMap((event) =>\n      event.type === 'welcome'\n        ? fetchInitialDocumentSnapshots().pipe(\n            concatMap((snapshots) => [\n              createSnapshotEvent(draftId, snapshots.draft),\n              createSnapshotEvent(publishedId, snapshots.published),\n            ])\n          )\n        : observableOf(event)\n    ),\n    scan(\n      (acc: {next: ListenerEvent[]; buffer: ListenerEvent[]}, msg) => {\n        // we only care about mutation events\n        if (!isMutationEvent(msg)) {\n          return {next: [msg], buffer: []}\n        }\n\n        const isBuffering = acc.buffer.length > 0\n        const isMulti = isMultiTransactionEvent(msg)\n        if (!isMulti && !isBuffering) {\n          // simple case, we have no buffer, and the event is a single-transaction event, so just pass it on\n          return {next: [msg], buffer: []}\n        }\n\n        if (!isMulti) {\n          // we have received a single transaction event while waiting for the rest of events from a multi transaction\n          // put it in the buffer\n          return {next: [], buffer: acc.buffer.concat(msg)}\n        }\n\n        const nextBuffer = acc.buffer.concat(msg)\n        if (allPendingTransactionEventsReceived(nextBuffer)) {\n          // we have received all pending transactions, emit the buffer, and signal end of buffer\n          return {next: nextBuffer.concat(PENDING_END), buffer: []}\n        }\n        // if we get here, we are still waiting for more multi-transaction messages\n        // if nextBuffer only has one element, we know we just started buffering\n        return {next: nextBuffer.length === 1 ? [PENDING_START] : [], buffer: nextBuffer}\n      },\n      {next: [], buffer: []}\n    ),\n    // note: this flattens the array, and in the case of an empty array, no event will be pushed downstream\n    mergeMap((v) => v.next)\n  )\n\n  function fetchInitialDocumentSnapshots(): Observable<Snapshots> {\n    return client.observable\n      .getDocuments<SanityDocument>([draftId, publishedId], {tag: 'document.snapshots'})\n      .pipe(\n        map(([draft, published]) => ({\n          draft,\n          published,\n        }))\n      )\n  }\n}\n\nfunction createSnapshotEvent(\n  documentId: string,\n  document: null | SanityDocument\n): InitialSnapshotEvent {\n  return {\n    type: 'snapshot',\n    documentId,\n    document,\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {EMPTY, from, merge, Observable} from 'rxjs'\nimport {filter, map, mergeMap, mergeMapTo, share, tap} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {Mutation} from '@sanity/mutator'\nimport {getPairListener, ListenerEvent} from '../getPairListener'\nimport {\n  BufferedDocumentEvent,\n  createBufferedDocument,\n  RemoteSnapshotEvent,\n  CommitRequest,\n  MutationPayload,\n} from '../buffered-doc'\nimport {IdPair, PendingMutationsEvent, ReconnectEvent} from '../types'\n\nconst isMutationEventForDocId =\n  (id: string) =>\n  (\n    event: ListenerEvent\n  ): event is Exclude<ListenerEvent, ReconnectEvent | PendingMutationsEvent> => {\n    return event.type !== 'reconnect' && event.type !== 'pending' && event.documentId === id\n  }\n\n/** @beta */\nexport type WithVersion<T> = T & {version: 'published' | 'draft'}\n\n/** @beta */\nexport type DocumentVersionEvent = WithVersion<ReconnectEvent | BufferedDocumentEvent>\n\n/** @beta */\nexport type RemoteSnapshotVersionEvent = WithVersion<RemoteSnapshotEvent>\n\n/** @beta */\nexport interface DocumentVersion {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotVersionEvent>\n  events: Observable<DocumentVersionEvent>\n\n  patch: (patches: any[]) => MutationPayload[]\n  create: (document: Partial<SanityDocument>) => MutationPayload\n  createIfNotExists: (document: SanityDocument) => MutationPayload\n  createOrReplace: (document: SanityDocument) => MutationPayload\n  delete: () => MutationPayload\n\n  mutate: (mutations: MutationPayload[]) => void\n  commit: () => void\n}\n\n/** @beta */\nexport interface Pair {\n  /** @internal */\n  transactionsPendingEvents$: Observable<PendingMutationsEvent>\n  published: DocumentVersion\n  draft: DocumentVersion\n}\n\nfunction setVersion<T>(version: 'draft' | 'published') {\n  return (ev: T): T & {version: 'draft' | 'published'} => ({...ev, version})\n}\n\nfunction commitMutations(client: SanityClient, mutationParams: Mutation['params']) {\n  const {resultRev, ...mutation} = mutationParams\n  return client.dataRequest('mutate', mutation, {\n    visibility: 'async',\n    returnDocuments: false,\n    tag: 'document.commit',\n  })\n}\n\nfunction submitCommitRequest(client: SanityClient, request: CommitRequest) {\n  return from(commitMutations(client, request.mutation.params)).pipe(\n    tap({\n      error: (error) => {\n        const isBadRequest =\n          'statusCode' in error &&\n          typeof error.statusCode === 'number' &&\n          error.statusCode >= 400 &&\n          error.statusCode <= 500\n        if (isBadRequest) {\n          request.cancel(error)\n        } else {\n          request.failure(error)\n        }\n      },\n      next: () => request.success(),\n    })\n  )\n}\n\n/** @internal */\nexport function checkoutPair(client: SanityClient, idPair: IdPair): Pair {\n  const {publishedId, draftId} = idPair\n\n  const listenerEvents$ = getPairListener(client, idPair).pipe(share())\n\n  const reconnect$ = listenerEvents$.pipe(\n    filter((ev) => ev.type === 'reconnect')\n  ) as Observable<ReconnectEvent>\n\n  const draft = createBufferedDocument(\n    draftId,\n    listenerEvents$.pipe(filter(isMutationEventForDocId(draftId)))\n  )\n\n  const published = createBufferedDocument(\n    publishedId,\n    listenerEvents$.pipe(filter(isMutationEventForDocId(publishedId)))\n  )\n\n  // share commit handling between draft and published\n  const transactionsPendingEvents$ = listenerEvents$.pipe(\n    filter((ev): ev is PendingMutationsEvent => ev.type === 'pending')\n  )\n\n  const commits$ = merge(draft.commitRequest$, published.commitRequest$).pipe(\n    mergeMap((commitRequest) => submitCommitRequest(client, commitRequest)),\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  return {\n    transactionsPendingEvents$,\n    draft: {\n      ...draft,\n      events: merge(commits$, reconnect$, draft.events).pipe(map(setVersion('draft'))),\n      consistency$: draft.consistency$,\n      remoteSnapshot$: draft.remoteSnapshot$.pipe(map(setVersion('draft'))),\n    },\n    published: {\n      ...published,\n      events: merge(commits$, reconnect$, published.events).pipe(map(setVersion('published'))),\n      consistency$: published.consistency$,\n      remoteSnapshot$: published.remoteSnapshot$.pipe(map(setVersion('published'))),\n    },\n  }\n}\n","import {Schema} from '@sanity/types'\n\nexport const isLiveEditEnabled = (schema: Schema, typeName: string): boolean =>\n  schema.get(typeName)?.liveEdit === true\n","import {Observable} from 'rxjs'\n\nexport function memoize<T, Arg1>(\n  fn: (arg1: Arg1) => Observable<T>,\n  keyGen: (arg1: Arg1) => string\n): (arg1: Arg1) => Observable<T>\nexport function memoize<T, Arg1, Arg2>(\n  fn: (arg1: Arg1, arg2: Arg2) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2) => string\n): (arg1: Arg1, arg2: Arg2) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3, Arg4>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>\n\nexport function memoize<T, Args>(\n  fn: (...args: Args[]) => Observable<T>,\n  keyGen: (...args: Args[]) => string\n) {\n  const MEMO: {[key: string]: Observable<T>} = Object.create(null)\n  return (...args: any[]) => {\n    const key = keyGen(...args)\n    if (!(key in MEMO)) {\n      MEMO[key] = fn(...args)\n    }\n    return MEMO[key]\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {publishReplay, refCount} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {checkoutPair, Pair} from './checkoutPair'\n\nexport const memoizedPair: (\n  client: SanityClient,\n  idPair: IdPair,\n  _typeName?: string\n) => Observable<Pair> = memoize(\n  (client: SanityClient, idPair: IdPair, _typeName?: string): Observable<Pair> => {\n    return new Observable<Pair>((subscriber) => {\n      subscriber.next(checkoutPair(client, idPair))\n    }).pipe(publishReplay(1), refCount())\n  },\n  (_client, idPair) => idPair.publishedId\n)\n","import {SanityDocument} from '@sanity/types'\nimport {filter, map, publishReplay, refCount} from 'rxjs/operators'\nimport {Observable} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {IdPair, PendingMutationsEvent, ReconnectEvent} from '../types'\nimport {BufferedDocumentEvent, MutationPayload, SnapshotEvent} from '../buffered-doc'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\nimport {DocumentVersion} from './checkoutPair'\n\n// return true if the event comes with a document snapshot\nfunction isSnapshotEvent(event: BufferedDocumentEvent | ReconnectEvent): event is SnapshotEvent & {\n  version: 'published' | 'draft'\n} {\n  return event.type === 'snapshot'\n}\n\nfunction withSnapshots(pair: DocumentVersion): DocumentVersionSnapshots {\n  return {\n    snapshots$: pair.events.pipe(\n      filter(isSnapshotEvent),\n      map((event) => event.document),\n      publishReplay(1),\n      refCount()\n    ),\n\n    patch: pair.patch,\n    create: pair.create,\n    createIfNotExists: pair.createIfNotExists,\n    createOrReplace: pair.createOrReplace,\n    delete: pair.delete,\n\n    mutate: pair.mutate,\n    commit: pair.commit,\n  }\n}\n\n/** @internal */\nexport interface DocumentVersionSnapshots {\n  snapshots$: Observable<SanityDocument>\n\n  // helper functions\n  patch: (patches: any[]) => MutationPayload[]\n  create: (document: any) => MutationPayload\n  createIfNotExists: (document: any) => MutationPayload\n  createOrReplace: (document: any) => MutationPayload\n  delete: () => MutationPayload\n\n  mutate: (mutations: MutationPayload[]) => void\n  commit: () => void\n}\n\n/** @internal */\ninterface SnapshotPair {\n  transactionsPendingEvents$: Observable<PendingMutationsEvent>\n  draft: DocumentVersionSnapshots\n  published: DocumentVersionSnapshots\n}\n\n/** @internal */\nexport const snapshotPair = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      map(({published, draft, transactionsPendingEvents$}): SnapshotPair => {\n        return {\n          transactionsPendingEvents$,\n          published: withSnapshots(published),\n          draft: withSnapshots(draft),\n        }\n      }),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {SanityDocument, Schema} from '@sanity/types'\nimport {combineLatest, Observable} from 'rxjs'\nimport {map, publishReplay, refCount, startWith, switchMap} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {IdPair, PendingMutationsEvent} from '../types'\nimport {isLiveEditEnabled} from './utils/isLiveEditEnabled'\nimport {snapshotPair} from './snapshotPair'\n\ninterface TransactionSyncLockState {\n  enabled: boolean\n}\n\n/** @beta */\nexport interface EditStateFor {\n  id: string\n  type: string\n  transactionSyncLock: TransactionSyncLockState | null\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n  ready: boolean\n}\nconst LOCKED: TransactionSyncLockState = {enabled: true}\nconst NOT_LOCKED: TransactionSyncLockState = {enabled: false}\n\n/** @internal */\nexport const editState = (\n  ctx: {\n    client: SanityClient\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<EditStateFor> => {\n  const liveEdit = isLiveEditEnabled(ctx.schema, typeName)\n  return snapshotPair(ctx.client, idPair, typeName).pipe(\n    switchMap((versions) =>\n      combineLatest([\n        versions.draft.snapshots$,\n        versions.published.snapshots$,\n        versions.transactionsPendingEvents$.pipe(\n          map((ev: PendingMutationsEvent) => (ev.phase === 'begin' ? LOCKED : NOT_LOCKED)),\n          startWith(NOT_LOCKED)\n        ),\n      ])\n    ),\n    map(([draftSnapshot, publishedSnapshot, transactionSyncLock]) => ({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: draftSnapshot,\n      published: publishedSnapshot,\n      liveEdit,\n      ready: true,\n      transactionSyncLock,\n    })),\n    startWith({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: null,\n      published: null,\n      liveEdit,\n      ready: false,\n      transactionSyncLock: null,\n    }),\n    publishReplay(1),\n    refCount()\n  )\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {combineLatest, Observable} from 'rxjs'\nimport {map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {snapshotPair} from './snapshotPair'\nimport {OperationArgs} from './operations'\n\nexport const operationArgs = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      historyStore: HistoryStore\n      schema: Schema\n    },\n    idPair: IdPair,\n    typeName: string\n  ): Observable<OperationArgs> => {\n    return snapshotPair(ctx.client, idPair, typeName).pipe(\n      switchMap((versions) =>\n        combineLatest([versions.draft.snapshots$, versions.published.snapshots$]).pipe(\n          map(\n            ([draft, published]): OperationArgs => ({\n              ...ctx,\n              idPair,\n              typeName: typeName,\n              snapshots: {draft, published},\n              draft: versions.draft,\n              published: versions.published,\n            })\n          )\n        )\n      ),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\nexport const del: OperationImpl<[], 'NOTHING_TO_DELETE'> = {\n  disabled: ({snapshots}) => (snapshots.draft || snapshots.published ? false : 'NOTHING_TO_DELETE'),\n  execute: ({client, schema, idPair, typeName}) => {\n    const tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (isLiveEditEnabled(schema, typeName)) {\n      return tx.commit({tag: 'document.delete'})\n    }\n\n    return tx.delete(idPair.draftId).commit({\n      tag: 'document.delete',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against deletes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"delete anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport {isReference} from '@sanity/types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './index'\n\nfunction strengthenOnPublish<T = any>(obj: T): T {\n  if (isReference(obj)) {\n    if (obj._strengthenOnPublish) {\n      return omit(\n        obj,\n        ['_strengthenOnPublish'].concat(obj._strengthenOnPublish.weak ? [] : ['_weak'])\n      ) as T\n    }\n    return obj\n  }\n  if (typeof obj !== 'object' || !obj) return obj\n  if (Array.isArray(obj)) return obj.map(strengthenOnPublish) as T\n  return Object.fromEntries(\n    Object.entries(obj).map(([key, value]) => [key, strengthenOnPublish(value)] as const)\n  ) as T\n}\n\ntype DisabledReason = 'LIVE_EDIT_ENABLED' | 'ALREADY_PUBLISHED' | 'NO_CHANGES'\n\nexport const publish: OperationImpl<[], DisabledReason> = {\n  disabled: ({schema, typeName, snapshots}) => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    if (!snapshots.draft) {\n      return snapshots.published ? 'ALREADY_PUBLISHED' : 'NO_CHANGES'\n    }\n    return false\n  },\n  execute: ({client, idPair, snapshots}) => {\n    if (!snapshots.draft) {\n      throw new Error('cannot execute \"publish\" when draft is missing')\n    }\n    const value = strengthenOnPublish(omit(snapshots.draft, '_updatedAt'))\n    const tx = client.observable.transaction()\n    if (!snapshots.draft) {\n      throw new Error('cannot execute \"publish\" when draft is missing')\n    }\n\n    if (snapshots.published) {\n      // If it exists already, we only want to update it if the revision on the remote server\n      // matches what our local state thinks it's at\n      tx.patch(idPair.publishedId, {\n        // Hack until other mutations support revision locking\n        unset: ['_revision_lock_pseudo_field_'],\n        ifRevisionID: snapshots.published._rev,\n      })\n\n      tx.createOrReplace({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    } else {\n      // If the document has not been published, we want to create it - if it suddenly exists\n      // before being created, we don't want to overwrite if, instead we want to yield an error\n      tx.create({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    }\n\n    tx.delete(idPair.draftId)\n\n    return tx.commit({tag: 'document.publish', visibility: 'async'})\n  },\n}\n","import {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\n// todo: we could also consider exposing 'mutate' directly\nexport const patch: OperationImpl<[patches: any[], initialDocument: Record<string, any>]> = {\n  disabled: (): false => false,\n  execute: (\n    {schema, snapshots, idPair, draft, published, typeName},\n    patches = [],\n    initialDocument\n  ): void => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      // No drafting, so patch and commit the published document\n      published.mutate([\n        published.createIfNotExists({\n          _type: typeName,\n          ...initialDocument,\n        }),\n        ...published.patch(patches),\n      ])\n    } else {\n      draft.mutate([\n        draft.createIfNotExists({\n          ...initialDocument,\n          ...snapshots.published,\n          _id: idPair.draftId,\n          _type: typeName,\n        }),\n        ...draft.patch(patches),\n      ])\n    }\n  },\n}\n","import {EMPTY} from 'rxjs'\nimport {OperationImpl} from './types'\n\nexport const commit: OperationImpl = {\n  disabled: (): false => false,\n  execute: ({draft, published}) => {\n    draft.commit()\n    published.commit()\n    // note: we might be able to connect with the outgoing commit request stream here\n    return EMPTY\n  },\n}\n","import {OperationImpl} from './types'\n\ntype DisabledReason = 'NO_CHANGES' | 'NOT_PUBLISHED'\n\nexport const discardChanges: OperationImpl<[], DisabledReason> = {\n  disabled: ({snapshots}) => {\n    if (!snapshots.draft) {\n      return 'NO_CHANGES'\n    }\n    if (!snapshots.published) {\n      return 'NOT_PUBLISHED'\n    }\n    return false\n  },\n  execute: ({client, idPair}) => {\n    return client.observable\n      .transaction()\n      .delete(idPair.draftId)\n      .commit({tag: 'document.discard-changes'})\n  },\n}\n","import {omit} from 'lodash'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\ntype DisabledReason = 'LIVE_EDIT_ENABLED' | 'NOT_PUBLISHED'\n\nexport const unpublish: OperationImpl<[], DisabledReason> = {\n  disabled: ({schema, snapshots, typeName}) => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    return snapshots.published ? false : 'NOT_PUBLISHED'\n  },\n  execute: ({client, idPair, snapshots}) => {\n    let tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (snapshots.published) {\n      tx = tx.createIfNotExists({\n        ...omit(snapshots.published, '_updatedAt'),\n        _id: idPair.draftId,\n        _type: snapshots.published._type,\n      })\n    }\n\n    return tx.commit({\n      tag: 'document.unpublish',\n      visibility: 'async',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against unpublishes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"unpublish anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport {getDraftId} from '../../../../../util'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\nconst omitProps = ['_createdAt', '_updatedAt']\n\nexport const duplicate: OperationImpl<[baseDocumentId: string], 'NOTHING_TO_DUPLICATE'> = {\n  disabled: ({snapshots}) => {\n    return snapshots.published || snapshots.draft ? false : 'NOTHING_TO_DUPLICATE'\n  },\n  execute: ({schema, client, snapshots, typeName}, dupeId) => {\n    const source = snapshots.draft || snapshots.published\n\n    if (!source) {\n      throw new Error('cannot execute on empty document')\n    }\n\n    return client.observable.create(\n      {\n        ...omit(source, omitProps),\n        _id: isLiveEditEnabled(schema, typeName) ? dupeId : getDraftId(dupeId),\n        _type: source._type,\n      },\n      {\n        tag: 'document.duplicate',\n      }\n    )\n  },\n}\n","import {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\nimport {OperationImpl} from './types'\n\nexport const restore: OperationImpl<[fromRevision: string]> = {\n  disabled: (): false => false,\n  execute: ({historyStore, schema, idPair, typeName}, fromRevision: string) => {\n    const targetId = isLiveEditEnabled(schema, typeName) ? idPair.publishedId : idPair.draftId\n    return historyStore.restore(idPair.publishedId, targetId, fromRevision)\n  },\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable, combineLatest} from 'rxjs'\nimport {distinctUntilChanged, map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport const consistencyStatus: (\n  client: SanityClient,\n  idPair: IdPair,\n  typeName: string\n) => Observable<boolean> = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({draft, published}) =>\n        combineLatest([draft.consistency$, published.consistency$])\n      ),\n      map(\n        ([draftIsConsistent, publishedIsConsistent]) => draftIsConsistent && publishedIsConsistent\n      ),\n      distinctUntilChanged(),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {SanityClient} from '@sanity/client'\nimport {defer, asyncScheduler, merge, Observable, of, Subject, EMPTY} from 'rxjs'\nimport {\n  catchError,\n  filter,\n  groupBy,\n  last,\n  map,\n  mergeMap,\n  mergeMapTo,\n  share,\n  switchMap,\n  take,\n  tap,\n  throttleTime,\n} from 'rxjs/operators'\nimport {Schema} from '@sanity/types'\nimport {IdPair} from '../types'\nimport {HistoryStore} from '../../history'\nimport {OperationArgs, OperationImpl, OperationsAPI} from './operations'\nimport {operationArgs} from './operationArgs'\nimport {del} from './operations/delete'\nimport {publish} from './operations/publish'\nimport {patch} from './operations/patch'\nimport {commit} from './operations/commit'\nimport {discardChanges} from './operations/discardChanges'\nimport {unpublish} from './operations/unpublish'\nimport {duplicate} from './operations/duplicate'\nimport {restore} from './operations/restore'\nimport {consistencyStatus} from './consistencyStatus'\n\ninterface ExecuteArgs {\n  operationName: keyof OperationsAPI\n  idPair: IdPair\n  typeName: string\n  extraArgs: any[]\n}\n\nfunction maybeObservable(v: void | Observable<any>) {\n  return typeof v === 'undefined' ? of(null) : v\n}\n\nconst operationImpls: {[name: string]: OperationImpl<any>} = {\n  del: del,\n  delete: del,\n  publish,\n  patch,\n  commit,\n  discardChanges,\n  unpublish,\n  duplicate,\n  restore,\n}\n\nconst execute = (\n  operationName: keyof typeof operationImpls,\n  operationArguments: OperationArgs,\n  extraArgs: any[]\n): Observable<any> => {\n  const operation = operationImpls[operationName]\n  return defer(() =>\n    merge(of(null), maybeObservable(operation.execute(operationArguments, ...extraArgs)))\n  ).pipe(last())\n}\n\nconst operationCalls$ = new Subject<ExecuteArgs>()\n\n/** @internal */\nexport function emitOperation(\n  operationName: keyof OperationsAPI,\n  idPair: IdPair,\n  typeName: string,\n  extraArgs: any[]\n): void {\n  operationCalls$.next({operationName, idPair, typeName, extraArgs})\n}\n\n// These are the operations that cannot be performed while the document is in an inconsistent state\nconst REQUIRES_CONSISTENCY = ['publish', 'unpublish', 'discardChanges', 'delete']\n\n/** @beta */\nexport interface OperationError {\n  type: 'error'\n  /** @internal */\n  op: keyof OperationsAPI\n  id: string\n  error: Error\n}\n\n/** @beta */\nexport interface OperationSuccess {\n  type: 'success'\n  /** @internal */\n  op: keyof OperationsAPI\n  id: string\n}\n\ninterface IntermediarySuccess {\n  type: 'success'\n  args: ExecuteArgs\n}\n\ninterface IntermediaryError {\n  type: 'error'\n  args: ExecuteArgs\n  error: any\n}\n\n/** @internal */\nexport type OperationEventsListener = (\n  idPair: IdPair,\n  typeName?: string\n) => Observable<OperationSuccess | OperationError>\n\nconst listenerCache = new Map<string, OperationEventsListener>()\n\n/** @internal */\nexport function getOperationEvents(ctx: {\n  client: SanityClient\n  historyStore: HistoryStore\n  schema: Schema\n}): OperationEventsListener {\n  const {dataset, projectId} = ctx.client.config()\n  const cacheKey = `${projectId}-${dataset}`\n  if (listenerCache.has(cacheKey)) {\n    return listenerCache.get(cacheKey)!\n  }\n\n  const result$: Observable<IntermediarySuccess | IntermediaryError> = operationCalls$.pipe(\n    groupBy((op) => op.idPair.publishedId),\n    mergeMap((groups$) =>\n      groups$.pipe(\n        // although it might look like a bug, dropping pending async operations here is actually a feature\n        // E.g. if the user types `publish` which is async and then starts patching (sync) then the publish\n        // should be cancelled\n        switchMap((args) =>\n          operationArgs(ctx, args.idPair, args.typeName).pipe(\n            take(1),\n            switchMap((operationArguments) => {\n              const requiresConsistency = REQUIRES_CONSISTENCY.includes(args.operationName)\n              if (requiresConsistency) {\n                operationArguments.published.commit()\n                operationArguments.draft.commit()\n              }\n              const isConsistent$ = consistencyStatus(ctx.client, args.idPair, args.typeName).pipe(\n                filter(Boolean)\n              )\n              const ready$ = requiresConsistency ? isConsistent$.pipe(take(1)) : of(null)\n              return ready$.pipe(\n                // eslint-disable-next-line max-nested-callbacks\n                mergeMap(() => execute(args.operationName, operationArguments, args.extraArgs))\n              )\n            }),\n            map((): IntermediarySuccess => ({type: 'success', args})),\n            catchError(\n              (err): Observable<IntermediaryError> => of({type: 'error', args, error: err})\n            )\n          )\n        )\n      )\n    ),\n    share()\n  )\n\n  // this enables autocommit after patch operations\n  const AUTOCOMMIT_INTERVAL = 1000\n  const autoCommit$ = result$.pipe(\n    filter((result) => result.type === 'success' && result.args.operationName === 'patch'),\n    throttleTime(AUTOCOMMIT_INTERVAL, asyncScheduler, {leading: true, trailing: true}),\n    tap((result) => {\n      emitOperation('commit', result.args.idPair, result.args.typeName, [])\n    })\n  )\n\n  const cache = new Map<string, Observable<OperationSuccess | OperationError>>()\n\n  function listener(\n    idPair: IdPair,\n    typeName?: string\n  ): Observable<OperationSuccess | OperationError> {\n    const key = `${idPair.publishedId}:${typeName}`\n\n    let ret = cache.get(key)\n\n    if (!ret) {\n      ret = merge(result$, autoCommit$.pipe(mergeMapTo(EMPTY))).pipe(\n        filter((result) => result.args.idPair.publishedId === idPair.publishedId),\n        map((result): OperationSuccess | OperationError => {\n          const {operationName, idPair: documentIds} = result.args\n          return result.type === 'success'\n            ? {type: 'success', op: operationName, id: documentIds.publishedId}\n            : {type: 'error', op: operationName, id: documentIds.publishedId, error: result.error}\n        })\n      )\n\n      cache.set(key, ret)\n    }\n\n    return ret\n  }\n\n  listenerCache.set(cacheKey, listener)\n\n  return listener\n}\n","import {SanityClient} from '@sanity/client'\nimport {merge} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\n\n/** @internal */\nexport const remoteSnapshots = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({published, draft}) => merge(published.remoteSnapshot$, draft.remoteSnapshot$))\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import type {SanityClient} from '@sanity/client'\nimport {asyncScheduler, combineLatest, concat, defer, from, Observable, of, timer} from 'rxjs'\nimport {\n  distinct,\n  distinctUntilChanged,\n  first,\n  groupBy,\n  map,\n  mergeMap,\n  publishReplay,\n  refCount,\n  scan,\n  share,\n  shareReplay,\n  skip,\n  throttleTime,\n} from 'rxjs/operators'\nimport {validateDocumentObservable} from '@sanity/validation'\nimport {isReference, Schema, ValidationContext, ValidationMarker} from '@sanity/types'\nimport {reduce as reduceJSON} from 'json-reduce'\nimport shallowEquals from 'shallow-equals'\nimport {omit} from 'lodash'\nimport {exhaustMapWithTrailing} from 'rxjs-exhaustmap-with-trailing'\nimport {SourceClientOptions} from '../../../../config'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {DraftsModelDocumentAvailability} from '../../../../preview'\nimport {editState} from './editState'\n\n/** @beta */\nexport interface ValidationStatus {\n  isValidating: boolean\n  validation: ValidationMarker[]\n  revision?: string\n}\n\nconst INITIAL_VALIDATION_STATUS: ValidationStatus = {\n  isValidating: true,\n  validation: [],\n}\n\nfunction findReferenceIds(obj: any): Set<string> {\n  return reduceJSON(\n    obj,\n    (acc, node) => {\n      if (isReference(node)) {\n        acc.add(node._ref)\n      }\n      return acc\n    },\n    new Set<string>()\n  )\n}\n\nconst EMPTY_VALIDATION: ValidationMarker[] = []\n\ntype GetDocumentExists = NonNullable<ValidationContext['getDocumentExists']>\n\ntype ObserveDocumentPairAvailability = (id: string) => Observable<DraftsModelDocumentAvailability>\n\nconst listenDocumentExists = (\n  observeDocumentAvailability: ObserveDocumentPairAvailability,\n  id: string\n): Observable<boolean> =>\n  observeDocumentAvailability(id).pipe(map(({published}) => published.available))\n\n// throttle delay for document updates (i.e. time between responding to changes in the current document)\nconst DOC_UPDATE_DELAY = 200\n\n// throttle delay for referenced document updates (i.e. time between responding to changes in referenced documents)\nconst REF_UPDATE_DELAY = 1000\n\n/** @internal */\nexport const validation = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      getClient: (options: SourceClientOptions) => SanityClient\n      observeDocumentPairAvailability: ObserveDocumentPairAvailability\n      schema: Schema\n    },\n    {draftId, publishedId}: IdPair,\n    typeName: string\n  ): Observable<ValidationStatus> => {\n    const document$ = editState(ctx, {draftId, publishedId}, typeName).pipe(\n      map(({draft, published}) => draft || published),\n      throttleTime(DOC_UPDATE_DELAY, asyncScheduler, {trailing: true}),\n      distinctUntilChanged((prev, next) => {\n        if (prev?._rev === next?._rev) {\n          return true\n        }\n        // _rev and _updatedAt may change without other fields changing (due to a limitation in mutator)\n        // so only pass on documents if _other_ attributes changes\n        return shallowEquals(omit(prev, '_rev', '_updatedAt'), omit(next, '_rev', '_updatedAt'))\n      }),\n      share()\n    )\n\n    const referenceIds$ = document$.pipe(\n      map((document) => findReferenceIds(document)),\n      mergeMap((ids) => from(ids))\n    )\n\n    // Note: we only use this to trigger a re-run of validation when a referenced document is published/unpublished\n    const referenceExistence$ = referenceIds$.pipe(\n      groupBy(\n        (id) => id,\n        undefined,\n        () => timer(1000 * 60 * 30)\n      ),\n      mergeMap((id$) =>\n        id$.pipe(\n          distinct(),\n          mergeMap((id) =>\n            listenDocumentExists(ctx.observeDocumentPairAvailability, id).pipe(\n              map(\n                // eslint-disable-next-line max-nested-callbacks\n                (result) => [id, result] as const\n              )\n            )\n          )\n        )\n      ),\n      scan((acc: Record<string, boolean>, [id, result]) => {\n        if (Boolean(acc[id]) === result) {\n          return acc\n        }\n        return result ? {...acc, [id]: result} : omit(acc, id)\n      }, {}),\n      distinctUntilChanged(shallowEquals),\n      shareReplay({refCount: true, bufferSize: 1})\n    )\n\n    // Provided to individual validation functions to support using existence of a weakly referenced document\n    // as part of the validation rule (used by references in place)\n    const getDocumentExists: GetDocumentExists = ({id}) =>\n      referenceExistence$\n        .pipe(\n          first(),\n          map((referenceExistence) => referenceExistence[id])\n        )\n        .toPromise()\n\n    const referenceDocumentUpdates$ = referenceExistence$.pipe(\n      // we'll skip the first emission since the document already gets an initial validation pass\n      // we're only interested in updates in referenced documents after that\n      skip(1),\n      throttleTime(REF_UPDATE_DELAY, asyncScheduler, {leading: true, trailing: true})\n    )\n\n    return combineLatest([document$, concat(of(null), referenceDocumentUpdates$)]).pipe(\n      map(([document]) => document),\n      exhaustMapWithTrailing((document) => {\n        return defer(() => {\n          if (!document?._type) {\n            return of({validation: EMPTY_VALIDATION, isValidating: false})\n          }\n          return concat(\n            of({isValidating: true, revision: document._rev}),\n            validateDocumentObservable(ctx.getClient, document, ctx.schema, {\n              getDocumentExists,\n            }).pipe(\n              map((validationMarkers) => ({validation: validationMarkers, isValidating: false}))\n            )\n          )\n        })\n      }),\n      scan((acc, next) => ({...acc, ...next}), INITIAL_VALIDATION_STATUS),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair) => idPair.publishedId\n)\n","import {SanityClient} from '@sanity/client'\nimport {merge, Observable} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {DocumentVersionEvent} from './checkoutPair'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport function documentEvents(\n  client: SanityClient,\n  idPair: IdPair,\n  typeName?: string\n): Observable<DocumentVersionEvent> {\n  return memoizedPair(client, idPair).pipe(\n    switchMap(({draft, published}) => merge(draft.events, published.events))\n  )\n}\n","import {emitOperation} from '../operationEvents'\nimport {IdPair} from '../../types'\nimport {del} from './delete'\nimport {publish} from './publish'\nimport {patch} from './patch'\nimport {commit} from './commit'\nimport {discardChanges} from './discardChanges'\nimport {unpublish} from './unpublish'\nimport {duplicate} from './duplicate'\nimport {restore} from './restore'\nimport {Operation, OperationArgs, OperationImpl, OperationsAPI} from './types'\n\nfunction createOperationGuard(opName: string): Operation<any[], 'NOT_READY'> {\n  return {\n    disabled: 'NOT_READY',\n    execute: () => {\n      throw new Error(`Called ${opName} before it was ready.`)\n    },\n  }\n}\n\n// This creates a version of the operations api that will throw if called.\n// Most operations depend on having the \"current document state\" available locally and if an action gets called\n// before we have the state available, we throw an error to signal \"premature\" invocation before ready\nexport const GUARDED: OperationsAPI = {\n  commit: createOperationGuard('commit'),\n  delete: createOperationGuard('delete'),\n  del: createOperationGuard('del'),\n  publish: createOperationGuard('publish'),\n  patch: createOperationGuard('patch'),\n  discardChanges: createOperationGuard('discardChanges'),\n  unpublish: createOperationGuard('unpublish'),\n  duplicate: createOperationGuard('duplicate'),\n  restore: createOperationGuard('restore'),\n}\nconst createEmitter =\n  (operationName: keyof OperationsAPI, idPair: IdPair, typeName: string) =>\n  (...executeArgs: any[]) =>\n    emitOperation(operationName, idPair, typeName, executeArgs)\n\nfunction wrap<ExtraArgs extends any[], DisabledReason extends string>(\n  opName: keyof OperationsAPI,\n  op: OperationImpl<ExtraArgs, DisabledReason>,\n  operationArgs: OperationArgs\n): Operation<ExtraArgs, DisabledReason> {\n  const disabled = op.disabled(operationArgs)\n  return {\n    disabled,\n    execute: createEmitter(opName, operationArgs.idPair, operationArgs.typeName),\n  }\n}\n\nexport function createOperationsAPI(args: OperationArgs): OperationsAPI {\n  return {\n    commit: wrap('commit', commit, args),\n    delete: wrap('delete', del, args),\n    del: wrap('delete', del, args),\n    publish: wrap('publish', publish, args),\n    patch: wrap('patch', patch, args),\n    discardChanges: wrap('discardChanges', discardChanges, args),\n    unpublish: wrap('unpublish', unpublish, args),\n    duplicate: wrap('duplicate', duplicate, args),\n    restore: wrap('restore', restore, args),\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {concat, merge, Observable, of, EMPTY} from 'rxjs'\nimport {map, publishReplay, refCount, mergeMapTo} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {operationArgs} from './operationArgs'\nimport {OperationsAPI} from './operations'\nimport {createOperationsAPI, GUARDED} from './operations/helpers'\nimport {getOperationEvents} from './operationEvents'\n\nconst cache = new Map<string, Observable<OperationsAPI>>()\n\nexport const editOperations = (\n  ctx: {\n    client: SanityClient\n    historyStore: HistoryStore\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<OperationsAPI> => {\n  const key = `${idPair.publishedId}:${typeName}`\n  let ret = cache.get(key)\n\n  if (!ret) {\n    const operationEvents = getOperationEvents(ctx)\n\n    // To makes sure we connect the stream that actually performs the operations\n    const operationResults$: Observable<never> = operationEvents(idPair, typeName).pipe(\n      mergeMapTo(EMPTY)\n    )\n\n    const operationArgs$ = operationArgs(ctx, idPair, typeName)\n\n    const operations$ = operationArgs$.pipe(map(createOperationsAPI))\n\n    ret = concat(of(GUARDED), merge(operationResults$, operations$)).pipe(\n      publishReplay(1),\n      refCount()\n    )\n\n    cache.set(key, ret)\n  }\n\n  return ret\n}\n","import {SanityClient} from '@sanity/client'\nimport {defer, partition, merge, of, throwError, asyncScheduler, Observable} from 'rxjs'\nimport {mergeMap, throttleTime, share, take, filter} from 'rxjs/operators'\nimport {exhaustMapToWithTrailing} from 'rxjs-exhaustmap-with-trailing'\nimport {ReconnectEvent, WelcomeEvent, MutationEvent} from './types'\n\n/** @internal */\nexport type ListenQueryParams = Record<string, string | number | boolean | string[]>\n\n/** @beta */\nexport interface ListenQueryOptions {\n  tag?: string\n  apiVersion?: string\n  throttleTime?: number\n  transitions?: ('update' | 'appear' | 'disappear')[]\n}\n\nconst fetch = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.observable.fetch(query, params, {\n      tag: options.tag,\n      filterResponse: true,\n    })\n  )\n\nconst listen = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.listen(query, params, {\n      events: ['welcome', 'mutation', 'reconnect'],\n      includeResult: false,\n      visibility: 'query',\n      tag: options.tag,\n    })\n  ) as Observable<ReconnectEvent | WelcomeEvent | MutationEvent>\n\nfunction isWelcomeEvent(\n  event: MutationEvent | ReconnectEvent | WelcomeEvent\n): event is WelcomeEvent {\n  return event.type === 'welcome'\n}\n\n/** @internal */\n// todo: promote as building block for better re-use\n// todo: optimize by patching collection in-place\nexport const listenQuery = (\n  client: SanityClient,\n  query: string | {fetch: string; listen: string},\n  params: ListenQueryParams = {},\n  options: ListenQueryOptions = {}\n) => {\n  const fetchQuery = typeof query === 'string' ? query : query.fetch\n  const listenerQuery = typeof query === 'string' ? query : query.listen\n\n  const fetchOnce$ = fetch(client, fetchQuery, params, options)\n\n  const events$ = listen(client, listenerQuery, params, options).pipe(\n    mergeMap((ev, i) => {\n      const isFirst = i === 0\n      if (isFirst && !isWelcomeEvent(ev)) {\n        // if the first event is not welcome, it is most likely a reconnect and\n        // if it's not a reconnect something is very wrong\n        return throwError(\n          new Error(\n            ev.type === 'reconnect'\n              ? 'Could not establish EventSource connection'\n              : `Received unexpected type of first event \"${ev.type}\"`\n          )\n        )\n      }\n      return of(ev)\n    }),\n    share()\n  )\n\n  const [welcome$, mutationAndReconnect$] = partition(events$, isWelcomeEvent)\n  const isRelevantEvent = (event: MutationEvent | ReconnectEvent | WelcomeEvent): boolean => {\n    if (!options.transitions || event.type !== 'mutation') {\n      return true\n    }\n\n    return options.transitions.includes(event.transition)\n  }\n\n  return merge(\n    welcome$.pipe(take(1)),\n    mutationAndReconnect$.pipe(\n      filter(isRelevantEvent),\n      throttleTime(options.throttleTime || 1000, asyncScheduler, {leading: true, trailing: true})\n    )\n  ).pipe(exhaustMapToWithTrailing(fetchOnce$))\n}\n","import {SanityClient} from '@sanity/client'\nimport type {Observable} from 'rxjs'\nimport {of} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {getDraftId, getPublishedId} from '../../../util'\n\nexport function resolveTypeForDocument(\n  client: SanityClient,\n  id: string,\n  specifiedType = '*'\n): Observable<string> {\n  // if is resolved document type\n  if (specifiedType && specifiedType !== '*') {\n    return of(specifiedType)\n  }\n\n  const query = '*[_id in [$documentId, $draftId]]._type'\n  const documentId = getPublishedId(id)\n  const draftId = getDraftId(documentId)\n\n  return client.observable.fetch(query, {documentId, draftId}).pipe(map((types) => types[0]))\n}\n","import {isPlainObject} from 'lodash'\n\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n","import {toString as pathToString} from '@sanity/util/paths'\nimport {randomKey} from '@sanity/util/content'\nimport {Schema} from '@sanity/types'\nimport {TemplateParameter, Template} from './types'\nimport {isRecord} from './util/isRecord'\n\nconst ALLOWED_REF_PROPS = ['_key', '_ref', '_weak', '_type']\nconst REQUIRED_TEMPLATE_PROPS: (keyof Template)[] = ['id', 'title', 'schemaType', 'value']\n\nfunction templateId(template: Template, i: number) {\n  return quote(template.id || template.title) || (typeof i === 'number' && `at index ${i}`) || ''\n}\n\nfunction quote(str: string) {\n  return str && str.length > 0 ? `\"${str}\"` : str\n}\n\nexport function validateTemplates(schema: Schema, templates: Template[]): Template[] {\n  const idMap = new Map()\n\n  templates.forEach((template, i) => {\n    const id = templateId(template, i)\n\n    if (typeof (template as {[key: string]: any}).values !== 'undefined' && !template.value) {\n      throw new Error(`Template ${id} is missing \"value\" property, but contained \"values\". Typo?`)\n    }\n\n    const missing = REQUIRED_TEMPLATE_PROPS.filter((prop) => !template[prop])\n    if (missing.length > 0) {\n      throw new Error(`Template ${id} is missing required properties: ${missing.join(', ')}`)\n    }\n\n    if (typeof template.value !== 'function' && !isRecord(template.value)) {\n      throw new Error(\n        `Template ${id} has an invalid \"value\" property; should be a function or an object`\n      )\n    }\n\n    if (typeof template.parameters !== 'undefined') {\n      if (Array.isArray(template.parameters)) {\n        template.parameters.forEach((param, j) => validateParameter(schema, param, template, j))\n      } else {\n        throw new Error(`Template ${id} has an invalid \"parameters\" property; must be an array`)\n      }\n    }\n\n    if (idMap.has(template.id)) {\n      const dupeIndex = idMap.get(template.id)\n      const dupe = `${quote(templates[dupeIndex].title)} at index ${dupeIndex}`\n      throw new Error(\n        `Template \"${template.title}\" at index ${i} has the same ID (\"${template.id}\") as template ${dupe}`\n      )\n    }\n\n    idMap.set(template.id, i)\n  })\n\n  return templates\n}\n\nexport function validateInitialObjectValue<T extends Record<string, unknown>>(\n  value: T,\n  template: Template\n): T {\n  const contextError = (msg: string) => `Template \"${template.id}\" initial value: ${msg}`\n\n  if (!isRecord(value)) {\n    throw new Error(contextError(`resolved to a non-object`))\n  }\n\n  if (value._type && template.schemaType !== value._type) {\n    throw new Error(\n      contextError(\n        `includes \"_type\"-property (${value._type}) that does not match template (${template.schemaType})`\n      )\n    )\n  }\n\n  try {\n    return validateValue(value)\n  } catch (err) {\n    err.message = contextError(err.message)\n    throw err\n  }\n}\n\nfunction validateValue(value: unknown, path: (string | number)[] = [], parentIsArray = false): any {\n  if (Array.isArray(value)) {\n    return value.map((item, i) => {\n      if (Array.isArray(item)) {\n        throw new Error(\n          `multidimensional arrays are not supported (at path \"${pathToString(path)}\")`\n        )\n      }\n\n      return validateValue(item, path.concat(i), true)\n    })\n  }\n\n  if (!isRecord(value)) {\n    return value\n  }\n\n  // Apply missing keys is the parent is an array\n  const initial: {[key: string]: any} = parentIsArray && !value._key ? {_key: randomKey()} : {}\n\n  // Ensure non-root objects have _type\n  if (path.length > 0 && !value._type) {\n    if (value._ref) {\n      // In the case of references, we know what the type should be, so apply it\n      initial._type = 'reference'\n    } else {\n      // todo: consider if we need to re-instantiate this. It currently makes the valid case of having an initial object value for a field fail\n      // throw new Error(`missing \"_type\" property at path \"${pathToString(path)}\"`)\n    }\n  }\n\n  if (value._ref) {\n    validateReference(value, path)\n  }\n\n  // Validate deeply\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key] = validateValue(value[key], path.concat([key]))\n    return acc\n  }, initial)\n}\n\nfunction validateParameter(\n  schema: Schema,\n  parameter: TemplateParameter,\n  template: Template,\n  index: number\n) {\n  // const schema = getDefaultSchema()\n\n  if (!parameter.name) {\n    throw new Error(\n      `Template ${template.id} has a parameter at index ${index} that is missing its \"name\"-property`\n    )\n  }\n\n  // I know, this is a weird one\n  if (parameter.name === 'template') {\n    throw new Error(\n      `Template parameters cannot be named \"template\", see parameter #${index} for template ${template.id}`\n    )\n  }\n\n  if (!schema.get(parameter.type)) {\n    throw new Error(\n      `Template parameter \"${parameter.name}\" has an invalid/unknown type: \"${parameter.type}\"`\n    )\n  }\n}\n\nfunction validateReference(\n  value: {_type?: unknown; type?: unknown},\n  path: (string | number)[] = []\n) {\n  if (!value._type && value.type) {\n    throw new Error(\n      `Reference is missing \"_type\", but has a \"type\" property at path \"${pathToString(path)}\"`\n    )\n  }\n\n  const disallowed = Object.keys(value).filter((key) => !ALLOWED_REF_PROPS.includes(key))\n  if (disallowed.length > 0) {\n    const plural = disallowed.length > 1 ? 'properties' : 'property'\n    throw new Error(\n      `Disallowed ${plural} found in reference: ${disallowed\n        .map(quote)\n        .join(', ')} at path \"${pathToString(path)}\"`\n    )\n  }\n}\n","import {isRecord} from './isRecord'\n\n// deep object assign for objects\n// note: doesn't mutate target\nexport default function deepAssign(\n  target: Record<string, unknown>,\n  source: Record<string, unknown>\n): Record<string, unknown> {\n  const result = {...target, ...source}\n\n  Object.keys(result).forEach((key) => {\n    const sourceVal = source[key]\n    const targetVal = target[key]\n    if (isRecord(sourceVal) && isRecord(targetVal)) {\n      result[key] = deepAssign(targetVal, sourceVal)\n    }\n  })\n  return result\n}\n","import {\n  ArraySchemaType,\n  InitialValueProperty,\n  InitialValueResolver,\n  InitialValueResolverContext,\n  isArraySchemaType,\n  isObjectSchemaType,\n  ObjectSchemaType,\n  Schema,\n  SchemaType,\n} from '@sanity/types'\nimport {isEmpty, randomKey, resolveTypeName} from '@sanity/util/content'\nimport {isRecord} from './util/isRecord'\nimport {Template} from './types'\nimport {validateInitialObjectValue} from './validate'\nimport deepAssign from './util/deepAssign'\n\n/** @internal */\nexport type Serializeable<T> = {\n  serialize(): T\n}\n\n/** @internal */\nexport function isBuilder(template: unknown): template is Serializeable<Template> {\n  return isRecord(template) && typeof template.serialize === 'function'\n}\n\n/** @internal */\n// returns the \"resolved\" value from an initial value property (e.g. type.initialValue)\n// eslint-disable-next-line require-await\nexport async function resolveValue<Params, InitialValue>(\n  initialValueOpt: InitialValueProperty<Params, InitialValue>,\n  params: Params | undefined,\n  context: InitialValueResolverContext\n): Promise<InitialValue | undefined> {\n  return typeof initialValueOpt === 'function'\n    ? (initialValueOpt as InitialValueResolver<Params, InitialValue>)(params, context)\n    : initialValueOpt\n}\n\n/** @internal */\nexport async function resolveInitialValue(\n  schema: Schema,\n  template: Template,\n  params: {[key: string]: any} = {},\n  context: InitialValueResolverContext\n): Promise<{[key: string]: any}> {\n  // Template builder?\n  if (isBuilder(template)) {\n    return resolveInitialValue(schema, template.serialize(), params, context)\n  }\n\n  const {id, schemaType: schemaTypeName, value} = template\n  if (!value) {\n    throw new Error(`Template \"${id}\" has invalid \"value\" property`)\n  }\n\n  let resolvedValue = await resolveValue(value, params, context)\n\n  if (!isRecord(resolvedValue)) {\n    throw new Error(\n      `Template \"${id}\" has invalid \"value\" property - must be a plain object or a resolver function returning a plain object`\n    )\n  }\n\n  // validate default document initial values\n  resolvedValue = validateInitialObjectValue(resolvedValue, template)\n\n  // Get deep initial values from schema types (note: the initial value from template overrides the types)\n  const schemaType = schema.get(schemaTypeName)\n  if (!schemaType) {\n    throw new Error(`Could not find schema type with name \"${schemaTypeName}\".`)\n  }\n\n  const newValue = deepAssign(\n    (await resolveInitialValueForType(schemaType, params, DEFAULT_MAX_RECURSION_DEPTH, context)) ||\n      {},\n    resolvedValue as Record<string, unknown>\n  )\n\n  // revalidate and return new initial values\n  // todo: would be better to do validation as part of type resolution\n  return validateInitialObjectValue(newValue, template)\n}\n\n/** @internal */\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\n/** @internal */\nexport const DEFAULT_MAX_RECURSION_DEPTH = 10\n\n/**\n * Resolve initial value for the given schema type (recursively)\n *\n * @internal\n */\nexport function resolveInitialValueForType<Params extends Record<string, unknown>>(\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params,\n  /**\n   * Maximum recursion depth (default 9).\n   */\n  maxDepth = DEFAULT_MAX_RECURSION_DEPTH,\n  context: InitialValueResolverContext\n): Promise<any> {\n  if (maxDepth <= 0) {\n    return Promise.resolve(undefined)\n  }\n\n  if (isObjectSchemaType(type)) {\n    return resolveInitialObjectValue(type, params, maxDepth, context)\n  }\n\n  if (isArraySchemaType(type)) {\n    return resolveInitialArrayValue(type, params, maxDepth, context)\n  }\n\n  return resolveValue(type.initialValue, params, context)\n}\n\nasync function resolveInitialArrayValue<Params extends Record<string, unknown>>(\n  type: SchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialArray = await resolveValue(type.initialValue, undefined, context)\n\n  if (!Array.isArray(initialArray)) {\n    return undefined\n  }\n\n  return Promise.all(\n    initialArray.map(async (initialItem) => {\n      const itemType = getItemType(type as ArraySchemaType, initialItem)!\n      return isObjectSchemaType(itemType)\n        ? {\n            ...initialItem,\n            ...(await resolveInitialValueForType(itemType, params, maxDepth - 1, context)),\n            _key: randomKey(),\n          }\n        : initialItem\n    })\n  )\n}\n\n/** @internal */\nexport async function resolveInitialObjectValue<Params extends Record<string, unknown>>(\n  type: ObjectSchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialObject: Record<string, unknown> = {\n    ...((await resolveValue(type.initialValue, params, context)) || {}),\n  }\n\n  const fieldValues: Record<string, any> = {}\n  await Promise.all(\n    type.fields.map(async (field) => {\n      const initialFieldValue = await resolveInitialValueForType(\n        field.type,\n        params,\n        maxDepth - 1,\n        context\n      )\n      if (initialFieldValue !== undefined && initialFieldValue !== null) {\n        fieldValues[field.name] = initialFieldValue\n      }\n    })\n  )\n\n  const merged = deepAssign(fieldValues, initialObject)\n\n  if (isEmpty(merged)) {\n    return undefined\n  }\n\n  if (type.name !== 'object') {\n    merged._type = type.name\n  }\n\n  return merged\n}\n","import {Schema, SchemaType} from '@sanity/types'\nimport {isBuilder} from './resolve'\nimport {Template} from './types'\nimport {validateTemplates} from './validate'\n\nfunction maybeSerialize(template: Template) {\n  return isBuilder(template) ? template.serialize() : template\n}\n\nfunction isNonNullable<T>(t: T): t is NonNullable<T> {\n  return !!t\n}\n\n/** @internal */\nexport function prepareTemplates(schema: Schema, initialValueTemplates: Template[]): Template[] {\n  const serialized = initialValueTemplates.map(maybeSerialize)\n  return validateTemplates(schema, serialized)\n}\n\n/** @internal */\nexport function defaultTemplateForType(schemaType: SchemaType): Template {\n  return {\n    id: schemaType.name,\n    schemaType: schemaType.name,\n    title: schemaType.title || schemaType.name,\n    icon: schemaType.icon,\n    value: schemaType.initialValue || {_type: schemaType.name},\n  }\n}\n\n/** @internal */\nexport function defaultTemplatesForSchema(schema: Schema): Template[] {\n  const schemaTypes = schema\n    .getTypeNames()\n    .filter((typeName) => !/^sanity\\./.test(typeName))\n    .map((typeName) => schema.get(typeName))\n    .filter(isNonNullable)\n    .filter((schemaType) => schemaType.type?.name === 'document')\n\n  return prepareTemplates(\n    schema,\n    schemaTypes.map((schemaType) => defaultTemplateForType(schemaType))\n  )\n}\n","import {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {from, merge, Observable, of} from 'rxjs'\nimport {\n  map,\n  switchMap,\n  scan,\n  filter,\n  distinctUntilChanged,\n  catchError,\n  debounceTime,\n  startWith,\n} from 'rxjs/operators'\nimport {DocumentPreviewStore} from '../../../../preview'\nimport {resolveInitialValue, Template} from '../../../../templates'\nimport {getDraftId, getPublishedId} from '../../../../util'\nimport {\n  InitialValueErrorMsg,\n  InitialValueLoadingMsg,\n  InitialValueSuccessMsg,\n  InitialValueMsg,\n} from './types'\n\n/** @beta */\nexport interface InitialValueOptions {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, any>\n}\n\nconst LOADING_MSG: InitialValueLoadingMsg = {type: 'loading'}\n\n/**\n * @internal\n */\nexport function getInitialValueStream(\n  schema: Schema,\n  initialValueTemplates: Template[],\n  documentPreviewStore: DocumentPreviewStore,\n  opts: InitialValueOptions,\n  context: InitialValueResolverContext\n): Observable<InitialValueMsg> {\n  const draft$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getDraftId(opts.documentId)},\n    ['_type']\n  )\n\n  const published$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getPublishedId(opts.documentId)},\n    ['_type']\n  )\n\n  const value$ = merge(\n    draft$.pipe(map((draft) => ({draft}))),\n    published$.pipe(map((published) => ({published})))\n  ).pipe(\n    scan((prev, res) => ({...prev, ...res}), {}),\n    // Wait until we know the state of both draft and published\n    filter((res) => 'draft' in res && 'published' in res),\n    map((res: any) => res.draft || res.published),\n    // Only update if we didn't previously have a document but we now do\n    distinctUntilChanged((prev, next) => Boolean(prev) !== Boolean(next)),\n    // Prevent rapid re-resolving when transitioning between different templates\n    debounceTime(25)\n  )\n\n  return value$.pipe(\n    switchMap((document) => {\n      // Already exists, so no initial value is needed\n      if (document) {\n        return of({type: 'success', value: null})\n      }\n\n      if (!opts.templateName) {\n        // @todo: Make sure this is the correct behavior\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const template = initialValueTemplates.find((t) => t.id === opts.templateName)\n\n      if (!template) {\n        // eslint-disable-next-line no-console\n        console.warn('Template \"%s\" not defined, using empty initial value', opts.templateName)\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const initialValueWithParams$ = from(\n        resolveInitialValue(schema, template, opts.templateParams, context)\n      )\n        .pipe(map((initialValue) => ({isResolving: false, initialValue})))\n        .pipe(\n          catchError((resolveError) => {\n            /* eslint-disable no-console */\n            console.group('Failed to resolve initial value')\n            console.error(resolveError)\n            console.error('Template ID: %s', opts.templateName)\n            console.error('Parameters: %o', opts.templateParams)\n            console.groupEnd()\n            /* eslint-enable no-console */\n\n            const msg: InitialValueErrorMsg = {type: 'error', error: resolveError}\n\n            return of(msg)\n          })\n        )\n\n      return merge(of({isResolving: true}), initialValueWithParams$).pipe(\n        switchMap(({isResolving, initialValue, resolveError}: any) => {\n          if (resolveError) {\n            return of({type: 'error', message: 'Failed to resolve initial value'})\n          }\n\n          if (isResolving) {\n            return of(LOADING_MSG)\n          }\n\n          const msg: InitialValueSuccessMsg = {type: 'success', value: initialValue}\n\n          return of(msg)\n        })\n      )\n    }),\n\n    startWith(LOADING_MSG),\n    distinctUntilChanged()\n  ) as Observable<InitialValueMsg>\n}\n","import {SanityClient} from '@sanity/client'\nimport {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {HistoryStore} from '../history'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {getDraftId, isDraftId} from '../../../util'\nimport {Template} from '../../../templates'\nimport {SourceClientOptions} from '../../../config'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {checkoutPair, DocumentVersionEvent, Pair} from './document-pair/checkoutPair'\nimport {consistencyStatus} from './document-pair/consistencyStatus'\nimport {documentEvents} from './document-pair/documentEvents'\nimport {editOperations} from './document-pair/editOperations'\nimport {editState, EditStateFor} from './document-pair/editState'\nimport {getOperationEvents, OperationError, OperationSuccess} from './document-pair/operationEvents'\nimport {OperationsAPI} from './document-pair/operations'\nimport {validation, ValidationStatus} from './document-pair/validation'\nimport {listenQuery, ListenQueryOptions} from './listenQuery'\nimport {resolveTypeForDocument} from './resolveTypeForDocument'\nimport type {IdPair} from './types'\nimport {getInitialValueStream, InitialValueMsg, InitialValueOptions} from './initialValue'\n\n/** @beta */\nexport type QueryParams = Record<string, string | number | boolean | string[]>\n\nfunction getIdPairFromPublished(publishedId: string): IdPair {\n  if (isDraftId(publishedId)) {\n    throw new Error('editOpsOf does not expect a draft id.')\n  }\n\n  return {publishedId, draftId: getDraftId(publishedId)}\n}\n\n/** @beta */\nexport interface DocumentStore {\n  /** @internal */\n  checkoutPair: (idPair: IdPair) => Pair\n  initialValue: (\n    opts: InitialValueOptions,\n    context: InitialValueResolverContext\n  ) => Observable<InitialValueMsg>\n  listenQuery: (\n    query: string | {fetch: string; listen: string},\n    params: QueryParams,\n    options: ListenQueryOptions\n  ) => Observable<any>\n  resolveTypeForDocument: (id: string, specifiedType?: string) => Observable<string>\n\n  pair: {\n    consistencyStatus: (publishedId: string, type: string) => Observable<boolean>\n    /** @internal */\n    documentEvents: (publishedId: string, type: string) => Observable<DocumentVersionEvent>\n    /** @internal */\n    editOperations: (publishedId: string, type: string) => Observable<OperationsAPI>\n    editState: (publishedId: string, type: string) => Observable<EditStateFor>\n    operationEvents: (\n      publishedId: string,\n      type: string\n    ) => Observable<OperationSuccess | OperationError>\n    validation: (publishedId: string, type: string) => Observable<ValidationStatus>\n  }\n}\n\n/** @internal */\nexport interface DocumentStoreOptions {\n  getClient: (options: SourceClientOptions) => SanityClient\n  documentPreviewStore: DocumentPreviewStore\n  historyStore: HistoryStore\n  schema: Schema\n  initialValueTemplates: Template[]\n}\n\n/** @internal */\nexport function createDocumentStore({\n  getClient,\n  documentPreviewStore,\n  historyStore,\n  initialValueTemplates,\n  schema,\n}: DocumentStoreOptions): DocumentStore {\n  const observeDocumentPairAvailability =\n    documentPreviewStore.unstable_observeDocumentPairAvailability\n\n  // Note that we're both passing a shared `client` here which is used by the\n  // internal operations, and a `getClient` method that we expose to user-land\n  // for things like validations\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const ctx = {client, getClient, observeDocumentPairAvailability, historyStore, schema}\n\n  const caches = {\n    pair: {\n      editOperations: new Map<string, Observable<OperationsAPI>>(),\n      editState: new Map<string, Observable<EditStateFor>>(),\n    },\n  }\n\n  const operationEvents = getOperationEvents(ctx)\n\n  return {\n    // Public API\n    checkoutPair(idPair) {\n      return checkoutPair(client, idPair)\n    },\n    initialValue(opts, context) {\n      return getInitialValueStream(\n        schema,\n        initialValueTemplates,\n        documentPreviewStore,\n        opts,\n        context\n      )\n    },\n    listenQuery(query, params, options) {\n      return listenQuery(client, query, params, options)\n    },\n    resolveTypeForDocument(id, specifiedType) {\n      return resolveTypeForDocument(client, id, specifiedType)\n    },\n    pair: {\n      consistencyStatus(publishedId, type) {\n        return consistencyStatus(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      documentEvents(publishedId, type) {\n        return documentEvents(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      editOperations(publishedId, type) {\n        const cache = caches.pair.editOperations\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const ops = editOperations(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, ops)\n        return ops\n      },\n      editState(publishedId, type) {\n        const cache = caches.pair.editState\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const state = editState(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, state)\n        return state\n      },\n      operationEvents(publishedId, type) {\n        return operationEvents(getIdPairFromPublished(publishedId), type)\n      },\n      validation(publishedId, type) {\n        return validation(ctx, getIdPairFromPublished(publishedId), type)\n      },\n    },\n  }\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {getPublishedId} from '../../../../util'\nimport {useDocumentStore} from '../../datastores'\n\n/** @internal */\nexport interface DocumentTypeResolveState {\n  isLoaded: boolean\n  documentType: string | undefined\n}\n\nconst LOADING_STATE: DocumentTypeResolveState = {\n  isLoaded: false,\n  documentType: undefined,\n}\n\n/** @internal */\nexport function useDocumentType(documentId: string, specifiedType = '*'): DocumentTypeResolveState {\n  const documentStore = useDocumentStore()\n  const publishedId = getPublishedId(documentId)\n  const isResolved = Boolean(specifiedType && specifiedType !== '*')\n\n  // Memoize what a synchronously resolved state looks like (eg specified type is present),\n  // in order to return the same object each time. Note that this can be \"incorrect\", but\n  // that we won't be returning it in that case, eg: `{documentType: '*', isResolved: true}\n  const SYNC_RESOLVED_STATE = useMemo(\n    () => ({documentType: specifiedType, isLoaded: true}),\n    [specifiedType]\n  )\n\n  // Set up our state that we'll only use when we need to reach out to the API to find\n  // the document type for a given document. Otherwise we'll be using SYNC_RESOLVED_STATE.\n  // For consistency (between different document ids/types), we're setting the sync resolved\n  // state here as well, but it isn't strictly necessary for correct rendering.\n  const [resolvedState, setDocumentType] = useState<DocumentTypeResolveState>(\n    isResolved ? SYNC_RESOLVED_STATE : LOADING_STATE\n  )\n\n  // Reset documentType when documentId changes. Note that we're using the referentially\n  // stable LOADING_STATE in order to prevent double rendering on initial load.\n  useEffect(() => setDocumentType(LOADING_STATE), [publishedId, specifiedType])\n\n  // Load the documentType from Content Lake, unless we're already in a resolved state\n  useEffect(() => {\n    if (isResolved) {\n      return undefined\n    }\n\n    const sub = documentStore\n      .resolveTypeForDocument(publishedId, specifiedType)\n      .subscribe((documentType: string) => setDocumentType({documentType, isLoaded: true}))\n\n    return () => sub.unsubscribe()\n  }, [documentStore, publishedId, specifiedType, isResolved])\n\n  return isResolved\n    ? // `isResolved` is only true when we're _synchronously_ resolved\n      SYNC_RESOLVED_STATE\n    : // Using the document type resolved from the API\n      resolvedState\n}\n","import {useMemo} from 'react'\nimport {Observable, of} from 'rxjs'\nimport {LoadableState, useLoadable} from '../../../../util'\nimport {useDocumentPreviewStore} from '../../datastores'\n\n/** @internal */\nexport function useDocumentValues<T = Record<string, unknown>>(\n  documentId: string,\n  paths: string[]\n): LoadableState<T | undefined> {\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const documentValues$ = useMemo(\n    () =>\n      documentId\n        ? (documentPreviewStore.observePaths(\n            {_type: 'reference', _ref: documentId},\n            paths\n          ) as Observable<T>)\n        : of(undefined),\n    [documentId, documentPreviewStore, paths]\n  )\n\n  return useLoadable(documentValues$)\n}\n","import {InitialValueResolverContext, SanityDocumentLike} from '@sanity/types'\nimport {useEffect, useMemo, useState} from 'react'\nimport {useDataset, useProjectId, useSchema} from '../../../hooks'\nimport {useSource} from '../../../studio'\nimport {useUnique} from '../../../util'\nimport {useCurrentUser} from '../../user'\nimport {useDocumentStore} from '../datastores'\nimport {InitialValueState} from './initialValue/types'\n\n/**\n * @internal\n */\nexport function useInitialValue(props: {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, unknown>\n}): InitialValueState {\n  const {documentId, documentType, templateName, templateParams: templateParamsRaw} = props\n  const templateParams = useUnique(templateParamsRaw)\n  const documentStore = useDocumentStore()\n  const context = useInitialValueResolverContext()\n\n  const defaultValue: SanityDocumentLike = useMemo(\n    () => ({_id: documentId, _type: documentType}),\n    [documentId, documentType]\n  )\n\n  const [state, setState] = useState<InitialValueState>({\n    loading: false,\n    error: null,\n    value: defaultValue,\n  })\n\n  useEffect(() => {\n    const initialValueOptions = {documentId, documentType, templateName, templateParams}\n\n    if (!templateName) {\n      setState({loading: true, error: null, value: defaultValue})\n      return undefined\n    }\n\n    const initialValueMsg$ = documentStore.initialValue(initialValueOptions, context)\n\n    const sub = initialValueMsg$.subscribe((msg) => {\n      if (msg.type === 'loading') {\n        setState({loading: true, error: null, value: defaultValue})\n      }\n\n      if (msg.type === 'success') {\n        setState({\n          loading: false,\n          error: null,\n          value: msg.value ? {...defaultValue, ...msg.value} : defaultValue,\n        })\n      }\n\n      if (msg.type === 'error') {\n        setState({loading: false, error: msg.error, value: defaultValue})\n      }\n    })\n\n    setState({loading: true, error: null, value: defaultValue})\n\n    return () => sub.unsubscribe()\n  }, [defaultValue, documentId, documentStore, documentType, templateName, templateParams, context])\n\n  return state\n}\n\n/**\n * @internal\n */\nexport function useInitialValueResolverContext(): InitialValueResolverContext {\n  const source = useSource()\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const projectId = useProjectId()\n  const dataset = useDataset()\n  const getClient = source.getClient\n\n  return useMemo(() => {\n    return {\n      projectId,\n      dataset,\n      getClient,\n      schema,\n      currentUser,\n    }\n  }, [getClient, schema, currentUser, projectId, dataset])\n}\n","import {SchemaType} from '@sanity/types'\nimport {useCallback} from 'react'\nimport {DEFAULT_MAX_RECURSION_DEPTH, resolveInitialValueForType} from '../../../templates'\nimport {useInitialValueResolverContext} from './useInitialValue'\n\n/** @internal */\nexport function useResolveInitialValueForType<Params extends Record<string, unknown>>(): (\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params\n) => Promise<any> {\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useCallback(\n    (type: SchemaType, params: Params) => {\n      return resolveInitialValueForType(\n        type,\n        params,\n        DEFAULT_MAX_RECURSION_DEPTH,\n        initialValueContext\n      )\n    },\n    [initialValueContext]\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {SanityDocument, Schema, SchemaType} from '@sanity/types'\nimport {Observable, combineLatest, of} from 'rxjs'\nimport {switchMap, map} from 'rxjs/operators'\nimport {\n  type PartialExcept,\n  createHookFromObservableFactory,\n  getDraftId,\n  getPublishedId,\n} from '../../../util'\nimport {useGrantsStore} from '../datastores'\nimport {snapshotPair} from '../document'\nimport {useClient, useSchema} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {GrantsStore, PermissionCheckResult} from './types'\nimport {useMemo} from 'react'\n\nfunction getSchemaType(schema: Schema, typeName: string): SchemaType {\n  const type = schema.get(typeName)\n\n  if (!type) {\n    throw new Error(`No such schema type: ${typeName}`)\n  }\n\n  return type\n}\n\ninterface PairPermissionsOptions {\n  grantsStore: GrantsStore\n  permission: DocumentPermission\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n}\n\nfunction getPairPermissions({\n  grantsStore,\n  permission,\n  draft,\n  published,\n  liveEdit,\n}: PairPermissionsOptions): Array<[string, Observable<PermissionCheckResult>] | null> {\n  // this was introduced because we ran into a bug where a user with publish\n  // access was marked as not allowed to duplicate a document unless it had a\n  // draft variant. this would happen in non-live edit cases where the document\n  // pair only had a published variant with the draft variant being null.\n  //\n  // note: this should _not_ be used if the draft and published versions should\n  // be considered separately/explicitly in the permissions.\n  const effectiveVersion = draft || published\n  const effectiveVersionType = effectiveVersion === draft ? 'draft' : 'published'\n\n  const {checkDocumentPermission} = grantsStore\n\n  switch (permission) {\n    case 'delete': {\n      if (liveEdit) {\n        return [\n          ['delete published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        ['delete published document', checkDocumentPermission('update', published)],\n      ]\n    }\n\n    case 'discardDraft': {\n      if (liveEdit) return []\n\n      return [['delete draft document', checkDocumentPermission('update', draft)]]\n    }\n\n    case 'publish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        [\n          'update published document at its current state',\n          checkDocumentPermission('update', published),\n        ],\n\n        // post condition\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        [\n          'create published document from draft',\n          checkDocumentPermission('create', draft && {...draft, _id: getPublishedId(draft._id)}),\n        ],\n      ]\n    }\n\n    case 'unpublish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        ['update draft document at its current state', checkDocumentPermission('create', draft)],\n\n        // post condition\n        ['delete published document', checkDocumentPermission('update', published)],\n        [\n          'create draft document from published version',\n          checkDocumentPermission(\n            'create',\n            published && {...published, _id: getDraftId(published._id)}\n          ),\n        ],\n      ]\n    }\n\n    case 'update': {\n      if (liveEdit) {\n        return [\n          ['update published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        [\n          `update ${effectiveVersionType} document`,\n          checkDocumentPermission('update', effectiveVersion),\n        ],\n      ]\n    }\n\n    case 'duplicate': {\n      if (liveEdit) {\n        return [\n          [\n            'create new published document from existing document (live-edit)',\n            checkDocumentPermission('create', {...published, _id: 'dummy-id'}),\n          ],\n        ]\n      }\n\n      return [\n        [\n          `create new draft document from existing ${effectiveVersionType} document`,\n          checkDocumentPermission('create', {...effectiveVersion, _id: getDraftId('dummy-id')}),\n        ],\n      ]\n    }\n\n    default: {\n      throw new Error(`Could not match permission: ${permission}`)\n    }\n  }\n}\n\n/** @internal */\nexport type DocumentPermission =\n  | 'delete'\n  | 'discardDraft'\n  | 'publish'\n  | 'unpublish'\n  | 'update'\n  | 'duplicate'\n\n/** @internal */\nexport interface DocumentPairPermissionsOptions {\n  client: SanityClient\n  schema: Schema\n  grantsStore: GrantsStore\n  id: string\n  type: string\n  permission: DocumentPermission\n}\n\n/**\n * The observable version of `useDocumentPairPermissions`\n *\n * @see useDocumentPairPermissions\n *\n * @internal\n */\nexport function getDocumentPairPermissions({\n  client,\n  grantsStore,\n  schema,\n  id,\n  permission,\n  type,\n}: DocumentPairPermissionsOptions): Observable<PermissionCheckResult> {\n  // this case was added to fix a crash that would occur if the `schemaType` was\n  // omitted from `S.documentList()`\n  //\n  // see `resolveTypeForDocument` which returns `'*'` if no type is provided\n  // https://github.com/sanity-io/sanity/blob/4d49b83a987d5097064d567f75d21b268a410cbf/packages/%40sanity/base/src/datastores/document/resolveTypeForDocument.ts#L7\n  if (type === '*') {\n    return of({granted: false, reason: 'Type specified was `*`'})\n  }\n\n  const liveEdit = Boolean(getSchemaType(schema, type).liveEdit)\n\n  return snapshotPair(\n    client,\n    {draftId: getDraftId(id), publishedId: getPublishedId(id)},\n    type\n  ).pipe(\n    switchMap((pair) =>\n      combineLatest([pair.draft.snapshots$, pair.published.snapshots$]).pipe(\n        map(([draft, published]) => ({draft, published}))\n      )\n    ),\n    switchMap(({draft, published}) => {\n      const pairPermissions = getPairPermissions({\n        grantsStore,\n        permission,\n        draft,\n        published,\n        liveEdit,\n      }).map(([label, observable]: any) =>\n        observable.pipe(\n          map(({granted, reason}: any) => ({\n            granted,\n            reason: granted ? '' : `not allowed to ${label}: ${reason}`,\n            label,\n            permission,\n          }))\n        )\n      )\n\n      if (!pairPermissions.length) return of({granted: true, reason: ''})\n\n      return combineLatest(pairPermissions).pipe(\n        map((permissionResults: any[]) => {\n          const granted = permissionResults.every((permissionResult) => permissionResult.granted)\n          const reason = granted\n            ? ''\n            : `Unable to ${permission}:\\n\\t${permissionResults\n                .filter((permissionResult) => !permissionResult.granted)\n                .map((permissionResult) => permissionResult.reason)\n                .join('\\n\\t')}`\n\n          return {granted, reason}\n        })\n      )\n    })\n  )\n}\n\n/**\n * Gets document pair permissions based on a document ID and a type.\n *\n * This permissions API is a high-level permissions API that is draft-model\n * aware. In order to determine whether or not the user has the given\n * permission, both the draft and published documents are pulled and run through\n * all of the user's grants. If any pre or post conditions fail a permissions\n * checks, the operations will not be granted.\n *\n * The operations this hook accepts are only relevant to document pairs. E.g.\n * `'create'` is not included as an operation because it's not possible to tell\n * if a document can be created by only using the initial ID and type because an\n * initial template value may not have a matching grant (e.g. locked-document\n * pattern `!locked`). In contrast, the operation `'duplicate'` is supported\n * because the draft value of the document can be live queried and checked for\n * matching grants.\n *\n * Note: for live-edit documents, non-applicable operations (e.g. publish) will\n * return as true.\n *\n * @see useDocumentValuePermissions\n *\n * @internal\n */\nexport const useDocumentPairPermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentPairPermissions\n)\n\n/** @internal */\nexport function useDocumentPairPermissions({\n  id,\n  type,\n  permission,\n  client: overrideClient,\n  schema: overrideSchema,\n  grantsStore: overrideGrantsStore,\n}: PartialExcept<DocumentPairPermissionsOptions, 'id' | 'type' | 'permission'>): ReturnType<\n  typeof useDocumentPairPermissionsFromHookFactory\n> {\n  const defaultClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const defaultSchema = useSchema()\n  const defaultGrantsStore = useGrantsStore()\n\n  const client = useMemo(() => overrideClient || defaultClient, [defaultClient, overrideClient])\n  const schema = useMemo(() => overrideSchema || defaultSchema, [defaultSchema, overrideSchema])\n  const grantsStore = useMemo(\n    () => overrideGrantsStore || defaultGrantsStore,\n    [defaultGrantsStore, overrideGrantsStore]\n  )\n\n  return useDocumentPairPermissionsFromHookFactory(\n    useMemo(\n      () => ({client, schema, grantsStore, id, permission, type}),\n      [client, grantsStore, id, permission, schema, type]\n    )\n  )\n}\n","import {Observable} from 'rxjs'\nimport {createHookFromObservableFactory, PartialExcept} from '../../../util'\nimport {useGrantsStore} from '../datastores'\nimport {DocumentValuePermission, GrantsStore, PermissionCheckResult} from './types'\n\n/** @internal */\nexport interface DocumentValuePermissionsOptions {\n  grantsStore: GrantsStore\n  document: Record<string, unknown>\n  permission: DocumentValuePermission\n}\n\n/**\n * The observable version of `useDocumentValuePermissions`\n *\n * @see useDocumentValuePermissions\n *\n * @internal\n */\nexport function getDocumentValuePermissions({\n  grantsStore,\n  document,\n  permission,\n}: DocumentValuePermissionsOptions): Observable<PermissionCheckResult> {\n  const {checkDocumentPermission} = grantsStore\n\n  return checkDocumentPermission(permission, document)\n}\n\n/**\n * Gets permissions based on the value of the document passed into the hook\n * (stateless).\n *\n * Note: this is a lower-level API (compared to `useDocumentPairPermissions`)\n * that is _not_ draft-model aware.\n *\n * As a consequence, the operations it accepts are also low-level. (e.g.\n * `'publish'` permissions can't be determined with this API). This is because\n * it's not possible to tell if a user can do high-level document pair\n * operations on document using only one document value.\n *\n * For example, in order to determine if a user can publish, the current value\n * of the published document needs to be pulled and checked against the user's\n * grants. If there are no matching grants, then it fails the pre-condition and\n * no operation is allowed regardless of the given document.\n *\n * @see useDocumentPairPermissions\n *\n * @internal\n */\nexport const useDocumentValuePermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentValuePermissions\n)\n\n/** @internal */\nexport function useDocumentValuePermissions({\n  document,\n  permission,\n  ...rest\n}: PartialExcept<DocumentValuePermissionsOptions, 'permission' | 'document'>): ReturnType<\n  typeof useDocumentValuePermissionsFromHookFactory\n> {\n  const grantsStore = useGrantsStore()\n\n  return useDocumentValuePermissionsFromHookFactory({\n    grantsStore: rest.grantsStore || grantsStore,\n    document,\n    permission,\n  })\n}\n","import {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {combineLatest, from, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {useSchema, useTemplates} from '../../../hooks'\nimport {InitialValueTemplateItem, resolveInitialValue, Template} from '../../../templates'\nimport {\n  type PartialExcept,\n  createHookFromObservableFactory,\n  getDraftId,\n  getPublishedId,\n} from '../../../util'\nimport {useGrantsStore} from '../datastores'\nimport {useInitialValueResolverContext} from '../document'\nimport {getDocumentValuePermissions} from './documentValuePermissions'\nimport {GrantsStore, PermissionCheckResult} from './types'\n\n/** @internal */\nexport interface TemplatePermissionsResult<TInitialValue = Record<string, unknown>>\n  extends PermissionCheckResult,\n    InitialValueTemplateItem {\n  granted: boolean\n  reason: string\n  resolvedInitialValue: TInitialValue\n  subtitle?: string\n  template: Template\n}\n\ntype Serializable<T> = {serialize(): T}\n\nfunction serialize<T>(item: T | Serializable<T>): T {\n  if (item && 'serialize' in item) return serialize(item.serialize())\n  return item as T\n}\n\n/** @internal */\nexport interface TemplatePermissionsOptions {\n  grantsStore: GrantsStore\n  schema: Schema\n  templates: Template[]\n  templateItems: InitialValueTemplateItem[]\n  context: InitialValueResolverContext\n}\n\n/**\n * The observable version of `useTemplatePermissions`\n *\n * @internal\n */\nexport function getTemplatePermissions({\n  grantsStore,\n  templateItems,\n  templates,\n  schema,\n  context,\n}: TemplatePermissionsOptions): Observable<\n  Array<TemplatePermissionsResult<Record<string, unknown>>>\n> {\n  if (!templateItems?.length) return of([])\n\n  return combineLatest(\n    templateItems\n      .map(serialize)\n      .map(async (item) => {\n        const template = templates.find((t) => t.id === item.templateId)\n\n        if (!template) {\n          throw new Error(`template not found: \"${item.templateId}\"`)\n        }\n\n        const resolvedInitialValue = await resolveInitialValue(\n          schema,\n          template,\n          item.parameters,\n          context\n        )\n\n        return {template, item, resolvedInitialValue}\n      })\n      .map((promise) =>\n        from(promise).pipe(\n          switchMap(({item, resolvedInitialValue, template}) => {\n            const schemaType = schema.get(template.schemaType)\n\n            if (!schemaType) {\n              throw new Error(`schema type not found: \"${template.schemaType}\"`)\n            }\n\n            const liveEdit = schemaType?.liveEdit\n            const {initialDocumentId = 'dummy-id'} = item\n\n            return getDocumentValuePermissions({\n              grantsStore,\n              permission: 'create',\n              document: {\n                _id: liveEdit ? getPublishedId(initialDocumentId) : getDraftId(initialDocumentId),\n                ...resolvedInitialValue,\n              },\n            }).pipe(\n              map(({granted, reason}) => {\n                const title = item.title || template.title\n                const result: TemplatePermissionsResult = {\n                  ...item,\n                  granted,\n                  reason,\n                  resolvedInitialValue,\n                  template,\n                  title,\n                  subtitle: schemaType.title === title ? undefined : schemaType.title,\n                  description: item.description || template.description,\n                  icon: item.icon || template.icon,\n                }\n\n                return result\n              })\n            )\n          })\n        )\n      )\n  )\n}\n\n/**\n * Takes in an array of initial template values and returns an object of\n * `TemplatePermissionsResult` keyed by the IDs of the initial template values\n * given.\n *\n * The `TemplatePermissionsResult` is an object that contains a `granted`\n * boolean per key and can be used to determine if a user has the ability to\n * create documents using the given initial value template items.\n *\n * For each initial template value item, the corresponding template is found and\n * resolved against the parameters in each the initial template value item. The\n * resolved value is then run through the document-value permissions. If there\n * are any matching grants for the resolved initial template value, the\n * `TemplatePermissionsResult` will include `granted: true`.\n *\n * @internal\n */\nexport const useTemplatePermissionsFromHookFactory =\n  createHookFromObservableFactory(getTemplatePermissions)\n\n/** @internal */\nexport function useTemplatePermissions({\n  templateItems,\n  ...rest\n}: PartialExcept<TemplatePermissionsOptions, 'templateItems'>): ReturnType<\n  typeof useTemplatePermissionsFromHookFactory\n> {\n  const schema = useSchema()\n  const templates = useTemplates()\n  const grantsStore = useGrantsStore()\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useTemplatePermissionsFromHookFactory({\n    templateItems,\n    grantsStore: rest.grantsStore || grantsStore,\n    schema: rest.schema || schema,\n    templates: rest.templates || templates,\n    context: initialValueContext,\n  })\n}\n","import {concat, of, fromEvent} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\n\nconst DEBUG_PREFIX = '_debug_'\n\nconst hashchange$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'hashchange')\n\nexport const debugParams$ = concat(of(0), hashchange$).pipe(\n  map(() => (typeof document === 'undefined' ? '#' : document.location.hash)),\n  distinctUntilChanged(),\n  map((hash) =>\n    hash\n      .substring(1)\n      .split(';')\n      .filter((p) => p.toLowerCase().startsWith(DEBUG_PREFIX))\n      .map((param) => param.substring(DEBUG_PREFIX.length))\n  )\n)\n\nexport const debugRolesParam$ = debugParams$.pipe(\n  map((args) => args.find((arg) => arg.startsWith('roles='))),\n  map(\n    (arg) =>\n      arg\n        ?.split('roles=')[1]\n        .split(',')\n        .map((r) => r.trim()) || []\n  )\n)\n","// NOTE: these example grants are used in other test files.\n// if you change this file, check to see if other files need to be updated too\nimport {Grant} from '../types'\n\nexport const administrator: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const editor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const developer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const contributor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n  {\n    filter: '_id in path(\"drafts.**\")',\n    permissions: ['create', 'history', 'update'],\n  },\n]\n\nexport const viewer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'history'],\n  },\n]\n\nexport const requiresApproval: Grant[] = [\n  {\n    filter: '!locked',\n    permissions: ['read', 'create', 'update'],\n  },\n]\n\nexport const restricted: Grant[] = [\n  {\n    filter:\n      '_id in path(\"drafts.**\") && _type in [\"stringsTest\", \"book\", \"author\", \"referenceTest\"]',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n]\n","import {map} from 'rxjs/operators'\nimport {debugRolesParam$} from '../../debugParams'\nimport {Grant} from '../types'\nimport * as grants from './exampleGrants'\nimport {ExampleRoleName} from './exampleRoles'\n\nconst DEBUG_ROLE_GRANTS_MAP: Record<ExampleRoleName, Grant[]> = {\n  // basic\n  administrator: grants.administrator,\n  editor: grants.editor,\n  developer: grants.developer,\n  contributor: grants.contributor,\n  viewer: grants.viewer,\n\n  // custom\n  restricted: grants.restricted,\n  requiresApproval: grants.requiresApproval,\n\n  // legacy\n  read: grants.viewer,\n  write: grants.editor,\n}\n\n// todo: merge other resource keys(?)\nexport const debugGrants$ = debugRolesParam$.pipe(\n  map((roles) => {\n    if (!roles.length) return null\n\n    return roles\n      .filter((value) => Boolean(value) && value in DEBUG_ROLE_GRANTS_MAP)\n      .flatMap((roleName: ExampleRoleName) => DEBUG_ROLE_GRANTS_MAP[roleName] || [])\n  })\n)\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, SanityDocument} from '@sanity/types'\nimport {evaluate, parse} from 'groq-js'\nimport {defer, of} from 'rxjs'\nimport {distinctUntilChanged, publishReplay, switchMap} from 'rxjs/operators'\nimport {refCountDelay} from 'rxjs-etc/operators'\nimport shallowEquals from 'shallow-equals'\nimport {debugGrants$} from './debug'\nimport {\n  GrantsStore,\n  DocumentValuePermission,\n  Grant,\n  PermissionCheckResult,\n  EvaluationParams,\n} from './types'\n\nasync function getDatasetGrants(\n  client: SanityClient,\n  projectId: string,\n  dataset: string\n): Promise<Grant[]> {\n  // `acl` stands for access control list and returns a list of grants\n  const grants: Grant[] = await client.request({\n    uri: `/projects/${projectId}/datasets/${dataset}/acl`,\n    tag: 'acl.get',\n    withCredentials: true,\n  })\n\n  return grants\n}\n\nfunction getParams(currentUser: CurrentUser | null): EvaluationParams {\n  const params: EvaluationParams = {}\n\n  if (currentUser !== null) {\n    params.identity = currentUser.id\n  }\n\n  return params\n}\n\nconst PARSED_FILTERS_MEMO = new Map()\nasync function matchesFilter(\n  currentUser: CurrentUser | null,\n  filter: string,\n  document: SanityDocument\n) {\n  if (!PARSED_FILTERS_MEMO.has(filter)) {\n    // note: it might be tempting to also memoize the result of the evaluation here,\n    // Currently these filters are typically evaluated whenever a document change, which means they will be evaluated\n    // quite frequently with different versions of the document. There might be some gains in finding out which subset of document\n    // properties to use as key (e.g. by looking at the parsed filter and see what properties the filter cares about)\n    // But as always, it's worth considering if the complexity/memory usage is worth the potential perf gain\n    PARSED_FILTERS_MEMO.set(filter, parse(`*[${filter}]`))\n  }\n  const parsed = PARSED_FILTERS_MEMO.get(filter)\n\n  const params = getParams(currentUser)\n  const data = await (await evaluate(parsed, {dataset: [document], params})).get()\n  return data?.length === 1\n}\n\n/** @internal */\nexport interface GrantsStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\n/** @internal */\nexport function createGrantsStore({client, currentUser}: GrantsStoreOptions): GrantsStore {\n  const versionedClient = client.withConfig({apiVersion: '2021-06-07'})\n\n  const datasetGrants$ = defer(() => of(versionedClient.config())).pipe(\n    switchMap(({projectId, dataset}) => {\n      if (!projectId || !dataset) {\n        throw new Error('Missing projectId or dataset')\n      }\n      return getDatasetGrants(versionedClient, projectId, dataset)\n    })\n  )\n\n  const currentUserDatasetGrants = debugGrants$.pipe(\n    switchMap((debugGrants) => (debugGrants ? of(debugGrants) : datasetGrants$)),\n    publishReplay(1),\n    refCountDelay(1000)\n  )\n\n  return {\n    checkDocumentPermission(permission: DocumentValuePermission, document: SanityDocument) {\n      return currentUserDatasetGrants.pipe(\n        switchMap((grants) => grantsPermissionOn(currentUser, grants, permission, document)),\n        distinctUntilChanged(shallowEquals)\n      )\n    },\n  }\n}\n\n/**\n * takes a grants object, a permission and a document\n * checks whether the the permission is granted for the given document\n */\nasync function grantsPermissionOn(\n  currentUser: CurrentUser | null,\n  grants: Grant[],\n  permission: DocumentValuePermission,\n  document: SanityDocument | null\n): Promise<PermissionCheckResult> {\n  if (!document) {\n    // we say it's granted if null due to initial states\n    return {granted: true, reason: 'Null document, nothing to check'}\n  }\n\n  if (!grants.length) {\n    return {granted: false, reason: 'No document grants'}\n  }\n\n  const matchingGrants: Grant[] = []\n\n  for (const grant of grants) {\n    if (await matchesFilter(currentUser, grant.filter, document)) {\n      matchingGrants.push(grant)\n    }\n  }\n\n  const foundMatch = matchingGrants.some((grant) => grant.permissions.some((p) => p === permission))\n\n  return {\n    granted: foundMatch,\n    reason: foundMatch ? `Matching grant` : `No matching grants found`,\n  }\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\n\ntype StreamResult = TransactionLogEventWithEffects | {error: {description?: string; type: string}}\n\nexport async function getJsonStream(\n  url: string,\n  token: string | undefined\n): Promise<ReadableStream<StreamResult>> {\n  const options: RequestInit = token\n    ? {headers: {Authorization: `Bearer ${token}`}}\n    : {credentials: 'include'}\n  const response = await fetch(url, options)\n  return getStream(response)\n}\n\nfunction getStream(response: Response): ReadableStream<StreamResult> {\n  const body = response.body\n  if (!body) {\n    throw new Error('Failed to read body from response')\n  }\n\n  let reader: ReadableStreamDefaultReader<Uint8Array>\n  let cancelled = false\n\n  return new ReadableStream<TransactionLogEventWithEffects>({\n    start(controller): void | PromiseLike<void> {\n      reader = body.getReader()\n      const decoder = new TextDecoder()\n      let buffer = ''\n\n      reader\n        .read()\n        .then(function processResult(result): void | Promise<void> {\n          if (result.done) {\n            if (cancelled) {\n              return\n            }\n\n            buffer = buffer.trim()\n            if (buffer.length === 0) {\n              controller.close()\n              return\n            }\n\n            controller.enqueue(JSON.parse(buffer))\n            controller.close()\n            return\n          }\n\n          buffer += decoder.decode(result.value, {stream: true})\n          const lines = buffer.split('\\n')\n\n          for (let i = 0; i < lines.length - 1; ++i) {\n            const line = lines[i].trim()\n            if (line.length === 0) {\n              continue\n            }\n\n            try {\n              controller.enqueue(JSON.parse(line))\n            } catch (err) {\n              controller.error(err)\n              cancelled = true\n              reader.cancel()\n              return\n            }\n          }\n\n          buffer = lines[lines.length - 1]\n\n          // eslint-disable-next-line consistent-return\n          return reader\n            .read()\n            .then(processResult)\n            .catch((err) => controller.error(err))\n        })\n        .catch((err) => controller.error(err))\n    },\n\n    cancel(): void {\n      cancelled = true\n      reader.cancel()\n    },\n  })\n}\n","import type {SanityDocument, TransactionLogEventWithEffects} from '@sanity/types'\nimport {applyPatch} from 'mendoza'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {Timeline} from './Timeline'\nimport type {DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\n\ntype VersionState = {\n  id: string\n  hasAttrs: boolean\n  attrs: Record<string, unknown> | null\n  rev: string | null\n  events: Array<DocumentRemoteMutationVersionEvent>\n  aligned: boolean\n}\n\nfunction emptyVersionState(id: string): VersionState {\n  return {\n    id,\n    hasAttrs: false,\n    attrs: null,\n    rev: null,\n    events: [],\n    aligned: false,\n  }\n}\n\nfunction align(history: TransactionLogEventWithEffects, state: VersionState): number {\n  const idx = state.events.findIndex((evt) => history.id === evt.transactionId)\n  if (idx >= 0) {\n    // Return the next event as we don't want this to be included.\n    return idx + 1\n  }\n\n  if (state.rev) {\n    return state.rev === history.id ? 0 : -1\n  }\n\n  // At this point the document doesn't exist and we were not able to match\n  // it up with a received mutation. This is a bit unfortunate as we don't\n  // have a _reliably_ way of aligning it. For now we just always assume\n  // that it's consistent.\n\n  return 0\n}\n\nfunction startFromSnapshot(state: VersionState, doc: SanityDocument) {\n  state.hasAttrs = true\n\n  if (doc) {\n    state.attrs = {...doc}\n    if (typeof state.attrs._rev != 'string') throw new Error('snapshot has no _rev')\n    state.rev = state.attrs._rev\n    delete state.attrs._rev\n  } else {\n    state.attrs = null\n    state.rev = null\n  }\n\n  state.events = []\n}\n\n/**\n * The timeline consists of data from (1) the history, (2) live draft mutations, and\n * (3) live published mutations. It's critical for us that the chain of transactions\n * is complete and without holes. The following class can be used as a layer in front\n * of Timeline to ensure this:\n *\n * - Invoke `appendRemoteSnapshotEvent` when there's an incoming remote mutation.\n *   These mutations are buffered internally and _not_ passed to the timeline quite yet.\n *\n * - Once we've received snapshots for both draft and published, then `acceptsHistory`\n *   becomes true and the caller can fetch a chunk of the translog. The flag\n *   `earliestTransactionId` can be used to figure out where to fetch transactions from.\n *\n * - The caller invokes `prependHistoryEvent` for each of the events. These history events\n *   are always pushed to the timeline and it will become available immediately.\n *\n * - Internally this class will then try to align the history event to the received\n *   mutations and then dispatch to the timeline.\n *\n * - The aligner also maintains the latest version for both the draft and the published version.\n *\n *\n */\nexport class Aligner {\n  timeline: Timeline\n  earliestTransactionId: string | null = null\n\n  constructor(timeline: Timeline) {\n    this.timeline = timeline\n    this._states = {\n      draft: emptyVersionState(timeline.draftId),\n      published: emptyVersionState(timeline.publishedId),\n    }\n  }\n\n  private _states: {\n    draft: VersionState\n    published: VersionState\n  }\n\n  appendRemoteSnapshotEvent(evt: RemoteSnapshotVersionEvent): void {\n    const state = this._states[evt.version]\n\n    if (evt.type === 'snapshot') {\n      this._maybeInvalidateHistory()\n\n      startFromSnapshot(state, evt.document)\n      return\n    }\n\n    if (evt.type === 'remoteMutation') {\n      if (state.aligned) {\n        this._apply(state, evt)\n        this.timeline.addRemoteMutation(evt)\n      } else if (state.hasAttrs) {\n        state.events.push(evt)\n      } else {\n        startFromSnapshot(state, evt.head)\n      }\n    }\n  }\n\n  prependHistoryEvent(evt: TransactionLogEventWithEffects): void {\n    if (!this.acceptsHistory) throw new Error('cannot prepend history at this point')\n\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        const idx = align(evt, state)\n\n        if (idx >= 0) {\n          this._alignAtIndex(state, idx)\n        }\n      }\n    }\n\n    this.timeline.addTranslogEntry(evt)\n    this.earliestTransactionId = evt.id\n  }\n\n  didReachEarliestEntry(): void {\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        if (state.attrs !== null) throw new Error('unable to find translog entry to align to')\n        this._alignAtIndex(state, 0)\n      }\n    }\n    this.timeline.didReachEarliestEntry()\n  }\n\n  get isAligned(): boolean {\n    return Object.values(this._states).every((state) => state.aligned)\n  }\n\n  get acceptsHistory(): boolean {\n    return this._isComplete\n  }\n\n  get currentDocument(): CombinedDocument {\n    return {draft: this._states.draft.attrs, published: this._states.published.attrs}\n  }\n\n  private _alignAtIndex(state: VersionState, idx: number) {\n    // These we must only apply locally since they are present in the fetched translog.\n    for (const mutEvt of state.events.slice(0, idx)) {\n      this._apply(state, mutEvt)\n    }\n\n    // ... while these must also be pushed to the timeline:\n    for (const mutEvt of state.events.slice(idx)) {\n      this._apply(state, mutEvt)\n      this.timeline.addRemoteMutation(mutEvt)\n    }\n\n    state.events = []\n    state.aligned = true\n  }\n\n  private get _isComplete(): boolean {\n    return Object.values(this._states).every((state) => state.hasAttrs)\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private _apply(state: VersionState, evt: DocumentRemoteMutationVersionEvent) {\n    state.attrs = applyPatch(state.attrs, evt.effects.apply as any)\n    state.rev = evt.transactionId\n  }\n\n  private _maybeInvalidateHistory() {\n    if (this._isComplete) {\n      for (const state of Object.values(this._states)) {\n        state.aligned = false\n      }\n      this.earliestTransactionId = null\n      this.timeline.reset()\n    }\n  }\n}\n","import {Diff} from '@sanity/diff'\nimport {Annotation, Chunk} from '../../../../field'\nimport {Timeline} from './Timeline'\nimport {CombinedDocument} from './types'\n\n/**\n * A reconstruction represents a single reconstruction of a\n */\nexport class Reconstruction {\n  timeline: Timeline\n  start: Chunk | null\n  end: Chunk\n  doc: CombinedDocument\n\n  constructor(timeline: Timeline, doc: CombinedDocument, start: Chunk | null, end: Chunk) {\n    this.timeline = timeline\n    this.start = start\n    this.end = end\n    this.doc = doc\n  }\n\n  same(start: Chunk | null, end: Chunk): boolean {\n    return this.start === start && this.end === end\n  }\n\n  private _startDocument?: CombinedDocument\n  private _endDocument?: CombinedDocument\n  private _diff?: Diff<Annotation>\n\n  /** Returns the attributes as seen at the end of the range. */\n  endAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.endDocument())\n  }\n\n  endDocument(): CombinedDocument {\n    if (!this._endDocument) {\n      this._endDocument = this.timeline.replayBackwardsUntil(this.end.end, this.doc)\n    }\n\n    return this._endDocument\n  }\n\n  /** Returns the attributes as seen at the end of the range. */\n  startAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.startDocument())\n  }\n\n  startDocument(): CombinedDocument {\n    if (!this.start) throw new Error('start required')\n\n    if (!this._startDocument) {\n      this._startDocument = this.timeline.replayBackwardsBetween(\n        this.start.end,\n        this.end.end - 1,\n        this.endDocument()\n      )\n    }\n\n    return this._startDocument\n  }\n\n  diff(): Diff<Annotation> {\n    if (!this._diff) {\n      if (!this.start) throw new Error('start required')\n\n      this._diff = this.timeline.calculateDiff(\n        this.startDocument(),\n        this.endDocument(),\n        this.start.index + 1,\n        this.end.index\n      )\n    }\n\n    return this._diff\n  }\n}\n\nfunction getAttrs(doc: CombinedDocument) {\n  return doc.draft || doc.published\n}\n","import type {SanityClient} from '@sanity/client'\nimport {Diff, ObjectDiff} from '@sanity/diff'\nimport {Observable} from 'rxjs'\nimport {Annotation, Chunk} from '../../../../field'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {remoteSnapshots} from '../../document/document-pair/remoteSnapshots'\nimport {Timeline, ParsedTimeRef} from './Timeline'\nimport {getJsonStream} from './getJsonStream'\nimport {Aligner} from './Aligner'\nimport {Reconstruction} from './Reconstruction'\n\nconst TRANSLOG_ENTRY_LIMIT = 50\n\n/** @beta */\nexport type TimelineControllerOptions = {\n  timeline: Timeline\n  client: SanityClient\n  documentId: string\n  documentType: string\n  handler: (err: Error | null, controller: TimelineController) => void\n}\n\n/**\n * The controller is responsible for fetching information\n * about a document and maintaining a Timeline.\n *\n * @beta\n */\nexport class TimelineController {\n  timeline: Timeline\n  client: SanityClient\n  handler: TimelineControllerOptions['handler']\n\n  version = 0\n\n  /**\n   * The selection state represents the  different states of the current selection:\n   * - inactive: No selection is active.\n   * - rev: A selection is active for a single revision.\n   * - range: A selection is active for a range and we have all the data needed to render it.\n   * - loading: A selection is active, but we don't have the entries yet.\n   * - invalid: The selection picked is invalid.\n   */\n  selectionState: 'inactive' | 'rev' | 'range' | 'loading' | 'invalid' = 'inactive'\n\n  constructor(options: TimelineControllerOptions) {\n    this.timeline = options.timeline\n    this.client = options.client\n    this.handler = options.handler\n    this._aligner = new Aligner(this.timeline)\n\n    this.markChange()\n  }\n\n  private _aligner: Aligner\n\n  private _fetchMore = false\n  private _fetchAtLeast = 0\n  private _isRunning = false\n  private _didErr = false\n\n  private _since: string | null = null\n  private _sinceTime: ParsedTimeRef | null = null\n  private _rev: string | null = null\n  private _revTime: ParsedTimeRef | null = null\n\n  private _reconstruction?: Reconstruction\n\n  clearRange(): void {\n    this.setRange(null, null)\n  }\n\n  setRange(since: string | null, rev: string | null): void {\n    if (rev !== this._rev) this.setRevTime(rev)\n    if (since !== this._since) this.setSinceTime(since)\n\n    let _fetchAtLeast = 10\n\n    if (this._sinceTime === 'loading' || this._revTime === 'loading' || !this._aligner.isAligned) {\n      this.selectionState = 'loading'\n    } else if (this._sinceTime === 'invalid' || this._revTime === 'invalid') {\n      this.selectionState = 'invalid'\n    } else if (this._sinceTime) {\n      this.selectionState = 'range'\n\n      const targetRev = this._revTime || this.timeline.lastChunk()\n\n      if (this._sinceTime.index > targetRev.index) {\n        this._revTime = 'invalid'\n        this.selectionState = 'invalid'\n      } else {\n        this.setReconstruction(this._sinceTime, targetRev)\n      }\n    } else if (this._revTime) {\n      this.selectionState = 'rev'\n      this.setReconstruction(null, this._revTime)\n    } else {\n      this.selectionState = 'inactive'\n      _fetchAtLeast = 0\n    }\n\n    this._fetchAtLeast = _fetchAtLeast\n\n    this.start()\n  }\n\n  setLoadMore(flag: boolean): void {\n    this._fetchMore = flag\n    this.start()\n  }\n\n  get sinceTime(): Chunk | null {\n    return this._sinceTime && typeof this._sinceTime === 'object' ? this._sinceTime : null\n  }\n\n  get revTime(): Chunk | null {\n    return this._revTime && typeof this._revTime === 'object' ? this._revTime : null\n  }\n\n  get realRevChunk(): Chunk {\n    return this.revTime || this.timeline.lastChunk()\n  }\n\n  /** Returns true when there's an older revision we want to render. */\n  onOlderRevision(): boolean {\n    return Boolean(this._rev) && (this.selectionState === 'range' || this.selectionState === 'rev')\n  }\n\n  /** Returns true when the changes panel should be active. */\n  changesPanelActive(): boolean {\n    return Boolean(this._since) && this.selectionState === 'range'\n  }\n\n  findRangeForNewRev(rev: Chunk): [string | null, string | null] {\n    const revTimeId = this.timeline.isLatestChunk(rev) ? null : this.timeline.createTimeId(rev)\n\n    if (!this._since) {\n      return [null, revTimeId]\n    }\n\n    const sinceChunk = this.sinceTime\n    if (sinceChunk && sinceChunk.index < rev.index) {\n      return [this._since, revTimeId]\n    }\n\n    return ['@lastPublished', revTimeId]\n  }\n\n  findRangeForNewSince(since: Chunk): [string, string | null] {\n    const revChunk = this.revTime\n\n    // If the the `since` timestamp is earlier than the `rev`, then we can\n    // accept it. Otherwise we'll move the current revision to the current draft.\n\n    if (revChunk && since.index < revChunk.index) {\n      return [this.timeline.createTimeId(since), this._rev]\n    }\n\n    return [this.timeline.createTimeId(since), null]\n  }\n\n  setRevTime(rev: string | null): void {\n    this._rev = rev\n    this._revTime = rev ? this.timeline.parseTimeId(rev) : null\n\n    if (this._since === '@lastPublished') {\n      // Make sure we invalidate it since this depends on the _rev.\n      this._since = null\n      this._sinceTime = null\n    }\n  }\n\n  setSinceTime(since: string | null): void {\n    if (since === '@lastPublished') {\n      if (typeof this._revTime === 'string') {\n        this._sinceTime = this._revTime\n      } else {\n        this._sinceTime = this.timeline.findLastPublishedBefore(this._revTime)\n      }\n    } else {\n      this._sinceTime = since ? this.timeline.parseTimeId(since) : null\n    }\n\n    this._since = since\n  }\n\n  sinceAttributes(): Record<string, unknown> | null {\n    return this._sinceTime && this._reconstruction ? this._reconstruction.startAttributes() : null\n  }\n\n  displayed(): Record<string, unknown> | null {\n    return this._revTime && this._reconstruction ? this._reconstruction.endAttributes() : null\n  }\n\n  setReconstruction(since: Chunk | null, rev: Chunk): void {\n    if (this._reconstruction && this._reconstruction.same(since, rev)) return\n    this._reconstruction = new Reconstruction(\n      this.timeline,\n      this._aligner.currentDocument,\n      since,\n      rev\n    )\n  }\n\n  currentDiff(): Diff<Annotation> | null {\n    return this._reconstruction ? this._reconstruction.diff() : null\n  }\n\n  currentObjectDiff(): ObjectDiff<Annotation> | null {\n    const diff = this.currentDiff()\n    if (diff) {\n      if (diff.type === 'null') return null\n      if (diff.type !== 'object') throw new Error(`ObjectDiff expected, got ${diff.type}`)\n    }\n\n    return diff as ObjectDiff<Annotation>\n  }\n\n  handleRemoteMutation(ev: RemoteSnapshotVersionEvent): void {\n    this._aligner.appendRemoteSnapshotEvent(ev)\n    this.markChange()\n\n    // Make sure we fetch history as soon as possible.\n    if (this._aligner.acceptsHistory) this.start()\n  }\n\n  start(): void {\n    if (this._didErr) return\n\n    if (!this._isRunning) {\n      this._isRunning = true\n\n      this.tick().then(() => {\n        this._isRunning = false\n      })\n    }\n  }\n\n  private async tick() {\n    const shouldFetchMore =\n      this._aligner.acceptsHistory &&\n      !this.timeline.reachedEarliestEntry &&\n      (this.selectionState === 'loading' ||\n        this._fetchMore ||\n        this.timeline.chunkCount <= this._fetchAtLeast)\n\n    if (!shouldFetchMore) {\n      return\n    }\n\n    try {\n      await this.fetchMoreTransactions()\n    } catch (err) {\n      this._didErr = true\n      this.handler(err, this)\n      return\n    }\n\n    await this.tick()\n  }\n\n  private async fetchMoreTransactions() {\n    const publishedId = this.timeline.publishedId\n    const draftId = this.timeline.draftId\n    const clientConfig = this.client.config()\n    const limit = TRANSLOG_ENTRY_LIMIT\n\n    let queryParams = `tag=sanity.studio.desk.history&effectFormat=mendoza&excludeContent=true&excludeMutations=true&includeIdentifiedDocumentsOnly=true&reverse=true&limit=${limit}`\n    let tid = this._aligner.earliestTransactionId\n    if (tid) {\n      queryParams += `&toTransaction=${tid}`\n    }\n\n    const transactionsUrl = this.client.getUrl(\n      `/data/history/${clientConfig.dataset}/transactions/${publishedId},${draftId}?${queryParams}`\n    )\n    const stream = await getJsonStream(transactionsUrl, clientConfig.token)\n    const reader = stream.getReader()\n    let count = 0\n\n    for (;;) {\n      // eslint-disable-next-line no-await-in-loop\n      const result = await reader.read()\n      if (result.done) break\n\n      if ('error' in result.value) {\n        throw new Error(result.value.error.description || result.value.error.type)\n      }\n\n      count++\n\n      if (result.value.id === tid) {\n        // toTransaction is inclusive so we must ignore it when we fetch the next page\n        continue\n      }\n\n      // For some reason, the aligner is now interested in a different set of entries.\n      // This can happen if a new snapshot comes in as we're streaming the translog.\n      // In this case it's safe to abort, and the run-loop will re-schedule it correctly.\n      if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n        return\n      }\n\n      this._aligner.prependHistoryEvent(result.value)\n      tid = this._aligner.earliestTransactionId\n    }\n\n    // Same consistency checking here:\n    if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n      return\n    }\n\n    if (count < limit) {\n      this._aligner.didReachEarliestEntry()\n    }\n\n    this.markChange()\n  }\n\n  private markChange() {\n    this.timeline.updateChunks()\n\n    this.setRevTime(this._rev)\n    this.setSinceTime(this._rev)\n\n    this.version++\n    this.handler(null, this)\n  }\n}\n\n/** @internal */\nexport function createObservableController(\n  options: Omit<TimelineControllerOptions, 'handler'>\n): Observable<{historyController: TimelineController}> {\n  return new Observable((observer) => {\n    const controller = new TimelineController({\n      ...options,\n      handler: (err, innerController) => {\n        if (err) {\n          observer.error(err)\n        } else {\n          observer.next({historyController: innerController})\n        }\n      },\n    })\n\n    return remoteSnapshots(\n      options.client,\n      {\n        publishedId: options.documentId,\n        draftId: `drafts.${options.documentId}`,\n      },\n      options.documentType\n    ).subscribe((ev) => {\n      controller.handleRemoteMutation(ev)\n    })\n  })\n}\n","import {Annotation} from '../../../../field'\nimport {CombinedDocument} from './types'\n\nexport function isSameAnnotation(a: Annotation, b: Annotation): boolean {\n  if (a && b) {\n    return a.author === b.author && a.chunk === b.chunk\n  }\n\n  if (!a && !b) {\n    return true\n  }\n\n  return false\n}\n\nexport function getAttrs(doc: CombinedDocument): Record<string, unknown> | null {\n  return doc.draft || doc.published\n}\n","import {incremental} from 'mendoza'\nimport {Input, ArrayInput, ObjectInput, StringInput, wrap, Diff, diffInput} from '@sanity/diff'\nimport {Annotation, Chunk} from '../../../../field'\nimport {Timeline} from './Timeline'\nimport {isSameAnnotation} from './utils'\n\nexport type Meta = {chunk: Chunk; transactionIndex: number} | null\n\nexport type AnnotationExtractor = {\n  fromValue(value: incremental.Value<Meta>): Annotation\n  fromMeta(meta: Meta): Annotation\n}\n\nclass ArrayContentWrapper implements ArrayInput<Annotation> {\n  type = 'array' as const\n  value: unknown[]\n  length: number\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ArrayContent<Meta>\n  private elements: Input<Annotation>[] = []\n\n  constructor(\n    content: incremental.ArrayContent<Meta>,\n    value: unknown[],\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.length = content.elements.length\n  }\n\n  at(idx: number) {\n    if (idx >= this.length) throw new Error('out of bounds')\n    const input = this.elements[idx]\n    if (input) {\n      return input\n    }\n    return (this.elements[idx] = wrapValue(\n      this.content.elements[idx],\n      this.value[idx],\n      this.extractor\n    ))\n  }\n\n  annotationAt(idx: number): Annotation {\n    const meta = this.content.metas[idx]\n    return this.extractor.fromMeta(meta)\n  }\n}\n\nclass ObjectContentWrapper implements ObjectInput<Annotation> {\n  type = 'object' as const\n  value: Record<string, unknown>\n  keys: string[]\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ObjectContent<Meta>\n  private fields: Record<string, Input<Annotation>> = {}\n\n  constructor(\n    content: incremental.ObjectContent<Meta>,\n    value: Record<string, unknown>,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.keys = Object.keys(content.fields)\n  }\n\n  get(key: string) {\n    const input = this.fields[key]\n    if (input) {\n      return input\n    }\n    const value = this.content.fields[key]\n    if (!value) return undefined\n    return (this.fields[key] = wrapValue(value, this.value[key], this.extractor))\n  }\n}\n\nclass StringContentWrapper implements StringInput<Annotation> {\n  type = 'string' as const\n  value: string\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.StringContent<Meta>\n\n  constructor(\n    content: incremental.StringContent<Meta>,\n    value: string,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n  }\n\n  sliceAnnotation(start: number, end: number): {text: string; annotation: Annotation}[] {\n    const result: {text: string; annotation: Annotation}[] = []\n    let idx = 0\n\n    function push(text: string, annotation: Annotation) {\n      if (result.length > 0) {\n        const lst = result[result.length - 1]\n        if (isSameAnnotation(lst.annotation, annotation)) {\n          lst.text += text\n          return\n        }\n      }\n\n      result.push({text, annotation})\n    }\n\n    for (const part of this.content.parts) {\n      const length = part.value.length\n\n      const subStart = Math.max(0, start - idx)\n      if (subStart < length) {\n        // The start of the slice is inside this part somewhere.\n\n        // Figure out where the end is:\n        const subEnd = Math.min(length, end - idx)\n\n        // If the end of the slice is before this part, then we're guaranteed\n        // that there are no more parts.\n        if (subEnd <= 0) break\n\n        push(part.value.slice(subStart, subEnd), this.extractor.fromValue(part))\n      }\n\n      idx += length\n    }\n\n    return result\n  }\n}\n\nfunction wrapValue(\n  value: incremental.Value<Meta>,\n  raw: unknown,\n  extractor: AnnotationExtractor\n): Input<Annotation> {\n  const annotation = extractor.fromValue(value)\n\n  if (value.content) {\n    switch (value.content.type) {\n      case 'array':\n        return new ArrayContentWrapper(value.content, raw as unknown[], annotation, extractor)\n      case 'object':\n        return new ObjectContentWrapper(\n          value.content,\n          raw as Record<string, unknown>,\n          annotation,\n          extractor\n        )\n      case 'string':\n        return new StringContentWrapper(value.content, raw as string, annotation, extractor)\n      default:\n      // do nothing\n    }\n  }\n\n  return wrap(raw, annotation)\n}\n\nfunction extractAnnotationForFromInput(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  meta: Meta\n): Annotation {\n  if (meta) {\n    // The next transaction is where it disappeared:\n    return annotationForTransactionIndex(timeline, meta.transactionIndex + 1, meta.chunk.index)\n  } else if (firstChunk) {\n    return annotationForTransactionIndex(timeline, firstChunk.start, firstChunk.index)\n  }\n\n  return null\n}\n\nfunction extractAnnotationForToInput(timeline: Timeline, meta: Meta): Annotation {\n  if (meta) {\n    return annotationForTransactionIndex(timeline, meta.transactionIndex, meta.chunk.index)\n  }\n\n  return null\n}\n\nfunction annotationForTransactionIndex(timeline: Timeline, idx: number, chunkIdx?: number) {\n  const tx = timeline.transactionByIndex(idx)\n  if (!tx) return null\n\n  const chunk = timeline.chunkByTransactionIndex(idx, chunkIdx)\n  if (!chunk) return null\n\n  return {\n    chunk,\n    timestamp: tx.timestamp,\n    author: tx.author,\n  }\n}\n\n// eslint-disable-next-line max-params\nexport function diffValue(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  from: incremental.Value<Meta>,\n  fromRaw: unknown,\n  to: incremental.Value<Meta>,\n  toRaw: unknown\n): Diff<Annotation> {\n  const fromInput = wrapValue(from, fromRaw, {\n    fromValue(value) {\n      return extractAnnotationForFromInput(timeline, firstChunk, value.endMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForFromInput(timeline, firstChunk, meta)\n    },\n  })\n\n  const toInput = wrapValue(to, toRaw, {\n    fromValue(value) {\n      return extractAnnotationForToInput(timeline, value.startMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForToInput(timeline, meta)\n    },\n  })\n  return diffInput(fromInput, toInput)\n}\n","export type Merger<T> = (left: T, right: T) => T | [T, T]\n\n/**\n * The two ended array supports pushing both at the beginning and\n * at the end while preserving indicies.\n */\nexport class TwoEndedArray<T extends {index: number}> {\n  private _postive: T[] = []\n  private _negative: T[] = []\n\n  addToEnd(elem: T): void {\n    elem.index = this._postive.length\n    this._postive.push(elem)\n  }\n\n  addToBeginning(elem: T): void {\n    // Prefer to place things at the positive side if possible.\n    if (this.length == 0) {\n      this.addToEnd(elem)\n      return\n    }\n\n    elem.index = -(this._negative.length + 1)\n    this._negative.push(elem)\n  }\n\n  mergeAtEnd(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.lastIdx\n    const result = merger(this.get(idx), value)\n    if (Array.isArray(result)) {\n      this.set(idx, result[0])\n      this.addToEnd(result[1])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  mergeAtBeginning(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.firstIdx\n    const result = merger(value, this.get(idx))\n    if (Array.isArray(result)) {\n      this.set(idx, result[1])\n      this.addToBeginning(result[0])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  removeFromEnd(): void {\n    if (this._postive.length === 0) {\n      this._negative.shift()\n    } else {\n      this._postive.pop()\n    }\n  }\n\n  has(idx: number): boolean {\n    if (idx >= 0) {\n      return idx < this._postive.length\n    }\n\n    return -(idx + 1) < this._negative.length\n  }\n\n  get(idx: number): T {\n    if (idx >= 0) {\n      return this._postive[idx]\n    }\n\n    return this._negative[-(idx + 1)]\n  }\n\n  set(idx: number, value: T): void {\n    if (idx >= 0) {\n      value.index = idx\n      this._postive[idx] = value\n    } else {\n      value.index = idx\n      this._negative[-(idx + 1)] = value\n    }\n  }\n\n  get lastIdx(): number {\n    // Note: This also works correctly when _positive is empty (it returns -1)\n    return this._postive.length - 1\n  }\n\n  get last(): T {\n    return this.get(this.lastIdx)\n  }\n\n  get firstIdx(): number {\n    // Note: This also works correctly when _negative is empty (it returns 0)\n    return -this._negative.length\n  }\n\n  get first(): T {\n    return this.get(this.firstIdx)\n  }\n\n  get length(): number {\n    return this._postive.length + this._negative.length\n  }\n}\n","/* eslint-disable no-nested-ternary */\nimport type {MendozaEffectPair, MendozaPatch} from '@sanity/types'\nimport {Chunk, ChunkType} from '../../../../field'\nimport type {Transaction} from './types'\n\nfunction canMergeEdit(type: ChunkType) {\n  return type === 'create' || type === 'editDraft'\n}\n\nconst CHUNK_WINDOW = 5 * 60 * 1000 // 5 minutes\n\nfunction isWithinMergeWindow(a: string, b: string) {\n  return Date.parse(b) - Date.parse(a) < CHUNK_WINDOW\n}\n\nexport function mergeChunk(left: Chunk, right: Chunk): Chunk | [Chunk, Chunk] {\n  if (left.end !== right.start) throw new Error('chunks are not next to each other')\n\n  // TODO: How to detect first squash/create\n\n  const draftState = combineState(left.draftState, right.draftState)\n  const publishedState = combineState(left.publishedState, right.publishedState)\n\n  if (left.type === 'delete' && right.type === 'editDraft') {\n    return [left, {...right, type: 'create', draftState, publishedState}]\n  }\n\n  // Convert deletes into either discardDraft or unpublish depending on what's been deleted.\n  if (right.type === 'delete') {\n    if (draftState === 'missing' && publishedState === 'present') {\n      return [left, {...right, type: 'discardDraft', draftState, publishedState}]\n    }\n\n    if (draftState === 'present' && publishedState === 'missing') {\n      return [left, {...right, type: 'unpublish', draftState, publishedState}]\n    }\n  }\n\n  if (\n    canMergeEdit(left.type) &&\n    right.type === 'editDraft' &&\n    isWithinMergeWindow(left.endTimestamp, right.startTimestamp)\n  ) {\n    const authors = new Set<string>()\n    for (const author of left.authors) authors.add(author)\n    for (const author of right.authors) authors.add(author)\n\n    return {\n      index: 0,\n      id: right.id,\n      type: left.type,\n      start: left.start,\n      end: right.end,\n      startTimestamp: left.startTimestamp,\n      endTimestamp: right.endTimestamp,\n      authors,\n      draftState,\n      publishedState,\n    }\n  }\n\n  return [left, {...right, draftState, publishedState}]\n}\n\ntype ChunkState = 'unedited' | 'deleted' | 'upsert'\nfunction getChunkState(effect?: MendozaEffectPair): ChunkState {\n  const modified = Boolean(effect)\n  const deleted = effect && isDeletePatch(effect?.apply)\n\n  if (deleted) {\n    return 'deleted'\n  }\n\n  if (modified) {\n    return 'upsert'\n  }\n\n  return 'unedited'\n}\n\n/*\n * getChunkType tries to determine what effect the given transaction had on the document\n * More information about the logic can be found here https://github.com/sanity-io/sanity/pull/2633#issuecomment-886461812\n *\n * |                    | draft unedited | draft deleted | draft upsert |\n * |--------------------|----------------|---------------|--------------|\n * | published unedited | X              | delete        | editDraft    |\n * | published deleted  | delete         | delete        | delete       |\n * | published upsert   | liveEdit       | publish       | liveEdit     |\n */\nfunction getChunkType(transaction: Transaction): ChunkType {\n  const draftState = getChunkState(transaction.draftEffect)\n  const publishedState = getChunkState(transaction.publishedEffect)\n\n  if (publishedState === 'unedited') {\n    if (draftState === 'deleted') {\n      return 'delete'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editDraft'\n    }\n  }\n\n  if (publishedState === 'deleted') {\n    return 'delete'\n  }\n\n  if (publishedState === 'upsert') {\n    if (draftState === 'unedited') {\n      return 'editLive'\n    }\n\n    if (draftState === 'deleted') {\n      return 'publish'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editLive'\n    }\n  }\n\n  return 'editLive'\n}\n\nexport function chunkFromTransaction(transaction: Transaction): Chunk {\n  const modifiedDraft = Boolean(transaction.draftEffect)\n  const modifiedPublished = Boolean(transaction.publishedEffect)\n\n  const draftDeleted = transaction.draftEffect && isDeletePatch(transaction.draftEffect.apply)\n  const publishedDeleted =\n    transaction.publishedEffect && isDeletePatch(transaction.publishedEffect.apply)\n\n  const type = getChunkType(transaction)\n\n  return {\n    index: 0,\n    id: transaction.id,\n    type,\n    start: transaction.index,\n    end: transaction.index + 1,\n    startTimestamp: transaction.timestamp,\n    endTimestamp: transaction.timestamp,\n    authors: new Set([transaction.author]),\n    draftState: modifiedDraft ? (draftDeleted ? 'missing' : 'present') : 'unknown',\n    publishedState: modifiedPublished ? (publishedDeleted ? 'missing' : 'present') : 'unknown',\n  }\n}\n\nfunction combineState(\n  left: 'present' | 'missing' | 'unknown',\n  right: 'present' | 'missing' | 'unknown'\n) {\n  return right === 'unknown' ? left : right\n}\n\nexport function isDeletePatch(patch: MendozaPatch): boolean {\n  return patch[0] === 0 && patch[1] === null\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\nimport {Diff} from '@sanity/diff'\nimport {applyPatch, incremental} from 'mendoza'\nimport {Chunk, Annotation} from '../../../../field'\nimport {Transaction, DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\nimport {diffValue, Meta} from './diffValue'\nimport {TwoEndedArray} from './TwoEndedArray'\nimport {mergeChunk, chunkFromTransaction} from './chunker'\nimport {TraceEvent} from './replay'\nimport {getAttrs} from './utils'\n\n/** @beta */\nexport type ParsedTimeRef = Chunk | 'loading' | 'invalid'\n\n/** @beta */\nexport interface TimelineOptions {\n  publishedId: string\n  enableTrace?: boolean\n}\n\n/**\n * Timeline maintains information about the history of a document:\n * Grouping raw translog entries into sensible groups, replaying and\n * reconstructing different versions and abstract other details.\n *\n * Note that this class by itself is not capable of _fetching_ information,\n * but will only organize and structure the incoming translog entries.\n *\n * @beta\n */\nexport class Timeline {\n  reachedEarliestEntry = false\n\n  publishedId: string\n  draftId: string\n  private _transactions = new TwoEndedArray<Transaction>()\n  private _chunks = new TwoEndedArray<Chunk>()\n\n  // These two properties are here to handle the case\n  private _possiblePendingTransactions = new Map<\n    string,\n    {\n      transaction: Transaction\n      idx: number\n    }\n  >()\n  private _recreateTransactionsFrom?: number\n  private _trace?: TraceEvent[]\n\n  constructor(opts: TimelineOptions) {\n    this.publishedId = opts.publishedId\n    this.draftId = `drafts.${opts.publishedId}`\n\n    if (opts.enableTrace) {\n      this._trace = []\n      this._trace.push({\n        type: 'initial',\n        publishedId: opts.publishedId,\n      })\n      ;(window as any).__sanityTimelineTrace = this._trace\n    }\n  }\n\n  get chunkCount(): number {\n    return this._chunks.length\n  }\n\n  /** Maps over the chunk from newest to oldest. */\n  mapChunks<T>(mapper: (chunk: Chunk, idx: number) => T): T[] {\n    const result: T[] = []\n\n    const firstIdx = this._chunks.firstIdx\n    const lastIdx = this._chunks.lastIdx\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      result.push(mapper(this._chunks.get(idx), idx))\n    }\n\n    return result\n  }\n\n  reset(): void {\n    this._transactions = new TwoEndedArray()\n    this._chunks = new TwoEndedArray()\n    this._possiblePendingTransactions = new Map()\n    this._recreateTransactionsFrom = undefined\n    this.reachedEarliestEntry = false\n  }\n\n  /**\n   * Adds a remote mutation to the timeline. This methods assumes that the remote mutations\n   * come in correct order for their respective version, but has no ordering requirements\n   * across draft/published.\n   *\n   * Example: [D1, D2, P1] (where D1 and P1 were mutations done to the draft and published\n   * version in the same transaction) is a valid input. [P1, D2, D1] is _not_ valid since\n   * the mutation for the draft is out of order.\n   */\n  addRemoteMutation(entry: DocumentRemoteMutationVersionEvent): void {\n    if (this._trace) this._trace.push({type: 'addRemoteMutation', event: entry})\n\n    const pending = this._possiblePendingTransactions.get(entry.transactionId)\n\n    const transaction: Transaction = pending\n      ? pending.transaction\n      : {\n          index: 0,\n          id: entry.transactionId,\n          timestamp: entry.timestamp.toISOString(),\n          author: entry.author,\n        }\n\n    if (entry.version === 'draft') {\n      transaction.draftEffect = entry.effects as any\n    } else {\n      transaction.publishedEffect = entry.effects as any\n    }\n\n    if (pending) {\n      this._possiblePendingTransactions.delete(entry.transactionId)\n      this._invalidateTransactionFrom(pending.idx)\n    } else {\n      this._transactions.addToEnd(transaction)\n      this._possiblePendingTransactions.set(entry.transactionId, {\n        transaction,\n        idx: this._transactions.lastIdx,\n      })\n    }\n  }\n\n  addTranslogEntry(event: TransactionLogEventWithEffects): void {\n    if (this._trace) this._trace.push({type: 'addTranslogEntry', event})\n\n    this._transactions.addToBeginning({\n      index: 0,\n      id: event.id,\n      author: event.author,\n      timestamp: event.timestamp,\n      draftEffect: event.effects[this.draftId],\n      publishedEffect: event.effects[this.publishedId],\n    })\n  }\n\n  /** Mark that we've reached the earliest entry. */\n  didReachEarliestEntry(): void {\n    if (this._trace) this._trace.push({type: 'didReachEarliestEntry'})\n\n    this.reachedEarliestEntry = true\n  }\n\n  /**\n   * updateChunks synchronizes the chunks to match the current state\n   * of the transactions array. After calling this method you need\n   * to invalidate all Chunks.\n   */\n  updateChunks(): void {\n    if (this._trace) this._trace.push({type: 'updateChunks'})\n\n    this._removeInvalidatedChunks()\n    this._addChunksFromTransactions()\n    this._createInitialChunk()\n  }\n\n  private _removeInvalidatedChunks() {\n    if (this._recreateTransactionsFrom) {\n      while (this._chunks.length > 0) {\n        const chunk = this._chunks.last\n        if (this._recreateTransactionsFrom < chunk.end) {\n          this._chunks.removeFromEnd()\n        } else {\n          break\n        }\n      }\n      this._recreateTransactionsFrom = undefined\n    }\n  }\n\n  private _addChunksFromTransactions() {\n    const firstIdx = this._transactions.firstIdx\n    const lastIdx = this._transactions.lastIdx\n\n    // Add transactions at the end:\n    const nextTransactionToChunk = this._chunks.length > 0 ? this._chunks.last.end : firstIdx\n    for (let idx = nextTransactionToChunk; idx <= lastIdx; idx++) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtEnd(chunkFromTransaction(transaction), mergeChunk)\n    }\n\n    // Add transactions at the beginning:\n    if (this._chunks.length == 0) return\n\n    const firstTransactionChunked = this._chunks.first.start\n\n    for (let idx = firstTransactionChunked - 1; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtBeginning(chunkFromTransaction(transaction), mergeChunk)\n    }\n  }\n\n  private _invalidateTransactionFrom(idx: number) {\n    if (this._recreateTransactionsFrom === undefined || idx < this._recreateTransactionsFrom) {\n      this._recreateTransactionsFrom = idx\n    }\n  }\n\n  private _createInitialChunk() {\n    if (this.reachedEarliestEntry) {\n      if (this._chunks.first?.type === 'initial') return\n\n      const firstTx = this._transactions.first\n      if (!firstTx) return\n      const initialChunk = chunkFromTransaction(firstTx)\n      initialChunk.type = 'initial'\n      initialChunk.id = '@initial'\n      initialChunk.end = initialChunk.start\n      this._chunks.addToBeginning(initialChunk)\n    }\n  }\n\n  /**\n   * Resolves a time reference.\n   *\n   * Note that the chunk returned is only valid if the timeline stays constant.\n   * Once the timeline is updated, you must re-parse all references.\n   */\n  parseTimeId(id: string): ParsedTimeRef {\n    if (this._chunks.length === 0) {\n      return this.reachedEarliestEntry ? 'invalid' : 'loading'\n    }\n\n    // NOTE:\n    // This was refactored from\n    // ```\n    // const [timestampStr, chunkId] = id.split('/', 3)\n    // ```\n    // in order to avoid issues with `@microsoft/api-extractor`.\n    const idSegments = id.split('/', 3)\n    const timestampStr = idSegments.shift()\n    const chunkId = idSegments.shift()\n    const timestamp = Number(timestampStr)\n\n    for (let idx = this._chunks.lastIdx; idx >= this._chunks.firstIdx; idx--) {\n      const chunk = this._chunks.get(idx)\n      if (chunk.id === chunkId) {\n        return chunk\n      }\n\n      if (Date.parse(chunk.endTimestamp) + 60 * 60 * 1000 < timestamp) {\n        // The chunk ended _before_ the timestamp we're asking for. This means that there\n        // is no point in looking further and the chunk is invalid.\n\n        // We add 1 hour to allow some slack since transactions are not guaranteed to be in order.\n        return 'invalid'\n      }\n    }\n\n    return this.reachedEarliestEntry ? 'invalid' : 'loading'\n  }\n\n  findLastPublishedBefore(chunk: Chunk | null): ParsedTimeRef {\n    for (\n      let chunkIdx = chunk ? chunk.index - 1 : this._chunks.lastIdx;\n      chunkIdx >= this._chunks.firstIdx;\n      chunkIdx--\n    ) {\n      const currentChunk = this._chunks.get(chunkIdx)\n      if (currentChunk.type === 'publish' || currentChunk.type === 'initial') {\n        return currentChunk\n      }\n    }\n\n    if (!this.reachedEarliestEntry) return 'loading'\n\n    return this._chunks.first\n  }\n\n  isLatestChunk(chunk: Chunk): boolean {\n    return chunk === this._chunks.last\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  createTimeId(chunk: Chunk): string {\n    return `${chunk.endTimestamp.valueOf()}/${chunk.id}`\n  }\n\n  lastChunk(): Chunk {\n    return this._chunks.last\n  }\n\n  transactionByIndex(idx: number): Transaction | null {\n    if (!this._transactions.has(idx)) return null\n    return this._transactions.get(idx)\n  }\n\n  chunkByTransactionIndex(idx: number, startChunkIdx = 0): Chunk {\n    let chunkIdx = startChunkIdx\n    for (;;) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!chunk) throw new Error('transaction does not belong in any chunk')\n\n      if (idx >= chunk.end) {\n        chunkIdx++\n      } else if (idx < chunk.start) {\n        chunkIdx--\n      } else {\n        return chunk\n      }\n    }\n  }\n\n  replayBackwardsBetween(\n    firstIdx: number,\n    lastIdx: number,\n    doc: CombinedDocument\n  ): CombinedDocument {\n    let draft = doc.draft\n    let published = doc.published\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n\n      if (transaction.draftEffect) {\n        draft = applyPatch(draft, transaction.draftEffect.revert)\n      }\n\n      if (transaction.publishedEffect) {\n        published = applyPatch(published, transaction.publishedEffect.revert)\n      }\n    }\n\n    return {draft, published}\n  }\n\n  replayBackwardsUntil(firstIdx: number, doc: CombinedDocument): CombinedDocument {\n    return this.replayBackwardsBetween(firstIdx, this._transactions.lastIdx, doc)\n  }\n\n  calculateDiff(\n    initialDoc: CombinedDocument,\n    finalDoc: CombinedDocument,\n    firstIdx: number,\n    lastIdx: number\n  ): Diff<Annotation> {\n    let draftValue = incremental.wrap<Meta>(initialDoc.draft, null)\n    let publishedValue = incremental.wrap<Meta>(initialDoc.published, null)\n\n    const initialValue = getValue(draftValue, publishedValue)\n    const initialAttributes = getAttrs(initialDoc)\n    let firstChunk: Chunk | null = null\n\n    // Loop over all of the chunks:\n    for (let chunkIdx = firstIdx; chunkIdx <= lastIdx; chunkIdx++) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!firstChunk) firstChunk = chunk\n\n      for (let idx = chunk.start; idx < chunk.end; idx++) {\n        const transaction = this._transactions.get(idx)\n\n        const meta = {\n          chunk,\n          transactionIndex: idx,\n        }\n\n        const preDraftValue = draftValue\n        const prePublishedValue = publishedValue\n\n        if (transaction.draftEffect) {\n          draftValue = incremental.applyPatch(draftValue, transaction.draftEffect.apply, meta)\n        }\n\n        if (transaction.publishedEffect) {\n          publishedValue = incremental.applyPatch(\n            publishedValue,\n            transaction.publishedEffect.apply,\n            meta\n          )\n        }\n\n        const didHaveDriaft = incremental.getType(preDraftValue) !== 'null'\n        const haveDraft = incremental.getType(draftValue) !== 'null'\n        const havePublished = incremental.getType(publishedValue) !== 'null'\n\n        if (havePublished && !haveDraft) {\n          publishedValue = incremental.rebaseValue(preDraftValue, publishedValue)\n        }\n\n        if (haveDraft && !didHaveDriaft) {\n          draftValue = incremental.rebaseValue(prePublishedValue, draftValue)\n        }\n      }\n    }\n\n    const finalValue = incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n    const finalAttributes = getAttrs(finalDoc)\n\n    return diffValue(this, firstChunk, initialValue, initialAttributes, finalValue, finalAttributes)\n  }\n}\n\nfunction getValue(draftValue: incremental.Value<Meta>, publishedValue: incremental.Value<Meta>) {\n  return incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n}\n","import type {SanityClient} from '@sanity/client'\nimport {\n  isReference,\n  Reference,\n  SanityDocument,\n  TransactionLogEventWithMutations,\n} from '@sanity/types'\nimport {reduce as jsonReduce} from 'json-reduce'\nimport {from, Observable} from 'rxjs'\nimport {map, mergeMap} from 'rxjs/operators'\nimport {getDraftId, getPublishedId, isRecord} from '../../../util'\nimport {Timeline, TimelineController, createObservableController} from './history'\n\n/** @beta */\nexport interface HistoryStore {\n  getDocumentAtRevision: (\n    documentId: string,\n    revision: string\n  ) => Promise<SanityDocument | undefined>\n\n  getHistory: (\n    documentIds: string[],\n    options?: {time?: string; revision?: string}\n  ) => Promise<{documents: SanityDocument[]}>\n\n  getTransactions: (documentIds: string[]) => Promise<TransactionLogEventWithMutations[]>\n\n  restore: (id: string, targetId: string, rev: string) => Observable<SanityDocument>\n\n  /** @internal */\n  getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => Timeline\n\n  /** @internal */\n  getTimelineController: (options: {\n    client: SanityClient\n    documentId: string\n    documentType: string\n    timeline: Timeline\n  }) => Observable<{historyController: TimelineController}>\n}\n\nconst documentRevisionCache: Record<string, Promise<SanityDocument | undefined> | undefined> =\n  Object.create(null)\n\nconst getHistory = (\n  client: SanityClient,\n  documentIds: string[],\n  options: {time?: string; revision?: string} = {}\n): Promise<{documents: SanityDocument[]}> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const {time, revision} = options\n\n  if (time && revision) {\n    throw new Error(`getHistory can't handle both time and revision parameters`)\n  }\n\n  const dataset = client.clientConfig.dataset\n  let url = `/data/history/${dataset}/documents/${ids.join(',')}`\n\n  if (revision) {\n    url = `${url}?revision=${revision}`\n  } else {\n    const timestamp = time || new Date().toISOString()\n\n    url = `${url}?time=${timestamp}`\n  }\n\n  return client.request({url})\n}\n\nconst getDocumentAtRevision = (\n  client: SanityClient,\n  documentId: string,\n  revision: string\n): Promise<SanityDocument | undefined> => {\n  const publishedId = getPublishedId(documentId)\n  const draftId = getDraftId(documentId)\n  const cacheKey = `${publishedId}@${revision}`\n  const cached = documentRevisionCache[cacheKey]\n  if (cached) {\n    return cached\n  }\n\n  const dataset = client.clientConfig.dataset\n  const url = `/data/history/${dataset}/documents/${publishedId},${draftId}?revision=${revision}`\n\n  const entry = client.request<{documents?: SanityDocument[]}>({url}).then((result) => {\n    const documents = result.documents || []\n    const published = documents.find((res) => res._id === publishedId)\n    const draft = documents.find((res) => res._id === draftId)\n    return draft || published\n  })\n\n  documentRevisionCache[cacheKey] = entry\n  return entry\n}\n\nconst getTransactions = async (\n  client: SanityClient,\n  documentIds: string | string[]\n): Promise<TransactionLogEventWithMutations[]> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const dataset = client.clientConfig.dataset\n  const query = {excludeContent: 'true', includeIdentifiedDocumentsOnly: 'true'}\n  const url = `/data/history/${dataset}/transactions/${ids.join(',')}`\n  const result = await client.request({url, query})\n  const transactions = result\n    .toString('utf8')\n    .split('\\n')\n    .filter(Boolean)\n    .map((line: string) => JSON.parse(line))\n\n  return transactions\n}\n\nconst getAllRefIds = (doc: SanityDocument): string[] =>\n  jsonReduce(\n    doc as any,\n    (acc: any, node) => (isReference(node) && !acc.includes(node._ref) ? [...acc, node._ref] : acc),\n    []\n  )\n\nfunction jsonMap(value: unknown, mapFn: any): any {\n  if (Array.isArray(value)) {\n    return mapFn(\n      value.map((item) => jsonMap(item, mapFn)).filter((item) => typeof item !== 'undefined')\n    )\n  }\n\n  if (isRecord(value)) {\n    return mapFn(\n      Object.keys(value).reduce<Record<string, unknown>>((res, key) => {\n        const mappedValue = jsonMap(value[key], mapFn)\n        if (typeof mappedValue !== 'undefined') {\n          res[key] = mappedValue\n        }\n\n        return res\n      }, {})\n    )\n  }\n\n  return mapFn(value)\n}\n\nconst mapRefNodes = (doc: SanityDocument, mapFn: (node: Reference) => Reference | undefined) =>\n  jsonMap(doc, (node: unknown) => (isReference(node) ? mapFn(node) : node))\n\n/** @internal */\nexport const removeMissingReferences = (\n  doc: SanityDocument,\n  existingIds: Record<string, boolean | undefined>\n): SanityDocument =>\n  mapRefNodes(doc, (refNode) => {\n    const documentExists = existingIds[refNode._ref]\n    return documentExists ? refNode : undefined\n  })\n\nfunction restore(client: SanityClient, documentId: string, targetDocumentId: string, rev: string) {\n  return from(getDocumentAtRevision(client, documentId, rev)).pipe(\n    mergeMap((documentAtRevision) => {\n      if (!documentAtRevision) {\n        throw new Error(`Unable to find document with ID ${documentId} at revision ${rev}`)\n      }\n\n      const existingIdsQuery = getAllRefIds(documentAtRevision)\n        .map((refId) => `\"${refId}\": defined(*[_id==\"${refId}\"]._id)`)\n        .join(',')\n\n      return client.observable\n        .fetch<Record<string, boolean | undefined>>(`{${existingIdsQuery}}`)\n        .pipe(map((existingIds) => removeMissingReferences(documentAtRevision, existingIds)))\n    }),\n    map((documentAtRevision) => {\n      // Remove _updatedAt and create a new draft from the document at given revision\n      const {_updatedAt, ...document} = documentAtRevision\n      return {...document, _id: targetDocumentId}\n    }),\n    mergeMap((restoredDraft) =>\n      client.observable.createOrReplace(restoredDraft, {visibility: 'async'})\n    )\n  )\n}\n\n/** @internal */\nexport interface HistoryStoreOptions {\n  client: SanityClient\n}\n\n/** @internal */\nexport function createHistoryStore({client}: HistoryStoreOptions): HistoryStore {\n  return {\n    getDocumentAtRevision: (documentId, revision) =>\n      getDocumentAtRevision(client, documentId, revision),\n\n    getHistory: (documentIds, options) => getHistory(client, documentIds, options),\n\n    getTransactions: (documentIds) => getTransactions(client, documentIds),\n\n    restore: (id, targetId, rev) => restore(client, id, targetId, rev),\n\n    getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => new Timeline(options),\n\n    getTimelineController: (options: {\n      client: SanityClient\n      documentId: string\n      documentType: string\n      timeline: Timeline\n    }) => createObservableController(options),\n  }\n}\n","import {defer, timer} from 'rxjs'\nimport {map, mergeMapTo, shareReplay} from 'rxjs/operators'\nimport {sample} from 'lodash'\nimport {StateEvent} from './message-transports/transport'\n\nconst USERIDS = [\n  'pqSMwf6hH',\n  'pnLYqNfv5',\n  'priDVVmy8',\n  'p0NFOU0j8',\n  'pTDl2jw8d',\n  'pHMeQnTse',\n  'pDQYzJbyS',\n  'pZyoPHKUs',\n  'p4Tyi2Be5',\n  'pb9vii060',\n  'pE8yhOisw',\n  'p7Fd2C6Cj',\n  'p3exSgYCx',\n  'pbIQRYViC',\n  'p8GJaTEhN',\n  'p27ewL8aM',\n  'pYg97z75S',\n  'pdLr4quHv',\n  'pkJXiDgg6',\n  'pkl4UAKcA',\n\n  // Included to ensure we handle the case when a user profile cannot\n  // be fetched due to insufficient privileges or similar\n  'pNoExists',\n]\n\nconst PATHS = [\n  ['nested', 'first'],\n  ['nested', 'second'],\n  [\n    'nestedArray',\n    {_key: '565c867c8dac'},\n    'arrayNo1',\n    {_key: 'a645548a8f01'},\n    'arrayNo1',\n    {_key: '1685e372c40f'},\n    'fieldNo0',\n  ],\n  ['nestedArray', {_key: '565c867c8dac'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo19'],\n  ['address', 'country'],\n  ['address', 'street'],\n  ['customInputWithDefaultPresence', 'row3', 'cell3'],\n]\n\nexport const mock$ = defer(() => timer(0, 10000)).pipe(\n  mergeMapTo(USERIDS),\n  map(\n    (id, n): StateEvent => ({\n      type: 'state',\n      userId: id,\n      sessionId: id + n,\n      timestamp: new Date().toISOString(),\n      locations: [\n        {\n          type: 'document',\n          documentId: 'presence-debug',\n          lastActiveAt: new Date().toISOString(),\n          path: sample(PATHS),\n        },\n      ] as any,\n    })\n  ),\n  shareReplay()\n)\n","import {Observable, EMPTY} from 'rxjs'\nimport {map, share} from 'rxjs/operators'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {PresenceLocation} from '../types'\nimport {Transport, TransportEvent, TransportMessage} from './transport'\n\ntype BifurStateMessage = {\n  type: 'state'\n  i: string\n  m: {\n    sessionId: string\n    locations: PresenceLocation[]\n  }\n}\n\ntype BifurDisconnectMessage = {\n  type: 'disconnect'\n  i: string\n  m: {session: string}\n}\n\ntype RollCallEvent = {\n  type: 'rollCall'\n  i: string\n  session: string\n}\n\ntype IncomingBifurEvent<T> = RollCallEvent | BifurStateMessage | BifurDisconnectMessage\n\nconst handleIncomingMessage = (event: IncomingBifurEvent<Location[]>): TransportEvent => {\n  if (event.type === 'rollCall') {\n    return {\n      type: 'rollCall',\n      userId: event.i,\n      sessionId: event.session,\n    }\n  }\n  if (event.type === 'state') {\n    const {sessionId, locations} = event.m\n    return {\n      type: 'state',\n      userId: event.i,\n      sessionId: sessionId,\n      timestamp: new Date().toISOString(),\n      locations,\n    }\n  }\n\n  if (event.type === 'disconnect') {\n    return {\n      type: 'disconnect',\n      userId: event.i,\n      sessionId: event.m.session,\n      timestamp: new Date().toISOString(),\n    }\n  }\n\n  throw new Error(`Got unknown presence event: ${JSON.stringify(event)}`)\n}\n\nexport const createBifurTransport = (bifur: BifurClient, sessionId: string): Transport => {\n  const incomingEvents$: Observable<TransportEvent> = bifur\n    .request<IncomingBifurEvent<Location[]>>('presence')\n    .pipe(map(handleIncomingMessage))\n\n  const dispatchMessage = (message: TransportMessage): Observable<undefined> => {\n    if (message.type === 'rollCall') {\n      return bifur.request('presence_rollcall', {session: sessionId})\n    }\n\n    if (message.type === 'state') {\n      return bifur.request('presence_announce', {\n        data: {locations: message.locations, sessionId},\n      })\n    }\n\n    if (message.type === 'disconnect') {\n      return bifur.request('presence_disconnect', {session: sessionId})\n    }\n\n    return EMPTY\n  }\n\n  return [incomingEvents$.pipe(share()), dispatchMessage]\n}\n","/* eslint-disable camelcase */\n\nimport {BehaviorSubject, defer, EMPTY, from, fromEvent, merge, NEVER, Observable, timer} from 'rxjs'\nimport {\n  auditTime,\n  distinctUntilChanged,\n  filter,\n  flatMap,\n  map,\n  mergeMapTo,\n  scan,\n  share,\n  shareReplay,\n  switchMap,\n  switchMapTo,\n  takeUntil,\n  tap,\n  toArray,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {flatten, groupBy, omit, uniq} from 'lodash'\nimport {nanoid} from 'nanoid'\nimport {User} from '@sanity/types'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {debugParams$} from '../debugParams'\nimport {ConnectionStatusStore} from '../connection-status/connection-status-store'\nimport {UserStore} from '../user'\nimport {\n  DisconnectEvent,\n  RollCallEvent,\n  StateEvent,\n  TransportEvent,\n} from './message-transports/transport'\nimport {mock$} from './mock-events'\nimport {createBifurTransport} from './message-transports/bifurTransport'\nimport {DocumentPresence, GlobalPresence, PresenceLocation, Session, UserSessionPair} from './types'\n\n/** @beta */\nexport interface PresenceStore {\n  /**\n   * @internal\n   */\n  documentPresence: (documentId: string) => Observable<DocumentPresence[]>\n\n  /**\n   * @internal\n   */\n  globalPresence$: Observable<GlobalPresence[]>\n\n  /**\n   * @internal\n   */\n  reportLocations: (locations: PresenceLocation[]) => Observable<void>\n\n  /**\n   * @internal\n   */\n  setLocation: (nextLocation: PresenceLocation[]) => void\n\n  /**\n   * @internal\n   */\n  debugPresenceParam$: Observable<string[]>\n}\n\nconst KEY = 'presence_session_id'\nconst generate = () => nanoid(16)\n\n// We're keeping the session id in sessionStorage as it will survive page reloads.\n// todo:\n//  There's a potential issue with window.open(...) here as it inherits the top level session storage and thus will\n//  re-use session ids:\n//    > Opening a page in a new tab or window creates a new session with the value of the top-level browsing context,\n//      which differs from how session cookies work.\n//      More at https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\n//  This is _probably_ a quite marginal case and not going to be much of a issue in practice\nfunction getSessionId() {\n  try {\n    return window.sessionStorage.getItem(KEY)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return null\n}\n\nfunction setSessionId(id: string) {\n  try {\n    window.sessionStorage.setItem(KEY, id)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return id\n}\n\n/** @internal */\nexport const SESSION_ID = getSessionId() || setSessionId(generate())\n\n/** @internal */\nexport function __tmp_wrap_presenceStore(context: {\n  bifur: BifurClient\n  connectionStatusStore: ConnectionStatusStore\n  userStore: UserStore\n}): PresenceStore {\n  const {bifur, connectionStatusStore, userStore} = context\n\n  const [presenceEvents$, sendMessage] = createBifurTransport(bifur, SESSION_ID)\n\n  const currentLocation$ = new BehaviorSubject<PresenceLocation[]>([])\n  const locationChange$ = currentLocation$.pipe(distinctUntilChanged())\n\n  // export\n  const setLocation = (nextLocation: PresenceLocation[]) => {\n    currentLocation$.next(nextLocation)\n  }\n\n  // export\n  const reportLocations = (locations: PresenceLocation[]) =>\n    sendMessage({type: 'state', locations: locations})\n\n  const requestRollCall = () => sendMessage({type: 'rollCall'})\n\n  const rollCallRequests$ = presenceEvents$.pipe(\n    filter((event: TransportEvent): event is RollCallEvent => event.type === 'rollCall'),\n    // do not respond to my own rollcall requests\n    filter((event: RollCallEvent) => event.sessionId !== SESSION_ID)\n  )\n\n  const REPORT_MIN_INTERVAL = 30000\n\n  // Interval to report my own location at\n  const reportLocationInterval$ = timer(0, REPORT_MIN_INTERVAL)\n\n  const reportLocation$ = defer(() => merge(locationChange$, rollCallRequests$)).pipe(\n    switchMap(() => reportLocationInterval$),\n    withLatestFrom(currentLocation$),\n    map(([, locations]) => locations),\n    auditTime(200),\n    switchMap((locations) => reportLocations(locations)),\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  // This represents my rollcall request to other clients\n  // Note: We are requesting a rollcall whenever we (re)connect\n  const myRollCall$ = defer(() => requestRollCall()).pipe(mergeMapTo(EMPTY))\n\n  const connectionChange$ = connectionStatusStore.connectionStatus$.pipe(\n    map((status) => status.type),\n    filter((statusType) => statusType === 'connected' || statusType === 'error'),\n    distinctUntilChanged()\n  )\n\n  // export\n  const debugPresenceParam$ = debugParams$.pipe(\n    map((args) => args.find((arg) => arg.startsWith('presence='))),\n    map(\n      (arg) =>\n        arg\n          ?.split('presence=')[1]\n          .split(',')\n          .map((r) => r.trim()) || []\n    )\n  )\n\n  const useMock$ = debugPresenceParam$.pipe(\n    filter((args) => args.includes('fake_others')),\n    tap(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        'Faking other users present in the studio. They will hang out in the document with _type: \"presence\" and _id: \"presence-debug\"'\n      )\n    }),\n    switchMapTo(mock$)\n  )\n\n  const debugIntrospect$ = debugPresenceParam$.pipe(map((args) => args.includes('show_own')))\n\n  const syncEvent$ = merge(myRollCall$, presenceEvents$).pipe(\n    filter(\n      (event: TransportEvent): event is StateEvent | DisconnectEvent =>\n        event.type === 'state' || event.type === 'disconnect'\n    )\n  )\n\n  const stateEventToSession = (stateEvent: StateEvent): Session => {\n    return {\n      lastActiveAt: stateEvent.timestamp,\n      locations: stateEvent.locations,\n      sessionId: stateEvent.sessionId,\n      userId: stateEvent.userId,\n    }\n  }\n\n  const states$: Observable<{[sessionId: string]: Session}> = merge(syncEvent$, useMock$).pipe(\n    scan(\n      (keyed, event: StateEvent | DisconnectEvent): {[sessionId: string]: Session} =>\n        event.type === 'disconnect'\n          ? omit(keyed, event.sessionId)\n          : {...keyed, [event.sessionId]: stateEventToSession(event)},\n      {}\n    )\n  )\n\n  const allSessions$: Observable<UserSessionPair[]> = connectionChange$.pipe(\n    switchMap((status) => (status === 'connected' ? merge(states$, reportLocation$) : NEVER)),\n    map((keyedSessions) => Object.values(keyedSessions)),\n    switchMap((sessions) => {\n      const userIds = uniq(sessions.map((sess) => sess.userId))\n      return from(userStore.getUsers(userIds)).pipe(\n        map((users) =>\n          sessions\n            .map((session) => ({\n              // eslint-disable-next-line max-nested-callbacks\n              user: users.find((res) => res.id === session.userId),\n              session: session,\n            }))\n            // If we failed to find a user profile for a session, remove it\n            .filter(userSessionPairHasUser)\n        )\n      )\n    }),\n    takeUntil(\n      fromEvent(window, 'beforeunload').pipe(switchMap(() => sendMessage({type: 'disconnect'})))\n    ),\n    shareReplay({refCount: true, bufferSize: 1})\n  )\n\n  function userSessionPairHasUser(pair: Partial<UserSessionPair>): pair is UserSessionPair {\n    return Boolean(pair.user && pair.session)\n  }\n\n  // export\n  const globalPresence$: Observable<GlobalPresence[]> = allSessions$.pipe(\n    map((sessions): {user: User; sessions: Session[]}[] => {\n      const grouped = groupBy(\n        sessions.map((s) => s.session),\n        (e) => e.userId\n      )\n\n      return Object.keys(grouped).map((userId): {user: User; sessions: Session[]} => ({\n        user: sessions.find((s) => s.user.id === userId)?.user as User,\n        sessions: grouped[userId],\n      }))\n    }),\n    withLatestFrom(debugIntrospect$),\n    map(([userAndSessions, debugIntrospect]) =>\n      userAndSessions.filter((userAndSession) => {\n        if (debugIntrospect) {\n          return true\n        }\n\n        const isCurrent = userAndSession.sessions.some((sess) => sess.sessionId === SESSION_ID)\n\n        return !isCurrent\n      })\n    ),\n    map((userAndSessions) =>\n      userAndSessions.map((userAndSession) => ({\n        user: userAndSession.user,\n        status: 'online',\n        lastActiveAt: userAndSession.sessions.sort()[0]?.lastActiveAt,\n        locations: flatten(\n          (userAndSession.sessions || []).map((session) => session.locations || [])\n        )\n          .map((location) => ({\n            type: location.type,\n            documentId: location.documentId,\n            path: location.path,\n            lastActiveAt: location.lastActiveAt,\n          }))\n          .reduce((prev, curr) => prev.concat(curr), [] as PresenceLocation[]),\n      }))\n    )\n  )\n\n  // export\n  const documentPresence = (documentId: string): Observable<DocumentPresence[]> => {\n    return allSessions$.pipe(\n      withLatestFrom(debugIntrospect$),\n      switchMap(([userAndSessions, debugIntrospect]) =>\n        from(userAndSessions).pipe(\n          filter(\n            (userAndSession) => debugIntrospect || userAndSession.session.sessionId !== SESSION_ID\n          ),\n          flatMap((userAndSession) =>\n            (userAndSession.session.locations || [])\n              .filter((item) => item.documentId === documentId)\n              .map((location) => ({\n                user: userAndSession.user,\n                lastActiveAt: userAndSession.session.lastActiveAt,\n                path: location.path || [],\n                sessionId: userAndSession.session.sessionId,\n              }))\n          ),\n          toArray()\n        )\n      )\n    )\n  }\n\n  return {setLocation, reportLocations, debugPresenceParam$, globalPresence$, documentPresence}\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {GlobalPresence} from './types'\n\n/** @internal */\nexport function useGlobalPresence(): GlobalPresence[] {\n  const [presence, setPresence] = useState<GlobalPresence[]>([])\n  const presenceStore = usePresenceStore()\n\n  useEffect(() => {\n    const subscription = presenceStore.globalPresence$.subscribe(setPresence)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [presenceStore])\n\n  return presence\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {DocumentPresence} from './types'\n\n/** @internal */\nexport function useDocumentPresence(documentId: string): DocumentPresence[] {\n  const presenceStore = usePresenceStore()\n  const [presence, setPresence] = useState<DocumentPresence[]>([])\n\n  useEffect(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe(setPresence)\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [documentId, presenceStore])\n\n  return presence\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {ProjectData, ProjectStore} from './types'\n\n/** @internal */\nexport function createProjectStore(context: {client: SanityClient}): ProjectStore {\n  const {client} = context\n  const projectId = client.config().projectId\n  const versionedClient = client.withConfig({apiVersion: '2021-12-15'})\n\n  function get(): Observable<ProjectData> {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}`,\n    })\n  }\n\n  function getDatasets() {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}/datasets`,\n    })\n  }\n\n  return {get, getDatasets}\n}\n","import {useEffect, useState} from 'react'\nimport {useProjectStore} from '../datastores'\nimport {ProjectData} from './types'\n\n/** @internal */\nexport function useProject(): {value: ProjectData | null} {\n  const projectStore = useProjectStore()\n  const [value, setValue] = useState<ProjectData | null>(null)\n\n  useEffect(() => {\n    const project$ = projectStore.get()\n    const sub = project$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [projectStore])\n\n  return {value}\n}\n","import {useEffect, useState} from 'react'\nimport {useProjectStore} from '../datastores'\nimport {ProjectDatasetData} from './types'\n\n/** @internal */\nexport function useProjectDatasets(): {value: ProjectDatasetData[] | null} {\n  const projectStore = useProjectStore()\n  const [value, setValue] = useState<ProjectDatasetData[] | null>(null)\n\n  useEffect(() => {\n    const project$ = projectStore.getDatasets()\n    const sub = project$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [projectStore])\n\n  return {value}\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst tryParse = (val: string, defValue: unknown) => {\n  try {\n    return JSON.parse(val)\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(`Failed to parse settings: ${err.message}`)\n    return defValue\n  }\n}\n\nconst get = (key: string, defValue: unknown): Observable<unknown> => {\n  const val = localStorage.getItem(key)\n\n  return observableOf(val === null ? defValue : tryParse(val, defValue))\n}\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  // Can't stringify undefined, and nulls are what\n  // `getItem` returns when key does not exist\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    localStorage.removeItem(key)\n  } else {\n    localStorage.setItem(key, JSON.stringify(nextValue))\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const localStorageBackend: Backend = {get, set}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst DB = Object.create(null)\n\nconst get = (key: string, defValue: unknown): Observable<unknown> =>\n  observableOf(key in DB ? DB[key] : defValue)\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    delete DB[key]\n  } else {\n    DB[key] = nextValue\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const memoryBackend: Backend = {get, set}\n","import {localStorageBackend} from './localStorage'\nimport {memoryBackend} from './memory'\nimport {Backend} from './types'\n\nlet isSupported: boolean | null = null\nfunction supportsLocalStorage() {\n  if (isSupported !== null) {\n    return isSupported\n  }\n\n  const testKey = '__test__'\n  try {\n    localStorage.setItem(testKey, testKey)\n    localStorage.removeItem(testKey)\n    isSupported = true\n  } catch (evt) {\n    isSupported = false\n  }\n\n  return isSupported\n}\n\nexport function resolveBackend(): Backend {\n  return supportsLocalStorage() ? localStorageBackend : memoryBackend\n}\n","import {merge, Observable, Subject} from 'rxjs'\nimport {filter, map, switchMap} from 'rxjs/operators'\nimport {resolveBackend} from './backends/resolve'\nimport {Settings, SettingsStore} from './types'\n\n/** @internal */\nexport function createSettingsStore(): SettingsStore {\n  const storageBackend = resolveBackend()\n\n  const set$ = new Subject<{key: string; value: unknown}>()\n\n  const prefixNamespace = (ns: string, key: string) => `${ns}::${key}`\n\n  const updates$ = set$.pipe(\n    switchMap((event) =>\n      storageBackend.set(event.key, event.value).pipe(\n        map((nextValue) => ({\n          key: event.key,\n          value: nextValue,\n        }))\n      )\n    )\n  )\n\n  const listen = (key: string, defValue: unknown): Observable<unknown> => {\n    return merge(\n      storageBackend.get(key, defValue),\n      updates$.pipe(\n        filter((update) => update.key === key),\n        map((update) => update.value)\n      )\n    )\n  }\n\n  const set = (key: string, value: unknown) => {\n    set$.next({key, value})\n  }\n\n  const forNamespace = (ns: string): Settings => {\n    return {\n      forKey: (key: string) => {\n        const namespacedKey = prefixNamespace(ns, key)\n\n        return {\n          listen: (defaultValue: unknown) => listen(namespacedKey, defaultValue),\n          set: (value: unknown) => set(namespacedKey, value),\n          del: () => set(namespacedKey, undefined),\n        }\n      },\n      listen: (key: string, defaultValue: unknown) => {\n        return listen(prefixNamespace(ns, key), defaultValue)\n      },\n      set: (key: string, value: unknown) => {\n        return set(prefixNamespace(ns, key), value)\n      },\n      del: (key: string) => {\n        return set(prefixNamespace(ns, key), undefined)\n      },\n      forNamespace: (sub: string) => {\n        return forNamespace(prefixNamespace(ns, sub))\n      },\n    }\n  }\n\n  return {forNamespace}\n}\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, User} from '@sanity/types'\nimport DataLoader from 'dataloader'\nimport raf from 'raf'\nimport {isRecord} from '../../../util'\n\n/** @internal */\nexport interface UserStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\n/** @beta */\nexport interface UserStore {\n  getUser(userId: string): Promise<User | null>\n  getUsers(userIds: string[]): Promise<User[]>\n}\n\n/**\n * Given a `client` and a `currentUser` creates a datastore that handles\n * fetching, batch fetching, and caching users.\n *\n * @internal\n */\nexport function createUserStore({client: _client, currentUser}: UserStoreOptions): UserStore {\n  const client = _client.withConfig({apiVersion: '2021-06-07'})\n\n  const userLoader = new DataLoader<string, User | null>(\n    async (userIds) => {\n      const value = await client.request<(User | null)[]>({\n        uri: `/users/${userIds.join(',')}`,\n        withCredentials: true,\n        tag: 'users.get',\n      })\n      const response = Array.isArray(value) ? value : [value]\n      const users = response.reduce((acc, next) => {\n        if (next?.id) {\n          acc[next.id] = next\n        }\n        return acc\n      }, {} as Record<string, User | null>)\n      return userIds.map((id) => users[id] || null)\n    },\n    {batchScheduleFn: (cb) => raf(cb)}\n  )\n\n  const userFromCurrentUser: User | null = currentUser && {\n    id: currentUser.id,\n    displayName: currentUser.name,\n    imageUrl: currentUser.profileImage,\n  }\n\n  userLoader.prime('me', userFromCurrentUser)\n\n  if (userFromCurrentUser?.id) {\n    userLoader.prime(userFromCurrentUser.id, userFromCurrentUser)\n  }\n\n  return {\n    getUser: (userId) => userLoader.load(userId),\n    getUsers: async (userIds) => {\n      const results = await userLoader.loadMany(userIds)\n      // remove `Error`s from the the results\n      return results.filter(\n        (result): result is User => isRecord(result) && typeof result.id === 'string'\n      )\n    },\n  }\n}\n","/* eslint-disable camelcase */\n\nimport {useMemo} from 'react'\nimport {useClient, useSchema, useTemplates} from '../../hooks'\nimport {createDocumentPreviewStore, DocumentPreviewStore} from '../../preview'\nimport {useSource, useWorkspace} from '../../studio'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {useCurrentUser} from '../user'\nimport {\n  ConnectionStatusStore,\n  createConnectionStatusStore,\n} from './connection-status/connection-status-store'\nimport {createDocumentStore, DocumentStore} from './document'\nimport {createGrantsStore, GrantsStore} from './grants'\nimport {createHistoryStore, HistoryStore} from './history'\nimport {PresenceStore, __tmp_wrap_presenceStore} from './presence'\nimport {createProjectStore, ProjectStore} from './project'\nimport {useResourceCache} from './ResourceCacheProvider'\nimport {createSettingsStore, SettingsStore} from './settings'\nimport {createUserStore, UserStore} from './user'\n\n/** @beta */\nexport function useUserStore(): UserStore {\n  const {getClient, currentUser} = useSource()\n  const resourceCache = useResourceCache()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  return useMemo(() => {\n    const userStore =\n      resourceCache.get<UserStore>({\n        namespace: 'userStore',\n        dependencies: [client, currentUser],\n      }) || createUserStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'userStore',\n      dependencies: [client, currentUser],\n      value: userStore,\n    })\n\n    return userStore\n  }, [client, currentUser, resourceCache])\n}\n\n/** @beta */\nexport function useGrantsStore(): GrantsStore {\n  const {getClient} = useSource()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const currentUser = useCurrentUser()\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const grantsStore =\n      resourceCache.get<GrantsStore>({\n        namespace: 'grantsStore',\n        dependencies: [client, currentUser],\n      }) || createGrantsStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'grantsStore',\n      dependencies: [client, currentUser],\n      value: grantsStore,\n    })\n\n    return grantsStore\n  }, [client, currentUser, resourceCache])\n}\n\n/** @beta */\nexport function useHistoryStore(): HistoryStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const historyStore =\n      resourceCache.get<HistoryStore>({\n        namespace: 'historyStore',\n        dependencies: [client],\n      }) || createHistoryStore({client})\n\n    resourceCache.set({\n      namespace: 'historyStore',\n      dependencies: [client],\n      value: historyStore,\n    })\n\n    return historyStore\n  }, [client, resourceCache])\n}\n\n/** @beta */\nexport function useDocumentPreviewStore(): DocumentPreviewStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const documentPreviewStore =\n      resourceCache.get<DocumentPreviewStore>({\n        namespace: 'documentPreviewStore',\n        dependencies: [client],\n      }) || createDocumentPreviewStore({client})\n\n    resourceCache.set({\n      namespace: 'documentPreviewStore',\n      dependencies: [client],\n      value: documentPreviewStore,\n    })\n\n    return documentPreviewStore\n  }, [client, resourceCache])\n}\n\n/** @beta */\nexport function useDocumentStore(): DocumentStore {\n  const getClient = useSource().getClient\n  const schema = useSchema()\n  const templates = useTemplates()\n  const resourceCache = useResourceCache()\n  const historyStore = useHistoryStore()\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  return useMemo(() => {\n    const documentStore =\n      resourceCache.get<DocumentStore>({\n        namespace: 'documentStore',\n        dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      }) ||\n      createDocumentStore({\n        getClient,\n        documentPreviewStore,\n        historyStore,\n        initialValueTemplates: templates,\n        schema,\n      })\n\n    resourceCache.set({\n      namespace: 'documentStore',\n      dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      value: documentStore,\n    })\n\n    return documentStore\n  }, [getClient, documentPreviewStore, historyStore, resourceCache, schema, templates])\n}\n\n/** @internal */\nexport function useConnectionStatusStore(): ConnectionStatusStore {\n  const {bifur} = useSource().__internal\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const connectionStatusStore =\n      resourceCache.get<ConnectionStatusStore>({\n        namespace: 'connectionStatusStore',\n        dependencies: [bifur],\n      }) || createConnectionStatusStore({bifur})\n\n    resourceCache.set({\n      namespace: 'connectionStatusStore',\n      dependencies: [bifur],\n      value: connectionStatusStore,\n    })\n\n    return connectionStatusStore\n  }, [bifur, resourceCache])\n}\n\n/** @beta */\nexport function usePresenceStore(): PresenceStore {\n  const {\n    __internal: {bifur},\n  } = useSource()\n  const resourceCache = useResourceCache()\n  const userStore = useUserStore()\n  const connectionStatusStore = useConnectionStatusStore()\n\n  return useMemo(() => {\n    const presenceStore =\n      resourceCache.get<PresenceStore>({\n        namespace: 'presenceStore',\n        dependencies: [bifur, connectionStatusStore, userStore],\n      }) || __tmp_wrap_presenceStore({bifur, connectionStatusStore, userStore})\n\n    resourceCache.set({\n      namespace: 'presenceStore',\n      dependencies: [bifur, connectionStatusStore, userStore],\n      value: presenceStore,\n    })\n\n    return presenceStore\n  }, [bifur, connectionStatusStore, resourceCache, userStore])\n}\n\n/** @beta */\nexport function useProjectStore(): ProjectStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const projectStore =\n      resourceCache.get<ProjectStore>({\n        namespace: 'projectStore',\n        dependencies: [client],\n      }) || createProjectStore({client})\n\n    resourceCache.set({\n      namespace: 'projectStore',\n      dependencies: [client],\n      value: projectStore,\n    })\n\n    return projectStore\n  }, [client, resourceCache])\n}\n\n/** @internal */\nexport function useSettingsStore(): SettingsStore {\n  const resourceCache = useResourceCache()\n  const workspace = useWorkspace()\n\n  return useMemo(() => {\n    const settingsStore =\n      resourceCache.get<SettingsStore>({\n        dependencies: [workspace],\n        namespace: 'settingsStore',\n      }) || createSettingsStore()\n\n    resourceCache.set({\n      dependencies: [workspace],\n      namespace: 'settingsStore',\n      value: settingsStore,\n    })\n\n    return settingsStore\n  }, [resourceCache, workspace])\n}\n","import {Avatar, AvatarPosition, AvatarSize, AvatarStatus, Box, Text, Tooltip} from '@sanity/ui'\nimport React, {forwardRef, useState} from 'react'\nimport type {User} from '@sanity/types'\nimport {useUser} from '../store'\nimport {isRecord} from '../util'\nimport {useUserColor} from '../user-color'\n\n/** @beta */\nexport interface UserAvatarProps {\n  animateArrowFrom?: AvatarPosition\n  position?: AvatarPosition\n  size?: AvatarSize\n  status?: AvatarStatus\n  tone?: 'navbar'\n  user: User | string\n  withTooltip?: boolean\n}\n\nconst symbols = /[^\\p{Alpha}\\p{White_Space}]/gu\nconst whitespace = /\\p{White_Space}+/u\n\nconst LEGACY_TO_UI_AVATAR_SIZES: {[key: string]: AvatarSize | undefined} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n}\n\nfunction nameToInitials(fullName: string) {\n  const namesArray = fullName.replace(symbols, '').split(whitespace)\n\n  if (namesArray.length === 1) {\n    return `${namesArray[0].charAt(0)}`.toUpperCase()\n  }\n\n  return `${namesArray[0].charAt(0)}${namesArray[namesArray.length - 1].charAt(0)}`\n}\n\n/** @beta */\nexport function UserAvatar(props: UserAvatarProps) {\n  const {user, ...restProps} = props\n\n  if (isRecord(user)) {\n    if (restProps.withTooltip) {\n      return <TooltipUserAvatar {...restProps} user={user as User} />\n    }\n\n    return <StaticUserAvatar {...restProps} user={user as User} />\n  }\n\n  return <UserAvatarLoader {...props} user={user as string} />\n}\n\nfunction TooltipUserAvatar(props: Omit<UserAvatarProps, 'user'> & {user: User}) {\n  const {\n    user: {displayName},\n  } = props\n\n  return (\n    <Tooltip\n      content={\n        <Box padding={2}>\n          <Text size={1}>{displayName}</Text>\n        </Box>\n      }\n      placement=\"top\"\n      portal\n    >\n      <div style={{display: 'inline-block'}}>\n        <StaticUserAvatar {...props} />\n      </div>\n    </Tooltip>\n  )\n}\n\nconst StaticUserAvatar = forwardRef(function StaticUserAvatar(\n  props: Omit<UserAvatarProps, 'user'> & {user: User},\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {user, animateArrowFrom, position, size, status, tone} = props\n  const [imageLoadError, setImageLoadError] = useState<null | Error>(null)\n  const userColor = useUserColor(user.id)\n  const imageUrl = imageLoadError ? undefined : user?.imageUrl\n\n  return (\n    <Avatar\n      animateArrowFrom={animateArrowFrom}\n      arrowPosition={position}\n      color={userColor.name}\n      data-legacy-tone={tone}\n      initials={user?.displayName && nameToInitials(user.displayName)}\n      src={imageUrl}\n      onImageLoadError={setImageLoadError}\n      ref={ref}\n      size={typeof size === 'string' ? LEGACY_TO_UI_AVATAR_SIZES[size] : size}\n      status={status}\n    />\n  )\n})\n\nfunction UserAvatarLoader({user, ...loadedProps}: Omit<UserAvatarProps, 'user'> & {user: string}) {\n  const [value] = useUser(user)\n\n  if (!value) {\n    // @todo How do we handle this?\n    return null\n  }\n\n  return <UserAvatar {...loadedProps} user={value} />\n}\n","import {SanityDocument} from '@sanity/types'\nimport {withPropsStream} from 'react-props-stream'\nimport {concat, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {DocumentStore} from '../store'\n\n/** @internal */\nexport const WithReferringDocuments = withPropsStream(\n  connect,\n  function _WithReferringDocuments({children, ...props}) {\n    return children(props)\n  }\n)\n\nfunction connect(\n  receivedProps$: Observable<{\n    children: (props: {\n      documentStore: DocumentStore\n      id: string\n      isLoading: boolean\n      referringDocuments: SanityDocument[]\n    }) => React.ReactElement\n    documentStore: DocumentStore\n    id: string\n  }>\n) {\n  return receivedProps$.pipe(\n    distinctUntilChanged((prev, next) => prev.id === next.id),\n    switchMap((receivedProps) =>\n      concat(\n        of({...receivedProps, referringDocuments: [], isLoading: true}),\n        receivedProps.documentStore\n          .listenQuery(\n            '*[references($docId)] [0...101]',\n            {docId: receivedProps.id},\n            {tag: 'with-referring-documents'}\n          )\n          .pipe(\n            map((docs: any[]) => ({\n              ...receivedProps,\n              referringDocuments: docs,\n              isLoading: false,\n            }))\n          )\n      )\n    )\n  )\n}\n","import {ActionHook} from './types'\n\nconst actionIds = new WeakMap<ActionHook<any, any>, string>()\n\nlet counter = 0\n\n/** @internal */\nexport function getHookId<T, K>(actionHook: ActionHook<T, K>): string {\n  const cachedId = actionIds.get(actionHook)\n\n  if (cachedId) return cachedId\n\n  const id = `${actionHook.name || (actionHook as any).displayName || '<anonymous>'}-${counter++}`\n\n  actionIds.set(actionHook, id)\n\n  return id\n}\n","import React, {memo, useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\n\nfunction useShallowCompareMemoize<T>(value: T): Array<T | undefined> {\n  const ref = useRef<T | undefined>(undefined)\n\n  if (!shallowEquals(value, ref.current)) {\n    ref.current = value\n  }\n\n  return [ref.current]\n}\n\nfunction useShallowCompareEffect(callback: React.EffectCallback, dependencies: any) {\n  useEffect(callback, useShallowCompareMemoize(dependencies))\n}\n\n/** @internal */\nexport const HookStateContainer = memo(\n  function HookStateContainer(props: any) {\n    const {hook, args, id, onNext, onReset, onRequestUpdate} = props\n\n    const hookState = hook({\n      ...args,\n      onComplete: () => {\n        onReset(id)\n      },\n    })\n\n    useShallowCompareEffect(() => {\n      onNext(id, hookState)\n      onRequestUpdate()\n      return () => {\n        onNext(id, null)\n        onRequestUpdate()\n      }\n    }, hookState)\n\n    return null\n  },\n  (prev, next) => prev.args === next.args\n)\n","const requestIdleCallbackShim: Window['requestIdleCallback'] = (callback) => {\n  const start = Date.now()\n\n  return setTimeout(() => {\n    callback({\n      didTimeout: false,\n      timeRemaining() {\n        return Math.max(0, Date.now() - start)\n      },\n    })\n  }, 1) as unknown as ReturnType<Window['requestIdleCallback']>\n}\n\nconst cancelIdleCallbackShim: Window['cancelIdleCallback'] = (handle: unknown) => {\n  return clearTimeout(handle as any)\n}\n\nconst _requestIdleCallback =\n  typeof requestIdleCallback === 'undefined' ? requestIdleCallbackShim : requestIdleCallback\nconst _cancelIdleCallback =\n  typeof cancelIdleCallback === 'undefined' ? cancelIdleCallbackShim : cancelIdleCallbackShim\n\nexport {_requestIdleCallback as requestIdleCallback}\nexport {_cancelIdleCallback as cancelIdleCallback}\n","import type {ThrottleSettings} from 'lodash'\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {isNonNullable, useThrottledCallback} from '../../util'\nimport {getHookId} from './actionId'\nimport {HookStateContainer} from './HookStateContainer'\nimport {cancelIdleCallback, requestIdleCallback} from './requestIdleCallback'\nimport {ActionHook} from './types'\n\n/** @internal */\nexport interface GetHookCollectionStateProps<T, K> {\n  args: T\n  children: (props: {states: K[]}) => React.ReactNode\n  hooks: ActionHook<T, K>[]\n  onReset?: () => void\n}\n\nconst throttleOptions: ThrottleSettings = {trailing: true}\n\n/** @internal */\nexport function GetHookCollectionState<T, K>(props: GetHookCollectionStateProps<T, K>) {\n  const {hooks, args, children, onReset} = props\n\n  const statesRef = useRef<Record<string, {value: K}>>({})\n  const [tickId, setTick] = useState(0)\n\n  const [keys, setKeys] = useState<Record<string, number>>({})\n\n  const ricHandle = useRef<number | null>(null)\n\n  const handleRequestUpdate = useCallback(() => {\n    if (ricHandle.current) {\n      cancelIdleCallback(ricHandle.current)\n    }\n\n    ricHandle.current = requestIdleCallback(() => {\n      ricHandle.current = null\n\n      setTick((tick) => tick + 1)\n    })\n  }, [])\n\n  const handleRequestUpdateThrottled = useThrottledCallback(\n    handleRequestUpdate,\n    60,\n    throttleOptions\n  )\n\n  const handleNext = useCallback((id: any, hookState: any) => {\n    if (hookState === null) {\n      delete statesRef.current[id]\n    } else {\n      const current = statesRef.current[id]\n      statesRef.current[id] = {...current, value: hookState}\n    }\n  }, [])\n\n  const handleReset = useCallback(\n    (id: any) => {\n      setKeys((currentKeys) => ({...currentKeys, [id]: (currentKeys[id] || 0) + 1}))\n\n      if (onReset) {\n        onReset()\n      }\n    },\n    [onReset]\n  )\n\n  const hookIds = useMemo(() => hooks.map((hook) => getHookId(hook)), [hooks])\n\n  const states = useMemo(\n    () => hookIds.map((id) => statesRef.current[id]?.value).filter(isNonNullable),\n    [hookIds, tickId]\n  )\n\n  return (\n    <>\n      {hooks.map((hook) => {\n        const id = getHookId(hook)\n        const key = keys[id] || 0\n\n        return (\n          <HookStateContainer\n            key={`${id}-${key}`}\n            hook={hook}\n            id={id}\n            args={args}\n            onNext={handleNext}\n            onRequestUpdate={handleRequestUpdateThrottled}\n            onReset={handleReset}\n          />\n        )\n      })}\n\n      {children({states})}\n    </>\n  )\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Container,\n  Flex,\n  focusFirstDescendant,\n  Popover,\n  PopoverProps,\n  ResponsiveWidthProps,\n  Text,\n} from '@sanity/ui'\nimport React, {HTMLProps, useEffect, useRef} from 'react'\n\n/** @internal */\nexport function PopoverDialog(\n  props: Omit<PopoverProps, 'content' | 'width'> &\n    Omit<HTMLProps<HTMLDivElement>, 'ref' | 'width'> & {\n      header?: React.ReactNode\n      onClose: () => void\n      width?: ResponsiveWidthProps['width']\n    }\n) {\n  const {children, header, onClose, width, ...restProps} = props\n  const containerRef = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    focusFirstDescendant(containerRef.current!)\n  }, [])\n\n  // Note: if you come here to attempt to add support for Escape to close and/or clickOutside to close, please read this first:\n  //  - Escape must work with nested dialogs/popover. So if you have an array inside here that opens its items in another a popover,\n  //    hitting escape should only close the topmost dialog\n  //  - clickOutside needs to work through portals. So if you have an array inside here that opens its items in a dialog/portal,\n  //    any clicks inside such dialogs or portals should not cause _this_ popover to close\n  return (\n    <Popover\n      {...restProps}\n      open\n      portal\n      padding={1}\n      content={\n        <Container width={width} ref={containerRef}>\n          <Flex direction=\"column\">\n            <Card padding={1} flex=\"none\">\n              <Flex align=\"center\">\n                <Box padding={2} flex={1}>\n                  <Text weight=\"semibold\">{header}</Text>\n                </Box>\n                <Box>\n                  <Button mode=\"bleed\" icon={CloseIcon} onClick={onClose} />\n                </Box>\n              </Flex>\n            </Card>\n            <Card flex={1} overflow=\"auto\">\n              {children}\n            </Card>\n          </Flex>\n        </Container>\n      }\n    />\n  )\n}\n","import {PreviewLayoutKey} from './types'\n\nexport const PREVIEW_MEDIA_SIZE: Record<PreviewLayoutKey, {width: number; height: number}> = {\n  block: {width: 33, height: 33},\n  blockImage: {width: 600, height: 400},\n  default: {width: 35, height: 35},\n  detail: {width: 75, height: 75},\n  inline: {width: 15, height: 15},\n  media: {width: 160, height: 160},\n}\n\nexport const PREVIEW_ICON_SIZE: Record<PreviewLayoutKey, number | undefined> = {\n  block: 31,\n  blockImage: 45,\n  default: 33,\n  detail: 45,\n  inline: 15,\n  media: 45,\n}\n","import {rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_ICON_SIZE} from '../constants'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from '../types'\n\nexport const MediaWrapper = styled.span<{\n  $dimensions: PreviewMediaDimensions\n  $layout: PreviewLayoutKey\n  $radius: number\n  $responsive: boolean\n}>((props) => {\n  const {$dimensions, $layout, $radius, $responsive} = props\n  const width = $dimensions.width || 0\n  const height = $dimensions.width || 0\n  const iconSize = PREVIEW_ICON_SIZE[$layout]\n\n  return css`\n    position: relative;\n    width: ${$responsive ? '100%' : rem(width)};\n    height: ${$responsive ? '100%' : rem(height)};\n    min-width: ${$responsive ? undefined : rem(width)};\n    border-radius: ${({theme}) => rem(theme.sanity.radius[$radius])};\n    display: flex;\n    overflow: hidden;\n    align-items: center;\n    justify-content: center;\n\n    & img {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: inherit;\n    }\n\n    & svg {\n      display: block;\n      font-size: calc(21 / 16 * 1em);\n    }\n\n    & [data-sanity-icon] {\n      display: block;\n      font-size: calc(${iconSize} / 16 * 1em);\n    }\n\n    /*\n      NOTE on why we cant use the \":after\" pseudo-element:\n      The thing is we only want the shadow when then <MediaWrapper> contains\n      something else than <svg>  icons should not have the shadow.\n      This is why we use the \"*:not(svg) + span\" selector to target only that\n      situation to render the shadow.\n    */\n    & *:not(svg) + span {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: inset 0 0 0 1px var(--card-fg-color);\n      opacity: 0.2;\n      border-radius: inherit;\n    }\n  `\n})\n\nMediaWrapper.displayName = 'MediaWrapper'\n","import {Text} from '@sanity/ui'\nimport React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewMediaDimensions, PreviewLayoutKey, PreviewProps} from '../types'\nimport {MediaWrapper} from './Media.styled'\n\nexport interface MediaProps {\n  border?: boolean\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  radius?: number\n  responsive?: boolean\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}\n\nexport function Media(props: MediaProps) {\n  const {border = true, dimensions, layout, media, radius = 1, responsive = false, styles} = props\n\n  return (\n    <MediaWrapper\n      $dimensions={dimensions}\n      $layout={layout}\n      $radius={radius}\n      $responsive={responsive}\n      className={styles?.media}\n      data-testid=\"Media\"\n    >\n      {renderMedia({dimensions, layout, media})}\n      {border && <span />}\n    </MediaWrapper>\n  )\n}\n\nfunction renderMedia(props: {\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}): React.ReactNode {\n  const {dimensions, layout, media, styles} = props\n\n  if (isValidElementType(media)) {\n    return createElement(media, {dimensions, layout})\n  }\n\n  if (typeof media === 'string') {\n    return (\n      <Text as=\"span\" className={styles?.mediaString}>\n        {media}\n      </Text>\n    )\n  }\n\n  if (isValidElement(media)) {\n    return media\n  }\n\n  return null\n}\n","import React, {createElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from './types'\n\nexport function renderPreviewMedia<Layout = PreviewLayoutKey>(\n  value: React.ReactNode | React.ElementType<{layout: Layout; dimensions: PreviewMediaDimensions}>,\n  layout: Layout,\n  dimensions: PreviewMediaDimensions\n): React.ReactNode {\n  if (isValidElementType(value)) {\n    return createElement(value, {layout, dimensions})\n  }\n\n  if (typeof value === 'string') {\n    return <div>{value}</div>\n  }\n\n  // @todo: find out why `value` isn't infered as `React.ReactNode` here\n  return value as any\n}\n\nexport function renderPreviewNode<Layout = PreviewLayoutKey>(\n  value: React.ReactNode | React.ElementType<{layout: Layout}>,\n  layout: Layout,\n  fallbackNode?: React.ReactNode\n): React.ReactNode {\n  if (typeof value === 'string') {\n    return value\n  }\n\n  if (isValidElementType(value)) {\n    return createElement(value, {layout})\n  }\n\n  // @todo: find out why `value` isn't infered as `React.ReactNode` here\n  return (value as any) || fallbackNode\n}\n","import React from 'react'\nimport {Box, Flex, Stack, Text, Skeleton, TextSkeleton, rem} from '@sanity/ui'\nimport classNames from 'classnames'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\n/** @beta */\nexport interface DefaultPreviewProps extends Omit<PreviewProps<'default'>, 'renderDefault'> {\n  styles?: {\n    root?: string\n    placeholder?: string\n    media?: string\n    heading?: string\n    title?: string\n    subtitle?: string\n    hasSubtitle?: string\n    mediaString?: string\n    status?: string\n    children?: string\n  }\n}\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Flex)`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\n/** @beta */\nexport function DefaultPreview(props: DefaultPreviewProps) {\n  const {title, subtitle, media, status, isPlaceholder, children, styles} = props\n  const rootClassName = classNames(styles?.root, Boolean(subtitle) && styles?.hasSubtitle)\n\n  const statusNode = status && (\n    <Box\n      className={styles?.status}\n      data-testid=\"default-preview__status\"\n      paddingLeft={3}\n      paddingRight={1}\n    >\n      {renderPreviewNode(status, 'default')}\n    </Box>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <Root align=\"center\" className={styles?.placeholder} data-testid=\"default-preview\">\n        {media !== false && (\n          <Skeleton animated marginRight={2} radius={2} style={PREVIEW_MEDIA_SIZE.default} />\n        )}\n\n        <Stack\n          data-testid=\"default-preview__heading\"\n          flex={1}\n          paddingLeft={media === false ? 1 : 2}\n          paddingRight={status ? 0 : 1}\n          space={2}\n        >\n          <TitleSkeleton />\n          <SubtitleSkeleton />\n        </Stack>\n\n        {statusNode}\n      </Root>\n    )\n  }\n\n  return (\n    <Root align=\"center\" className={rootClassName} data-testid=\"default-preview\">\n      {media !== false && media !== undefined && (\n        <Media\n          dimensions={DEFAULT_MEDIA_DIMENSIONS}\n          layout=\"default\"\n          media={media as any}\n          styles={styles}\n        />\n      )}\n\n      <Stack\n        className={styles?.heading}\n        data-testid=\"default-preview__header\"\n        flex={1}\n        paddingLeft={media ? 2 : 1}\n        paddingRight={status ? 0 : 1}\n        space={2}\n      >\n        <Text className={styles?.title} style={{color: 'inherit'}} textOverflow=\"ellipsis\">\n          {title && renderPreviewNode(title, 'default')}\n          {!title && <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\" className={styles?.subtitle}>\n            {renderPreviewNode(subtitle, 'default')}\n          </Text>\n        )}\n\n        {children && <div className={styles?.children}>{children}</div>}\n      </Stack>\n\n      {statusNode}\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Text, TextSkeleton} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const RootFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const StatusBox = styled(Box)`\n  white-space: nowrap;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: ${rem(PREVIEW_MEDIA_SIZE.detail.width)};\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)}; /* 80% of 200px */\n  width: 80%;\n`\n\nexport const SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)}; /* 60% of 200px */\n  width: 60%;\n`\n\nexport const DescriptionSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(180)}; /* 90% of 200px */\n  width: 90%;\n`\n\nexport const DescriptionText = styled(Text)(({theme}) => {\n  const {fonts} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const maxLines = 2\n  const maxHeight = textSize1.lineHeight * maxLines\n\n  return css`\n    & > span {\n      max-height: ${rem(maxHeight)};\n\n      /* Multi-line text overflow */\n      display: -webkit-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      -webkit-line-clamp: ${maxLines};\n      -webkit-box-orient: vertical;\n    }\n  `\n})\n","import React from 'react'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  DescriptionSkeleton,\n  DescriptionText,\n  MediaSkeleton,\n  RootFlex,\n  StatusBox,\n  SubtitleSkeleton,\n  TitleSkeleton,\n} from './DetailPreview.styled'\n\n/** @beta */\nexport type DetailPreviewProps = PreviewProps<'detail'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.detail,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\n/** @beta */\nexport function DetailPreview(props: DetailPreviewProps) {\n  const {\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n    isPlaceholder,\n  } = props\n\n  const statusNode = status && (\n    <StatusBox marginLeft={3} paddingRight={1}>\n      {renderPreviewNode(status, 'detail')}\n    </StatusBox>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <RootFlex data-testid=\"detail-preview\">\n        {media !== false && <MediaSkeleton data-testid=\"detail-preview__media\" />}\n\n        <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n          <Flex align=\"center\" data-testid=\"detail-preview__header\">\n            <Stack flex={1} space={2}>\n              <TitleSkeleton />\n              <SubtitleSkeleton />\n            </Stack>\n\n            {statusNode}\n          </Flex>\n\n          {description && (\n            <Box marginTop={3}>\n              <DescriptionSkeleton />\n            </Box>\n          )}\n        </Box>\n      </RootFlex>\n    )\n  }\n\n  return (\n    <RootFlex data-testid=\"detail-preview\">\n      {media !== false && (\n        <Media dimensions={mediaDimensions} layout=\"detail\" media={media as any} />\n      )}\n\n      <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n        <Flex align=\"center\" data-testid=\"detail-preview__header\">\n          <Stack flex={1} space={2}>\n            <Text textOverflow=\"ellipsis\" style={{color: 'inherit'}}>\n              {title && renderPreviewNode(title, 'detail')}\n              {!title && <>Untitled</>}\n            </Text>\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'detail')}\n              </Text>\n            )}\n          </Stack>\n\n          {statusNode}\n        </Flex>\n\n        {description && (\n          <Box marginTop={3}>\n            <DescriptionText muted size={1}>\n              {renderPreviewNode(description, 'detail')}\n            </DescriptionText>\n          </Box>\n        )}\n      </Box>\n\n      {children}\n    </RootFlex>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst SIZE = 43\nconst STROKE_WIDTH = 3\n\nconst Root = styled.svg`\n  width: ${SIZE}px;\n  height: ${SIZE}px;\n  transform: rotate(-90deg);\n`\n\nconst BgCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.gray[color.dark ? 900 : 100].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n  `\n})\n\nconst ProgressCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.blue[color.dark ? 400 : 500].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n    transition: stroke-dashoffset 75ms;\n  `\n})\n\n/** @beta */\nexport function CircularProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value: valueProp} = props\n  const value = Math.min(Math.max(valueProp, 0), 100)\n  const radius = SIZE / 2 - STROKE_WIDTH / 2\n  const circ = 2 * Math.PI * radius\n  const offset = ((100 - value) / 100) * circ\n  const viewBox = `${SIZE / 2} ${SIZE / 2} ${SIZE} ${SIZE}`\n\n  return (\n    <Root viewBox={viewBox}>\n      <BgCircle cx={SIZE} cy={SIZE} r={radius} />\n      <ProgressCircle\n        cx={SIZE}\n        cy={SIZE}\n        r={radius}\n        style={{\n          strokeDasharray: circ,\n          strokeDashoffset: `${offset}px`,\n        }}\n      />\n    </Root>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme, Card} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst STROKE_WIDTH = 0.5\n\nconst Root = styled(Card)`\n  overflow: hidden;\n`\n\nconst Bar = styled(Card)(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    height: ${STROKE_WIDTH}rem;\n    background: ${hues.blue[color.dark ? 400 : 500].hex};\n    transition: transform 75ms;\n  `\n})\n\n/** @beta */\nexport function LinearProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value} = props\n\n  return (\n    <Root radius={5}>\n      <Bar radius={5} style={{transform: `translate3d(${value - 100}%, 0, 0)`}} />\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Stack} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RootBox = styled(Box)`\n  position: relative;\n`\n\nexport const MediaFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: 100%;\n  height: 100%;\n`\n\nexport const ProgressFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n\n  &:before {\n    background-color: var(--card-bg-color);\n    opacity: 0.75;\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  > svg {\n    position: relative;\n    z-index: 2;\n  }\n`\n\nexport const TooltipContentStack = styled(Stack).attrs({padding: 2, space: 2})`\n  max-width: ${rem(200)};\n`\n","import React, {useMemo} from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Text, Tooltip} from '@sanity/ui'\nimport {CircularProgress} from '../../progress'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  MediaSkeleton,\n  MediaFlex,\n  ProgressFlex,\n  RootBox,\n  TooltipContentStack,\n} from './MediaPreview.styled'\n\n/** @beta */\nexport type MediaPreviewProps = PreviewProps<'media'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.media,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\n/** @beta */\nexport function MediaPreview(props: MediaPreviewProps) {\n  const {\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    children,\n    isPlaceholder,\n    progress = -1,\n    subtitle,\n    title,\n    withBorder = true,\n    withRadius = true,\n  } = props\n\n  const aspect = mediaDimensions.aspect || 1\n\n  const STYLES_PADDER = useMemo(() => ({paddingBottom: `${100 / aspect}%`}), [aspect])\n\n  const tooltipContent = useMemo(() => {\n    if (!title || !subtitle) {\n      return null\n    }\n\n    return (\n      <TooltipContentStack>\n        {title && (\n          <Text align=\"center\" size={1} weight=\"semibold\">\n            {renderPreviewNode(title, 'media')}\n          </Text>\n        )}\n\n        {subtitle && (\n          <Text align=\"center\" muted size={1}>\n            {renderPreviewNode(subtitle, 'media')}\n          </Text>\n        )}\n      </TooltipContentStack>\n    )\n  }, [subtitle, title])\n\n  return (\n    <RootBox data-testid=\"media-preview\" overflow=\"hidden\" flex={1}>\n      <div style={STYLES_PADDER} />\n\n      <Tooltip content={tooltipContent} disabled={!tooltipContent} placement=\"top\" portal>\n        <MediaFlex>\n          {isPlaceholder ? (\n            <MediaSkeleton />\n          ) : (\n            <Media\n              border={withBorder}\n              dimensions={mediaDimensions}\n              layout=\"media\"\n              media={media as any}\n              radius={withRadius ? 1 : 0}\n              responsive\n            />\n          )}\n\n          {typeof progress === 'number' && progress > -1 && (\n            <ProgressFlex>\n              <CircularProgress value={progress} />\n            </ProgressFlex>\n          )}\n        </MediaFlex>\n      </Tooltip>\n\n      {children}\n    </RootBox>\n  )\n}\n","import {Box, Card, Flex, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  box-shadow: 0 0 0 1px var(--card-border-color);\n  height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n  white-space: nowrap;\n  position: relative;\n  z-index: 1;\n`\n\nexport const MediaCard = styled(Card)<{$ratio: number}>`\n  position: relative;\n  padding-bottom: ${({$ratio}) => $ratio}%;\n\n  & > span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n`\n\nexport const RootBox = styled(Box).attrs({overflow: 'hidden'})`\n  border-radius: ${({theme}) => theme.sanity.radius[1]}px;\n`\n","import {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {HeaderFlex, MediaCard, RootBox} from './BlockImagePreview.styled'\n\n/** @beta */\nexport type BlockImagePreviewProps = Omit<PreviewProps<'blockImage'>, 'renderDefault'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.blockImage,\n  fit: 'fillmax',\n  dpr: getDevicePixelRatio(),\n}\n\nconst getRatio = (dimensions: PreviewMediaDimensions) => {\n  const {height, width} = dimensions\n\n  if (!height || !width) {\n    return 1\n  }\n\n  return (height / width) * 100\n}\n\n/** @beta */\nexport function BlockImagePreview(props: BlockImagePreviewProps) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    fallbackTitle = 'Untitled',\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    children,\n    status,\n  } = props\n\n  return (\n    <RootBox>\n      <Stack>\n        <HeaderFlex paddingLeft={2} paddingRight={1} paddingY={1}>\n          <Stack flex={1} space={2}>\n            {(title || fallbackTitle) && (\n              <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n                {title ? renderPreviewNode(title as any, 'block') : fallbackTitle}\n              </Text>\n            )}\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle as any, 'block')}\n              </Text>\n            )}\n          </Stack>\n\n          <Flex gap={1} paddingLeft={1}>\n            {status && (\n              <Box paddingX={2} paddingY={3}>\n                {renderPreviewNode(status as any, 'block')}\n              </Box>\n            )}\n\n            {actions as any}\n          </Flex>\n        </HeaderFlex>\n\n        <MediaCard\n          $ratio={getRatio(mediaDimensions)}\n          __unstable_checkered\n          display=\"flex\"\n          sizing=\"border\"\n          tone=\"inherit\"\n        >\n          <Media\n            border={false}\n            dimensions={mediaDimensions}\n            layout=\"blockImage\"\n            media={media as any}\n            radius={0}\n            responsive\n          />\n        </MediaCard>\n      </Stack>\n\n      {description && (\n        <Box paddingX={2} paddingY={3}>\n          <Text muted size={1}>\n            {renderPreviewNode(description as any, 'block')}\n          </Text>\n        </Box>\n      )}\n\n      {children && <div>{children}</div>}\n    </RootBox>\n  )\n}\n","import {Box, Flex, rem, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.block,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  min-height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n`\n\n/** @beta */\nexport function BlockPreview(props: Omit<PreviewProps<'block'>, 'renderDefault'>) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n  } = props\n\n  return (\n    <Stack data-testid=\"block-preview\" space={1}>\n      <HeaderFlex data-testid=\"block-preview__header\">\n        {media && <Media dimensions={mediaDimensions} layout=\"block\" media={media as any} />}\n\n        <Box flex={1} paddingLeft={media ? 2 : 1}>\n          <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n            {title ? renderPreviewNode(title, 'block') : 'Untitled'}\n          </Text>\n\n          {subtitle && (\n            <Box marginTop={2}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'block')}\n              </Text>\n            </Box>\n          )}\n\n          {description && (\n            <Box marginTop={3}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(description, 'block')}\n              </Text>\n            </Box>\n          )}\n        </Box>\n\n        <Flex gap={1} paddingLeft={1}>\n          {status && (\n            <Box paddingX={2} paddingY={3}>\n              {renderPreviewNode(status, 'block')}\n            </Box>\n          )}\n\n          {actions as any}\n        </Flex>\n      </HeaderFlex>\n\n      {children && <div data-testid=\"block-preview__children\">{children}</div>}\n    </Stack>\n  )\n}\n","import {rem, Text, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const RootSpan = styled.span`\n  display: inline-flex;\n  align-items: center;\n  vertical-align: top;\n  height: calc(1em - 1px);\n  max-width: 100%;\n`\n\nexport const MediaSpan = styled.span`\n  position: relative;\n  display: inline-block;\n  width: calc(1em - 1px);\n  height: calc(1em - 1px);\n  min-width: calc(1em - 1px);\n\n  & img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & img + span {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-fg-color);\n    opacity: 0.2;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & svg {\n    display: block;\n    font-size: calc(14 / 16 * 1em);\n    margin: 1px 0;\n\n    &[data-sanity-icon] {\n      font-size: calc(18 / 16 * 1em);\n      margin: calc(1px + (2 / 18 * -1em)) 0;\n    }\n  }\n`\n\nexport const TextSpan = styled(Text).attrs({forwardedAs: 'span'})(({theme}: {theme: Theme}) => {\n  const textFont = theme.sanity.fonts.text\n  const textSize = textFont.sizes[1]\n\n  return css`\n    font-size: calc(${textSize.fontSize} / 16 * 1em);\n    font-weight: ${textFont.weights.medium};\n    box-sizing: border-box;\n    display: inline-block;\n    vertical-align: top;\n    line-height: ${textSize.lineHeight / textSize.fontSize};\n    padding-left: 0.5em;\n    padding-right: calc(0.5em - 2px);\n    min-width: 0;\n\n    & > span {\n      display: block;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  `\n})\n","import React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {renderPreviewMedia, renderPreviewNode} from '../helpers'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {RootSpan, MediaSpan, TextSpan} from './InlinePreview.styled'\n\n/** @beta */\nexport type InlinePreviewProps = Omit<PreviewProps<'inline'>, 'renderDefault'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.inline,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\n/** @beta */\nexport function InlinePreview(props: InlinePreviewProps) {\n  const {\n    title,\n    fallbackTitle = 'Untitled',\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n  } = props\n\n  return (\n    <RootSpan data-testid=\"inline-preview\">\n      {media && (\n        <MediaSpan data-testid=\"inline-preview-media\">\n          {renderPreviewMedia(media, 'inline', mediaDimensions)}\n          <span />\n        </MediaSpan>\n      )}\n\n      <TextSpan data-testid=\"inline-preview-title\" size={1}>\n        {renderPreviewNode(title, 'inline', fallbackTitle)}\n      </TextSpan>\n    </RootSpan>\n  )\n}\n","import React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {Box, Flex, rem, Stack, Text, TextSkeleton} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PreviewMediaDimensions} from '../types'\nimport {Media, MediaProps} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\n/** @beta */\nexport interface TemplatePreviewProps {\n  description?: React.ReactNode\n  isPlaceholder?: boolean\n  media?: MediaProps['media']\n  mediaDimensions?: PreviewMediaDimensions\n  subtitle?: React.ElementType<{layout: 'default'}> | React.ReactNode\n  title?: React.ElementType<{layout: 'default'}> | React.ReactNode\n}\n\nconst DEFAULT_MEDIA_DIMENSION: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Box)`\n  height: 100%;\n\n  a {\n    color: currentColor;\n    text-decoration: none;\n  }\n\n  svg[data-sanity-icon] {\n    margin: 0;\n  }\n`\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\n/** @beta */\nexport function TemplatePreview(props: TemplatePreviewProps) {\n  const {\n    description,\n    isPlaceholder,\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSION,\n    subtitle,\n    title = 'Untitled',\n  } = props\n\n  if (isPlaceholder) {\n    return (\n      <Root>\n        <HeaderFlex>\n          <Stack flex={1} space={2}>\n            <TitleSkeleton />\n            <SubtitleSkeleton />\n          </Stack>\n        </HeaderFlex>\n      </Root>\n    )\n  }\n\n  return (\n    <Root>\n      <HeaderFlex>\n        <Stack flex={1} space={2}>\n          {isValidElementType(title) && (\n            <Text textOverflow=\"ellipsis\">{createElement(title, {layout: 'default'})}</Text>\n          )}\n          {isValidElement(title) && <Text textOverflow=\"ellipsis\">{title}</Text>}\n\n          {isValidElementType(subtitle) && (\n            <Text muted size={1} textOverflow=\"ellipsis\">\n              {createElement(subtitle, {layout: 'default'})}\n            </Text>\n          )}\n          {isValidElement(subtitle) && (\n            <Text muted size={1} textOverflow=\"ellipsis\">\n              {subtitle}\n            </Text>\n          )}\n        </Stack>\n\n        {media && (\n          <Flex align=\"flex-start\" paddingLeft={2}>\n            <Media dimensions={mediaDimensions} layout=\"default\" media={media} />\n          </Flex>\n        )}\n      </HeaderFlex>\n\n      {description && (\n        <Box marginTop={3}>\n          <Text muted size={1} style={{whiteSpace: 'break-spaces'}}>\n            {description}\n          </Text>\n        </Box>\n      )}\n    </Root>\n  )\n}\n","import {useCallback, useEffect, useState} from 'react'\nimport {RovingFocusProps} from './types'\n\nconst MUTATION_ATTRIBUTE_FILTER = ['aria-hidden', 'disabled', 'href']\n\nconst FOCUSABLE =\n  'a[href], button, input, textarea, select, details, [tabindex]:not([tabindex=\"-1\"])'\n\nfunction getFocusableElements(element: HTMLElement) {\n  return [...(element.querySelectorAll(FOCUSABLE) as any)].filter(\n    (el) => !el.hasAttribute('disabled') && el.getAttribute('aria-hidden') !== 'true'\n  ) as HTMLElement[]\n}\n\n/**\n * This hook handles focus with the keyboard arrows.\n *\n * @see {@link https://a11y-solutions.stevenwoodson.com/solutions/focus/roving-focus/ | Roving focus definition}\n *\n * @example\n * ```tsx\n * function MyComponent() {\n *   const [rootElement, setRootElement] = setRootElement(null)\n *\n *   useRovingFocus({\n *     rootElement: rootElement,\n *   })\n *\n *   return (\n *     <div ref={setRootElement}>\n *       <button>Button</button>\n *       <button>Button</button>\n *       <button>Button</button>\n *     </div>\n *   )\n * }\n * ```\n *\n * @beta\n */\nexport function useRovingFocus(props: RovingFocusProps): undefined {\n  const {\n    direction = 'horizontal',\n    initialFocus,\n    loop = true,\n    navigation = ['arrows'],\n    pause = false,\n    rootElement,\n  } = props\n  const [focusedIndex, setFocusedIndex] = useState<number>(-1)\n  const [focusableElements, setFocusableElements] = useState<HTMLElement[]>([])\n\n  const focusableLen = focusableElements.length\n  const lastFocusableIndex = focusableLen - 1\n\n  /**\n   * Determine what keys to listen to depending on direction\n   */\n  const nextKey = direction === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\n  const prevKey = direction === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\n\n  /**\n   * Set focusable elements in state\n   */\n  const handleSetElements = useCallback(() => {\n    if (rootElement) {\n      const els = getFocusableElements(rootElement)\n\n      setFocusableElements(els)\n    }\n  }, [rootElement])\n\n  /**\n   * Set focused index\n   */\n  const handleFocus = useCallback((index: number) => {\n    setFocusedIndex(index)\n  }, [])\n\n  /**\n   * Handle increment/decrement of focusedIndex\n   */\n  const handleKeyDown = useCallback(\n    (event: any) => {\n      if (pause) {\n        return\n      }\n\n      const focusPrev = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + lastFocusableIndex) % focusableLen\n\n          if (!loop && next === lastFocusableIndex) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      const focusNext = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + 1) % focusableLen\n\n          if (!loop && next === 0) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      if (event.key === 'Tab' && navigation.includes('tab')) {\n        if (event.shiftKey) {\n          focusPrev()\n        } else {\n          focusNext()\n        }\n      }\n\n      if (navigation.includes('arrows')) {\n        if (event.key === prevKey) {\n          focusPrev()\n        }\n\n        if (event.key === nextKey) {\n          focusNext()\n        }\n      }\n    },\n    [pause, prevKey, navigation, nextKey, lastFocusableIndex, focusableLen, loop]\n  )\n\n  /**\n   * Set focusable elements on mount\n   */\n  useEffect(() => {\n    handleSetElements()\n  }, [handleSetElements, initialFocus, direction])\n\n  /**\n   * Listen to DOM mutations to update focusableElements with latest state\n   */\n  useEffect(() => {\n    const mo = new MutationObserver(handleSetElements)\n\n    if (rootElement) {\n      mo.observe(rootElement, {\n        childList: true,\n        subtree: true,\n        attributeFilter: MUTATION_ATTRIBUTE_FILTER,\n      })\n    }\n\n    return () => {\n      mo.disconnect()\n    }\n  }, [focusableElements, handleSetElements, rootElement])\n\n  /**\n   * Set focus on elements in focusableElements depending on focusedIndex\n   */\n  useEffect(() => {\n    focusableElements.forEach((el, index) => {\n      if (index === focusedIndex) {\n        el.setAttribute('tabIndex', '0')\n        el.setAttribute('aria-selected', 'true')\n        el.focus()\n        el.onfocus = () => handleFocus(index)\n        el.onblur = () => handleFocus(-1)\n      } else {\n        el.setAttribute('tabIndex', '-1')\n        el.setAttribute('aria-selected', 'false')\n        el.onfocus = () => handleFocus(index)\n      }\n    })\n\n    if (focusedIndex === -1 && focusableElements) {\n      const initialIndex = initialFocus === 'last' ? lastFocusableIndex : 0\n      focusableElements[initialIndex]?.setAttribute('tabIndex', '0')\n    }\n  }, [focusableElements, focusedIndex, handleFocus, initialFocus, lastFocusableIndex])\n\n  /**\n   * Listen to key down events on rootElement\n   */\n  useEffect(() => {\n    rootElement?.addEventListener('keydown', handleKeyDown)\n\n    return () => {\n      rootElement?.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [handleKeyDown, rootElement])\n\n  return undefined\n}\n","import {useToast} from '@sanity/ui'\nimport React, {forwardRef, useImperativeHandle} from 'react'\n\n/** @internal */\nexport interface ToastParams {\n  closable?: boolean\n  description?: React.ReactNode\n  duration?: number\n  onClose?: () => void\n  title?: React.ReactNode\n  status?: 'error' | 'warning' | 'success' | 'info'\n}\n\n/** @internal */\nexport const ImperativeToast = forwardRef((_, ref) => {\n  const {push} = useToast()\n\n  useImperativeHandle(ref, () => ({push}))\n\n  return null\n})\n\nImperativeToast.displayName = 'ImperativeToast'\n","import {ZIndexContextValue} from './types'\n\n/**\n * @internal\n */\nexport const defaults: ZIndexContextValue = {\n  navbar: 200,\n  navbarPopover: 500000,\n  navbarDialog: 500001,\n\n  // pane\n  pane: 100,\n  paneHeader: [110, 15000],\n  paneFooter: [120, 20000],\n  paneResizer: [130, 25000],\n\n  //\n  popover: 200,\n  modal: 200,\n  movingItem: 10000,\n  drawershade: 1000000,\n  drawer: 1000001,\n  fullscreen: 1200000,\n  toast: [100, 11000],\n\n  // NOT IN USE\n  portal: 200,\n  dropdown: 200,\n  navbarFixed: 1010,\n  fullscreenEdit: 1050,\n  popoverBackground: 1060,\n  tooltip: 200,\n  modalBackground: 2000,\n  spinner: 3000,\n}\n","import {createContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {defaults} from './defaults'\n\n/**\n * TODO: Rename to `ZOffsetsContext`\n *\n * @internal\n */\nexport const ZIndexContext = createContext<ZIndexContextValue>(defaults)\n","import {useContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {ZIndexContext} from './ZIndexContext'\n\n/**\n * TODO: Rename to `useZOffsets`\n *\n * @internal\n */\nexport function useZIndex(): ZIndexContextValue {\n  return useContext(ZIndexContext)\n}\n","import {LayerProvider} from '@sanity/ui'\nimport React from 'react'\nimport {useZIndex} from '../zOffsets/useZIndex'\nimport {ZIndexContextValue} from '../zOffsets/types'\n\n/** @internal */\nexport type ZIndexContextValueKey = keyof ZIndexContextValue\n\n/**\n * This component should only be used by core Sanity packages.\n * @internal\n */\nexport function LegacyLayerProvider({\n  children,\n  zOffset: zOffsetKey,\n}: {\n  children: React.ReactNode\n  zOffset: ZIndexContextValueKey\n}) {\n  const zIndex = useZIndex()\n  const zOffset = zIndex[zOffsetKey]\n\n  return <LayerProvider zOffset={zOffset}>{children}</LayerProvider>\n}\n","import {ValidationMarker, Path} from '@sanity/types'\nimport React, {useCallback, useMemo} from 'react'\nimport {WarningOutlineIcon, ErrorOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Text, MenuItem, Stack, Flex, ButtonTone} from '@sanity/ui'\nimport styled from 'styled-components'\n\ninterface ValidationListItemProps {\n  marker: ValidationMarker\n  onClick?: (path?: Path) => void\n  path: string\n  truncate?: boolean\n}\n\nconst StyledText = styled(Text)`\n  white-space: initial;\n`\n\nconst MENU_ITEM_TONES: Record<'error' | 'warning' | 'info', ButtonTone> = {\n  error: 'critical',\n  warning: 'caution',\n  info: 'primary',\n}\n\nexport function ListItem(props: ValidationListItemProps) {\n  const {marker, onClick, path, truncate} = props\n\n  const handleClick = useCallback(() => {\n    if (onClick) {\n      onClick(marker.path)\n    }\n  }, [marker.path, onClick])\n\n  const menuItemTone = MENU_ITEM_TONES[marker?.level] || undefined\n\n  const children = (\n    <Flex>\n      <Box>\n        <Text size={1}>\n          {marker.level === 'error' && <ErrorOutlineIcon />}\n          {marker.level === 'warning' && <WarningOutlineIcon />}\n          {marker.level === 'info' && <InfoOutlineIcon />}\n        </Text>\n      </Box>\n\n      <Stack space={2} flex={1} paddingLeft={3}>\n        {path && (\n          <StyledText size={1} weight=\"semibold\">\n            {path}\n          </StyledText>\n        )}\n        {marker.item.message && (\n          <StyledText muted size={1} textOverflow={truncate ? 'ellipsis' : undefined}>\n            {marker.item.message}\n          </StyledText>\n        )}\n      </Stack>\n    </Flex>\n  )\n  return (\n    <MenuItem padding={1} onClick={handleClick} radius={2} tone={menuItemTone}>\n      <Box padding={2}>{children}</Box>\n    </MenuItem>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {\n  ObjectSchemaType,\n  Path,\n  ValidationMarker,\n  isValidationErrorMarker,\n  isValidationWarningMarker,\n  isValidationInfoMarker,\n} from '@sanity/types'\nimport {Container} from '@sanity/ui'\nimport {ListItem} from './listItem'\n\n/** @internal */\nexport interface ValidationListProps {\n  documentType?: ObjectSchemaType\n  kind?: 'simple'\n  validation: ValidationMarker[]\n  onFocus?: (path: Path) => void\n  onClose?: () => void\n  truncate?: boolean\n}\n\n/** @internal */\nexport function ValidationList(props: ValidationListProps) {\n  const {documentType, kind, validation, onFocus, onClose, truncate} = props\n  const errors = validation.filter(isValidationErrorMarker)\n  const warnings = validation.filter(isValidationWarningMarker)\n  const info = validation.filter(isValidationInfoMarker)\n\n  const handleClick = useCallback(\n    (path: Path = []) => {\n      if (onFocus) onFocus(path)\n      if (onClose) onClose()\n    },\n    [onFocus, onClose]\n  )\n\n  const resolvePathTitle = (path: Path) => {\n    const fields = documentType && documentType.fields\n    const field = fields && fields.find((curr) => curr.name === path[0])\n\n    return (field && field.type.title) || ''\n  }\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  if (!hasErrors && !hasWarnings && !hasInfo) {\n    return null\n  }\n\n  return (\n    <Container width={0} data-kind={kind} data-testid=\"validation-list\">\n      {hasErrors &&\n        errors.map((_error, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_error.path)}\n            marker={_error}\n            onClick={handleClick}\n          />\n        ))}\n      {hasWarnings &&\n        warnings.map((_warning, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_warning.path)}\n            marker={_warning}\n            onClick={handleClick}\n          />\n        ))}\n      {hasInfo &&\n        info.map((_info, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_info.path)}\n            marker={_info}\n            onClick={handleClick}\n          />\n        ))}\n    </Container>\n  )\n}\n","import React from 'react'\nimport {defaults} from './defaults'\nimport {ZIndexContext} from './ZIndexContext'\n\n/**\n * TODO: Rename to `ZOffsetsProvider`\n *\n * @internal\n */\nexport function ZIndexProvider({children}: {children?: React.ReactNode}): React.ReactElement {\n  return <ZIndexContext.Provider value={defaults}>{children}</ZIndexContext.Provider>\n}\n","import {\n  IndexTuple,\n  isIndexSegment,\n  isIndexTuple,\n  isKeyedObject,\n  isKeySegment,\n  KeyedSegment,\n  Path,\n  PathSegment,\n} from '@sanity/types'\nimport {isRecord} from '../../util'\n\nconst rePropName =\n  /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g\nconst reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/\n\n/** @internal */\nexport function pathToString(path: Path): string {\n  if (!Array.isArray(path)) {\n    throw new Error('Path is not an array')\n  }\n\n  return path.reduce<string>((target, segment, i) => {\n    const segmentType = typeof segment\n    if (segmentType === 'number') {\n      return `${target}[${segment}]`\n    }\n\n    if (segmentType === 'string') {\n      const separator = i === 0 ? '' : '.'\n      return `${target}${separator}${segment}`\n    }\n\n    if (isKeySegment(segment) && segment._key) {\n      return `${target}[_key==\"${segment._key}\"]`\n    }\n\n    if (Array.isArray(segment)) {\n      const [from, to] = segment\n      return `${target}[${from}:${to}]`\n    }\n\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``)\n  }, '')\n}\n\n/** @internal */\nexport function getValueAtPath(rootValue: unknown, path: Path): unknown {\n  const segment = path[0]\n  if (!segment) {\n    return rootValue\n  }\n\n  const tail = path.slice(1)\n  if (isIndexSegment(segment)) {\n    return getValueAtPath(Array.isArray(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  if (isKeySegment(segment)) {\n    return getValueAtPath(\n      Array.isArray(rootValue) ? rootValue.find((item) => item._key === segment._key) : undefined,\n      tail\n    )\n  }\n\n  if (typeof segment === 'string') {\n    return getValueAtPath(isRecord(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  throw new Error(`Unknown segment type ${JSON.stringify(segment)}`)\n}\n\n/** @internal */\nexport function findIndex(array: unknown[], segment: PathSegment): number {\n  if (typeof segment !== 'number' && !isKeySegment(segment)) {\n    return -1\n  }\n\n  return typeof segment === 'number'\n    ? segment\n    : array.findIndex((item) => isKeyedObject(item) && item._key === segment._key)\n}\n\n/** @internal */\nexport function stringToPath(path: string): Path {\n  const segments = path.match(rePropName)\n  if (!segments) {\n    throw new Error('Invalid path string')\n  }\n\n  return segments.map(normalizePathSegment)\n}\n\n/** @internal */\nexport function normalizePathSegment(segment: string): PathSegment {\n  if (isIndexSegment(segment)) {\n    return normalizeIndexSegment(segment)\n  }\n\n  if (isKeySegment(segment)) {\n    return normalizeKeySegment(segment)\n  }\n\n  if (isIndexTuple(segment)) {\n    return normalizeIndexTupleSegment(segment)\n  }\n\n  return segment\n}\n\n/** @internal */\nexport function normalizeIndexSegment(segment: string): PathSegment {\n  return Number(segment.replace(/[^\\d]/g, ''))\n}\n\n/** @internal */\nexport function normalizeKeySegment(segment: string): KeyedSegment {\n  const segments = segment.match(reKeySegment)\n  if (!segments) {\n    throw new Error('Invalid key segment')\n  }\n\n  return {_key: segments[1]}\n}\n\n/** @internal */\nexport function normalizeIndexTupleSegment(segment: string): IndexTuple {\n  const [from, to] = segment.split(':').map((seg) => (seg === '' ? seg : Number(seg)))\n  return [from, to]\n}\n\n/** @internal */\nexport function pathsAreEqual(pathA: Path, pathB: Path): boolean {\n  if (pathA.length !== pathB.length) {\n    return false\n  }\n\n  return pathA.every((segmentA, index) => {\n    const segmentB = pathB[index]\n    if (isKeySegment(segmentA) && isKeySegment(segmentB)) {\n      return segmentA._key === segmentB._key\n    }\n\n    if (isIndexSegment(segmentA)) {\n      return Number(segmentA) === Number(segmentB)\n    }\n\n    if (isIndexTuple(segmentA) && isIndexTuple(segmentB)) {\n      return segmentA[0] === segmentB[0] && segmentA[1] === segmentB[1]\n    }\n\n    return segmentA === segmentB\n  })\n}\n\n/** @internal */\nexport function getItemKey(arrayItem: unknown): string | undefined {\n  return isKeyedObject(arrayItem) ? arrayItem._key : undefined\n}\n\n/** @internal */\nexport function getItemKeySegment(arrayItem: unknown): KeyedSegment | undefined {\n  const key = getItemKey(arrayItem)\n  return key ? {_key: key} : undefined\n}\n\n/** @internal */\nexport function isEmptyObject(item: unknown): boolean {\n  return typeof item === 'object' && item !== null && Object.keys(item).length <= 0\n}\n","import {isIndexSegment, isKeySegment, isIndexTuple, Path, KeyedSegment} from '@sanity/types'\nimport {UserColorManager, UserColor} from '../../../user-color'\nimport {stringToPath, pathToString} from '../../paths/helpers'\nimport {\n  Annotation,\n  Diff,\n  ItemDiff,\n  ArrayDiff,\n  ObjectDiff,\n  StringDiff,\n  StringDiffSegment,\n} from '../../types'\n\n/** @internal */\nexport function getAnnotationColor(\n  colorManager: UserColorManager,\n  annotation?: Annotation | null\n): UserColor {\n  return colorManager.get(annotation?.author || null)\n}\n\n/** @internal */\nexport function getAnnotationAtPath(diff: Diff, diffPath: string | Path): Annotation | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n\n  return getAnnotationAt(diff, path)\n}\n\n/** @internal */\nexport function getDiffAtPath(diff: Diff, diffPath: string | Path): Diff | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n  return getDiffAt(diff, path)\n}\n\nfunction getAnnotationAt(diff: Diff, path: Path): Annotation | undefined {\n  const diffAt = getDiffAt(diff, path)\n  if (!diffAt) {\n    return undefined\n  }\n\n  if (diffAt.action === 'unchanged') {\n    return undefined\n  }\n\n  return diffAt.annotation || undefined\n}\n\n// eslint-disable-next-line complexity\nfunction getDiffAt(diff: Diff, path: Path, parentPath: Path = []): Diff | undefined {\n  if (path.length === 0) {\n    return diff\n  }\n\n  const segment = path[0]\n  const tail = path.slice(1)\n\n  if (isIndexTuple(segment)) {\n    throw new Error('Index tuples are not supported in diff paths')\n  }\n\n  if (isIndexSegment(segment) || isKeySegment(segment)) {\n    const location = isIndexSegment(segment) ? `at index ${segment}` : `with key ${segment._key}`\n    if (diff.type !== 'array') {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (not an array)`)\n      return undefined\n    }\n\n    const itemDiff = diff.items.find(\n      isIndexSegment(segment)\n        ? (item) => item.toIndex === segment\n        : (item) => itemMatchesKey(item, segment)\n    )\n\n    if (!itemDiff) {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (item missing)`)\n      return undefined\n    }\n\n    return getDiffAt(itemDiff.diff, tail, parentPath.concat(segment))\n  }\n\n  if (diff.type !== 'object') {\n    warn(`Failed to get property ${segment} at path ${pathToString(parentPath)} (not an object)`)\n    return undefined\n  }\n\n  const fieldDiff = diff.fields[segment]\n  if (typeof fieldDiff === 'undefined') {\n    warn(\n      `Failed to get property ${segment} at path ${pathToString(parentPath)} (field did not exist)`\n    )\n    return undefined\n  }\n\n  return getDiffAt(fieldDiff, tail, parentPath.concat(segment))\n}\n\n/* eslint-disable no-console, @typescript-eslint/no-unused-vars */\nfunction warn(msg: string) {\n  //console.warn(msg)\n}\n/* eslint-enable no-console, @typescript-eslint/no-unused-vars */\n\nfunction itemMatchesKey(item: ItemDiff, key: KeyedSegment) {\n  const itemDiff = item.diff\n  return itemDiff.type !== 'object' || !itemDiff.toValue ? false : itemDiff.toValue._key === key\n}\n\n/** @internal */\nexport type DiffVisitor = (diff: Diff | StringDiffSegment, path: Path) => boolean\n\n/**\n * Visit all diffs in tree, until visitor returns false\n *\n * @param diff - Diff to visit\n * @param visitor - Visitor function, return false to stop from going deeper\n *\n * @internal\n */\nexport function visitDiff(\n  diff: Diff | StringDiffSegment,\n  visitor: DiffVisitor,\n  path: Path = []\n): void {\n  if (!visitor(diff, path)) {\n    return\n  }\n\n  if (diff.type === 'array') {\n    visitArrayDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'object') {\n    visitObjectDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'string') {\n    visitStringDiff(diff, visitor, path)\n  }\n}\n\nfunction visitArrayDiff(diff: ArrayDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.items.forEach((itemDiff) => {\n    const _key = itemDiff.diff.type === 'object' && (itemDiff.diff.toValue?._key as string)\n    const segment = _key ? {_key} : getItemDiffIndex(itemDiff)\n    visitDiff(itemDiff.diff, visitor, path.concat(segment))\n  })\n}\n\nfunction visitObjectDiff(diff: ObjectDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  Object.keys(diff.fields).forEach((fieldName) => {\n    const fieldDiff = diff.fields[fieldName]\n    visitDiff(fieldDiff, visitor, path.concat(fieldName))\n  })\n}\n\nfunction visitStringDiff(diff: StringDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.segments.forEach((segment) => {\n    visitDiff(segment, visitor, path)\n  })\n}\n\nfunction getItemDiffIndex(itemDiff: ItemDiff): number {\n  return typeof itemDiff.toIndex === 'undefined' ? itemDiff.fromIndex || 0 : itemDiff.toIndex\n}\n","import {Path} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {UserColor, useUserColorManager} from '../../../user-color'\nimport {Annotation, Diff} from '../../types'\nimport {getAnnotationColor, getAnnotationAtPath} from './helpers'\n\n/** @internal */\nexport function useAnnotationColor(annotation?: Annotation | null): UserColor {\n  const userColorManager = useUserColorManager()\n\n  return getAnnotationColor(userColorManager, annotation)\n}\n\n/** @internal */\nexport function useDiffAnnotationColor(diff: Diff, path: string | Path = []): UserColor {\n  const userColorManager = useUserColorManager()\n  const annotation = useMemo(() => getAnnotationAtPath(diff, path), [diff, path])\n\n  return useMemo(\n    () => getAnnotationColor(userColorManager, annotation),\n    [annotation, userColorManager]\n  )\n}\n","import {Path} from '@sanity/types'\nimport {Tooltip, TooltipProps, Text, Stack, Flex, Inline, Label} from '@sanity/ui'\nimport React from 'react'\nimport {LegacyLayerProvider, UserAvatar} from '../../../components'\nimport {useTimeAgo} from '../../../hooks'\nimport {useUser} from '../../../store'\nimport {AnnotationDetails, Diff} from '../../types'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\n\n/** @internal */\nexport interface DiffTooltipProps extends TooltipProps {\n  children: React.ReactElement\n  description?: React.ReactNode\n  diff: Diff\n  path?: Path | string\n}\n\n/** @internal */\nexport interface DiffTooltipWithAnnotationsProps extends TooltipProps {\n  annotations: AnnotationDetails[]\n  children: React.ReactElement\n  description?: React.ReactNode\n}\n\n/** @internal */\nexport function DiffTooltip(props: DiffTooltipProps | DiffTooltipWithAnnotationsProps) {\n  if ('diff' in props) {\n    const {diff, path = [], ...restProps} = props\n    const annotation = getAnnotationAtPath(diff, path)\n\n    return <DiffTooltipWithAnnotation {...restProps} annotations={annotation ? [annotation] : []} />\n  }\n\n  return <DiffTooltipWithAnnotation {...props} />\n}\n\nfunction DiffTooltipWithAnnotation(props: DiffTooltipWithAnnotationsProps) {\n  const {annotations, children, description = 'Changed', ...restProps} = props\n\n  if (!annotations) {\n    return children\n  }\n\n  const content = (\n    <Stack padding={3} space={2}>\n      <Label size={1} style={{textTransform: 'uppercase'}} muted>\n        {description}\n      </Label>\n      <Stack space={2}>\n        {annotations.map((annotation, idx) => (\n          <AnnotationItem annotation={annotation} key={idx} />\n        ))}\n      </Stack>\n    </Stack>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"paneFooter\">\n      <Tooltip\n        content={content}\n        // data-placement={restProps.placement}\n        portal\n        allowedAutoPlacements={['top', 'bottom']}\n        {...restProps}\n      >\n        {children}\n      </Tooltip>\n    </LegacyLayerProvider>\n  )\n}\n\nfunction AnnotationItem({annotation}: {annotation: AnnotationDetails}) {\n  const {author, timestamp} = annotation\n  const [user] = useUser(author)\n  const color = useAnnotationColor(annotation)\n  const timeAgo = useTimeAgo(timestamp, {minimal: true})\n\n  return (\n    <Inline space={2}>\n      <Flex\n        align=\"center\"\n        paddingRight={3}\n        style={{\n          backgroundColor: color.background,\n          color: color.text,\n          borderRadius: 'calc(23px / 2)',\n        }}\n      >\n        <UserAvatar user={author} />\n        <Inline paddingLeft={2}>\n          <Text muted size={1} style={{color: color.text}}>\n            {user ? user.displayName : 'Loading'}\n          </Text>\n        </Inline>\n      </Flex>\n      <Text as=\"time\" muted size={1} dateTime={timestamp}>\n        {timeAgo}\n      </Text>\n    </Inline>\n  )\n}\n","import {Path} from '@sanity/types'\nimport React, {forwardRef, useMemo} from 'react'\nimport {Card, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\nimport {Annotation, Diff} from '../../types'\nimport {DiffTooltip} from './DiffTooltip'\n\n/** @internal */\nexport interface DiffCardProps {\n  annotation?: Annotation\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  diff?: Diff\n  disableHoverEffect?: boolean\n  path?: Path | string\n  tooltip?: {description?: React.ReactNode} | boolean\n}\n\nconst StyledCard = styled(Card)`\n  --diff-card-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  --diff-card-bg-color: ${({theme}) => theme.sanity.color.card.enabled.bg};\n\n  max-width: 100%;\n  position: relative;\n  border-radius: var(--diff-card-radius);\n\n  &:not(del) {\n    text-decoration: none;\n  }\n\n  &[data-hover] {\n    &::after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n\n    &:hover {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n\n    [data-from-to-layout]:hover & {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n  }\n`\n\nconst EMPTY_PATH: Path = []\n\n/** @internal */\nexport const DiffCard = forwardRef(function DiffCard(\n  props: DiffCardProps & Omit<React.HTMLProps<HTMLElement>, 'as' | 'height'>,\n  ref\n) {\n  const {\n    annotation: annotationProp,\n    as = 'div',\n    children,\n    className,\n    diff,\n    disableHoverEffect,\n    path = EMPTY_PATH,\n    style = {},\n    tooltip,\n    ...restProps\n  } = props\n\n  const annotation = useMemo(\n    () => annotationProp || getAnnotationAtPath(diff!, path),\n    [annotationProp, diff, path]\n  )\n\n  const color = useAnnotationColor(annotation)\n\n  const element = (\n    <StyledCard\n      {...restProps}\n      as={as}\n      className={className}\n      data-hover={disableHoverEffect || !annotation ? undefined : ''}\n      ref={ref}\n      radius={1}\n      style={{\n        ...style,\n        backgroundColor: color.background,\n        color: color.text,\n      }}\n    >\n      {children}\n    </StyledCard>\n  )\n\n  if (tooltip && annotation) {\n    return (\n      <DiffTooltip\n        annotations={[annotation]}\n        description={tooltip && typeof tooltip === 'object' && tooltip.description}\n      >\n        {element}\n      </DiffTooltip>\n    )\n  }\n\n  return element\n})\n","import React from 'react'\nimport {Box, rem, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FromToIndex, Annotation, FieldChangeNode} from '../../types'\nimport {getAnnotationAtPath} from '../annotations'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.div`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  padding: ${({theme}) => rem(theme.sanity.space[1])};\n`\n\nconst AnnotationText = styled(Text)`\n  &:not([hidden]) {\n    color: inherit;\n  }\n`\n\n/** @internal */\nexport function ChangeTitleSegment(props: {\n  change?: FieldChangeNode\n  segment: string | FromToIndex\n}) {\n  const {change, segment} = props\n\n  if (typeof segment === 'string') {\n    return (\n      <Box style={segment.length > 30 ? {maxWidth: 100} : {}}>\n        <Text title={segment} size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n          {segment}\n        </Text>\n      </Box>\n    )\n  }\n\n  const {hasMoved, fromIndex, toIndex, annotation} = segment\n  const created = typeof fromIndex === 'undefined'\n  const deleted = typeof toIndex === 'undefined'\n  if (created) {\n    // Item was created\n    return <CreatedTitleSegment annotation={annotation} change={change} toIndex={toIndex} />\n  }\n\n  if (deleted) {\n    // Item was deleted\n    return <DeletedTitleSegment annotation={annotation} fromIndex={fromIndex} />\n  }\n\n  if (hasMoved && typeof toIndex !== 'undefined' && typeof fromIndex !== 'undefined') {\n    // Item was moved\n    return <MovedTitleSegment annotation={annotation} fromIndex={fromIndex} toIndex={toIndex} />\n  }\n\n  // Changed/unchanged\n  const readableIndex = (toIndex || 0) + 1\n  return (\n    <Box padding={1}>\n      <Text size={1} weight=\"semibold\">\n        #{readableIndex}\n      </Text>\n    </Box>\n  )\n}\n\nfunction CreatedTitleSegment(props: {\n  annotation: Annotation | undefined\n  change?: FieldChangeNode\n  toIndex?: number\n}) {\n  const {annotation: annotationProp, change, toIndex = 0} = props\n  const readableIndex = toIndex + 1\n  const description = `Added in position ${readableIndex}`\n  const content = <>#{readableIndex}</>\n  const diffAnnotation = change?.diff ? getAnnotationAtPath(change.diff, []) : undefined\n  const annotation = diffAnnotation || annotationProp\n\n  if (annotation) {\n    return (\n      <DiffCard annotation={annotation} tooltip={{description}} as={RoundedCard}>\n        <AnnotationText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs=\"ins\"\n          style={{textDecoration: 'none'}}\n        >\n          {content}\n        </AnnotationText>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Text size={1} weight=\"semibold\">\n      {content}\n    </Text>\n  )\n}\n\nfunction DeletedTitleSegment(props: {annotation: Annotation | undefined; fromIndex?: number}) {\n  const {annotation, fromIndex = 0} = props\n  const readableIndex = fromIndex + 1\n  const description = `Removed from position ${readableIndex}`\n  return (\n    <DiffCard annotation={annotation || null} as={RoundedCard} tooltip={{description}}>\n      <AnnotationText size={1} weight=\"semibold\" forwardedAs=\"del\">\n        #{readableIndex}\n      </AnnotationText>\n    </DiffCard>\n  )\n}\n\nfunction MovedTitleSegment(props: {\n  annotation: Annotation | undefined\n  fromIndex: number\n  toIndex: number\n}) {\n  const {annotation, fromIndex, toIndex} = props\n  const indexDiff = toIndex - fromIndex\n  const indexSymbol = indexDiff < 0 ? '' : ''\n  const positions = Math.abs(indexDiff)\n  const description = `Moved ${positions} position${positions === 1 ? '' : 's'} ${\n    indexDiff < 0 ? 'up' : 'down'\n  }`\n\n  return (\n    <>\n      <Box padding={1}>\n        <AnnotationText size={1} weight=\"semibold\">\n          #{toIndex + 1}\n        </AnnotationText>\n      </Box>\n      <DiffCard annotation={annotation} as={RoundedCard} tooltip={{description}}>\n        <AnnotationText size={1} weight=\"semibold\">\n          {indexSymbol}\n          {Math.abs(indexDiff)}\n        </AnnotationText>\n      </DiffCard>\n    </>\n  )\n}\n","import React from 'react'\nimport {Breadcrumbs, Text} from '@sanity/ui'\nimport {ChangeTitlePath, FieldChangeNode} from '../../types'\nimport {ChangeTitleSegment} from './ChangeTitleSegment'\n\n/** @internal */\nexport function ChangeBreadcrumb(props: {change?: FieldChangeNode; titlePath: ChangeTitlePath}) {\n  const {change, titlePath} = props\n\n  return (\n    <Breadcrumbs\n      separator={\n        <Text muted size={1}>\n          /\n        </Text>\n      }\n    >\n      {titlePath.map((titleSegment, idx) => {\n        const showSegment = typeof titleSegment === 'string' || !change || change.showIndex\n\n        if (!showSegment) {\n          return null\n        }\n\n        return <ChangeTitleSegment change={change} key={idx} segment={titleSegment} />\n      })}\n    </Breadcrumbs>\n  )\n}\n","import {ConditionalProperty, ConditionalPropertyCallbackContext, CurrentUser} from '@sanity/types'\nimport {omit} from 'lodash'\nimport {useMemo, useRef} from 'react'\nimport {isRecord} from '../../util'\n\nexport function isThenable(value: unknown): value is Promise<unknown> {\n  return isRecord(value) && typeof value?.then === 'function'\n}\n\nexport function omitDeprecatedRole(user: CurrentUser): Omit<CurrentUser, 'role'> {\n  return omit(user, 'role')\n}\n\nexport function useCheckCondition(\n  checkProperty: ConditionalProperty,\n  checkPropertyName: string,\n  context: ConditionalPropertyCallbackContext\n): boolean {\n  const {currentUser, document, parent, value} = context\n\n  const didWarn = useRef(false)\n\n  return useMemo(() => {\n    let isTrueIsh = false\n\n    if (typeof checkProperty === 'boolean' || checkProperty === undefined) {\n      return checkProperty || false\n    }\n\n    try {\n      isTrueIsh = checkProperty({\n        document,\n        parent,\n        value,\n        currentUser,\n      })\n    } catch (err) {\n      console.error(\n        `An error occurred while running the callback from \\`${checkPropertyName}\\`: ${err.message}`\n      )\n      return false\n    }\n\n    if (isThenable(isTrueIsh) && !didWarn.current) {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is either a promise or a promise returning function. Async callbacks for \\`${checkPropertyName}\\` option is not currently supported.`\n      )\n      return false\n    }\n\n    if (typeof isTrueIsh === 'undefined') {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is or returned \\`undefined\\`. \\`${checkPropertyName}\\` should return a boolean.`\n      )\n    }\n\n    return isTrueIsh\n  }, [checkProperty, document, parent, value, currentUser, checkPropertyName])\n}\n","import {SanityDocument, ConditionalProperty} from '@sanity/types'\nimport {useCurrentUser} from '../../store'\nimport {useUnique} from '../../util'\nimport {useCheckCondition} from './utils'\n\n/**\n * @internal Not yet a stable API\n */\nexport interface ConditionalPropertyProps {\n  parent?: unknown\n  value: unknown\n  document?: SanityDocument\n  checkProperty: ConditionalProperty\n  checkPropertyKey: string\n}\n\n/**\n * Resolve a callback function to a boolean using the passed arguments\n *\n * @internal Not yet a stable API\n */\nconst useConditionalProperty = (props: ConditionalPropertyProps): boolean => {\n  const {checkProperty = false, checkPropertyKey, document, parent, value: valueProp} = props\n  const value = useUnique(valueProp)\n  const currentUser = useCurrentUser()\n\n  const isPropertyTruthy = useCheckCondition(checkProperty, checkPropertyKey, {\n    currentUser,\n    document,\n    parent,\n    value,\n  })\n\n  return isPropertyTruthy\n}\n\nexport {useConditionalProperty as unstable_useConditionalProperty}\n","import {Path} from '@sanity/types'\nimport {createContext} from 'react'\n\n/** @internal */\nexport const DiffContext = createContext<{path: Path}>({path: []})\n","import {SchemaType, ObjectSchemaType} from '@sanity/types'\n\n/** @internal */\nexport interface FieldValueError {\n  message: string\n  value: unknown\n}\n\n/** @internal */\nexport function getValueError(value: unknown, schemaType: SchemaType): FieldValueError | undefined {\n  const {jsonType} = schemaType\n  const valueType = Array.isArray(value) ? 'array' : typeof value\n\n  if (value === null || valueType === 'undefined') {\n    return undefined\n  }\n\n  if (valueType !== jsonType) {\n    return {message: `Value is ${valueType}, expected ${jsonType}`, value}\n  }\n\n  if (isObjectType(schemaType) && isObjectValue(value)) {\n    for (const field of schemaType.fields) {\n      const fieldError = getValueError(value[field.name], field.type as SchemaType)\n      if (fieldError) {\n        return fieldError\n      }\n    }\n  }\n\n  return undefined\n}\n\nfunction isObjectType(schemaType: SchemaType): schemaType is ObjectSchemaType {\n  return schemaType.jsonType === 'object'\n}\n\nfunction isObjectValue(value: unknown): value is Record<string, unknown> {\n  return value !== null && !Array.isArray(value) && typeof value === 'object'\n}\n","import {ArraySchemaType, isTypedObject, SchemaType} from '@sanity/types'\nimport {Diff} from '../types'\n\nexport function resolveTypeName(value: unknown): string {\n  return isTypedObject(value) ? value._type : resolveJSType(value)\n}\n\nexport function getArrayDiffItemType(\n  diff: Diff,\n  schemaType: ArraySchemaType\n): {fromType?: SchemaType; toType?: SchemaType} {\n  if (diff.action === 'added') {\n    return {\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'changed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'removed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n    }\n  }\n\n  // unchanged\n  return {\n    toType: resolveArrayMemberType(schemaType, diff.toValue),\n  }\n}\n\nfunction resolveArrayMemberType(\n  schemaType: ArraySchemaType,\n  value: unknown\n): SchemaType | undefined {\n  const typeName = resolveTypeName(value)\n  const declared = schemaType.of.find((candidate) => candidate.name === typeName)\n  if (declared) {\n    return declared as any\n  }\n\n  return (schemaType.of.length === 1 ? schemaType.of[0] : undefined) as any\n}\n\nfunction resolveJSType(val: unknown) {\n  if (Array.isArray(val)) {\n    return 'array'\n  }\n\n  if (val === null) {\n    return 'null'\n  }\n\n  return typeof val\n}\n","export const ANNOTATION_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF050', '\\uF051'],\n  ['\\uF052', '\\uF053'],\n  ['\\uF054', '\\uF055'],\n  ['\\uF056', '\\uF057'],\n  ['\\uF058', '\\uF059'],\n  ['\\uF05A', '\\uF05B'],\n  ['\\uF05C', '\\uF05D'],\n  ['\\uF05F', '\\uF060'],\n  ['\\uF061', '\\uF062'],\n  ['\\uF063', '\\uF064'],\n  ['\\uF065', '\\uF066'],\n  ['\\uF067', '\\uF068'],\n  ['\\uF069', '\\uF06A'],\n  ['\\uF06B', '\\uF06C'],\n  ['\\uF06E', '\\uF06F'],\n  ['\\uF070', '\\uF071'],\n  ['\\uF072', '\\uF073'],\n  ['\\uF074', '\\uF075'],\n  ['\\uF076', '\\uF077'],\n  ['\\uF078', '\\uF079'],\n  ['\\uF07A', '\\uF07B'],\n  ['\\uF07C', '\\uF07D'],\n  ['\\uF07E', '\\uF07F'],\n  ['\\uF080', '\\uF081'],\n  ['\\uF082', '\\uF083'],\n  ['\\uF084', '\\uF085'],\n  ['\\uF086', '\\uF087'],\n  ['\\uF088', '\\uF089'],\n  ['\\uF08A', '\\uF08B'],\n  ['\\uF08C', '\\uF08D'],\n  ['\\uF08E', '\\uF08F'],\n]\n\nexport const CHILD_SYMBOL = '\\uF0D0'\n\nexport const DECORATOR_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF000', '\\uF001'],\n  ['\\uF002', '\\uF003'],\n  ['\\uF004', '\\uF005'],\n  ['\\uF006', '\\uF007'],\n  ['\\uF008', '\\uF009'],\n  ['\\uF00A', '\\uF00B'],\n  ['\\uF00C', '\\uF00D'],\n  ['\\uF00F', '\\uF010'],\n  ['\\uF011', '\\uF012'],\n  ['\\uF013', '\\uF014'],\n  ['\\uF015', '\\uF016'],\n  ['\\uF017', '\\uF018'],\n  ['\\uF019', '\\uF01A'],\n  ['\\uF01B', '\\uF01C'],\n  ['\\uF01E', '\\uF01F'],\n  ['\\uF020', '\\uF021'],\n]\n\nexport const EMPTY_BLOCK_SYMBOL = '\\u21B2'\n\nexport const INLINE_SYMBOLS = [\n  '\\uF090',\n  '\\uF091',\n  '\\uF092',\n  '\\uF093',\n  '\\uF094',\n  '\\uF095',\n  '\\uF096',\n  '\\uF097',\n  '\\uF098',\n  '\\uF099',\n  '\\uF09A',\n  '\\uF09B',\n  '\\uF09C',\n  '\\uF09D',\n  '\\uF09E',\n  '\\uF09F',\n  '\\uF0A0',\n  '\\uF0A1',\n  '\\uF0A2',\n  '\\uF0A3',\n  '\\uF0A4',\n  '\\uF0A5',\n  '\\uF0A6',\n  '\\uF0A7',\n  '\\uF0A8',\n  '\\uF0A9',\n  '\\uF0AA',\n  '\\uF0AB',\n  '\\uF0AC',\n  '\\uF0AD',\n  '\\uF0AE',\n  '\\uF0AF',\n  '\\uF0B0',\n  '\\uF0B1',\n  '\\uF0B2',\n  '\\uF0B3',\n  '\\uF0B4',\n  '\\uF0B5',\n  '\\uF0B6',\n  '\\uF0B7',\n  '\\uF0B8',\n  '\\uF0B9',\n  '\\uF0BA',\n  '\\uF0BB',\n  '\\uF0BC',\n  '\\uF0BD',\n  '\\uF0BE',\n  '\\uF0BF',\n]\n\nexport const TRAILING_SPACE_SYMBOL = '\\u205F'\n\nexport const SEGMENT_START_SYMBOL = '\\u2060'\n","import {flatten, isEqual, orderBy} from 'lodash'\nimport {ArraySchemaType, Block, ObjectField, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {\n  diff_match_patch as DiffMatchPatch,\n  DIFF_DELETE,\n  DIFF_EQUAL,\n  DIFF_INSERT,\n} from 'diff-match-patch'\nimport {\n  ArrayDiff,\n  DiffComponent,\n  DiffComponentOptions,\n  ObjectDiff,\n  StringDiffSegment,\n} from '../../../types'\nimport * as TextSymbols from './symbols'\n\nimport {\n  InlineSymbolMap,\n  MarkSymbolMap,\n  PortableTextBlock,\n  PortableTextDiff,\n  PortableTextChild,\n  SpanTypeSchema,\n} from './types'\n\nconst dmp = new DiffMatchPatch()\n\nexport const UNKNOWN_TYPE_NAME = '_UNKOWN_TYPE_'\n\nexport function hasPTMemberType(schemaType: ArraySchemaType): boolean {\n  return schemaType.of.some(isPTSchemaType)\n}\n\nconst startMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\n)\nconst endMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n)\nconst allSymbols = startMarkSymbols\n  .concat(endMarkSymbols)\n  .concat(TextSymbols.INLINE_SYMBOLS)\n  .concat(TextSymbols.CHILD_SYMBOL)\n  .concat(TextSymbols.SEGMENT_START_SYMBOL)\nconst symbolRegex = new RegExp(`${allSymbols.join('|')}`, 'g')\nconst segmentRegex = new RegExp(`${allSymbols.join('|')}|\\n`, 'g')\n\ninterface BlockSchemaType extends ObjectSchemaType {\n  diffComponent: DiffComponent<ObjectDiff<Block>> | DiffComponentOptions<ObjectDiff<Block>>\n}\n\nexport function isPTSchemaType(schemaType: SchemaType): schemaType is BlockSchemaType {\n  return schemaType.jsonType === 'object' && schemaType.name === 'block'\n}\n\nexport function isHeader(node: PortableTextBlock): boolean {\n  return !!node.style && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(node.style)\n}\n\nexport function findChildDiff(diff: ObjectDiff, child: PortableTextChild): ObjectDiff {\n  const childrenDiff = diff.fields.children as ArrayDiff\n  return childrenDiff.items\n    .filter(\n      (item: any) =>\n        item.diff.isChanged && (item.diff.toValue === child || item.diff.fromValue === child)\n    )\n    .map((item: any) => item.diff)\n    .map((childDiff: any) => childDiff as ObjectDiff)[0]\n}\n\nexport function getChildSchemaType(\n  fields: ObjectField<SchemaType>[],\n  child: PortableTextChild\n): ObjectSchemaType | undefined {\n  const childrenField = fields.find((f) => f.name === 'children')\n  const cSchemaType =\n    (childrenField &&\n      childrenField.type &&\n      childrenField.type.jsonType === 'array' &&\n      (childrenField.type.of.find((type) => type.name === child._type) as ObjectSchemaType)) ||\n    undefined\n  return cSchemaType\n}\n\nexport function getDecorators(spanSchemaType: SpanTypeSchema): {title: string; value: string}[] {\n  if (spanSchemaType.decorators) {\n    return orderBy(spanSchemaType.decorators, ['value'], ['asc'])\n  }\n  return []\n}\n\nexport function getAnnotations(spanSchemaType: SpanTypeSchema): ObjectSchemaType[] {\n  if (spanSchemaType.annotations) {\n    return orderBy(spanSchemaType.annotations, ['name'], ['asc'])\n  }\n  return []\n}\n\nexport function isDecorator(name: string, schemaType: SpanTypeSchema): boolean {\n  return getDecorators(schemaType).some((dec) => dec.value === name)\n}\n\nexport function blockToSymbolizedText(\n  diff: ObjectDiff,\n  block: PortableTextBlock | undefined,\n  decoratorMap: MarkSymbolMap,\n  annotationMap: MarkSymbolMap,\n  inlineMap: InlineSymbolMap\n): string {\n  if (!block) {\n    return ''\n  }\n  return block.children\n    .map((child) => {\n      let returned = child.text?.replace(symbolRegex, '') || '' // Make sure symbols aren't in the text already\n      if (child._type === 'span') {\n        // Attatch stringdiff segments\n        const spanDiff = findSpanDiffFromChild(diff, child)\n        const textDiff = spanDiff?.fields.text\n        if (\n          textDiff &&\n          textDiff.toValue === child.text &&\n          textDiff.type === 'string' &&\n          textDiff.action !== 'unchanged'\n        ) {\n          returned = textDiff.segments\n            .filter((seg: any) => seg.action !== 'removed')\n            .map((seg: any) => seg.text.replace(symbolRegex, ''))\n            .join(TextSymbols.SEGMENT_START_SYMBOL)\n        }\n        if (child.marks) {\n          child.marks.forEach((mark) => {\n            const _isDecorator = !!decoratorMap[mark]\n            if (_isDecorator) {\n              returned = `${decoratorMap[mark][0]}${returned}${decoratorMap[mark][1]}`\n            } else if (annotationMap[mark]) {\n              returned = `${annotationMap[mark][0]}${returned}${annotationMap[mark][1]}`\n            }\n          })\n        }\n      } else {\n        returned = inlineMap[child._key]\n      }\n      return `${TextSymbols.CHILD_SYMBOL}${returned}`\n    })\n    .join('')\n}\n\nexport function createPortableTextDiff(\n  diff: ObjectDiff,\n  schemaType: ObjectSchemaType\n): PortableTextDiff {\n  const displayValue =\n    diff.action === 'removed'\n      ? (diff.fromValue as PortableTextBlock)\n      : (diff.toValue as PortableTextBlock)\n  const _diff: PortableTextDiff = {\n    ...diff,\n    origin: diff,\n    displayValue,\n  }\n\n  if (displayValue) {\n    const annotationMap: MarkSymbolMap = {}\n    const decoratorMap: MarkSymbolMap = {}\n    const inlineMap: InlineSymbolMap = {}\n    const spanSchemaType = getChildSchemaType(schemaType.fields, {_key: 'bogus', _type: 'span'})\n    if (spanSchemaType) {\n      getDecorators(spanSchemaType).forEach((dec, index) => {\n        decoratorMap[dec.value] = TextSymbols.DECORATOR_SYMBOLS[index]\n      })\n    }\n    const allMarkDefs = getAllMarkDefs(_diff.origin)\n    allMarkDefs.forEach((markDef, index) => {\n      annotationMap[markDef._key] = TextSymbols.ANNOTATION_SYMBOLS[index]\n    })\n    const inlines = getInlineObjects(_diff.origin)\n    inlines.forEach((inline, index) => {\n      inlineMap[inline._key] = TextSymbols.INLINE_SYMBOLS[index]\n    })\n    const fromText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.fromValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.toValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toPseudoValue = {\n      ...displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: toText,\n          marks: [],\n        },\n      ],\n    }\n    const fromPseudoValue = {\n      displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: fromText,\n          marks: [],\n        },\n      ],\n    }\n    const pseudoDiff = {\n      origin: diff,\n      action: 'changed',\n      type: 'object',\n      displayValue: toPseudoValue,\n      fromValue: fromPseudoValue,\n      toValue: toPseudoValue,\n      isChanged: true,\n      fields: {\n        children: {\n          action: 'changed',\n          type: 'array',\n          isChanged: true,\n          items: [\n            {\n              diff: {\n                action: 'changed',\n                type: 'object',\n                isChanged: true,\n                fields: {\n                  text: {\n                    type: 'string',\n                    action: 'changed',\n                    isChanged: true,\n                    fromValue: fromText,\n                    toValue: toText,\n                    segments: buildSegments(fromText, toText).map((seg) => ({\n                      ...seg,\n                      ...(_diff.action !== 'unchanged' && _diff.annotation\n                        ? {annotation: _diff.annotation} // Fallback if we can't find a spesific original diff\n                        : {}),\n                    })),\n                  },\n                },\n                fromValue: fromPseudoValue.children[0],\n                toValue: toPseudoValue.children[0],\n              },\n              annotation: null,\n              fromIndex: 0,\n              toIndex: 0,\n              hasMoved: false,\n            },\n          ],\n          fromValue: fromPseudoValue.children,\n          toValue: toPseudoValue.children,\n        },\n      },\n    }\n    return pseudoDiff as PortableTextDiff\n  }\n  throw new Error('Can not display this diff')\n}\n\nfunction buildSegments(fromInput: string, toInput: string): StringDiffSegment[] {\n  const segments: StringDiffSegment[] = []\n  const dmpDiffs = dmp.diff_main(fromInput, toInput)\n  dmp.diff_cleanupEfficiency(dmpDiffs)\n\n  let fromIdx = 0\n  let toIdx = 0\n  for (const [op, text] of dmpDiffs) {\n    switch (op) {\n      case DIFF_EQUAL:\n        segments.push({\n          type: 'stringSegment',\n          action: 'unchanged',\n          text,\n        })\n        fromIdx += text.length\n        toIdx += text.length\n        break\n      case DIFF_DELETE:\n        segments.push({\n          type: 'stringSegment',\n          action: 'removed',\n          text: fromInput.substring(fromIdx, fromIdx + text.length),\n          annotation: null,\n        })\n        fromIdx += text.length\n        break\n      case DIFF_INSERT:\n        segments.push({\n          type: 'stringSegment',\n          action: 'added',\n          text: toInput.substring(toIdx, toIdx + text.length),\n          annotation: null,\n        })\n        toIdx += text.length\n        break\n      default:\n      // Do nothing\n    }\n  }\n  // Clean up so that marks / symbols are treated as an own segment\n  return flatten(\n    segments.map((seg) => {\n      const newSegments: StringDiffSegment[] = []\n      if (seg.text.length > 1) {\n        const markMatches = [...seg.text.matchAll(segmentRegex)]\n        let lastIndex = -1\n        markMatches.forEach((match) => {\n          const index = match.index || 0\n          if (index > lastIndex) {\n            newSegments.push({...seg, text: seg.text.substring(lastIndex + 1, index)})\n            newSegments.push({...seg, text: match[0]})\n          }\n          if (match === markMatches[markMatches.length - 1]) {\n            newSegments.push({...seg, text: seg.text.substring(index + 1)})\n          }\n          lastIndex = index\n        })\n        if (markMatches.length === 0) {\n          newSegments.push(seg)\n        }\n      } else {\n        newSegments.push(seg)\n      }\n      return newSegments\n    })\n  )\n}\n\nexport function getInlineObjects(diff: ObjectDiff): PortableTextChild[] {\n  const allChildren = [\n    ...(diff.toValue ? diff.toValue.children.filter((cld: any) => cld._type !== 'span') : []),\n  ]\n  const previousChildren = diff.fromValue\n    ? diff.fromValue.children.filter((cld: any) => cld._type !== 'span')\n    : []\n  previousChildren.forEach((oCld: any) => {\n    if (!allChildren.some((cld) => oCld._key === cld._key)) {\n      allChildren.push(oCld)\n    }\n  })\n  return orderBy(allChildren, ['_key'], ['asc']) as PortableTextChild[]\n}\n\nexport function findSpanDiffFromChild(\n  diff: ObjectDiff,\n  child: PortableTextChild\n): ObjectDiff | undefined {\n  // Find span in original diff which has a string segment similar to the one from the input\n  const candidate =\n    diff.fields.children &&\n    diff.fields.children.action !== 'unchanged' &&\n    diff.fields.children.type === 'array' &&\n    diff.fields.children.items.find(\n      (item: any) =>\n        item.diff &&\n        item.diff.type === 'object' &&\n        (item.diff.action === 'removed'\n          ? item.diff.fromValue && item.diff.fromValue._key === child._key\n          : (item.diff.toValue && item.diff.toValue._key) === child._key)\n    )\n  if (candidate) {\n    return candidate.diff as ObjectDiff\n  }\n  return undefined\n}\n\nexport function findAnnotationDiff(diff: ObjectDiff, markDefKey: string): ObjectDiff | undefined {\n  return (\n    ((diff.fields.markDefs &&\n      diff.fields.markDefs.isChanged &&\n      diff.fields.markDefs.type === 'array' &&\n      diff.fields.markDefs.items.find(\n        (item: any) =>\n          item.diff &&\n          item.diff.type === 'object' &&\n          ((item.diff.toValue && item.diff.toValue._key && item.diff.toValue._key === markDefKey) ||\n            (item.diff.fromValue &&\n              item.diff.fromValue._key &&\n              item.diff.fromValue._key === markDefKey))\n      )?.diff) as ObjectDiff) || undefined\n  )\n}\n\nexport function isEmptyObject(object: PortableTextChild): boolean {\n  return (object && isEqual(Object.keys(object), ['_key', '_type'])) || false\n}\n\nexport function escapeRegExp(text: string): string {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n\nexport function getAllMarkDefs(diff: ObjectDiff): PortableTextChild[] {\n  const allDefs: PortableTextChild[] = [\n    ...(diff.toValue && diff.toValue.markDefs ? diff.toValue.markDefs : []),\n  ]\n  const oldDefs: PortableTextChild[] =\n    diff.fromValue && diff.fromValue.markDefs ? diff.fromValue.markDefs : []\n  oldDefs.forEach((oDef) => {\n    if (!allDefs.some((def) => oDef._key === def._key)) {\n      allDefs.push(oDef)\n    }\n  })\n  return orderBy(allDefs, ['_key'], ['asc'])\n}\n","import {DiffComponentResolver} from './types'\n\n// import diffResolvers from 'all:part:@sanity/base/diff-resolver'\nexport const diffResolvers: DiffComponentResolver[] = []\n","import React from 'react'\nimport {UserColor} from '../../../../user-color'\nimport {FieldPreviewComponent} from '../../../preview'\n\ntype BooleanProps = {\n  checked: boolean | undefined | null\n  color?: UserColor\n}\n\nexport const BooleanPreview: FieldPreviewComponent<boolean> = function BooleanPreview({\n  value,\n  schemaType,\n  color,\n}) {\n  const Preview = schemaType.options?.layout === 'checkbox' ? Checkbox : Switch\n  return <Preview checked={value} color={color} />\n}\n\nexport function Checkbox({checked, color}: BooleanProps) {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill={color?.background}\n    >\n      <rect x=\"0\" y=\"0\" width=\"17\" height=\"17\" rx=\"2.5\" />\n      {typeof checked === 'undefined' && (\n        <path d=\"M4.07996 8.5H12.92\" stroke={color?.text} strokeWidth=\"2\" />\n      )}\n      {checked && <path d=\"M3.5 8L7 11.5L13.5 5\" stroke={color?.text} strokeWidth=\"2\" />}\n    </svg>\n  )\n}\n\nexport function Switch({checked, color}: BooleanProps) {\n  return (\n    <svg width=\"38\" height=\"22\" viewBox=\"0 0 38 22\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"38\" height=\"22\" rx=\"11\" fill={checked ? color?.border : color?.background} />\n      {typeof checked === 'undefined' && (\n        <rect x=\"11\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n      {checked && <rect x=\"18\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />}\n      {typeof checked === 'boolean' && !checked && (\n        <rect x=\"4\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n    </svg>\n  )\n}\n","import {Box, Flex, Text} from '@sanity/ui'\nimport React from 'react'\nimport {DiffTooltip, FromToArrow, useDiffAnnotationColor} from '../../../diff'\nimport {BooleanDiff, DiffComponent} from '../../../types'\nimport {Checkbox, Switch} from '../preview'\n\nexport const BooleanFieldDiff: DiffComponent<BooleanDiff> = ({diff, schemaType}) => {\n  const {fromValue, toValue} = diff\n  const {title, options} = schemaType\n  const Preview = options?.layout === 'checkbox' ? Checkbox : Switch\n  const userColor = useDiffAnnotationColor(diff, [])\n\n  const showToValue = toValue !== undefined && toValue !== null\n\n  return (\n    <Flex align=\"center\">\n      <DiffTooltip diff={diff}>\n        <Flex align=\"center\">\n          <Preview checked={fromValue} color={userColor} />\n\n          {showToValue && (\n            <>\n              <Box marginX={2}>\n                <FromToArrow />\n              </Box>\n              <Preview checked={toValue} color={userColor} />\n            </>\n          )}\n        </Flex>\n      </DiffTooltip>\n\n      {showToValue && title && (\n        <Box marginLeft={2}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n        </Box>\n      )}\n    </Flex>\n  )\n}\n","import {Path, SanityDocument, SchemaType} from '@sanity/types'\nimport {createContext} from 'react'\nimport {ObjectDiff} from '../../types'\n\n/** @internal */\nexport type DocumentChangeContextInstance = {\n  documentId: string\n  schemaType: SchemaType\n  rootDiff: ObjectDiff | null\n  isComparingCurrent: boolean\n  FieldWrapper: React.ComponentType<{path: Path; children: React.ReactNode; hasHover: boolean}>\n  value: Partial<SanityDocument>\n}\n\n/** @internal */\nexport const DocumentChangeContext = createContext<DocumentChangeContextInstance | null>(null)\n","import {useContext} from 'react'\nimport {\n  DocumentChangeContext,\n  DocumentChangeContextInstance,\n} from '../contexts/DocumentChangeContext'\n\n/** @internal */\nexport function useDocumentChange(): DocumentChangeContextInstance {\n  const documentChange = useContext(DocumentChangeContext)\n\n  if (!documentChange) {\n    throw new Error('DocumentChange: missing context value')\n  }\n\n  return documentChange\n}\n","import {useEffect, useState} from 'react'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\nexport function useRefValue<T extends Record<string, any> = Record<string, any>>(\n  refId: string | undefined | null\n): T | undefined {\n  const [value, setValue] = useState<T | undefined>(undefined)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  useEffect(() => {\n    if (!refId) {\n      return undefined\n    }\n\n    const subscription = client.observable.getDocument<T>(refId).subscribe(setValue)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [client, refId])\n\n  // Always return undefined in the case of a falsey ref to prevent bug\n  // when going from an ID to an undefined state\n  return refId ? value : undefined\n}\n","export function getSizeDiff(prev: number | undefined, next: number | undefined): number {\n  if (!prev || !next) {\n    return 0\n  }\n\n  const increase = next - prev\n  const pct = Math.round((increase / prev) * 100)\n\n  return pct\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {DiffCard, DiffTooltip, FromTo, MetaInfo, ChangeList} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {useRefValue} from '../../../diff/hooks'\nimport {getSizeDiff} from './helpers'\nimport {File, FileAsset} from './types'\n\nconst SizeDiff = styled.div`\n  ${({theme}) => `\n    --size-diff-positive: ${theme.sanity.color.solid.positive.enabled.bg};\n    --size-diff-negative: ${theme.sanity.color.solid.critical.enabled.bg};\n  `}\n  &:not([hidden]) {\n    display: inline-block;\n  }\n\n  [data-number='positive'] {\n    color: var(--size-diff-positive);\n  }\n\n  [data-number='negative'] {\n    color: var(--size-diff-negative);\n  }\n`\n\nexport const FileFieldDiff: DiffComponent<ObjectDiff<File>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields} = diff\n  const fromAsset = fromValue?.asset\n  const toAsset = toValue?.asset\n  const prev = useRefValue<FileAsset>(fromAsset?._ref)\n  const next = useRefValue<FileAsset>(toAsset?._ref)\n\n  const changedFields = Object.entries(fields)\n    .filter(([name, field]) => field.isChanged && name !== '_type')\n    .map(([name]) => name)\n\n  const didAssetChange = changedFields.includes('asset')\n\n  const nestedFields = schemaType.fields\n    .filter((field) => field.name !== 'asset' && changedFields.includes(field.name))\n    .map((field) => field.name)\n\n  // Sizes in MB TODO: improve. Apple uses 1000^2\n  const prevSize = prev?.size && prev.size / 1000 / 1000\n  const nextSize = next?.size && next.size / 1000 / 1000\n  const pctDiff = getSizeDiff(prevSize, nextSize)\n\n  const roundedPrevSize = prevSize ? prevSize.toFixed(2) : undefined\n  const roundedNextSize = nextSize ? nextSize.toFixed(2) : undefined\n\n  const cardStyles = useMemo(() => ({display: 'block', flex: 1}), [])\n\n  const from = prev && (\n    <DiffCard as=\"del\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={prev.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Text size={0} style={{color: 'inherit'}}>{`${roundedPrevSize}MB`}</Text>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const to = next && (\n    <DiffCard as=\"ins\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={next.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Flex align=\"center\">\n          <Text size={0} style={{color: 'inherit'}}>{`${roundedNextSize}MB`}</Text>\n          {pctDiff !== 0 && (\n            <Card radius={2} padding={1} as={SizeDiff} marginLeft={2}>\n              <Text size={0} data-number={pctDiff > 0 ? 'positive' : 'negative'}>\n                {pctDiff > 0 && '+'}\n                {pctDiff}%\n              </Text>\n            </Card>\n          )}\n        </Flex>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const FileAssetChange = (\n    <>\n      {/* Removed only */}\n      {from && !to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Removed\">\n          {from}\n        </DiffTooltip>\n      )}\n\n      {/* Removed and added */}\n      {from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\">\n          <FromTo from={from} layout=\"grid\" to={to} />\n        </DiffTooltip>\n      )}\n\n      {/* Added only */}\n      {!from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Added\">\n          {to}\n        </DiffTooltip>\n      )}\n    </>\n  )\n\n  return (\n    <>\n      {didAssetChange && FileAssetChange}\n      {nestedFields.length > 0 && (\n        <Box marginTop={didAssetChange ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","// @todo: use `polished` for this?\nexport function hexToRgba(hex: string, opacity: number): string {\n  const rgba = (/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex) || ([] as string[]))\n    .slice(1)\n    .map((num) => parseInt(num, 16))\n    .concat(opacity)\n  return `rgba(${rgba.join(', ')})`\n}\n\n// @todo: replace this\nexport function simpleHash(str: string): string {\n  let hash = 0\n\n  if (str.length == 0) {\n    return hash.toString()\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n\n    // eslint-disable-next-line no-bitwise\n    hash = (hash << 5) - hash + char\n\n    // eslint-disable-next-line no-bitwise\n    hash &= hash // Convert to 32bit integer\n  }\n\n  return hash.toString()\n}\n\nexport function getDeviceDpr(): number {\n  const base = Math.ceil(window.devicePixelRatio || 1)\n  return Math.min(3, Math.max(1, base))\n}\n","import {Image, ImageCrop, ImageHotspot} from '@sanity/types'\nimport React from 'react'\nimport {DiffTooltip, useDiffAnnotationColor} from '../../../diff'\nimport {ObjectDiff} from '../../../types'\nimport {hexToRgba} from './helpers'\n\ninterface HotspotCropSVGProps {\n  crop?: ImageCrop\n  diff: ObjectDiff<Image>\n  hash: string\n  hotspot?: ImageHotspot\n  width?: number\n  height?: number\n}\n\nexport function HotspotCropSVG(\n  props: HotspotCropSVGProps & Omit<React.SVGProps<SVGElement>, 'ref' | 'width' | 'height'>\n) {\n  const {crop, diff, hash, hotspot, width = 100, height = 100, ...restProps} = props\n  const cropColor = useDiffAnnotationColor(diff, 'crop')\n  const hotspotColor = useDiffAnnotationColor(diff, 'hotspot')\n\n  return (\n    <svg\n      {...restProps}\n      fill=\"none\"\n      width={width}\n      height={height}\n      viewBox={`0 0 ${width} ${height}`}\n    >\n      <defs>\n        {crop && hotspot && (\n          <mask id={`mask-hotspot-${hash}`}>\n            <rect x={0} y={0} width={width} height={height} fill=\"#fff\" />\n            <HotspotSVG\n              hotspot={hotspot}\n              fill=\"#000\"\n              offset={1}\n              width={width}\n              height={height}\n              stroke=\"#000\"\n              strokeWidth={3}\n            />\n          </mask>\n        )}\n      </defs>\n\n      {crop && (\n        <DiffTooltip diff={diff} path=\"crop\" description=\"Crop changed\">\n          <g>\n            <CropSVG\n              crop={crop}\n              fill={hexToRgba(cropColor.border, 0.25)}\n              mask={hotspot ? `url(#mask-hotspot-${hash})` : undefined}\n              stroke={cropColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n\n      {hotspot && (\n        <DiffTooltip diff={diff} path=\"hotspot\" description=\"Hotspot changed\">\n          <g>\n            <HotspotSVG\n              hotspot={hotspot}\n              fill={hexToRgba(hotspotColor.border, 0.25)}\n              stroke={hotspotColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n    </svg>\n  )\n}\n\nfunction CropSVG({\n  crop,\n  width,\n  height,\n  ...restProps\n}: {crop: ImageCrop; width: number; height: number} & Omit<\n  React.SVGProps<SVGRectElement>,\n  'width' | 'height'\n>) {\n  const rectProps = {\n    x: crop.left * width,\n    y: crop.top * height,\n    width: (1 - crop.right - crop.left) * width,\n    height: (1 - crop.bottom - crop.top) * height,\n  }\n\n  return <rect {...restProps} {...rectProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n\nfunction HotspotSVG({\n  hotspot,\n  offset = 0,\n  width,\n  height,\n  ...restProps\n}: {hotspot: ImageHotspot; offset?: number; width: number; height: number} & Omit<\n  React.SVGProps<SVGEllipseElement>,\n  'width' | 'height'\n>) {\n  const ellipseProps = {\n    cx: hotspot.x * width,\n    cy: hotspot.y * height,\n    rx: (hotspot.width / 2) * width + offset,\n    ry: (hotspot.height / 2) * height + offset,\n  }\n\n  return <ellipse {...restProps} {...ellipseProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n","import React, {SyntheticEvent, useMemo} from 'react'\nimport {getImageDimensions, isDefaultCrop, isDefaultHotspot} from '@sanity/asset-utils'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {hues} from '@sanity/color'\nimport {useClient} from '../../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {MetaInfo} from '../../../diff'\nimport {useDocumentValues} from '../../../../store'\nimport {getDeviceDpr, simpleHash} from './helpers'\nimport {HotspotCropSVG} from './HotspotCropSVG'\nimport {ImagePreviewProps, MinimalAsset} from './types'\n\nconst ASSET_FIELDS = ['originalFilename']\n\n// To trigger error state, change `src` attribute to random string (\"foo\")\n// To trigger slow loading, use a throttling proxy (charles) or browser devtools\n\n// To trigger deleted state, set `id` to valid, non-existant image asset ID,\n// eg: 'image-1217bc35db5030739b7be571c79d3c401551911d-300x200-png'\n\nexport const NoImagePreview = () => (\n  <Card flex={1} tone=\"transparent\" padding={4} radius={2} height=\"stretch\">\n    <Flex align=\"center\" justify=\"center\" height=\"fill\">\n      <Text size={1} muted>\n        (no image)\n      </Text>\n    </Flex>\n  </Card>\n)\n\nconst ImageWrapper = styled.div`\n  height: 100%;\n  max-height: 190px;\n  position: relative;\n\n  /* Ideally the checkerboard component currently in the form builder should be made available and used here */\n  background-color: ${hues.gray[100].hex};\n  background-image: linear-gradient(45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(-45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, ${hues.gray[50].hex} 75%),\n    linear-gradient(-45deg, transparent 75%, ${hues.gray[50].hex} 75%);\n  background-size: 16px 16px;\n  background-position: 0 0, 0 8px, 8px -8px, -8px 0;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    pointer-events: none;\n  }\n\n  &[data-changed] {\n    opacity: 0.45;\n  }\n`\n\nconst Image = styled.img`\n  display: block;\n  flex: 1;\n  min-height: 0;\n  object-fit: contain;\n  width: 100%;\n  height: 100%;\n\n  &[data-action='removed'] {\n    opacity: 0.45;\n  }\n`\n\nconst HotspotDiff = styled.div`\n  svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nexport function ImagePreview(props: ImagePreviewProps): React.ReactElement {\n  const {id, action, diff, hotspot, crop, is} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const [imageError, setImageError] = React.useState<SyntheticEvent<HTMLImageElement, Event>>()\n  const {value: asset} = useDocumentValues<MinimalAsset>(id, ASSET_FIELDS)\n  const dimensions = getImageDimensions(id)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  // undefined = still loading, null = its gone\n  const assetIsDeleted = asset === null\n\n  const title = (asset && asset.originalFilename) || 'Untitled'\n  const imageSource = imageBuilder\n    .image(id)\n    .height(190) // Should match container max-height\n    .dpr(getDeviceDpr())\n    .fit('max')\n\n  const assetChanged = diff.fromValue?.asset?._ref !== diff.toValue?.asset?._ref\n\n  const metaAction = action === 'changed' ? undefined : action\n\n  return (\n    <Flex direction=\"column\" height=\"fill\" flex={1}>\n      <Box flex={1} padding={2} paddingBottom={0}>\n        <Flex\n          as={ImageWrapper}\n          direction=\"column\"\n          data-changed={is === 'from' && assetChanged ? '' : undefined}\n          data-error={imageError ? '' : undefined}\n        >\n          {!assetIsDeleted && !imageError && (\n            <Image\n              src={imageSource.toString() || ''}\n              alt={title}\n              data-action={metaAction}\n              onError={setImageError}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          )}\n\n          {(assetIsDeleted || imageError) && (\n            <Box paddingY={5}>\n              <Text size={1} muted align=\"center\">\n                {assetIsDeleted ? 'Image is deleted' : 'Error loading image'}\n              </Text>\n            </Box>\n          )}\n\n          <HotspotDiff>\n            <HotspotCropSVG\n              crop={crop && !isDefaultCrop(crop) ? crop : undefined}\n              diff={diff}\n              hash={simpleHash(`${imageSource.toString() || ''}-${is}`)}\n              hotspot={hotspot && !isDefaultHotspot(hotspot) ? hotspot : undefined}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          </HotspotDiff>\n        </Flex>\n      </Box>\n\n      <MetaInfo title={title} icon={ImageIcon} markRemoved={assetChanged && is === 'from'}>\n        {metaAction ? (\n          <div>{metaAction}</div>\n        ) : (\n          <div>\n            {dimensions.width}  {dimensions.height}\n          </div>\n        )}\n      </MetaInfo>\n    </Flex>\n  )\n}\n","import {Image} from '@sanity/types'\nimport React from 'react'\nimport {Box, Card, Text} from '@sanity/ui'\nimport {DiffCard, DiffTooltip, ChangeList, getAnnotationAtPath} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {FromTo} from '../../../diff/components'\nimport {ImagePreview, NoImagePreview} from './ImagePreview'\n\nconst IMAGE_META_FIELDS = ['crop', 'hotspot']\nconst BASE_IMAGE_FIELDS = ['asset', ...IMAGE_META_FIELDS]\n\nconst CARD_STYLES = {\n  flex: 1,\n}\n\nexport const ImageFieldDiff: DiffComponent<ObjectDiff<Image>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields, isChanged} = diff\n  const fromRef = fromValue?.asset?._ref\n  const toRef = toValue?.asset?._ref\n  const assetAnnotation = getAnnotationAtPath(diff, ['asset', '_ref'])\n\n  // Get all the changed fields within this image field\n  const changedFields = Object.keys(fields).filter(\n    (name) => fields[name].isChanged && name !== '_type'\n  )\n\n  const nestedFields = schemaType.fields\n    .filter(\n      (field) => !BASE_IMAGE_FIELDS.includes(field.name) && changedFields.includes(field.name)\n    )\n    .map((field) => field.name)\n\n  let assetAction: 'changed' | 'added' | 'removed' = 'changed'\n  if (!fromRef && toRef) {\n    assetAction = 'added'\n  } else if (!toRef && fromRef) {\n    assetAction = 'removed'\n  }\n\n  const didAssetChange = changedFields.includes('asset')\n  const didCropChange = changedFields.includes('crop')\n  const didHotspotChange = changedFields.includes('hotspot')\n  const didMetaChange = didCropChange || didHotspotChange\n  const showImageDiff = didAssetChange || didMetaChange\n  const showMetaChange = didMetaChange && !didAssetChange\n\n  const from =\n    fromValue && fromRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"from\"\n          id={fromRef}\n          diff={diff}\n          action={assetAction}\n          hotspot={showMetaChange && didHotspotChange ? fromValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? fromValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  const to =\n    toValue && toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"to\"\n          id={toRef}\n          diff={diff}\n          hotspot={showMetaChange && didHotspotChange ? toValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? toValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  if (!from && !to) {\n    return (\n      <Card padding={4} radius={2} tone=\"transparent\">\n        <Text muted size={1} align=\"center\">\n          Image not set\n        </Text>\n      </Card>\n    )\n  }\n\n  if (!isChanged) {\n    return toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview id={toRef} is=\"to\" diff={diff} />\n      </DiffCard>\n    ) : null\n  }\n\n  const imageDiff = <FromTo align=\"center\" from={from} layout=\"grid\" to={to} />\n\n  return (\n    <>\n      {showImageDiff &&\n        (didAssetChange ? (\n          <DiffTooltip\n            annotations={assetAnnotation ? [assetAnnotation] : []}\n            description={`${assetAction[0].toUpperCase()}${assetAction.slice(1)}`}\n          >\n            {imageDiff}\n          </DiffTooltip>\n        ) : (\n          imageDiff\n        ))}\n      {nestedFields.length > 0 && (\n        <Box marginTop={showImageDiff ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst NumberWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n`\n\nexport const NumberPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={NumberWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, NumberDiff} from '../../../types'\nimport {NumberPreview} from '../preview/NumberPreview'\n\nexport const NumberFieldDiff: DiffComponent<NumberDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={NumberPreview}\n      layout=\"inline\"\n    />\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Quote = styled.blockquote`\n  margin: 0;\n`\n\nexport default function Blockquote({children}: {children: React.ReactNode}): JSX.Element {\n  return (\n    <div>\n      <Quote>{children}</Quote>\n    </div>\n  )\n}\n","import {Heading} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst headingSizes: Record<string, number | undefined> = {\n  h1: 2,\n  h2: 1,\n  h3: 0,\n  h4: 0,\n  h5: 0,\n  h6: 0,\n}\n\nconst StyledHeading = styled(Heading)`\n  &:not([hidden]) {\n    display: inline;\n    text-transform: none;\n    margin: 0;\n\n    &::before,\n    &::after {\n      content: unset;\n    }\n  }\n`\n\nexport default function Header({\n  style,\n  children,\n}: {\n  style: string\n  children: React.ReactNode\n}): JSX.Element {\n  return <StyledHeading size={headingSizes[style]}>{children}</StyledHeading>\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst StyledParagraph = styled.p`\n  text-transform: none;\n  white-space: wrap;\n  overflow-wrap: break-word;\n  margin: 0;\n`\n\nexport default function Paragraph({children}: {children: React.ReactNode}): JSX.Element {\n  return <StyledParagraph>{children}</StyledParagraph>\n}\n","import {Box, Card, Stack, Text} from '@sanity/ui'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useContext} from 'react'\nimport {DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {isHeader} from '../helpers'\nimport {PortableTextBlock, PortableTextDiff} from '../types'\nimport {ConnectorContext} from '../../../../../changeIndicators'\nimport Blockquote from './Blockquote'\nimport Header from './Header'\nimport Paragraph from './Paragraph'\n\nconst EMPTY_PATH: Path = []\n\nexport default function Block(props: {\n  diff: PortableTextDiff\n  block: PortableTextBlock\n  children: JSX.Element\n}): JSX.Element {\n  const {diff, block, children} = props\n  const color = useDiffAnnotationColor(diff, EMPTY_PATH)\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const isRemoved = diff.action === 'removed'\n  let returned = children\n\n  const handleClick = useCallback(\n    (event: any) => {\n      event.stopPropagation()\n\n      if (!isRemoved) {\n        onSetFocus(fullPath)\n      }\n    },\n    [fullPath, isRemoved, onSetFocus]\n  )\n\n  if (block.style === 'blockquote') {\n    returned = <Blockquote>{returned}</Blockquote>\n  } else if (block.style && isHeader(block)) {\n    returned = <Header style={block.style}>{returned}</Header>\n  } else {\n    returned = <Paragraph>{returned}</Paragraph>\n  }\n\n  let fromStyle: string | undefined\n  // If style was changed, indicate that\n  if (\n    diff.origin.action === 'changed' &&\n    diff.origin.fields.style &&\n    diff.origin.fields.style.action === 'changed' &&\n    diff.origin.fields.style.annotation\n  ) {\n    fromStyle = diff?.origin?.fromValue?.style\n\n    const style = color ? {background: color.background, color: color.text} : {}\n\n    returned = (\n      <Card\n        padding={3}\n        border\n        radius={2}\n        style={{borderStyle: 'dotted'}}\n        diff-block-action={diff.action}\n        data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n      >\n        <Stack space={2}>\n          <DiffTooltip\n            annotations={[diff.origin.fields.style?.annotation]}\n            diff={diff.origin.fields.style}\n          >\n            <Text size={0}>Changed block style from '{fromStyle}'</Text>\n          </DiffTooltip>\n          <Box style={style}>{returned}</Box>\n        </Stack>\n      </Card>\n    )\n  }\n\n  return (\n    <div\n      onClick={handleClick}\n      data-diff-block-action={diff.action}\n      data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n    >\n      {returned}\n    </div>\n  )\n}\n","import {Box, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const InlineBox = styled(Box)`\n  &:not([hidden]) {\n    display: inline;\n    align-items: center;\n\n    &[data-changed] {\n      cursor: pointer;\n    }\n  }\n`\n\nexport const InlineText = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    color: inherit;\n  }\n`\n\nexport const PreviewContainer = styled(Box)`\n  &:not([hidden]) {\n    display: inline-flex;\n    align-items: center;\n\n    ${InlineBox} [data-ui=\"Text\"] {\n      opacity: 0.5;\n    }\n  }\n`\n\nexport const PopoverContainer = styled(Box)`\n  min-width: 160px;\n  max-height: 40vh;\n  overflow-y: auto;\n`\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {useClickOutside, Label, Popover, Flex} from '@sanity/ui'\nimport {toString} from '@sanity/util/paths'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport React, {useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {ConnectorContext, useReportedValues} from '../../../../../changeIndicators'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface AnnotationProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  schemaType?: ObjectSchemaType\n  path: Path\n  children: React.ReactNode\n}\n\nconst AnnotationWrapper = styled.div`\n  text-decoration: none;\n  display: inline;\n  position: relative;\n  border: 0;\n  padding: 0;\n  border-bottom: 2px dotted currentColor;\n  box-shadow: inset 0 0 0 1px var(--card-border-color);\n  white-space: nowrap;\n  align-items: center;\n  background-color: color(var(--card-fg-color) a(10%));\n\n  &[data-changed] {\n    cursor: pointer;\n  }\n\n  &[data-removed] {\n    text-decoration: line-through;\n  }\n\n  &:hover ${PreviewContainer} {\n    opacity: 1;\n  }\n`\n\nexport function Annotation({\n  children,\n  diff,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnotationProps) {\n  if (!schemaType) {\n    return <AnnotationWrapper {...restProps}>Unknown schema type</AnnotationWrapper>\n  }\n  if (diff && diff.action !== 'unchanged') {\n    return (\n      <AnnnotationWithDiff\n        {...restProps}\n        diff={diff}\n        object={object}\n        schemaType={schemaType}\n        path={path}\n      >\n        {children}\n      </AnnnotationWithDiff>\n    )\n  }\n  return <AnnotationWrapper>{children}</AnnotationWrapper>\n}\n\ninterface AnnnotationWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  schemaType: ObjectSchemaType\n  path: Path\n  children?: React.ReactNode\n}\n\nfunction AnnnotationWithDiff({\n  diff,\n  children,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnnotationWithDiffProps) {\n  const {onSetFocus} = useContext(ConnectorContext)\n  const {path: fullPath} = useContext(DiffContext)\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const isRemoved = diff.action === 'removed'\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: object._key}]),\n    [object._key, path]\n  )\n  const prefix = useMemo(\n    () =>\n      fullPath.slice(\n        0,\n        fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n      ),\n    [fullPath, object._key]\n  )\n  const annotationPath = useMemo(() => prefix.concat(path), [path, prefix])\n  const myPath = useMemo(() => prefix.concat(markDefPath), [markDefPath, prefix])\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = useMemo(\n    () => values.filter(([p]) => p.startsWith(myValue)).length > 0,\n    [myValue, values]\n  )\n\n  useEffect(() => {\n    if (!open && isEditing) {\n      setOpen(true)\n      onSetFocus(myPath)\n    }\n  }, [isEditing, myPath, onSetFocus, open])\n\n  const handleOpenPopup = useCallback(\n    (event: any) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(annotationPath) // Go to span first\n        setTimeout(() => onSetFocus(myPath), 10) // Open edit object interface\n      }\n    },\n    [annotationPath, isRemoved, myPath, onSetFocus]\n  )\n\n  const handleClickOutside = useCallback(() => {\n    if (!isEditing) {\n      setOpen(false)\n    }\n  }, [isEditing])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = useMemo(() => (annotation ? [annotation] : []), [annotation])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContainer padding={3}>\n        <div>\n          {emptyObject && (\n            <Label size={1} muted>\n              Empty {schemaType.title}\n            </Label>\n          )}\n          {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n        </div>\n      </PopoverContainer>\n    </DiffContext.Provider>\n  )\n\n  return (\n    <AnnotationWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-changed=\"\"\n      data-removed={diff.action === 'removed' ? '' : undefined}\n    >\n      <Popover content={popoverContent} open={open} ref={setPopoverElement} portal>\n        <PreviewContainer paddingLeft={1}>\n          <DiffTooltip annotations={annotations} description={`${diff.action} annotation`}>\n            <InlineBox style={{display: 'inline-flex'}}>\n              <span>{children}</span>\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </AnnotationWrapper>\n  )\n}\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst DecoratorWrapper = styled.span`\n  display: inline;\n  ${({theme, decoration}: {theme: Theme; decoration: string}) => {\n    switch (decoration) {\n      case 'strong':\n        return 'font-weight: bold;'\n      case 'em':\n        return 'font-style: italic;'\n      case 'underline':\n        return 'text-decoration: underline;'\n      case 'overline':\n        return 'text-decoration: overline;'\n      case 'strike-through':\n        return 'text-decoration: line-through;'\n      case 'code':\n        return `\n          font-family: ${theme.sanity.fonts.code.family};\n          background: ${theme.sanity.color.muted.default.enabled.bg};\n        `\n      default:\n        return ''\n    }\n  }}\n`\n\nexport default function Decorator({mark, children}: {mark: string; children: JSX.Element}) {\n  return <DecoratorWrapper decoration={mark}>{children}</DecoratorWrapper>\n}\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport {Card, Flex, Label, Popover, useClickOutside} from '@sanity/ui'\nimport {FOCUS_TERMINATOR, toString} from '@sanity/util/paths'\nimport React, {useCallback, useContext, useState, useEffect, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {SanityPreview} from '../../../../../preview'\nimport {ConnectorContext, useReportedValues} from '../../../../../changeIndicators'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface InlineObjectProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType?: ObjectSchemaType\n}\n\nconst InlineObjectWrapper = styled(Card)`\n  &:not([hidden]) {\n    display: inline;\n    cursor: pointer;\n    white-space: nowrap;\n    align-items: center;\n\n    &[data-removed] {\n      text-decoration: line-through;\n    }\n\n    ${InlineBox} {\n      display: inline-flex;\n    }\n  }\n`\n\nexport function InlineObject({diff, object, schemaType, ...restProps}: InlineObjectProps) {\n  if (!schemaType) {\n    return (\n      <InlineObjectWrapper {...restProps} border radius={1}>\n        Unknown schema type: {object._type}\n      </InlineObjectWrapper>\n    )\n  }\n\n  if (diff) {\n    return (\n      <InlineObjectWithDiff {...restProps} diff={diff} object={object} schemaType={schemaType} />\n    )\n  }\n\n  return (\n    <InlineObjectWrapper>\n      <SanityPreview schemaType={schemaType} value={object as any} layout=\"inline\" />\n    </InlineObjectWrapper>\n  )\n}\n\ninterface InlineObjectWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType: ObjectSchemaType\n}\n\nfunction InlineObjectWithDiff({\n  diff,\n  object,\n  path,\n  schemaType,\n  ...restProps\n}: InlineObjectWithDiffProps) {\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const isRemoved = diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n  )\n  const myPath = prefix.concat(path)\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = values.filter(([p]) => p.startsWith(myValue)).length > 0\n\n  const focusPath = fullPath.slice(0, -1).concat(path).concat([FOCUS_TERMINATOR])\n\n  useEffect(() => {\n    if (isEditing) {\n      setOpen(true)\n      onSetFocus(focusPath)\n    }\n  }, [isEditing])\n\n  const handleOpenPopup = useCallback(\n    (event: any) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        onSetFocus(focusPath)\n        return\n      }\n      event.preventDefault()\n    },\n    [focusPath]\n  )\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContent\n        diff={diff}\n        emptyObject={emptyObject}\n        onClose={handleClose}\n        schemaType={schemaType}\n      />\n    </DiffContext.Provider>\n  )\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = annotation ? [annotation] : []\n\n  return (\n    <InlineObjectWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-removed={diff.action === 'removed' ? '' : undefined}\n      border\n      radius={2}\n    >\n      <Popover content={popoverContent} open={open} portal>\n        <PreviewContainer>\n          <DiffTooltip annotations={annotations} description={`${diff.action} inline object`}>\n            <InlineBox>\n              <SanityPreview schemaType={schemaType} value={object as any} layout=\"inline\" />\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </InlineObjectWrapper>\n  )\n}\n\nfunction PopoverContent({\n  diff,\n  emptyObject,\n  onClose,\n  schemaType,\n}: {\n  diff: ObjectDiff\n  emptyObject: boolean\n  onClose: () => void\n  schemaType: ObjectSchemaType\n}) {\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  // const {isTopLayer} = useLayer()\n\n  const handleClickOutside = useCallback(() => {\n    // Popover doesn't close at all when using this condition\n    // if (!isTopLayer) return\n    onClose()\n  }, [onClose])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  return (\n    <PopoverContainer ref={setPopoverElement} padding={3}>\n      {emptyObject && (\n        <Label size={1} muted>\n          Empty {schemaType.title}\n        </Label>\n      )}\n      {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n    </PopoverContainer>\n  )\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport React, {SyntheticEvent, useCallback, useMemo} from 'react'\nimport {startCase} from 'lodash'\nimport {DiffCard, DiffContext} from '../../../../diff'\nimport {ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {ConnectorContext} from '../../../../../changeIndicators'\nimport {InlineBox} from './styledComponents'\n\ninterface TextProps {\n  diff?: StringDiff\n  childDiff?: ObjectDiff\n  children: JSX.Element\n  path: Path\n  segment: StringDiffSegment\n}\n\nexport function Text({\n  diff,\n  childDiff,\n  children,\n  path,\n  segment,\n  ...restProps\n}: TextProps & Omit<React.HTMLProps<HTMLSpanElement>, 'onClick'>) {\n  const diffWithFallback = diff || childDiff\n  const hasChanged =\n    diffWithFallback && diffWithFallback.action !== 'unchanged' && segment.action !== 'unchanged'\n  if (hasChanged) {\n    return (\n      <TextWithDiff {...restProps} childDiff={childDiff} diff={diff} segment={segment} path={path}>\n        {children}\n      </TextWithDiff>\n    )\n  }\n  return <InlineBox>{children}</InlineBox>\n}\n\nexport function TextWithDiff({diff, childDiff, children, path, segment, ...restProps}: TextProps) {\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const {path: fullPath} = React.useContext(DiffContext)\n  const spanSegment = useMemo(() => path.slice(-2, 1)[0], [path])\n  const isRemoved = diff && diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex(\n      (seg) => isKeySegment(seg) && isKeySegment(spanSegment) && seg._key === spanSegment._key\n    )\n  )\n  const focusPath = prefix.concat(path)\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      event.stopPropagation()\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(focusPath)\n      }\n    },\n    [focusPath, isRemoved, onSetFocus]\n  )\n  const realSeg = diff && diff.segments.find((rSeg: any) => rSeg.text === segment.text)\n\n  const diffWithFallback = realSeg || diff || childDiff\n  const annotation =\n    (diffWithFallback && diffWithFallback.action !== 'unchanged' && diffWithFallback.annotation) ||\n    null\n  const diffCard =\n    annotation && segment.action !== 'unchanged' ? (\n      <DiffCard\n        annotation={annotation}\n        as={segment.action === 'removed' ? 'del' : 'ins'}\n        tooltip={{description: `${startCase(segment.action)} text`}}\n      >\n        {children}\n      </DiffCard>\n    ) : null\n  return (\n    <InlineBox {...restProps} onClick={handleClick} data-changed=\"\">\n      <span>\n        <>{diffCard || children}</>\n      </span>\n    </InlineBox>\n  )\n}\n","import {ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {startCase, uniq, xor} from 'lodash'\nimport React, {ReactElement, useCallback, useMemo} from 'react'\nimport {DiffCard} from '../../../../diff'\nimport {ArrayDiff, ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {PortableTextBlock, PortableTextChild, PortableTextDiff, SpanTypeSchema} from '../types'\n\nimport * as TextSymbols from '../symbols'\n\nimport {\n  escapeRegExp,\n  getAllMarkDefs,\n  findChildDiff,\n  findAnnotationDiff,\n  findSpanDiffFromChild,\n  getChildSchemaType,\n  getDecorators,\n  getInlineObjects,\n  isDecorator,\n} from '../helpers'\n\nimport Block from './Block'\nimport {Annotation} from './Annotation'\nimport Decorator from './Decorator'\nimport {InlineObject} from './InlineObject'\nimport {Text} from './Text'\n\nconst decoratorSymbolsStart = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0])\nconst decoratorSymbolsEnd = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1])\nconst annotationSymbolsStart = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\nconst annotationSymbolsEnd = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n\nconst allSymbolsStart = decoratorSymbolsStart.concat(annotationSymbolsStart)\nconst allSymbolsEnd = decoratorSymbolsEnd.concat(annotationSymbolsEnd)\n\nconst allDecoratorSymbols = decoratorSymbolsStart.concat(decoratorSymbolsEnd)\nconst markRegex = new RegExp(`${allDecoratorSymbols.concat(allSymbolsEnd).join('|')}`, 'g')\n\ntype Props = {\n  diff: PortableTextDiff\n  schemaType: ObjectSchemaType\n}\n\nexport default function PortableText(props: Props): JSX.Element {\n  const {diff, schemaType} = props\n  const block = (diff.origin.toValue || diff.origin.fromValue) as PortableTextBlock\n\n  const inlineObjects = useMemo(\n    () => (diff.origin.toValue ? getInlineObjects(diff.origin) : []),\n    [diff.origin]\n  )\n\n  const renderChild = useCallback(\n    (ptDiffChild: PortableTextChild) => {\n      const spanSchemaType = getChildSchemaType(schemaType.fields, ptDiffChild) as SpanTypeSchema\n      let decoratorTypes: {title: string; value: string}[] = []\n      if (spanSchemaType) {\n        decoratorTypes = getDecorators(spanSchemaType)\n        const childrenDiff = diff.fields.children as ArrayDiff\n        const segments =\n          (childrenDiff.items[0].diff &&\n            childrenDiff.items[0].diff.type === 'object' &&\n            childrenDiff.items[0].diff.fields.text.type === 'string' &&\n            childrenDiff.items[0].diff.fields.text.segments) ||\n          []\n        const returnedChildren: React.ReactNode[] = []\n        const annotationSegments: Record<string, React.ReactNode[]> = {}\n        // Special case for new empty PT-block (single span child with empty text)\n        if (\n          isEmptyTextChange(block, diff) &&\n          (diff.origin.action === 'added' || diff.origin.action === 'removed')\n        ) {\n          const textDiff = findChildDiff(diff.origin, block.children[0]) || diff.origin\n          if (textDiff && textDiff.action !== 'unchanged') {\n            return (\n              <DiffCard\n                annotation={textDiff.annotation}\n                as={textDiff.action === 'removed' ? 'del' : 'ins'}\n                key={`empty-block-${block._key}`}\n                tooltip={{\n                  description: `${startCase(textDiff.action)} empty text`,\n                }}\n              >\n                <span>{TextSymbols.EMPTY_BLOCK_SYMBOL}</span>\n              </DiffCard>\n            )\n          }\n        }\n        // Run through all the segments from the PortableTextDiff\n        let childToIndex = -1\n        let segIndex = -1\n        const activeAnnotations: {mark: string; object: PortableTextChild; symbols: string[]}[] = []\n        let endedAnnotation:\n          | {mark: string; object: PortableTextChild; symbols: string[]}\n          | undefined\n        const allMarkDefs = getAllMarkDefs(diff.origin)\n        segments.forEach((seg) => {\n          segIndex++\n          const isInline = TextSymbols.INLINE_SYMBOLS.includes(seg.text)\n          const isMarkStart = allSymbolsStart.includes(seg.text)\n          const isMarkEnd = allSymbolsEnd.includes(seg.text)\n          const isChildStart = seg.text === TextSymbols.CHILD_SYMBOL\n          const isRemoved = seg.action === 'removed'\n          if (isChildStart) {\n            if (!isRemoved) {\n              childToIndex++\n            }\n            // No output\n          } else if (isMarkStart || isMarkEnd) {\n            if (isMarkStart && annotationSymbolsStart.includes(seg.text)) {\n              const object = allMarkDefs[annotationSymbolsStart.indexOf(seg.text)]\n              if (object) {\n                activeAnnotations.push({\n                  mark: object._key,\n                  symbols: [\n                    seg.text,\n                    annotationSymbolsEnd[annotationSymbolsStart.indexOf(seg.text)],\n                  ],\n                  object,\n                })\n              }\n            }\n            if (isMarkEnd && annotationSymbolsEnd.includes(seg.text)) {\n              endedAnnotation = activeAnnotations.pop()\n            }\n            // No output\n          } else if (isInline) {\n            // Render inline object\n            const indexOfSymbol = TextSymbols.INLINE_SYMBOLS.findIndex((sym) => sym === seg.text)\n            const key = inlineObjects[indexOfSymbol]?._key\n            const originChild = inlineObjects[indexOfSymbol]\n            if (key) {\n              const objectSchemaType = getChildSchemaType(schemaType.fields, originChild)\n              const objectDiff = findChildDiff(diff.origin, originChild)\n              returnedChildren.push(\n                <InlineObject\n                  key={`inline-object-${originChild._key}`}\n                  object={originChild}\n                  path={[{_key: block._key}, 'children', {_key: originChild._key}]}\n                  diff={objectDiff}\n                  schemaType={objectSchemaType}\n                />\n              )\n            }\n          } else if (seg.text) {\n            // TODO: find a better way of getting a removed child\n            const getChildFromFromValue = () =>\n              diff.origin.fromValue?.children.find(\n                (cld: any) => cld.text && cld.text.match(escapeRegExp(seg.text))\n              ) as PortableTextChild\n            const child = block.children[childToIndex] || getChildFromFromValue()\n            const childDiff = child && findSpanDiffFromChild(diff.origin, child)\n            if (!child) {\n              throw new Error('Could not find child')\n            }\n            const textDiff = childDiff?.fields?.text\n              ? (childDiff?.fields?.text as StringDiff)\n              : undefined\n            const text = (\n              <Text\n                diff={textDiff}\n                key={`text-${child._key}-${segIndex}`}\n                path={[{_key: block._key}, 'children', {_key: child._key}]}\n                childDiff={childDiff}\n                segment={seg}\n              >\n                {renderTextSegment({\n                  diff,\n                  child,\n                  decoratorTypes,\n                  seg,\n                  segIndex,\n                  spanSchemaType,\n                })}\n              </Text>\n            )\n\n            // Render annotations text changes within the annotation child\n            if (activeAnnotations.length > 0) {\n              activeAnnotations.forEach((active) => {\n                annotationSegments[active.mark] = annotationSegments[active.mark] || []\n                annotationSegments[active.mark].push(text)\n              })\n            }\n            if (endedAnnotation) {\n              const key = `annotation-${endedAnnotation.object._key}`\n              const lastChild = returnedChildren[returnedChildren.length - 1] as ReactElement\n              if (lastChild && lastChild.key !== key) {\n                const annotationDiff = findAnnotationDiff(diff.origin, endedAnnotation.mark)\n                const objectSchemaType =\n                  endedAnnotation &&\n                  spanSchemaType.annotations &&\n                  spanSchemaType.annotations.find(\n                    (type) =>\n                      endedAnnotation &&\n                      endedAnnotation.object &&\n                      type.name === endedAnnotation.object._type\n                  )\n                returnedChildren.push(\n                  <Annotation\n                    object={endedAnnotation.object}\n                    diff={annotationDiff}\n                    path={[{_key: block._key}, 'children', {_key: child._key}]}\n                    schemaType={objectSchemaType}\n                    key={key}\n                  >\n                    <>{annotationSegments[endedAnnotation.mark]}</>\n                  </Annotation>\n                )\n              }\n              // delete annotationSegments[endedAnnotation.mark]\n              endedAnnotation = undefined\n            }\n            if (activeAnnotations.length === 0) {\n              returnedChildren.push(text)\n            }\n          } // end if seg.text\n        })\n        return React.createElement('div', {key: block._key}, ...returnedChildren)\n      }\n      throw new Error(\"'span' schemaType not found\")\n    },\n    [block, diff, inlineObjects, schemaType]\n  )\n\n  return (\n    <Block block={diff.displayValue} diff={diff}>\n      {<>{(diff.displayValue.children || []).map((child) => renderChild(child))}</>}\n    </Block>\n  )\n}\n\nfunction renderTextSegment({\n  diff,\n  child,\n  decoratorTypes,\n  seg,\n  segIndex,\n  spanSchemaType,\n}: {\n  diff: PortableTextDiff\n  child: PortableTextChild\n  decoratorTypes: {title: string; value: string}[]\n  seg: StringDiffSegment\n  segIndex: number\n  spanSchemaType: SpanTypeSchema\n}): JSX.Element {\n  // Newlines\n  if (seg.text === '\\n') {\n    return <br />\n  }\n  // Make sure we render trailing spaces correctly\n  let children = (\n    <span key={`text-${segIndex}`}>\n      {seg.text.replace(/ /g, TextSymbols.TRAILING_SPACE_SYMBOL)}\n    </span>\n  )\n  const spanDiff = child && findSpanDiffFromChild(diff.origin, child)\n  // Render decorator diff info\n  const activeMarks = child.marks || []\n  if (spanDiff) {\n    children = renderDecorators({\n      activeMarks,\n      decoratorTypes,\n      diff,\n      children,\n      seg,\n      segIndex,\n      spanDiff,\n      spanSchemaType,\n    })\n  }\n  // Render the segment with the active marks\n  if (activeMarks && activeMarks.length > 0) {\n    activeMarks.forEach((mark) => {\n      if (isDecorator(mark, spanSchemaType)) {\n        children = (\n          // eslint-disable-next-line react/no-array-index-key\n          <Decorator mark={mark} key={`decorator-${mark}-${child._key}-${segIndex}`}>\n            {children}\n          </Decorator>\n        )\n      }\n    })\n  }\n  return children\n}\n\nfunction renderDecorators({\n  activeMarks,\n  decoratorTypes,\n  diff,\n  children,\n  seg,\n  segIndex,\n  spanDiff,\n  spanSchemaType,\n}: {\n  activeMarks: string[]\n  decoratorTypes: {title: string; value: string}[]\n  diff: PortableTextDiff\n  children: JSX.Element\n  seg: StringDiffSegment\n  segIndex: number\n  spanDiff: ObjectDiff\n  spanSchemaType: SchemaType\n}): JSX.Element {\n  let returned = <span key={`text-segment-${segIndex}`}>{children}</span>\n  const fromPtDiffText: string =\n    (diff.origin.fromValue && diff.fromValue && diff.fromValue.children[0].text) || '' // Always one child\n\n  // There are cases where we have changed marks, but it's an indirect change in the diff data.\n  // For example when '<>normal-text</><>bold-text</>' and 'bold' is unbolded. Then 'bold' is added to first span,\n  // and 'bold' is removed from the second span: '<>normal-text-bold</><>-text</>'. No marks are changed.\n  // We do however want to indicate to the user that someone removed bold from 'bold'\n  // In these cases, fallback to the diff annotation information in the span itself.\n  const indirectMarksAnnotation =\n    (spanDiff && spanDiff.action !== 'unchanged' && spanDiff.annotation) || undefined\n\n  const marksDiff = spanDiff?.fields?.marks as ArrayDiff\n  const marksAnnotation =\n    (marksDiff && marksDiff.action !== 'unchanged' && marksDiff.annotation) ||\n    indirectMarksAnnotation\n\n  let marksChanged: string[] = []\n  const ptDiffChildren = fromPtDiffText\n    .split(TextSymbols.CHILD_SYMBOL)\n    .filter((text) => !!text)\n    .join('')\n  const ptDiffMatchString = ptDiffChildren\n  const controlString = ptDiffMatchString.substring(\n    0,\n    ptDiffMatchString.indexOf(seg.text) + seg.text.length\n  )\n  const toTest = controlString.substring(0, controlString.indexOf(seg.text))\n  const marks: string[] = []\n  const matches = [...toTest.matchAll(markRegex)]\n  matches.forEach((match) => {\n    const sym = match[0]\n    const set = TextSymbols.DECORATOR_SYMBOLS.concat(TextSymbols.ANNOTATION_SYMBOLS).find(\n      (aSet) => aSet.indexOf(sym) > -1\n    )\n    if (set) {\n      const isMarkStart = sym === set[0]\n      const mark: string =\n        decoratorTypes[\n          isMarkStart ? decoratorSymbolsStart.indexOf(sym) : decoratorSymbolsEnd.indexOf(sym)\n        ]?.value || sym // Annotation marks are uniqe anyway\n      const notClosed = toTest.lastIndexOf(sym) > toTest.lastIndexOf(set[1])\n      if (notClosed) {\n        marks.push(mark)\n      }\n    }\n  })\n  marksChanged = xor(activeMarks, uniq(marks))\n  // Only for decorators, annotations are taken care of elsewhere\n  if (\n    marksAnnotation &&\n    marksChanged.length > 0 &&\n    marksChanged.some((m) => isDecorator(m, spanSchemaType))\n  ) {\n    returned = (\n      <DiffCard\n        annotation={marksAnnotation}\n        key={`diffcard-annotation-${segIndex}-${marksChanged.join('-')}`}\n        as={'ins'}\n        tooltip={{\n          description: 'Changed formatting',\n        }}\n      >\n        {returned}\n      </DiffCard>\n    )\n  }\n  return returned\n}\n\nfunction isEmptyTextChange(block: PortableTextBlock, diff: PortableTextDiff) {\n  return (\n    block.children.length === 1 &&\n    block.children[0]._type === 'span' &&\n    typeof block.children[0].text === 'string' &&\n    block.children[0].text === '' &&\n    diff.origin.action !== 'unchanged'\n  )\n}\n","import React, {useMemo} from 'react'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport PortableText from './components/PortableText'\nimport {createPortableTextDiff} from './helpers'\n\nexport const PTDiff: DiffComponent<ObjectDiff> = (props) => {\n  const {diff, schemaType} = props\n\n  const ptDiff = useMemo(() => createPortableTextDiff(diff, schemaType), [diff, schemaType])\n\n  return (\n    <div data-diff-action={diff.action}>\n      <PortableText diff={ptDiff} schemaType={schemaType} />\n    </div>\n  )\n}\n","import {Reference} from '@sanity/types'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Box} from '@sanity/ui'\nimport {SanityPreview} from '../../../../preview'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst ReferenceWrapper = styled.div`\n  word-wrap: break-word;\n`\n\nexport const ReferencePreview: FieldPreviewComponent<Reference> = ({value, schemaType}) => (\n  <Box as={ReferenceWrapper} padding={2}>\n    <SanityPreview schemaType={schemaType} value={value} layout=\"default\" />\n  </Box>\n)\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, ReferenceDiff} from '../../../types'\nimport {ReferencePreview} from '../preview/ReferencePreview'\n\nexport const ReferenceFieldDiff: DiffComponent<ReferenceDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      align=\"center\"\n      diff={diff}\n      layout=\"grid\"\n      path=\"_ref\"\n      previewComponent={ReferencePreview}\n      schemaType={schemaType}\n    />\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst StringWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const StringPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={StringWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {DiffFromTo, DiffString} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {StringPreview} from '../preview/StringPreview'\n\nconst StringWrapper = styled.div`\n  white-space: pre-wrap;\n  word-wrap: break-word;\n`\n\nexport const StringFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  const {options} = schemaType\n\n  if (options?.list) {\n    // When the string is considered to be an \"enum\", don't show individual\n    // string segment changes, rather treat is as a \"from -> to\" diff\n    return <DiffFromTo diff={diff} previewComponent={StringPreview} schemaType={schemaType} />\n  }\n\n  return (\n    <StringWrapper>\n      <DiffString diff={diff} />\n    </StringWrapper>\n  )\n}\n","import {DiffComponent, DiffComponentOptions} from '../../types'\n\nimport {BooleanFieldDiff} from '../../types/boolean/diff'\nimport {FileFieldDiff} from '../../types/file/diff'\nimport {ImageFieldDiff} from '../../types/image/diff'\nimport {NumberFieldDiff} from '../../types/number/diff'\nimport {PTDiff} from '../../types/portableText/diff'\nimport {ReferenceFieldDiff} from '../../types/reference/diff'\nimport {StringFieldDiff} from '../../types/string/diff'\n\nexport const defaultComponents: Record<\n  string,\n  DiffComponent<any> | DiffComponentOptions<any> | undefined\n> = {\n  block: PTDiff,\n  boolean: {component: BooleanFieldDiff, showHeader: false},\n  file: FileFieldDiff,\n  image: ImageFieldDiff,\n  number: NumberFieldDiff,\n  reference: ReferenceFieldDiff,\n  string: StringFieldDiff,\n}\n","import {ArraySchemaType, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {diffResolvers} from '../../TODO'\nimport {Diff, DiffComponent, DiffComponentOptions} from '../../types'\nimport {defaultComponents} from './defaultComponents'\n\n/** @internal */\nexport function resolveDiffComponent<D extends Diff = any>(\n  type: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<D> | DiffComponentOptions | undefined {\n  let itType: SchemaType | undefined = type\n\n  while (itType) {\n    const resolved =\n      itType?.components?.diff ||\n      tryResolve(itType, parentSchemaType) ||\n      defaultComponents[itType.name]\n\n    if (resolved) {\n      return resolved as DiffComponent<any>\n    }\n\n    itType = itType.type\n  }\n\n  return defaultComponents[type.jsonType]\n}\n\nfunction tryResolve(\n  schemaType: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<any> | DiffComponentOptions | undefined {\n  const resolvers = diffResolvers\n\n  let resolved: ComponentType | DiffComponentOptions | undefined\n\n  for (const resolver of resolvers) {\n    if (typeof resolver !== 'function') {\n      // eslint-disable-next-line no-console\n      console.error('Diff component resolver is not a function: ', resolver)\n      continue\n    }\n\n    resolved = resolver({schemaType, parentSchemaType})\n\n    if (resolved) {\n      return resolved as DiffComponent\n    }\n  }\n  return undefined\n}\n","import {ChangeNode, Diff, FieldChangeNode, GroupChangeNode, ItemDiff} from '../types'\n\n/** @internal */\nexport function getChangeVerb(diff: Diff): 'Added' | 'Removed' | 'Changed' {\n  const hadPrevValue = hasValue(diff.fromValue)\n  const hasNextValue = hasValue(diff.toValue)\n  if (!hadPrevValue && hasNextValue) {\n    return 'Added'\n  }\n\n  if (!hasNextValue && hadPrevValue) {\n    return 'Removed'\n  }\n\n  return 'Changed'\n}\n\n/** @internal */\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop(): void {}\n\n/** @internal */\nexport function isFieldChange(change: ChangeNode): change is FieldChangeNode {\n  return change.type === 'field'\n}\n\n/** @internal */\nexport function isGroupChange(change: ChangeNode): change is GroupChangeNode {\n  return change.type === 'group'\n}\n\n/** @internal */\nexport function isAddedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'added'}} {\n  return item.diff.action === 'added'\n}\n\n/** @internal */\nexport function isRemovedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'removed'}} {\n  return item.diff.action === 'removed'\n}\n\n/** @internal */\nexport function isUnchangedDiff(diff: Diff): diff is Diff & {action: 'unchanged'} {\n  return diff.action === 'unchanged'\n}\n\n/** @internal */\nfunction hasValue(value: unknown) {\n  return value !== null && typeof value !== 'undefined' && value !== ''\n}\n","import {\n  Path,\n  MultiFieldSet,\n  ObjectField,\n  ArraySchemaType,\n  ObjectSchemaType,\n  SchemaType,\n} from '@sanity/types'\nimport {pathToString, pathsAreEqual, getItemKeySegment} from '../../paths'\nimport {getValueError} from '../../validation'\nimport {getArrayDiffItemType} from '../../schema/helpers'\nimport {hasPTMemberType} from '../../types/portableText/diff/helpers'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  ChangeTitlePath,\n  Diff,\n  DiffComponent,\n  FieldChangeNode,\n  ItemDiff,\n  ObjectDiff,\n} from '../../types'\nimport {resolveDiffComponent} from '../resolve/resolveDiffComponent'\nimport {isFieldChange} from '../helpers'\n\ninterface DiffContext {\n  itemDiff?: ItemDiff\n  parentDiff?: ArrayDiff | ObjectDiff\n  parentSchema?: ArraySchemaType | ObjectSchemaType\n  fieldFilter?: string[]\n}\n\nexport function buildChangeList(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  context: DiffContext = {}\n): ChangeNode[] {\n  const diffComponent = resolveDiffComponent(schemaType, context.parentSchema)\n\n  if (!diffComponent) {\n    if (schemaType.jsonType === 'object' && diff.type === 'object') {\n      return buildObjectChangeList(schemaType as ObjectSchemaType, diff, path, titlePath, context)\n    }\n\n    if (schemaType.jsonType === 'array' && diff.type === 'array') {\n      return buildArrayChangeList(schemaType, diff, path, titlePath)\n    }\n  }\n\n  return getFieldChange(schemaType, diff, path, titlePath, context)\n}\n\nexport function buildObjectChangeList(\n  schemaType: ObjectSchemaType,\n  diff: ObjectDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  diffContext: DiffContext = {}\n): ChangeNode[] {\n  const changes: ChangeNode[] = []\n\n  const childContext: DiffContext = {...diffContext, parentSchema: schemaType}\n  const fieldSets =\n    schemaType.fieldsets || schemaType.fields.map((field) => ({single: true, field}))\n  for (const fieldSet of fieldSets) {\n    if (fieldSet.single) {\n      changes.push(...buildFieldChange(fieldSet.field, diff, path, titlePath, childContext))\n    } else {\n      changes.push(\n        ...buildFieldsetChangeList(fieldSet as MultiFieldSet, diff, path, titlePath, childContext)\n      )\n    }\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      path,\n      titlePath,\n      changes: reduceTitlePaths(changes, titlePath.length),\n      schemaType,\n    },\n  ]\n}\n\nexport function buildFieldChange(\n  field: ObjectField,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fieldFilter, ...context} = diffContext\n  const fieldDiff = diff.fields[field.name]\n  if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n    return []\n  }\n\n  const fieldPath = path.concat([field.name])\n  const fieldTitlePath = titlePath.concat([field.type.title || field.name])\n  return buildChangeList(field.type as any, fieldDiff, fieldPath, fieldTitlePath, context)\n}\n\nexport function buildFieldsetChangeList(\n  fieldSet: MultiFieldSet,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fields, name, title, readOnly, hidden} = fieldSet\n  const {fieldFilter, ...context} = diffContext\n\n  const fieldSetHidden = hidden\n  const fieldsetReadOnly = readOnly\n\n  const fieldSetTitlePath = titlePath.concat([title || name])\n  const changes: ChangeNode[] = []\n\n  for (const field of fields) {\n    const fieldDiff = diff.fields[field.name]\n    if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n      continue\n    }\n\n    const fieldPath = path.concat([field.name])\n    const fieldTitlePath = fieldSetTitlePath.concat([field.type.title || field.name])\n    changes.push(\n      ...buildChangeList(\n        {\n          readOnly: fieldsetReadOnly,\n          hidden: fieldSetHidden,\n          ...field.type,\n        } as any,\n        fieldDiff,\n        fieldPath,\n        fieldTitlePath,\n        context\n      )\n    )\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      fieldsetName: name,\n      path,\n      titlePath: fieldSetTitlePath,\n      changes: reduceTitlePaths(changes, fieldSetTitlePath.length),\n      readOnly: fieldsetReadOnly,\n      hidden: fieldSetHidden,\n    },\n  ]\n}\n\nexport function buildArrayChangeList(\n  schemaType: ArraySchemaType,\n  diff: ArrayDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = []\n): ChangeNode[] {\n  const changedOrMoved = diff.items.filter(\n    (item) => (item.hasMoved && item.fromIndex !== item.toIndex) || item.diff.action !== 'unchanged'\n  )\n\n  if (changedOrMoved.length === 0) {\n    return []\n  }\n\n  const isPortableText = hasPTMemberType(schemaType)\n  const list: ChangeNode[] = []\n  const changes = changedOrMoved.reduce((acc, itemDiff) => {\n    const memberTypes = getArrayDiffItemType(itemDiff.diff, schemaType)\n    const memberType = memberTypes.toType || memberTypes.fromType\n    if (!memberType) {\n      // eslint-disable-next-line no-console\n      console.warn('Could not determine schema type for item at %s', pathToString(path))\n      return acc\n    }\n\n    const segment =\n      getItemKeySegment(itemDiff.diff.fromValue) ||\n      getItemKeySegment(itemDiff.diff.toValue) ||\n      diff.items.indexOf(itemDiff)\n\n    const itemPath = path.concat(segment)\n    const itemContext: DiffContext = {itemDiff, parentDiff: diff, parentSchema: schemaType}\n    const itemTitlePath = titlePath.concat({\n      hasMoved: itemDiff.hasMoved,\n      toIndex: itemDiff.toIndex,\n      fromIndex: itemDiff.fromIndex,\n      annotation:\n        itemDiff.diff.action === 'unchanged' ? itemDiff.annotation : itemDiff.diff.annotation,\n    })\n\n    const attachItemDiff = (change: ChangeNode): ChangeNode => {\n      if (change.type === 'field' && pathsAreEqual(itemPath, change.path)) {\n        change.itemDiff = itemDiff\n      }\n\n      return change\n    }\n\n    const children = buildChangeList(\n      memberType,\n      itemDiff.diff,\n      itemPath,\n      itemTitlePath,\n      itemContext\n    ).map(attachItemDiff)\n\n    if (isPortableText) {\n      children.filter(isFieldChange).forEach((field, index, siblings) => {\n        field.showHeader = siblings.length === 1\n        field.showIndex = itemDiff.fromIndex !== itemDiff.toIndex && itemDiff.hasMoved\n      })\n    }\n\n    if (children.length === 0) {\n      // This can happen when there are no changes to the actual element, it's just been moved\n      acc.push(...getFieldChange(memberType, itemDiff.diff, itemPath, itemTitlePath, itemContext))\n    } else {\n      acc.push(...children)\n    }\n\n    return acc\n  }, list)\n\n  if (changes.length > 1) {\n    return [\n      {\n        type: 'group',\n        key: pathToString(path) || 'root',\n        path,\n        titlePath,\n        changes: reduceTitlePaths(changes, titlePath.length),\n        schemaType,\n      },\n    ]\n  }\n\n  return changes\n}\n\nfunction getFieldChange(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  {itemDiff, parentDiff, parentSchema}: DiffContext = {}\n): FieldChangeNode[] {\n  const {fromValue, toValue, type} = diff\n\n  // Treat undefined => [] as no change\n  if (type === 'array' && isEmpty(fromValue) && isEmpty(toValue)) {\n    return []\n  }\n\n  let error\n  if (typeof fromValue !== 'undefined') {\n    error = getValueError(fromValue, schemaType)\n  }\n\n  if (!error && typeof toValue !== 'undefined') {\n    error = getValueError(toValue, schemaType)\n  }\n\n  let showHeader = true\n  let component: DiffComponent | undefined\n\n  const diffComponent = resolveDiffComponent(schemaType, parentSchema)\n  if (diffComponent && typeof diffComponent === 'function') {\n    // Just a diff component with default options\n    component = diffComponent\n  } else if (diffComponent) {\n    // Diff component with options\n    component = (diffComponent as any).component\n    showHeader =\n      typeof (diffComponent as any).showHeader === 'undefined'\n        ? showHeader\n        : (diffComponent as any).showHeader\n  }\n\n  return [\n    {\n      type: 'field',\n      diff,\n      path,\n      error,\n      itemDiff,\n      parentDiff,\n      titlePath,\n      schemaType,\n      showHeader,\n      showIndex: true,\n      key: pathToString(path) || 'root',\n      diffComponent: error ? undefined : component,\n      parentSchema,\n    },\n  ]\n}\n\nfunction reduceTitlePaths(changes: ChangeNode[], byLength = 1): ChangeNode[] {\n  return changes.map((change) => {\n    change.titlePath = change.titlePath.slice(byLength)\n    return change\n  })\n}\n\nfunction isEmpty(item: unknown): boolean {\n  return (Array.isArray(item) && item.length === 0) || item === null || typeof item === 'undefined'\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {ChangeNode, FieldChangeNode} from '../../types'\nimport {getItemKey} from '../../paths'\n\nconst isAddedAction = (change: ChangeNode): boolean => {\n  return change.type === 'field' && change.diff.action === 'added'\n}\n\nconst flattenChangeNode = (changeNode: ChangeNode): FieldChangeNode[] => {\n  if (changeNode.type !== 'group') {\n    return [changeNode]\n  }\n\n  const newSubChanges: FieldChangeNode[] = []\n\n  changeNode.changes.forEach((cChange) => {\n    newSubChanges.push(...flattenChangeNode(cChange))\n  })\n\n  return newSubChanges\n}\n\n/**\n * Checks whether a path is under another path within the tree.\n */\nconst isSubpathOf = (subPath: Path, parentPath: Path): boolean => {\n  if (parentPath.length >= subPath.length) {\n    return false\n  }\n\n  for (let i = 0; i < parentPath.length; i++) {\n    if (parentPath[i] !== subPath[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nconst pathSegmentOfCorrectType = (item: Record<string, unknown>, child: string): PathSegment => {\n  const nextItem = item[child]\n\n  const key = getItemKey(nextItem)\n\n  if (key) {\n    return {_key: key}\n  }\n\n  const isArray = Array.isArray(item)\n\n  if (isArray) {\n    return parseInt(child, 10)\n  }\n\n  return child\n}\n\nexport {isAddedAction, flattenChangeNode, isSubpathOf, pathSegmentOfCorrectType}\n","import {\n  isIndexSegment,\n  isKeyedObject,\n  isKeySegment,\n  isTypedObject,\n  PatchOperations,\n  Path,\n} from '@sanity/types'\nimport {diffItem} from 'sanity-diff-patch'\nimport {isRecord} from '../../../util'\nimport {\n  findIndex,\n  getItemKeySegment,\n  getValueAtPath,\n  isEmptyObject,\n  pathToString,\n} from '../../paths'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  Diff,\n  DiffPatch,\n  InsertDiffPatch,\n  ItemDiff,\n  ObjectDiff,\n  FieldOperationsAPI,\n  SetDiffPatch,\n  UnsetDiffPatch,\n} from '../../types'\nimport {flattenChangeNode, isAddedAction, isSubpathOf, pathSegmentOfCorrectType} from './helpers'\n\nconst diffOptions = {diffMatchPatch: {enabled: false}}\n\nexport function undoChange(\n  change: ChangeNode,\n  rootDiff: ObjectDiff | null,\n  documentOperations: FieldOperationsAPI\n): void {\n  if (!rootDiff) {\n    return\n  }\n\n  const patches: PatchOperations[] = []\n\n  if (change.type === 'group') {\n    const allChanges = flattenChangeNode(change)\n\n    const unsetChanges = allChanges.filter(isAddedAction)\n\n    allChanges\n      .filter((child) => !isAddedAction(child))\n      .forEach((child) => undoChange(child, rootDiff, documentOperations))\n\n    patches.push(\n      ...buildUnsetPatches(\n        rootDiff,\n        unsetChanges.map((unsetChange) => unsetChange.path)\n      )\n    )\n  } else if (change.diff.action === 'added') {\n    // The reverse of an add operation is an unset -\n    // so we don't need to worry about moved items in this case\n    patches.push(...buildUnsetPatches(rootDiff, [change.path]))\n  } else if (\n    change.type === 'field' &&\n    change.itemDiff &&\n    change.parentDiff &&\n    change.parentDiff.type === 'array' &&\n    change.itemDiff.hasMoved\n  ) {\n    // If an array item has moved, we need to unset + insert it again\n    // (we lack a \"move\" patch currently)\n    patches.push(...buildMovePatches(change.itemDiff, change.parentDiff, change.path))\n  } else {\n    // For all other operations, try to find the most optimal case\n    patches.push(...buildUndoPatches(change.diff, rootDiff, change.path))\n  }\n\n  documentOperations.patch.execute(patches)\n}\n\nfunction buildUnsetPatch(rootDiff: ObjectDiff, path: Path, concurrentUnsetPaths: Path[]): Path {\n  const previousValue = rootDiff.toValue as Record<string, unknown>\n\n  return furthestEmptyAncestor(previousValue, path, concurrentUnsetPaths)\n}\n\nfunction buildUnsetPatches(rootDiff: ObjectDiff, paths: Path[]): PatchOperations[] {\n  const patches: Path[] = []\n\n  for (let i = 0; i < paths.length; i++) {\n    const unsetByEarlierPatch = patches.some((patch) => isSubpathOf(paths[i], patch))\n\n    if (unsetByEarlierPatch) {\n      continue\n    }\n\n    patches.push(buildUnsetPatch(rootDiff, paths[i], paths))\n  }\n\n  return [{unset: [...new Set(patches.map(pathToString))]}]\n}\n\n/**\n * Find the path to the furthest empty ancestor that's also a stub.\n *\n * Used for removing all stubs when unsetting a nested value.\n */\nfunction furthestEmptyAncestor(\n  /**\n   * The state of the tree before the change was made.\n   */\n  previousValue: Record<string, unknown>,\n  /**\n   * Path of the value to unset. Used for recursing.\n   */\n  currentPath: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths: Path[] = [],\n  /**\n   * Same as the first value of currentPath.\n   */\n  initialPath?: Path\n): Path {\n  if (currentPath.length <= 0) {\n    /*\n     * This means we are at root and no ancestors are stubs. We\n     * can therefore safely unset only the actual value.\n     */\n    if (!initialPath) {\n      /*\n       * Will happen if the function is started with `currentPath = []`.\n       */\n      throw new Error('Root has no ancestor')\n    }\n\n    return initialPath\n  }\n\n  const ancestorPath = currentPath.slice(0, -1)\n  const ancestorValue = getValueAtPath(previousValue, ancestorPath)\n\n  /*\n   * If the ancestor also is a stub we can add it to the ignore-list\n   * so it'll be \"remembered\" as a stub without us having to scan\n   * the whole tree again.\n   */\n  const updatedIgnorePaths = [\n    ancestorPath,\n\n    /*\n     * We can filter out all the subpaths from under this ancestor\n     * because since we ignore it higher up in the tree it doesn't\n     * matter anymore what the values of subpaths are.\n     */\n    ...ignorePaths.filter((path) => !isSubpathOf(path, ancestorPath)),\n  ]\n\n  return isStub(ancestorValue, ancestorPath, ignorePaths)\n    ? furthestEmptyAncestor(previousValue, ancestorPath, updatedIgnorePaths, initialPath)\n    : currentPath\n}\n\nfunction buildMovePatches(\n  itemDiff: ItemDiff,\n  parentDiff: ArrayDiff,\n  path: Path\n): PatchOperations[] {\n  const basePath = path.slice(0, -1)\n  const {parentValue, fromIndex, fromValue} = getFromItem(parentDiff, itemDiff)\n\n  let insertLocation\n  if (fromIndex === 0) {\n    // If it was moved from the beginning, we can use a simple prepend\n    insertLocation = {before: pathToString([...basePath, 0])}\n  } else {\n    // Try to use item key segments where possible, falling back to array indexes\n    const prevIndex = fromIndex - 1\n    const prevItemKey = getItemKeySegment(parentValue[prevIndex])\n    const prevSegment = prevItemKey || prevIndex\n    insertLocation = {after: pathToString([...basePath, prevSegment])}\n  }\n\n  return [\n    {\n      unset: [pathToString(path)],\n    },\n    {\n      insert: {...insertLocation, items: [fromValue]} as any,\n    },\n  ]\n}\n\nfunction buildUndoPatches(diff: Diff, rootDiff: ObjectDiff, path: Path): PatchOperations[] {\n  const patches = diffItem(diff.toValue, diff.fromValue, diffOptions, path) as DiffPatch[]\n\n  const inserts = patches\n    .filter((patch): patch is InsertDiffPatch => patch.op === 'insert')\n    .map(({after, items}) => ({insert: {after: pathToString(after), items}} as any))\n\n  const unsets = patches\n    .filter((patch): patch is UnsetDiffPatch => patch.op === 'unset')\n    .reduce((acc, patch) => acc.concat(pathToString(patch.path)), [] as string[])\n\n  const stubbedPaths = new Set<string>()\n  const stubs: PatchOperations[] = []\n\n  let hasSets = false\n  const sets = patches\n    .filter((patch): patch is SetDiffPatch => patch.op === 'set')\n    .reduce((acc, patch) => {\n      hasSets = true\n      stubs.push(...getParentStubs(patch.path, rootDiff, stubbedPaths))\n      acc[pathToString(patch.path)] = patch.value\n      return acc\n    }, {} as Record<string, unknown>)\n\n  return [\n    ...stubs,\n    ...inserts,\n    ...(unsets.length > 0 ? [{unset: unsets}] : []),\n    ...(hasSets ? [{set: sets}] : []),\n  ]\n}\n\nfunction getParentStubs(path: Path, rootDiff: ObjectDiff, stubbed: Set<string>): PatchOperations[] {\n  const value = rootDiff.fromValue as Record<string, unknown>\n  const nextValue = rootDiff.toValue as Record<string, unknown>\n  const stubs: PatchOperations[] = []\n\n  for (let i = 1; i <= path.length; i++) {\n    const subPath = path.slice(0, i)\n    const pathStr = pathToString(subPath)\n    if (stubbed.has(pathStr)) {\n      continue\n    }\n\n    const nextSegment = path[i]\n    const nextIsArrayElement = isKeySegment(nextSegment) || isIndexSegment(nextSegment)\n    const itemValue = getValueAtPath(value, subPath)\n    const stub = getStubValue(itemValue)\n\n    // If the next array element does not exist, we need to inject an insert stub here\n    if (\n      nextIsArrayElement &&\n      Array.isArray(itemValue) &&\n      !getValueAtPath(nextValue, path.slice(0, i + 1))\n    ) {\n      const indexAtPrev = findIndex(itemValue, nextSegment)\n      const prevItem = itemValue[indexAtPrev - 1]\n      const nextItem = getValueAtPath(value, subPath.concat(nextSegment))\n      const prevSeg = isKeyedObject(prevItem) ? {_key: prevItem._key} : indexAtPrev - 1\n      const after = pathToString(subPath.concat(indexAtPrev < 1 ? 0 : prevSeg))\n      stubs.push({setIfMissing: {[pathStr]: []}})\n      stubs.push({insert: {after, items: [getStubValue(nextItem)]} as any})\n\n      i++\n      continue\n    }\n\n    if (typeof stub === 'undefined') {\n      continue\n    }\n\n    stubbed.add(pathStr)\n    stubs.push({setIfMissing: {[pathStr]: stub as Record<string, unknown>}})\n  }\n  return stubs\n}\n\n/**\n * Check if all items in an object or an array are stubs.\n */\nfunction onlyContainsStubs(\n  /**\n   * The item to check whether is a stub.\n   */\n  item: unknown,\n  /**\n   * The path to the item we're checking.\n   */\n  path: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths?: Path[]\n): boolean {\n  /*\n   * If we're trying to check for stubs inside something which isn't an object\n   * or an array we're checking a string for example and it they cannot\n   * contain stubs.\n   */\n  if (!isRecord(item) || !Array.isArray(item)) {\n    return false\n  }\n\n  for (const child in item) {\n    if (!Object.prototype.hasOwnProperty.call(item, child)) {\n      continue\n    }\n\n    /*\n     * _type or _key field alone doesn't affect whether the field is a stub or\n     * not.\n     */\n    if (child === '_type' || child === '_key') {\n      continue\n    }\n\n    const nextPath = [...path, pathSegmentOfCorrectType(item as Record<string, unknown>, child)]\n\n    if (!isStub(item[child], nextPath, ignorePaths)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction isStub(item: unknown, path: Path, ignorePaths?: Path[]): boolean {\n  const isIgnoredPath = ignorePaths?.some(\n    (ignorePath) => pathToString(ignorePath) === pathToString(path)\n  )\n\n  const isEmptyArray = Array.isArray(item) && item.length <= 0\n\n  return (\n    isIgnoredPath ||\n    item === undefined ||\n    item === null ||\n    isEmptyArray ||\n    isEmptyObject(item) ||\n    onlyContainsStubs(item, path, ignorePaths)\n  )\n}\n\nfunction getStubValue(item: unknown): unknown {\n  if (Array.isArray(item)) {\n    return []\n  }\n\n  if (typeof item !== 'object' || item === null) {\n    return undefined\n  }\n\n  const props: Record<string, unknown> = {}\n\n  if (isKeyedObject(item)) {\n    props._key = item._key\n  }\n\n  if (isTypedObject(item)) {\n    props._type = item._type\n  }\n\n  return props\n}\n\nfunction getFromItem(parentDiff: ArrayDiff, itemDiff: ItemDiff) {\n  if (parentDiff.fromValue && typeof itemDiff.fromIndex === 'number') {\n    const fromValue = parentDiff.fromValue[itemDiff.fromIndex]\n    return {\n      parentValue: parentDiff.fromValue,\n      fromIndex: itemDiff.fromIndex,\n      fromValue,\n    }\n  }\n\n  // Shouldn't ever happen\n  throw new Error(`Failed to find item at index ${itemDiff.fromIndex}`)\n}\n","import {createContext} from 'react'\nimport {ConditionalReadOnlyContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ConditionalReadOnlyContext = createContext<ConditionalReadOnlyContextValue | null>(\n  null\n)\n","import {useContext} from 'react'\nimport {ConditionalReadOnlyContext} from './ConditionalReadOnlyContext'\n\n/**\n * @internal\n */\nexport function useConditionalReadOnly(): boolean | null {\n  const context = useContext(ConditionalReadOnlyContext)\n\n  if (!context) {\n    return null\n  }\n\n  return context.readOnly || null\n}\n","import React from 'react'\nimport {ErrorOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport {isDev} from '../../../environment'\n\n/** @internal */\nexport interface DiffErrorBoundaryProps {\n  children: React.ReactNode\n}\n\n/** @internal */\nexport interface DiffErrorBoundaryState {\n  error?: Error\n}\n\n/** @internal */\nexport class DiffErrorBoundary extends React.Component<\n  DiffErrorBoundaryProps,\n  DiffErrorBoundaryState\n> {\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  state: DiffErrorBoundaryState = {}\n\n  // eslint-disable-next-line class-methods-use-this\n  componentDidCatch(error: Error) {\n    console.error('Error rendering diff component: ')\n    console.error(error)\n  }\n\n  render() {\n    const {error} = this.state\n\n    if (!error) {\n      return this.props.children\n    }\n\n    return (\n      <Card padding={3} radius={2} tone=\"critical\">\n        <Flex>\n          <Text size={1}>\n            <ErrorOutlineIcon />\n          </Text>\n\n          <Box paddingLeft={3}>\n            <Text as=\"h3\" size={1} weight=\"medium\">\n              Rendering the changes to this field caused an error\n            </Text>\n\n            {isDev && (\n              <Box marginTop={2}>\n                <Text as=\"p\" size={1}>\n                  Check the developer console for more information\n                </Text>\n              </Box>\n            )}\n          </Box>\n        </Flex>\n      </Card>\n    )\n  }\n}\n","import {Text, TextProps} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport {ArrowRightIcon, ArrowDownIcon} from '@sanity/icons'\n\n/** @internal */\nexport type FromToArrowDirection = 'down' | 'right'\n\nconst arrowComponents = {\n  down: ArrowDownIcon,\n  right: ArrowRightIcon,\n}\n\n/** @internal */\nexport function FromToArrow(\n  props: {direction?: FromToArrowDirection} & TextProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'ref'>\n) {\n  const {direction = 'right', ...restProps} = props\n  const arrowComponent = arrowComponents[direction]\n\n  return (\n    <Text muted size={1} {...restProps}>\n      {createElement(arrowComponent)}\n    </Text>\n  )\n}\n","import {Box, BoxProps, Card, Code, Label, Stack} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef, useState} from 'react'\nimport styled, {DefaultTheme, StyledComponent} from 'styled-components'\nimport {pathToString} from '../../paths'\nimport {FieldChangeNode} from '../../types'\nimport {FromToArrow} from './FromToArrow'\n\n/** @internal */\nexport interface DiffInspectWrapperProps {\n  children: React.ReactNode\n  change: FieldChangeNode\n  as?: StyledComponent<'div', DefaultTheme>\n}\n\nconst CodeWrapper = styled.pre`\n  overflow-x: auto;\n  position: relative;\n`\n\nconst Meta = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\n/** @internal */\nexport function DiffInspectWrapper(props: DiffInspectWrapperProps & BoxProps): React.ReactElement {\n  const {children, as, change, ...restProps} = props\n  const isHovering = useRef(false)\n  const [isInspecting, setIsInspecting] = useState(false)\n\n  const toggleInspect = useCallback(() => setIsInspecting((state) => !state), [setIsInspecting])\n  const handleMouseEnter = useCallback(() => (isHovering.current = true), [])\n  const handleMouseLeave = useCallback(() => (isHovering.current = false), [isHovering])\n\n  useEffect(() => {\n    function onKeyDown(evt: KeyboardEvent) {\n      const {metaKey, key} = evt\n      if (metaKey && key === 'i' && isHovering.current) {\n        toggleInspect()\n      }\n    }\n\n    window.addEventListener('keydown', onKeyDown, false)\n    return () => window.removeEventListener('keydown', onKeyDown, false)\n  }, [toggleInspect])\n\n  return (\n    <Box as={as} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} {...restProps}>\n      {isInspecting ? <DiffInspector change={change} /> : children}\n    </Box>\n  )\n}\n\nconst MetaLabel = ({title}: {title: string}) => (\n  <Box padding={3} display=\"inline-block\" as={Meta}>\n    <Label size={1} muted>\n      {title}\n    </Label>\n  </Box>\n)\n\nfunction DiffInspector({change}: {change: FieldChangeNode}): React.ReactElement | null {\n  return (\n    <Stack space={3}>\n      <Card padding={3} tone=\"transparent\" as={CodeWrapper} radius={1}>\n        <MetaLabel title=\"meta\" />\n        <Code language=\"json\" size={1}>\n          {printMeta({\n            path: pathToString(change.path),\n            fromIndex: change.itemDiff?.fromIndex,\n            toIndex: change.itemDiff?.toIndex,\n            hasMoved: change.itemDiff?.hasMoved,\n            action: change.diff.action,\n            isChanged: change.diff.isChanged,\n          })}\n        </Code>\n      </Card>\n      <Card as={CodeWrapper} tone=\"critical\" padding={3} radius={1}>\n        <MetaLabel title=\"from\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.fromValue)}\n        </Code>\n      </Card>\n      <Card>\n        <FromToArrow direction=\"down\" align=\"center\" />\n      </Card>\n      <Card as={CodeWrapper} tone=\"positive\" padding={3} radius={1}>\n        <MetaLabel title=\"to\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.toValue)}\n        </Code>\n      </Card>\n    </Stack>\n  )\n}\n\nfunction jsonify(value: unknown) {\n  if (typeof value === 'undefined') {\n    return 'undefined'\n  }\n\n  return JSON.stringify(value, null, 2)\n}\n\nfunction printMeta(keys: Record<string, unknown>) {\n  const lines: string[] = []\n\n  Object.entries(keys).forEach(([key, value]) => {\n    if (typeof value !== 'undefined' && value !== null) {\n      lines.push(`${key}: ${value}`)\n    }\n  })\n\n  return lines.join('\\n')\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Flex, Grid, rem, useTheme} from '@sanity/ui'\nimport {FromToArrow} from './FromToArrow'\n\n/** @internal */\nexport type FromToProps = {\n  align?: 'top' | 'center' | 'bottom'\n  layout?: 'grid' | 'inline'\n  from?: React.ReactNode\n  to?: React.ReactNode\n} & Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'as' | 'height' | 'wrap'>\n\nconst INLINE_COLUMN_STYLES = {flexShrink: 0}\nconst BLOCK_COLUMN_STYLES = {alignItems: 'stretch'}\n\nconst FLEX_ALIGN: Record<string, 'flex-start' | 'center' | 'flex-end'> = {\n  top: 'flex-start',\n  center: 'center',\n  bottom: 'flex-end',\n  default: 'flex-start',\n}\n\n/** @internal */\nexport const FromTo = forwardRef<HTMLDivElement, FromToProps>(function FromTo(props, ref) {\n  const {align = 'top', layout = 'inline', from, to, style, ...restProps} = props\n  const theme = useTheme()\n\n  const Layout = layout === 'inline' ? Flex : Grid\n  const layoutStyles = useMemo(\n    () => ({\n      ...style,\n      ...(layout === 'inline'\n        ? {maxWidth: '100%', display: 'inline-flex'}\n        : {gridTemplateColumns: `minmax(0, 1fr) ${rem(theme.sanity.space[5])} minmax(0, 1fr)`}),\n    }),\n    [layout, style, theme]\n  )\n\n  const columnStyles = layout === 'inline' ? INLINE_COLUMN_STYLES : BLOCK_COLUMN_STYLES\n\n  return (\n    <Layout {...restProps} ref={ref} style={layoutStyles} data-from-to-layout>\n      {from && (\n        <>\n          <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n            {from}\n          </Flex>\n          <Flex align=\"center\" justify=\"center\" padding={2}>\n            <FromToArrow />\n          </Flex>\n        </>\n      )}\n      <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n        {to}\n      </Flex>\n    </Layout>\n  )\n})\n","import {Path, SchemaType} from '@sanity/types'\nimport React, {createElement, CSSProperties} from 'react'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff} from '../../types'\nimport {getChangeVerb} from '../helpers'\nimport {DiffCard} from './DiffCard'\nimport {DiffTooltip} from './DiffTooltip'\nimport {FromTo} from './FromTo'\n\n/** @internal */\nexport interface DiffFromToProps {\n  align?: 'top' | 'center' | 'bottom'\n  cardClassName?: string\n  diff: Diff\n  layout?: 'grid' | 'inline'\n  path?: Path | string\n  previewComponent: FieldPreviewComponent\n  schemaType: SchemaType\n}\n\nconst cardStyles: CSSProperties = {\n  flex: 1,\n  minWidth: 0,\n  display: 'block',\n  whiteSpace: 'break-spaces',\n}\n\n/** @internal */\nexport function DiffFromTo(props: DiffFromToProps) {\n  const {align, cardClassName, diff, layout, path, previewComponent, schemaType} = props\n  const {action} = diff\n  const changeVerb = getChangeVerb(diff)\n\n  if (action === 'unchanged') {\n    return (\n      <DiffCard className={cardClassName} style={cardStyles}>\n        {createElement(previewComponent, {schemaType, value: diff.toValue})}\n      </DiffCard>\n    )\n  }\n\n  const from = diff.fromValue !== undefined && diff.fromValue !== null && (\n    <DiffCard as=\"del\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.fromValue})}\n    </DiffCard>\n  )\n\n  const to = diff.toValue !== undefined && diff.toValue !== null && (\n    <DiffCard as=\"ins\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.toValue})}\n    </DiffCard>\n  )\n\n  if (from && !to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {from}\n      </DiffTooltip>\n    )\n  }\n\n  if (!from && to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {to}\n      </DiffTooltip>\n    )\n  }\n\n  return (\n    <DiffTooltip description={changeVerb} diff={diff} path={path}>\n      <FromTo align={align} from={from} layout={layout} to={to} />\n    </DiffTooltip>\n  )\n}\n","import React from 'react'\nimport {Box} from '@sanity/ui'\nimport {SanityPreview} from '../../../preview'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff, DiffComponent} from '../../types'\nimport {DiffFromTo} from './DiffFromTo'\n\nconst FallbackPreview: FieldPreviewComponent<React.ReactNode> = ({value, schemaType}) => {\n  return (\n    <Box padding={2}>\n      <SanityPreview schemaType={schemaType} value={value as any} layout=\"default\" />\n    </Box>\n  )\n}\n\n/** @internal */\nexport const FallbackDiff: DiffComponent<Diff<unknown, Record<string, unknown>>> = (props) => {\n  const {diff, schemaType} = props\n\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={FallbackPreview}\n      layout=\"grid\"\n    />\n  )\n}\n","import {RevertIcon} from '@sanity/icons'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\n\nconst Root = styled(Button)`\n  [data-ui='Text'] {\n    font-weight: normal;\n  }\n\n  div[data-ui='Box'] {\n    display: none;\n  }\n\n  &:not([data-disabled='true']):hover,\n  &:not([data-disabled='true']):focus {\n    --card-fg-color: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n    --card-bg-color: transparent;\n    --card-border-color: transparent;\n\n    div[data-ui='Box'] {\n      display: block;\n    }\n  }\n`\n\n/** @internal */\nexport const RevertChangesButton = forwardRef(function RevertChangesButton(\n  props: ButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'ref'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n): React.ReactElement {\n  const {selected, ...restProps} = props\n\n  return (\n    <Root\n      icon={RevertIcon}\n      selected={selected}\n      text=\"Revert changes\"\n      mode=\"bleed\"\n      padding={1}\n      fontSize={1}\n      space={2}\n      ref={ref}\n      {...restProps}\n    />\n  )\n})\n","import {ErrorOutlineIcon} from '@sanity/icons'\nimport {Text, Box, Card, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {FieldValueError} from '../../validation'\n\n/** @internal */\nexport function ValueError({error}: {error: FieldValueError}) {\n  return (\n    <Card tone=\"critical\" padding={3}>\n      <Flex align=\"flex-start\">\n        <Box>\n          <Text>\n            <ErrorOutlineIcon />\n          </Text>\n        </Box>\n        <Box flex={1} paddingLeft={3}>\n          <Text size={1} as=\"p\">\n            Value error: {error.message}\n          </Text>\n        </Box>\n      </Flex>\n    </Card>\n  )\n}\n","import styled from 'styled-components'\nimport {rem, Popover} from '@sanity/ui'\n\nexport const FieldChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  &[data-revert-all-changes-hover] [data-revert-all-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const DiffBorder = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) 0 var(--diff-inspect-padding-xsmall)\n    var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-field-hover]:hover::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Stack, Box, Button, Text, Grid, useClickOutside} from '@sanity/ui'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {useConditionalReadOnly} from '../../conditional-property/conditionalReadOnly'\nimport {useDocumentOperation} from '../../../hooks'\nimport {FieldChangeNode, FieldOperationsAPI} from '../../types'\nimport {undoChange} from '../changes/undoChange'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../store'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {DiffErrorBoundary} from './DiffErrorBoundary'\nimport {DiffInspectWrapper} from './DiffInspectWrapper'\nimport {FallbackDiff} from './FallbackDiff'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ValueError} from './ValueError'\nimport {FieldChangeContainer, DiffBorder, PopoverWrapper} from './FieldChange.styled'\n\n/** @internal */\nexport function FieldChange(\n  props: {\n    change: FieldChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n) {\n  const {change, hidden, readOnly} = props\n  const conditionalReadOnly = useConditionalReadOnly() ?? readOnly\n  const DiffComponent = change.diffComponent || FallbackDiff\n  const {\n    documentId,\n    schemaType,\n    rootDiff,\n    isComparingCurrent,\n    FieldWrapper = React.Fragment,\n  } = useDocumentChange()\n  const ops = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertHovered, setRevertHovered] = useState(false)\n  const [revertButtonElement, setRevertButtonElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(() => {\n    undoChange(change, rootDiff, ops)\n  }, [change, rootDiff, ops])\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = React.useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  const handleRevertButtonMouseEnter = useCallback(() => {\n    setRevertHovered(true)\n  }, [])\n\n  const handleRevertButtonMouseLeave = useCallback(() => {\n    setRevertHovered(false)\n  }, [])\n\n  const handleClickOutside = useCallback(() => setConfirmRevertOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertButtonElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack space={1} as={FieldChangeContainer}>\n          {change.showHeader && <ChangeBreadcrumb change={change} titlePath={change.titlePath} />}\n\n          <FieldWrapper path={change.path} hasHover={revertHovered}>\n            <DiffInspectWrapper\n              change={change}\n              as={DiffBorder}\n              data-revert-field-hover={revertHovered ? '' : undefined}\n              data-error={change.error ? '' : undefined}\n              data-revert-all-hover\n            >\n              {change.error ? (\n                <ValueError error={change.error} />\n              ) : (\n                <DiffErrorBoundary>\n                  <DiffContext.Provider value={{path: change.path}}>\n                    <DiffComponent\n                      diff={change.diff}\n                      schemaType={change.schemaType as ObjectSchemaType}\n                    />\n                  </DiffContext.Provider>\n                </DiffErrorBoundary>\n              )}\n\n              {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n                <PopoverWrapper\n                  content={\n                    <Box padding={3} sizing=\"border\">\n                      Are you sure you want to revert the changes?\n                      <Grid columns={2} gap={2} marginTop={2}>\n                        <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                          <Text align=\"center\">Cancel</Text>\n                        </Button>\n                        <Button tone=\"critical\" onClick={handleRevertChanges}>\n                          <Text align=\"center\">Revert change</Text>\n                        </Button>\n                      </Grid>\n                    </Box>\n                  }\n                  open={confirmRevertOpen}\n                  portal\n                  placement=\"left\"\n                  ref={setRevertButtonElement}\n                >\n                  <Box flex={1}>\n                    <RevertChangesButton\n                      onClick={handleRevertChangesConfirm}\n                      onMouseEnter={handleRevertButtonMouseEnter}\n                      onMouseLeave={handleRevertButtonMouseLeave}\n                      selected={confirmRevertOpen}\n                      disabled={conditionalReadOnly}\n                      data-testid={`single-change-revert-button-${change?.key}`}\n                    />\n                  </Box>\n                </PopoverWrapper>\n              )}\n            </DiffInspectWrapper>\n          </FieldWrapper>\n        </Stack>\n      ),\n    [\n      change,\n      closeRevertChangesConfirmDialog,\n      conditionalReadOnly,\n      confirmRevertOpen,\n      DiffComponent,\n      FieldWrapper,\n      hidden,\n      handleRevertButtonMouseEnter,\n      handleRevertButtonMouseLeave,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      isComparingCurrent,\n      isPermissionsLoading,\n      permissions,\n      revertHovered,\n    ]\n  )\n\n  return content\n}\n","import {useEffect, useRef, useState} from 'react'\n\nexport function useHover<T extends HTMLElement>(): [React.MutableRefObject<T | null>, boolean] {\n  const ref = useRef<T | null>(null)\n  const [value, setValue] = useState(false)\n\n  useEffect(() => {\n    const node = ref.current\n\n    if (!node) {\n      return () => undefined\n    }\n\n    const handleMouseOver = () => setValue(true)\n    const handleMouseOut = () => setValue(false)\n\n    node.addEventListener('mouseover', handleMouseOver)\n    node.addEventListener('mouseout', handleMouseOut)\n\n    return () => {\n      node.removeEventListener('mouseover', handleMouseOver)\n      node.removeEventListener('mouseout', handleMouseOut)\n    }\n  }, [])\n\n  return [ref, value]\n}\n","import {rem, Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const GroupChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-group-hover]:hover::before,\n  &[data-revert-all-groups-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {Box, Stack, Button, Grid, Text, useClickOutside} from '@sanity/ui'\nimport {useDocumentOperation} from '../../../hooks'\nimport {undoChange} from '../changes/undoChange'\nimport {isFieldChange} from '../helpers'\nimport {isPTSchemaType} from '../../types/portableText/diff'\nimport {GroupChangeNode, FieldOperationsAPI} from '../../types'\nimport {useHover} from '../../utils/useHover'\nimport {pathsAreEqual} from '../../paths'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../store'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {ChangeResolver} from './ChangeResolver'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ChangeListWrapper, GroupChangeContainer, PopoverWrapper} from './GroupChange.styled'\n\n/** @internal */\nexport function GroupChange(\n  props: {\n    change: GroupChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n): React.ReactElement | null {\n  const {\n    change: group,\n    readOnly,\n    hidden,\n    // 'data-revert-all-changes-hover': dataRevertAllChangesHover,\n    ...restProps\n  } = props\n  const {titlePath, changes, path: groupPath} = group\n  const {path: diffPath} = useContext(DiffContext)\n  const {documentId, schemaType, FieldWrapper, rootDiff, isComparingCurrent} = useDocumentChange()\n\n  const isPortableText = changes.every(\n    (change) => isFieldChange(change) && isPTSchemaType(change.schemaType)\n  )\n\n  const isNestedInDiff = pathsAreEqual(diffPath, groupPath)\n  const [revertButtonRef, isRevertButtonHovered] = useHover<HTMLButtonElement>()\n\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertPopoverElement, setRevertPopoverElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(\n    () => undoChange(group, rootDiff, docOperations),\n    [group, rootDiff, docOperations]\n  )\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  useClickOutside(() => setConfirmRevertOpen(false), [revertPopoverElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack\n          space={1}\n          as={GroupChangeContainer}\n          data-revert-group-hover={isRevertButtonHovered ? '' : undefined}\n          data-portable-text={isPortableText ? '' : undefined}\n          // data-revert-all-groups-hover={\n          //   restProps[] === '' ? '' : undefined\n          // }\n        >\n          <Stack as={ChangeListWrapper} space={5}>\n            {changes.map((change) => (\n              <ChangeResolver\n                key={change.key}\n                change={change}\n                readOnly={readOnly}\n                hidden={hidden}\n              />\n            ))}\n          </Stack>\n          {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n            <PopoverWrapper\n              content={\n                <Box>\n                  Are you sure you want to revert the changes?\n                  <Grid columns={2} gap={2} marginTop={2}>\n                    <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                      <Text align=\"center\">Cancel</Text>\n                    </Button>\n                    <Button tone=\"critical\" onClick={handleRevertChanges}>\n                      <Text align=\"center\">Revert change</Text>\n                    </Button>\n                  </Grid>\n                </Box>\n              }\n              portal\n              padding={4}\n              placement={'left'}\n              open={confirmRevertOpen}\n              ref={setRevertPopoverElement}\n            >\n              <Box>\n                <RevertChangesButton\n                  onClick={handleRevertChangesConfirm}\n                  ref={revertButtonRef}\n                  selected={confirmRevertOpen}\n                  disabled={readOnly}\n                  data-testid={`group-change-revert-button-${group.fieldsetName}`}\n                />\n              </Box>\n            </PopoverWrapper>\n          )}\n        </Stack>\n      ),\n    [\n      changes,\n      closeRevertChangesConfirmDialog,\n      confirmRevertOpen,\n      readOnly,\n      group.fieldsetName,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      hidden,\n      isComparingCurrent,\n      isRevertButtonHovered,\n      isPermissionsLoading,\n      isPortableText,\n      permissions,\n      revertButtonRef,\n    ]\n  )\n\n  return hidden ? null : (\n    <Stack space={1} {...restProps}>\n      <ChangeBreadcrumb titlePath={titlePath} />\n      {isNestedInDiff || !FieldWrapper ? (\n        content\n      ) : (\n        <FieldWrapper hasHover={isRevertButtonHovered} path={group.path}>\n          {content}\n        </FieldWrapper>\n      )}\n    </Stack>\n  )\n}\n","import {ConditionalProperty, SanityDocument} from '@sanity/types'\nimport React from 'react'\nimport {Text} from '@sanity/ui'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../conditional-property'\nimport {ChangeNode} from '../../types'\nimport {useDocumentChange} from '../hooks'\nimport {FieldChange} from './FieldChange'\nimport {GroupChange} from './GroupChange'\n\n/** @internal */\nexport interface ChangeResolverProps {\n  change: ChangeNode\n  readOnly?: ConditionalProperty\n  hidden?: ConditionalProperty\n}\n\n/** @internal */\nexport function ChangeResolver(props: ChangeResolverProps) {\n  const {change, hidden, readOnly} = props\n  const {value} = useDocumentChange()\n\n  const isHidden = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: hidden || change.schemaType?.hidden,\n    checkPropertyKey: 'hidden',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  const isReadOnly = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: readOnly || change.schemaType?.readOnly,\n    checkPropertyKey: 'readOnly',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  if (isHidden) return null\n\n  if (change.type === 'field') {\n    return <FieldChange change={change} readOnly={isReadOnly} />\n  }\n\n  if (change.type === 'group') {\n    return (\n      <GroupChange\n        change={change}\n        data-testid={`group-change-${change.fieldsetName}`}\n        readOnly={isReadOnly}\n      />\n    )\n  }\n\n  return (\n    <Text>\n      Unknown change type: <code>{(change as any).type || 'undefined'}</code>\n    </Text>\n  )\n}\n","import {Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\n/** @internal */\nexport function NoChanges() {\n  return (\n    <Stack space={3}>\n      <Text size={1} weight=\"semibold\" as=\"h3\">\n        There are no changes\n      </Text>\n      <Text as=\"p\" size={1} muted>\n        Edit the document or select an older version in the timeline to see a list of changes appear\n        in this panel.\n      </Text>\n    </Stack>\n  )\n}\n","import {Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import {Button, Box, Card, Grid, Stack, useClickOutside} from '@sanity/ui'\nimport {RevertIcon} from '@sanity/icons'\nimport React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {SanityDocument} from '@sanity/client'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../conditional-property'\nimport {ObjectDiff, ChangeNode, FieldOperationsAPI} from '../../types'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {buildObjectChangeList} from '../changes/buildChangeList'\nimport {undoChange} from '../changes/undoChange'\nimport {useDocumentChange} from '../hooks/useDocumentChange'\nimport {useDocumentPairPermissions} from '../../../store'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ChangeResolver} from './ChangeResolver'\nimport {NoChanges} from './NoChanges'\nimport {ChangeListWrapper, PopoverWrapper} from './ChangeList.styled'\n\n/** @internal */\nexport interface ChangeListProps {\n  schemaType: ObjectSchemaType\n  diff: ObjectDiff\n  fields?: string[]\n}\n\n/** @internal */\nexport function ChangeList({diff, fields, schemaType}: ChangeListProps): React.ReactElement | null {\n  const {documentId, isComparingCurrent, value} = useDocumentChange()\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const {path} = useContext(DiffContext)\n  const isRoot = path.length === 0\n  const [confirmRevertAllOpen, setConfirmRevertAllOpen] = useState(false)\n  const [confirmRevertAllHover, setConfirmRevertAllHover] = useState(false)\n\n  const isReadOnly = useConditionalProperty({\n    document: value as SanityDocument,\n    value: undefined,\n    checkProperty: schemaType.readOnly,\n    checkPropertyKey: 'readOnly',\n  })\n\n  if (schemaType.jsonType !== 'object') {\n    throw new Error(`Only object schema types are allowed in ChangeList`)\n  }\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const allChanges = useMemo(\n    () => buildObjectChangeList(schemaType, diff, path, [], {fieldFilter: fields}),\n    [schemaType, fields, path, diff]\n  )\n\n  const changes = useMemo(\n    () => (fields && fields.length === 0 ? [] : maybeFlatten(allChanges)),\n    [allChanges, fields]\n  )\n\n  const rootChange = allChanges[0]\n\n  const revertAllChanges = useCallback(() => {\n    undoChange(rootChange, diff, docOperations)\n    setConfirmRevertAllOpen(false)\n  }, [rootChange, diff, docOperations])\n\n  const handleRevertAllChangesClick = useCallback(() => {\n    setConfirmRevertAllOpen(true)\n  }, [])\n\n  const handleRevertAllChangesMouseEnter = useCallback(() => {\n    setConfirmRevertAllHover(true)\n  }, [])\n\n  const handleRevertAllChangesMouseLeave = useCallback(() => {\n    setConfirmRevertAllHover(false)\n  }, [])\n\n  const closeRevertAllChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertAllOpen(false)\n  }, [])\n\n  const [revertAllContainerElement, setRevertAllContainerElement] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const handleClickOutside = useCallback(() => setConfirmRevertAllOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertAllContainerElement])\n\n  if (changes.length === 0) {\n    return isRoot ? <NoChanges /> : null\n  }\n\n  const showFooter = isRoot && changes.length > 1\n\n  return (\n    <Card>\n      <Stack space={5}>\n        <Stack as={ChangeListWrapper} space={5}>\n          {changes.map((change) => (\n            <div key={change.key}>\n              <ChangeResolver\n                change={change}\n                key={change.key}\n                data-revert-all-changes-hover={confirmRevertAllHover ? '' : undefined}\n                readOnly={isReadOnly || change?.readOnly}\n                hidden={change?.hidden}\n              />\n            </div>\n          ))}\n        </Stack>\n\n        {showFooter && isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n          <PopoverWrapper\n            content={\n              <Box>\n                Are you sure you want to revert all {changes.length} changes?\n                <Grid columns={2} gap={2} marginTop={2}>\n                  <Button mode=\"ghost\" text=\"Cancel\" onClick={closeRevertAllChangesConfirmDialog} />\n                  <Button tone=\"critical\" text=\"Revert all\" onClick={revertAllChanges} />\n                </Grid>\n              </Box>\n            }\n            open={confirmRevertAllOpen}\n            padding={4}\n            placement={'left'}\n            portal\n            ref={setRevertAllContainerElement}\n          >\n            <Stack>\n              <Button\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Revert all changes\"\n                icon={RevertIcon}\n                onClick={handleRevertAllChangesClick}\n                onMouseEnter={handleRevertAllChangesMouseEnter}\n                onMouseLeave={handleRevertAllChangesMouseLeave}\n                disabled={isReadOnly}\n              />\n            </Stack>\n          </PopoverWrapper>\n        )}\n      </Stack>\n    </Card>\n  )\n}\n\nfunction maybeFlatten(changes: ChangeNode[]) {\n  return changes.length === 1 && changes[0].type === 'group' && changes[0].path.length === 0\n    ? changes[0].changes\n    : changes\n}\n","import {Text, Card, rem} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {StringDiffSegment, StringDiff} from '../../types'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.span`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n`\n\nconst ChangeSegment = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    line-height: calc(1.25em + 2px);\n  }\n\n  &:hover {\n    background-color: none !important;\n    background-image: linear-gradient(\n      to bottom,\n      var(--card-bg-color) 0,\n      var(--card-bg-color) 33.333%,\n      currentColor 33.333%,\n      currentColor 100%\n    );\n    background-size: 1px 3px;\n    background-repeat: repeat-x;\n    background-position-y: bottom;\n    padding-bottom: 3px;\n    box-shadow: 0 0 0 1px var(--card-bg-color);\n    z-index: 1;\n  }\n`\n\n/** @internal */\nexport function DiffStringSegment(props: {segment: StringDiffSegment}): React.ReactElement {\n  const {segment} = props\n  const {text} = segment\n\n  if (segment.action === 'added') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        disableHoverEffect\n        tooltip={{description: 'Added'}}\n        as={RoundedCard}\n      >\n        <ChangeSegment as=\"ins\" style={{textDecoration: 'none'}}>\n          {text}\n        </ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  if (segment.action === 'removed') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        as={RoundedCard}\n        disableHoverEffect\n        tooltip={{description: 'Removed'}}\n      >\n        <ChangeSegment as=\"del\">{text}</ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Card as=\"span\" radius={2} style={{display: 'inline'}}>\n      {text}\n    </Card>\n  )\n}\n\n/** @internal */\nexport function DiffString(props: {diff: StringDiff}) {\n  const {diff} = props\n\n  return (\n    <>\n      {(diff.segments || []).map((segment, segmentIndex) => (\n        <DiffStringSegment\n          // eslint-disable-next-line react/no-array-index-key\n          key={segmentIndex}\n          segment={segment}\n        />\n      ))}\n    </>\n  )\n}\n","import {Text, Box, Flex, Stack} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport styled from 'styled-components'\n\n/** @internal */\nexport interface MetaInfoProps {\n  title: string\n  action?: string\n  icon?: React.ComponentType\n  children?: React.ReactNode\n  markRemoved?: boolean\n}\n\nconst MetaText = styled(Text)`\n  color: inherit;\n`\n\n/** @internal */\nexport function MetaInfo(props: MetaInfoProps) {\n  const {title, action, icon, children, markRemoved} = props\n\n  return (\n    <Flex padding={2} align=\"center\">\n      {icon && (\n        <Box padding={2}>\n          <MetaText size={4} forwardedAs={markRemoved ? 'del' : 'div'}>\n            {createElement(icon)}\n          </MetaText>\n        </Box>\n      )}\n\n      <Stack space={2} paddingLeft={2}>\n        <MetaText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs={markRemoved ? 'del' : 'h3'}\n          textOverflow=\"ellipsis\"\n        >\n          {title}\n        </MetaText>\n\n        {action && <div>{action}</div>}\n\n        <MetaText size={0} textOverflow=\"ellipsis\">\n          {children}\n        </MetaText>\n      </Stack>\n    </Flex>\n  )\n}\n","import {isKeyedObject} from '@sanity/types'\n\nexport function isEqual(item: unknown, otherItem: unknown): boolean {\n  if (item === otherItem) {\n    return true\n  }\n\n  if (typeof item !== typeof otherItem) {\n    return false\n  }\n\n  if (typeof item !== 'object' && !Array.isArray(item)) {\n    return item === otherItem\n  }\n\n  if (isKeyedObject(item) && isKeyedObject(otherItem) && item._key === otherItem._key) {\n    return true\n  }\n\n  if (Array.isArray(item) && Array.isArray(otherItem)) {\n    if (item.length !== otherItem.length) {\n      return false\n    }\n\n    return item.every((child, i) => isEqual(child, otherItem[i]))\n  }\n\n  if (item === null || otherItem === null) {\n    return item === otherItem\n  }\n\n  const obj = item as Record<string, unknown>\n  const otherObj = otherItem as Record<string, unknown>\n\n  const keys = Object.keys(obj)\n  const otherKeys = Object.keys(otherObj)\n  if (keys.length !== otherKeys.length) {\n    return false\n  }\n\n  return keys.every((keyName) => isEqual(obj[keyName], otherObj[keyName]))\n}\n","import {ArraySchemaType, isKeyedObject, SchemaType, TypedObject} from '@sanity/types'\nimport {Box, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {SanityPreview} from '../../../../preview'\nimport {useUserColorManager} from '../../../../user-color'\nimport {DiffTooltip, FromToArrow, getAnnotationColor} from '../../../diff'\nimport {Annotation, ArrayDiff, Diff, DiffComponent, ItemDiff} from '../../../types'\nimport {Checkbox} from '../../boolean/preview'\nimport {isEqual} from '../util/arrayUtils'\n\ninterface NamedListOption {\n  title?: string\n  value: unknown\n}\n\ninterface NormalizedListOption {\n  title?: string\n  value: unknown\n  memberType?: Exclude<SchemaType, ArraySchemaType>\n  isPresent: boolean\n  annotation: Annotation\n  itemIndex: number\n}\n\nexport const ArrayOfOptionsFieldDiff: DiffComponent<ArrayDiff> = ({diff, schemaType}) => {\n  const options = schemaType.options?.list\n  const colorManager = useUserColorManager()\n  if (!Array.isArray(options)) {\n    // Shouldn't happen, because the resolver should only resolve here if it does\n    return null\n  }\n\n  return (\n    <div>\n      {diff.items\n        .map((item) => normalizeItems(item, diff, schemaType))\n        .filter((item): item is NormalizedListOption => item !== null)\n        .sort(sortItems)\n        .map((item, index) => {\n          const {annotation, isPresent, value, memberType, title} = item\n          const color = getAnnotationColor(colorManager, annotation)\n          const action = isPresent ? 'Added' : 'Removed'\n          return (\n            <Flex align=\"center\" key={getItemKey(diff, index)}>\n              <DiffTooltip annotations={annotation ? [annotation] : []} description={action}>\n                <Flex align=\"center\">\n                  <Checkbox checked={!isPresent} color={color} />\n                  <Box margin={2}>\n                    <FromToArrow />\n                  </Box>\n                  <Checkbox checked={isPresent} color={color} />\n                </Flex>\n              </DiffTooltip>\n              <Flex align=\"center\">\n                <ItemPreview value={title || value} memberType={memberType} />\n              </Flex>\n            </Flex>\n          )\n        })}\n    </div>\n  )\n}\n\nfunction normalizeItems(\n  item: ItemDiff,\n  parentDiff: ArrayDiff,\n  schemaType: ArraySchemaType\n): NormalizedListOption | null {\n  if (item.diff.action === 'unchanged') {\n    return null\n  }\n\n  const {fromValue, toValue} = parentDiff\n  const value = getValue(item.diff)\n  const wasPresent = isInArray(value, fromValue)\n  const isPresent = isInArray(value, toValue)\n  if (wasPresent === isPresent) {\n    return null\n  }\n\n  return {\n    title: getItemTitle(value, schemaType),\n    memberType: resolveMemberType(getValue(item.diff), schemaType),\n    itemIndex: getOptionIndex(value, schemaType),\n    annotation: item.annotation,\n    isPresent,\n    value,\n  }\n}\n\nfunction sortItems(itemA: NormalizedListOption, itemB: NormalizedListOption): number {\n  return itemA.itemIndex - itemB.itemIndex\n}\n\nfunction ItemPreview({value, memberType}: {memberType?: SchemaType; value: unknown}) {\n  return (\n    <Box marginX={2} marginY={1}>\n      {typeof value === 'string' || typeof value === 'number' ? (\n        value\n      ) : (\n        <SanityPreview schemaType={memberType!} value={value as any} layout=\"default\" />\n      )}\n    </Box>\n  )\n}\n\nfunction isInArray(value: unknown, parent?: unknown[] | null): boolean {\n  const array = parent || []\n  return typeof value === 'object' && value !== null\n    ? array.some((item) => isEqual(item, value))\n    : array.includes(value)\n}\n\nfunction getItemKey(diff: Diff, index: number): string | number {\n  const value = diff.toValue || diff.fromValue\n  return isKeyedObject(value) ? value._key : index\n}\n\nfunction getValue(diff: Diff) {\n  return typeof diff.toValue === 'undefined' ? diff.fromValue : diff.toValue\n}\n\nfunction resolveMemberType(item: unknown, schemaType: ArraySchemaType) {\n  const itemTypeName = resolveTypeName(item)\n  return schemaType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nfunction resolveTypeName(value: unknown): string {\n  const jsType = resolveJSType(value)\n  if (jsType !== 'object') {\n    return jsType\n  }\n\n  const obj = value as TypedObject\n  return ('_type' in obj && obj._type) || jsType\n}\n\nfunction resolveJSType(val: unknown) {\n  if (val === null) {\n    return 'null'\n  }\n\n  if (Array.isArray(val)) {\n    return 'array'\n  }\n\n  return typeof val\n}\n\nfunction isNamedOption(item: unknown | NamedListOption): item is NamedListOption {\n  return typeof item === 'object' && item !== null && 'title' in item\n}\n\nfunction getOptionIndex(item: unknown, schemaType: ArraySchemaType): number {\n  const list = schemaType.options?.list || []\n  return list.findIndex((opt) => isEqual(isNamedOption(opt) ? opt.value : opt, item))\n}\n\nfunction getItemTitle(item: unknown, schemaType: ArraySchemaType): string | undefined {\n  const list = (schemaType.options?.list || []) as NamedListOption[]\n  const index = getOptionIndex(item, schemaType)\n  return index === -1 ? undefined : list[index].title || undefined\n}\n","import * as legacyDateFormat from '@sanity/util/legacyDateFormat'\nimport {StringSchemaType} from '@sanity/types'\nimport {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nconst DatetimeWrapper = styled.div`\n  display: inline-block;\n  word-wrap: break-word;\n`\n\nexport const DatetimePreview: FieldPreviewComponent<string> = function DatetimePreview({\n  value,\n  schemaType,\n}) {\n  return (\n    <Box as={DatetimeWrapper} paddingX={2} paddingY={1}>\n      {formatDateTime(value, schemaType)}\n    </Box>\n  )\n}\n\nfunction formatDateTime(value: string, schemaType: StringSchemaType): string {\n  const {options, name} = schemaType\n  const dateFormat = options?.dateFormat || DEFAULT_DATE_FORMAT\n  const timeFormat = options?.timeFormat || DEFAULT_TIME_FORMAT\n\n  return legacyDateFormat.format(\n    new Date(value),\n    name === 'date' ? dateFormat : `${dateFormat} ${timeFormat}`\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {DatetimePreview} from '../preview'\n\nexport const DatetimeFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      align=\"center\"\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={DatetimePreview}\n    />\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {StringPreview} from '../../string/preview'\n\nexport const UrlFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  return <DiffFromTo diff={diff} schemaType={schemaType} previewComponent={StringPreview} />\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Slug} from '@sanity/types'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst SlugWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const SlugPreview: FieldPreviewComponent<Slug> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={SlugWrapper} paddingX={2} paddingY={1}>\n      {value.current}\n    </Box>\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {SlugPreview} from '../preview'\n\ninterface Slug {\n  current?: string\n}\n\nexport const SlugFieldDiff: DiffComponent<ObjectDiff<Slug>> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      layout=\"inline\"\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={SlugPreview}\n    />\n  )\n}\n","import {ArrayOfOptionsFieldDiff} from '../../types/array/diff'\nimport {DatetimeFieldDiff} from '../../types/datetime/diff'\nimport {UrlFieldDiff} from '../../types/url/diff'\nimport {SlugFieldDiff} from '../../types/slug/diff'\nimport {DiffComponentResolver} from '../../types'\n\n/** @internal */\nexport const diffResolver: DiffComponentResolver = ({schemaType}) => {\n  // datetime or date\n  if (['datetime', 'date'].includes(schemaType.name)) {\n    return DatetimeFieldDiff\n  }\n\n  if (schemaType.name === 'url') {\n    return UrlFieldDiff\n  }\n\n  if (schemaType.name === 'slug') {\n    return SlugFieldDiff\n  }\n\n  if (schemaType.jsonType === 'array' && Array.isArray(schemaType.options?.list)) {\n    return ArrayOfOptionsFieldDiff\n  }\n\n  return undefined\n}\n","import {AssetSource, ObjectSchemaType, Path, SanityDocument} from '@sanity/types'\nimport {createContext} from 'react'\nimport {PatchChannel} from './patch'\nimport {\n  FormBuilderArrayFunctionComponent,\n  FormBuilderCustomMarkersComponent,\n  FormBuilderFilterFieldFn,\n  FormBuilderMarkersComponent,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {FormFieldGroup, ObjectMember, StateTree} from './store'\n\n/**\n * @beta\n */\nexport interface FormBuilderContextValue {\n  /**\n   * @deprecated INTERNAL USE ONLY\n   * @internal\n   */\n  __internal: {\n    components: {\n      CustomMarkers: FormBuilderCustomMarkersComponent\n      Markers: FormBuilderMarkersComponent\n    }\n    file: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    filterField: FormBuilderFilterFieldFn\n    image: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    getDocument: () => SanityDocument | undefined\n    patchChannel: PatchChannel\n  }\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @internal\n */\nexport const FormBuilderContext = createContext<FormBuilderContextValue | null>(null)\n","// eslint-disable-next-line no-empty-function,@typescript-eslint/no-empty-function\n\nimport {isArraySchemaType, isBooleanSchemaType, isObjectSchemaType} from '@sanity/types'\nimport {ArrayOfObjectsInputProps, InputProps, ObjectInputProps} from '../types'\nimport {\n  BooleanFieldProps,\n  FieldProps,\n  ObjectFieldProps,\n  PrimitiveFieldProps,\n} from '../types/fieldProps'\n\nexport function assertType<T>(v: unknown): asserts v is T {\n  // intentionally empty\n}\n\nexport function isObjectInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ArrayOfObjectsInputProps {\n  return isArraySchemaType(inputProps.schemaType)\n}\n\nexport function isPrimitiveField(\n  fieldProps: FieldProps | Omit<FieldProps, 'renderDefault'>\n): fieldProps is PrimitiveFieldProps {\n  return !isObjectSchemaType(fieldProps.schemaType) && !isArraySchemaType(fieldProps.schemaType)\n}\n\nexport function isBooleanField(\n  fieldProps: FieldProps | Omit<FieldProps, 'renderDefault'>\n): fieldProps is BooleanFieldProps {\n  return isBooleanSchemaType(fieldProps.schemaType)\n}\n\nexport function isObjectField(\n  fieldProps: FieldProps | Omit<FieldProps, 'renderDefault'>\n): fieldProps is ObjectFieldProps {\n  return isObjectSchemaType(fieldProps.schemaType)\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport {Path} from '@sanity/types'\nimport React, {memo, useContext} from 'react'\nimport {PatchEvent} from '../../patch'\n\n/** @internal */\nexport interface FormCallbacksValue {\n  onChange: (patchEvent: PatchEvent) => void\n  onPathFocus: (path: Path) => void\n  onPathBlur: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onFieldGroupSelect: (path: Path, fieldGroupName: string) => void\n}\n\nconst FormCallbacksContext = React.createContext<FormCallbacksValue | null>(null)\n\n/** @internal */\nexport const FormCallbacksProvider = memo(function FormCallbacksProvider(\n  props: FormCallbacksValue & {children: React.ReactNode}\n) {\n  return (\n    <FormCallbacksContext.Provider value={props}>{props.children}</FormCallbacksContext.Provider>\n  )\n})\n\n/** @internal */\nexport function useFormCallbacks(): FormCallbacksValue {\n  const ctx = useContext(FormCallbacksContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","import {useEffect, useRef} from 'react'\n\n/**\n * A hook that returns the previous value of a component variable\n * This might be provided by React in the future (https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state)\n */\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render*/\n  value: T\n): T | undefined\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render */\n  value: T,\n  initial: T\n): T\nexport function usePrevious<T>(value: T, initial?: T): T | null {\n  const ref = useRef<T | null>(initial || null)\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n","import {useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {usePrevious} from './usePrevious'\n\n/**\n * A hook for doing side effects as a response to a change in a hook value between renders\n *\n * @example\n * ```ts\n * useDidUpdate(hasFocus, (hadFocus, hasFocus) => {\n *  if (hasFocus) {\n *    scrollIntoView(elementRef.current)\n *   }\n * })\n * ```\n */\nexport function useDidUpdate<T>(\n  /** The value you want to respond to changes in. */\n  current: T,\n  /** Callback to run when the value changes. */\n  didUpdate: (previous: T | undefined, current: T) => void,\n  compare?: (previous: T | undefined, current: T) => boolean\n): void\nexport function useDidUpdate<T>(\n  current: T,\n  didUpdate: (previous: T | undefined, current: T | undefined) => void,\n  compare: (previous: T | undefined, current: T) => boolean = shallowEquals\n): void {\n  const previous = usePrevious<T>(current)\n  const initial = useRef<boolean>(true)\n  useEffect(() => {\n    if (initial.current) {\n      initial.current = false\n      return\n    }\n    if (!compare(previous, current)) {\n      didUpdate(previous, current)\n    }\n  }, [didUpdate, current, previous, compare])\n}\n","import {FormPatch} from './types'\n\n/**\n * @beta\n */\nexport interface MutationPatchMsg {\n  type: 'mutation'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @beta\n */\nexport interface RebasePatchMsg {\n  type: 'rebase'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @beta\n */\nexport type PatchMsg = MutationPatchMsg | RebasePatchMsg\n\n/**\n * @beta\n */\nexport interface PatchMsgSubscriber {\n  (msg: PatchMsg): void\n}\n\n/**\n * @beta\n */\nexport interface PatchChannel {\n  publish: (msg: PatchMsg) => void\n  subscribe: (subscriber: PatchMsgSubscriber) => () => void\n}\n\n/**\n * @internal\n */\nexport function createPatchChannel(): PatchChannel {\n  const _subscribers: PatchMsgSubscriber[] = []\n\n  return {\n    publish(msg: PatchMsg) {\n      for (const subscriber of _subscribers) {\n        subscriber(msg)\n      }\n    },\n\n    subscribe(subscriber) {\n      _subscribers.push(subscriber)\n\n      return () => {\n        const idx = _subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          _subscribers.splice(idx, 1)\n        }\n      }\n    },\n  }\n}\n","import type {Path, PathSegment} from '@sanity/types'\nimport type {\n  FormSetIfMissingPatch,\n  FormInsertPatch,\n  FormInsertPatchPosition,\n  FormSetPatch,\n  FormUnsetPatch,\n  FormIncPatch,\n  FormDecPatch,\n  FormDiffMatchPatch,\n} from './types'\n\n/** @internal */\nexport const SANITY_PATCH_TYPE = Symbol.for('sanity.patch')\n\n/** @beta */\nexport function setIfMissing(value: any, path: Path = []): FormSetIfMissingPatch {\n  return {\n    patchType: SANITY_PATCH_TYPE,\n    type: 'setIfMissing',\n    path,\n    value,\n  }\n}\n\n/** @beta */\nexport function insert(\n  items: any[],\n  position: FormInsertPatchPosition,\n  path: Path = []\n): FormInsertPatch {\n  return {\n    patchType: SANITY_PATCH_TYPE,\n    type: 'insert',\n    path,\n    position,\n    items,\n  }\n}\n\n/** @beta */\nexport function set(value: any, path: Path = []): FormSetPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'set', path, value}\n}\n\n/** @beta */\nexport function unset(path: Path = []): FormUnsetPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'unset', path}\n}\n\n/** @beta */\nexport function diffMatchPatch(value: string, path: Path = []): FormDiffMatchPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'diffMatchPatch', path, value}\n}\n\n/** @beta */\nexport function inc(amount = 1, path: Path = []): FormIncPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'inc', path, value: amount}\n}\n\n/** @beta */\nexport function dec(amount = 1, path: Path = []): FormDecPatch {\n  return {patchType: SANITY_PATCH_TYPE, type: 'dec', path, value: amount}\n}\n\n/** @internal */\nexport function prefixPath<T extends {path: Path}>(patch: T, segment: PathSegment): T {\n  return {\n    ...patch,\n    path: [segment, ...patch.path],\n  }\n}\n","import {PathSegment} from '@sanity/types'\nimport {flatten} from 'lodash'\nimport {prefixPath} from './patch'\nimport {FormPatch, PatchArg} from './types'\n\n/**\n * @beta\n */\nexport class PatchEvent {\n  static from(input: PatchArg | PatchEvent): PatchEvent {\n    if (input instanceof PatchEvent) {\n      return input\n    }\n    return new PatchEvent(Array.isArray(input) ? flatten(input) : [input])\n  }\n\n  patches: Array<FormPatch>\n\n  constructor(patches: Array<FormPatch>) {\n    this.patches = patches\n  }\n\n  prepend(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...flatten(patches), ...this.patches])\n  }\n\n  append(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...this.patches, ...flatten(patches)])\n  }\n\n  prefixAll(segment: PathSegment): PatchEvent {\n    return PatchEvent.from(this.patches.map((patch) => prefixPath(patch, segment)))\n  }\n}\n","import getRandomValues from 'get-random-values-esm'\n\n// WHATWG crypto RNG - https://w3c.github.io/webcrypto/Overview.html\nfunction whatwgRNG(length = 16) {\n  const rnds8 = new Uint8Array(length)\n  getRandomValues(rnds8)\n  return rnds8\n}\n\nconst getByteHexTable = (() => {\n  let table: string[]\n  return () => {\n    if (table) {\n      return table\n    }\n    table = []\n    for (let i = 0; i < 256; ++i) {\n      table[i] = (i + 0x100).toString(16).substring(1)\n    }\n    return table\n  }\n})()\n\nexport function randomKey(length?: number) {\n  const table = getByteHexTable()\n  return whatwgRNG(length)\n    .reduce((str, n) => str + table[n], '')\n    .slice(0, length)\n}\n","import {randomKey} from './randomKey'\n\nfunction hasKey<T extends {_key?: string}>(item: T): item is T & {_key: string} {\n  return item._key !== undefined\n}\n\nexport function ensureKey<T extends {_key?: string}>(item: T): T & {_key: string} {\n  return hasKey(item) ? item : {...item, _key: randomKey(12)}\n}\n","import {isArraySchemaType, isObjectSchemaType, SchemaType} from '@sanity/types'\n\nexport function createProtoValue(type: SchemaType): any {\n  if (isObjectSchemaType(type)) {\n    return type.name === 'object' ? {} : {_type: type.name}\n  }\n  if (isArraySchemaType(type)) {\n    return []\n  }\n  if (type.jsonType === 'string') {\n    return ''\n  }\n  if (type.jsonType === 'number') {\n    return 0\n  }\n  if (type.jsonType === 'boolean') {\n    return false\n  }\n  return undefined\n}\n","import {isObjectSchemaType, SchemaType} from '@sanity/types'\nimport {randomKey} from '@sanity/util/content'\nimport {createProtoValue} from '../../../utils/createProtoValue'\nimport {ObjectItem} from '../../../types'\n\nexport function createProtoArrayValue<Item extends ObjectItem>(type: SchemaType): Item {\n  if (!isObjectSchemaType(type)) {\n    throw new Error(\n      `Invalid item type: \"${type.type}\". Default array input can only contain objects (for now)`\n    )\n  }\n\n  return {...createProtoValue(type), _key: randomKey(12)} as Item\n}\n","import {SchemaType} from '@sanity/types'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function is(typeName: string, type: SchemaType): boolean {\n  return type.name === typeName || Boolean(type.type && is(typeName, type.type))\n}\n\nexport {is as type}\n\nexport function primitive(type: SchemaType) {\n  return PRIMITIVES.some((typeName) => is(typeName, type))\n}\n","// Takes a observable-returning function and returns a new function that limits on the number of\n// concurrent observables.\nimport {first, mergeMap} from 'rxjs/operators'\nimport {Subject, Subscription, Observable, from as observableFrom} from 'rxjs'\nimport {FIXME} from '../../../FIXME'\n\nconst DEFAULT_CONCURRENCY = 4\n\nfunction remove<T>(array: Array<T>, item: T): Array<T> {\n  const index = array.indexOf(item)\n  if (index > -1) {\n    array.splice(index, 1)\n  }\n  return array\n}\n\nexport function withMaxConcurrency<Args extends any[], Ret>(\n  func: (...args: Args) => Observable<Ret>,\n  concurrency: number = DEFAULT_CONCURRENCY\n) {\n  const throttler = createThrottler(concurrency)\n  return (...args: Args) => observableFrom(throttler(func(...args))) as Observable<Ret>\n}\n\nexport function createThrottler(concurrency: number = DEFAULT_CONCURRENCY) {\n  const currentSubscriptions: Array<Subscription> = []\n  const pendingObservables: Array<Observable<any>> = []\n  const ready$ = new Subject()\n\n  return request\n\n  function request(observable: Observable<unknown>): Observable<unknown> {\n    return new Observable((observer) => {\n      if (currentSubscriptions.length >= concurrency) {\n        return scheduleAndWait(observable)\n          .pipe(mergeMap(request) as FIXME)\n          .subscribe(observer)\n      }\n      const subscription = observable.subscribe(observer)\n      currentSubscriptions.push(subscription)\n      return () => {\n        remove(currentSubscriptions, subscription)\n        remove(pendingObservables, observable)\n        subscription.unsubscribe()\n        check()\n      }\n    })\n  }\n\n  function scheduleAndWait(observable: Observable<unknown>) {\n    pendingObservables.push(observable)\n    return ready$.asObservable().pipe(first((obs) => obs === observable))\n  }\n\n  function check() {\n    while (pendingObservables.length > 0 && currentSubscriptions.length < concurrency) {\n      ready$.next(pendingObservables.shift())\n    }\n  }\n}\n","import {mergeMap, map, catchError} from 'rxjs/operators'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {FileAsset, ImageAsset} from '@sanity/types'\nimport {SanityClient, ProgressEvent, SanityAssetDocument} from '@sanity/client'\nimport {withMaxConcurrency} from '../../utils'\nimport {UploadOptions} from '../../uploads/types'\nimport {DocumentPreviewStore} from '../../../../preview'\n\nconst MAX_CONCURRENT_UPLOADS = 4\n\ntype UploadEvent = ProgressEvent | {type: 'complete'; id: string; asset: SanityAssetDocument}\n\nfunction uploadSanityAsset(\n  client: SanityClient,\n  assetType: 'file' | 'image',\n  file: File | Blob,\n  options: UploadOptions = {}\n): Observable<UploadEvent> {\n  const extract = options.metadata\n  const preserveFilename = options.storeOriginalFilename\n  const {label, title, description, creditLine, source} = options\n  return hashFile(file).pipe(\n    catchError(() =>\n      // ignore if hashing fails for some reason\n      observableOf(null)\n    ),\n\n    mergeMap((hash) =>\n      // note: the sanity api will still dedupe unique files, but this saves us from uploading the asset file entirely\n      hash ? fetchExisting(client, `sanity.${assetType}Asset`, hash) : observableOf(null)\n    ),\n\n    mergeMap((existing: SanityAssetDocument | null) => {\n      if (existing) {\n        return observableOf({\n          // complete with the existing asset document\n          type: 'complete' as const,\n          id: existing._id,\n          asset: existing,\n        })\n      }\n      return client.observable.assets\n        .upload(assetType, file, {\n          tag: 'asset.upload',\n          extract,\n          preserveFilename,\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n        .pipe(\n          map((event) =>\n            event.type === 'response'\n              ? {\n                  // rewrite to a 'complete' event\n                  type: 'complete' as const,\n                  id: event.body.document._id,\n                  asset: event.body.document,\n                }\n              : event\n          )\n        )\n    })\n  )\n}\n\nconst uploadAsset = withMaxConcurrency(uploadSanityAsset, MAX_CONCURRENT_UPLOADS)\n\nexport const uploadImageAsset = (\n  client: SanityClient,\n  file: File | Blob,\n  options?: UploadOptions\n) => uploadAsset(client, 'image', file, options)\n\nexport const uploadFileAsset = (client: SanityClient, file: File | Blob, options?: UploadOptions) =>\n  uploadAsset(client, 'file', file, options)\n\n// note: there's currently 100% overlap between the ImageAsset document and the FileAsset documents as per interface required by the image and file input\nfunction observeAssetDoc(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return documentPreviewStore.observePaths({_type: 'reference', _ref: id}, [\n    'originalFilename',\n    'url',\n    'metadata',\n    'label',\n    'title',\n    'description',\n    'creditLine',\n    'source',\n    'size',\n  ])\n}\n\nexport function observeImageAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<ImageAsset>\n}\n\nexport function observeFileAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<FileAsset>\n}\n\nfunction fetchExisting(\n  client: SanityClient,\n  type: string,\n  hash: string\n): Observable<ImageAsset | FileAsset | null> {\n  return client.observable.fetch(\n    '*[_type == $documentType && sha1hash == $hash][0]',\n    {documentType: type, hash},\n    {tag: 'asset.find-duplicate'}\n  )\n}\n\nfunction readFile(file: Blob | File): Observable<ArrayBuffer> {\n  return new Observable((subscriber) => {\n    const reader = new FileReader()\n    reader.onload = () => {\n      subscriber.next(reader.result as ArrayBuffer)\n      subscriber.complete()\n    }\n    reader.onerror = (err) => {\n      subscriber.error(err)\n    }\n    reader.readAsArrayBuffer(file)\n    return () => {\n      reader.abort()\n    }\n  })\n}\n\nfunction hashFile(file: File | Blob): Observable<string | null> {\n  if (!window.crypto || !window.crypto.subtle || !window.FileReader) {\n    return observableOf(null)\n  }\n  return readFile(file).pipe(\n    mergeMap((arrayBuffer) => crypto.subtle.digest('SHA-1', arrayBuffer)),\n    map(hexFromBuffer)\n  )\n}\n\nfunction hexFromBuffer(buffer: ArrayBuffer): string {\n  return Array.prototype.map\n    .call(new Uint8Array(buffer), (x) => `00${x.toString(16)}`.slice(-2))\n    .join('')\n}\n","import {Observable, of as observableOf, from as observableFrom} from 'rxjs'\nimport {map, catchError} from 'rxjs/operators'\nimport exif from 'exif-component'\n\nfunction readFileAsArrayBuffer(\n  file: File,\n  length: number\n): Observable<string | ArrayBuffer | null> {\n  return new Observable((observer) => {\n    const reader = new window.FileReader()\n    reader.onerror = (err) => observer.error(err)\n    reader.onload = () => {\n      observer.next(reader.result)\n      observer.complete()\n    }\n    reader.readAsArrayBuffer(length === undefined ? file : file.slice(0, length))\n    return () => reader.abort()\n  })\n}\n\nconst SKIP_EXIF_ERROR_RE = /(invalid image format)|(No exif data)/i\n\n// 128k should be enough for exif data according to https://github.com/mattiasw/ExifReader#tips\nconst EXIF_BUFFER_LENGTH = 128000\n\nexport function readExif(file: File) {\n  return observableFrom(readFileAsArrayBuffer(file, EXIF_BUFFER_LENGTH)).pipe(\n    map((buf) => exif(buf)),\n    catchError((error) => {\n      if (!SKIP_EXIF_ERROR_RE.test(error.message)) {\n        // Exif read failed, we do not want to fail hard\n        console.warn(`Exif read failed, continuing anyway: ${error.message}`) // eslint-disable-line no-console\n      }\n      return observableOf({})\n    })\n  )\n}\n","import {Observable} from 'rxjs'\n\n/* eslint-disable */\n\n/**\n * Check if we need to change dims.\n */\nfunction rotated(n: number) {\n  return [5, 6, 7, 8].indexOf(n) > -1\n}\n\ntype RotateOpts = {\n  degrees?: number\n  x: number\n  y: number\n}\n\n// Based on github.com/component/rotate\nfunction rotate(ctx: CanvasRenderingContext2D | null, options: RotateOpts) {\n  const x = options.x\n  const y = options.y\n\n  const radians = (options.degrees || 0) * (Math.PI / 180)\n\n  ctx?.translate(x, y)\n  ctx?.rotate(radians)\n  ctx?.translate(-x, -y)\n}\n\n// Based on github.com/component/flip\nfunction flip(canvas: HTMLCanvasElement, x: boolean, y: boolean) {\n  const ctx = canvas.getContext('2d')\n  ctx?.translate(x ? canvas.width : 0, y ? canvas.height : 0)\n  ctx?.scale(x ? -1 : 1, y ? -1 : 1)\n}\n\nconst ORIENTATION_OPS = [\n  {op: 'none', degrees: 0},\n  {op: 'flip-x', degrees: 0},\n  {\n    op: 'none',\n    degrees: 180,\n  },\n  {op: 'flip-y', degrees: 0},\n  {op: 'flip-x', degrees: 90},\n  {op: 'none', degrees: 90},\n  {\n    op: 'flip-x',\n    degrees: -90,\n  },\n  {op: 'none', degrees: -90},\n]\n\nexport type Orientation =\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-right'\n  | 'bottom-left'\n  | 'left-top'\n  | 'right-top'\n  | 'right-bottom'\n  | 'left-bottom'\n\nconst ORIENTATIONS: Array<Orientation> = [\n  'top-left',\n  'top-right',\n  'bottom-right',\n  'bottom-left',\n  'left-top',\n  'right-top',\n  'right-bottom',\n  'left-bottom',\n]\n\nexport const DEFAULT_ORIENTATION: Orientation = 'top-left'\n\nconst THUMB_SIZE = 120\n\n// Based on github.com/component/exif-rotate\nfunction _orient(img: HTMLImageElement, orientationNumber: number): HTMLCanvasElement {\n  const orientation = ORIENTATION_OPS[orientationNumber - 1]\n\n  const ratio = img.height / img.width\n  img.width = THUMB_SIZE / ratio\n  img.height = img.width * ratio\n\n  // canvas\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n\n  // dims\n  if (rotated(orientationNumber)) {\n    canvas.height = img.width\n    canvas.width = img.height\n  } else {\n    canvas.width = img.width\n    canvas.height = img.height\n  }\n\n  // flip\n  if (orientation.op === 'flip-x') {\n    flip(canvas, true, false)\n  }\n  if (orientation.op === 'flip-y') {\n    flip(canvas, false, true)\n  }\n\n  // rotate\n  if (orientation.degrees) {\n    rotate(ctx, {\n      degrees: orientation.degrees,\n      x: canvas.width / 2,\n      y: canvas.height / 2,\n    })\n\n    if (rotated(orientationNumber)) {\n      const d = canvas.width - canvas.height\n      ctx?.translate(d / 2, -d / 2)\n    }\n  }\n\n  ctx?.drawImage(img, 0, 0, img.width, img.height)\n  return canvas\n}\n\n/* eslint-enable */\nexport function orient(image: HTMLImageElement, orientationId: Orientation) {\n  return new Observable((observer) => {\n    // console.time('canvas to blob')\n    const orientation = ORIENTATIONS.indexOf(orientationId) + 1\n    const canvas = _orient(image, orientation)\n    observer.next(canvas.toDataURL('image/jpeg', 0.1))\n    observer.complete()\n  })\n}\n","import {Observable} from 'rxjs'\nimport {mergeMap} from 'rxjs/operators'\nimport {orient, Orientation} from './orient'\n\nfunction loadImage(url: string): Observable<HTMLImageElement> {\n  return new Observable((observer) => {\n    const image = new window.Image()\n    //console.time(\"read image\");\n    image.onerror = () => {\n      observer.error(\n        new Error(`Could not load image from url \"${url}\". Image may be of an unsupported format`)\n      )\n    }\n    image.onload = () => {\n      //console.timeEnd(\"read image\");\n      observer.next(image)\n      observer.complete()\n    }\n    image.src = url\n    return () => {\n      // todo: cancel loading (if possible?)\n    }\n  })\n}\n\nexport function rotateImage(file: File, orientation: Orientation) {\n  return loadImage(window.URL.createObjectURL(file)).pipe(\n    mergeMap((image) => orient(image, orientation))\n  )\n}\n","export const UPLOAD_STATUS_KEY = '_upload'\n","import {FormPatch, set, setIfMissing, unset} from '../../patch'\nimport {UploadProgressEvent} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\n\nconst UNSET_UPLOAD_PATCH = unset([UPLOAD_STATUS_KEY])\n\nexport function createUploadEvent(patches: FormPatch[] = []): UploadProgressEvent {\n  return {\n    type: 'uploadProgress',\n    patches,\n  }\n}\n\nexport const CLEANUP_EVENT = createUploadEvent([UNSET_UPLOAD_PATCH])\n\nexport function createInitialUploadEvent(file: File) {\n  const now = new Date().toISOString()\n  const value = {\n    progress: 2,\n    initiated: now,\n    updated: now,\n    file: {name: file.name, type: file.type},\n  }\n\n  return createUploadEvent([\n    setIfMissing({[UPLOAD_STATUS_KEY]: value}, []),\n    set(value, [UPLOAD_STATUS_KEY]),\n  ])\n}\n","import {from as observableFrom, of as observableOf, Observable} from 'rxjs'\nimport {catchError, concat, filter, map, merge, mergeMap} from 'rxjs/operators'\nimport type {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImageAsset} from '../inputs/client-adapters/assets'\nimport {readExif} from './image/readExif'\nimport {rotateImage} from './image/rotateImage'\nimport {DEFAULT_ORIENTATION, Orientation} from './image/orient'\nimport {UploadProgressEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {CLEANUP_EVENT, createInitialUploadEvent, createUploadEvent} from './utils'\n\ntype Exif = {\n  orientation: Orientation\n}\n\nexport function uploadImage(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadProgressEvent> {\n  const upload$ = uploadImageAsset(client, file, options).pipe(\n    filter((event: any) => event.stage !== 'download'),\n    map((event) => ({\n      ...event,\n      progress: 2 + (event.percent / 100) * 98,\n    })),\n\n    map((event: any) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  const setPreviewUrl$ = readExif(file).pipe(\n    mergeMap((exifData: unknown) =>\n      rotateImage(file, (exifData as Exif).orientation || DEFAULT_ORIENTATION)\n    ),\n\n    catchError((error) => {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Image preprocessing failed for \"%s\" with the error: %s',\n        file.name,\n        error.message\n      )\n\n      // something went wrong, but continue still\n      return observableOf(null)\n    }),\n    filter(Boolean),\n    map((imageUrl) => createUploadEvent([set(imageUrl, [UPLOAD_STATUS_KEY, 'previewImage'])]))\n  )\n\n  return observableOf(createInitialUploadEvent(file)).pipe(\n    concat(observableFrom(upload$).pipe(merge(setPreviewUrl$))),\n    concat(observableOf(CLEANUP_EVENT))\n  )\n}\n","import {of as observableOf, Observable} from 'rxjs'\nimport {map, concat} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadFileAsset} from '../inputs/client-adapters/assets'\nimport {UploadProgressEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {createUploadEvent, createInitialUploadEvent, CLEANUP_EVENT} from './utils'\n\nexport function uploadFile(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadProgressEvent> {\n  const upload$ = uploadFileAsset(client, file, options).pipe(\n    map((event) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  return observableOf(createInitialUploadEvent(file)).pipe(\n    concat(upload$),\n    concat(observableOf(CLEANUP_EVENT))\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImage} from './uploadImage'\nimport {uploadFile} from './uploadFile'\nimport {Uploader, UploaderDef, UploadOptions} from './types'\n\nconst UPLOAD_IMAGE: UploaderDef = {\n  type: 'image',\n  accepts: 'image/*',\n  upload: (client: SanityClient, file: File, type?: SchemaType, options?: UploadOptions) =>\n    uploadImage(client, file, options),\n}\n\nconst UPLOAD_FILE: UploaderDef = {\n  type: 'file',\n  accepts: '',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options),\n}\n\nconst UPLOAD_TEXT: UploaderDef = {\n  type: 'string',\n  accepts: 'text/*',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options).pipe(\n      map((content) => ({\n        type: 'uploadProgress',\n        patches: [set(content)],\n      }))\n    ),\n\n  // Todo: promote this to a \"first-class\" form-builder abstraction\n  // and make it possible to register custom uploaders\n}\n\nexport const uploaders: Array<Uploader> = [UPLOAD_IMAGE, UPLOAD_TEXT, UPLOAD_FILE].map(\n  (uploader, i) => ({\n    ...uploader,\n    priority: i,\n  })\n)\n","import type {FileLike} from './types'\n\n/**\n * Check if the provided file type should be accepted by the input with accept attribute.\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#attr-accept\n *\n * Inspired by https://github.com/enyo/dropzone (MIT) (c) 2021 Matias Meno\n * Based on https://github.com/react-dropzone/attr-accept (MIT) (c) 2015 Andrey Okonetchnikov\n *\n * @param file - https://developer.mozilla.org/en-US/docs/Web/API/File\n * @param acceptedFiles - List of accepted mime types (comma-separated string or array)\n * @returns True if file is accepted, false otherwise\n */\nexport function accepts(file: FileLike, acceptedFiles: string | string[]): boolean {\n  if (!file || !acceptedFiles) {\n    return true\n  }\n\n  const acceptedFilesArray = Array.isArray(acceptedFiles)\n    ? acceptedFiles // eg `['image/png', 'image/jpeg']`\n    : acceptedFiles.split(',') // eg `image/png,image/jpeg`\n\n  const fileName = file.name || ''\n  const mimeType = (file.type || '').toLowerCase()\n  const baseMimeType = mimeType.replace(/\\/.*$/, '')\n\n  return acceptedFilesArray.some((type) => {\n    const validType = type.trim().toLowerCase()\n\n    if (validType.charAt(0) === '.') {\n      return fileName.toLowerCase().endsWith(validType)\n    }\n\n    if (validType.endsWith('/*')) {\n      // This is something like a image/* mime type\n      return baseMimeType === validType.replace(/\\/.*$/, '')\n    }\n\n    return mimeType === validType\n  })\n}\n","import type {SchemaType} from '@sanity/types'\nimport * as is from '../../utils/is'\nimport {FIXME} from '../../../FIXME'\nimport type {FileLike, Uploader} from './types'\nimport {uploaders} from './uploaders'\nimport {accepts} from './accepts'\n\nexport function resolveUploader(type: SchemaType, file: FileLike): Uploader | null {\n  return (\n    uploaders.find((uploader) => {\n      return (\n        is.type(uploader.type, type) &&\n        accepts(file, uploader.accepts) &&\n        accepts(file, (type.options as FIXME)?.accept || '')\n      )\n    }) || null\n  )\n}\n","import {useContext} from 'react'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\n\n/**\n * @beta\n */\nexport function useFormBuilder(): FormBuilderContextValue {\n  const formBuilder = useContext(FormBuilderContext)\n\n  if (!formBuilder) {\n    throw new Error('FormBuilder: missing context value')\n  }\n\n  return formBuilder\n}\n","const IGNORE_KEYS = ['_key', '_type', '_weak']\n\nexport function isEmptyItem(value: Record<string, unknown>): value is Record<never, never> {\n  return Object.keys(value).every((key) => IGNORE_KEYS.includes(key))\n}\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {concat, defer, EMPTY, from, Observable, of} from 'rxjs'\nimport {catchError, map, mergeMap} from 'rxjs/operators'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {FormPatch, set, unset} from '../../patch'\nimport {ObjectItem} from '../../types'\nimport {isEmptyItem} from '../../store/utils/isEmptyItem'\n\nconst getMemberTypeOfItem = (schemaType: ArraySchemaType, item: any): SchemaType | undefined => {\n  const itemTypeName = resolveTypeName(item)\n  return schemaType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport function resolveInitialArrayValues<T extends ObjectItem>(\n  items: T[],\n  schemaType: ArraySchemaType,\n  resolver: (type: SchemaType, params: Record<string, unknown>) => Promise<T>\n): Observable<\n  | {type: 'patch'; patches: FormPatch[]}\n  | {type: 'error'; error: Error; item: T; schemaType: SchemaType}\n> {\n  return from(items).pipe(\n    mergeMap((item) => {\n      const itemKey = {_key: item._key}\n      return of(getMemberTypeOfItem(schemaType, item)).pipe(\n        mergeMap((memberType) => (memberType ? of(memberType) : EMPTY)),\n        mergeMap((memberType) => {\n          if (!isEmptyItem(item) || !resolver) {\n            return EMPTY\n          }\n          return concat(\n            of({type: 'patch' as const, patches: [set(true, [itemKey, '_resolvingInitialValue'])]}),\n            defer(() => resolver(memberType, item)).pipe(\n              map((initial) => ({\n                type: 'patch' as const,\n                patches: [set({...item, ...initial}, [itemKey])],\n              })),\n              catchError((error) =>\n                of({type: 'error' as const, error, item, schemaType: memberType})\n              )\n            ),\n            of({type: 'patch' as const, patches: [unset([itemKey, '_resolvingInitialValue'])]})\n          )\n        })\n      )\n    })\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path, SchemaType} from '@sanity/types'\nimport {map, tap} from 'rxjs/operators'\nimport {Subscription} from 'rxjs'\nimport {useToast} from '@sanity/ui'\nimport {ArrayOfObjectsFormNode, FieldMember} from '../../store'\nimport {\n  ArrayFieldProps,\n  ArrayInputInsertEvent,\n  ArrayInputMoveItemEvent,\n  ArrayOfObjectsInputProps,\n  ObjectItem,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n  UploadEvent,\n} from '../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../patch'\nimport {ensureKey} from '../../utils/ensureKey'\nimport {FileLike, UploadProgressEvent} from '../../studio/uploads/types'\nimport {createProtoArrayValue} from '../../inputs/arrays/ArrayOfObjectsInput/createProtoArrayValue'\nimport {useClient} from '../../../hooks'\nimport {resolveUploader as defaultResolveUploader} from '../../studio/uploads/resolveUploader'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport * as is from '../../utils/is'\nimport {useResolveInitialValueForType} from '../../../store'\nimport {resolveInitialArrayValues} from '../utils/resolveInitialArrayValues'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to renderInput and renderField for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfObjectsField(props: {\n  member: FieldMember<ArrayOfObjectsFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onPathOpen,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<Element & {focus: () => void}>()\n  const uploadSubscriptions = useRef<Record<string, Subscription>>({})\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  const toast = useToast()\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleExpandItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleOpenItem = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onSetPathCollapsed(path, false)\n    },\n    [onPathOpen, onSetPathCollapsed]\n  )\n\n  const handleCloseItem = useCallback(() => {\n    onPathOpen(member.field.path)\n    onSetPathCollapsed(member.field.path, true)\n  }, [onPathOpen, member.field.path, onSetPathCollapsed])\n\n  const handleInsert = useCallback(\n    (event: ArrayInputInsertEvent<ObjectItem>) => {\n      if (event.items.length === 0) {\n        throw new Error('Insert event should include at least one item')\n      }\n      const itemsWithKeys = event.items.map((item) => ensureKey(item))\n\n      handleChange(PatchEvent.from([insert(itemsWithKeys, event.position, [event.referenceItem])]))\n\n      const focusItemKey = itemsWithKeys[0]._key\n      const itemPath = [...member.field.path, {_key: focusItemKey}]\n      // Set focus at the first item (todo: verify that this is the expected/better behavior when adding multiple items)\n      onPathFocus(itemPath)\n\n      const shouldOpen = event.open !== false\n\n      if (event.skipInitialValue) {\n        if (shouldOpen) {\n          handleOpenItem(itemPath)\n        }\n      } else {\n        resolveInitialArrayValues(itemsWithKeys, member.field.schemaType, resolveInitialValue)\n          .pipe(\n            tap((result) => {\n              if (result.type === 'patch') {\n                handleChange(result.patches)\n              } else {\n                toast.push({\n                  title: `Could not resolve initial value`,\n                  description: `Unable to resolve initial value for type: ${result.schemaType.title}: ${result.error.message}.`,\n                  status: 'error',\n                })\n              }\n            })\n          )\n          .subscribe({\n            complete: () => {\n              if (shouldOpen) {\n                handleOpenItem(itemPath)\n              }\n            },\n          })\n      }\n    },\n    [\n      handleChange,\n      handleOpenItem,\n      member.field.path,\n      member.field.schemaType,\n      onPathFocus,\n      resolveInitialValue,\n      toast,\n    ]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: ArrayInputMoveItemEvent) => {\n      const value = member.field.value\n      const item = value?.[event.fromIndex] as any\n      const refItem = value?.[event.toIndex] as any\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      if (!(item as any)?._key || !(refItem as any)?._key) {\n        // eslint-disable-next-line no-console\n        console.error(\n          'Neither the item you are moving nor the item you are moving to have a key. Cannot continue.'\n        )\n\n        return\n      }\n\n      handleChange([\n        unset([{_key: item._key}]),\n        insert([item], event.fromIndex > event.toIndex ? 'before' : 'after', [\n          {_key: refItem._key},\n        ]),\n      ])\n    },\n    [handleChange, member.field.value]\n  )\n\n  const handlePrependItem = useCallback(\n    (item: any) => {\n      handleChange([setIfMissing([]), insert([ensureKey(item)], 'before', [0])])\n    },\n    [handleChange]\n  )\n  const handleAppendItem = useCallback(\n    (item: any) => {\n      handleChange([setIfMissing([]), insert([ensureKey(item)], 'after', [-1])])\n    },\n    [handleChange]\n  )\n\n  const handleRemoveItem = useCallback(\n    (itemKey: string) => {\n      if (uploadSubscriptions.current[itemKey]) {\n        uploadSubscriptions.current[itemKey].unsubscribe()\n        delete uploadSubscriptions.current[itemKey]\n      }\n      handleChange([unset(member.field.path.concat({_key: itemKey}))])\n    },\n    [handleChange, member.field.path]\n  )\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const formBuilder = useFormBuilder()\n\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n  const supportsFileUploads = formBuilder.__internal.file.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (is.type('image', type) && !supportsImageUploads) {\n        return null\n      }\n      if (is.type('file', type) && !supportsFileUploads) {\n        return null\n      }\n\n      return defaultResolveUploader(type, file)\n    },\n    [supportsFileUploads, supportsImageUploads]\n  )\n\n  const handleUpload = useCallback(\n    ({file, schemaType, uploader}: UploadEvent) => {\n      const item = createProtoArrayValue(schemaType)\n      const key = item._key\n\n      handleInsert({\n        items: [item],\n        position: 'after',\n        referenceItem: -1,\n      })\n\n      const events$ = uploader.upload(client, file, schemaType).pipe(\n        map((uploadProgressEvent: UploadProgressEvent) =>\n          PatchEvent.from(uploadProgressEvent.patches || []).prefixAll({_key: key})\n        ),\n        tap((event) => handleChange(event.patches))\n      )\n\n      uploadSubscriptions.current = {\n        ...uploadSubscriptions.current,\n        [key]: events$.subscribe(),\n      }\n    },\n    [client, handleChange, handleInsert]\n  )\n\n  const inputProps = useMemo((): Omit<ArrayOfObjectsInputProps, 'renderDefault'> => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      onItemExpand: handleExpandItem,\n      onItemCollapse: handleCollapseItem,\n      onItemClose: handleCloseItem,\n      onItemOpen: handleOpenItem,\n\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n\n      path: member.field.path,\n\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onItemMove: handleMoveItem,\n      onItemRemove: handleRemoveItem,\n      onItemAppend: handleAppendItem,\n      onItemPrepend: handlePrependItem,\n      onPathFocus: handleFocusChildPath,\n      resolveInitialValue,\n      onUpload: handleUpload,\n      resolveUploader: resolveUploader,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      renderInput,\n      renderField,\n      renderItem,\n      renderPreview,\n      elementProps,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    handleExpand,\n    handleCollapse,\n    handleExpandItem,\n    handleCollapseItem,\n    handleCloseItem,\n    handleOpenItem,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppendItem,\n    handlePrependItem,\n    handleFocusChildPath,\n    resolveInitialValue,\n    handleUpload,\n    resolveUploader,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): Omit<ArrayFieldProps, 'renderDefault'> => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps: inputProps as ArrayOfObjectsInputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.changed,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    handleCollapse,\n    handleExpand,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathOpen={onPathOpen}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {useCallback, useEffect, useMemo, useRef} from 'react'\nimport {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\nimport {FieldMember} from '../../store'\nimport {\n  PrimitiveFieldProps,\n  PrimitiveInputProps,\n  RenderFieldCallback,\n  RenderInputCallback,\n} from '../../types'\nimport {FormPatch, PatchEvent, set, unset} from '../../patch'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to renderInput and renderField for a primitive field/input\n * @param props - Component props\n *\n * @internal\n */\nexport function PrimitiveField(props: {\n  member: FieldMember\n  renderInput: RenderInputCallback<PrimitiveInputProps>\n  renderField: RenderFieldCallback<PrimitiveFieldProps>\n}) {\n  const {member, renderInput, renderField} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useEffect(() => {\n    if (member.field.focused) {\n      focusRef.current?.focus()\n    }\n  }, [member.field.focused])\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.field.path)\n  }, [member.field.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.field.path)\n  }, [member.field.path, onPathFocus])\n\n  const handleChange = useCallback(\n    (event: FormPatch | FormPatch[] | PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.name))\n    },\n    [member.name, member.field.schemaType, onChange]\n  )\n\n  const validationError =\n    useMemo(\n      () =>\n        member.field.validation\n          .filter((item) => item.level === 'error')\n          .map((item) => item.message)\n          .join('\\n'),\n      [member.field.validation]\n    ) || undefined\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.field.value || ''),\n      readOnly: Boolean(member.field.readOnly),\n      placeholder: member.field.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.field.id,\n      member.field.readOnly,\n      member.field.schemaType.placeholder,\n      member.field.value,\n    ]\n  )\n\n  const inputProps = useMemo((): Omit<PrimitiveInputProps, 'renderDefault'> => {\n    return {\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType as any,\n      changed: member.field.changed,\n      id: member.field.id,\n      path: member.field.path,\n      focused: member.field.focused,\n      level: member.field.level,\n      onChange: handleChange,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      validationError,\n      elementProps,\n    }\n  }, [\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focused,\n    member.field.level,\n    member.field.validation,\n    member.field.presence,\n    handleChange,\n    validationError,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): Omit<PrimitiveFieldProps, 'renderDefault'> => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value as any,\n      schemaType: member.field.schemaType as any,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      inputId: member.field.id,\n      path: member.field.path,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      children: renderedInput,\n      changed: member.field.changed,\n      inputProps: inputProps as any,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    member.field.changed,\n    renderedInput,\n    inputProps,\n  ])\n\n  return <>{renderField(fieldProps)}</>\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {FieldMember, ObjectFormNode} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectFieldProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {PatchArg, PatchEvent, setIfMissing} from '../../patch'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {createProtoValue} from '../../utils/createProtoValue'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to renderInput and renderField for an object input\n * Note: \"ObjectField\" in this context means an object field of an object type (not \"a field of an object\")\n * @param props - Component props\n */\nexport const ObjectField = function ObjectField(props: {\n  member: FieldMember<ObjectFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.field.path)\n  }, [member.field.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.field.path)\n  }, [member.field.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.field.schemaType)))\n          .prefixAll(member.name)\n      )\n    },\n    [onChange, member.field.schemaType, member.name]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.field.path.concat(fieldName))\n    },\n    [onPathOpen, member.field.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n\n  const handleClose = useCallback(() => {\n    onPathOpen(member.field.path.slice(0, -1))\n  }, [onPathOpen, member.field.path])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.field.path, groupName)\n    },\n    [onFieldGroupSelect, member.field.path]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const inputProps = useMemo((): Omit<ObjectInputProps, 'renderDefault'> => {\n    return {\n      elementProps,\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value,\n      readOnly: member.field.readOnly,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onFieldOpen: handleOpenField,\n      onFieldClose: handleCloseField,\n      onFieldCollapse: handleCollapseField,\n      onFieldExpand: handleExpandField,\n      onFieldSetExpand: handleExpandFieldSet,\n      onFieldSetCollapse: handleCollapseFieldSet,\n      onPathFocus: handleFocusChildPath,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      groups: member.field.groups,\n      onChange: handleChange,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n    }\n  }, [\n    elementProps,\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.groups,\n    handleSelectFieldGroup,\n    handleOpenField,\n    handleCloseField,\n    handleCollapseField,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleCollapseFieldSet,\n    handleFocusChildPath,\n    handleChange,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): Omit<ObjectFieldProps, 'renderDefault'> => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n\n      open: member.open,\n      changed: member.field.changed,\n\n      onOpen: handleOpen,\n      onClose: handleClose,\n\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      children: renderedInput,\n      inputProps: inputProps as ObjectInputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.changed,\n    member.field.level,\n    member.field.value,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    handleCollapse,\n    handleExpand,\n    handleOpen,\n    handleClose,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onPathOpen={onPathOpen}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import {Observable} from 'rxjs'\n\nexport function readAsText(file: File, encoding?: string) {\n  return new Observable<string | null>((observer) => {\n    const reader = new FileReader()\n    reader.onerror = (error) => observer.error(error)\n    reader.onload = () => {\n      observer.next(reader.result as string | null)\n      observer.complete()\n    }\n    reader.readAsText(file, encoding)\n    return () => {\n      reader.abort()\n    }\n  })\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {\n  ArraySchemaType,\n  BooleanSchemaType,\n  isBooleanSchemaType,\n  isNumberSchemaType,\n  isStringSchemaType,\n  NumberSchemaType,\n  SchemaType,\n  StringSchemaType,\n} from '@sanity/types'\nimport {filter, map, tap} from 'rxjs/operators'\nimport {Subscription} from 'rxjs'\nimport {FIXME} from '../../../FIXME'\nimport {ArrayOfPrimitivesFormNode, FieldMember} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesFieldProps,\n  ArrayOfPrimitivesInputProps,\n  ArrayInputMoveItemEvent,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n  UploadEvent,\n} from '../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {insert, PatchArg, PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {PrimitiveValue} from '../../inputs/arrays/ArrayOfPrimitivesInput/types'\nimport {Uploader, UploaderResolver, UploadProgressEvent} from '../../studio'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {readAsText} from '../../studio/uploads/file/readAsText'\nimport {accepts} from '../../studio/uploads/accepts'\n\nfunction move<T>(arr: T[], from: number, to: number): T[] {\n  const copy = arr.slice()\n  const val = copy[from]\n  copy.splice(from, 1)\n  copy.splice(to, 0, val)\n  return copy\n}\n\n/**\n * @example\n * Inserts \"hello\" at the beginning\n * ```ts\n * insertAfter(-1, [\"one\", \"two\"], \"hello\")\n * // => [\"hello\", \"one\", \"two\"]\n * ```\n */\nfunction insertAfter<T>(\n  /**\n   * index to insert item after. An index of -1 will prepend the item\n   */\n  index: number,\n  /**\n   * the array to insert the item into\n   */\n  arr: T[],\n  /**\n   * the item to insert\n   */\n  items: T[]\n): T[] {\n  const copy = arr.slice()\n  copy.splice(index + 1, 0, ...items)\n  return copy\n}\nfunction isStringNumeric(input: string) {\n  return /^\\d+$/.test(input)\n}\n\ntype PrimitiveSchemaType = NumberSchemaType | BooleanSchemaType | StringSchemaType\n\nfunction convertToSchemaType(line: string, candidates: SchemaType[]) {\n  let acceptsBooleans = false\n  let acceptsNumbers = false\n  let acceptsStrings = false\n  candidates.forEach((candidate) => {\n    if (isBooleanSchemaType(candidate)) {\n      acceptsBooleans = true\n    }\n    if (isStringSchemaType(candidate)) {\n      acceptsStrings = true\n    }\n    if (isNumberSchemaType(candidate)) {\n      acceptsNumbers = true\n    }\n  })\n\n  if (acceptsBooleans && (line === 'true' || line === 'false')) return line === 'true'\n  if (acceptsNumbers && isStringNumeric(line)) return Number(line)\n  return acceptsStrings ? line : undefined\n}\n\nfunction createPlainTextUploader(itemTypes: PrimitiveSchemaType[]): Uploader<PrimitiveSchemaType> {\n  return {\n    priority: 0,\n    accepts: 'text/*',\n    type: 'string',\n    upload(client, file) {\n      return readAsText(file, 'utf-8').pipe(\n        map((textContent) =>\n          textContent\n            ?.split(/[\\n\\r]/)\n            .map((value) => convertToSchemaType(value, itemTypes))\n            .filter((v) => v !== undefined)\n        ),\n        filter((v: unknown[] | undefined): v is unknown[] => Array.isArray(v)),\n        map((lines: unknown[]) => ({\n          type: 'uploadProgress',\n          patches: [insert(lines, 'after', [-1])],\n        }))\n      )\n    },\n  }\n}\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to renderInput and renderField for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfPrimitivesField(props: {\n  member: FieldMember<ArrayOfPrimitivesFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const focusRef = useRef<Element & {focus: () => void}>()\n  const uploadSubscriptions = useRef<Subscription>()\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleSetCollapsed = useCallback(\n    (collapsed: boolean) => {\n      onSetPathCollapsed(member.field.path, collapsed)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const setValue = useCallback(\n    (nextValue: PrimitiveValue[]) => {\n      handleChange(nextValue.length === 0 ? unset() : set(nextValue))\n    },\n    [handleChange]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: ArrayInputMoveItemEvent) => {\n      const {value = []} = member.field\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      setValue(move(value, event.fromIndex, event.toIndex))\n    },\n    [member.field, setValue]\n  )\n\n  const handleAppend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue(value.concat(itemValue))\n    },\n    [member.field, setValue]\n  )\n\n  const handlePrepend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue([itemValue].concat(value || []))\n    },\n    [member.field, setValue]\n  )\n\n  const handleInsert = useCallback(\n    (event: {items: PrimitiveValue[]; position: 'before' | 'after'; referenceIndex: number}) => {\n      const {value = []} = member.field\n\n      const insertIndex = event.referenceIndex + (event.position === 'before' ? -1 : 0)\n      setValue(insertAfter(insertIndex, value, event.items))\n    },\n    [member.field, setValue]\n  )\n\n  const handleRemoveItem = useCallback(\n    (index: number) => {\n      handleChange(unset(member.field.path.concat(index)))\n    },\n    [handleChange, member.field.path]\n  )\n\n  const handleFocusIndex = useCallback(\n    (index: number) => {\n      onPathFocus(member.field.path.concat([index]))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const plainTextUploader = useMemo(\n    () => createPlainTextUploader(member.field.schemaType.of as PrimitiveSchemaType[]),\n    [member.field.schemaType.of]\n  )\n\n  const resolveUploader: UploaderResolver<PrimitiveSchemaType> = useCallback(\n    (schemaType, file) => (accepts(file, 'text/*') ? plainTextUploader : null),\n    [plainTextUploader]\n  )\n\n  const handleUpload = useCallback(\n    ({file, schemaType, uploader}: UploadEvent) => {\n      const events$ = uploader.upload(client, file, schemaType).pipe(\n        map((uploadProgressEvent: UploadProgressEvent) =>\n          PatchEvent.from(uploadProgressEvent.patches || [])\n        ),\n        tap((event) => handleChange(event.patches))\n      )\n\n      if (uploadSubscriptions.current) {\n        uploadSubscriptions.current.unsubscribe()\n      }\n      uploadSubscriptions.current = events$.subscribe()\n    },\n    [client, handleChange]\n  )\n\n  const inputProps = useMemo((): Omit<ArrayOfPrimitivesInputProps, 'renderDefault'> => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      onSetCollapsed: handleSetCollapsed,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      elementProps,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onMoveItem: handleMoveItem,\n      onItemRemove: handleRemoveItem,\n      onItemAppend: handleAppend,\n      onItemPrepend: handlePrepend,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      resolveUploader,\n      onUpload: handleUpload,\n      renderInput,\n      renderItem,\n      onIndexFocus: handleFocusIndex,\n      renderPreview,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.validation,\n    member.field.presence,\n    handleSetCollapsed,\n    elementProps,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppend,\n    handlePrepend,\n    resolveUploader,\n    handleUpload,\n    renderInput,\n    renderItem,\n    handleFocusIndex,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps: Omit<ArrayOfPrimitivesFieldProps, 'renderDefault'> = useMemo(() => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onExpand: handleExpand,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps: inputProps as ArrayOfPrimitivesInputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    member.field.changed,\n    handleExpand,\n    handleCollapse,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps as FIXME), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import {isArraySchemaType, isObjectSchemaType, isPrimitiveSchemaType} from '@sanity/types'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfPrimitivesFormNode,\n  FieldMember,\n  ObjectFormNode,\n} from '../../store'\n\nexport function isMemberObject(member: FieldMember): member is FieldMember<ObjectFormNode> {\n  return isObjectSchemaType(member.field.schemaType)\n}\n\nexport function isMemberArrayOfPrimitives(\n  member: FieldMember\n): member is FieldMember<ArrayOfPrimitivesFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isPrimitiveSchemaType(ofType))\n  )\n}\n\nexport function isMemberArrayOfObjects(\n  member: FieldMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isObjectSchemaType(ofType))\n  )\n}\n","import React, {memo} from 'react'\nimport {FIXME} from '../../FIXME'\nimport {FieldMember} from '../store'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderArrayOfObjectsItemCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {ArrayOfObjectsField} from './fields/ArrayOfObjectsField'\nimport {PrimitiveField} from './fields/PrimitiveField'\nimport {ObjectField} from './fields/ObjectField'\nimport {ArrayOfPrimitivesField} from './fields/ArrayOfPrimitivesField'\nimport {isMemberArrayOfObjects, isMemberArrayOfPrimitives, isMemberObject} from './fields/asserters'\n\n/** @internal */\nexport interface MemberFieldProps {\n  member: FieldMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/** @internal */\nexport const MemberField = memo(function MemberField(props: MemberFieldProps) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  if (isMemberObject(member)) {\n    // this field is of an object type\n    return (\n      <ObjectField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfPrimitives(member)) {\n    return (\n      <ArrayOfPrimitivesField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        // todo: these have different signatures, so renderItem for a primitive input should not be the same as renderItem in array of object inputs\n        renderItem={renderItem as FIXME}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfObjects(member)) {\n    return (\n      <ArrayOfObjectsField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  return <PrimitiveField member={member} renderField={renderField} renderInput={renderInput} />\n})\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\nimport styled from 'styled-components'\n\ninterface AlertProps extends Omit<ComponentProps<typeof Card>, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error'\n  suffix?: React.ReactNode\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n} as const\n\nconst SuffixBox = styled(Box)`\n  border-top: 1px solid var(--card-border-color);\n`\n\nexport function Alert(props: AlertProps) {\n  const {children, status = 'warning', suffix, title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={4}>\n        <Box>\n          <Text size={1}>\n            {status === 'warning' && <WarningOutlineIcon />}\n            {status === 'error' && <ErrorOutlineIcon />}\n          </Text>\n        </Box>\n\n        <Box flex={1} marginLeft={3}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n\n          {children && <Box marginTop={3}>{children}</Box>}\n        </Box>\n      </Flex>\n\n      {suffix && <SuffixBox>{suffix}</SuffixBox>}\n    </Card>\n  )\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Box, Flex, Inline, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport styled from 'styled-components'\n\ninterface DetailsProps {\n  children?: React.ReactNode\n  margin?: number | number[]\n  marginX?: number | number[]\n  marginY?: number | number[]\n  marginTop?: number | number[]\n  marginRight?: number | number[]\n  marginBottom?: number | number[]\n  marginLeft?: number | number[]\n  open?: boolean\n  icon?: React.ReactNode\n  title?: React.ReactNode\n}\n\nconst HeaderButton = styled.button`\n  display: block;\n  -webkit-font-smoothing: inherit;\n  appearance: none;\n  font: inherit;\n  background: none;\n  width: 100%;\n  text-align: left;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n`\n\nconst ToggleArrow = styled(ToggleArrowRightIcon)<{open: boolean}>`\n  transform: ${(props) => (props.open ? 'rotate(90deg)' : '')};\n`\n\nconst Header = styled(Flex)`\n  cursor: default;\n`\n\nconst IconBox = styled(Box)`\n  & > div > svg {\n    transform: rotate(0);\n    transition: transform 100ms;\n  }\n\n  &[data-open] > div > svg {\n    transform: rotate(90deg);\n  }\n`\n\nexport function Details(props: DetailsProps) {\n  const {children, open: openProp, icon, title = 'Details', ...restProps} = props\n  const [open, setOpen] = useState(openProp || false)\n\n  const handleToggle = useCallback(() => setOpen((v) => !v), [])\n\n  useEffect(() => setOpen(openProp || false), [openProp])\n\n  return (\n    <Box {...restProps}>\n      <HeaderButton type=\"button\" onClick={handleToggle}>\n        <Header align=\"center\">\n          <Inline>\n            <IconBox data-open={open ? '' : undefined}>\n              <Text size={1}>\n                <ToggleArrow open={open} />\n              </Text>\n            </IconBox>\n            {icon && <Box marginLeft={1}>{icon}</Box>}\n            <Box flex={1} marginLeft={1}>\n              <Text size={1} weight=\"medium\">\n                {title}\n              </Text>\n            </Box>\n          </Inline>\n        </Header>\n      </HeaderButton>\n\n      <Box hidden={!open} marginTop={3}>\n        {children}\n      </Box>\n    </Box>\n  )\n}\n","import isValidDate from 'date-fns/isValid'\n\nconst TRUTHY_STRINGS = ['yes', 'true', '1']\nconst FALSEY_STRINGS = ['false', 'no', 'false', '0', 'null']\nconst BOOL_STRINGS = TRUTHY_STRINGS.concat(FALSEY_STRINGS)\n\nconst TRUE = (): true => true\n\nconst has = (prop: string) => (val?: Record<string, any>) => val && val[prop]\nconst is = (typeName: string) => (val?: Record<string, any>) => (val && val._type) === typeName\n\nfunction toLocalDate(input: Date) {\n  const newDate = new Date(input.getTime() + input.getTimezoneOffset() * 60 * 1000)\n  const offset = input.getTimezoneOffset() / 60\n  const hours = input.getHours()\n  newDate.setHours(hours - offset)\n  return newDate\n}\n\nfunction getTZName() {\n  try {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone\n  } catch (e) {} // eslint-disable-line no-empty\n  return null\n}\n\nexport interface ValueConverter {\n  test: NumberConstructor | ((value: any) => boolean)\n  convert:\n    | NumberConstructor\n    | StringConstructor\n    | ((value: any) => boolean | Record<string, any> | string)\n}\n\nexport const converters: {[fromType: string]: {[toType: string]: ValueConverter}} = {\n  string: {\n    number: {\n      test: Number,\n      convert: Number,\n    },\n    boolean: {\n      test: (value: any) => BOOL_STRINGS.includes(value.toLowerCase()),\n      convert: (value: any) =>\n        TRUTHY_STRINGS.includes(value.toLowerCase()) ||\n        !FALSEY_STRINGS.includes(value.toLowerCase()),\n    },\n    richDate: {\n      test: (value: any) => isValidDate(value),\n      convert: (value: any): Record<string, any> => {\n        return {\n          _type: 'richDate',\n          local: toLocalDate(new Date(value)).toJSON(),\n          utc: new Date(value).toJSON(),\n          timezone: getTZName(),\n          offset: new Date().getTimezoneOffset(),\n        }\n      },\n    },\n  },\n  date: {\n    richDate: {\n      test: is('date'),\n      convert: (value: any) => Object.assign({}, value, {_type: 'richDate'}),\n    },\n  },\n  richDate: {\n    datetime: {\n      test: has('utc'),\n      convert: (value: any) => value.utc,\n    },\n  },\n  number: {\n    string: {\n      test: TRUE,\n      convert: String,\n    },\n    boolean: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n  boolean: {\n    string: {\n      test: TRUE,\n      convert: (value: any) => (value ? 'Yes' : 'No'),\n    },\n    number: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport {PatchEvent, setIfMissing, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {useSchema} from '../../../hooks'\nimport {isDev} from '../../../environment'\n\ninterface UntypedValueInputProps {\n  validTypes: string[]\n  value: Record<string, unknown>\n  onChange: (event: PatchEvent, value?: Record<string, unknown>) => void\n}\n\nfunction SetMissingTypeButton({\n  value,\n  targetType,\n  onChange,\n}: {\n  value: Record<string, unknown>\n  targetType: string\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  const itemValue = useMemo(() => ({...value, _type: targetType}), [targetType, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(setIfMissing(targetType, ['_type'])), itemValue),\n    [itemValue, onChange, targetType]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{targetType}</code>\n        </>\n      }\n    />\n  )\n}\n\nfunction UnsetItemButton({\n  value,\n  onChange,\n  validTypes,\n}: {\n  value: Record<string, unknown>\n  validTypes: string[]\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  // Doesn't matter which `_type` we use as long as it's allowed by the array\n  const itemValue = useMemo(() => ({...value, _type: validTypes[0]}), [validTypes, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(unset()), itemValue),\n    [itemValue, onChange]\n  )\n\n  return <Button onClick={handleClick} tone=\"critical\" text=\"Unset value\" />\n}\n\n/**\n * When the value does not have an `_type` property,\n * but the schema has a named type\n */\nexport function UntypedValueInput({validTypes, value, onChange}: UntypedValueInputProps) {\n  const schema = useSchema()\n  const isSingleValidType = validTypes.length === 1\n  const isHoistedType = schema.has(validTypes[0])\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          Property value missing <code>_type</code>\n        </>\n      }\n    >\n      <Details open={isDev} title={<>Developer info</>}>\n        <Stack space={3}>\n          <Text as=\"p\" muted size={1}>\n            Encountered an object value without a <code>_type</code> property.\n          </Text>\n\n          {isSingleValidType && !isHoistedType && (\n            <Text as=\"p\" muted size={1}>\n              Either remove the <code>name</code> property of the object declaration, or set{' '}\n              <code>_type</code> property on items.\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Text as=\"p\" muted size={1}>\n              The following types are valid here according to schema:\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Stack as=\"ul\" space={2}>\n              {validTypes.map((validType) => (\n                <Text as=\"li\" key={validType} muted size={1}>\n                  <code>{validType}</code>\n                </Text>\n              ))}\n            </Stack>\n          )}\n\n          <Stack space={2}>\n            <Text as=\"h4\" weight=\"semibold\" size={1}>\n              Current value (<code>object</code>):\n            </Text>\n\n            <Card border overflow=\"auto\" padding={2} radius={2} tone=\"inherit\">\n              <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n            </Card>\n          </Stack>\n\n          <Grid columns={[1, 2, 2]} gap={1}>\n            {isSingleValidType && (\n              <SetMissingTypeButton onChange={onChange} targetType={validTypes[0]} value={value} />\n            )}\n\n            <UnsetItemButton onChange={onChange} validTypes={validTypes} value={value} />\n          </Grid>\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n","import {Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useImperativeHandle, useMemo} from 'react'\nimport {PatchEvent, set, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {isDev} from '../../../environment'\nimport {converters as CONVERTERS, ValueConverter} from './converters'\nimport {UntypedValueInput} from './UntypedValueInput'\n\ninterface Converter extends ValueConverter {\n  from: string\n  to: string\n}\n\nfunction getConverters(value: unknown, actualType: string, validTypes: string[]): Converter[] {\n  if (!(actualType in CONVERTERS)) {\n    return []\n  }\n\n  return Object.keys(CONVERTERS[actualType])\n    .filter((targetType) => validTypes.includes(targetType))\n    .map((targetType) => ({\n      from: actualType,\n      to: targetType,\n      ...CONVERTERS[actualType][targetType],\n    }))\n    .filter((converter) => converter.test(value))\n}\n\ninterface InvalidValueProps {\n  actualType: string\n  validTypes: string[]\n  value?: unknown\n  onChange: (event: PatchEvent) => void\n}\n\nexport const InvalidValueInput = forwardRef(\n  (props: InvalidValueProps, ref: React.Ref<{focus: () => void}>) => {\n    const {value, actualType, validTypes, onChange} = props\n\n    useImperativeHandle(ref, () => ({\n      // @todo\n      focus: () => undefined,\n    }))\n\n    const handleClearClick = useCallback(() => {\n      onChange(PatchEvent.from(unset()))\n    }, [onChange])\n\n    const handleConvertTo = useCallback(\n      (converted: any) => {\n        onChange(PatchEvent.from(set(converted)))\n      },\n      [onChange]\n    )\n\n    const converters = useMemo(\n      () => getConverters(value, actualType, validTypes),\n      [value, actualType, validTypes]\n    )\n\n    if (typeof value === 'object' && value !== null && !('_type' in value)) {\n      return (\n        <UntypedValueInput\n          value={value as Record<string, unknown>}\n          validTypes={validTypes}\n          onChange={onChange}\n        />\n      )\n    }\n\n    const suffix = (\n      <Stack padding={2}>\n        <Button onClick={handleClearClick} tone=\"critical\" text=\"Reset value\" />\n      </Stack>\n    )\n\n    return (\n      <Alert status=\"error\" suffix={suffix} title={<>Invalid property value</>}>\n        <Text as=\"p\" muted size={1}>\n          The property value is stored as a value type that does not match the expected type.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                The value of this property must be of type <code>{validTypes[0]}</code> according to\n                the schema.\n              </Text>\n            )}\n\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                Mismatching value types typically occur when the schema has recently been changed.\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Text as=\"p\" muted size={1}>\n                Only the following types are valid here according to schema:\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Stack as=\"ul\" space={2}>\n                {validTypes.map((validType) => (\n                  <Text as=\"li\" key={validType}>\n                    <code>{validType}</code>\n                  </Text>\n                ))}\n              </Stack>\n            )}\n\n            <Stack marginTop={2} space={2}>\n              <Text size={1} weight=\"semibold\">\n                The current value (<code>{actualType}</code>)\n              </Text>\n\n              <Card border padding={2} radius={2} tone=\"inherit\">\n                <Code language=\"json\" size={1}>\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n\n            {converters.length > 0 && (\n              <Stack space={1}>\n                {converters.map((converter) => (\n                  <ConvertButton\n                    converter={converter}\n                    key={`${converter.from}-${converter.to}`}\n                    onConvert={handleConvertTo}\n                    value={value}\n                  />\n                ))}\n              </Stack>\n            )}\n          </Stack>\n        </Details>\n      </Alert>\n    )\n  }\n)\n\nInvalidValueInput.displayName = 'InvalidValueInput'\n\nfunction ConvertButton({\n  converter,\n  onConvert,\n  value,\n}: {\n  converter: Converter\n  onConvert: (v: string | number | boolean | Record<string, unknown>) => void\n  value: unknown\n}) {\n  const handleClick = useCallback(\n    () => onConvert(converter.convert(value)),\n    [converter, onConvert, value]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{converter.to}</code>\n        </>\n      }\n    />\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {hues} from '@sanity/color'\nimport {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {FormNodeValidation} from '@sanity/types'\nimport {Box, Flex, Placement, Stack, Text, Tooltip} from '@sanity/ui'\nimport React, {useMemo} from 'react'\n\n/** @internal */\nexport interface FormFieldValidationStatusProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  /**\n   * @beta\n   */\n  __unstable_showSummary?: boolean\n  fontSize?: number | number\n  placement?: Placement\n  portal?: boolean\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst VALIDATION_COLORS: Record<'error' | 'warning' | 'info', string> = {\n  error: hues.red[500].hex,\n  warning: hues.yellow[500].hex,\n  info: hues.blue[500].hex,\n}\n\nconst VALIDATION_ICONS: Record<'error' | 'warning' | 'info', React.ReactElement> = {\n  error: <ErrorOutlineIcon data-testid=\"input-validation-icon-error\" />,\n  warning: <WarningOutlineIcon data-testid=\"input-validation-icon-warning\" />,\n  info: <InfoOutlineIcon data-testid=\"input-validation-icon-info\" />,\n}\n\n/** @internal */\nexport function FormFieldValidationStatus(props: FormFieldValidationStatusProps) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_showSummary: showSummary,\n    fontSize,\n    placement = 'top',\n    portal,\n  } = props\n\n  const errors = validation.filter((v) => v.level === 'error')\n  const warnings = validation.filter((v) => v.level === 'warning')\n  const info = validation.filter((v) => v.level === 'info')\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  const statusIcon = useMemo(() => {\n    if (hasErrors) return VALIDATION_ICONS.error\n    if (hasWarnings) return VALIDATION_ICONS.warning\n    if (hasInfo) return VALIDATION_ICONS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  const statusColor = useMemo(() => {\n    if (hasErrors) return VALIDATION_COLORS.error\n    if (hasWarnings) return VALIDATION_COLORS.warning\n    if (hasInfo) return VALIDATION_COLORS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  return (\n    <Tooltip\n      content={\n        <Stack padding={3} space={3}>\n          {showSummary && <FormFieldValidationSummary validation={validation} />}\n\n          {!showSummary && (\n            <>\n              {validation.map((item, itemIndex) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <FormFieldValidationStatusItem validation={item} key={itemIndex} />\n              ))}\n            </>\n          )}\n        </Stack>\n      }\n      portal={portal}\n      placement={placement}\n      fallbackPlacements={['bottom', 'right', 'left']}\n    >\n      <div>\n        <Text muted size={fontSize} weight=\"semibold\" style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </div>\n    </Tooltip>\n  )\n}\n\nfunction FormFieldValidationStatusItem(props: {validation: FormNodeValidation}) {\n  const {validation} = props\n\n  const statusIcon = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_ICONS.error\n    if (validation.level === 'warning') return VALIDATION_ICONS.warning\n    if (validation.level === 'info') return VALIDATION_ICONS.info\n    return undefined\n  }, [validation])\n\n  const statusColor = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_COLORS.error\n    if (validation.level === 'warning') return VALIDATION_COLORS.warning\n    if (validation.level === 'info') return VALIDATION_COLORS.info\n    return undefined\n  }, [validation])\n\n  return (\n    <Flex>\n      <Box marginRight={2}>\n        <Text size={1} style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </Box>\n      <Box flex={1}>\n        <Text muted size={1}>\n          {validation.message}\n        </Text>\n      </Box>\n    </Flex>\n  )\n}\n\nfunction FormFieldValidationSummary({validation}: {validation: FormNodeValidation[]}) {\n  const errorMarkers = validation.filter((item) => item.level === 'error')\n  const warningMarkers = validation.filter((item) => item.level === 'warning')\n  const errorLen = errorMarkers.length\n  const warningLen = warningMarkers.length\n\n  const errorsStr = `error${errorLen === 1 ? '' : 's'}`\n  const warningsStr = `warning${warningLen === 1 ? '' : 's'}`\n  const errorText = errorLen && `${errorLen} ${errorsStr}`\n  const warningText = warningLen && `${warningLen} ${warningsStr}`\n\n  const hasErrors = errorLen > 0\n  const hasWarnings = warningLen > 0\n  const hasBoth = hasErrors && hasWarnings\n\n  return (\n    <Text muted size={1}>\n      {errorText || ''}\n      {hasBoth && <> and </>}\n      {warningText || ''}\n    </Text>\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {FormNodeValidation} from '@sanity/types'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\n\n/** @internal */\nexport interface FormFieldHeaderTextProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nconst EMPTY_ARRAY: never[] = []\n\n/** @internal */\nexport const FormFieldHeaderText = memo(function FormFieldHeaderText(\n  props: FormFieldHeaderTextProps\n) {\n  const {description, inputId, title, validation = EMPTY_ARRAY} = props\n  const hasValidations = validation.length > 0\n\n  return (\n    <Stack space={2}>\n      <Flex>\n        <Text as=\"label\" htmlFor={inputId} weight=\"semibold\" size={1}>\n          {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {hasValidations && (\n          <Box marginLeft={2}>\n            <FormFieldValidationStatus fontSize={1} validation={validation} />\n          </Box>\n        )}\n      </Flex>\n\n      {description && (\n        <Text muted size={1}>\n          {description}\n        </Text>\n      )}\n    </Stack>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport React, {memo} from 'react'\nimport {Box, Flex} from '@sanity/ui'\nimport {FormNodeValidation} from '@sanity/types'\nimport {FieldPresence, FormNodePresence} from '../../../presence'\nimport {FormFieldHeaderText} from './FormFieldHeaderText'\n\nexport interface FormFieldHeaderProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  /**\n   * @beta\n   */\n  __unstable_presence?: FormNodePresence[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nexport const FormFieldHeader = memo(function FormFieldHeader(props: FormFieldHeaderProps) {\n  const {validation, __unstable_presence: presence, description, inputId, title} = props\n\n  return (\n    <Flex align=\"flex-end\">\n      <Box flex={1} paddingY={2}>\n        <FormFieldHeaderText\n          validation={validation}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      </Box>\n\n      {presence && presence.length > 0 && (\n        <Box>\n          <FieldPresence maxAvatars={4} presence={presence} />\n        </Box>\n      )}\n    </Flex>\n  )\n})\n","import {FormNodeValidation} from '@sanity/types'\nimport {Stack} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {FormNodePresence} from '../../../presence'\nimport {FormFieldHeader} from './FormFieldHeader'\n\n/** @internal */\nexport interface FormFieldProps {\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n  /**\n   * @beta\n   */\n  __unstable_presence?: FormNodePresence[]\n  children: React.ReactNode\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  /**\n   * The nesting level of the form field\n   */\n  level?: number\n  title?: React.ReactNode\n}\n\n/** @internal */\nexport const FormField = memo(function FormField(\n  props: FormFieldProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>\n) {\n  const {\n    validation,\n    __unstable_presence: presence,\n    children,\n    description,\n    inputId,\n    level,\n    title,\n    ...restProps\n  } = props\n  return (\n    <Stack {...restProps} data-level={level} space={1}>\n      {/*\n        NOTE: Its not ideal to hide validation, presence and description when there's no `title`.\n        So we might want to separate the concerns of input vs formfield components later on.\n      */}\n      {title && (\n        <FormFieldHeader\n          validation={validation}\n          __unstable_presence={presence}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      )}\n\n      <div>{children}</div>\n    </Stack>\n  )\n})\n","function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Box, Flex, rem, Text, Theme} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {ToggleArrowRightIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from './styles'\n\nexport interface FormFieldSetLegendProps {\n  collapsed: boolean\n  collapsible?: boolean\n  onClick?: () => void\n  title: React.ReactNode\n}\n\nconst Root = styled.legend`\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  padding: 0;\n  display: table;\n`\n\nconst ToggleButton = styled(Flex).attrs({forwardedAs: 'button'})((props: {theme: Theme}) => {\n  const {theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    appearance: none;\n    border: 0;\n    background: none;\n    color: inherit;\n    -webkit-font-smoothing: inherit;\n    font: inherit;\n    outline: none;\n    border-radius: ${rem(radius[1])};\n\n    &:not([hidden]) {\n      display: flex;\n    }\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst ToggleIconBox = styled(Box)`\n  width: 9px;\n  height: 9px;\n  margin-right: 3px;\n\n  & svg {\n    transition: transform 100ms;\n  }\n`\n\nexport const FormFieldSetLegend = memo(function FormFieldSetLegend(props: FormFieldSetLegendProps) {\n  const {collapsed, collapsible, onClick, title} = props\n\n  const text = (\n    <Text weight=\"semibold\" size={1}>\n      {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n    </Text>\n  )\n\n  if (!collapsible) {\n    return <Root>{text}</Root>\n  }\n\n  return (\n    <Root>\n      <ToggleButton type=\"button\" onClick={onClick}>\n        <ToggleIconBox>\n          <Text muted size={1}>\n            <ToggleArrowRightIcon\n              style={{\n                transform: `rotate(${collapsed ? '0' : '90deg'}) translate3d(0, 0, 0)`,\n              }}\n            />\n          </Text>\n        </ToggleIconBox>\n\n        {text}\n      </ToggleButton>\n    </Root>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {Box, Flex, Grid, rem, Stack, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useMemo} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FormNodeValidation} from '@sanity/types'\nimport {FieldPresence, FormNodePresence} from '../../../presence'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\nimport {FormFieldSetLegend} from './FormFieldSetLegend'\nimport {focusRingStyle} from './styles'\n\n/** @internal */\nexport interface FormFieldSetProps {\n  /**\n   * @beta\n   */\n  __unstable_presence?: FormNodePresence[]\n  children: React.ReactNode | (() => React.ReactNode)\n  collapsed?: boolean\n  collapsible?: boolean\n  columns?: number | number[]\n  description?: React.ReactNode\n  /**\n   * The nesting level of the form field set\n   */\n  level?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n  title?: React.ReactNode\n  /**\n   * @beta\n   */\n  validation?: FormNodeValidation[]\n}\n\nfunction getChildren(children: React.ReactNode | (() => React.ReactNode)): React.ReactNode {\n  return typeof children === 'function' ? children() : children\n}\n\nconst Root = styled(Box).attrs({forwardedAs: 'fieldset'})`\n  border: none;\n\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  body:not(:-moz-handler-blocked) & {\n    display: table-cell;\n  }\n`\n\nconst Content = styled(Box)<{\n  /*\n   * @note: The dollar sign ($) prefix is a `styled-components` convention for\n   * denoting transient props. See:\n   * https://styled-components.com/docs/api#transient-props\n   */\n  $borderLeft: boolean\n  theme: Theme\n}>((props) => {\n  const {$borderLeft, theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    outline: none;\n    border-left: ${$borderLeft ? '1px solid var(--card-border-color)' : undefined};\n    border-radius: ${rem(radius[1])};\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing: {...focusRing, offset: 2}})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst EMPTY_ARRAY: never[] = []\n\n/** @internal */\nexport const FormFieldSet = forwardRef(function FormFieldSet(\n  props: FormFieldSetProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_presence: presence = EMPTY_ARRAY,\n    children,\n    collapsible,\n    columns,\n    description,\n    level = 0,\n    onFocus,\n    onCollapse,\n    onExpand,\n    collapsed,\n    tabIndex,\n    title,\n    ...restProps\n  } = props\n\n  const hasValidationMarkers = validation.length > 0\n  const forwardedRef = useForwardedRef(ref)\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent<HTMLDivElement>) => {\n      const element = forwardedRef.current\n\n      if (element === event.target) {\n        if (onFocus) onFocus(event)\n      }\n    },\n    [forwardedRef, onFocus]\n  )\n\n  const handleToggle = useCallback(\n    () => (collapsed ? onExpand?.() : onCollapse?.()),\n    [collapsed, onCollapse, onExpand]\n  )\n\n  const content = useMemo(() => {\n    if (collapsed) {\n      return null\n    }\n    return (\n      <Grid columns={columns} gapX={4} gapY={5}>\n        {getChildren(children)}\n      </Grid>\n    )\n  }, [children, collapsed, columns])\n\n  return (\n    <Root data-level={level} {...restProps}>\n      {title && (\n        <Flex align=\"flex-end\">\n          <Box flex={1} paddingY={2}>\n            <Stack space={2}>\n              <Flex>\n                <FormFieldSetLegend\n                  collapsed={Boolean(collapsed)}\n                  collapsible={collapsible}\n                  onClick={collapsible ? handleToggle : undefined}\n                  title={title}\n                />\n\n                {hasValidationMarkers && (\n                  <Box marginLeft={2}>\n                    <FormFieldValidationStatus fontSize={1} validation={validation} />\n                  </Box>\n                )}\n              </Flex>\n\n              {description && (\n                <Text muted size={1}>\n                  {description}\n                </Text>\n              )}\n            </Stack>\n          </Box>\n\n          {presence.length > 0 && (\n            <Box>\n              <FieldPresence maxAvatars={4} presence={presence} />\n            </Box>\n          )}\n        </Flex>\n      )}\n\n      <Content\n        $borderLeft={level > 0}\n        hidden={collapsed}\n        marginTop={1}\n        paddingLeft={level === 0 ? 0 : 3}\n        onFocus={typeof tabIndex === 'number' && tabIndex > -1 ? handleFocus : undefined}\n        ref={forwardedRef}\n        tabIndex={tabIndex}\n      >\n        {!collapsed && content}\n      </Content>\n    </Root>\n  )\n})\n","import React from 'react'\nimport styled from 'styled-components'\n\n/** @internal */\nexport interface FieldStatusProps {\n  children?: React.ReactNode\n  maxAvatars?: number\n  position?: 'top' | 'bottom'\n}\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  box-sizing: border-box;\n  min-height: var(--avatar-height);\n  width: 77px;\n  margin-left: var(--small-padding);\n\n  &[data-max-avatars='1'] {\n    max-width: 23px;\n  }\n\n  &[data-position='top'] {\n    align-self: flex-start;\n  }\n\n  &[data-position='bottom'] {\n    align-self: flex-end;\n  }\n`\n\n/** @internal */\nexport function FormFieldStatus({children, maxAvatars, position = 'bottom'}: FieldStatusProps) {\n  return (\n    <Root data-max-avatars={maxAvatars} data-position={position}>\n      {children}\n    </Root>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {randomKey} from '@sanity/util/content'\nimport {MissingKeysError} from '../../../store/types/memberErrors'\nimport {Details} from '../../../components/Details'\nimport {Alert} from '../../../components/Alert'\nimport {PatchEvent, setIfMissing} from '../../../patch'\nimport {FormField} from '../../../components/formField'\nimport {isDev} from '../../../../environment'\n\ninterface Props {\n  error: MissingKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function MissingKeysAlert(props: Props) {\n  const {error, onChange} = props\n  const handleFixMissingKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from((error.value || []).map((val, i) => setIfMissing(randomKey(), [i, '_key'])))\n    )\n  }, [error.value, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixMissingKeys} text=\"Add missing keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Missing keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Some items in the list are missing their keys. This must be fixed in order to edit the\n          list.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property has not been included.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n        </Details>\n        {/* TODO: render array items and highlight the items with missing key */}\n      </Alert>\n    </FormField>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {FormField} from '../../../components/formField'\nimport {Alert} from '../../../components/Alert'\nimport {DuplicateKeysError} from '../../../store/types/memberErrors'\nimport {PatchEvent, set} from '../../../patch'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\n\ninterface Props {\n  error: DuplicateKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function DuplicateKeysAlert(props: Props) {\n  const {error, onChange} = props\n\n  const handleFixDuplicateKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from(\n        (error.duplicates || []).map(([index, key]) =>\n          set(`${key}_deduped_${index}`, [index, '_key'])\n        )\n      )\n    )\n  }, [error.duplicates, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixDuplicateKeys} text=\"Generate unique keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Non-unique keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Several items in this list share the same identifier (key). Every item must have an unique\n          identifier.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property of each elements has been generated non-uniquely.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n          {/* TODO: render array items and highlight the items with duplicate keys (sc-26255) */}\n        </Details>\n      </Alert>\n    </FormField>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {isPlainObject} from 'lodash'\nimport {Alert} from '../../../components/Alert'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\nimport {PatchEvent, unset} from '../../../patch'\nimport {FormField} from '../../../components/formField'\nimport {MixedArrayError} from '../../../store'\n\ninterface Props {\n  error: MixedArrayError\n  onChange: (patchEvent: PatchEvent) => void\n}\nexport function MixedArrayAlert(props: Props) {\n  const {error, onChange} = props\n\n  const handleRemoveNonObjectValues = () => {\n    const nonObjectIndices = (error.value || [])\n      .flatMap((item, index) => (isPlainObject(item) ? [] : [index]))\n      .reverse()\n\n    const patches = nonObjectIndices.map((index) => unset([index]))\n\n    onChange(PatchEvent.from(patches))\n  }\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"error\"\n        suffix={\n          <Stack padding={2}>\n            <Button\n              onClick={handleRemoveNonObjectValues}\n              text=\"Remove non-object values\"\n              tone=\"critical\"\n            />\n          </Stack>\n        }\n        title={<>Invalid list values</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Some items in this list are not objects. This must be fixed in order to edit the list.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, or when a custom\n              input component has added invalid data to the list.\n            </Text>\n          </Stack>\n          {/* TODO: render array items and highlight the wrong items (sc-26255) */}\n        </Details>\n      </Alert>\n    </FormField>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box} from '@sanity/ui'\nimport {FieldError} from '../store/types/memberErrors'\nimport {useFormCallbacks} from '../studio/contexts/FormCallbacks'\nimport {PatchEvent} from '../patch'\nimport {InvalidValueInput} from '../inputs/InvalidValueInput'\nimport {MissingKeysAlert} from '../inputs/arrays/errors/MissingKeysAlert'\nimport {DuplicateKeysAlert} from '../inputs/arrays/errors/DuplicateKeysAlert'\nimport {MixedArrayAlert} from '../inputs/arrays/errors/MixedArrayAlert'\n\n/** @internal */\nexport function MemberFieldError(props: {member: FieldError}) {\n  const {member} = props\n  const {onChange} = useFormCallbacks()\n\n  const handleChange = useCallback(\n    (event: PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.fieldName))\n    },\n    [onChange, member.fieldName]\n  )\n  if (member.error.type === 'INCOMPATIBLE_TYPE') {\n    return (\n      <InvalidValueInput\n        value={member.error.value}\n        onChange={handleChange}\n        actualType={member.error.resolvedValueType}\n        validTypes={[member.error.expectedSchemaType.name]}\n      />\n    )\n  }\n  if (member.error.type === 'MISSING_KEYS') {\n    return <MissingKeysAlert error={member.error} onChange={handleChange} />\n  }\n  if (member.error.type === 'DUPLICATE_KEYS') {\n    return <DuplicateKeysAlert error={member.error} onChange={handleChange} />\n  }\n  if (member.error.type === 'MIXED_ARRAY') {\n    return <MixedArrayAlert onChange={handleChange} error={member.error} />\n  }\n  return <Box>Unexpected error: {props.member.error.type}</Box>\n}\n","import React, {memo, useCallback} from 'react'\nimport {FieldSetMember} from '../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {FormFieldSet} from '../components/formField'\nimport {useFormCallbacks} from '../studio/contexts/FormCallbacks'\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\n\n/** @internal */\nexport const MemberFieldSet = memo(function MemberFieldSet(props: {\n  member: FieldSetMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const {onSetFieldSetCollapsed} = useFormCallbacks()\n\n  const handleCollapse = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, true)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  const handleExpand = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, false)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  return (\n    <FormFieldSet\n      title={member.fieldSet.title}\n      description={member.fieldSet.description}\n      level={member.fieldSet.level}\n      collapsible={member.fieldSet.collapsible}\n      collapsed={member.fieldSet.collapsed}\n      onCollapse={handleCollapse}\n      onExpand={handleExpand}\n      columns={member?.fieldSet?.columns}\n      data-testid={`fieldset-${member.fieldSet.name}`}\n    >\n      {member.fieldSet.members.map((fieldsetMember) => {\n        if (fieldsetMember.kind === 'error') {\n          return <MemberFieldError key={member.key} member={fieldsetMember} />\n        }\n        return (\n          <MemberField\n            member={fieldsetMember}\n            renderField={renderField}\n            renderInput={renderInput}\n            renderItem={renderItem}\n            renderPreview={renderPreview}\n            key={fieldsetMember.key}\n          />\n        )\n      })}\n    </FormFieldSet>\n  )\n})\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {tap} from 'rxjs/operators'\nimport {useToast} from '@sanity/ui'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {\n  ArrayInputInsertEvent,\n  ObjectInputProps,\n  ObjectItem,\n  ObjectItemProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../patch'\nimport {ensureKey} from '../../utils/ensureKey'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {ArrayOfObjectsItemMember} from '../../store'\nimport {createProtoValue} from '../../utils/createProtoValue'\nimport {isEmptyItem} from '../../store/utils/isEmptyItem'\nimport {useResolveInitialValueForType} from '../../../store'\nimport {resolveInitialArrayValues} from '../utils/resolveInitialArrayValues'\n\n/**\n * @beta\n */\nexport interface MemberItemProps {\n  member: ArrayOfObjectsItemMember\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * @beta\n */\nexport function ArrayOfObjectsItem(props: MemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput, renderField, renderPreview} = props\n\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [member.key, onChange])\n\n  const handleOpenItem = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onSetPathCollapsed(path, false)\n    },\n    [onPathOpen, onSetPathCollapsed]\n  )\n  const toast = useToast()\n\n  // Note: this handles inserting *siblings*\n  const handleInsert = useCallback(\n    (event: Omit<ArrayInputInsertEvent<ObjectItem>, 'referenceItem'>) => {\n      if (event.items.length === 0) {\n        throw new Error('Insert event should include at least one item')\n      }\n      const itemsWithKeys = event.items.map((item) => ensureKey(item))\n\n      onChange(PatchEvent.from([insert(itemsWithKeys, event.position, [{_key: member.key}])]))\n\n      const focusItemKey = itemsWithKeys[0]._key\n      const parentPath = member.item.path.slice(0, -1)\n      const itemPath = [...parentPath, {_key: focusItemKey}]\n\n      // Set focus at the first item (todo: verify that this is the expected/better behavior when adding multiple items)\n      onPathFocus(itemPath)\n\n      const shouldOpen = event.open !== false\n      if (event.skipInitialValue) {\n        if (shouldOpen) {\n          handleOpenItem(itemPath)\n        }\n      } else {\n        resolveInitialArrayValues(itemsWithKeys, member.parentSchemaType, resolveInitialValue)\n          .pipe(\n            tap((result) => {\n              if (result.type === 'patch') {\n                onChange(PatchEvent.from(result.patches))\n              } else {\n                toast.push({\n                  title: `Could not resolve initial value`,\n                  description: `Unable to resolve initial value for type: ${result.schemaType.title}: ${result.error.message}.`,\n                  status: 'error',\n                })\n              }\n            })\n          )\n          .subscribe({\n            complete: () => {\n              if (shouldOpen) {\n                handleOpenItem(itemPath)\n              }\n            },\n          })\n      }\n    },\n    [\n      handleOpenItem,\n      member.item.path,\n      member.key,\n      member.parentSchemaType,\n      onChange,\n      onPathFocus,\n      resolveInitialValue,\n      toast,\n    ]\n  )\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.item.path)\n  }, [member.item.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.item.path)\n  }, [member.item.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.item.path.concat(path))\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.item.schemaType)))\n          .prefixAll({_key: member.key})\n      )\n    },\n    [onChange, member.item.schemaType, member.key]\n  )\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.item.path, true)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.item.path, false)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.item.path.concat(fieldName))\n    },\n    [onPathOpen, member.item.path]\n  )\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n\n  const isEmptyValue = !member.item.value || isEmptyItem(member.item.value)\n  const handleClose = useCallback(() => {\n    if (isEmptyValue) {\n      onRemove()\n    }\n    onPathOpen(member.item.path.slice(0, -1))\n    onPathFocus(member.item.path)\n  }, [isEmptyValue, onPathOpen, member.item.path, onPathFocus, onRemove])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.item.path, groupName)\n    },\n    [onFieldGroupSelect, member.item.path]\n  )\n\n  const elementProps = useMemo(\n    (): ObjectInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.item.id]\n  )\n\n  const inputProps = useMemo((): Omit<ObjectInputProps, 'renderDefault'> => {\n    return {\n      changed: member.item.changed,\n      focusPath: member.item.focusPath,\n      focused: member.item.focused,\n      groups: member.item.groups,\n      id: member.item.id,\n      level: member.item.level,\n      members: member.item.members,\n      onChange: handleChange,\n      onFieldClose: handleCloseField,\n      onFieldCollapse: handleCollapseField,\n      onFieldSetCollapse: handleCollapseFieldSet,\n      onFieldExpand: handleExpandField,\n      onFieldSetExpand: handleExpandFieldSet,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onPathFocus: handleFocusChildPath,\n      onFieldOpen: handleOpenField,\n      path: member.item.path,\n      presence: member.item.presence,\n      readOnly: member.item.readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType: member.item.schemaType,\n      validation: member.item.validation,\n      value: member.item.value,\n      elementProps: elementProps,\n    }\n  }, [\n    elementProps,\n    handleChange,\n    handleCloseField,\n    handleCollapseField,\n    handleCollapseFieldSet,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleFocusChildPath,\n    handleOpenField,\n    handleSelectFieldGroup,\n    member.item.changed,\n    member.item.focusPath,\n    member.item.focused,\n    member.item.groups,\n    member.item.id,\n    member.item.level,\n    member.item.members,\n    member.item.path,\n    member.item.presence,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.validation,\n    member.item.value,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const itemProps = useMemo((): Omit<ObjectItemProps, 'renderDefault'> => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      schemaType: member.item.schemaType,\n      parentSchemaType: member.parentSchemaType,\n      onInsert: handleInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      open: member.open,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n      changed: member.item.changed,\n      inputProps,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.parentSchemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    member.item.changed,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    handleInsert,\n    onRemove,\n    handleOpen,\n    handleClose,\n    handleExpand,\n    handleCollapse,\n    handleFocus,\n    handleBlur,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderItem(itemProps), [itemProps, renderItem])}\n    </FormCallbacksProvider>\n  )\n}\n","import {SchemaType} from '@sanity/types'\n\nexport function getEmptyValue(type: SchemaType): number | string | boolean {\n  switch (type.jsonType) {\n    case 'string': {\n      return ''\n    }\n    case 'number': {\n      return 0\n    }\n    case 'boolean': {\n      return false\n    }\n    default:\n      throw new Error(`Unable to create value from type \"${type.jsonType}\"`)\n  }\n}\n","import {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {FIXME} from '../../../FIXME'\nimport {ArrayOfPrimitivesItemMember} from '../../store'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {getEmptyValue} from '../../inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue'\nimport {\n  PrimitiveInputProps,\n  PrimitiveItemProps,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderInputCallback,\n} from '../../types'\nimport {insert, PatchArg, PatchEvent, set, unset} from '../../patch'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\n\n/**\n * @beta\n */\nexport interface PrimitiveMemberItemProps {\n  member: ArrayOfPrimitivesItemMember\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderInput: RenderInputCallback\n}\n\n/**\n * @beta\n */\nexport function ArrayOfPrimitivesItem(props: PrimitiveMemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput} = props\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      onPathBlur(member.item.path)\n    },\n    [member.item.path, onPathBlur]\n  )\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      onPathFocus(member.item.path)\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      const patches = PatchEvent.from(event).patches.map((patch) =>\n        // Map direct unset patches to empty value instead in order to not *remove* elements as the user clears out the value\n        // note: this creates the rather \"weird\" case where the input renders 0 when you try to clear it\n        patch.path.length === 0 && patch.type === 'unset'\n          ? set(getEmptyValue(member.item.schemaType))\n          : patch\n      )\n      onChange(PatchEvent.from(patches).prefixAll(member.index))\n    },\n    [onChange, member.item.schemaType, member.index]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.index))\n    },\n    [member.index, member.item.schemaType, onChange]\n  )\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.item.value || ''),\n      readOnly: Boolean(member.item.readOnly),\n      placeholder: member.item.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.item.id,\n      member.item.readOnly,\n      member.item.schemaType.placeholder,\n      member.item.value,\n    ]\n  )\n  const inputProps = useMemo((): Omit<PrimitiveInputProps, 'renderDefault'> => {\n    return {\n      changed: member.item.changed,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      readOnly: member.item.readOnly,\n      schemaType: member.item.schemaType as FIXME,\n      id: member.item.id,\n      path: member.item.path,\n      focused: member.item.focused,\n      onChange: handleChange,\n      validation: member.item.validation,\n      presence: member.item.presence,\n      elementProps,\n    }\n  }, [\n    member.item.changed,\n    member.item.level,\n    member.item.value,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.id,\n    member.item.path,\n    member.item.focused,\n    member.item.validation,\n    member.item.presence,\n    handleChange,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([member.index])]))\n  }, [member.index, onChange])\n\n  const onInsert = useCallback(\n    (event: {items: unknown[]; position: 'before' | 'after'}) => {\n      onChange(PatchEvent.from([insert(event.items, event.position, [member.index])]))\n    },\n    [member.index, onChange]\n  )\n\n  const itemProps = useMemo((): Omit<PrimitiveItemProps, 'renderDefault'> => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      schemaType: member.item.schemaType as FIXME,\n      parentSchemaType: member.parentSchemaType,\n      onInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    member.parentSchemaType,\n    onInsert,\n    onRemove,\n    handleFocus,\n    handleBlur,\n    renderedInput,\n  ])\n\n  return <>{useMemo(() => renderItem(itemProps as PrimitiveItemProps), [itemProps, renderItem])}</>\n}\n","import {Box, Card, Code, Flex, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: unknown\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function IncompatibleItemType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e: any) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Text weight=\"semibold\">\n              Item of type <code>{typeName}</code> not valid for this list\n            </Text>\n            <Text size={1} weight=\"semibold\">\n              Why is this happening?\n            </Text>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        paddingX={2}\n        paddingY={3}\n        flex={1}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        __unstable_focusRing\n        {...rest}\n      >\n        <Flex align=\"center\">\n          <Box marginRight={3}>\n            <Text>\n              <UnknownIcon />\n            </Text>\n          </Box>\n\n          <Box flex={1}>\n            <Text size={1} textOverflow=\"ellipsis\">\n              Item of type <code>{typeName}</code> not valid for this list\n            </Text>\n          </Box>\n        </Flex>\n      </Card>\n    </Popover>\n  )\n}\n","import React from 'react'\n\nimport {ArrayItemError} from '../store/types/memberErrors'\nimport {IncompatibleItemType} from './views/IncompatibleItemType'\n\n/** @internal */\nexport function MemberItemError(props: {member: ArrayItemError}) {\n  const {member} = props\n\n  if (member.error.type === 'INVALID_ITEM_TYPE') {\n    return <IncompatibleItemType value={member.error.value} />\n  }\n  return <div>Unexpected Error: {member.error.type}</div>\n}\n","import React from 'react'\nimport {ObjectMember} from '../store'\nimport {\n  RenderInputCallback,\n  RenderFieldCallback,\n  RenderPreviewCallback,\n  RenderArrayOfObjectsItemCallback,\n} from '../types'\n\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\nimport {MemberFieldSet} from './MemberFieldset'\n\n/** @internal */\nexport interface ObjectMembersProps {\n  members: ObjectMember[]\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n/**\n * Convenience component for wrapping an object input\n * @internal\n */\n\nexport function ObjectMembers(props: ObjectMembersProps) {\n  const {members, renderInput, renderField, renderItem, renderPreview} = props\n  return (\n    <>\n      {members.map((member) => {\n        if (member.kind === 'field') {\n          return (\n            <MemberField\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        if (member.kind === 'error') {\n          return <MemberFieldError key={member.key} member={member} />\n        }\n        if (member.kind === 'fieldSet') {\n          return (\n            <MemberFieldSet\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        //@ts-expect-error The branching above should cover all possible cases\n        console.warn(new Error(`Unhandled member kind ${member.kind}`))\n        return null\n      })}\n    </>\n  )\n}\n","import React from 'react'\nimport {ArrayOfObjectsMember} from '../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../types'\n\nimport {ArrayOfObjectsItem} from './items/ArrayOfObjectsItem'\nimport {MemberItemError} from './MemberItemError'\n\n/** @internal */\nexport interface ArrayOfObjectsMembersProps {\n  members: ArrayOfObjectsMember[]\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * Convenience component for wrapping an array of objects\n * @internal\n */\nexport function ArrayOfObjectsMembers(props: ArrayOfObjectsMembersProps) {\n  const {members, renderInput, renderField, renderItem, renderPreview} = props\n  return (\n    <>\n      {members.map((member) => {\n        if (member.kind === 'item') {\n          return (\n            <ArrayOfObjectsItem\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        if (member.kind === 'error') {\n          return <MemberItemError key={member.key} member={member} />\n        }\n\n        //@ts-expect-error The branching above should cover all possible cases\n        console.warn(new Error(`Unhandled member kind ${member.kind}`))\n        return null\n      })}\n    </>\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {isEqual, startsWith, trimLeft} from '@sanity/util/paths'\nimport {isKeySegment, Path} from '@sanity/types'\nimport {FieldMember} from '../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {isArrayInputProps, isObjectInputProps} from '../utils/asserters'\nimport {MemberField, ArrayOfObjectsItem, MemberItemError} from '../members'\n\nconst pass = ({children}: {children: React.ReactNode}) => children\n\n/** @internal */\nexport type FormInputAbsolutePathArg = {absolutePath: Path}\n\n/** @internal */\nexport type FormInputRelativePathArg = {relativePath: Path}\n\nfunction hasAbsolutePath(\n  a: FormInputAbsolutePathArg | FormInputRelativePathArg\n): a is FormInputAbsolutePathArg {\n  return 'absolutePath' in a\n}\n\n/** @internal */\nexport const FormInput = memo(function FormInput(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) &\n    (FormInputRelativePathArg | FormInputAbsolutePathArg) & {\n      /**\n       * Whether to include the field around the input. Defaults to false\n       */\n      includeField?: boolean\n    }\n) {\n  const absolutePath = useMemo(() => {\n    return hasAbsolutePath(props) ? props.absolutePath : props.path.concat(props.relativePath)\n  }, [props])\n\n  return (\n    <FormInputInner\n      {...props}\n      absolutePath={absolutePath}\n      destinationRenderField={props.renderField}\n      destinationRenderInput={props.renderInput}\n      destinationRenderItem={props.renderItem}\n      destinationRenderPreview={props.renderPreview}\n    />\n  )\n})\n\n/**\n * An input that takes input props for object or array and renders an input for a given sub-path\n */\nconst FormInputInner = memo(function FormInputInner(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) & {\n    absolutePath: Path\n    includeField?: boolean\n    destinationRenderInput: RenderInputCallback\n    destinationRenderField: RenderFieldCallback\n    destinationRenderItem: RenderArrayOfObjectsItemCallback\n    destinationRenderPreview: RenderPreviewCallback\n  }\n) {\n  const {\n    absolutePath,\n    destinationRenderInput,\n    destinationRenderItem,\n    destinationRenderField,\n    destinationRenderPreview,\n  } = props\n\n  const renderInput: RenderInputCallback = useCallback(\n    (inputProps) => {\n      const isDestinationReached =\n        isEqual(inputProps.path, absolutePath) || startsWith(absolutePath, inputProps.path)\n      if (isDestinationReached) {\n        // we have reached the destination node and can now render with the passed renderInput\n        return destinationRenderInput(inputProps)\n      }\n      if (!isObjectInputProps(inputProps) && !isArrayInputProps(inputProps)) {\n        throw new Error(\n          `Expected either object input props or array input props for: ${JSON.stringify(\n            inputProps.path\n          )}`\n        )\n      }\n      // we have not yet reached the destination path, so we'll continue recurse until we get there\n      return (\n        <FormInputInner\n          {...inputProps}\n          absolutePath={absolutePath}\n          destinationRenderInput={destinationRenderInput}\n          destinationRenderItem={destinationRenderItem}\n          destinationRenderField={destinationRenderField}\n          destinationRenderPreview={destinationRenderPreview}\n        />\n      )\n    },\n    [\n      absolutePath,\n      destinationRenderField,\n      destinationRenderInput,\n      destinationRenderItem,\n      destinationRenderPreview,\n    ]\n  )\n\n  const renderField: RenderFieldCallback = useCallback(\n    (fieldProps) => {\n      // we want to render the field around the input if either of these are true:\n      // 1. we have reached the destination path and the `includeField`-prop is passed as true\n      // 2. we are currently at a node somewhere below/inside the destination path\n      const shouldRenderField =\n        startsWith(absolutePath, fieldProps.path) &&\n        (props.includeField || !isEqual(absolutePath, fieldProps.path))\n      return shouldRenderField ? destinationRenderField(fieldProps) : pass(fieldProps)\n    },\n    [absolutePath, destinationRenderField, props.includeField]\n  )\n\n  if (isArrayInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n\n    const itemMember = props.members.find(\n      (member) =>\n        member.kind == 'item' && isKeySegment(childPath[0]) && member.key === childPath[0]._key\n    )\n\n    if (!itemMember) {\n      const relativePath = trimLeft(props.path, absolutePath)\n      const key = (relativePath[0] as any)._key\n      return (\n        <div>\n          No array item with _key <code>\"{key}\"</code> found at path {JSON.stringify(props.path)}\n        </div>\n      )\n    }\n    if (itemMember.kind === 'error') {\n      return <MemberItemError member={itemMember} />\n    }\n    return (\n      <ArrayOfObjectsItem\n        member={itemMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={pass}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n\n  if (isObjectInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n    const fieldMember = props.members.find(\n      (member): member is FieldMember => member.kind == 'field' && childPath[0] === member.name\n    )\n\n    if (!fieldMember) {\n      const fieldName = childPath[0]\n      return (\n        <div>\n          Field {JSON.stringify(fieldName)} not found among members  please verify that it's both\n          defined in the schema and that it has not been conditionally hidden.\n        </div>\n      )\n    }\n\n    return (\n      <MemberField\n        member={fieldMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={pass}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n  throw new Error('FormInput can only be used with arrays or objects')\n})\n","import styled from 'styled-components'\nimport {Card, Flex} from '@sanity/ui'\n\nexport const OverlayContainer = styled.div`\n  position: relative;\n`\n\nexport const ContentContainer = styled.div`\n  z-index: 13;\n  opacity: 0;\n  transition: opacity 300ms linear;\n`\n\nexport const CardContainer = styled(Card)`\n  border: 1px solid var(--card-border-color);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 12;\n  transition: opacity 150ms ease-in-out;\n  opacity: 0;\n  box-sizing: border-box;\n`\n\nexport const FlexContainer = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  :hover,\n  :focus {\n    & ${CardContainer} {\n      opacity: 0.9;\n    }\n\n    & ${ContentContainer} {\n      opacity: 1;\n    }\n  }\n`\n","// This is transitional in order to track usage of the ActivateOnFocusPart part from within the form-builder package\nimport React, {KeyboardEvent, useCallback, useMemo, useState} from 'react'\nimport {Text} from '@sanity/ui'\nimport {\n  OverlayContainer,\n  FlexContainer,\n  CardContainer,\n  ContentContainer,\n} from './ActivateOnFocus.styles'\n\nconst isTouchDevice = () =>\n  (typeof window !== 'undefined' && 'ontouchstart' in window) ||\n  (typeof navigator !== 'undefined' && navigator.maxTouchPoints > 0)\n\n/**\n * @internal\n */\nexport interface ActivateOnFocusProps {\n  children: React.ReactNode\n  message?: React.ReactNode\n  onActivate?: () => void\n  isOverlayActive: boolean\n}\n\n/**\n * @internal\n */\n\nexport function ActivateOnFocus(props: ActivateOnFocusProps) {\n  const {children, message, onActivate, isOverlayActive} = props\n  const [focused, setFocused] = useState(false)\n\n  const handleClick = useCallback(() => {\n    if (onActivate) {\n      onActivate()\n    }\n  }, [onActivate])\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent<HTMLDivElement>) => {\n      if (!isOverlayActive) {\n        return\n      }\n      if (event.code === 'Space' && onActivate) {\n        event.preventDefault()\n        onActivate()\n      }\n    },\n    [isOverlayActive, onActivate]\n  )\n\n  const handleOnFocus = useCallback(() => {\n    setFocused(true)\n  }, [])\n\n  const handleBlur = useCallback(() => {\n    setFocused(false)\n  }, [])\n\n  const msg = useMemo(() => {\n    const isTouch = isTouchDevice()\n    let activateVerb = isTouch ? 'Tap' : 'Click'\n    if (focused && !isTouch) {\n      activateVerb += ' or press space'\n    }\n    const text = message || `${activateVerb} to activate`\n    return <Text weight=\"semibold\">{text}</Text>\n  }, [focused, message])\n\n  return (\n    <OverlayContainer\n      onBlur={handleBlur}\n      onClick={handleClick}\n      onFocus={handleOnFocus}\n      onKeyDown={handleKeyDown}\n    >\n      {isOverlayActive && (\n        <FlexContainer tabIndex={0} align=\"center\" justify=\"center\">\n          <CardContainer\n            // Almost all input elements have radius=1, and this component is\n            // typically used for overlaying input elements.\n            // @todo Consider making `radius` a component property of `ActivateOnFocus`.\n            radius={1}\n          />\n          <ContentContainer>{msg}</ContentContainer>\n        </FlexContainer>\n      )}\n      {children}\n    </OverlayContainer>\n  )\n}\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, insert} from '../../../patch'\nimport {InsertCallback} from './types'\n\nexport function createInsertCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): InsertCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  let toInsert\n\n  return (givenBlock: PortableTextBlock | PortableTextBlock[]): void => {\n    toInsert = Array.isArray(givenBlock) ? givenBlock : [givenBlock]\n    toInsert = toInsert.map((blk) =>\n      normalizeBlock(blk, {\n        allowedDecorators,\n      })\n    )\n\n    const patches = [insert(toInsert, 'after', [{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, set} from '../../../patch'\nimport {SetCallback} from './types'\n\nexport function createSetCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): SetCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  return (givenBlock: PortableTextBlock): void => {\n    const patches = [\n      set(\n        normalizeBlock(givenBlock, {\n          allowedDecorators,\n        }),\n\n        [{_key: block._key}]\n      ),\n    ]\n\n    return onChange(patches)\n  }\n}\n","import {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, unset} from '../../../patch'\nimport {UnsetCallback} from './types'\n\nexport function createUnsetCallback(options: {\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): UnsetCallback {\n  const {block, onChange} = options\n\n  return (): void => {\n    const patches = [unset([{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {PatchArg} from '../../patch'\nimport {RenderBlockActionsCallback, RenderBlockActionsProps} from './types'\nimport {createInsertCallback, createSetCallback, createUnsetCallback} from './callbacks'\n\ninterface BlockActionsProps {\n  block: PortableTextBlock\n  onChange: (...patches: PatchArg[]) => void\n  renderBlockActions?: RenderBlockActionsCallback\n}\n\nconst Root = styled.div`\n  display: flex;\n  pointer-events: 'all';\n`\n\n// function isClassComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && !!component.prototype?.isReactComponent\n// }\n\n// function isFunctionComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && String(component).includes('return React.createElement')\n// }\n\nexport function BlockActions(props: BlockActionsProps) {\n  const editor = usePortableTextEditor()\n  const {block, onChange, renderBlockActions} = props\n  const decoratorValues = useMemo(\n    () => PortableTextEditor.getPortableTextFeatures(editor).decorators.map((d) => d.value),\n    [editor]\n  )\n\n  const blockActions = useMemo(() => {\n    if (renderBlockActions) {\n      const blockActionProps: RenderBlockActionsProps = {\n        block,\n        value: PortableTextEditor.getValue(editor),\n        set: createSetCallback({allowedDecorators: decoratorValues, block, onChange}),\n        unset: createUnsetCallback({block, onChange}),\n        insert: createInsertCallback({allowedDecorators: decoratorValues, block, onChange}),\n      }\n\n      // // Support returning a class component for renderBlockActions (to keep backward compatability as it was possible before)\n      // if (isClassComponent(renderBlockActions) || isFunctionComponent(renderBlockActions)) {\n      //   const RenderComponent = renderBlockActions\n      //   return <RenderComponent {...blockActionProps} />\n      // }\n      return renderBlockActions(blockActionProps)\n    }\n    return undefined\n  }, [renderBlockActions, block, editor, onChange, decoratorValues])\n\n  // Take focus away from the editor so dealing with block actions doesn't interfere with the editor focus\n  const handleClick = useCallback(() => {\n    PortableTextEditor.blur(editor)\n  }, [editor])\n\n  // Don't render anything if the renderBlockActions function returns null.\n  // Note that if renderBlockComponent is a React class, this will never be the case.\n  if (!blockActions) return null\n\n  return (\n    <Root contentEditable={false} onKeyDown={handleClick} onMouseDown={handleClick}>\n      {blockActions}\n    </Root>\n  )\n}\n","import {rgba} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const ReviewChangesHighlightBlock = styled.div(({theme}) => {\n  const {radius, space, color} = theme.sanity\n  const bg = rgba(color.spot.yellow, 0.2)\n\n  return css`\n    position: absolute;\n    border-radius: ${radius[3]}px;\n    top: -${space[2]}px;\n    bottom: -${space[1] + space[1]}px;\n    left: ${space[4] + space[1]}px;\n    right: 0;\n    background-color: ${bg};\n  `\n})\n","import styled, {css} from 'styled-components'\nimport {ChangeIndicator} from '../../../../changeIndicators'\n\nexport const StyledChangeIndicatorWithProvidedFullPath = styled(ChangeIndicator)(() => {\n  return css`\n    width: 1px;\n    height: 100%;\n\n    & > div {\n      height: 100%;\n    }\n  `\n})\n","/**\n * Reconciles two versions of a state tree by iterating over the next and deep comparing against the next towards the previous.\n * Wherever identical values are found, the previous value is kept, preserving object identities for arrays and objects where possible\n * @param previous - the previous value\n * @param next - the next/current value\n */\nexport function immutableReconcile<T>(previous: unknown, next: T): T {\n  return _immutableReconcile(previous, next, new WeakSet())\n}\n\nfunction _immutableReconcile<T>(\n  previous: unknown,\n  next: T,\n  /**\n   * Keep track of visited nodes to prevent infinite recursion in case of circular structures\n   */\n  parents: WeakSet<any>\n): T {\n  if (previous === next) return previous as T\n\n  // eslint-disable-next-line no-eq-null\n  if (previous == null || next == null) return next\n\n  const prevType = typeof previous\n  const nextType = typeof next\n\n  // Different types\n  if (prevType !== nextType) return next\n\n  if (Array.isArray(next)) {\n    parents.add(next)\n\n    assertType<unknown[]>(previous)\n    assertType<unknown[]>(next)\n\n    let allEqual = previous.length === next.length\n    const result = []\n    for (let index = 0; index < next.length; index++) {\n      if (parents.has(next[index])) {\n        return next\n      }\n\n      const nextItem = _immutableReconcile(previous[index], next[index], parents)\n\n      if (nextItem !== previous[index]) {\n        allEqual = false\n      }\n      result[index] = nextItem\n    }\n    return (allEqual ? previous : result) as any\n  }\n\n  if (typeof next === 'object') {\n    parents.add(next)\n    assertType<Record<string, unknown>>(previous)\n    assertType<Record<string, unknown>>(next)\n\n    const nextKeys = Object.keys(next)\n    let allEqual = Object.keys(previous).length === nextKeys.length\n    const result: Record<string, unknown> = {}\n    for (const key of nextKeys) {\n      if (parents.has(next[key])) {\n        return next\n      }\n      const nextValue = _immutableReconcile(previous[key], next[key]!, parents)\n      if (nextValue !== previous[key]) {\n        allEqual = false\n      }\n      result[key] = nextValue\n    }\n    return (allEqual ? previous : result) as T\n  }\n  return next\n}\n\n// just some typescript trickery get type assertion\n// eslint-disable-next-line @typescript-eslint/no-empty-function, no-empty-function\nfunction assertType<T>(value: unknown): asserts value is T {}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {createContext, useContext, useMemo} from 'react'\nimport {FormNodeValidation, Path, ValidationMarker} from '@sanity/types'\nimport {isEqual, startsWith} from '@sanity/util/paths'\nimport {of} from 'rxjs'\nimport {mergeMapTo} from 'rxjs/operators'\n\nconst ValidationContext = createContext<ValidationMarker[]>([])\n\nexport function ValidationProvider(props: {\n  validation: ValidationMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <ValidationContext.Provider value={props.validation}>\n      {props.children}\n    </ValidationContext.Provider>\n  )\n}\n\nexport function useValidationMarkers(): ValidationMarker[] {\n  const ctx = useContext(ValidationContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\n/**\n * @alpha\n * @param path - the path to return child validation for\n * @param inclusive - whether to include validation for the current path (default false)\n */\nexport function useChildValidation(path: Path, inclusive = false): FormNodeValidation[] {\n  const validation = useValidationMarkers()\n  return useMemo(\n    () =>\n      validation\n        .filter((item) => startsWith(path, item.path) && (inclusive || !isEqual(path, item.path)))\n        .map((marker) => ({\n          message: marker.item.message,\n          level: marker.level,\n          path: marker.path,\n        })) as FormNodeValidation[],\n    [inclusive, path, validation]\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {ArrayOfObjectsFormNode, FieldMember, ObjectMember} from '../../store'\n\nexport function _isBlockType(type: SchemaType): boolean {\n  if (type.type) {\n    return _isBlockType(type.type)\n  }\n\n  return type.name === 'block'\n}\n\nexport function _isObjectFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'object'\n}\n\nexport function _isArrayOfObjectsFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'array'\n}\n","import {FormNodeValidation} from '@sanity/types'\nimport {useMemo, useRef} from 'react'\nimport {EMPTY_ARRAY} from '../../../../util'\nimport {BaseFormNode} from '../../../store'\nimport {immutableReconcile} from '../../../store/utils/immutableReconcile'\nimport {useChildValidation} from '../../../studio/contexts/Validation'\nimport {_isBlockType} from '../_helpers'\n\nconst NONEXISTENT_PATH = ['@@_NONEXISTENT_PATH_@@']\n\n/** @internal */\nexport function useMemberValidation(member: BaseFormNode | undefined) {\n  const prev = useRef<FormNodeValidation[] | null>(null)\n  const memberValidation =\n    member?.validation && member.validation.length > 0 ? member.validation : EMPTY_ARRAY\n  const childValidation = useChildValidation(member?.path || NONEXISTENT_PATH)\n\n  const validation = useMemo(\n    () =>\n      member?.schemaType && _isBlockType(member?.schemaType)\n        ? memberValidation\n        : memberValidation.concat(childValidation),\n    [childValidation, member, memberValidation]\n  )\n\n  const [hasError, hasWarning, hasInfo] = useMemo(\n    () => [\n      validation.filter((v) => v.level === 'error').length > 0,\n      validation.filter((v) => v.level === 'warning').length > 0,\n      validation.filter((v) => v.level === 'info').length > 0,\n    ],\n    [validation]\n  )\n\n  const reconciled = immutableReconcile(prev.current, validation)\n  prev.current = reconciled\n\n  return useMemo(() => {\n    return {\n      validation: reconciled,\n      hasError,\n      hasWarning,\n      hasInfo,\n    }\n  }, [reconciled, hasError, hasWarning, hasInfo])\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMarker} from '../../../types'\n\nexport const PortableTextMarkersContext = createContext<PortableTextMarker[]>([])\n\nexport function PortableTextMarkersProvider(props: {\n  markers: PortableTextMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMarkersContext.Provider value={props.markers}>\n      {props.children}\n    </PortableTextMarkersContext.Provider>\n  )\n}\n","import {Path} from '@sanity/types'\nimport {isEqual} from '@sanity/util/paths'\nimport {useContext, useMemo} from 'react'\nimport {PortableTextMarker} from '../../../types'\nimport {PortableTextMarkersContext} from '../contexts/PortableTextMarkers'\n\nexport function usePortableTextMarkers(path: Path): PortableTextMarker[] {\n  const ctx = useContext(PortableTextMarkersContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  const markers = useMemo(() => ctx.filter((m) => isEqual(m.path, path)), [ctx, path])\n  return markers\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport const PortableTextMemberItemsContext = createContext<PortableTextMemberItem[]>([])\n\nexport function PortableTextMemberItemsProvider(props: {\n  memberItems: PortableTextMemberItem[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMemberItemsContext.Provider value={props.memberItems}>\n      {props.children}\n    </PortableTextMemberItemsContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {PortableTextMemberItemsContext} from '../contexts/PortableTextMembers'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport function usePortableTextMemberItem(key: string): PortableTextMemberItem | undefined {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx.find((m) => m.key === key)\n}\n\nexport function usePortableTextMemberItems(): PortableTextMemberItem[] {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","const DEBUG_RENDERING = false\n\nfunction getRandomColor(): string {\n  const letters = '0123456789ABCDEF'\n  let color = '#'\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)]\n  }\n  return color\n}\n\nexport function debugRender(style?: React.CSSProperties): React.CSSProperties | undefined {\n  return DEBUG_RENDERING\n    ? {\n        ...(style ? style : {}),\n        color: style && style.color ? style.color : getRandomColor(),\n        background: style && style.background ? style.background : getRandomColor(),\n      }\n    : undefined\n}\n","import {EditIcon, LinkIcon, TrashIcon, EyeOpenIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport {\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {\n  Box,\n  Button,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {\n  forwardRef,\n  MouseEvent,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef,\n  useId,\n} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {RenderPreviewCallback} from '../../../types'\nimport {is} from '../../../utils/is'\nimport {PreviewProps} from '../../../../components'\nimport {FIXME} from '../../../../FIXME'\nimport {IntentLink} from 'sanity/router'\n\ninterface BlockObjectPreviewProps {\n  focused: boolean\n  isActive?: boolean\n  onClickingDelete: (event: MouseEvent) => void\n  onClickingEdit: () => void\n  readOnly?: boolean\n  renderPreview: RenderPreviewCallback\n  type: ObjectSchemaType\n  value: PortableTextBlock\n}\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: 'default',\n  tone: 'default',\n}\n\nexport function BlockObjectPreview(props: BlockObjectPreviewProps): ReactElement {\n  const {\n    focused,\n    isActive,\n    onClickingDelete,\n    onClickingEdit,\n    readOnly,\n    renderPreview,\n    type,\n    value,\n  } = props\n  const {isTopLayer} = useLayer()\n  const editor = usePortableTextEditor()\n  const menuButtonId = useId()\n  const menuButton = useRef<HTMLButtonElement | null>(null)\n  const isTabbing = useRef<boolean>(false)\n  const isCustomPreviewComponent = Boolean(type?.components?.preview)\n  const isImageType = is('image', type)\n\n  const referenceLink = useMemo(\n    () =>\n      forwardRef(function ReferenceLink(linkProps: FIXME, ref: FIXME) {\n        return <IntentLink {...linkProps} intent=\"edit\" params={{id: value._ref}} ref={ref} />\n      }),\n    [value?._ref]\n  )\n\n  // Go to menu when tabbed to\n  // Focus block on escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!focused) {\n          return\n        }\n        if (event.key === 'Escape' && isTopLayer) {\n          // event.preventDefault()\n          // event.stopPropagation()\n          isTabbing.current = false\n          PortableTextEditor.focus(editor)\n        }\n        if (event.key === 'Tab') {\n          if (menuButton.current && !isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            menuButton.current.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [focused, isTopLayer, editor]\n    )\n  )\n\n  const actions = (\n    <MenuButton\n      button={\n        <Button\n          aria-label=\"Open menu\"\n          fontSize={1}\n          iconRight={EllipsisVerticalIcon}\n          mode=\"bleed\"\n          paddingX={2}\n          tabIndex={isActive ? 0 : 1}\n        />\n      }\n      ref={menuButton}\n      id={menuButtonId}\n      menu={\n        <Menu>\n          {value?._ref && (\n            <MenuItem as={referenceLink} data-as=\"a\" icon={LinkIcon} text=\"Open reference\" />\n          )}\n\n          {readOnly && <MenuItem icon={EyeOpenIcon} onClick={onClickingEdit} text=\"View\" />}\n          {!readOnly && <MenuItem icon={EditIcon} onClick={onClickingEdit} text=\"Edit\" />}\n          {!readOnly && (\n            <MenuItem icon={TrashIcon} onClick={onClickingDelete} text=\"Delete\" tone=\"critical\" />\n          )}\n        </Menu>\n      }\n      popover={POPOVER_PROPS}\n    />\n  )\n\n  const previewProps: Omit<PreviewProps, 'renderDefault'> = useMemo(\n    () => ({\n      layout: isImageType ? 'blockImage' : 'block',\n      schemaType: type,\n      value,\n    }),\n    [isImageType, type, value]\n  )\n\n  if (isCustomPreviewComponent) {\n    return (\n      <Flex>\n        <Box flex={1}>{renderPreview(previewProps)}</Box>\n        <Box marginLeft={1}>{actions}</Box>\n      </Flex>\n    )\n  }\n\n  return (\n    <>\n      {renderPreview({\n        actions,\n        layout: isImageType ? 'blockImage' : 'block',\n        schemaType: type,\n        value,\n        media: (isImageType ? value : undefined) as any, // TODO\n      })}\n    </>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Card, Theme, Flex, Box} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const Root = styled(Card)((props: {theme: Theme}) => {\n  const {color, radius, space} = props.theme.sanity\n\n  const overlay = css`\n    pointer-events: none;\n    content: '';\n    position: absolute;\n    top: -${space[1]}px;\n    bottom: -${space[1]}px;\n    left: -${space[1]}px;\n    right: -${space[1]}px;\n    border-radius: ${radius[2]}px;\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n  `\n\n  return css`\n    box-shadow: 0 0 0 1px var(--card-border-color);\n    border-radius: ${radius[1]}px;\n    pointer-events: all;\n    position: relative;\n\n    &[data-focused] {\n      box-shadow: 0 0 0 1px ${color.selectable?.primary.selected.border};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      &:after {\n        ${overlay}\n        background-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n    }\n\n    &[data-warning] {\n      &:after {\n        ${overlay}\n        background-color: ${color.muted.caution.hovered.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      &:after {\n        ${overlay}\n        background-color: ${color.input.invalid.enabled.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n})\n\nexport const PreviewContainer = styled(Flex)`\n  user-select: none;\n  pointer-events: none;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n\n      [data-dragged] & {\n        visibility: hidden;\n      }\n    `\n  }\n)\n\nexport const InnerFlex = styled(Flex)`\n  position: relative;\n\n  [data-dragged] > & {\n    opacity: 0.5;\n  }\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  width: 25px;\n  position: relative;\n\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const BlockActionsInner = styled(Flex)`\n  position: absolute;\n  right: 0;\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\nexport const BlockPreview = styled(Box)``\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  RenderAttributes,\n  EditorSelection,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Tooltip, Flex, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {PatchArg} from '../../../patch'\nimport {RenderCustomMarkers, RenderPreviewCallback} from '../../../types'\nimport {RenderBlockActionsCallback} from '../types'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field'\nimport {debugRender} from '../debugRender'\nimport {BlockObjectPreview} from './BlockObjectPreview'\nimport {\n  Root,\n  PreviewContainer,\n  ChangeIndicatorWrapper,\n  InnerFlex,\n  BlockActionsOuter,\n  BlockActionsInner,\n  TooltipBox,\n  BlockPreview,\n} from './BlockObject.styles'\n\ninterface BlockObjectProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  isActive?: boolean\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  onItemOpen: (path: Path) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  type: ObjectSchemaType\n}\n\nexport function BlockObject(props: BlockObjectProps) {\n  const {\n    attributes: {focused, selected, path},\n    block,\n    isActive,\n    isFullscreen,\n    onChange,\n    onItemOpen,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    renderPreview,\n    type,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const editor = usePortableTextEditor()\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleMouseOver = useCallback(() => setReviewChangesHovered(true), [])\n  const handleMouseOut = useCallback(() => setReviewChangesHovered(false), [])\n\n  const handleEdit = useCallback(() => {\n    if (memberItem) {\n      onItemOpen(memberItem.node.path)\n    }\n  }, [onItemOpen, memberItem])\n\n  const handleDoubleClickToOpen = useCallback(\n    (e: any) => {\n      e.preventDefault()\n      e.stopPropagation()\n      PortableTextEditor.blur(editor)\n      handleEdit()\n    },\n    [editor, handleEdit]\n  )\n\n  const handleDelete = useCallback(\n    (e: any) => {\n      e.stopPropagation()\n      e.preventDefault()\n      const sel: EditorSelection = {focus: {path, offset: 0}, anchor: {path, offset: 0}}\n      PortableTextEditor.delete(editor, sel, {mode: 'blocks'})\n      // Focus will not stick unless this is done through a timeout when deleted through clicking the menu button.\n      setTimeout(() => PortableTextEditor.focus(editor))\n    },\n    [editor, path]\n  )\n\n  const blockPreview = useMemo(() => {\n    return (\n      <BlockObjectPreview\n        focused={focused}\n        isActive={isActive}\n        onClickingDelete={handleDelete}\n        onClickingEdit={handleEdit}\n        readOnly={readOnly}\n        renderPreview={renderPreview}\n        type={type}\n        value={block}\n      />\n    )\n  }, [focused, isActive, handleDelete, handleEdit, readOnly, renderPreview, type, block])\n\n  const tone = selected || focused ? 'primary' : 'default'\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(markers.length > 0)\n\n  const isImagePreview = memberItem?.node.schemaType.name === 'image'\n\n  const tooltipEnabled = hasError || hasWarning || hasInfo || hasMarkers\n  const toolTipContent = useMemo(\n    () =>\n      (tooltipEnabled && (validation.length > 0 || markers.length > 0) && (\n        <TooltipBox padding={2}>\n          <Markers\n            markers={markers}\n            validation={validation}\n            renderCustomMarkers={renderCustomMarkers}\n          />\n        </TooltipBox>\n      )) ||\n      null,\n    [Markers, markers, renderCustomMarkers, tooltipEnabled, validation]\n  )\n\n  const returned = useMemo(\n    () => (\n      <Flex paddingBottom={1} marginY={3} contentEditable={false} style={debugRender()}>\n        <InnerFlex flex={1}>\n          <PreviewContainer flex={1} {...innerPaddingProps}>\n            <Tooltip\n              placement=\"top\"\n              portal=\"editor\"\n              disabled={!tooltipEnabled}\n              content={toolTipContent}\n            >\n              <Root\n                data-focused={focused ? '' : undefined}\n                data-image-preview={isImagePreview ? '' : undefined}\n                data-invalid={hasError ? '' : undefined}\n                data-markers={hasMarkers && renderCustomMarkers ? '' : undefined}\n                data-read-only={readOnly ? '' : undefined}\n                data-selected={selected ? '' : undefined}\n                data-testid=\"pte-block-object\"\n                data-warning={hasWarning ? '' : undefined}\n                flex={1}\n                onDoubleClick={handleDoubleClickToOpen}\n                padding={isImagePreview ? 0 : 1}\n                ref={elementRef}\n                tone={tone}\n              >\n                <BlockPreview ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}>\n                  {blockPreview}\n                </BlockPreview>\n              </Root>\n            </Tooltip>\n          </PreviewContainer>\n\n          <BlockActionsOuter marginRight={1}>\n            <BlockActionsInner>\n              {renderBlockActions && block && focused && !readOnly && (\n                <BlockActions\n                  onChange={onChange}\n                  block={block}\n                  renderBlockActions={renderBlockActions}\n                />\n              )}\n            </BlockActionsInner>\n          </BlockActionsOuter>\n\n          {isFullscreen && memberItem && (\n            <ChangeIndicatorWrapper\n              onMouseOver={handleMouseOver}\n              onMouseOut={handleMouseOut}\n              $hasChanges={memberItem.member.item.changed}\n            >\n              <StyledChangeIndicatorWithProvidedFullPath\n                withHoverEffect={false}\n                hasFocus={focused}\n                path={memberItem.member.item.path}\n                isChanged={memberItem.member.item.changed}\n              />\n            </ChangeIndicatorWrapper>\n          )}\n\n          {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n        </InnerFlex>\n      </Flex>\n    ),\n    [\n      block,\n      blockPreview,\n      focused,\n      handleDoubleClickToOpen,\n      handleMouseOut,\n      handleMouseOver,\n      hasError,\n      hasMarkers,\n      hasWarning,\n      innerPaddingProps,\n      isFullscreen,\n      isImagePreview,\n      memberItem,\n      onChange,\n      readOnly,\n      renderBlockActions,\n      renderCustomMarkers,\n      reviewChangesHovered,\n      selected,\n      tone,\n      toolTipContent,\n      tooltipEnabled,\n    ]\n  )\n\n  return returned\n}\n","import React, {useRef, useCallback, useEffect, useState} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface InlineObjectToolbarPopoverProps {\n  open: boolean\n  onClose: () => void\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  referenceElement: HTMLElement | null\n  scrollElement: HTMLElement | null\n  title: string\n}\n\nexport function InlineObjectToolbarPopover(props: InlineObjectToolbarPopoverProps) {\n  const {onClose, onEdit, onDelete, referenceElement, scrollElement, title, open} = props\n  const {sanity} = useTheme()\n  const editButtonRef = useRef<HTMLButtonElement | null>(null)\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n  const isTabbing = useRef<boolean>(false)\n\n  // Close floating toolbar on Escape\n  // Focus to edit button on Tab\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          isTabbing.current = false\n          onClose()\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [onClose]\n    )\n  )\n\n  useEffect(() => {\n    if (isTabbing.current) {\n      editButtonRef.current?.focus()\n    }\n  }, [])\n\n  return (\n    <div contentEditable={false}>\n      <ToolbarPopover\n        boundaryElement={scrollElement}\n        constrainSize\n        content={\n          <Box padding={1}>\n            <Inline space={1}>\n              <Box padding={2}>\n                <Text weight=\"semibold\" size={1}>\n                  {title}\n                </Text>\n              </Box>\n              <Button\n                icon={EditIcon}\n                mode=\"bleed\"\n                onClick={onEdit}\n                padding={2}\n                ref={editButtonRef}\n                alt=\"Edit object\"\n              />\n              <Button\n                icon={TrashIcon}\n                mode=\"bleed\"\n                padding={2}\n                onClick={onDelete}\n                tone=\"critical\"\n                alt=\"Remove object\"\n              />\n            </Inline>\n          </Box>\n        }\n        fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n        open={open}\n        placement=\"top\"\n        portal=\"editor\"\n        referenceElement={referenceElement}\n        scheme={popoverScheme}\n      />\n    </div>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  Type,\n  RenderAttributes,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Box, Card, Theme, Tooltip} from '@sanity/ui'\nimport {RenderCustomMarkers, RenderPreviewCallback} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {PortableTextEditorElement} from '../Compositor'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {PreviewProps} from '../../../../components'\nimport {FIXME} from '../../../../FIXME'\nimport {InlineObjectToolbarPopover} from './InlineObjectToolbarPopover'\n\ninterface InlineObjectProps {\n  attributes: RenderAttributes\n  onItemOpen: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  scrollElement: HTMLElement | null\n  type: Type\n  value: PortableTextChild\n}\n\nfunction rootStyle({theme}: {theme: Theme}) {\n  const {color, radius} = theme.sanity\n\n  return css`\n    line-height: 0;\n    border-radius: ${radius[2]}px;\n    padding: 2px;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    height: calc(1em - 1px);\n    margin-top: 0.0625em;\n    cursor: default;\n\n    &:not([hidden]) {\n      display: inline-flex;\n      align-items: center;\n      vertical-align: top;\n    }\n\n    &[data-ready-only] {\n      cursor: default;\n    }\n\n    &[data-focused] {\n      box-shadow: inset 0 0 0 1px ${color.selectable?.primary.selected.border};\n      color: ${color.selectable?.primary.pressed.fg};\n    }\n\n    &[data-selected] {\n      background-color: ${color.selectable?.primary.pressed.bg};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      --card-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-bg-color: ${color.muted.caution.hovered.bg};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      --card-bg-color: ${color.input.invalid.enabled.bg};\n      --card-border-color: ${color.input.invalid.enabled.border};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n}\n\nconst Root = styled(Card)(rootStyle)\n\nconst PreviewSpan = styled.span`\n  display: block;\n  max-width: calc(5em + 80px);\n  position: relative;\n`\n\nconst TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const InlineObject = React.forwardRef(function InlineObject(\n  props: InlineObjectProps,\n  forwardedRef: React.ForwardedRef<PortableTextEditorElement>\n) {\n  const {\n    attributes: {focused, selected, path},\n    onItemOpen,\n    readOnly,\n    renderCustomMarkers,\n    renderPreview,\n    scrollElement,\n    type,\n    value,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const editor = usePortableTextEditor()\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const hasValidationMarkers = validation.length > 0\n  const [popoverOpen, setPopoverOpen] = useState<boolean>(true)\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (selected || focused) {\n      return 'primary'\n    }\n    return undefined\n  }, [focused, hasError, hasWarning, selected])\n\n  const preview = useMemo(() => {\n    const previewProps: Omit<PreviewProps, 'renderDefault'> = {\n      fallbackTitle: 'Click to edit',\n      layout: 'inline',\n      schemaType: type as FIXME,\n      value,\n    }\n\n    return <PreviewSpan>{renderPreview(previewProps)}</PreviewSpan>\n  }, [renderPreview, type, value])\n\n  const markersToolTip = useMemo(\n    () =>\n      markers.length > 0 || validation.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"editor\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                validation={validation}\n                renderCustomMarkers={renderCustomMarkers}\n              />\n            </TooltipBox>\n          }\n        >\n          {preview}\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, validation, preview, renderCustomMarkers]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      const point = {path, offset: 0}\n      const selection = {anchor: point, focus: point}\n      PortableTextEditor.delete(editor, selection, {mode: 'children'})\n      PortableTextEditor.focus(editor)\n    },\n    [editor, path]\n  )\n\n  const openItem = useCallback((): void => {\n    PortableTextEditor.blur(editor)\n    if (memberItem) {\n      onItemOpen(memberItem.node.path)\n      setPopoverOpen(false)\n    }\n  }, [editor, memberItem, onItemOpen])\n\n  const handlePopoverClose = useCallback(() => {\n    if (memberItem?.member.open) {\n      setPopoverOpen(true)\n    }\n    setPopoverOpen(false)\n  }, [memberItem?.member.open])\n\n  useEffect(() => {\n    if (memberItem?.member.open) {\n      setPopoverOpen(false)\n    } else if (focused) {\n      setPopoverOpen(true)\n    } else {\n      setPopoverOpen(false)\n    }\n  }, [editor, focused, memberItem?.member.open, selected])\n\n  return (\n    <>\n      <Root\n        data-focused={focused || undefined}\n        data-invalid={hasError || undefined}\n        data-warning={hasWarning || undefined}\n        data-selected={selected || undefined}\n        data-read-only={readOnly || undefined}\n        data-markers={hasValidationMarkers || undefined}\n        tone={tone}\n        forwardedAs=\"span\"\n        contentEditable={false}\n        ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}\n        onClick={readOnly ? openItem : undefined}\n        onDoubleClick={openItem}\n      >\n        <span ref={forwardedRef}>{markersToolTip || preview}</span>\n      </Root>\n      {focused && !readOnly && (\n        <InlineObjectToolbarPopover\n          open={popoverOpen}\n          onDelete={handleRemoveClick}\n          onEdit={openItem}\n          onClose={handlePopoverClose}\n          referenceElement={memberItem?.elementRef?.current || null}\n          scrollElement={scrollElement}\n          title={type?.title || type.name}\n        />\n      )}\n    </>\n  )\n})\n","import {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {FormNodeValidation} from '@sanity/types'\nimport {Box, Flex, Stack, Text, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {PortableTextMarker, RenderCustomMarkers} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\n\nexport interface MarkersProps {\n  markers: PortableTextMarker[]\n  validation: FormNodeValidation[]\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\nconst getIcon = (level: 'error' | 'warning' | 'info') => {\n  if (level === 'error') {\n    return <ErrorOutlineIcon />\n  }\n\n  if (level === 'warning') {\n    return <WarningOutlineIcon />\n  }\n\n  return <InfoOutlineIcon />\n}\n\nconst IconText = styled(Text)(({theme}: {theme: Theme}) => {\n  return css`\n    &[data-info] {\n      color: ${theme.sanity.color.muted.primary.enabled.fg};\n    }\n\n    &[data-warning] {\n      color: ${theme.sanity.color.muted.caution.enabled.fg};\n    }\n\n    &[data-error] {\n      color: ${theme.sanity.color.muted.critical.enabled.fg};\n    }\n  `\n})\n\nexport function DefaultMarkers(props: MarkersProps) {\n  const {markers, validation, renderCustomMarkers} = props\n  const {CustomMarkers} = useFormBuilder().__internal.components\n\n  if (markers.length === 0 && validation.length === 0) {\n    return null\n  }\n\n  return (\n    <Stack space={1}>\n      {validation.length > 0 &&\n        validation.map(({message, level}, index) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <Flex key={`validationItem-${index}`}>\n            <Box marginRight={2} marginBottom={index + 1 === validation.length ? 0 : 2}>\n              <IconText\n                size={1}\n                data-error={level === 'error' ? '' : undefined}\n                data-warning={level === 'warning' ? '' : undefined}\n                data-info={level === 'info' ? '' : undefined}\n              >\n                {getIcon(level)}\n              </IconText>\n            </Box>\n            <Box>\n              <Text size={1}>{message || 'Error'}</Text>\n            </Box>\n          </Flex>\n        ))}\n\n      {markers.length > 0 && (\n        <Box marginTop={validation.length > 0 ? 3 : 0}>\n          {renderCustomMarkers && renderCustomMarkers(markers)}\n          {!renderCustomMarkers && <CustomMarkers markers={markers} />}\n        </Box>\n      )}\n    </Stack>\n  )\n}\n","import React, {useState, useRef, useMemo, useEffect, useCallback} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface AnnotationToolbarPopoverProps {\n  /**\n   * Needed to update the popover position on scroll\n   */\n  scrollElement?: HTMLElement\n  annotationElement?: HTMLElement\n  textElement?: HTMLElement\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n}\n\nexport function AnnotationToolbarPopover(props: AnnotationToolbarPopoverProps) {\n  const {scrollElement, annotationElement, textElement, title, onEdit, onDelete} = props\n  const [open, setOpen] = useState<boolean>(false)\n  const [cursorRect, setCursorRect] = useState<DOMRect | null>(null)\n  const [selection, setSelection] = useState<{\n    anchorNode: Node | null\n    anchorOffset: number\n    focusNode: Node | null\n    focusOffset: number\n  } | null>(null)\n  const isClosingRef = useRef<boolean>(false)\n  const rangeRef = useRef<Range | null>(null)\n  const editButtonRef = useRef<HTMLButtonElement>(null)\n  const isTabbing = useRef<boolean>(false)\n  const {sanity} = useTheme()\n\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n\n  // This is a \"virtual element\" (supported by Popper.js)\n  const cursorElement = useMemo(() => {\n    if (!cursorRect) {\n      return null\n    }\n\n    return {\n      getBoundingClientRect: () => {\n        return cursorRect\n      },\n    }\n  }, [cursorRect]) as HTMLElement\n\n  useEffect(() => {\n    if (!open || !scrollElement) {\n      return undefined\n    }\n\n    const handleScroll = () => {\n      if (rangeRef.current) {\n        setCursorRect(rangeRef.current.getBoundingClientRect())\n      }\n    }\n\n    scrollElement.addEventListener('scroll', handleScroll, {passive: true})\n\n    return () => {\n      scrollElement.removeEventListener('scroll', handleScroll)\n    }\n  }, [open, scrollElement])\n\n  // Close floating toolbar on Escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!open) {\n          return\n        }\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          setOpen(false)\n          isTabbing.current = false\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [open]\n    )\n  )\n\n  // Detect selection changes\n  useEffect(() => {\n    function handleSelectionChange() {\n      if (!textElement) return\n      const winSelection = window.getSelection()\n      if (!winSelection) {\n        return\n      }\n      const {anchorNode, anchorOffset, focusNode, focusOffset} = winSelection\n\n      setSelection({\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n      })\n    }\n\n    document.addEventListener('selectionchange', handleSelectionChange, {passive: true})\n\n    return () => {\n      document.removeEventListener('selectionchange', handleSelectionChange)\n    }\n  }, [textElement])\n\n  // Open popover when selection is within annotations\n  useEffect(() => {\n    if (!selection) return\n    if (isClosingRef.current) return\n    const {anchorNode, focusNode} = selection\n    // Safari would close the popover by loosing range when button is focused.\n    // If we are focused and currently tabbing to the action buttons, just return here.\n    if (isTabbing.current) {\n      return\n    }\n    if (annotationElement && annotationElement.contains(anchorNode) && anchorNode === focusNode) {\n      const range = window.getSelection()?.getRangeAt(0)\n      const rect = range?.getBoundingClientRect()\n\n      rangeRef.current = range || null\n\n      if (rect) {\n        setCursorRect(rect)\n      }\n      setOpen(true)\n    } else {\n      setOpen(false)\n      setCursorRect(null)\n      rangeRef.current = null\n    }\n  }, [selection, annotationElement])\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <ToolbarPopover\n      content={\n        <Box padding={1}>\n          <Inline space={1}>\n            <Box padding={2}>\n              <Text weight=\"semibold\" size={1}>\n                {title}\n              </Text>\n            </Box>\n            <Button\n              ref={editButtonRef}\n              icon={EditIcon}\n              mode=\"bleed\"\n              onClick={onEdit}\n              padding={2}\n              alt=\"Edit annotation\"\n            />\n            <Button\n              icon={TrashIcon}\n              mode=\"bleed\"\n              padding={2}\n              onClick={onDelete}\n              tone=\"critical\"\n              alt=\"Remove annotation\"\n            />\n          </Inline>\n        </Box>\n      }\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open={open}\n      placement=\"top\"\n      portal=\"default\"\n      referenceElement={cursorElement}\n      scheme={popoverScheme}\n    />\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  PortableTextEditor,\n  RenderAttributes,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Box, Theme, ThemeColorToneKey, Tooltip} from '@sanity/ui'\nimport React, {SyntheticEvent, useCallback, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FIXME} from '../../../../FIXME'\nimport {pathToString} from '../../../../field'\nimport {RenderCustomMarkers} from '../../../types'\nimport {DefaultMarkers} from '../_legacyDefaultParts/Markers'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {AnnotationToolbarPopover} from './AnnotationToolbarPopover'\n\ninterface AnnotationProps {\n  attributes: RenderAttributes\n  children: JSX.Element\n  onItemOpen: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  scrollElement: HTMLElement | null\n  type: ObjectSchemaType\n  value: PortableTextChild\n}\n\nconst Root = styled.span<{$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>}>(\n  (props: {$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>; theme: Theme}) => {\n    const {$toneKey = 'default', theme} = props\n\n    return css`\n      text-decoration: none;\n      display: inline;\n      background-color: ${theme.sanity.color.selectable?.[$toneKey].enabled.bg};\n      border-bottom: 1px dashed ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      color: ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n\n      &[data-link] {\n        border-bottom: 1px solid ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      }\n\n      &[data-custom-markers] {\n        background-color: ${theme.sanity.color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n\n      &[data-warning] {\n        background-color: ${theme.sanity.color.muted.caution.hovered.bg};\n      }\n\n      &[data-error] {\n        background-color: ${theme.sanity.color.muted.critical.hovered.bg};\n      }\n    `\n  }\n)\n\nconst TooltipBox = styled(Box).attrs({forwardedAs: 'span'})`\n  max-width: 250px;\n`\n\nexport const Annotation = function Annotation(props: AnnotationProps) {\n  const {\n    attributes: {focused, path},\n    children,\n    onItemOpen,\n    renderCustomMarkers,\n    scrollElement,\n    readOnly,\n    type,\n    value,\n  } = props\n  const {Markers = DefaultMarkers} = useFormBuilder().__internal.components\n  const annotationRef = useRef<HTMLElement>(null)\n  const editor = usePortableTextEditor()\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: value._key}]),\n    [path, value._key]\n  )\n  const [textElement, setTextElement] = useState<HTMLSpanElement | null>(null)\n  const memberItem = usePortableTextMemberItem(pathToString(markDefPath))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const markers = usePortableTextMarkers(path)\n\n  const text = useMemo(\n    () => (\n      <span ref={setTextElement} data-annotation=\"\">\n        {children}\n      </span>\n    ),\n\n    [children]\n  )\n\n  const openItem = useCallback(() => {\n    if (memberItem) {\n      onItemOpen(memberItem.node.path)\n    }\n  }, [memberItem, onItemOpen])\n\n  const markersToolTip = useMemo(\n    () =>\n      validation.length > 0 || markers.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"default\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                renderCustomMarkers={renderCustomMarkers}\n                validation={validation}\n              />\n            </TooltipBox>\n          }\n        >\n          <span>{text}</span>\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, renderCustomMarkers, text, validation]\n  )\n\n  const handleEditClick = useCallback(\n    (event: SyntheticEvent): void => {\n      PortableTextEditor.blur(editor)\n      event.preventDefault()\n      event.stopPropagation()\n      openItem()\n    },\n    [editor, openItem]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      PortableTextEditor.removeAnnotation(editor, type as FIXME)\n      PortableTextEditor.focus(editor)\n    },\n    [editor, type]\n  )\n\n  const isLink = type.name === 'link'\n\n  const toneKey = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (isLink) {\n      return 'primary'\n    }\n    return 'default'\n  }, [isLink, hasError, hasWarning])\n\n  const hasCustomMarkers = markers.length > 0\n\n  return (\n    <Root\n      $toneKey={toneKey}\n      ref={annotationRef}\n      data-link={isLink ? '' : undefined}\n      data-error={hasError ? '' : undefined}\n      data-warning={hasWarning ? '' : undefined}\n      data-custom-markers={hasCustomMarkers ? '' : undefined}\n      onClick={readOnly ? openItem : undefined}\n    >\n      <span ref={memberItem?.elementRef}>{markersToolTip || text}</span>\n      {focused && !readOnly && (\n        <AnnotationToolbarPopover\n          textElement={textElement || undefined}\n          annotationElement={annotationRef.current || undefined}\n          scrollElement={scrollElement || undefined}\n          onEdit={handleEditClick}\n          onDelete={handleRemoveClick}\n          title={type?.title || type.name}\n        />\n      )}\n    </Root>\n  )\n}\n","import {ResponsivePaddingProps} from '@sanity/ui'\n\nexport const TEXT_LEVELS = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nexport const TEXT_BULLET_MARKERS = ['', '', '']\n\nexport const TEXT_NUMBER_FORMATS = ['number', 'lower-alpha', 'lower-roman']\n\nexport const TEXT_DECORATOR_TAGS: Record<string, React.ElementType> = {\n  em: 'em',\n  'strike-through': 's',\n  underline: 'u',\n  strong: 'strong',\n  code: 'code',\n}\n\nexport const TEXT_STYLE_PADDING: Record<string, ResponsivePaddingProps> = {\n  h1: {\n    paddingTop: 5,\n    paddingBottom: 4,\n  },\n  h2: {\n    paddingTop: 4,\n    paddingBottom: 4,\n  },\n  h3: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h4: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h5: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h6: {\n    paddingTop: 4,\n    paddingBottom: 2,\n  },\n  normal: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n  blockquote: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {TEXT_DECORATOR_TAGS} from './constants'\n\ninterface DecoratorProps {\n  mark: string\n  children: React.ReactNode\n}\n\nconst Root = styled.span`\n  /* Make sure the annotation styling is visible */\n  &[data-mark='code'] {\n    mix-blend-mode: multiply;\n    color: inherit;\n  }\n`\n\nexport function Decorator(props: DecoratorProps) {\n  const {mark, children} = props\n  const tag = TEXT_DECORATOR_TAGS[mark]\n\n  return (\n    <Root as={tag} data-mark={mark}>\n      {children}\n    </Root>\n  )\n}\n","export function createListName(level: number): string {\n  return `list-level-${level}`\n}\n","import {hues} from '@sanity/color'\nimport {Box, Flex, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {TEXT_BULLET_MARKERS, TEXT_NUMBER_FORMATS} from './constants'\nimport {createListName} from './helpers'\n\ninterface TextBlockStyleProps {\n  $level: number\n}\n\nfunction textBlockStyle(props: TextBlockStyleProps & {theme: Theme}) {\n  const {$level, theme} = props\n  const {color, fonts, radius, space} = theme.sanity\n  const numberMarker = TEXT_NUMBER_FORMATS[($level - 1) % TEXT_NUMBER_FORMATS.length]\n  const bulletMarker = TEXT_BULLET_MARKERS[($level - 1) % TEXT_BULLET_MARKERS.length]\n\n  return css`\n    --marker-bg-color: transparent;\n\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n    position: relative;\n\n    & > [data-ui='TextBlock_inner'] {\n      position: relative;\n      flex: 1;\n    }\n\n    & > div:before {\n      content: '';\n      position: absolute;\n      top: -${space[1]}px;\n      bottom: -${space[1]}px;\n      left: -${space[1]}px;\n      right: -${space[1]}px;\n      border-radius: ${radius[2]}px;\n      background-color: var(--marker-bg-color);\n    }\n\n    &[data-markers] {\n      --marker-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-border-color: ${color.muted.caution.enabled.border};\n      --marker-bg-color: ${color.muted.caution.hovered.bg};\n    }\n\n    &[data-error] {\n      --card-border-color: ${color.muted.critical.enabled.border};\n      --marker-bg-color: ${color.muted.critical.hovered.bg};\n    }\n\n    & [data-list-prefix] {\n      position: absolute;\n      margin-left: -4.5rem;\n      width: 3.75rem;\n      text-align: right;\n      box-sizing: border-box;\n    }\n\n    &[data-list-item='number'] [data-list-prefix] {\n      font-variant-numeric: tabular-nums;\n\n      & > span:before {\n        content: counter(${createListName($level)}) '.';\n        content: counter(${createListName($level)}, ${numberMarker}) '.';\n      }\n    }\n\n    &[data-list-item='bullet'] [data-list-prefix] {\n      & > span {\n        position: relative;\n        top: -0.1875em;\n\n        &:before {\n          content: '${bulletMarker}';\n          font-size: 0.46666em;\n        }\n      }\n    }\n\n    & [data-text] {\n      overflow-wrap: anywhere;\n      text-transform: none;\n      white-space: pre-wrap;\n      font-family: ${fonts.text.family};\n      flex: 1;\n\n      *::selection {\n        background-color: ${color.selectable?.primary.pressed.bg};\n      }\n    }\n  `\n}\n\nexport const TextRoot = styled.div<TextBlockStyleProps>(textBlockStyle)\n\n// Because of a weird bug in Google Chrome regarding the @sanity/ui Flex component and spellchecking,\n// this is set to be a Box with 'display: flex'. Using the Flex component here results in Chrome\n// using 20% CPU when idle when spellchecking is on for some reason.\nexport const TextBlockFlexWrapper = styled(Box)`\n  position: relative;\n  display: flex;\n`\n\nexport const ListPrefixWrapper = styled.div`\n  user-select: none;\n  white-space: nowrap;\n`\n\nexport const BlockExtrasContainer = styled(Box)`\n  user-select: none;\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  line-height: 0;\n  width: 25px;\n  position: relative;\n`\n\nexport const BlockActionsInner = styled(Flex)(({theme}: {theme: Theme}) => {\n  const {fonts, space} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const textSize2 = fonts.text.sizes[2]\n  const capHeight1 = textSize1.lineHeight - textSize1.ascenderHeight - textSize1.descenderHeight\n  const capHeight2 = textSize2.lineHeight - textSize2.ascenderHeight - textSize2.descenderHeight\n  const buttonHeight = capHeight1 + space[2] + space[2]\n\n  // This calculates the following:\n  // > var buttonHeight = 25px\n  // > var capHeight2 = 11px\n  // > 0 - (buttonHeight - capHeight2) / 2 = -7px\n  const negativeTop = 0 - (buttonHeight - capHeight2) / 2\n\n  return css`\n    user-select: none;\n    position: absolute;\n    right: 0;\n    top: ${negativeTop}px;\n  `\n})\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const TextFlex = styled(Flex)<{$level?: number}>`\n  position: relative;\n  padding-left: ${({$level}) => ($level ? $level * 32 : 0)}px;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n    `\n  }\n)\n","import {Heading, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype TextStyleProps = Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'ref'>\ntype BlockQuoteStyleProps = Omit<React.HTMLProps<HTMLQuoteElement>, 'as' | 'ref'>\n\n// Without this container, editing with Android breaks due to how Text is styled via responsiveFont in @sanity/ui\nconst TextContainer = styled.div`\n  display: block;\n`\n\nexport const Normal = ({children, ...rest}: TextStyleProps) => (\n  <Text data-testid=\"text-style--normal\" {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Text>\n)\n\nexport const Heading1 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h1\" data-testid=\"text-style--h1\" size={5} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading2 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h2\" data-testid=\"text-style--h2\" size={4} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading3 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h3\" data-testid=\"text-style--h3\" size={3} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading4 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h4\" data-testid=\"text-style--h4\" size={2} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading5 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h5\" data-testid=\"text-style--h5\" size={1} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading6 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h6\" data-testid=\"text-style--h6\" size={0} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nconst BlockQuoteRoot = styled.blockquote`\n  position: relative;\n  display: block;\n  margin: 0;\n  padding-left: ${({theme}) => theme.sanity.space[3]}px;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: -4px;\n    bottom: -4px;\n    width: 3px;\n    background: var(--card-border-color);\n  }\n`\n\nexport const BlockQuote = ({children, ...rest}: TextStyleProps) => (\n  // @todo figure out props typings for BlockQuoteStyleProps\n  <BlockQuoteRoot data-testid=\"text-style--blockquote\" {...(rest as any as BlockQuoteStyleProps)}>\n    <Text as=\"p\">{children}</Text>\n  </BlockQuoteRoot>\n)\n\nexport const TEXT_STYLES: Record<string, React.ComponentType<TextStyleProps>> = {\n  normal: Normal,\n  h1: Heading1,\n  h2: Heading2,\n  h3: Heading3,\n  h4: Heading4,\n  h5: Heading5,\n  h6: Heading6,\n  blockquote: BlockQuote,\n}\n","import {PortableTextBlock, RenderAttributes} from '@sanity/portable-text-editor'\nimport {Box, Flex, ResponsivePaddingProps, Tooltip} from '@sanity/ui'\nimport React, {RefObject, useCallback, useMemo, useState} from 'react'\nimport {RenderCustomMarkers} from '../../../types'\nimport {PatchArg} from '../../../patch'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {RenderBlockActionsCallback} from '../types'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field'\nimport {debugRender} from '../debugRender'\nimport {TEXT_STYLE_PADDING} from './constants'\nimport {\n  BlockActionsInner,\n  BlockActionsOuter,\n  BlockExtrasContainer,\n  ChangeIndicatorWrapper,\n  ListPrefixWrapper,\n  TextBlockFlexWrapper,\n  TextFlex,\n  TextRoot,\n  TooltipBox,\n} from './TextBlock.styles'\nimport {TEXT_STYLES} from './textStyles'\n\nexport interface TextBlockProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  children: React.ReactNode\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  spellCheck?: boolean\n}\n\nexport function TextBlock(props: TextBlockProps) {\n  const {\n    attributes: {path, focused},\n    block,\n    children,\n    isFullscreen,\n    onChange,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    spellCheck,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleChangeIndicatorMouseEnter = useCallback(() => setReviewChangesHovered(true), [])\n  const handleChangeIndicatorMouseLeave = useCallback(() => setReviewChangesHovered(false), [])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(renderCustomMarkers) && markers.length > 0\n\n  const tooltipEnabled = hasError || hasWarning || hasMarkers || hasInfo\n\n  const text = useMemo(() => {\n    const TextStyle = TEXT_STYLES[block.style] || TEXT_STYLES.normal\n\n    return (\n      <TextFlex align=\"flex-start\" $level={block?.level}>\n        {block.listItem && (\n          <ListPrefixWrapper contentEditable={false}>\n            <TextStyle data-list-prefix=\"\" />\n          </ListPrefixWrapper>\n        )}\n        <TextStyle data-text=\"\" style={debugRender()}>\n          {children}\n        </TextStyle>\n      </TextFlex>\n    )\n  }, [block.style, block.listItem, block.level, children])\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const outerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (block.listItem) {\n      return {paddingY: 2}\n    }\n\n    return TEXT_STYLE_PADDING[block.style] || {paddingY: 2}\n  }, [block])\n\n  return (\n    <Box data-testid=\"text-block\" {...outerPaddingProps}>\n      <TextBlockFlexWrapper data-testid=\"text-block__wrapper\">\n        <Flex\n          flex={1}\n          {...innerPaddingProps}\n          ref={memberItem?.elementRef as RefObject<HTMLDivElement>}\n        >\n          <Box flex={1}>\n            <Tooltip\n              placement=\"top\"\n              portal=\"editor\"\n              disabled={!tooltipEnabled}\n              content={\n                tooltipEnabled && (\n                  <TooltipBox padding={2}>\n                    <Markers\n                      markers={markers}\n                      validation={validation}\n                      renderCustomMarkers={renderCustomMarkers}\n                    />\n                  </TooltipBox>\n                )\n              }\n            >\n              <TextRoot\n                data-error={hasError ? '' : undefined}\n                data-list-item={block.listItem}\n                data-markers={hasMarkers ? '' : undefined}\n                data-read-only={readOnly}\n                data-testid=\"text-block__text\"\n                data-warning={hasWarning ? '' : undefined}\n                $level={block.level}\n                spellCheck={spellCheck}\n              >\n                {text}\n              </TextRoot>\n            </Tooltip>\n          </Box>\n\n          <BlockExtrasContainer contentEditable={false}>\n            <BlockActionsOuter marginRight={1}>\n              <BlockActionsInner>\n                {renderBlockActions && focused && !readOnly && (\n                  <BlockActions\n                    onChange={onChange}\n                    block={block}\n                    renderBlockActions={renderBlockActions}\n                  />\n                )}\n              </BlockActionsInner>\n            </BlockActionsOuter>\n\n            {isFullscreen && memberItem && (\n              <ChangeIndicatorWrapper\n                $hasChanges={memberItem.member.item.changed}\n                onMouseEnter={handleChangeIndicatorMouseEnter}\n                onMouseLeave={handleChangeIndicatorMouseLeave}\n              >\n                <StyledChangeIndicatorWithProvidedFullPath\n                  hasFocus={focused}\n                  isChanged={memberItem.member.item.changed}\n                  path={memberItem.member.item.path}\n                  withHoverEffect={false}\n                />\n              </ChangeIndicatorWrapper>\n            )}\n          </BlockExtrasContainer>\n          {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n        </Flex>\n      </TextBlockFlexWrapper>\n    </Box>\n  )\n}\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  icon: string\n  active: boolean\n}\n\nconst CustomIconDiv = styled.div`\n  width: 1em;\n  height: 1em;\n  border-radius: inherit;\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: scale(0.7);\n`\n\nexport function CustomIcon(props: Props) {\n  const {icon, active} = props\n\n  const inlineStyle = useMemo(\n    () => ({\n      backgroundImage: `url(${icon})`,\n      filter: active ? 'invert(100%)' : 'invert(0%)',\n    }),\n    [active, icon]\n  )\n\n  return <CustomIconDiv style={inlineStyle} />\n}\n","import {\n  BlockElementIcon,\n  BoldIcon,\n  CodeIcon,\n  InlineElementIcon,\n  ItalicIcon,\n  LinkIcon,\n  OlistIcon,\n  StrikethroughIcon,\n  UnderlineIcon,\n  UnknownIcon,\n  UlistIcon,\n} from '@sanity/icons'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  PortableTextFeature,\n  PortableTextFeatures,\n} from '@sanity/portable-text-editor'\nimport {get} from 'lodash'\nimport React from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {FIXME} from '../../../../FIXME'\nimport {BlockItem, BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {CustomIcon} from './CustomIcon'\n\nfunction getPTEFormatActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.decorators.map((decorator) => {\n    const shortCutKey = Object.keys(hotkeyOpts.marks || {}).find(\n      (key) => hotkeyOpts.marks?.[key] === decorator.value\n    )\n\n    let hotkeys: string[] = []\n    if (shortCutKey) {\n      hotkeys = [shortCutKey]\n    }\n\n    return {\n      type: 'format',\n      disabled: disabled,\n      icon: decorator.blockEditor?.icon,\n      key: decorator.value,\n      handle: (): void => {\n        PortableTextEditor.toggleMark(editor, decorator.value)\n        PortableTextEditor.focus(editor)\n      },\n      hotkeys,\n      title: decorator.title,\n    }\n  })\n}\n\nfunction getPTEListActions(editor: PortableTextEditor, disabled: boolean): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.lists.map((listItem: PortableTextFeature) => {\n    return {\n      type: 'listStyle',\n      key: listItem.value,\n      disabled: disabled,\n      icon: listItem.blockEditor?.icon,\n      handle: (): void => {\n        PortableTextEditor.toggleList(editor, listItem.value)\n      },\n      title: listItem.title,\n    }\n  })\n}\n\nfunction getAnnotationIcon(item: PortableTextFeature): React.ComponentType | string | undefined {\n  return (\n    get(item, 'icon') ||\n    get(item, 'blockEditor.icon') ||\n    get(item, 'type.icon') ||\n    get(item, 'type.to.icon') ||\n    get(item, 'type.to[0].icon')\n  )\n}\n\nfunction getPTEAnnotationActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsert: (type: ObjectSchemaType) => void\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  const focusChild = PortableTextEditor.focusChild(editor)\n  const hasText = focusChild && focusChild.text\n  return features.annotations.map((item) => {\n    return {\n      type: 'annotation',\n      disabled: !hasText || disabled,\n      icon: getAnnotationIcon(item),\n      key: item.value,\n      handle: (active?: boolean): void => {\n        if (active) {\n          PortableTextEditor.removeAnnotation(editor, item.type)\n          PortableTextEditor.focus(editor)\n        } else {\n          onInsert(item.type as FIXME)\n        }\n      },\n      title: item.title,\n    }\n  })\n}\n\nexport function getPTEToolbarActionGroups(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsertAnnotation: (type: ObjectSchemaType) => void,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarActionGroup[] {\n  return [\n    {name: 'format', actions: getPTEFormatActions(editor, disabled, hotkeyOpts)},\n    {name: 'list', actions: getPTEListActions(editor, disabled)},\n    {name: 'annotation', actions: getPTEAnnotationActions(editor, disabled, onInsertAnnotation)},\n  ]\n}\n\nexport function getBlockStyles(features: PortableTextFeatures): BlockStyleItem[] {\n  return features.styles.map((style: PortableTextFeature) => {\n    return {\n      key: `style-${style.value}`,\n      style: style.value,\n      styleComponent: style && style.blockEditor && style.blockEditor.render,\n      title: style.title,\n    }\n  })\n}\n\nfunction getInsertMenuIcon(\n  type: ObjectSchemaType,\n  fallbackIcon: React.ComponentType\n): React.ComponentType {\n  const referenceIcon = get(type, 'to[0].icon')\n\n  return type.icon || (type.type && type.type.icon) || referenceIcon || fallbackIcon\n}\n\nexport function getInsertMenuItems(\n  features: PortableTextFeatures,\n  disabled: boolean,\n  onInsertBlock: (type: ObjectSchemaType) => void,\n  onInsertInline: (type: ObjectSchemaType) => void\n): BlockItem[] {\n  const blockItems = features.types.blockObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertBlock(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, BlockElementIcon),\n      inline: false,\n      key: `block-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  const inlineItems = features.types.inlineObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertInline(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, InlineElementIcon),\n      inline: true,\n      key: `inline-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  // Do not include items that are supposed to be hidden\n  const filteredBlockItems = blockItems.concat(inlineItems).filter((item) => !item.type?.hidden)\n\n  return filteredBlockItems\n}\n\nconst annotationIcons: Record<string, React.ComponentType> = {\n  link: LinkIcon,\n}\n\nconst formatIcons: Record<string, React.ComponentType> = {\n  strong: BoldIcon,\n  em: ItalicIcon,\n  'strike-through': StrikethroughIcon,\n  underline: UnderlineIcon,\n  code: CodeIcon,\n}\n\nconst listStyleIcons: Record<string, React.ComponentType> = {\n  number: OlistIcon,\n  bullet: UlistIcon,\n}\n\nexport function getActionIcon(action: PTEToolbarAction, active: boolean) {\n  if (action.icon) {\n    if (typeof action.icon === 'string') {\n      return <CustomIcon active={active} icon={action.icon} />\n    }\n\n    return action.icon\n  }\n\n  if (action.type === 'annotation') {\n    return annotationIcons[action.key] || UnknownIcon\n  }\n\n  if (action.type === 'listStyle') {\n    return listStyleIcons[action.key] || UnknownIcon\n  }\n\n  return formatIcons[action.key] || UnknownIcon\n}\n","import {\n  HotkeyOptions,\n  PortableTextBlock,\n  PortableTextChild,\n  PortableTextEditor,\n  PortableTextFeatures,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {useCallback, useMemo} from 'react'\nimport {FIXME} from '../../../../FIXME'\nimport {useUnique} from '../../../../util'\nimport {getPTEToolbarActionGroups} from './helpers'\nimport {BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\n\nexport function useFocusBlock(): PortableTextBlock | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusBlock(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFocusChild(): PortableTextChild | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusChild(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFeatures(): PortableTextFeatures {\n  const editor = usePortableTextEditor()\n\n  return useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n}\n\nexport function useActionGroups({\n  hotkeys,\n  onExpand,\n  resolveInitialValue,\n  disabled,\n}: {\n  hotkeys: HotkeyOptions\n  onExpand: (path: Path) => void\n  resolveInitialValue: (type: ObjectSchemaType) => FIXME\n  disabled: boolean\n}): PTEToolbarActionGroup[] {\n  const editor = usePortableTextEditor()\n\n  const handleInsertAnnotation = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const paths = PortableTextEditor.addAnnotation(editor, type as FIXME, initialValue)\n      if (paths && paths.markDefPath) {\n        PortableTextEditor.blur(editor)\n        onExpand(paths.markDefPath)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  return useMemo(\n    () =>\n      editor ? getPTEToolbarActionGroups(editor, disabled, handleInsertAnnotation, hotkeys) : [],\n    [disabled, editor, handleInsertAnnotation, hotkeys]\n  )\n}\n\nexport function useActiveActionKeys({\n  actions,\n}: {\n  actions: Array<PTEToolbarAction & {firstInGroup?: true}>\n}): string[] {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () => {\n        const activeAnnotationKeys = PortableTextEditor.activeAnnotations(editor).map(\n          (a) => a._type\n        )\n\n        return actions\n          .filter((a) => {\n            if (a.type === 'annotation') {\n              return activeAnnotationKeys.includes(a.key)\n            }\n\n            if (a.type === 'listStyle') {\n              return PortableTextEditor.hasListStyle(editor, a.key)\n            }\n\n            return PortableTextEditor.isMarkActive(editor, a.key)\n          })\n          .map((a) => a.key)\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        editor,\n        // This is needed so that active actions update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n\nexport function useActiveStyleKeys({items}: {items: BlockStyleItem[]}): string[] {\n  const editor = usePortableTextEditor()\n  const focusBlock = useFocusBlock()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () =>\n        items.filter((i) => PortableTextEditor.hasBlockStyle(editor, i.style)).map((i) => i.style),\n      //  eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        focusBlock,\n        // This is needed so that active styles update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Button, ButtonProps, PopoverProps} from '@sanity/ui'\nimport {EllipsisVerticalIcon} from '@sanity/icons'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {useActiveActionKeys, useFeatures, useFocusBlock} from './hooks'\nimport {getActionIcon} from './helpers'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\nconst COLLAPSE_BUTTON_PROPS: ButtonProps = {padding: 2, mode: 'bleed'}\n\ninterface ActionMenuProps {\n  disabled: boolean\n  groups: PTEToolbarActionGroup[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const ActionMenu = memo(function ActionMenu(props: ActionMenuProps) {\n  const {disabled: disabledProp, groups, isFullscreen, collapsed} = props\n  const focusBlock = useFocusBlock()\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n\n  const isVoidBlock = focusBlock?._type !== features.types.block.name\n  const isEmptyTextBlock =\n    !isVoidBlock && focusBlock?.children.length === 1 && focusBlock?.children[0].text === ''\n\n  const disabled = disabledProp || isVoidBlock\n\n  const actions: Array<PTEToolbarAction & {firstInGroup?: true}> = useMemo(\n    () =>\n      groups.reduce<Array<PTEToolbarAction & {firstInGroup?: true}>>((acc, group) => {\n        return acc.concat(\n          group.actions.map(\n            // eslint-disable-next-line max-nested-callbacks\n            (action: PTEToolbarAction, actionIndex) => {\n              if (actionIndex === 0) return {...action, firstInGroup: true}\n              return action\n            }\n          )\n        )\n      }, []),\n    [groups]\n  )\n\n  const activeKeys = useActiveActionKeys({actions})\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(\n    () =>\n      actions.map((action) => {\n        const annotationDisabled = action.type === 'annotation' && isEmptyTextBlock\n        const active = activeKeys.includes(action.key)\n        return (\n          <CollapseMenuButton\n            disabled={disabled || annotationDisabled}\n            {...COLLAPSE_BUTTON_PROPS}\n            dividerBefore={action.firstInGroup}\n            icon={getActionIcon(action, active)}\n            key={action.key}\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => action.handle(active)}\n            selected={active}\n            text={action.title || action.key}\n            tooltipText={action.title || action.key}\n            tooltipProps={{\n              disabled: disabled || annotationDisabled,\n              placement: isFullscreen ? 'bottom' : 'top',\n              portal: 'default',\n            }}\n          />\n        )\n      }),\n    [actions, activeKeys, disabled, isEmptyTextBlock, isFullscreen]\n  )\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={EllipsisVerticalIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import React, {memo, useCallback, useEffect, useMemo, useState} from 'react'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Button, Menu, MenuButton, MenuButtonProps, MenuItem, Text} from '@sanity/ui'\nimport {SelectIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  BlockQuote,\n  Normal,\n} from '../text/textStyles'\nimport {useActiveStyleKeys, useFeatures, useFocusBlock} from './hooks'\nimport {BlockStyleItem} from './types'\n\nconst MenuButtonMemo = memo(MenuButton)\n\ninterface BlockStyleSelectProps {\n  disabled: boolean\n  items: BlockStyleItem[]\n}\n\nconst StyledMenuItem = styled(MenuItem)`\n  // Change the border color variable used by BlockQuote\n  // to make the border visible when the MenuItem is selected\n  &[data-selected] {\n    [data-option='blockquote'] {\n      --card-border-color: var(--card-muted-fg-color);\n    }\n  }\n`\n\nconst StyledButton = styled(Button)`\n  width: 100%;\n`\n\nconst MENU_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom-start',\n  portal: 'default',\n}\n\nconst TEXT_STYLE_OPTIONS: Record<string, (title: React.ReactNode) => React.ReactNode> = {\n  h1: (title) => <Heading1>{title}</Heading1>,\n  h2: (title) => <Heading2>{title}</Heading2>,\n  h3: (title) => <Heading3>{title}</Heading3>,\n  h4: (title) => <Heading4>{title}</Heading4>,\n  h5: (title) => <Heading5>{title}</Heading5>,\n  h6: (title) => <Heading6>{title}</Heading6>,\n  normal: (title) => <Normal>{title}</Normal>,\n  blockquote: (title) => <BlockQuote data-option=\"blockquote\">{title}</BlockQuote>,\n}\n\nconst TEXT_STYLE_KEYS = Object.keys(TEXT_STYLE_OPTIONS)\n\nconst preventDefault = (event: React.MouseEvent<HTMLButtonElement>) => event.preventDefault()\n\nconst emptyStyle: BlockStyleItem = {\n  key: 'style-none',\n  style: '',\n  title: 'No style',\n}\n\nexport const BlockStyleSelect = memo(function BlockStyleSelect(\n  props: BlockStyleSelectProps\n): JSX.Element {\n  const {disabled, items: itemsProp} = props\n  const editor = usePortableTextEditor()\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const [changed, setChanged] = useState(false)\n\n  const _disabled =\n    disabled || (focusBlock ? features.types.block.name !== focusBlock._type : false)\n\n  // @todo: Explain what this does\n  const activeKeys = useActiveStyleKeys({items: itemsProp})\n\n  const {activeItems, items} = useMemo(() => {\n    const _activeItems = itemsProp.filter((item) => activeKeys.includes(item.style))\n\n    let _items = itemsProp\n\n    if (_activeItems.length === 0 && _items.length > 1) {\n      _items = _items.concat([emptyStyle])\n      _activeItems.push(emptyStyle)\n    }\n\n    return {activeItems: _activeItems, items: _items}\n  }, [activeKeys, itemsProp])\n\n  const menuButtonText = useMemo(() => {\n    if (activeItems.length > 1) return 'Multiple'\n    if (activeItems.length === 1) return activeItems[0].title\n    return emptyStyle.title\n  }, [activeItems])\n\n  const handleChange = useCallback(\n    (item: BlockStyleItem): void => {\n      if (focusBlock && item.style !== focusBlock.style) {\n        PortableTextEditor.toggleBlockStyle(editor, item.style)\n      }\n      setChanged(true)\n    },\n    [editor, focusBlock]\n  )\n\n  const renderOption = useCallback((style: string, title: string) => {\n    const hasTextStyle = TEXT_STYLE_KEYS.includes(style)\n    const renderStyle = TEXT_STYLE_OPTIONS[style]\n\n    if (hasTextStyle) {\n      return renderStyle(title)\n    }\n\n    return <Text>{title}</Text>\n  }, [])\n\n  const button = useMemo(\n    () => (\n      <StyledButton\n        disabled={_disabled}\n        iconRight={SelectIcon}\n        mode=\"bleed\"\n        onClick={preventDefault}\n        padding={2}\n        text={menuButtonText}\n      />\n    ),\n    [_disabled, menuButtonText]\n  )\n\n  const menu = useMemo(\n    () => (\n      <Menu disabled={_disabled}>\n        {items.map((item) => {\n          return (\n            <StyledMenuItem\n              key={item.key}\n              pressed={activeItems.includes(item)}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={_disabled ? undefined : () => handleChange(item)}\n            >\n              {renderOption(item.style, item?.title || item.style)}\n            </StyledMenuItem>\n          )\n        })}\n      </Menu>\n    ),\n    [_disabled, activeItems, handleChange, items, renderOption]\n  )\n\n  // Set focus back into the editor when the new value get's in\n  // This must be the last registered hook or it will not be able to focus properly.\n  useEffect(() => {\n    if (changed) {\n      PortableTextEditor.focus(editor)\n      setChanged(false)\n    }\n  }, [activeItems, changed, editor])\n\n  return (\n    <MenuButtonMemo\n      popover={MENU_POPOVER_PROPS}\n      id=\"block-style-select\"\n      button={button}\n      menu={menu}\n    />\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Button, PopoverProps} from '@sanity/ui'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {BlockItem} from './types'\nimport {useFeatures, useFocusBlock} from './hooks'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\n\ninterface InsertMenuProps {\n  disabled: boolean\n  items: BlockItem[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const InsertMenu = memo(function InsertMenu(props: InsertMenuProps) {\n  const {disabled, items, isFullscreen, collapsed} = props\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const editor = usePortableTextEditor()\n\n  const isVoidFocus = focusBlock && focusBlock._type !== features.types.block.name\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(() => {\n    return items.map((item) => {\n      const title = item.type.title || item.type.type?.name\n\n      return (\n        <CollapseMenuButton\n          aria-label={`Insert ${title}${item.inline ? ' (inline)' : ' (block)'}`}\n          padding={2}\n          mode=\"bleed\"\n          disabled={disabled || (isVoidFocus && item.inline === true)}\n          icon={item.icon}\n          key={item.key}\n          // eslint-disable-next-line react/jsx-no-bind, react/jsx-handler-names\n          onClick={item.handle}\n          text={title}\n          tooltipText={`Insert ${title}`}\n          tooltipProps={{\n            disabled,\n            placement: isFullscreen ? 'bottom' : 'top',\n            portal: 'default',\n          }}\n        />\n      )\n    })\n  }, [items, disabled, isVoidFocus, isFullscreen])\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={AddIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      collapseText={false}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import {\n  HotkeyOptions,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n  PortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport {ObjectSchemaType, Path, SchemaType} from '@sanity/types'\nimport {Box, Button, Flex, Hotkeys, Text, Tooltip, useElementRect, useToast} from '@sanity/ui'\nimport {CollapseIcon, ExpandIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {FIXME} from '../../../../FIXME'\nimport {useRovingFocus} from '../../../../components'\nimport {useResolveInitialValueForType} from '../../../../store'\nimport {ActionMenu} from './ActionMenu'\nimport {BlockStyleSelect} from './BlockStyleSelect'\nimport {InsertMenu} from './InsertMenu'\nimport {getBlockStyles, getInsertMenuItems} from './helpers'\nimport {useActionGroups, useFeatures} from './hooks'\nimport {BlockItem, BlockStyleItem, PTEToolbarActionGroup} from './types'\n\ninterface ToolbarProps {\n  hotkeys: HotkeyOptions\n  isFullscreen: boolean\n  readOnly?: boolean\n  onExpand: (path: Path) => void\n  onToggleFullscreen: () => void\n}\n\nconst RootFlex = styled(Flex)`\n  width: 100%;\n`\n\nconst StyleSelectBox = styled(Box)`\n  width: 8em;\n`\n\nconst StyleSelectFlex = styled(Flex)`\n  border-right: 1px solid var(--card-border-color);\n`\n\nconst ActionMenuBox = styled(Box)<{$withInsertMenu: boolean}>`\n  ${({$withInsertMenu}) =>\n    $withInsertMenu &&\n    css`\n      max-width: max-content;\n      border-right: 1px solid var(--card-border-color);\n    `}\n`\n\nconst FullscreenButtonBox = styled(Box)`\n  border-left: 1px solid var(--card-border-color);\n`\n\nconst SLOW_INITIAL_VALUE_LIMIT = 300\n\nconst IS_MAC =\n  typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n\nconst InnerToolbar = memo(function InnerToolbar({\n  actionGroups,\n  blockStyles,\n  disabled,\n  insertMenuItems,\n  isFullscreen,\n  onToggleFullscreen,\n}: {\n  actionGroups: PTEToolbarActionGroup[]\n  blockStyles: BlockStyleItem[]\n  disabled: boolean\n  insertMenuItems: BlockItem[]\n  isFullscreen: boolean\n  onToggleFullscreen: () => void\n}) {\n  const actionsLen = actionGroups.reduce((acc, x) => acc + x.actions.length, 0)\n  const showActionMenu = actionsLen > 0\n  const showInsertMenu = insertMenuItems.length > 0\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootElementRect = useElementRect(rootElement)\n\n  const collapsed = rootElementRect ? rootElementRect?.width < 400 : false\n\n  useRovingFocus({\n    rootElement: rootElement,\n  })\n\n  return (\n    <RootFlex align=\"center\" ref={setRootElement}>\n      <StyleSelectFlex flex={collapsed ? 1 : undefined}>\n        <StyleSelectBox padding={isFullscreen ? 2 : 1}>\n          <BlockStyleSelect disabled={disabled} items={blockStyles} />\n        </StyleSelectBox>\n      </StyleSelectFlex>\n\n      <Flex flex={1}>\n        {showActionMenu && (\n          <ActionMenuBox\n            flex={collapsed ? undefined : 1}\n            padding={isFullscreen ? 2 : 1}\n            $withInsertMenu={showInsertMenu}\n          >\n            <ActionMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              groups={actionGroups}\n              isFullscreen={isFullscreen}\n            />\n          </ActionMenuBox>\n        )}\n\n        {showInsertMenu && (\n          <Box flex={collapsed ? undefined : 1} padding={isFullscreen ? 2 : 1}>\n            <InsertMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              items={insertMenuItems}\n              isFullscreen={isFullscreen}\n            />\n          </Box>\n        )}\n      </Flex>\n      <FullscreenButtonBox padding={isFullscreen ? 2 : 1}>\n        <Tooltip\n          content={\n            <Flex align=\"center\" padding={1}>\n              <Box flex={1} paddingX={1}>\n                <Text size={1}>{`${isFullscreen ? 'Collapse' : 'Expand'} editor`}</Text>\n              </Box>\n              <Box marginLeft={1}>\n                <Hotkeys keys={[`${IS_MAC ? 'Cmd' : 'Ctrl'}`, 'Enter']} />\n              </Box>\n            </Flex>\n          }\n          placement={isFullscreen ? 'bottom' : 'top'}\n          portal=\"default\"\n        >\n          <Button\n            padding={2}\n            icon={isFullscreen ? CollapseIcon : ExpandIcon}\n            mode=\"bleed\"\n            onClick={onToggleFullscreen}\n          />\n        </Tooltip>\n      </FullscreenButtonBox>\n    </RootFlex>\n  )\n})\n\nexport function Toolbar(props: ToolbarProps) {\n  const {hotkeys, isFullscreen, readOnly, onExpand, onToggleFullscreen} = props\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n  const resolveInitialValueForType = useResolveInitialValueForType()\n  const disabled = readOnly || !selection\n\n  const {push} = useToast()\n\n  const resolveInitialValue = useCallback(\n    (type: ObjectSchemaType) => {\n      let isSlow = false\n      const slowTimer = setTimeout(() => {\n        isSlow = true\n        push({\n          id: 'resolving-initial-value',\n          status: 'info',\n          title: 'Resolving initial value',\n        })\n      }, SLOW_INITIAL_VALUE_LIMIT)\n      return resolveInitialValueForType(type as unknown as SchemaType, {})\n        .then((value) => {\n          if (isSlow) {\n            // I found no way to close an existing toast, so this will replace the message in the\n            // \"Resolving initial value\"-toast and then make sure it gets closed.\n            push({\n              id: 'resolving-initial-value',\n              status: 'info',\n              duration: 500,\n              title: 'Initial value resolved',\n            })\n          }\n          return value\n        })\n        .catch((error) => {\n          push({\n            title: `Could not resolve initial value`,\n            id: 'resolving-initial-value',\n            description: `Unable to resolve initial value for type: ${type.name}: ${error.message}.`,\n            status: 'error',\n          })\n\n          return undefined\n        })\n        .finally(() => clearTimeout(slowTimer))\n    },\n    [push]\n  )\n\n  const handleInsertBlock = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertBlock(editor, type as FIXME, initialValue)\n      if (path) {\n        PortableTextEditor.blur(editor)\n        onExpand(path)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  const handleInsertInline = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertChild(editor, type as FIXME, initialValue)\n      if (path) {\n        PortableTextEditor.blur(editor)\n        onExpand(path)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  const actionGroups = useActionGroups({\n    hotkeys,\n    onExpand,\n    resolveInitialValue,\n    disabled: true,\n  })\n\n  const blockStyles = useMemo(() => getBlockStyles(features), [features])\n\n  const insertMenuItems = useMemo(\n    () => getInsertMenuItems(features, disabled, handleInsertBlock, handleInsertInline),\n    [disabled, features, handleInsertBlock, handleInsertInline]\n  )\n\n  return (\n    <InnerToolbar\n      actionGroups={actionGroups}\n      blockStyles={blockStyles}\n      disabled={disabled}\n      insertMenuItems={insertMenuItems}\n      isFullscreen={isFullscreen}\n      onToggleFullscreen={onToggleFullscreen}\n    />\n  )\n}\n","import {Card, Container, rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ScrollContainer} from '../../../components/scroll'\nimport {createListName, TEXT_LEVELS} from './text'\n\nexport const Root = styled(Card)<{$fullscreen: boolean}>`\n  height: ${({$fullscreen}) => ($fullscreen ? '100%' : '15em')};\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  flex-direction: column;\n`\n\nexport const ToolbarCard = styled(Card)`\n  z-index: 10;\n  line-height: 0;\n`\n\nexport const EditableCard = styled(Card)`\n  position: relative;\n  overflow: hidden;\n\n  & > [data-portal] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n\n    & > * {\n      pointer-events: initial;\n    }\n  }\n\n  &::selection,\n  *::selection {\n    background-color: transparent;\n  }\n`\n\nexport const Scroller = styled(ScrollContainer)`\n  position: relative;\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  & > * {\n    flex: 1;\n    min-height: auto;\n  }\n`\n\nexport const EditableContainer = styled(Container)`\n  /* @todo: calculate from theme */\n  /* max-width: 728px; */\n`\n\nexport const EditableWrapper = styled(Card)<{$isFullscreen: boolean; $readOnly?: boolean}>`\n  height: 100%;\n  width: 100%;\n  counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n  overflow: hidden;\n\n  & > div {\n    height: 100%;\n  }\n\n  & .pt-editable {\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    ${TEXT_LEVELS.map((l) => {\n      return css`\n        & > .pt-list-item-number[class~='pt-list-item-level-${l}'] {\n          counter-increment: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item-bullet + .pt-list-item-number,\n    & > .pt-list-item-number + .pt-list-item-bullet {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    & > :not(.pt-list-item) + .pt-list-item {\n      margin-top: ${({theme}) => theme.sanity.space[2]}px;\n    }\n\n    /* Reset the list count if the element is not a numbered list item */\n    & > :not(.pt-list-item-number) {\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    ${TEXT_LEVELS.slice(1).map((l) => {\n      return css`\n        & > .pt-list-item-level-${l} + .pt-list-item-level-${l - 1} {\n          counter-reset: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item + :not(.pt-list-item) {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n    }\n\n    & > :first-child {\n      padding-top: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 5 : 3]}px;\n    }\n\n    & > :last-child {\n      padding-bottom: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 9 : 5]}px;\n    }\n\n    /* & > .pt-block {\n      & .pt-inline-object {\n      }\n    } */\n\n    & .pt-drop-indicator {\n      pointer-events: none;\n      border: 1px solid var(--card-focus-ring-color) !important;\n      height: 0px !important;\n      border-radius: 1px;\n      margin-top: -3px;\n      left: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      right: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      width: calc(\n        100% -\n          ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5] * 2) : rem(theme.sanity.space[3] * 2)} + 2px\n      ) !important;\n    }\n  }\n`\n","import {usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\n\nexport function useSpellcheck(): boolean {\n  const editor = usePortableTextEditor()\n  return useMemo(() => {\n    // Chrome 96. has serious perf. issues with spellchecking\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=1271918\n    // This issue is verified fixed in Chrome 97.\n    const spellCheckOption = editor.portableTextFeatures.types.block.options?.spellCheck\n    const isChrome96 =\n      typeof navigator === 'undefined' ? false : /Chrome\\/96/.test(navigator.userAgent)\n    return spellCheckOption === undefined && isChrome96 === true ? false : spellCheckOption\n  }, [editor])\n}\n","import {PortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\n// This hook is used to scroll the editor selection into place when actively editing the document.\nexport function useScrollSelectionIntoView(scrollElement: HTMLElement | null) {\n  return useMemo(\n    () =>\n      (editor: PortableTextEditor, domRange: Range): void => {\n        const selection = PortableTextEditor.getSelection(editor)\n        if (selection) {\n          const leafEl = domRange.startContainer.parentElement\n          if (!leafEl) {\n            return\n          }\n          scrollIntoView(leafEl, {\n            scrollMode: 'if-needed',\n            boundary: scrollElement,\n            block: 'start',\n            inline: 'nearest',\n          })\n        }\n      },\n    [scrollElement]\n  )\n}\n","import {\n  HotkeyOptions,\n  PortableTextEditable,\n  RenderAnnotationFunction,\n  RenderBlockFunction,\n  RenderChildFunction,\n  RenderDecoratorFunction,\n  OnPasteFn,\n  OnCopyFn,\n  EditorSelection,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {BoundaryElementProvider, useBoundaryElement, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {Toolbar} from './toolbar'\nimport {Decorator} from './text'\nimport {\n  EditableCard,\n  EditableContainer,\n  EditableWrapper,\n  Root,\n  Scroller,\n  ToolbarCard,\n} from './Editor.styles'\nimport {useSpellcheck} from './hooks/useSpellCheck'\nimport {useScrollSelectionIntoView} from './hooks/useScrollSelectionIntoView'\n\ninterface EditorProps {\n  hotkeys: HotkeyOptions\n  initialSelection?: EditorSelection\n  isActive: boolean\n  isFullscreen: boolean\n  onCopy?: OnCopyFn\n  onItemOpen: (path: Path) => void\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  readOnly?: boolean\n  renderAnnotation: RenderAnnotationFunction\n  renderBlock: RenderBlockFunction\n  renderChild: RenderChildFunction\n  scrollElement: HTMLElement | null\n  setPortalElement?: (portalElement: HTMLDivElement | null) => void\n  setScrollElement: (scrollElement: HTMLElement | null) => void\n}\n\nconst renderDecorator: RenderDecoratorFunction = (mark, mType, attributes, defaultRender) => {\n  return <Decorator mark={mark}>{defaultRender()}</Decorator>\n}\n\nexport function Editor(props: EditorProps) {\n  const {\n    hotkeys,\n    initialSelection,\n    isActive,\n    isFullscreen,\n    onCopy,\n    onItemOpen,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    readOnly,\n    renderAnnotation,\n    renderBlock,\n    renderChild,\n    scrollElement,\n    setPortalElement,\n    setScrollElement,\n  } = props\n  const {isTopLayer} = useLayer()\n  const editableRef = useRef<HTMLDivElement | null>(null)\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Let escape close fullscreen mode\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (!isTopLayer || !isFullscreen) {\n          return\n        }\n        if (event.key === 'Escape') {\n          onToggleFullscreen()\n        }\n      },\n      [onToggleFullscreen, isFullscreen, isTopLayer]\n    )\n  )\n\n  // Keep the editor focused even though we are clicking on the background or the toolbar of the editor.\n  const handleMouseDown = useCallback((event: React.SyntheticEvent) => {\n    if (event.target instanceof Node && !editableRef.current?.contains(event.target)) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }, [])\n\n  const renderPlaceholder = useCallback(() => <>Empty</>, [])\n  const spellcheck = useSpellcheck()\n\n  const scrollSelectionIntoView = useScrollSelectionIntoView(scrollElement)\n\n  const editable = useMemo(\n    () => (\n      <PortableTextEditable\n        hotkeys={hotkeys}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        ref={editableRef}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        renderDecorator={renderDecorator}\n        renderPlaceholder={renderPlaceholder}\n        scrollSelectionIntoView={scrollSelectionIntoView}\n        selection={initialSelection}\n        spellCheck={spellcheck}\n      />\n    ),\n    [\n      hotkeys,\n      initialSelection,\n      onCopy,\n      onPaste,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      renderPlaceholder,\n      scrollSelectionIntoView,\n      spellcheck,\n    ]\n  )\n\n  const handleToolBarOnExpand = useCallback(\n    (relativePath: Path) => {\n      onItemOpen(path.concat(relativePath))\n    },\n    [onItemOpen, path]\n  )\n\n  return (\n    <Root $fullscreen={isFullscreen} data-testid=\"pt-editor\" onMouseDown={handleMouseDown}>\n      {isActive && (\n        <ToolbarCard data-testid=\"pt-editor__toolbar-card\" shadow={1}>\n          <Toolbar\n            isFullscreen={isFullscreen}\n            hotkeys={hotkeys}\n            onExpand={handleToolBarOnExpand}\n            readOnly={readOnly}\n            onToggleFullscreen={onToggleFullscreen}\n          />\n        </ToolbarCard>\n      )}\n\n      <EditableCard flex={1} tone={readOnly ? 'transparent' : 'default'}>\n        <Scroller ref={setScrollElement}>\n          <EditableContainer padding={isFullscreen ? 2 : 0} sizing=\"border\" width={1}>\n            <EditableWrapper\n              $isFullscreen={isFullscreen}\n              tone={readOnly ? 'transparent' : 'default'}\n            >\n              <BoundaryElementProvider element={isFullscreen ? scrollElement : boundaryElement}>\n                {editable}\n              </BoundaryElementProvider>\n            </EditableWrapper>\n          </EditableContainer>\n        </Scroller>\n\n        <div data-portal=\"\" ref={setPortalElement} />\n      </EditableCard>\n    </Root>\n  )\n}\n","// todo: get these utils from @sanity/ui instead\nexport function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Layer} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from '../../components/withFocusRing/helpers'\n\nexport const Root = styled.div(({theme}) => {\n  const {focusRing, input} = theme.sanity\n  const base = theme.sanity.color.base\n  const color = theme.sanity.color.input\n  const border = {\n    color: color.default.enabled.border,\n    width: input.border.width,\n  }\n\n  return css`\n    --input-box-shadow: ${focusRingBorderStyle(border)};\n\n    position: relative;\n\n    & [data-wrapper] {\n      overflow: hidden;\n      position: relative;\n      z-index: 1;\n      padding: ${input.border.width}px;\n    }\n\n    & [data-border] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: var(--input-box-shadow);\n      z-index: 2;\n      border-radius: 1px;\n      pointer-events: none;\n    }\n\n    &:not([data-read-only])[data-focused] [data-border] {\n      --input-box-shadow: ${focusRingStyle({\n        base,\n        border,\n        focusRing,\n      })};\n    }\n  `\n})\n\n// This element only wraps the input when in \"fullscreen\" mode\nexport const ExpandedLayer = styled(Layer)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`\n","import {useMemo} from 'react'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\n\n// This hook will create final hotkeys for the editor from on those from props.\nexport function useHotkeys(hotkeys: HotkeyOptions): HotkeyOptions {\n  const editor = usePortableTextEditor()\n\n  // Guard that hotkeys from props will be a stable object.\n  // If this props is defined inline and is always a new object, there will be issues with key handling and cursor!\n  const initialHotkeys = useMemo(() => hotkeys, [])\n  if (initialHotkeys !== hotkeys) {\n    console.warn(\n      'Make sure that hotkeys are a stable object across renders, or there will be issues with key handling in the Portable Text Editor.'\n    )\n  }\n  return useMemo(() => {\n    const defaultHotkeys: {marks: Record<string, string>} = {marks: {}}\n    const ptFeatures = PortableTextEditor.getPortableTextFeatures(editor)\n    ptFeatures.decorators.forEach((dec) => {\n      switch (dec.value) {\n        case 'strong':\n          defaultHotkeys.marks['mod+b'] = dec.value\n          break\n        case 'em':\n          defaultHotkeys.marks['mod+i'] = dec.value\n          break\n        case 'underline':\n          defaultHotkeys.marks['mod+u'] = dec.value\n          break\n        case 'code':\n          defaultHotkeys.marks[\"mod+'\"] = dec.value\n          break\n        default:\n      }\n    })\n    return {\n      marks: {...defaultHotkeys.marks, ...(initialHotkeys || {}).marks},\n      custom: initialHotkeys.custom,\n    }\n  }, [editor, initialHotkeys])\n}\n\n// If we want to have a hotkey to open up a focused object, we can use this:\n//\n// const handleOpenObjectHotkey = (\n//   event: React.BaseSyntheticEvent,\n//   ptEditor: PortableTextEditor\n// ) => {\n//   const selection = PortableTextEditor.getSelection(ptEditor)\n//   if (selection) {\n//     event.preventDefault()\n//     event.stopPropagation()\n//     const {focus} = selection\n//     const activeAnnotations = PortableTextEditor.activeAnnotations(ptEditor)\n//     const focusBlock = PortableTextEditor.focusBlock(ptEditor)\n//     const focusChild = PortableTextEditor.focusChild(ptEditor)\n//     if (activeAnnotations.length > 0) {\n//       onFocus([\n//         ...focus.path.slice(0, 1),\n//         'markDefs',\n//         {_key: activeAnnotations[0]._key},\n//         FOCUS_TERMINATOR,\n//       ])\n//       return\n//     }\n//     if (focusChild && PortableTextEditor.isVoid(ptEditor, focusChild)) {\n//       onFocus([...focus.path, FOCUS_TERMINATOR])\n//       return\n//     }\n//     if (focusBlock && PortableTextEditor.isVoid(ptEditor, focusBlock)) {\n//       onFocus([...focus.path.slice(0, 1), FOCUS_TERMINATOR])\n//     }\n//   }\n// }\n","import {ObjectSchemaType} from '@sanity/types'\n\nconst parseResponsiveWidth = (value: unknown): (number | 'auto')[] => {\n  if (Array.isArray(value)) {\n    return value.flatMap(parseResponsiveWidth)\n  }\n  if (typeof value === 'number') {\n    return [value]\n  }\n  return value === 'auto' ? ['auto'] : []\n}\nconst parseModalType = (value: unknown): 'popover' | 'dialog' | undefined => {\n  return value === 'dialog' || value === 'popover' ? value : undefined\n}\n\nexport function _getModalOption(\n  schemaType: ObjectSchemaType\n): {type?: 'dialog' | 'popover'; width: (number | 'auto')[]} | undefined {\n  const raw = schemaType.options?.modal\n  return typeof raw === 'object' && raw !== null\n    ? {\n        type: parseModalType(raw.type),\n        width: parseResponsiveWidth(raw.width),\n      }\n    : undefined\n}\n","import React, {useId} from 'react'\nimport {Box, Dialog, PortalProvider, usePortal} from '@sanity/ui'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {ModalWidth} from './types'\n\ninterface DefaultEditDialogProps {\n  title: string | React.ReactNode\n  onClose: () => void\n  children: React.ReactNode\n  width?: ModalWidth\n}\n\nexport function DefaultEditDialog(props: DefaultEditDialogProps) {\n  const {onClose, children, title, width = 1} = props\n\n  const dialogId = useId()\n  const portal = usePortal()\n\n  return (\n    <Dialog\n      __unstable_autoFocus\n      id={dialogId || ''}\n      onClose={onClose}\n      header={title}\n      portal=\"default\"\n      width={width}\n    >\n      <PresenceOverlay margins={[0, 0, 1, 0]}>\n        <Box padding={4}>\n          <PortalProvider element={portal.elements?.default}>{children}</PortalProvider>\n        </Box>\n      </PresenceOverlay>\n    </Dialog>\n  )\n}\n","export const debugElement =\n  process.env.NODE_ENV === 'production'\n    ? null\n    : {\n        getBoundingClientRect: () => {\n          const x = 200\n          const y = 200\n\n          return {\n            left: x,\n            top: y,\n            right: x,\n            bottom: y,\n            width: 0,\n            height: 0,\n          }\n        },\n      }\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Container,\n  Flex,\n  Popover,\n  PopoverProps,\n  PortalProvider,\n  Text,\n  useBoundaryElement,\n  useClickOutside,\n  useGlobalKeyDown,\n  usePortal,\n} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {FIXME} from '../../../../../FIXME'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {PortableTextEditorElement} from '../../Compositor'\nimport {debugElement} from './debug'\nimport {ModalWidth} from './types'\n\ninterface PopoverEditDialogProps {\n  children: React.ReactNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement>\n  onClose: () => void\n  scrollElement: HTMLElement\n  title: string | React.ReactNode\n  width?: ModalWidth\n}\n\nconst RootPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    visibility: hidden;\n    pointer-events: none;\n  }\n\n  & > div {\n    overflow: hidden;\n  }\n`\n\nconst ContentContainer = styled(Container)`\n  &:not([hidden]) {\n    display: flex;\n  }\n  direction: column;\n`\n\nconst ContentScrollerBox = styled(Box)`\n  /* Prevent overflow caused by change indicator */\n  overflow-x: hidden;\n  overflow-y: auto;\n`\n\nconst ContentHeaderBox = styled(Box)`\n  box-shadow: 0 1px 0 var(--card-shadow-outline-color);\n  position: relative;\n  z-index: 10;\n  min-height: auto;\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\nexport function PopoverEditDialog(props: PopoverEditDialogProps) {\n  const {width, elementRef, onClose, scrollElement} = props\n\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          onClose()\n        }\n      },\n      [onClose]\n    )\n  )\n\n  const [forceUpdate, setForceUpdate] = useState(0)\n  const virtualElement = useMemo(() => {\n    if (!elementRef?.current?.getBoundingClientRect()) {\n      return null\n    }\n\n    return {\n      contextElement: elementRef.current || undefined,\n      getBoundingClientRect: () => {\n        return elementRef.current?.getBoundingClientRect() || null\n      },\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementRef?.current, forceUpdate])\n\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleScrollOrResize = useCallback(() => {\n    setForceUpdate(forceUpdate + 1)\n  }, [forceUpdate])\n\n  useEffect(() => {\n    if (scrollElement) {\n      scrollElement.addEventListener('scroll', handleScrollOrResize, true)\n    }\n    return () => {\n      if (scrollElement) {\n        scrollElement.removeEventListener('scroll', handleScrollOrResize, true)\n      }\n    }\n  }, [handleScrollOrResize, scrollElement])\n\n  return (\n    <RootPopover\n      constrainSize\n      content={<Content {...props} rootElement={rootElement} width={width} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      placement=\"bottom\"\n      open\n      portal=\"default\"\n      ref={setRootElement}\n      referenceElement={virtualElement || (debugElement as FIXME)}\n    />\n  )\n}\n\nfunction Content(\n  props: PopoverEditDialogProps & {\n    rootElement: HTMLDivElement | null\n  }\n) {\n  const {onClose, rootElement, width = 0, title} = props\n  const {element: boundaryElement} = useBoundaryElement()\n  const portal = usePortal()\n\n  useClickOutside(onClose, [rootElement], boundaryElement)\n\n  return (\n    <ContentContainer width={width}>\n      <Flex direction=\"column\" flex={1}>\n        <ContentHeaderBox padding={1}>\n          <Flex align=\"center\">\n            <Box flex={1} padding={2}>\n              <Text weight=\"semibold\">{title}</Text>\n            </Box>\n\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={onClose} padding={2} />\n          </Flex>\n        </ContentHeaderBox>\n        <ContentScrollerBox flex={1}>\n          <PresenceOverlay margins={[0, 0, 1, 0]}>\n            <Box padding={3}>\n              <PortalProvider element={portal.elements?.default}>{props.children}</PortalProvider>\n            </Box>\n          </PresenceOverlay>\n        </ContentScrollerBox>\n      </Flex>\n    </ContentContainer>\n  )\n}\n","import {\n  EditorSelection,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {_getModalOption} from '../helpers'\nimport {PortableTextMemberItem} from '../../PortableTextInput'\nimport {DefaultEditDialog} from './DefaultEditDialog'\nimport {PopoverEditDialog} from './PopoverEditDialog'\n\nexport function ObjectEditModal(props: {\n  children: React.ReactNode\n  kind: PortableTextMemberItem['kind']\n  memberItem: PortableTextMemberItem\n  onClose: () => void\n  scrollElement: HTMLElement\n}) {\n  const {memberItem, onClose, scrollElement, kind} = props\n  const {schemaType} = memberItem.node\n  const modalOption = useMemo(() => _getModalOption(schemaType), [schemaType])\n\n  const modalType = useMemo(() => {\n    if (modalOption?.type) return modalOption.type\n\n    // If the object is inline or an annotation, then default to \"popover\"\n    return kind === 'inlineObject' || kind === 'annotation' ? 'popover' : 'dialog'\n  }, [kind, modalOption])\n\n  const [firstField, setFirstField] = useState<HTMLElement | null>(null)\n  const editor = usePortableTextEditor()\n  const initialSelection = useRef<EditorSelection | null>(PortableTextEditor.getSelection(editor))\n\n  const handleClose = useCallback(() => {\n    // Force a new selection here as the selection is a callback dep. for showing the popup\n    PortableTextEditor.focus(editor)\n    PortableTextEditor.select(editor, initialSelection.current)\n    onClose()\n  }, [editor, onClose])\n\n  const title = <>Edit {memberItem.node.schemaType.title}</>\n\n  // Set focus on the first field\n  useEffect(() => {\n    if (firstField) {\n      return\n    }\n    const firstFieldMember = memberItem.node.members.find((m) => m.kind === 'field')\n    if (firstFieldMember && firstFieldMember.kind === 'field') {\n      const firstFieldElm = document.getElementById(firstFieldMember.field.id) as HTMLElement | null\n      if (firstFieldElm) {\n        setFirstField(firstFieldElm)\n        firstFieldElm.focus()\n      }\n    }\n  }, [firstField, memberItem])\n\n  if (modalType === 'popover') {\n    return (\n      <PopoverEditDialog\n        elementRef={memberItem.elementRef}\n        onClose={handleClose}\n        width={modalOption?.width}\n        scrollElement={scrollElement}\n        title={title}\n      >\n        {props.children}\n      </PopoverEditDialog>\n    )\n  }\n\n  return (\n    <DefaultEditDialog title={title} onClose={handleClose} width={modalOption?.width}>\n      {props.children}\n    </DefaultEditDialog>\n  )\n}\n","import {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {useEffect, useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {usePortableTextMemberItems} from './usePortableTextMembers'\n\ninterface Props {\n  editorRootPath: Path\n  hasFocus: boolean\n  scrollElement: HTMLElement | null\n  onItemClose: () => void\n}\n\n// This hook will scroll to the \"opened\" portable text object's editor dom node.\n// If the opened item is a regular text block, place the cursor there as well.\nexport function useScrollToOpenedMember(props: Props): void {\n  const {editorRootPath, scrollElement, hasFocus, onItemClose} = props\n  const portableTextMemberItems = usePortableTextMemberItems()\n  const editor = usePortableTextEditor()\n\n  // Find the opened item with the highest path\n  const memberItem = useMemo(() => {\n    return portableTextMemberItems\n      .filter((item) => item.member.open)\n      .sort((a, b) => b.member.item.path.length - a.member.item.path.length)[0]\n  }, [portableTextMemberItems])\n\n  useEffect(() => {\n    // If the editor is already is focused, don't interfere.\n    if (hasFocus) {\n      return\n    }\n    if (memberItem?.elementRef?.current) {\n      scrollIntoView(memberItem.elementRef?.current, {\n        boundary: scrollElement,\n        scrollMode: 'if-needed',\n      })\n      // If this is a text block, place the cursor in the beginning of it.\n      if (memberItem.kind === 'textBlock') {\n        const relativePath = memberItem.member.item.path.slice(editorRootPath.length)\n        PortableTextEditor.select(editor, {\n          anchor: {path: relativePath, offset: 0},\n          focus: {path: relativePath, offset: 0},\n        })\n        PortableTextEditor.focus(editor)\n        // \"auto-close\" regular text blocks or they get sticky here when trying to focus on an other field\n        // There is no natural way of closing them (however opening something else would close them)\n        onItemClose()\n      }\n    }\n  }, [editor, hasFocus, editorRootPath.length, memberItem, scrollElement, onItemClose])\n}\n","import React, {useState, useMemo, useCallback} from 'react'\nimport {\n  EditorSelection,\n  OnCopyFn,\n  OnPasteFn,\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n  HotkeyOptions,\n  RenderAttributes,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {\n  BoundaryElementProvider,\n  Portal,\n  PortalProvider,\n  useBoundaryElement,\n  usePortal,\n} from '@sanity/ui'\nimport {ArrayOfObjectsInputProps, RenderCustomMarkers} from '../../types'\nimport {FormInput} from '../../components'\nimport {ActivateOnFocus} from '../../components/ActivateOnFocus/ActivateOnFocus'\nimport {EMPTY_ARRAY} from '../../../util'\nimport {FIXME} from '../../../FIXME'\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {BlockObject} from './object/BlockObject'\nimport {InlineObject} from './object/InlineObject'\nimport {Annotation, TextBlock} from './text'\nimport {RenderBlockActionsCallback} from './types'\nimport {Editor} from './Editor'\nimport {ExpandedLayer, Root} from './Compositor.styles'\nimport {useHotkeys} from './hooks/useHotKeys'\nimport {ObjectEditModal} from './object/renderers/ObjectEditModal'\nimport {useScrollToOpenedMember} from './hooks/useScrollToOpenedMember'\nimport {usePortableTextMemberItems} from './hooks/usePortableTextMembers'\nimport {_isBlockType} from './_helpers'\n\ninterface InputProps extends ArrayOfObjectsInputProps<PortableTextBlock> {\n  hasFocus: boolean\n  hotkeys?: HotkeyOptions\n  isActive: boolean\n  isFullscreen: boolean\n  onActivate: () => void\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\n/** @internal */\nexport type PortableTextEditorElement = HTMLDivElement | HTMLSpanElement | null\n\n/** @internal */\nexport function Compositor(props: InputProps) {\n  const {\n    changed,\n    focusPath = EMPTY_ARRAY,\n    focused,\n    hasFocus,\n    hotkeys,\n    isActive,\n    isFullscreen,\n    onChange,\n    onCopy,\n    onActivate,\n    onItemOpen,\n    onItemClose,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    renderBlockActions,\n    renderCustomMarkers,\n    value,\n    readOnly,\n    renderPreview,\n  } = props\n\n  const editor = usePortableTextEditor()\n\n  const [wrapperElement, setWrapperElement] = useState<HTMLDivElement | null>(null)\n  const [scrollElement, setScrollElement] = useState<HTMLElement | null>(null)\n  const portableTextMemberItems = usePortableTextMemberItems()\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Scroll to the DOM element of the \"opened\" portable text member when relevant.\n  useScrollToOpenedMember({\n    hasFocus,\n    editorRootPath: path,\n    scrollElement,\n    onItemClose,\n  })\n\n  const handleToggleFullscreen = useCallback(() => {\n    onToggleFullscreen()\n  }, [onToggleFullscreen])\n\n  const hotkeysWithFullscreenToggle = useMemo(\n    () => ({\n      ...hotkeys,\n      custom: {\n        'mod+enter': onToggleFullscreen,\n        ...(hotkeys?.custom || {}),\n      },\n    }),\n\n    [hotkeys, onToggleFullscreen]\n  )\n\n  const editorHotkeys = useHotkeys(hotkeysWithFullscreenToggle)\n\n  const ptFeatures = useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n  const hasContent = !!value\n\n  const initialSelection = useMemo(\n    (): EditorSelection =>\n      focusPath.length > 0\n        ? {\n            anchor: {path: focusPath, offset: 0},\n            focus: {path: focusPath, offset: 0},\n          }\n        : null,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [] // Only initial\n  )\n\n  const renderBlock = useCallback(\n    (\n      block: PortableTextBlock,\n      blockType: ObjectSchemaType,\n      attributes: RenderAttributes,\n      defaultRender: (b: PortableTextBlock) => JSX.Element\n    ) => {\n      const isTextBlock = block._type === ptFeatures.types.block.name\n      if (isTextBlock) {\n        return (\n          <TextBlock\n            attributes={attributes}\n            block={block}\n            isFullscreen={isFullscreen}\n            onChange={onChange}\n            readOnly={readOnly}\n            renderBlockActions={hasContent ? renderBlockActions : undefined}\n            renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          >\n            {defaultRender(block)}\n          </TextBlock>\n        )\n      }\n\n      return (\n        <BlockObject\n          attributes={attributes}\n          block={block}\n          isFullscreen={isFullscreen}\n          onChange={onChange}\n          onItemOpen={onItemOpen}\n          readOnly={readOnly}\n          renderBlockActions={hasContent ? renderBlockActions : undefined}\n          renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          renderPreview={renderPreview}\n          type={blockType}\n        />\n      )\n    },\n    [\n      hasContent,\n      isFullscreen,\n      onChange,\n      onItemOpen,\n      ptFeatures.types.block.name,\n      readOnly,\n      renderBlockActions,\n      renderCustomMarkers,\n      renderPreview,\n    ]\n  )\n\n  const renderChild = useCallback(\n    (child: any, childType: any, attributes: any, defaultRender: any) => {\n      const isSpan = child._type === ptFeatures.types.span.name\n      if (isSpan) {\n        return defaultRender(child)\n      }\n\n      return (\n        <InlineObject\n          attributes={attributes}\n          onItemOpen={onItemOpen}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          type={childType}\n          value={child}\n          renderPreview={renderPreview}\n        />\n      )\n    },\n    [\n      onItemOpen,\n      ptFeatures.types.span.name,\n      readOnly,\n      renderCustomMarkers,\n      renderPreview,\n      scrollElement,\n    ]\n  )\n\n  const renderAnnotation = useCallback(\n    (annotation: any, annotationType: any, attributes: any, defaultRender: any) => {\n      return (\n        <Annotation\n          attributes={attributes}\n          onItemOpen={onItemOpen}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          value={annotation}\n          type={annotationType}\n        >\n          {defaultRender()}\n        </Annotation>\n      )\n    },\n    [onItemOpen, readOnly, renderCustomMarkers, scrollElement]\n  )\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const openMemberItems = useMemo(\n    () => portableTextMemberItems.filter((m) => m.member.open && !_isBlockType(m.node.schemaType)),\n    [portableTextMemberItems]\n  )\n\n  const editorNode = useMemo(\n    () => (\n      <Editor\n        hotkeys={editorHotkeys}\n        initialSelection={initialSelection}\n        isActive={isActive}\n        isFullscreen={isFullscreen}\n        onItemOpen={onItemOpen}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        onToggleFullscreen={handleToggleFullscreen}\n        path={path}\n        readOnly={readOnly}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        setPortalElement={setPortalElement}\n        scrollElement={scrollElement}\n        setScrollElement={setScrollElement}\n      />\n    ),\n\n    // Keep only stable ones here!\n    [\n      editorHotkeys,\n      handleToggleFullscreen,\n      initialSelection,\n      isActive,\n      isFullscreen,\n      onCopy,\n      onItemOpen,\n      onPaste,\n      path,\n      readOnly,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      scrollElement,\n    ]\n  )\n\n  const boundaryElm = isFullscreen ? scrollElement : boundaryElement\n\n  const handleEditModalClose = useCallback(() => {\n    onItemClose()\n  }, [onItemClose])\n\n  const children = useMemo(\n    () =>\n      boundaryElm && (\n        <>\n          {editorNode}\n          <BoundaryElementProvider element={boundaryElm}>\n            {openMemberItems.map((dMemberItem) => {\n              return (\n                <ObjectEditModal\n                  kind={dMemberItem.kind}\n                  key={dMemberItem.member.key}\n                  memberItem={dMemberItem}\n                  onClose={handleEditModalClose}\n                  scrollElement={boundaryElm}\n                >\n                  <FormInput absolutePath={dMemberItem.node.path} {...(props as FIXME)} />\n                </ObjectEditModal>\n              )\n            })}\n          </BoundaryElementProvider>\n        </>\n      ),\n    [boundaryElm, editorNode, openMemberItems, props, handleEditModalClose]\n  )\n\n  const portal = usePortal()\n  const portalElements = useMemo(\n    () => ({\n      collapsed: wrapperElement,\n      default: portal.element,\n      editor: portalElement,\n      expanded: portal.element,\n    }),\n\n    [portal.element, portalElement, wrapperElement]\n  )\n\n  return (\n    <PortalProvider __unstable_elements={portalElements}>\n      <ActivateOnFocus onActivate={onActivate} isOverlayActive={!isActive}>\n        <ChangeIndicator\n          disabled={isFullscreen}\n          hasFocus={Boolean(focused)}\n          isChanged={changed}\n          path={path}\n        >\n          <Root data-focused={hasFocus ? '' : undefined} data-read-only={readOnly ? '' : undefined}>\n            <div data-wrapper=\"\" ref={setWrapperElement}>\n              <Portal __unstable_name={isFullscreen ? 'expanded' : 'collapsed'}>\n                {isFullscreen ? <ExpandedLayer>{children}</ExpandedLayer> : children}\n              </Portal>\n            </div>\n            <div data-border=\"\" />\n          </Root>\n        </ChangeIndicator>\n      </ActivateOnFocus>\n    </PortalProvider>\n  )\n}\n","import {InvalidValueResolution} from '@sanity/portable-text-editor'\nimport {Box, Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Alert} from '../../components/Alert'\n\ninterface InvalidValueProps {\n  onChange: (...args: any[]) => any\n  onIgnore: () => void\n  resolution: InvalidValueResolution\n}\n\nexport function InvalidValue(props: InvalidValueProps) {\n  const {onChange, onIgnore, resolution} = props\n\n  const handleAction = useCallback(() => {\n    if (resolution) {\n      onChange({type: 'mutation', patches: resolution.patches})\n    }\n  }, [onChange, resolution])\n\n  if (!resolution) return null\n\n  return (\n    <Alert\n      suffix={\n        <Stack padding={2}>\n          {resolution.action && (\n            <Grid columns={[1, 2]} gap={1}>\n              <Button mode=\"ghost\" onClick={onIgnore} text=\"Ignore\" />\n              <Button onClick={handleAction} text={resolution.action} tone=\"caution\" />\n            </Grid>\n          )}\n\n          <Box padding={3}>\n            {resolution.action && (\n              <Text as=\"p\" muted size={1}>\n                NOTE: Its generally safe to perform the action above, but if you are in doubt, get\n                in touch with those responsible for configuring your studio.\n              </Text>\n            )}\n          </Box>\n        </Stack>\n      }\n      title={<>Invalid Portable Text Editor value</>}\n    >\n      <Stack space={3}>\n        <Text as=\"p\" muted size={1}>\n          {resolution.description}\n        </Text>\n\n        <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n          <Code language=\"json\">{JSON.stringify(resolution.item, null, 2)}</Code>\n        </Card>\n      </Stack>\n    </Alert>\n  )\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {get, find} from 'lodash'\nimport {useCallback} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {isRecord} from '../../../util'\nimport {FormPatch} from '../../patch'\nimport {useFormBuilder} from '../../useFormBuilder'\n\n/**\n * @internal\n */\nexport interface PatchesData {\n  patches: Array<FormPatch>\n  shouldReset: boolean\n  snapshot: any\n}\n\n/**\n * @internal\n */\nexport type PatchesSubscriber = (data: PatchesData) => void\n\n/**\n * @internal\n */\nexport function usePatches(props: {path: Path}): {\n  subscribe: (subscriber: PatchesSubscriber) => () => void\n} {\n  const {path} = props\n  const {patchChannel} = useFormBuilder().__internal\n\n  const subscribe = useCallback(\n    (subscriber: PatchesSubscriber) => {\n      return patchChannel.subscribe(({snapshot, patches}) => {\n        const filteredPatches = patches\n          .filter((patch) => _startsWith(patch.path, path))\n          .map((patch) => ({\n            ...patch,\n            path: patch.path.slice(path.length),\n          }))\n\n        if (filteredPatches.length) {\n          subscriber({\n            shouldReset: _shouldReset(path, patches),\n            snapshot: isRecord(snapshot) ? _getValueAtPath(snapshot, path) : {},\n            patches: filteredPatches,\n          })\n        }\n      })\n    },\n    [path, patchChannel]\n  )\n\n  return {subscribe}\n}\n\nfunction _isSegmentEqual(segment1: PathSegment, segment2: PathSegment) {\n  const segment1Type = typeof segment1\n  if (segment1Type !== typeof segment2) {\n    return false\n  }\n  if (segment1Type === 'object') {\n    return shallowEquals(segment1, segment2)\n  }\n  return segment1 === segment2\n}\n\nfunction _startsWith(subjectPath: Path, checkPath: Path) {\n  if (subjectPath === checkPath) {\n    return true\n  }\n  if (!Array.isArray(subjectPath) || !Array.isArray(checkPath)) {\n    return false\n  }\n  if (subjectPath.length < checkPath.length) {\n    return false\n  }\n  for (let i = 0, len = checkPath.length; i < len; i++) {\n    if (!_isSegmentEqual(checkPath[i], subjectPath[i])) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction _isAncestor(path1: Path, path2: Path) {\n  return path1.length === 0 || (_startsWith(path2, path1) && !_startsWith(path1, path2))\n}\n\nfunction _shouldReset(path: Path, patches: FormPatch[]) {\n  return patches.some(\n    (patch) => _isAncestor(patch.path, path) && (patch.type === 'set' || patch.type === 'unset')\n  )\n}\n\nfunction _getValueAtPath(value: Record<string, unknown>, path: Path) {\n  return path.reduce((result, segment) => {\n    if (typeof segment === 'object') {\n      return find(result, segment)\n    }\n\n    return get(result, segment)\n  }, value)\n}\n","import {ArraySchemaType} from '@sanity/types'\nimport {\n  EditorChange,\n  OnCopyFn,\n  OnPasteFn,\n  Patch as EditorPatch,\n  PortableTextBlock,\n  PortableTextEditor,\n  HotkeyOptions,\n  InvalidValue,\n  EditorSelection,\n  Patch,\n} from '@sanity/portable-text-editor'\nimport React, {\n  useEffect,\n  useState,\n  useMemo,\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  createRef,\n} from 'react'\nimport {Subject} from 'rxjs'\nimport {Box, useToast} from '@sanity/ui'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {debounce} from 'lodash'\nimport {FormPatch, SANITY_PATCH_TYPE} from '../../patch'\nimport {ArrayOfObjectsItemMember, ObjectFormNode} from '../../store'\nimport type {ArrayOfObjectsInputProps, PortableTextMarker, RenderCustomMarkers} from '../../types'\nimport {isMemberArrayOfObjects} from '../../members/fields/asserters'\nimport {EMPTY_ARRAY} from '../../../util'\nimport {pathToString} from '../../../field'\nimport {FIXME} from '../../../FIXME'\nimport {Compositor, PortableTextEditorElement} from './Compositor'\nimport {InvalidValue as RespondToInvalidContent} from './InvalidValue'\nimport {usePatches} from './usePatches'\nimport {RenderBlockActionsCallback} from './types'\nimport {PortableTextMarkersProvider} from './contexts/PortableTextMarkers'\nimport {PortableTextMemberItemsProvider} from './contexts/PortableTextMembers'\nimport {_isArrayOfObjectsFieldMember, _isBlockType} from './_helpers'\n\n/** @internal */\nexport type PTObjectMember = ArrayOfObjectsItemMember\n\n/** @internal */\nexport interface PortableTextMemberItem {\n  kind: 'annotation' | 'textBlock' | 'objectBlock' | 'inlineObject'\n  key: string\n  member: PTObjectMember\n  node: ObjectFormNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement> | undefined\n}\n\n/**\n * @alpha\n */\nexport interface PortableTextInputProps\n  extends ArrayOfObjectsInputProps<PortableTextBlock, ArraySchemaType> {\n  hotkeys?: HotkeyOptions\n  markers?: PortableTextMarker[]\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\n/**\n * The root Portable Text Input component\n *\n * @alpha\n */\nexport function PortableTextInput(props: PortableTextInputProps) {\n  const {\n    focused,\n    focusPath,\n    hotkeys,\n    markers = EMPTY_ARRAY,\n    members,\n    onChange,\n    onCopy,\n    onPathFocus,\n    onInsert,\n    onPaste,\n    path,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    schemaType: type,\n    value,\n    elementProps,\n  } = props\n\n  // Make the PTE focusable from the outside\n  useImperativeHandle(elementProps.ref, () => ({\n    focus() {\n      if (editorRef.current) {\n        PortableTextEditor.focus(editorRef.current)\n      }\n    },\n  }))\n\n  const {subscribe} = usePatches({path})\n  const editorRef = useRef<PortableTextEditor | null>(null)\n  const [hasFocus, setHasFocus] = useState(false)\n  const [ignoreValidationError, setIgnoreValidationError] = useState(false)\n  const [invalidValue, setInvalidValue] = useState<InvalidValue | null>(null)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [isActive, setIsActive] = useState(false)\n\n  // Set as active whenever we have focus inside the editor.\n  useEffect(() => {\n    if (hasFocus || focusPath.length > 1) {\n      setIsActive(true)\n    }\n  }, [hasFocus, focusPath])\n\n  const toast = useToast()\n  const portableTextMemberItemsRef: React.MutableRefObject<PortableTextMemberItem[]> = useRef([])\n\n  // Memoized patch stream\n  const patchSubject: Subject<{\n    patches: EditorPatch[]\n    snapshot: PortableTextBlock[] | undefined\n  }> = useMemo(() => new Subject(), [])\n  const remotePatch$ = useMemo(() => patchSubject.asObservable(), [patchSubject])\n\n  const innerElementRef = useRef<HTMLDivElement | null>(null)\n\n  const handleToggleFullscreen = useCallback(() => {\n    if (editorRef.current) {\n      const prevSel = PortableTextEditor.getSelection(editorRef.current)\n      setIsFullscreen((v) => !v)\n      setTimeout(() => {\n        if (editorRef.current) {\n          PortableTextEditor.focus(editorRef.current)\n          if (prevSel) {\n            PortableTextEditor.select(editorRef.current, {...prevSel})\n          }\n        }\n      })\n    }\n  }, [])\n\n  // Reset invalidValue if new value is coming in from props\n  useEffect(() => {\n    if (invalidValue && value !== invalidValue.value) {\n      setInvalidValue(null)\n    }\n  }, [invalidValue, value])\n\n  // Subscribe to patches\n  useEffect(() => {\n    return subscribe(({patches, snapshot}): void => {\n      patchSubject.next({patches, snapshot})\n    })\n  }, [patchSubject, subscribe])\n\n  // Populate the portableTextMembers Map\n  const portableTextMemberItems: PortableTextMemberItem[] = useMemo(() => {\n    const result: {\n      kind: PortableTextMemberItem['kind']\n      member: PTObjectMember\n      node: ObjectFormNode\n    }[] = []\n\n    for (const member of members) {\n      if (member.kind === 'item') {\n        if (!_isBlockType(member.item.schemaType)) {\n          result.push({kind: 'objectBlock', member, node: member.item})\n        } else if (member.item.validation.length > 0 || member.item.changed) {\n          // Only text blocks that have validation or changes\n          result.push({kind: 'textBlock', member, node: member.item})\n        }\n\n        if (_isBlockType(member.item.schemaType)) {\n          // Inline objects\n          const childrenField = member.item.members.find(\n            (f) => f.kind === 'field' && f.name === 'children'\n          )\n\n          if (\n            childrenField &&\n            childrenField.kind === 'field' &&\n            isMemberArrayOfObjects(childrenField)\n          ) {\n            // eslint-disable-next-line max-depth\n            for (const child of childrenField.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.name !== 'span') {\n                result.push({kind: 'inlineObject', member: child, node: child.item})\n              }\n            }\n          }\n\n          // Markdefs\n          const markDefArrayMember = member.item.members\n            .filter(_isArrayOfObjectsFieldMember)\n            .find((f) => f.name === 'markDefs')\n\n          if (markDefArrayMember) {\n            // eslint-disable-next-line max-depth\n            for (const child of markDefArrayMember.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.jsonType === 'object') {\n                result.push({\n                  kind: 'annotation',\n                  member: child,\n                  node: child.item,\n                })\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const items: PortableTextMemberItem[] = result.map((r) => {\n      const key = pathToString(r.node.path.slice(path.length))\n      const existingItem = portableTextMemberItemsRef.current.find((ref) => ref.key === key)\n\n      if (existingItem) {\n        existingItem.member = r.member\n        existingItem.node = r.node\n        return existingItem\n      }\n\n      return {\n        kind: r.kind,\n        key,\n        member: r.member,\n        node: r.node,\n        elementRef: createRef<PortableTextEditorElement>(),\n      }\n    })\n\n    portableTextMemberItemsRef.current = items\n\n    return items\n  }, [members, path])\n\n  const hasOpenItem = useMemo(() => {\n    return portableTextMemberItems.some((item) => item.member.open)\n  }, [portableTextMemberItems])\n\n  // Sets the focusPath from editor selection (when typing, moving the cursor, clicking around)\n  // This doesn't need to be immediate, so debounce it as it impacts performance.\n  const setFocusPathDebounced = useMemo(\n    () =>\n      debounce(\n        (sel: EditorSelection) => {\n          if (sel && hasFocus) onPathFocus(sel.focus.path)\n        },\n        500,\n        {trailing: true, leading: false}\n      ),\n    [hasFocus, onPathFocus]\n  )\n\n  // Handle editor changes\n  const handleEditorChange = useCallback(\n    (change: EditorChange): void => {\n      switch (change.type) {\n        case 'mutation':\n          onChange(toFormPatches(change.patches))\n          break\n        case 'selection':\n          setFocusPathDebounced(change.selection)\n          break\n        case 'focus':\n          setHasFocus(true)\n          break\n        case 'blur':\n          setHasFocus(false)\n          break\n        case 'undo':\n        case 'redo':\n          onChange(toFormPatches(change.patches))\n          break\n        case 'invalidValue':\n          setInvalidValue(change)\n          break\n        case 'error':\n          toast.push({\n            status: change.level,\n            description: change.description,\n          })\n          break\n        default:\n      }\n    },\n    [onChange, toast, setFocusPathDebounced]\n  )\n\n  const handleIgnoreInvalidValue = useCallback((): void => {\n    setIgnoreValidationError(true)\n  }, [])\n\n  const respondToInvalidContent = useMemo(() => {\n    if (invalidValue && invalidValue.resolution) {\n      return (\n        <Box marginBottom={2}>\n          <RespondToInvalidContent\n            onChange={handleEditorChange}\n            onIgnore={handleIgnoreInvalidValue}\n            resolution={invalidValue.resolution}\n          />\n        </Box>\n      )\n    }\n    return null\n  }, [handleEditorChange, handleIgnoreInvalidValue, invalidValue])\n\n  const handleActivate = useCallback((): void => {\n    if (!isActive) {\n      setIsActive(true)\n      if (!hasFocus) {\n        if (editorRef.current) {\n          PortableTextEditor.focus(editorRef.current)\n        }\n        setHasFocus(true)\n      }\n    }\n  }, [hasFocus, isActive])\n\n  // If the editor that has an opened item and isn't focused - scroll to the input if needed.\n  useEffect(() => {\n    if (!hasFocus && hasOpenItem && innerElementRef.current) {\n      scrollIntoView(innerElementRef.current, {\n        scrollMode: 'if-needed',\n      })\n    }\n  }, [focused, hasFocus, hasOpenItem])\n\n  return (\n    <Box ref={innerElementRef}>\n      {!ignoreValidationError && respondToInvalidContent}\n      {(!invalidValue || ignoreValidationError) && (\n        <PortableTextMarkersProvider markers={markers}>\n          <PortableTextMemberItemsProvider memberItems={portableTextMemberItems}>\n            <PortableTextEditor\n              ref={editorRef}\n              incomingPatches$={remotePatch$}\n              onChange={handleEditorChange}\n              maxBlocks={undefined} // TODO: from schema?\n              readOnly={readOnly}\n              type={type as FIXME}\n              value={value}\n            >\n              <Compositor\n                {...props}\n                focused={focused}\n                focusPath={focusPath}\n                hasFocus={hasFocus}\n                hotkeys={hotkeys}\n                isActive={isActive}\n                isFullscreen={isFullscreen}\n                onActivate={handleActivate}\n                onChange={onChange}\n                onCopy={onCopy}\n                onInsert={onInsert}\n                onPaste={onPaste}\n                onToggleFullscreen={handleToggleFullscreen}\n                readOnly={readOnly}\n                renderBlockActions={renderBlockActions}\n                renderCustomMarkers={renderCustomMarkers}\n                value={value}\n              />\n            </PortableTextEditor>\n          </PortableTextMemberItemsProvider>\n        </PortableTextMarkersProvider>\n      )}\n    </Box>\n  )\n}\n\nfunction toFormPatches(patches: any) {\n  return patches.map((p: Patch) => ({...p, patchType: SANITY_PATCH_TYPE})) as FormPatch[]\n}\n","import {\n  isArrayOfObjectsSchemaType,\n  isArrayOfPrimitivesSchemaType,\n  isBooleanSchemaType,\n  isNumberSchemaType,\n  isObjectSchemaType,\n  isStringSchemaType,\n} from '@sanity/types'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  BooleanInputProps,\n  InputProps,\n  NumberInputProps,\n  ObjectInputProps,\n  StringInputProps,\n} from './inputProps'\nimport {ItemProps, ObjectItemProps} from './itemProps'\n\n/** @beta */\nexport function isObjectItemProps(\n  item: ItemProps | Omit<ItemProps, 'renderDefault'>\n): item is ObjectItemProps {\n  return isObjectSchemaType(item.schemaType)\n}\n\n/** @beta */\nexport function isObjectInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isStringInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is StringInputProps {\n  return isStringSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isNumberInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is NumberInputProps {\n  return isNumberSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isBooleanInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is BooleanInputProps {\n  return isBooleanSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isArrayOfObjectsInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ArrayOfObjectsInputProps {\n  return isArrayOfObjectsSchemaType(inputProps.schemaType)\n}\n\n/** @beta */\nexport function isArrayOfPrimitivesInputProps(\n  inputProps: InputProps | Omit<InputProps, 'renderDefault'>\n): inputProps is ArrayOfPrimitivesInputProps {\n  return isArrayOfPrimitivesSchemaType(inputProps.schemaType)\n}\n","import React, {ComponentType} from 'react'\nimport type {SortableContainerProps} from '@rexxars/react-sortable-hoc'\nimport {SortableContainer, SortableElement, SortableHandle} from '@rexxars/react-sortable-hoc'\nimport {FIXME} from '../../../../FIXME'\n\nexport const MOVING_ITEM_CLASS_NAME = 'moving'\nexport const DRAG_HANDLE_ATTRIBUTE = 'data-drag-handle'\n\n// higher order components to make a sortable list/item components\ntype ExposedSortableProps = {\n  onSortStart?: () => void\n  onSortEnd?: (event: {newIndex: number; oldIndex: number}) => void\n}\n\nexport function sortableHandle<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props> {\n  return SortableHandle(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nexport function sortableItem<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props & {index: number}> {\n  return SortableElement(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nfunction sortableContainer<Props>(\n  Component: React.ComponentType<Props>,\n  options: SortableContainerProps\n) {\n  const Container = SortableContainer(\n    React.forwardRef(function Sortable(\n      props: Props & ExposedSortableProps,\n      forwardedRef: React.ForwardedRef<React.ComponentType<Props>>\n    ) {\n      return <Component {...props} ref={forwardedRef} />\n    })\n  ) as FIXME as React.ComponentType<SortableContainerProps> // there are some wonky typings from react-sortable-hoc\n\n  return React.forwardRef(function SortableList(\n    props: Props & ExposedSortableProps,\n    ref: React.ForwardedRef<React.ComponentType<Props>>\n  ) {\n    return <Container {...options} {...props} ref={ref} />\n  })\n}\n\nconst KeyCode = {\n  Space: 32,\n  Enter: 13,\n  Esc: 27,\n  Up: 38,\n  Left: 37,\n  Right: 39,\n  Down: 40,\n}\n\nconst KEYCODES = {\n  lift: [KeyCode.Space, KeyCode.Enter],\n  drop: [KeyCode.Space, KeyCode.Enter],\n  cancel: [KeyCode.Esc],\n  up: [KeyCode.Left, KeyCode.Up],\n  down: [KeyCode.Right, KeyCode.Down],\n}\n\nexport function sortableList<Props>(Component: React.ComponentType<Props>) {\n  return sortableContainer(Component, {\n    helperClass: MOVING_ITEM_CLASS_NAME,\n    keyCodes: KEYCODES,\n    axis: 'y',\n    lockAxis: 'y',\n    useDragHandle: true,\n    shouldCancelStart,\n  }) as any as ComponentType<Props & ExposedSortableProps>\n}\n\n// Cancel sorting if the event target is not drag handle\nfunction shouldCancelStart(event: React.UIEvent<HTMLElement>) {\n  return !isDragHandle(event.target as HTMLElement)\n}\n\nfunction isDragHandle(element: HTMLElement) {\n  return element.matches(`[${DRAG_HANDLE_ATTRIBUTE}=\"true\"],[${DRAG_HANDLE_ATTRIBUTE}=\"true\"] *`)\n}\n","import {Card, Grid, Theme} from '@sanity/ui'\nimport React, {ComponentProps, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {MOVING_ITEM_CLASS_NAME, sortableItem, sortableList} from './sortable'\n\nconst ListItem = styled(Card)`\n  &.${MOVING_ITEM_CLASS_NAME} {\n    z-index: 10000;\n    border-radius: ${({theme}) => theme.sanity.radius[2]}px;\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n\n    // Used inside CellItem\n    [data-ui='DragHandleCard'] {\n      opacity: 1;\n    }\n\n    [data-ui='DragHandleButton'] {\n      background-color: ${({theme}: {theme: Theme}) =>\n        theme.sanity.color.button.bleed.primary.pressed.bg};\n      color: ${({theme}: {theme: Theme}) => theme.sanity.color.button.bleed.primary.pressed.fg};\n      [data-ui='Text'] {\n        color: inherit;\n      }\n    }\n  }\n`\n\nconst SortableList = sortableList(Grid)\nconst SortableListItem = sortableItem(ListItem)\n\ninterface ListProps extends ComponentProps<typeof Grid> {\n  sortable?: boolean\n  lockAxis?: 'x' | 'y' | 'xy'\n  axis?: 'x' | 'y' | 'xy'\n  onItemMove?: (event: {fromIndex: number; toIndex: number}) => void\n  children?: React.ReactNode\n  tabIndex?: number\n}\n\nexport function List(props: ListProps) {\n  const {onItemMove, sortable, ...rest} = props\n\n  // Note: this is here to make SortableList API compatible with onItemMove\n  const handleSortEnd = useCallback(\n    (event: {newIndex: number; oldIndex: number}) =>\n      onItemMove?.({\n        fromIndex: event.oldIndex,\n        toIndex: event.newIndex,\n      }),\n    [onItemMove]\n  )\n\n  return sortable ? <SortableList onSortEnd={handleSortEnd} {...rest} /> : <Grid {...rest} />\n}\n\ntype ItemProps = {sortable?: boolean; children?: React.ReactNode; index: number}\n\nexport function Item(props: ItemProps & ComponentProps<typeof Card>) {\n  const {sortable, ...rest} = props\n  return sortable ? <SortableListItem {...rest} /> : <ListItem {...rest} />\n}\n","import styled from 'styled-components'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React from 'react'\nimport {DragHandleIcon} from '@sanity/icons'\nimport {DRAG_HANDLE_ATTRIBUTE, sortableHandle} from './sortable'\n\nconst DragHandleButton = styled(Button)<{grid?: boolean}>`\n  cursor: ${(props) => (props.grid ? 'move' : 'ns-resize')};\n`\n\nconst DRAG_HANDLE_PROPS = {[DRAG_HANDLE_ATTRIBUTE]: true}\n\nexport const DragHandle = sortableHandle(function DragHandle(\n  props: {\n    grid?: boolean\n  } & ButtonProps\n) {\n  return (\n    <DragHandleButton\n      icon={DragHandleIcon}\n      mode=\"bleed\"\n      data-ui=\"DragHandleButton\"\n      {...props}\n      {...DRAG_HANDLE_PROPS}\n    />\n  )\n})\n","import {Box, Card, CardTone, Flex, Stack} from '@sanity/ui'\nimport React, {ReactNode, useRef} from 'react'\nimport styled from 'styled-components'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {DragHandle} from '../common/DragHandle'\nimport {MOVING_ITEM_CLASS_NAME} from '../common/sortable'\n\ninterface RowLayoutProps {\n  tone?: CardTone\n  dragHandle?: boolean\n  focused?: boolean\n  presence?: ReactNode\n  validation?: ReactNode\n  menu?: ReactNode\n  footer?: ReactNode\n  selected?: boolean\n  children?: ReactNode\n}\n\nconst Root = styled(Card)`\n  position: relative;\n  border: 1px solid transparent;\n  transition: border-color 250ms;\n  .dragHandle {\n    color: var(--card-shadow-umbra-color);\n  }\n  &:hover {\n    border-color: var(--card-shadow-umbra-color);\n    .dragHandle {\n      color: inherit;\n    }\n  }\n  &[aria-selected='true'] {\n    border-color: var(--card-focus-ring-color);\n  }\n  .${MOVING_ITEM_CLASS_NAME} & {\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n  }\n`\n\nexport function RowLayout(props: RowLayoutProps) {\n  const {validation, selected, tone, presence, focused, children, dragHandle, menu, footer} = props\n\n  const elementRef = useRef<HTMLDivElement | null>(null)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      elementRef.current?.focus()\n    }\n  })\n\n  return (\n    <Root\n      ref={elementRef}\n      selected={selected}\n      aria-selected={selected}\n      radius={2}\n      padding={1}\n      tone={tone}\n    >\n      <Stack space={1}>\n        <Flex align=\"center\">\n          {dragHandle && (\n            <Box marginRight={1} paddingY={1}>\n              <DragHandle paddingX={1} paddingY={3} />\n            </Box>\n          )}\n\n          <Box flex={1}>{children}</Box>\n\n          {(presence || validation || menu) && (\n            <Flex align=\"center\" marginLeft={1}>\n              {presence && <Box marginLeft={1}>{presence}</Box>}\n              {validation && <Box marginLeft={1}>{validation}</Box>}\n              {menu}\n            </Flex>\n          )}\n        </Flex>\n        {footer}\n      </Stack>\n    </Root>\n  )\n}\n","import {Box, Card, Code, Flex, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: unknown\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function IncompatibleItemType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e: any) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Box>\n              <Text weight=\"semibold\">Why is this happening?</Text>\n            </Box>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        paddingX={2}\n        paddingY={3}\n        flex={1}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        __unstable_focusRing\n        {...rest}\n      >\n        <Flex align=\"center\">\n          <Box marginRight={3}>\n            <Text>\n              <UnknownIcon />\n            </Text>\n          </Box>\n\n          <Box flex={1}>\n            <Text size={1} textOverflow=\"ellipsis\">\n              Item of type <code>{typeName}</code> not valid for this list\n            </Text>\n          </Box>\n        </Flex>\n      </Card>\n    </Popover>\n  )\n}\n","import React, {useCallback, useId} from 'react'\nimport {EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Box, Button, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {ArrayItemError} from '../../../../store'\nimport {useFormCallbacks} from '../../../../studio/contexts/FormCallbacks'\nimport {PatchEvent, unset} from '../../../../patch'\nimport {RowLayout} from '../../layouts/RowLayout'\nimport {IncompatibleItemType} from './IncompatibleItemType'\n\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport function ErrorItem(props: {member: ArrayItemError; sortable?: boolean}) {\n  const {member, sortable} = props\n  const id = useId()\n  const {onChange} = useFormCallbacks()\n\n  const handleRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [onChange, member.key])\n\n  return (\n    <Box paddingX={1}>\n      <RowLayout\n        dragHandle={sortable}\n        tone=\"caution\"\n        menu={\n          <MenuButton\n            button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n            id={`${id}-menuButton`}\n            menu={\n              <Menu>\n                <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={handleRemove} />\n              </Menu>\n            }\n            popover={MENU_POPOVER_PROPS}\n          />\n        }\n      >\n        {member.error.type === 'INVALID_ITEM_TYPE' ? (\n          <IncompatibleItemType value={member.error.value} />\n        ) : (\n          <div>Unexpected Error: {member.error.type}</div>\n        )}\n      </RowLayout>\n    </Box>\n  )\n}\n","import styled, {css} from 'styled-components'\nimport {rem, Theme} from '@sanity/ui'\nimport {ComponentType} from 'react'\nimport {focusRingBorderStyle, focusRingStyle} from './helpers'\n\nexport function withFocusRing<Props>(component: ComponentType<Props>) {\n  return styled(component)<Props & {$border?: boolean}>(\n    (props: {theme: Theme; $border?: boolean}) => {\n      const border = {width: props.$border ? 1 : 0, color: 'var(--card-border-color)'}\n\n      return css`\n        --card-focus-box-shadow: ${focusRingBorderStyle(border)};\n\n        border-radius: ${rem(props.theme.sanity.radius[1])};\n        outline: none;\n        box-shadow: var(--card-focus-box-shadow);\n\n        &:focus {\n          --card-focus-box-shadow: ${focusRingStyle({\n            base: props.theme.sanity.color.base,\n            border,\n            focusRing: props.theme.sanity.focusRing,\n          })};\n        }\n      `\n    }\n  )\n}\n","/**\n * Utilities for extracting files from dataTransfer in a predictable cross-browser fashion.\n * Also recursively extracts files from a directory\n * Inspired by https://github.com/component/normalized-upload\n */\n\nimport {flatten} from 'lodash'\nimport {FIXME} from '../../../../../FIXME'\n\nexport function extractPastedFiles(dataTransfer: DataTransfer): Promise<File[]> {\n  if (dataTransfer.files && dataTransfer.files.length > 0) {\n    return Promise.resolve(Array.from(dataTransfer.files || []))\n  }\n  return normalizeItems(Array.from(dataTransfer.items || [])).then(flatten)\n}\n\nexport function extractDroppedFiles(dataTransfer: DataTransfer) {\n  const files: File[] = Array.from(dataTransfer.files || [])\n  const items: DataTransferItem[] = Array.from(dataTransfer.items || [])\n  if (files && files.length > 0) {\n    return Promise.resolve(files)\n  }\n  return normalizeItems(items).then(flatten)\n}\n\nfunction toArray<T>(v: T | null): T[] {\n  return v === null ? [] : [v]\n}\n\nfunction normalizeItems(items: DataTransferItem[]) {\n  return Promise.all(\n    items.map((item) => {\n      // directory\n      if (item.kind === 'file' && item.webkitGetAsEntry) {\n        let entry\n        // Edge throws\n        try {\n          entry = item.webkitGetAsEntry()\n        } catch (err) {\n          return toArray(item.getAsFile())\n        }\n        if (!entry) {\n          return []\n        }\n        return entry.isDirectory ? walk(entry as FIXME) : toArray(item.getAsFile())\n      }\n\n      if (item.kind === 'file') {\n        const file = item.getAsFile()\n        return Promise.resolve(file ? [file] : [])\n      }\n\n      if (item.kind === 'string') {\n        // We previously had support for reading datatransfer of strings here but decided to remove it since we don't handle it in higher up in the stack yet.\n        // If one day we want to support data transfer from a string value (e.g. copy+paste from a field to another), an earlier\n        // version of this file includes an implementation that uses DataTransferItem.getAsString to read the string value into a File\n        console.warn('DataTransfer with kind=\"string\" is currently not supported')\n        return Promise.resolve([])\n      }\n\n      console.warn('Unknown DataTransferItem.kind: %s', item.kind)\n      return Promise.resolve([])\n    })\n  )\n}\n\n// Warning: experimental API: https://wicg.github.io/entries-api\ntype WebKitFileEntry = {\n  isFile: true\n  isDirectory: false\n  name: string\n  fullPath: string\n  file: (fileCallback: (file: File) => void, errorCallback?: (error: Error) => void) => void\n}\n\ntype WebKitDirectoryEntry = {\n  isFile: false\n  isDirectory: true\n  name: string\n  fullPath: string\n  createReader: () => DirectoryReader\n}\n\ntype Entry = WebKitFileEntry | WebKitDirectoryEntry\n\ntype DirectoryReader = {\n  readEntries: (\n    successCallback: (entries: Entry[]) => void,\n    errorCallback?: (error: Error) => void\n  ) => void\n}\n\nfunction walk(entry: Entry): Promise<File[]> {\n  if (entry.isFile) {\n    return new Promise<File>((resolve, reject) => entry.file(resolve, reject)).then(\n      (file: File) => [file]\n    )\n  }\n\n  if (entry.isDirectory) {\n    const dir = entry.createReader()\n    return new Promise<Entry[]>((resolve, reject) => dir.readEntries(resolve, reject))\n      .then((entries) => entries.filter((entr) => !entr.name.startsWith('.')))\n      .then((entries) => Promise.all(entries.map(walk)).then(flatten))\n  }\n  return Promise.resolve([])\n}\n","export function imageUrlToBlob(\n  imageUrl: string,\n  format = 'image/jpeg',\n  quality = 1\n): Promise<Blob | null> {\n  if (imageUrl.match(/^webkit-fake-url:\\/\\//)) {\n    return Promise.reject(new Error('Cannot read image contents from webkit fake url'))\n  }\n  return new Promise((resolve, reject) => {\n    const loader = new Image()\n    loader.crossOrigin = 'anonymous'\n    loader.referrerPolicy = 'strict-origin-when-cross-origin'\n    loader.onload = () => {\n      const canvas = document.createElement('canvas')\n      canvas.width = loader.width\n      canvas.height = loader.height\n      const ctx = canvas.getContext('2d')\n      ctx?.drawImage(loader, 0, 0, canvas.width, canvas.height)\n      try {\n        canvas.toBlob(resolve, format, quality)\n      } catch (error) {\n        reject(error)\n      }\n    }\n    loader.src = imageUrl\n  })\n}\n","import React, {useCallback} from 'react'\nimport {useForwardedRef} from '@sanity/ui'\nimport {extractDroppedFiles, extractPastedFiles} from './utils/extractFiles'\nimport {imageUrlToBlob} from './utils/imageUrlToBlob'\n\nexport type FileInfo = {\n  kind: DataTransferItem['kind'] // 'file' or 'string'\n  type: DataTransferItem['type'] // mime type of file or string\n}\n\ntype Props = {\n  // Triggered when the target component receives one or more files, either originating from a drop event or a paste event\n  onFiles?: (files: File[]) => void\n\n  // Triggered by the user dragging files over the target component\n  // Note: We can potentially also support reading from clipboard events here: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard\n  onFilesOver?: (files: FileInfo[]) => void\n\n  // Triggered by the user dragging files out of the target component\n  onFilesOut?: () => void\n\n  disabled?: boolean\n}\n\n// These are managed and can't be passed to the composed component\ntype ManagedProps =\n  | 'onDrop'\n  | 'onDragOver'\n  | 'onPaste'\n  | 'onDragEnter'\n  | 'onDragLeave'\n  | 'onKeyDown'\n\nconst PASTE_INPUT_STYLE = {opacity: 0, position: 'absolute'} as const\n\n/**\n * Higher order component that creates a file target from a given component.\n * Returns a component that acts both as a drop target and a paste target, emitting a list of Files upon drop or paste\n */\nexport function fileTarget<ComponentProps>(Component: React.ComponentType<ComponentProps>) {\n  return React.forwardRef(function FileTarget(\n    props: Omit<ComponentProps, ManagedProps> & Props,\n    ref: React.ForwardedRef<HTMLElement>\n  ) {\n    const {onFiles, onFilesOver, onFilesOut, disabled, ...rest} = props\n\n    const [showPasteInput, setShowPasteInput] = React.useState(false)\n\n    const pasteInput = React.useRef<HTMLDivElement | null>(null)\n    const forwardedRef = useForwardedRef(ref)\n\n    const enteredElements = React.useRef<Element[]>([])\n\n    const emitFiles = useCallback(\n      (files: File[]) => {\n        onFiles?.(files)\n      },\n      [onFiles]\n    )\n\n    const handleKeyDown = useCallback(\n      (event: React.KeyboardEvent) => {\n        if (\n          event.target === forwardedRef.current &&\n          (event.ctrlKey || event.metaKey) &&\n          event.key === 'v'\n        ) {\n          setShowPasteInput(true)\n        }\n      },\n      [forwardedRef]\n    )\n    const handlePaste = useCallback(\n      (event: React.ClipboardEvent) => {\n        extractPastedFiles(event.clipboardData)\n          .then((files) => {\n            if (!pasteInput.current) {\n              return []\n            }\n            return files.length > 0\n              ? files\n              : // Invoke Safari hack if we didn't get any files\n                convertImagesToFilesAndClearContentEditable(pasteInput.current, 'image/jpeg')\n          })\n          .then((files) => {\n            emitFiles(files)\n            setShowPasteInput(false)\n            forwardedRef.current?.focus()\n          })\n      },\n      [emitFiles, forwardedRef]\n    )\n    const handleDrop = useCallback(\n      (event: React.DragEvent) => {\n        enteredElements.current = []\n        event.preventDefault()\n        event.stopPropagation()\n        const dataTransfer = event.nativeEvent.dataTransfer\n        if (onFiles && dataTransfer) {\n          extractDroppedFiles(dataTransfer).then((files) => {\n            if (files) {\n              emitFiles(files)\n            }\n          })\n        }\n        onFilesOut?.()\n      },\n      [emitFiles, onFiles, onFilesOut]\n    )\n\n    const handleDragOver = useCallback(\n      (event: React.DragEvent) => {\n        if (onFiles) {\n          event.preventDefault()\n          event.stopPropagation()\n        }\n      },\n      [onFiles]\n    )\n\n    const handleDragEnter = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n\n        if (onFilesOver && forwardedRef.current === event.currentTarget) {\n          /* this is a (hackish) work around to have the drag and drop work when the file is hovered back and forth over it\n          as part of the refactor and adding more components to the \"hover\" state, it didn't recognise that it just kept adding the same\n          element over and over, so when it tried to remove them on the handleDragLeave, it only removed the last instance.\n        */\n          enteredElements.current = [...new Set(enteredElements.current), event.currentTarget]\n\n          const fileTypes = Array.from(event.dataTransfer.items).map((item) => ({\n            type: item.type,\n            kind: item.kind,\n          }))\n          onFilesOver(fileTypes)\n        }\n      },\n      [onFilesOver, forwardedRef]\n    )\n\n    const handleDragLeave = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n        const idx = enteredElements.current.indexOf(event.currentTarget)\n        if (idx > -1) {\n          enteredElements.current.splice(idx, 1)\n        }\n        if (enteredElements.current.length === 0) {\n          onFilesOut?.()\n        }\n      },\n      [onFilesOut]\n    )\n\n    const prevShowPasteInput = React.useRef(false)\n    React.useEffect(() => {\n      if (!prevShowPasteInput.current && showPasteInput && pasteInput.current) {\n        pasteInput.current.focus()\n        select(pasteInput.current) // Needed by Edge\n      } else if (prevShowPasteInput.current && !showPasteInput) {\n        pasteInput.current?.focus()\n      }\n      prevShowPasteInput.current = showPasteInput\n    }, [showPasteInput])\n\n    return (\n      <>\n        <Component\n          {...(rest as ComponentProps)}\n          ref={forwardedRef}\n          onKeyDown={disabled ? undefined : handleKeyDown}\n          onDragOver={disabled ? undefined : handleDragOver}\n          onDragEnter={disabled ? undefined : handleDragEnter}\n          onDragLeave={disabled ? undefined : handleDragLeave}\n          onDrop={disabled ? undefined : handleDrop}\n        />\n        {!disabled && showPasteInput && (\n          <div contentEditable onPaste={handlePaste} ref={pasteInput} style={PASTE_INPUT_STYLE} />\n        )}\n      </>\n    )\n  })\n}\n\n// this is a hack for Safari that reads pasted image(s) from an ContentEditable div instead of the onpaste event\nfunction convertImagesToFilesAndClearContentEditable(\n  element: HTMLElement,\n  targetFormat = 'image/jpeg'\n): Promise<File[]> {\n  if (!element.isContentEditable) {\n    return Promise.reject(\n      new Error(\n        `Expected element to be contentEditable=\"true\". Instead found a non contenteditable ${element.tagName}`\n      )\n    )\n  }\n  return new Promise((resolve) => setTimeout(resolve, 10)) // add a delay so the paste event can finish\n    .then(() => Array.from(element.querySelectorAll('img')))\n    .then((imageElements) => {\n      element.innerHTML = '' // clear\n      return imageElements\n    })\n    .then((images) => Promise.all(images.map((img) => imageUrlToBlob(img.src))))\n    .then((imageBlobs) =>\n      imageBlobs.map((blob) => new File([blob!], 'pasted-image.jpg', {type: targetFormat}))\n    )\n}\n\n// needed by Edge\nfunction select(el: Element) {\n  const range = document.createRange()\n  range.selectNodeContents(el)\n  const sel = window.getSelection()\n  sel?.removeAllRanges()\n  sel?.addRange(range)\n}\n","import React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {Box, Text, Inline} from '@sanity/ui'\nimport {AccessDeniedIcon, UploadIcon} from '@sanity/icons'\nimport {FileLike, UploaderResolver} from '../../../studio/uploads/types'\n\ninterface Props {\n  hoveringFiles: FileLike[]\n  types: SchemaType[]\n  resolveUploader: UploaderResolver\n}\n\nexport function DropMessage(props: Props) {\n  const {hoveringFiles, types, resolveUploader} = props\n  const acceptedFiles = hoveringFiles.filter((file) =>\n    types.some((type) => resolveUploader(type, file))\n  )\n  const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n  const multiple = types.length > 1\n  return (\n    <>\n      {acceptedFiles.length > 0 ? (\n        <>\n          <Inline space={2}>\n            <Text>\n              <UploadIcon />\n            </Text>\n            <Text>\n              Drop to upload{' '}\n              {multiple && (\n                <>\n                  {acceptedFiles.length} file{acceptedFiles.length > 1 ? 's' : ''}\n                </>\n              )}\n            </Text>\n          </Inline>\n          {rejectedFilesCount > 0 && (\n            <Box marginTop={4}>\n              <Inline space={2}>\n                <Text muted size={1}>\n                  <AccessDeniedIcon />\n                </Text>\n                <Text muted size={1}>\n                  {rejectedFilesCount} file\n                  {rejectedFilesCount > 1 ? 's' : ''} can't be uploaded here\n                </Text>\n              </Inline>\n            </Box>\n          )}\n        </>\n      ) : (\n        <Inline space={2}>\n          <Text>\n            <AccessDeniedIcon />\n          </Text>\n          <Text>\n            Can't upload {hoveringFiles.length > 1 ? 'any of these files' : 'this file'} here\n          </Text>\n        </Inline>\n      )}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport {Layer} from '@sanity/ui'\n\nexport const Overlay = styled(Layer)`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background-color: var(--card-bg-color);\n  opacity: 0.8;\n`\n","import {Box, Flex, Text, useToast} from '@sanity/ui'\nimport React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {sortBy} from 'lodash'\nimport styled from 'styled-components'\nimport {FileLike, ResolvedUploader, UploaderResolver} from '../../../../studio/uploads/types'\nimport {FileInfo, fileTarget} from '../../../common/fileTarget'\nimport {DropMessage} from '../../../files/common/DropMessage'\nimport {UploadEvent} from '../../../../types'\nimport {Overlay} from './styles'\n\nexport interface UploadTargetProps {\n  types: SchemaType[]\n  resolveUploader?: UploaderResolver\n  onUpload?: (event: UploadEvent) => void\n  children?: React.ReactNode\n}\n\n// todo: define and export this as a core interface in this package\ninterface UploadTask {\n  file: File\n  uploaderCandidates: ResolvedUploader[]\n}\n\nconst Root = styled.div`\n  position: relative;\n`\n\nfunction getUploadCandidates(\n  types: SchemaType[],\n  resolveUploader: UploaderResolver,\n  file: FileLike\n) {\n  return types\n    .map((memberType) => ({\n      type: memberType,\n      uploader: resolveUploader(memberType, file),\n    }))\n    .filter((member) => member.uploader) as ResolvedUploader[]\n}\nexport function uploadTarget<Props>(Component: React.ComponentType<Props>) {\n  const FileTarget = fileTarget<any>(Component)\n\n  return React.forwardRef(function UploadTarget(\n    props: UploadTargetProps & Props,\n    forwardedRef: React.ForwardedRef<HTMLElement>\n  ) {\n    const {children, resolveUploader, onUpload, types, ...rest} = props\n    const {push: pushToast} = useToast()\n\n    const uploadFile = React.useCallback(\n      (file: File, resolvedUploader: ResolvedUploader) => {\n        const {type, uploader} = resolvedUploader\n        onUpload?.({file, schemaType: type, uploader})\n      },\n      [onUpload]\n    )\n\n    const handleFiles = React.useCallback(\n      (files: File[]) => {\n        if (!resolveUploader) {\n          return\n        }\n        const tasks: UploadTask[] = files.map((file) => ({\n          file,\n          uploaderCandidates: getUploadCandidates(types, resolveUploader, file),\n        }))\n        const ready = tasks.filter((task) => task.uploaderCandidates.length > 0)\n        const rejected: UploadTask[] = tasks.filter((task) => task.uploaderCandidates.length === 0)\n\n        if (rejected.length > 0) {\n          const plural = rejected.length > 1\n          pushToast({\n            closable: true,\n            status: 'warning',\n            title: `The following item${\n              plural ? 's' : ''\n            } can't be uploaded because there's no known conversion from content type${\n              plural ? 's' : ''\n            } to array item:`,\n            description: rejected.map((task, i) => (\n              <Flex key={i} padding={2}>\n                <Box marginLeft={1}>\n                  <Text weight=\"semibold\">{task.file.name}</Text>\n                </Box>\n                <Box paddingLeft={2}>\n                  <Text size={1}>({task.file.type})</Text>\n                </Box>\n              </Flex>\n            )),\n          })\n        }\n\n        // todo: consider if we should to ask the user here\n        // the list of candidates is sorted by their priority and the first one is selected\n        // const ambiguous = tasks\n        //   .filter(task => task.uploaderCandidates.length > 1)\n        ready.forEach((task) => {\n          uploadFile(\n            task.file,\n            // eslint-disable-next-line max-nested-callbacks\n            sortBy(task.uploaderCandidates, (candidate) => candidate.uploader.priority)[0]\n          )\n        })\n      },\n      [pushToast, resolveUploader, types, uploadFile]\n    )\n\n    const [hoveringFiles, setHoveringFiles] = React.useState<FileInfo[]>([])\n    const handleFilesOut = React.useCallback(() => setHoveringFiles([]), [])\n\n    return (\n      <Root>\n        <FileTarget\n          {...rest}\n          ref={forwardedRef}\n          onFiles={handleFiles}\n          onFilesOver={setHoveringFiles}\n          onFilesOut={handleFilesOut}\n        >\n          {resolveUploader && hoveringFiles.length > 0 && (\n            <Overlay zOffset={10}>\n              <DropMessage\n                hoveringFiles={hoveringFiles}\n                types={types}\n                resolveUploader={resolveUploader}\n              />\n            </Overlay>\n          )}\n          {children}\n        </FileTarget>\n      </Root>\n    )\n  })\n}\n","import {Card} from '@sanity/ui'\nimport {withFocusRing} from '../../../components/withFocusRing'\nimport {uploadTarget} from './uploadTarget/uploadTarget'\n\nexport const UploadTargetCard = uploadTarget(withFocusRing(Card))\n","/**\n * Find the index of the nearest element with the same value. Starts at given index and looks incrementally in either direction for the searchElement\n * It's *NOT* inclusive: If the element matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n */\nexport function nearestIndexOf<T>(array: T[], startIdx: number, searchElement: T) {\n  return nearestIndex(array, startIdx, (element) => element === searchElement)\n}\n\n/**\n * Find the index of the nearest element matching the predicate. Starts at given index and looks incrementally in either direction\n * It's *NOT* inclusive: If the predicate matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n */\nexport function nearestIndex<T>(\n  array: T[],\n  startIdx: number,\n  predicate: (element: T, index: number) => boolean\n) {\n  let lowerIdx = startIdx - 1\n  let upperIdx = startIdx\n  const len = array.length\n  while (lowerIdx > -1 || upperIdx < len) {\n    const upper = array[upperIdx]\n    if (upperIdx < len && predicate(upper, upperIdx)) {\n      return upperIdx\n    }\n    const lower = array[lowerIdx]\n    if (lowerIdx > -1 && predicate(lower, lowerIdx)) {\n      return lowerIdx\n    }\n    lowerIdx--\n    upperIdx++\n  }\n  return -1\n}\n","/* eslint-disable react/jsx-no-bind */\nimport {SchemaType} from '@sanity/types'\nimport React, {ComponentProps, memo} from 'react'\nimport {MenuGroup, MenuItem, PopoverProps} from '@sanity/ui'\nimport {InsertAboveIcon, InsertBelowIcon} from '@sanity/icons'\n\ninterface Props {\n  types?: SchemaType[]\n  onInsert: (pos: 'before' | 'after', type: SchemaType) => void\n}\n\nconst MENU_POPOVER_PROPS: PopoverProps = {\n  portal: true,\n  tone: 'default',\n  placement: 'left',\n  constrainSize: true,\n} as const\n\nexport const InsertMenu = memo(function InsertMenu(props: Props) {\n  const {types, onInsert} = props\n  return (\n    <>\n      <InsertMenuGroup\n        pos=\"before\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item before\"\n        icon={InsertAboveIcon}\n      />\n      <InsertMenuGroup\n        pos=\"after\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item after\"\n        icon={InsertBelowIcon}\n      />\n    </>\n  )\n})\n\nfunction InsertMenuGroup(\n  props: Props & {\n    pos: 'before' | 'after'\n    text: ComponentProps<typeof MenuItem>['text']\n    icon: ComponentProps<typeof MenuItem>['icon']\n  }\n) {\n  const {types, onInsert, pos, text, icon} = props\n\n  if (types?.length === 1) {\n    return <MenuItem key={pos} text={text} icon={icon} onClick={() => onInsert(pos, types[0])} />\n  }\n  return (\n    <MenuGroup text={text} key={pos} popover={MENU_POPOVER_PROPS}>\n      {types?.map((insertableType) => (\n        <MenuItem\n          key={insertableType.name}\n          icon={insertableType.icon}\n          text={insertableType.title}\n          onClick={() => onInsert(pos, insertableType)}\n        />\n      ))}\n    </MenuGroup>\n  )\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Box, Button, Flex, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {FormFieldValidationStatus} from '../../../components/formField'\nimport {InsertMenu} from '../ArrayOfObjectsInput/InsertMenu'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {RowLayout} from '../layouts/RowLayout'\nimport {FieldPresence} from '../../../../presence'\nimport {getEmptyValue} from './getEmptyValue'\n\nexport type DefaultItemProps = Omit<PrimitiveItemProps, 'renderDefault'> & {\n  insertableTypes: SchemaType[]\n  onEnterKey: (item: number) => void\n  onEscapeKey: (item: number) => void\n  index: number\n  sortable: boolean\n}\n\nconst MENU_BUTTON_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport const ItemRow = React.forwardRef(function ItemRow(\n  props: DefaultItemProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    sortable,\n    value,\n    index,\n    onEscapeKey,\n    onEnterKey,\n    insertableTypes,\n    onInsert,\n    onRemove,\n    readOnly,\n    inputId,\n    validation,\n    onFocus,\n    children,\n    presence,\n    schemaType,\n  } = props\n\n  const hasError = validation.filter((item) => item.level === 'error').length > 0\n  const hasWarning = validation.filter((item) => item.level === 'warning').length > 0\n\n  const handleRemove = useCallback(() => {\n    onRemove()\n  }, [onRemove])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({position: pos, items: [getEmptyValue(insertType)]})\n    },\n    [onInsert]\n  )\n\n  const handleDuplicate = useCallback(() => {\n    if (value) onInsert({position: 'after', items: [value]})\n  }, [onInsert, value])\n\n  const handleKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onEnterKey(index)\n      }\n    },\n    [index, onEnterKey]\n  )\n\n  const handleKeyUp = useCallback(\n    (event: React.KeyboardEvent<any>) => {\n      if (event.shiftKey && event.key === 'Backspace' && value === '') {\n        onRemove()\n      }\n\n      if (event.key === 'Escape') {\n        onEscapeKey(index)\n      }\n    },\n    [index, onEscapeKey, onRemove, value]\n  )\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    return undefined\n  }, [hasError, hasWarning])\n\n  const menu = (\n    <MenuButton\n      button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n      id={`${inputId}-menuButton`}\n      popover={MENU_BUTTON_POPOVER_PROPS}\n      menu={\n        <Menu>\n          <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={handleRemove} />\n\n          <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n          <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n        </Menu>\n      }\n    />\n  )\n\n  return (\n    <RowLayout\n      tone={tone}\n      menu={!readOnly && menu}\n      dragHandle={!readOnly && sortable}\n      presence={presence.length === 0 ? null : <FieldPresence presence={presence} maxAvatars={1} />}\n      validation={\n        validation.length > 0 ? (\n          <Box marginLeft={1} paddingX={1} paddingY={3}>\n            <FormFieldValidationStatus validation={validation} />\n          </Box>\n        ) : null\n      }\n    >\n      <Flex align={schemaType ? 'flex-end' : 'center'} ref={ref}>\n        <Flex align=\"flex-end\" flex={1}>\n          <Box flex={1} marginRight={2}>\n            {children}\n          </Box>\n        </Flex>\n      </Flex>\n    </RowLayout>\n  )\n})\n","/* eslint-disable react/no-unused-prop-types */\nimport {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useMemo, useId} from 'react'\nimport {Box, Button, Grid, Menu, MenuButton, MenuItem, Tooltip, Text} from '@sanity/ui'\nimport {ArrayInputFunctionsProps} from '../../../types'\n\n/** @beta */\nexport function ArrayOfPrimitivesFunctions<\n  MemberType extends string | boolean | number,\n  SchemaType extends ArraySchemaType\n>(props: ArrayInputFunctionsProps<MemberType, SchemaType>) {\n  const {schemaType, readOnly, children, onValueCreate, onItemAppend} = props\n  const menuButtonId = useId()\n\n  const insertItem = React.useCallback(\n    (itemType: any) => {\n      onItemAppend(onValueCreate(itemType))\n    },\n    [onValueCreate, onItemAppend]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(schemaType.of[0])\n  }, [schemaType, insertItem])\n\n  const popoverProps = useMemo(() => ({constrainSize: true, portal: true}), [])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={schemaType.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {schemaType.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add item\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {schemaType.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one schemaType only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={popoverProps}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n","import React from 'react'\nimport {get} from 'lodash'\nimport {Card, Stack, Text} from '@sanity/ui'\nimport {ArrayOfPrimitivesInputProps} from '../../../types'\nimport {Item, List} from '../common/list'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {ArrayOfPrimitivesItem} from '../../../members'\nimport {ErrorItem} from '../ArrayOfObjectsInput/List/ErrorItem'\nimport {UploadTargetCard} from '../common/UploadTargetCard'\nimport {getEmptyValue} from './getEmptyValue'\n\nimport {PrimitiveValue} from './types'\nimport {nearestIndexOf} from './utils/nearestIndex'\nimport {ItemRow} from './ItemRow'\nimport {ArrayOfPrimitivesFunctions} from './ArrayOfPrimitivesFunctions'\n\n// Note: this should be a class component until React provides support for a hook version of getSnapshotBeforeUpdate\n/** @beta */\nexport class ArrayOfPrimitivesInput extends React.PureComponent<ArrayOfPrimitivesInputProps> {\n  _element: HTMLElement | null = null\n  _lastAddedIndex = -1\n\n  handleAppend = (itemValue: PrimitiveValue) => {\n    const {value = [], onIndexFocus, onItemAppend} = this.props\n    onItemAppend(itemValue)\n    onIndexFocus(value.length)\n  }\n\n  handlePrepend = (itemValue: PrimitiveValue) => {\n    const {onIndexFocus, value = [], onItemPrepend} = this.props\n    onItemPrepend(itemValue)\n    onIndexFocus(value.length)\n  }\n  handleItemEnterKey = (index: number) => {\n    const {schemaType, onInsert} = this.props\n    const firstType = schemaType?.of[0]\n    if (firstType) {\n      onInsert({\n        referenceIndex: index,\n        position: 'after',\n        items: [getEmptyValue(firstType)],\n      })\n      this._lastAddedIndex = index + 1\n    }\n  }\n\n  handleItemEscapeKey = (index: number) => {\n    const {value, onItemRemove} = this.props\n    if (index === this._lastAddedIndex && value?.[index] === '') {\n      onItemRemove(index)\n    }\n  }\n\n  handleSortEnd = (event: {fromIndex: number; toIndex: number}) => {\n    const {onIndexFocus, onMoveItem, value} = this.props\n    if (value) onMoveItem(event)\n    onIndexFocus(event.toIndex)\n  }\n\n  focus() {\n    if (this._element) {\n      this._element.focus()\n    }\n  }\n\n  getSnapshotBeforeUpdate(prevProps: ArrayOfPrimitivesInputProps) {\n    const {focusPath: prevFocusPath = [], value: prevValue = []} = prevProps\n    const {focusPath = [], value = []} = this.props\n    if (prevFocusPath[0] === focusPath[0] && prevValue.length !== value.length) {\n      // the length of the array has changed, but the focus path has not, which may happen if someone inserts or removes a new item above the one currently in focus\n      const focusIndex = focusPath[0]\n\n      const selection = window.getSelection()\n      if (!(selection?.focusNode instanceof HTMLElement)) {\n        return null\n      }\n\n      const input = selection.focusNode?.querySelector('input,textarea')\n\n      return input instanceof HTMLInputElement\n        ? {\n            prevFocusedIndex: focusIndex,\n            restoreSelection: {\n              text: selection.toString(),\n              start: input.selectionStart,\n              end: input.selectionEnd,\n              value: input.value,\n            },\n          }\n        : {}\n    }\n\n    return null\n  }\n\n  componentDidUpdate(\n    prevProps: ArrayOfPrimitivesInputProps,\n    prevState: Record<string, unknown>,\n    snapshot?: {restoreSelection: {start: number; end: number}; prevFocusedIndex: number}\n  ) {\n    const {onIndexFocus} = this.props\n    if (snapshot?.restoreSelection && prevProps.value) {\n      const prevFocusedValue = prevProps.value[snapshot.prevFocusedIndex]\n\n      const nearestIndex = nearestIndexOf(\n        this.props.value || [],\n        snapshot.prevFocusedIndex,\n        prevFocusedValue\n      )\n\n      if (nearestIndex === -1) {\n        return\n      }\n      const newInput = this._element?.querySelector(\n        `[data-item-index='${nearestIndex}'] input,textarea`\n      )\n\n      if (newInput instanceof HTMLInputElement) {\n        newInput.focus()\n        try {\n          newInput.setSelectionRange(snapshot.restoreSelection.start, snapshot.restoreSelection.end)\n        } catch {\n          // not all inputs supports selection (e.g. <input type=\"number\" />)\n        }\n      }\n      onIndexFocus(nearestIndex)\n    }\n  }\n\n  renderArrayItem = (props: Omit<PrimitiveItemProps, 'renderDefault'>) => {\n    const {schemaType} = this.props\n    const sortable = schemaType.options?.sortable !== false\n    return (\n      <ItemRow\n        {...props}\n        sortable={sortable}\n        insertableTypes={schemaType.of}\n        onEnterKey={this.handleItemEnterKey}\n        onEscapeKey={this.handleItemEscapeKey}\n      />\n    )\n  }\n\n  render() {\n    const {\n      schemaType,\n      members,\n      readOnly,\n      renderInput,\n      onUpload,\n      resolveUploader,\n      elementProps,\n      arrayFunctions: ArrayFunctions = ArrayOfPrimitivesFunctions,\n    } = this.props\n\n    const isSortable = !readOnly && get(schemaType, 'options.sortable') !== false\n\n    return (\n      <Stack space={3} data-testid=\"array-primitives-input\">\n        <UploadTargetCard\n          types={schemaType.of}\n          resolveUploader={resolveUploader}\n          onUpload={onUpload}\n          {...elementProps}\n          tabIndex={0}\n        >\n          <Stack space={1}>\n            {members.length === 0 ? (\n              <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n                <Text align=\"center\" muted size={1}>\n                  {schemaType.placeholder || <>No items</>}\n                </Text>\n              </Card>\n            ) : (\n              <Card padding={1} border>\n                <List onItemMove={this.handleSortEnd} sortable={isSortable} gap={1}>\n                  {members.map((member, index) => {\n                    return (\n                      <Item key={member.key} sortable={isSortable} index={index}>\n                        {member.kind === 'item' && (\n                          <ArrayOfPrimitivesItem\n                            member={member}\n                            renderItem={this.renderArrayItem}\n                            renderInput={renderInput}\n                          />\n                        )}\n                        {member.kind === 'error' && (\n                          <ErrorItem sortable={isSortable} member={member} />\n                        )}\n                      </Item>\n                    )\n                  })}\n                </List>\n              </Card>\n            )}\n          </Stack>\n        </UploadTargetCard>\n\n        <ArrayFunctions\n          onChange={this.props.onChange}\n          onItemAppend={this.handleAppend}\n          onItemPrepend={this.handlePrepend}\n          onValueCreate={getEmptyValue}\n          readOnly={this.props.readOnly}\n          schemaType={this.props.schemaType}\n          value={this.props.value}\n        />\n      </Stack>\n    )\n  }\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Box, Card, Checkbox, Flex, Grid} from '@sanity/ui'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {ArraySchemaType, isKeyedObject} from '@sanity/types'\nimport {set, unset} from '../../../patch'\nimport {ArrayOfObjectsInputProps} from '../../../types'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {IncompatibleItemType} from '../../../members/views/IncompatibleItemType'\n\nfunction isEqual(item: any, otherItem: any): boolean {\n  if (item === otherItem) {\n    return true\n  }\n  if (typeof item !== typeof otherItem) {\n    return false\n  }\n  if (typeof item !== 'object' && !Array.isArray(item)) {\n    return item === otherItem\n  }\n  if (item._key && item._key === otherItem._key) {\n    return true\n  }\n  if (Array.isArray(item)) {\n    if (!item.length !== otherItem.length) {\n      return false\n    }\n    return item.every((it, i) => isEqual(item[i], otherItem[i]))\n  }\n  const keys = Object.keys(item)\n  const otherKeys = Object.keys(item)\n  if (keys.length !== otherKeys.length) {\n    return false\n  }\n  return keys.every((keyName) => isEqual(item[keyName], otherItem[keyName]))\n}\n\nfunction inArray(array: unknown[], candidate: unknown) {\n  return array ? array.some((item) => isEqual(item, candidate)) : false\n}\n\nfunction getMemberTypeOfItem(schemaType: ArraySchemaType, item: unknown) {\n  return schemaType.of.find((memberType) => memberType.name === resolveTypeName(item))\n}\n\nconst EMPTY_ARRAY: unknown[] = []\n\ninterface ObjectOption {\n  _key?: string\n}\n\n/**\n * Array of predefined object options input\n * Note: this input can handle only object values\n *\n * @beta\n */\nexport function ArrayOfObjectOptionsInput(props: ArrayOfObjectsInputProps) {\n  const {\n    renderPreview,\n    schemaType,\n    onChange,\n    onPathFocus,\n    value = [],\n    readOnly,\n    elementProps,\n    path,\n    changed,\n  } = props\n\n  const options = useMemo(\n    () =>\n      ((schemaType.options?.list || EMPTY_ARRAY) as ObjectOption[]).map((option, index) =>\n        isKeyedObject(option) ? option : {...option, _key: `auto-generated-${index}`}\n      ),\n    [schemaType.options?.list]\n  )\n\n  const handleChange = useCallback(\n    (isChecked: boolean, changedOption: ObjectOption) => {\n      if (!isChecked && isKeyedObject(changedOption)) {\n        // This is an optimization that only works if list items are _keyed\n        onChange(unset([{_key: changedOption._key}]))\n        return\n      }\n\n      const nextValue = options.filter((option) =>\n        isEqual(changedOption, option) ? isChecked : inArray(value, option)\n      )\n\n      onChange(nextValue.length > 0 ? set(nextValue) : unset())\n    },\n    [onChange, options, value]\n  )\n\n  const handleItemFocus = useCallback(\n    (index: number) => {\n      onPathFocus([index])\n    },\n    [onPathFocus]\n  )\n\n  const isGrid = schemaType.options?.layout === 'grid'\n\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={false}>\n      <Grid\n        gap={2}\n        columns={isGrid ? Math.min(options.length, 4) : 1}\n        tabIndex={0}\n        {...elementProps}\n      >\n        {options.map((option, index) => {\n          const optionType = getMemberTypeOfItem(schemaType, option)\n          const checked = inArray(value, option)\n          const disabled = !optionType\n\n          return (\n            <Flex key={index} align=\"center\" as=\"label\" muted={disabled}>\n              <Checkbox\n                disabled={disabled}\n                checked={checked}\n                onChange={(e) => handleChange(e.currentTarget.checked, option)}\n                onFocus={() => handleItemFocus(index)}\n                readOnly={readOnly}\n              />\n              <Box flex={1} marginLeft={2}>\n                {optionType ? (\n                  renderPreview({\n                    layout: 'default',\n                    schemaType: optionType,\n                    value: option,\n                  })\n                ) : (\n                  <Card tone=\"caution\" radius={2}>\n                    <IncompatibleItemType value={option} onFocus={() => handleItemFocus(index)} />\n                  </Card>\n                )}\n              </Box>\n            </Flex>\n          )\n        })}\n      </Grid>\n    </ChangeIndicator>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {startCase} from 'lodash'\nimport {Box, Checkbox, Flex, Grid, Text} from '@sanity/ui'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {ArraySchemaType} from '@sanity/types'\nimport {set, unset} from '../../../patch'\nimport {ArrayOfPrimitivesInputProps} from '../../../types'\nimport {IncompatibleItemType} from '../ArrayOfObjectsInput/List/IncompatibleItemType'\nimport {ChangeIndicator} from '../../../../changeIndicators'\n\nfunction isPrimitiveOption(option: unknown): option is NormalizedPrimitiveOption {\n  return Boolean(option && typeof option === 'object' && 'title' in option && 'value' in option)\n}\n\nfunction normalizeOptions(options: unknown[]) {\n  return options.map((option) => {\n    if (isPrimitiveOption(option)) {\n      return {\n        title: option.title || startCase(String(option.value)),\n        value: option.value,\n      }\n    }\n    return {\n      title: startCase(String(option)),\n      value: option as string | number | boolean,\n    }\n  })\n}\n\ninterface NormalizedPrimitiveOption {\n  title: string\n  value: string | boolean | number\n}\n\nfunction getMemberTypeOfItem(schemaType: ArraySchemaType, option: NormalizedPrimitiveOption) {\n  return schemaType.of.find((memberType) => memberType.name === resolveTypeName(option.value))\n}\n\n/**\n * Array of predefined primitive options input\n * Note: this input can only handle primitive values\n *\n * @beta\n */\nexport function ArrayOfPrimitiveOptionsInput(props: ArrayOfPrimitivesInputProps) {\n  const {\n    schemaType,\n    onChange,\n    value = [],\n    readOnly,\n    path,\n    changed,\n    onIndexFocus,\n    elementProps,\n  } = props\n\n  const options = useMemo(\n    () => normalizeOptions(schemaType.options?.list || []),\n    [schemaType.options?.list]\n  )\n\n  const handleChange = (isChecked: boolean, changedValue: string | boolean | number) => {\n    const nextValue = options\n      .map((option) => option.value)\n      .filter((optionValue) =>\n        // note: sparse arrays are not supported here, so multiple options with same value will all be checked\n        optionValue === changedValue ? isChecked : value.includes(optionValue)\n      )\n\n    onChange(nextValue.length > 0 ? set(nextValue) : unset())\n  }\n\n  const isGrid = schemaType.options?.layout === 'grid'\n\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={false}>\n      <Grid gap={2} columns={isGrid ? Math.min(options.length, 4) : 1} {...elementProps}>\n        {options.map((option, index) => {\n          const optionType = getMemberTypeOfItem(schemaType, option)\n          const checked = value.includes(option.value)\n\n          const disabled = !optionType\n\n          return (\n            <Flex key={index} align=\"center\" as=\"label\" muted={disabled}>\n              <Checkbox\n                disabled={disabled}\n                checked={checked}\n                onChange={(e) => handleChange(e.currentTarget.checked, option.value)}\n                onFocus={() => onIndexFocus(index)}\n                readOnly={readOnly}\n              />\n\n              <Box padding={2}>\n                <Text>{option.title}</Text>\n              </Box>\n\n              {!optionType && (\n                <IncompatibleItemType value={option} onFocus={() => onIndexFocus(index)} />\n              )}\n            </Flex>\n          )\n        })}\n      </Grid>\n    </ChangeIndicator>\n  )\n}\n","import React from 'react'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  isArrayOfObjectsInputProps,\n} from '../../../types'\nimport {ArrayOfObjectOptionsInput} from './ArrayOfObjectOptionsInput'\nimport {ArrayOfPrimitiveOptionsInput} from './ArrayOfPrimitiveOptionsInput'\n\n/**\n * @beta\n */\nexport function ArrayOfOptionsInput(props: ArrayOfObjectsInputProps | ArrayOfPrimitivesInputProps) {\n  return isArrayOfObjectsInputProps(props) ? (\n    <ArrayOfObjectOptionsInput {...props} />\n  ) : (\n    <ArrayOfPrimitiveOptionsInput {...props} />\n  )\n}\n","import {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useId, useCallback} from 'react'\nimport {\n  Box,\n  Button,\n  Grid,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Tooltip,\n  Text,\n  MenuButtonProps,\n} from '@sanity/ui'\nimport {ArrayInputFunctionsProps, ObjectItem} from '../../../types'\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {constrainSize: true, portal: true}\n\n/** @beta */\nexport function ArrayOfObjectsFunctions<\n  Item extends ObjectItem,\n  SchemaType extends ArraySchemaType\n>(props: ArrayInputFunctionsProps<Item, SchemaType>) {\n  const {schemaType, readOnly, children, onValueCreate, onItemAppend} = props\n  const menuButtonId = useId()\n\n  const insertItem = useCallback(\n    (itemType: any) => {\n      const item = onValueCreate(itemType)\n\n      onItemAppend(item)\n    },\n    [onValueCreate, onItemAppend]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(schemaType.of[0])\n  }, [schemaType, insertItem])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={schemaType.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {schemaType.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add item\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {schemaType.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one schemaType only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={POPOVER_PROPS}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n","import {useCallback} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {useDidUpdate} from './useDidUpdate'\n\nconst SCROLL_OPTIONS = {scrollMode: 'if-needed'} as const\n\n/**\n * A hook to help make sure the parent element of a value edited in a dialog (or \"out of band\") stays\n visible in the background\n * @param elementRef - The element to scroll into view when the proivided focusWithin changes from true to false\n * @param hasFocusWithin - A boolean indicating whether we have has focus within the currently edited value\n */\nexport function useScrollIntoViewOnFocusWithin(\n  elementRef: {current: HTMLElement | null},\n  hasFocusWithin: boolean\n): void {\n  return useDidUpdate(\n    hasFocusWithin,\n    useCallback(\n      (hadFocus, hasFocus) => {\n        if (elementRef.current && !hadFocus && hasFocus) {\n          scrollIntoView(elementRef.current, SCROLL_OPTIONS)\n        }\n      },\n      [elementRef]\n    )\n  )\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {useContext, createContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {startsWith, isEqual} from '@sanity/util/paths'\nimport {FormNodePresence} from '../../../presence'\n\nconst PresenceContext = createContext<FormNodePresence[]>([])\n\nexport function PresenceProvider(props: {presence: FormNodePresence[]; children: React.ReactNode}) {\n  return (\n    <PresenceContext.Provider value={props.presence}>{props.children}</PresenceContext.Provider>\n  )\n}\n\nexport function useFormFieldPresence(): FormNodePresence[] {\n  const ctx = useContext(PresenceContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\n/**\n * @alpha\n * @param path - the path to return child presence for\n * @param inclusive - whether to include presence for the current path (default false)\n */\nexport function useChildPresence(path: Path, inclusive?: boolean): FormNodePresence[] {\n  const presence = useFormFieldPresence()\n  return useMemo(\n    () =>\n      presence.filter(\n        (item) => startsWith(path, item.path) && (inclusive || !isEqual(path, item.path))\n      ),\n    [inclusive, path, presence]\n  )\n}\n","import {Box, Card, CardTone, Flex} from '@sanity/ui'\nimport React, {ComponentProps, ReactNode} from 'react'\nimport styled from 'styled-components'\nimport {DragHandle} from '../common/DragHandle'\n\ninterface RowLayoutProps {\n  tone?: CardTone\n  dragHandle?: boolean\n  focused?: boolean\n  presence?: ReactNode\n  validation?: ReactNode\n  menu?: ReactNode\n  footer?: ReactNode\n  selected?: boolean\n  children?: ReactNode\n}\n\nconst FooterFlex = styled(Flex)`\n  min-height: 35px;\n`\nconst PresenceFlex = styled(Flex)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 35px;\n`\n\nconst DragHandleCard = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n`\nconst Root = styled(Card)`\n  transition: border-color 250ms;\n  box-sizing: border-box;\n  position: relative;\n\n  @media (hover: hover) {\n    ${DragHandleCard} {\n      opacity: 0;\n    }\n\n    &:hover,\n    &:focus-within {\n      ${DragHandleCard} {\n        opacity: 1;\n      }\n    }\n  }\n\n  &[aria-selected='true'] {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\n\n/**\n * Use this to get the layout for grid items\n */\nexport function CellLayout(props: RowLayoutProps & ComponentProps<typeof Root>) {\n  const {validation, selected, tone, presence, children, dragHandle, menu, footer, ...rest} = props\n\n  return (\n    <Root\n      forwardedAs={Flex}\n      direction=\"column\"\n      border\n      selected={selected}\n      aria-selected={selected}\n      radius={2}\n      tone={tone}\n      {...rest}\n    >\n      {children}\n\n      {dragHandle && (\n        <DragHandleCard\n          margin={1}\n          radius={2}\n          display=\"flex\"\n          tone=\"inherit\"\n          data-ui=\"DragHandleCard\"\n        >\n          <DragHandle grid padding={2} mode=\"ghost\" />\n        </DragHandleCard>\n      )}\n\n      {presence && (\n        <PresenceFlex align=\"center\" marginX={1}>\n          {presence}\n        </PresenceFlex>\n      )}\n\n      <FooterFlex align=\"center\" paddingX={1} sizing=\"border\" justify=\"space-between\">\n        <Flex>{validation}</Flex>\n        <Box>{footer}</Box>\n        {menu}\n      </FooterFlex>\n    </Root>\n  )\n}\n","import React, {ReactNode} from 'react'\nimport {Box, Dialog, Layer, ResponsiveWidthProps} from '@sanity/ui'\nimport {PresenceOverlay} from '../../presence'\nimport {PopoverDialog} from '../../components'\n\nconst PRESENCE_MARGINS: [number, number, number, number] = [0, 0, 1, 0]\n\ninterface Props {\n  type: 'popover' | 'dialog'\n  width: ResponsiveWidthProps['width']\n  header: string\n  id?: string\n  onClose: () => void\n  children?: ReactNode\n  // eslint-disable-next-line camelcase\n  legacy_referenceElement: HTMLElement | null\n}\n\nexport function EditPortal(props: Props): React.ReactElement {\n  const {\n    type,\n    id,\n    width,\n    onClose,\n    children,\n    legacy_referenceElement: referenceElement,\n    header,\n  } = props\n  const contents = (\n    <PresenceOverlay margins={PRESENCE_MARGINS}>\n      <Box padding={4}>{children}</Box>\n    </PresenceOverlay>\n  )\n  return type === 'dialog' ? (\n    <Layer>\n      <Dialog width={width} id={id || ''} onClose={onClose} header={header}>\n        {contents}\n      </Dialog>\n    </Layer>\n  ) : (\n    <PopoverDialog\n      width={width}\n      onClose={onClose}\n      referenceElement={referenceElement}\n      header={header}\n    >\n      {contents}\n    </PopoverDialog>\n  )\n}\n","import {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Spinner,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {getSchemaTypeTitle} from '../../../../../schema'\nimport {ObjectItem, ObjectItemProps} from '../../../../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../../../hooks/useDidUpdate'\nimport {useChildPresence} from '../../../../studio/contexts/Presence'\nimport {randomKey} from '../../../../utils/randomKey'\nimport {FormFieldValidationStatus} from '../../../../components'\nimport {FieldPresence} from '../../../../../presence'\nimport {useChildValidation} from '../../../../studio/contexts/Validation'\nimport {ChangeIndicator} from '../../../../../changeIndicators'\nimport {CellLayout} from '../../layouts/CellLayout'\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {InsertMenu} from '../InsertMenu'\nimport {FIXME} from '../../../../../FIXME'\nimport {EditPortal} from '../../../../components/EditPortal'\n\ntype GridItemProps<Item extends ObjectItem> = Omit<ObjectItemProps<Item>, 'renderDefault'>\n\nconst PreviewCard = styled(Card)`\n  border-top-right-radius: inherit;\n  border-top-left-radius: inherit;\n  height: 100%;\n  position: relative;\n\n  @media (hover: hover) {\n    &:hover {\n      filter: brightness(95%);\n    }\n  }\n\n  &:focus:focus-visible {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\nconst INITIAL_VALUE_CARD_STYLE = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  bottom: 0,\n  right: 0,\n} as const\n\nexport function GridItem<Item extends ObjectItem = ObjectItem>(props: GridItemProps<Item>) {\n  const {\n    schemaType,\n    parentSchemaType,\n    path,\n    readOnly,\n    onRemove,\n    value,\n    open,\n    onInsert,\n    onFocus,\n    onOpen,\n    onClose,\n    changed,\n    focused,\n    children,\n    inputProps: {renderPreview},\n  } = props\n\n  const sortable = parentSchemaType.options?.sortable !== false\n  const insertableTypes = parentSchemaType.of\n\n  const previewCardRef = useRef<FIXME | null>(null)\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(previewCardRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && previewCardRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      previewCardRef.current?.focus()\n    }\n  })\n\n  const resolvingInitialValue = (value as any)._resolvingInitialValue\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [createProtoArrayValue(insertType)],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n\n  const childPresence = useChildPresence(path, true)\n  const presence = useMemo(() => {\n    return childPresence.length === 0 ? null : (\n      <FieldPresence presence={childPresence} maxAvatars={1} />\n    )\n  }, [childPresence])\n\n  const childValidation = useChildValidation(path, true)\n  const validation = useMemo(() => {\n    return childValidation.length === 0 ? null : (\n      <Box marginLeft={1} paddingX={1} paddingY={3}>\n        <FormFieldValidationStatus validation={childValidation} __unstable_showSummary />\n      </Box>\n    )\n  }, [childValidation])\n\n  const hasErrors = childValidation.some((v) => v.level === 'error')\n  const hasWarnings = childValidation.some((v) => v.level === 'warning')\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <MenuButton\n          button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n          id={`${props.inputId}-menuButton`}\n          menu={\n            <Menu>\n              <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n              <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n              <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n            </Menu>\n          }\n          popover={MENU_POPOVER_PROPS}\n        />\n      ),\n    [handleDuplicate, handleInsert, onRemove, insertableTypes, props.inputId, readOnly]\n  )\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n\n  const item = (\n    <CellLayout\n      menu={menu}\n      presence={presence}\n      validation={validation}\n      tone={tone}\n      radius={2}\n      border\n      focused={focused}\n      dragHandle={sortable}\n      selected={open}\n    >\n      <PreviewCard\n        tone=\"inherit\"\n        overflow=\"auto\"\n        forwardedAs=\"button\"\n        data-ui=\"PreviewCard\"\n        data-as=\"button\"\n        type=\"button\"\n        flex={1}\n        tabIndex={0}\n        disabled={resolvingInitialValue}\n        onClick={onOpen}\n        ref={previewCardRef}\n        onFocus={onFocus}\n        __unstable_focusRing\n      >\n        {renderPreview({\n          schemaType,\n          value,\n          layout: 'media',\n        })}\n        {resolvingInitialValue && (\n          <Card as={Flex} style={INITIAL_VALUE_CARD_STYLE}>\n            <Flex align=\"center\" justify=\"center\" gap={1} padding={1}>\n              <Box padding={3}>\n                <Spinner muted />\n              </Box>\n              <Text muted size={1}>\n                Resolving initial value\n              </Text>\n            </Flex>\n          </Card>\n        )}\n      </PreviewCard>\n    </CellLayout>\n  )\n\n  const itemTypeTitle = getSchemaTypeTitle(schemaType)\n  return (\n    <>\n      <ChangeIndicator path={path} isChanged={changed} hasFocus={Boolean(focused)}>\n        {item}\n      </ChangeIndicator>\n      {open && (\n        <EditPortal\n          header={readOnly ? `View ${itemTypeTitle}` : `Edit ${itemTypeTitle}`}\n          type={parentSchemaType?.options?.modal?.type || 'dialog'}\n          width={parentSchemaType?.options?.modal?.width ?? 1}\n          id={value._key}\n          onClose={onClose}\n          legacy_referenceElement={previewCardRef.current}\n        >\n          {children}\n        </EditPortal>\n      )}\n    </>\n  )\n}\n","import {Box, Card, Code, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: unknown\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function IncompatibleItemType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e: any) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Box>\n              <Text weight=\"semibold\">Why is this happening?</Text>\n            </Box>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        paddingX={2}\n        paddingY={3}\n        style={{height: '100%'}}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        __unstable_focusRing\n        {...rest}\n      >\n        <Stack space={4} marginTop={2}>\n          <Box margin={1}>\n            <Text align=\"center\" size={4}>\n              <UnknownIcon />\n            </Text>\n          </Box>\n          <Text align=\"center\" size={1}>\n            Items of type <code>{typeName}</code> is not valid for this list\n          </Text>\n        </Stack>\n      </Card>\n    </Popover>\n  )\n}\n","import React, {useCallback, useId} from 'react'\nimport {EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Button, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {ArrayItemError} from '../../../../store'\nimport {useFormCallbacks} from '../../../../studio/contexts/FormCallbacks'\nimport {PatchEvent, unset} from '../../../../patch'\nimport {CellLayout} from '../../layouts/CellLayout'\nimport {IncompatibleItemType} from './IncompatibleItemType'\n\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport function ErrorItem(props: {member: ArrayItemError; sortable?: boolean}) {\n  const {member, sortable} = props\n  const id = useId()\n  const {onChange} = useFormCallbacks()\n\n  const handleRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [onChange, member.key])\n\n  return (\n    <CellLayout\n      dragHandle={sortable}\n      tone=\"caution\"\n      style={{height: '100%'}}\n      menu={\n        <MenuButton\n          button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n          id={`${id}-menuButton`}\n          menu={\n            <Menu>\n              <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={handleRemove} />\n            </Menu>\n          }\n          popover={MENU_POPOVER_PROPS}\n        />\n      }\n    >\n      {member.error.type === 'INVALID_ITEM_TYPE' ? (\n        <IncompatibleItemType value={member.error.value} vertical />\n      ) : (\n        <div>Unexpected Error: {member.error.type}</div>\n      )}\n    </CellLayout>\n  )\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {Card, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Item, List} from '../../common/list'\nimport {ArrayOfObjectsInputProps, ObjectItem, ObjectItemProps} from '../../../../types'\nimport {ArrayOfObjectsItem} from '../../../../members'\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {UploadTargetCard} from '../../common/UploadTargetCard'\nimport {ArrayOfObjectsFunctions} from '../ArrayOfObjectsFunctions'\nimport {GridItem} from './GridItem'\nimport {ErrorItem} from './ErrorItem'\n\nconst EMPTY: [] = []\n\nexport function GridArrayInput<Item extends ObjectItem>(props: ArrayOfObjectsInputProps<Item>) {\n  const {\n    schemaType,\n    onChange,\n    value = EMPTY,\n    readOnly,\n    members,\n    elementProps,\n    resolveUploader,\n    onInsert,\n    onItemMove,\n    onUpload,\n    renderPreview,\n    renderField,\n    renderInput,\n    arrayFunctions: ArrayFunctions = ArrayOfObjectsFunctions,\n  } = props\n\n  const handlePrepend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'before', referenceItem: 0})\n    },\n    [onInsert]\n  )\n\n  const handleAppend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'after', referenceItem: -1})\n    },\n    [onInsert]\n  )\n\n  const sortable = schemaType.options?.sortable !== false\n\n  const renderItem = useCallback((itemProps: Omit<ObjectItemProps, 'renderDefault'>) => {\n    // todo: consider using a different item component for references\n    return <GridItem {...itemProps} />\n  }, [])\n\n  return (\n    <Stack space={3}>\n      <UploadTargetCard\n        types={schemaType.of}\n        resolveUploader={resolveUploader}\n        onUpload={onUpload}\n        {...elementProps}\n        tabIndex={0}\n      >\n        <Stack data-ui=\"ArrayInput__content\" space={3}>\n          {members?.length === 0 && (\n            <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n              <Text align=\"center\" muted size={1}>\n                {schemaType.placeholder || <>No items</>}\n              </Text>\n            </Card>\n          )}\n          {members?.length > 0 && (\n            <Card border radius={1}>\n              <List\n                axis=\"xy\"\n                lockAxis=\"xy\"\n                columns={[2, 3, 4]}\n                gap={3}\n                padding={1}\n                margin={1}\n                onItemMove={onItemMove}\n                sortable={sortable}\n              >\n                {members.map((member, index) => (\n                  <Item key={member.key} sortable={sortable} index={index} flex={1}>\n                    {member.kind === 'item' && (\n                      <ArrayOfObjectsItem\n                        member={member}\n                        renderItem={renderItem}\n                        renderField={renderField}\n                        renderInput={renderInput}\n                        renderPreview={renderPreview}\n                      />\n                    )}\n                    {member.kind === 'error' && <ErrorItem sortable={sortable} member={member} />}\n                  </Item>\n                ))}\n              </List>\n            </Card>\n          )}\n        </Stack>\n      </UploadTargetCard>\n\n      <ArrayFunctions\n        onChange={onChange}\n        onItemAppend={handleAppend}\n        onItemPrepend={handlePrepend}\n        onValueCreate={createProtoArrayValue}\n        readOnly={readOnly}\n        schemaType={schemaType}\n        value={value}\n      />\n    </Stack>\n  )\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {Card, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Item, List} from '../../common/list'\nimport {ArrayOfObjectsInputProps, ObjectItem} from '../../../../types'\nimport {ArrayOfObjectsItem} from '../../../../members'\n\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {UploadTargetCard} from '../../common/UploadTargetCard'\nimport {ArrayOfObjectsFunctions} from '../ArrayOfObjectsFunctions'\nimport {ErrorItem} from './ErrorItem'\n\nconst EMPTY: [] = []\n\nexport function ListArrayInput<Item extends ObjectItem>(props: ArrayOfObjectsInputProps<Item>) {\n  const {\n    schemaType,\n    onChange,\n    value = EMPTY,\n    readOnly,\n    members,\n    elementProps,\n    resolveUploader,\n    onInsert,\n    onItemMove,\n    onUpload,\n    renderPreview,\n    renderField,\n    renderItem,\n    renderInput,\n    arrayFunctions: ArrayFunctions = ArrayOfObjectsFunctions,\n  } = props\n\n  const handlePrepend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'before', referenceItem: 0})\n    },\n    [onInsert]\n  )\n\n  const handleAppend = useCallback(\n    (item: Item) => {\n      onInsert({items: [item], position: 'after', referenceItem: -1})\n    },\n    [onInsert]\n  )\n\n  const sortable = schemaType.options?.sortable !== false\n\n  return (\n    <Stack space={3}>\n      <UploadTargetCard\n        types={schemaType.of}\n        resolveUploader={resolveUploader}\n        onUpload={onUpload}\n        {...elementProps}\n        tabIndex={0}\n      >\n        <Stack data-ui=\"ArrayInput__content\" space={3}>\n          {members.length === 0 ? (\n            <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n              <Text align=\"center\" muted size={1}>\n                {schemaType.placeholder || <>No items</>}\n              </Text>\n            </Card>\n          ) : (\n            <Card border radius={1}>\n              <List gap={1} paddingY={1} onItemMove={onItemMove} sortable={sortable}>\n                {members.map((member, index) => (\n                  <Item key={member.key} sortable={sortable} index={index}>\n                    {member.kind === 'item' && (\n                      <ArrayOfObjectsItem\n                        member={member}\n                        renderItem={renderItem}\n                        renderField={renderField}\n                        renderInput={renderInput}\n                        renderPreview={renderPreview}\n                      />\n                    )}\n                    {member.kind === 'error' && <ErrorItem sortable={sortable} member={member} />}\n                  </Item>\n                ))}\n              </List>\n            </Card>\n          )}\n        </Stack>\n      </UploadTargetCard>\n\n      <ArrayFunctions\n        onChange={onChange}\n        onItemAppend={handleAppend}\n        onItemPrepend={handlePrepend}\n        onValueCreate={createProtoArrayValue}\n        readOnly={readOnly}\n        schemaType={schemaType}\n        value={value}\n      />\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {ArrayOfObjectsInputProps} from '../../../types'\nimport {GridArrayInput} from './Grid/GridArrayInput'\nimport {ListArrayInput} from './List/ListArrayInput'\n\n/**\n * @beta\n */\nexport function ArrayOfObjectsInput(props: ArrayOfObjectsInputProps) {\n  const isGrid = props.schemaType.options?.layout === 'grid'\n  return isGrid ? <GridArrayInput {...props} /> : <ListArrayInput {...props} />\n}\n","import React, {useMemo} from 'react'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  isArrayOfPrimitivesInputProps,\n} from '../../types'\nimport {ArrayOfPrimitivesInput} from './ArrayOfPrimitivesInput'\nimport {ArrayOfOptionsInput} from './ArrayOfOptionsInput'\nimport {ArrayOfObjectsInput} from './ArrayOfObjectsInput'\n\n/**\n * Universal array input that will introspect its schemaType and delegate to the right implementation\n * Useful as a fallback/last resort input for an array type\n *\n * @beta\n */\nexport function UniversalArrayInput(props: ArrayOfObjectsInputProps | ArrayOfPrimitivesInputProps) {\n  const isArrayOfOptionsInput = useMemo(\n    () => Array.isArray(props.schemaType.options?.list),\n    [props.schemaType]\n  )\n\n  if (isArrayOfOptionsInput) {\n    return <ArrayOfOptionsInput {...props} />\n  }\n\n  return isArrayOfPrimitivesInputProps(props) ? (\n    <ArrayOfPrimitivesInput {...props} />\n  ) : (\n    <ArrayOfObjectsInput {...props} />\n  )\n}\n","export function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, isHTMLElement, rem, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport type {CSSObject} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from './styles'\n\nconst Root = styled(Box)((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const {focusRing, input, radius} = theme.sanity\n  const color = theme.sanity.color.input\n  const space = rem(theme.sanity.space[1])\n\n  return {\n    position: 'relative',\n    borderRadius: `${radius[1]}px`,\n    color: color.default.enabled.fg,\n    backgroundColor: color.default.enabled.bg,\n    boxShadow: focusRingBorderStyle({\n      color: color.default.enabled.border,\n      width: input.border.width,\n    }),\n\n    '& > .content': {\n      position: 'relative',\n      lineHeight: 0,\n      margin: `-${space} 0 0 -${space}`,\n    },\n\n    '& > .content > div': {\n      display: 'inline-block',\n      verticalAlign: 'top',\n      padding: `${space} 0 0 ${space}`,\n    },\n\n    // enabled\n    '&:not([data-read-only])': {\n      cursor: 'text',\n    },\n\n    // hovered\n    '@media(hover:hover)': {\n      '&:not([data-disabled]):not([data-read-only]):hover': {\n        borderColor: color.default.hovered.border,\n      },\n    },\n\n    // focused\n    '&:not([data-disabled]):not([data-read-only])[data-focused]': {\n      boxShadow: focusRingStyle({\n        border: {\n          color: color.default.enabled.border,\n          width: input.border.width,\n        },\n        focusRing,\n      }),\n    },\n\n    // disabled\n    '*:disabled + &': {\n      color: color.default.disabled.fg,\n      backgroundColor: color.default.disabled.bg,\n      boxShadow: focusRingBorderStyle({\n        color: color.default.disabled.border,\n        width: input.border.width,\n      }),\n    },\n  }\n})\n\nconst Input = styled.input((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const font = theme.sanity.fonts.text\n  const color = theme.sanity.color.input\n  const p = theme.sanity.space[2]\n  const size = theme.sanity.fonts.text.sizes[2]\n\n  return {\n    appearance: 'none',\n    background: 'none',\n    border: 0,\n    borderRadius: 0,\n    outline: 'none',\n    fontSize: rem(size.fontSize),\n    lineHeight: size.lineHeight / size.fontSize,\n    fontFamily: font.family,\n    fontWeight: font.weights.regular,\n    margin: 0,\n    display: 'block',\n    minWidth: '1px',\n    maxWidth: '100%',\n    boxSizing: 'border-box',\n    paddingTop: rem(p - size.ascenderHeight),\n    paddingRight: rem(p),\n    paddingBottom: rem(p - size.descenderHeight),\n    paddingLeft: rem(p),\n\n    // enabled\n    '&:not(:invalid):not(:disabled)': {\n      color: color.default.enabled.fg,\n    },\n\n    // disabled\n    '&:not(:invalid):disabled': {\n      color: color.default.disabled.fg,\n    },\n  }\n})\n\nconst Placeholder = styled(Box)((props: {theme: Theme}) => {\n  const {theme} = props\n  const color = theme.sanity.color.input\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    pointer-events: none;\n    --card-fg-color: ${color.default.enabled.placeholder};\n  `\n})\n\nexport const TagInput = forwardRef(\n  (\n    props: {\n      readOnly?: boolean\n      onChange?: (newValue: {value: string}[]) => void\n      onFocus?: (event: React.FocusEvent) => void\n      placeholder?: string\n      value?: {value: string}[]\n    } & Omit<React.HTMLProps<HTMLInputElement>, 'as' | 'onChange' | 'onFocus' | 'ref' | 'value'>,\n    ref: React.Ref<HTMLInputElement>\n  ) => {\n    const {\n      disabled,\n      onChange,\n      onFocus,\n      placeholder: placeholderProp,\n      readOnly,\n      value = [],\n      ...restProps\n    } = props\n    const placeholder = useMemo(() => {\n      if (placeholderProp) return placeholderProp\n      if (typeof window !== 'undefined' && 'ontouchstart' in window) {\n        return 'Enter tag'\n      }\n      return 'Enter tag and press ENTER'\n    }, [placeholderProp])\n    const [inputValue, setInputValue] = useState('')\n    const enabled = !disabled && !readOnly\n    const [focused, setFocused] = useState(false)\n    const forwardedRef = useForwardedRef(ref)\n    const rootRef = useRef<HTMLDivElement | null>(null)\n\n    const handleRootPointerDown = useCallback(\n      (event: React.PointerEvent<HTMLDivElement>) => {\n        const isTagElement = isHTMLElement(event.target) && event.target.closest('[data-ui=\"Tag\"]')\n\n        if (isTagElement) return\n\n        const inputElement = forwardedRef.current\n\n        if (inputElement) {\n          setTimeout(() => inputElement.focus(), 0)\n        }\n      },\n      [forwardedRef]\n    )\n\n    const handleInputBlur = useCallback(() => {\n      setFocused(false)\n    }, [])\n\n    const handleInputChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n      setInputValue(event.currentTarget.value)\n    }, [])\n\n    const handleInputFocus = useCallback(\n      (event: React.FocusEvent) => {\n        setFocused(true)\n        if (onFocus) onFocus(event)\n      },\n      [onFocus]\n    )\n\n    const handleInputKeyDown = useCallback(\n      (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n          event.preventDefault()\n          event.stopPropagation()\n\n          if (onChange && inputValue) {\n            const newValue = value.concat([{value: inputValue}])\n\n            setInputValue('')\n\n            if (onChange) onChange(newValue)\n          }\n        }\n      },\n      [inputValue, onChange, value]\n    )\n\n    const handleTagRemove = useCallback(\n      (index: number) => {\n        if (!onChange) return\n\n        const newValue = value.slice(0)\n\n        newValue.splice(index, 1)\n\n        onChange(newValue)\n      },\n      [onChange, value]\n    )\n\n    useEffect(() => {\n      const inputElement = forwardedRef.current\n\n      if (inputElement) {\n        inputElement.style.width = '0'\n        inputElement.style.width = `${inputElement.scrollWidth}px`\n      }\n    }, [forwardedRef, inputValue])\n\n    return (\n      <Root\n        data-disabled={disabled ? '' : undefined}\n        data-focused={focused ? '' : undefined}\n        data-read-only={readOnly ? '' : undefined}\n        data-ui=\"TagInput\"\n        onPointerDown={handleRootPointerDown}\n        padding={1}\n        ref={rootRef}\n      >\n        {enabled && (\n          <Placeholder hidden={Boolean(inputValue || value.length)} padding={3}>\n            <Text textOverflow=\"ellipsis\">{placeholder}</Text>\n          </Placeholder>\n        )}\n\n        <div className=\"content\">\n          {value.map((tag, tagIndex) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <div key={`tag-${tagIndex}`}>\n              <Tag\n                enabled={enabled}\n                index={tagIndex}\n                muted={disabled}\n                onRemove={handleTagRemove}\n                tag={tag}\n              />\n            </div>\n          ))}\n\n          <div key=\"tag-input\">\n            <Input\n              {...restProps}\n              disabled={!enabled}\n              onBlur={handleInputBlur}\n              onChange={handleInputChange}\n              onFocus={handleInputFocus}\n              onKeyDown={handleInputKeyDown}\n              ref={forwardedRef}\n              type=\"text\"\n              value={inputValue}\n            />\n          </div>\n        </div>\n      </Root>\n    )\n  }\n)\n\nTagInput.displayName = 'TagInput'\n\nfunction Tag(props: {\n  enabled: boolean\n  index: number\n  muted?: boolean\n  onRemove: (index: number) => void\n  tag: {value: string}\n}) {\n  const {enabled, index, muted, onRemove, tag} = props\n\n  const handleRemoveClick = useCallback(() => {\n    onRemove(index)\n  }, [index, onRemove])\n\n  return (\n    <Card data-ui=\"Tag\" padding={1} radius={2} tone=\"transparent\">\n      <Flex align=\"center\">\n        <Box flex={1} padding={1}>\n          <Text muted={muted}>{tag.value}</Text>\n        </Box>\n\n        {enabled && (\n          <Box marginLeft={1}>\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={handleRemoveClick} padding={1} />\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {set, unset} from '../patch'\nimport {TagInput} from '../components/tagInput'\nimport {ArrayOfPrimitivesInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type TagsArrayInputProps = ArrayOfPrimitivesInputProps<string>\n\n/**\n * @beta\n */\nexport function TagsArrayInput(props: TagsArrayInputProps) {\n  const {onChange, readOnly, value = [], elementProps} = props\n  const tagInputValue = useMemo(() => value?.map((v) => ({value: v})), [value])\n\n  const handleChange = useCallback(\n    (nextValue: {value: string}[]) => {\n      onChange(nextValue.length === 0 ? unset() : set(nextValue.map((v) => v.value)))\n    },\n    [onChange]\n  )\n\n  return (\n    <TagInput onChange={handleChange} readOnly={readOnly} value={tagInputValue} {...elementProps} />\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {Box, Card, Checkbox, Flex, Switch} from '@sanity/ui'\nimport {BooleanInputProps} from '../types'\nimport {FormFieldHeaderText} from '../components/formField/FormFieldHeaderText'\nimport {FormFieldStatus} from '../components/formField/FormFieldStatus'\n\nconst CenterAlignedBox = styled(Box)`\n  align-self: center;\n`\n\nconst ZeroLineHeightBox = styled(Box)`\n  line-height: 0;\n`\n\n/**\n * @beta\n */\nexport function BooleanInput(props: BooleanInputProps) {\n  const {id, value, schemaType, readOnly, elementProps} = props\n  const layout = schemaType.options?.layout || 'switch'\n\n  const indeterminate = typeof value !== 'boolean'\n  const checked = value || false\n\n  const LayoutSpecificInput = layout === 'checkbox' ? Checkbox : Switch\n\n  return (\n    <Card border data-testid=\"boolean-input\" radius={1}>\n      <Flex>\n        <ZeroLineHeightBox padding={3}>\n          <LayoutSpecificInput\n            label={schemaType.title}\n            {...elementProps}\n            indeterminate={indeterminate}\n            checked={checked}\n            style={{margin: -4}}\n            disabled={readOnly}\n          />\n        </ZeroLineHeightBox>\n        <Box flex={1} paddingY={3}>\n          <FormFieldHeaderText\n            description={schemaType.description}\n            inputId={id}\n            // validation={validation}\n            title={schemaType.title}\n          />\n        </Box>\n        <CenterAlignedBox paddingX={3} paddingY={1}>\n          <FormFieldStatus maxAvatars={1} position=\"top\">\n            {/*<FieldPresence maxAvatars={1} presence={presence} />*/}\n          </FormFieldStatus>\n        </CenterAlignedBox>\n      </Flex>\n    </Card>\n  )\n}\n","import {Card, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\ninterface CalendarDayProps {\n  date: Date\n  focused?: boolean\n  onSelect: (date: Date) => void\n  isCurrentMonth?: boolean\n  isToday: boolean\n  selected?: boolean\n}\n\nexport function CalendarDay(props: CalendarDayProps) {\n  const {date, focused, isCurrentMonth, isToday, onSelect, selected} = props\n\n  const handleClick = useCallback(() => {\n    onSelect(date)\n  }, [date, onSelect])\n\n  return (\n    <div aria-selected={selected} data-ui=\"CalendarDay\">\n      <Card\n        aria-label={date.toDateString()}\n        aria-pressed={selected}\n        as=\"button\"\n        __unstable_focusRing\n        data-weekday\n        data-focused={focused ? 'true' : ''}\n        role=\"button\"\n        tabIndex={-1}\n        onClick={handleClick}\n        padding={3}\n        radius={2}\n        selected={selected}\n        tone={isToday || selected ? 'primary' : 'default'}\n      >\n        <Text\n          muted={!selected && !isCurrentMonth}\n          style={{textAlign: 'center'}}\n          weight={isCurrentMonth ? 'medium' : 'regular'}\n        >\n          {date.getDate()}\n        </Text>\n      </Card>\n    </div>\n  )\n}\n","import {range} from 'lodash'\n\nexport const MONTH_NAMES = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const WEEK_DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n\nexport const HOURS_24 = range(0, 24)\n\nexport const ARROW_KEYS = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight']\n\nexport const DEFAULT_TIME_PRESETS = [\n  [0, 0],\n  [6, 0],\n  [12, 0],\n  [18, 0],\n  [23, 59],\n]\n\n// all weekdays except first\nexport const TAIL_WEEKDAYS = [1, 2, 3, 4, 5, 6]\n","import {addDays, eachWeekOfInterval, getWeek, lastDayOfMonth, startOfMonth} from 'date-fns'\nimport {TAIL_WEEKDAYS} from './constants'\n\nexport const getWeekStartsOfMonth = (date: Date): Date[] => {\n  const firstDay = startOfMonth(date)\n  return eachWeekOfInterval({\n    start: firstDay,\n    end: lastDayOfMonth(firstDay),\n  })\n}\n\nexport const getWeekDaysFromWeekStarts = (weekStarts: Date[]): Date[][] => {\n  return weekStarts.map((weekStart) => [\n    weekStart,\n    ...TAIL_WEEKDAYS.map((d) => addDays(weekStart, d)),\n  ])\n}\n\ntype Week = {\n  number: number\n  days: Date[]\n}\n\nexport const getWeeksOfMonth = (date: Date): Week[] =>\n  getWeekDaysFromWeekStarts(getWeekStartsOfMonth(date)).map(\n    (days): Week => ({\n      number: getWeek(days[0]),\n      days,\n    })\n  )\n\nexport const formatTime = (hours: number, minutes: number): string =>\n  `${`${hours}`.padStart(2, '0')}:${`${minutes}`.padStart(2, '0')}`\n","import {Box, Grid, Text} from '@sanity/ui'\nimport {isSameDay, isSameMonth} from 'date-fns'\nimport React from 'react'\nimport {CalendarDay} from './CalendarDay'\nimport {WEEK_DAY_NAMES} from './constants'\nimport {getWeeksOfMonth} from './utils'\n\ninterface CalendarMonthProps {\n  date: Date\n  focused?: Date\n  selected?: Date\n  onSelect: (date: Date) => void\n  hidden?: boolean\n}\n\nexport function CalendarMonth(props: CalendarMonthProps) {\n  return (\n    <Box aria-hidden={props.hidden || false} data-ui=\"CalendarMonth\">\n      <Grid gap={1} style={{gridTemplateColumns: 'repeat(7, minmax(44px, 46px))'}}>\n        {WEEK_DAY_NAMES.map((weekday) => (\n          <Box key={weekday} paddingY={2}>\n            <Text size={1} weight=\"medium\" style={{textAlign: 'center'}}>\n              {weekday}\n            </Text>\n          </Box>\n        ))}\n\n        {getWeeksOfMonth(props.date).map((week, weekIdx) =>\n          week.days.map((date, dayIdx) => {\n            const focused = props.focused && isSameDay(date, props.focused)\n            const selected = props.selected && isSameDay(date, props.selected)\n            const isToday = isSameDay(date, new Date())\n            const isCurrentMonth = props.focused && isSameMonth(date, props.focused)\n\n            return (\n              <CalendarDay\n                date={date}\n                focused={focused}\n                isCurrentMonth={isCurrentMonth}\n                isToday={isToday}\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${weekIdx}-${dayIdx}`}\n                onSelect={props.onSelect}\n                selected={selected}\n              />\n            )\n          })\n        )}\n      </Grid>\n    </Box>\n  )\n}\n","export const features = {\n  dayPresets: false,\n  timePresets: false,\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\n\ntype TextInputProps = React.ComponentProps<typeof TextInput>\n\n// todo: delete this when v0.34 of @sanity/ui is out\ntype Workaround = any\n\ntype Props = Workaround &\n  Omit<TextInputProps, 'onChange'> & {\n    onChange?: (\n      event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>\n    ) => void\n  }\n\n/**\n * A TextInput that only emit onChange when it has to\n * By default it will only emit onChange when: 1) user hits enter or 2) user leaves the\n * field (e.g. onBlur) and the input value at this time is different from the given `value` prop\n */\nexport const LazyTextInput = React.forwardRef(function LazyTextInput(\n  {onChange, onBlur, onKeyPress, value, ...rest}: Props,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const [inputValue, setInputValue] = React.useState<string>()\n\n  const handleChange = React.useCallback((event: any) => {\n    setInputValue(event.currentTarget.value)\n  }, [])\n\n  const checkEvent = React.useCallback(\n    (event: any) => {\n      const currentValue = event.currentTarget.value\n      if (currentValue !== `${value}`) {\n        if (onChange) {\n          onChange(event)\n        }\n      }\n      setInputValue(undefined)\n    },\n    [onChange, value]\n  )\n\n  const handleBlur = React.useCallback(\n    (e: any) => {\n      checkEvent(e)\n      if (onBlur) {\n        onBlur(e)\n      }\n    },\n    [checkEvent, onBlur]\n  )\n\n  const handleKeyPress = React.useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        checkEvent(e)\n      }\n      if (onKeyPress) {\n        onKeyPress(e)\n      }\n    },\n    [checkEvent, onKeyPress]\n  )\n\n  return (\n    <TextInput\n      {...rest}\n      data-testid=\"date-input\"\n      ref={forwardedRef}\n      value={inputValue === undefined ? value : inputValue}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      onKeyPress={handleKeyPress}\n    />\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {LazyTextInput} from '../LazyTextInput'\n\ntype Props = Omit<React.ComponentProps<typeof TextInput>, 'onChange' | 'value'> & {\n  value?: number\n  onChange: (year: number) => void\n}\n\nexport const YearInput = ({onChange, ...props}: Props) => {\n  const handleChange = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>) => {\n      const numericValue = parseInt(event.currentTarget.value, 10)\n      if (!isNaN(numericValue)) {\n        onChange(numericValue)\n      }\n    },\n    [onChange]\n  )\n\n  return <LazyTextInput {...props} onChange={handleChange} inputMode=\"numeric\" />\n}\n","import {Box, Button, Flex, Grid, Select, Text, useForwardedRef} from '@sanity/ui'\nimport {ChevronLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {addDays, addMonths, setDate, setHours, setMinutes, setMonth, setYear} from 'date-fns'\nimport {range} from 'lodash'\nimport React, {forwardRef, useCallback, useEffect} from 'react'\nimport {CalendarMonth} from './CalendarMonth'\nimport {ARROW_KEYS, HOURS_24, MONTH_NAMES, DEFAULT_TIME_PRESETS} from './constants'\nimport {features} from './features'\nimport {formatTime} from './utils'\nimport {YearInput} from './YearInput'\n\ntype CalendarProps = Omit<React.ComponentProps<'div'>, 'onSelect'> & {\n  selectTime?: boolean\n  selectedDate?: Date\n  timeStep?: number\n  onSelect: (date: Date) => void\n  focusedDate: Date\n  onFocusedDateChange: (index: Date) => void\n}\n\n// This is used to maintain focus on a child element of the calendar-grid between re-renders\n// When using arrow keys to move focus from a day in one month to another we are setting focus at the button for the day\n// after it has changed but *only* if we *already* had focus inside the calendar grid (e.g not if focus was on the \"next\n// year\" button, or any of the other controls)\n// When moving from the last day of a month that displays 6 weeks in the grid to a month that displays 5 weeks, current\n// focus gets lost on render, so this provides us with a stable element to help us preserve focus on a child element of\n// the calendar grid between re-renders\nconst PRESERVE_FOCUS_ELEMENT = (\n  <span\n    data-preserve-focus\n    style={{overflow: 'hidden', position: 'absolute', outline: 'none'}}\n    tabIndex={-1}\n  />\n)\n\nexport const Calendar = forwardRef(function Calendar(\n  props: CalendarProps,\n  forwardedRef: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    selectTime,\n    onFocusedDateChange,\n    selectedDate = new Date(),\n    focusedDate = selectedDate,\n    timeStep = 1,\n    onSelect,\n    ...restProps\n  } = props\n\n  const setFocusedDate = useCallback(\n    (date: Date) => onFocusedDateChange(date),\n    [onFocusedDateChange]\n  )\n\n  const setFocusedDateMonth = useCallback(\n    (month: number) => setFocusedDate(setDate(setMonth(focusedDate, month), 1)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleFocusedMonthChange = useCallback(\n    (e: React.FormEvent<HTMLSelectElement>) => setFocusedDateMonth(Number(e.currentTarget.value)),\n    [setFocusedDateMonth]\n  )\n\n  const moveFocusedDate = useCallback(\n    (by: number) => setFocusedDate(addMonths(focusedDate, by)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const setFocusedDateYear = useCallback(\n    (year: number) => setFocusedDate(setYear(focusedDate, year)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleDateChange = useCallback(\n    (date: Date) => {\n      onSelect(setMinutes(setHours(date, selectedDate.getHours()), selectedDate.getMinutes()))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleMinutesChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setMinutes(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleHoursChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setHours(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleTimeChange = useCallback(\n    (hours: number, mins: number) => {\n      onSelect(setHours(setMinutes(selectedDate, mins), hours))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const ref = useForwardedRef(forwardedRef)\n\n  const focusCurrentWeekDay = useCallback(() => {\n    ref.current?.querySelector<HTMLElement>(`[data-focused=\"true\"]`)?.focus()\n  }, [ref])\n\n  const handleKeyDown = useCallback(\n    (event: any) => {\n      if (!ARROW_KEYS.includes(event.key)) {\n        return\n      }\n      event.preventDefault()\n      if (event.target.hasAttribute('data-calendar-grid')) {\n        focusCurrentWeekDay()\n        return\n      }\n      if (event.key === 'ArrowUp') {\n        onFocusedDateChange(addDays(focusedDate, -7))\n      }\n      if (event.key === 'ArrowDown') {\n        onFocusedDateChange(addDays(focusedDate, 7))\n      }\n      if (event.key === 'ArrowLeft') {\n        onFocusedDateChange(addDays(focusedDate, -1))\n      }\n      if (event.key === 'ArrowRight') {\n        onFocusedDateChange(addDays(focusedDate, 1))\n      }\n      // set focus temporarily on this element to make sure focus is still inside the calendar-grid after re-render\n      ref.current?.querySelector<HTMLElement>('[data-preserve-focus]')?.focus()\n    },\n    [ref, focusCurrentWeekDay, onFocusedDateChange, focusedDate]\n  )\n\n  useEffect(() => {\n    focusCurrentWeekDay()\n  }, [focusCurrentWeekDay])\n\n  useEffect(() => {\n    const currentFocusInCalendarGrid = document.activeElement?.matches(\n      '[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]'\n    )\n    if (\n      // Only move focus if it's currently in the calendar grid\n      currentFocusInCalendarGrid\n    ) {\n      focusCurrentWeekDay()\n    }\n  }, [ref, focusCurrentWeekDay, focusedDate])\n\n  const handleYesterdayClick = useCallback(\n    () => handleDateChange(addDays(new Date(), -1)),\n    [handleDateChange]\n  )\n\n  const handleTodayClick = useCallback(() => handleDateChange(new Date()), [handleDateChange])\n\n  const handleTomorrowClick = useCallback(\n    () => handleDateChange(addDays(new Date(), 1)),\n    [handleDateChange]\n  )\n\n  const handleNowClick = useCallback(() => onSelect(new Date()), [onSelect])\n\n  return (\n    <Box data-ui=\"Calendar\" {...restProps} ref={ref}>\n      {/* Select date */}\n      <Box padding={2}>\n        {/* Day presets */}\n        {features.dayPresets && (\n          <Grid columns={3} data-ui=\"CalendaryDayPresets\" gap={1}>\n            <Button text=\"Yesterday\" mode=\"bleed\" fontSize={1} onClick={handleYesterdayClick} />\n            <Button text=\"Today\" mode=\"bleed\" fontSize={1} onClick={handleTodayClick} />\n            <Button text=\"Tomorrow\" mode=\"bleed\" fontSize={1} onClick={handleTomorrowClick} />\n          </Grid>\n        )}\n\n        {/* Select month and year */}\n        <Flex>\n          <Box flex={1}>\n            <CalendarMonthSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={handleFocusedMonthChange}\n              value={focusedDate?.getMonth()}\n            />\n          </Box>\n          <Box marginLeft={2}>\n            <CalendarYearSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={setFocusedDateYear}\n              value={focusedDate.getFullYear()}\n            />\n          </Box>\n        </Flex>\n\n        {/* Selected month (grid of days) */}\n        <Box\n          data-calendar-grid\n          onKeyDown={handleKeyDown}\n          marginTop={2}\n          overflow=\"hidden\"\n          tabIndex={0}\n        >\n          <CalendarMonth\n            date={focusedDate}\n            focused={focusedDate}\n            onSelect={handleDateChange}\n            selected={selectedDate}\n          />\n          {PRESERVE_FOCUS_ELEMENT}\n        </Box>\n      </Box>\n\n      {/* Select time */}\n      {selectTime && (\n        <Box padding={2} style={{borderTop: '1px solid var(--card-border-color)'}}>\n          <Flex align=\"center\">\n            <Flex align=\"center\" flex={1}>\n              <Box>\n                <Select\n                  aria-label=\"Select hour\"\n                  value={selectedDate?.getHours()}\n                  onChange={handleHoursChange}\n                >\n                  {HOURS_24.map((h) => (\n                    <option key={h} value={h}>\n                      {`${h}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n\n              <Box paddingX={1}>\n                <Text>:</Text>\n              </Box>\n\n              <Box>\n                <Select\n                  aria-label=\"Select minutes\"\n                  value={selectedDate?.getMinutes()}\n                  onChange={handleMinutesChange}\n                >\n                  {range(0, 60, timeStep).map((m) => (\n                    <option key={m} value={m}>\n                      {`${m}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n            </Flex>\n\n            <Box marginLeft={2}>\n              <Button text=\"Set to current time\" mode=\"bleed\" onClick={handleNowClick} />\n            </Box>\n          </Flex>\n\n          {features.timePresets && (\n            <Flex direction=\"row\" justify=\"center\" align=\"center\" style={{marginTop: 5}}>\n              {DEFAULT_TIME_PRESETS.map(([hours, minutes]) => {\n                return (\n                  <CalendarTimePresetButton\n                    key={`${hours}-${minutes}`}\n                    hours={hours}\n                    minutes={minutes}\n                    onTimeChange={handleTimeChange}\n                    selectedDate={selectedDate}\n                  />\n                )\n              })}\n            </Flex>\n          )}\n        </Box>\n      )}\n    </Box>\n  )\n})\n\nfunction CalendarTimePresetButton(props: {\n  hours: number\n  minutes: number\n  onTimeChange: (hours: number, minutes: number) => void\n  selectedDate: Date\n}) {\n  const {hours, minutes, onTimeChange, selectedDate} = props\n  const formatted = formatTime(hours, minutes)\n\n  const handleClick = useCallback(() => {\n    onTimeChange(hours, minutes)\n  }, [hours, minutes, onTimeChange])\n\n  return (\n    <Button\n      text={formatted}\n      aria-label={`${formatted} on ${selectedDate.toDateString()}`}\n      mode=\"bleed\"\n      fontSize={1}\n      onClick={handleClick}\n    />\n  )\n}\n\nfunction CalendarMonthSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (e: React.FormEvent<HTMLSelectElement>) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevMonthClick = useCallback(() => moveFocusedDate(-1), [moveFocusedDate])\n\n  const handleNextMonthClick = useCallback(() => moveFocusedDate(1), [moveFocusedDate])\n\n  return (\n    <Flex flex={1}>\n      <Button\n        aria-label=\"Go to previous month\"\n        onClick={handlePrevMonthClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <Box flex={1}>\n        <Select radius={0} value={value} onChange={onChange}>\n          {MONTH_NAMES.map((m, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>\n              {m}\n            </option>\n          ))}\n        </Select>\n      </Box>\n      <Button\n        aria-label=\"Go to next month\"\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        onClick={handleNextMonthClick}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n\nfunction CalendarYearSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (year: number) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevYearClick = useCallback(() => moveFocusedDate(-12), [moveFocusedDate])\n\n  const handleNextYearClick = useCallback(() => moveFocusedDate(12), [moveFocusedDate])\n\n  return (\n    <Flex>\n      <Button\n        aria-label=\"Previous year\"\n        onClick={handlePrevYearClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <YearInput value={value} onChange={onChange} radius={0} style={{width: 65}} />\n      <Button\n        aria-label=\"Next year\"\n        onClick={handleNextYearClick}\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Calendar} from './calendar/Calendar'\n\nexport const DatePicker = React.forwardRef(function DatePicker(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    value?: Date\n    onChange: (nextDate: Date) => void\n    selectTime?: boolean\n    timeStep?: number\n  },\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {value = new Date(), onChange, ...rest} = props\n  const [focusedDate, setFocusedDay] = React.useState<Date>()\n\n  const handleSelect = React.useCallback(\n    (nextDate: any) => {\n      onChange(nextDate)\n      setFocusedDay(undefined)\n    },\n    [onChange]\n  )\n\n  return (\n    <Calendar\n      {...rest}\n      ref={ref}\n      selectedDate={value}\n      onSelect={handleSelect}\n      focusedDate={focusedDate || value}\n      onFocusedDateChange={setFocusedDay}\n    />\n  )\n})\n","import React, {forwardRef, useCallback, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport {Box, Button, LayerProvider, Popover, useClickOutside, useForwardedRef} from '@sanity/ui'\nimport {CalendarIcon} from '@sanity/icons'\nimport {DatePicker} from './DatePicker'\nimport {LazyTextInput} from './LazyTextInput'\n\nexport interface DateTimeInputProps {\n  customValidity?: string\n  id?: string\n  inputValue?: string\n  onChange: (date: Date | null) => void\n  onInputChange?: (event: React.FocusEvent<HTMLInputElement>) => void\n  placeholder?: string\n  readOnly?: boolean\n  selectTime?: boolean\n  timeStep?: number\n  value?: Date\n}\n\nexport const DateTimeInput = forwardRef(function DateTimeInput(\n  props: DateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {value, inputValue, onInputChange, onChange, selectTime, timeStep, ...rest} = props\n  const [popoverRef, setPopoverRef] = useState<HTMLElement | null>(null)\n  const forwardedRef = useForwardedRef(ref)\n  const buttonRef = useRef(null)\n\n  const [isPickerOpen, setPickerOpen] = useState(false)\n\n  useClickOutside(() => setPickerOpen(false), [popoverRef])\n\n  const handleDeactivation = useCallback(() => {\n    forwardedRef.current?.focus()\n    forwardedRef.current?.select()\n  }, [forwardedRef])\n\n  const handleKeyUp = useCallback((e: any) => {\n    if (e.key === 'Escape') {\n      setPickerOpen(false)\n    }\n  }, [])\n\n  const handleClick = useCallback(() => setPickerOpen(true), [])\n\n  const suffix = (\n    <Box padding={1}>\n      <Button\n        ref={buttonRef}\n        icon={CalendarIcon}\n        mode=\"bleed\"\n        padding={2}\n        onClick={handleClick}\n        style={{display: 'block'}}\n        data-testid=\"select-date-button\"\n      />\n    </Box>\n  )\n\n  return (\n    <LazyTextInput\n      ref={forwardedRef}\n      {...rest}\n      value={inputValue}\n      onChange={onInputChange}\n      suffix={\n        isPickerOpen ? (\n          // Note: we're conditionally inserting the popover here due to an\n          // issue with popovers rendering incorrectly on subsequent renders\n          // see https://github.com/sanity-io/design/issues/519\n          <LayerProvider zOffset={1000}>\n            <Popover\n              constrainSize\n              data-testid=\"date-input-dialog\"\n              portal\n              content={\n                <Box overflow=\"auto\">\n                  <FocusLock onDeactivation={handleDeactivation}>\n                    <DatePicker\n                      selectTime={selectTime}\n                      timeStep={timeStep}\n                      onKeyUp={handleKeyUp}\n                      value={value}\n                      onChange={onChange}\n                    />\n                  </FocusLock>\n                </Box>\n              }\n              open\n              placement=\"bottom\"\n              ref={setPopoverRef}\n              radius={2}\n            >\n              {suffix}\n            </Popover>\n          </LayerProvider>\n        ) : (\n          suffix\n        )\n      }\n    />\n  )\n})\n","/* eslint-disable no-nested-ternary */\n\nimport React, {useEffect} from 'react'\n\nimport {TextInput, useForwardedRef} from '@sanity/ui'\nimport {DateTimeInput} from './base/DateTimeInput'\nimport {ParseResult} from './types'\n\nexport interface CommonDateTimeInputProps {\n  id: string\n  deserialize: (value: string) => ParseResult\n  formatInputValue: (date: Date) => string\n  onChange: (nextDate: string | null) => void\n  parseInputValue: (inputValue: string) => ParseResult\n  placeholder?: string\n  readOnly: boolean | undefined\n  selectTime?: boolean\n  serialize: (date: Date) => string\n  timeStep?: number\n  value: string | undefined\n}\n\nconst DEFAULT_PLACEHOLDER_TIME = new Date()\n\nexport const CommonDateTimeInput = React.forwardRef(function CommonDateTimeInput(\n  props: CommonDateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    id,\n    deserialize,\n    formatInputValue,\n    onChange,\n    parseInputValue,\n    placeholder,\n    readOnly,\n    selectTime,\n    serialize,\n    timeStep,\n    value,\n    ...restProps\n  } = props\n\n  const [localValue, setLocalValue] = React.useState<string | null>(null)\n\n  useEffect(() => {\n    setLocalValue(null)\n  }, [value])\n\n  const handleDatePickerInputChange = React.useCallback(\n    (event: any) => {\n      const nextInputValue = event.currentTarget.value\n      const result = nextInputValue === '' ? null : parseInputValue(nextInputValue)\n\n      if (result === null) {\n        onChange(null)\n\n        // If the field value is undefined and we are clearing the invalid value\n        // the above useEffect won't trigger, so we do some extra clean up here\n        if (typeof value === 'undefined' && localValue) {\n          setLocalValue(null)\n        }\n      } else if (result.isValid) {\n        onChange(serialize(result.date))\n      } else {\n        setLocalValue(nextInputValue)\n      }\n    },\n    [localValue, serialize, onChange, parseInputValue]\n  )\n\n  const handleDatePickerChange = React.useCallback(\n    (nextDate: Date | null) => {\n      onChange(nextDate ? serialize(nextDate) : null)\n    },\n    [serialize, onChange]\n  )\n\n  const forwardedRef = useForwardedRef(ref)\n\n  const parseResult = localValue ? parseInputValue(localValue) : value ? deserialize(value) : null\n\n  const inputValue = localValue\n    ? localValue\n    : parseResult?.isValid\n    ? formatInputValue(parseResult.date)\n    : value\n\n  return readOnly ? (\n    <TextInput value={inputValue} readOnly />\n  ) : (\n    <DateTimeInput\n      {...restProps}\n      id={id}\n      selectTime={selectTime}\n      timeStep={timeStep}\n      placeholder={placeholder || `e.g. ${formatInputValue(DEFAULT_PLACEHOLDER_TIME)}`}\n      ref={forwardedRef}\n      value={parseResult?.date}\n      inputValue={inputValue || ''}\n      readOnly={Boolean(readOnly)}\n      onInputChange={handleDatePickerInputChange}\n      onChange={handleDatePickerChange}\n      customValidity={parseResult?.error}\n    />\n  )\n})\n","export function isValidDate(date: Date) {\n  return date instanceof Date && !isNaN(date.valueOf())\n}\n","import {format, parse} from '@sanity/util/legacyDateFormat'\nimport {getMinutes, setMinutes, parseISO} from 'date-fns'\nimport React, {useCallback} from 'react'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\nimport {ParseResult} from './types'\nimport {isValidDate} from './utils'\n\ninterface ParsedOptions {\n  dateFormat: string\n  timeFormat: string\n  timeStep: number\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  timeFormat?: string\n  timeStep?: number\n  calendarTodayLabel?: string\n}\n\n/** @beta */\nexport type DateTimeInputProps = StringInputProps\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    timeFormat: options.timeFormat || DEFAULT_TIME_FORMAT,\n    timeStep: ('timeStep' in options && Number(options.timeStep)) || 1,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nfunction serialize(date: Date) {\n  return date.toISOString()\n}\nfunction deserialize(isoString: string): ParseResult {\n  const deserialized = new Date(isoString)\n  if (isValidDate(deserialized)) {\n    return {isValid: true, date: deserialized}\n  }\n  return {isValid: false, error: `Invalid date value: \"${isoString}\"`}\n}\n\n// enforceTimeStep takes a dateString and datetime schema options and enforces the time\n// to be within the configured timeStep\nfunction enforceTimeStep(dateString: string, timeStep: number) {\n  if (!timeStep || timeStep === 1) {\n    return dateString\n  }\n\n  const date = parseISO(dateString)\n  const minutes = getMinutes(date)\n  const leftOver = minutes % timeStep\n  if (leftOver !== 0) {\n    return serialize(setMinutes(date, minutes - leftOver))\n  }\n\n  return serialize(date)\n}\n\n/** @beta */\nexport function DateTimeInput(props: DateTimeInputProps) {\n  const {onChange, schemaType, value, elementProps} = props\n\n  const {dateFormat, timeFormat, timeStep} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      let date = nextDate\n      if (date !== null && timeStep > 1) {\n        date = enforceTimeStep(date, timeStep)\n      }\n\n      onChange(date === null ? unset() : set(date))\n    },\n    [onChange, timeStep]\n  )\n\n  const formatInputValue = React.useCallback(\n    (date: Date) => format(date, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  const parseInputValue = React.useCallback(\n    (inputValue: string) => parse(inputValue, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      onChange={handleChange}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      selectTime\n      serialize={serialize}\n      timeStep={timeStep}\n      value={value}\n    />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {format, parse} from '@sanity/util/legacyDateFormat'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\n\ninterface ParsedOptions {\n  dateFormat: string\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  calendarTodayLabel?: string\n}\n\n/** @beta */\nexport type DateInputProps = StringInputProps\n\n// This is the format dates are stored on\nconst VALUE_FORMAT = 'YYYY-MM-DD'\n// default to how they are stored\nconst DEFAULT_DATE_FORMAT = VALUE_FORMAT\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nconst deserialize = (value: string) => parse(value, VALUE_FORMAT)\nconst serialize = (date: Date) => format(date, VALUE_FORMAT)\n\n/** @beta */\nexport function DateInput(props: DateInputProps) {\n  const {readOnly, onChange, schemaType, elementProps, value} = props\n  const {dateFormat} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      onChange(nextDate === null ? unset() : set(nextDate))\n    },\n    [onChange]\n  )\n\n  const formatInputValue = useCallback((date: Date) => format(date, dateFormat), [dateFormat])\n\n  const parseInputValue = useCallback(\n    (inputValue: string) => parse(inputValue, dateFormat),\n    [dateFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      onChange={handleChange}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      readOnly={readOnly}\n      selectTime={false}\n      serialize={serialize}\n      value={value}\n    />\n  )\n}\n","import type {SchemaType, RuleSpec, SchemaValidationValue, Rule} from '@sanity/types'\n\nconst normalizeRules = (\n  validation: SchemaValidationValue | undefined,\n  type?: SchemaType\n): Rule[] => {\n  if (typeof validation === 'function') {\n    throw new Error(\n      `Schema type \"${\n        type?.name || '<not-found>'\n      }\"'s \\`validation\\` was not run though \\`inferFromSchema\\``\n    )\n  }\n  if (!validation) return []\n  if (Array.isArray(validation)) return validation as Rule[]\n  return [validation]\n}\n\n/**\n * Finds the first matching validation rule spec from a Rule class instance.\n *\n * @internal\n * Note: This accesses private fields of the rule.\n */\nexport function getValidationRule<RuleFlag extends RuleSpec['flag']>(\n  type: SchemaType | undefined,\n  ruleName: RuleFlag\n): Extract<RuleSpec, {flag: RuleFlag}> | null {\n  for (const rule of normalizeRules(type?.validation, type)) {\n    for (const ruleSpec of rule._rules) {\n      if (ruleSpec.flag === ruleName) {\n        return ruleSpec as Extract<RuleSpec, {flag: RuleFlag}>\n      }\n    }\n  }\n\n  return null\n}\n","import React from 'react'\n\nimport {TextInput} from '@sanity/ui'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {NumberInputProps} from '../types'\n\n/**\n * @beta\n */\nexport function NumberInput(props: NumberInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  // Show numpad on mobile if only positive numbers is preferred\n  const minRule = getValidationRule(schemaType, 'min')\n  const onlyPositiveNumber = (minRule?.constraint || 0) >= 0\n\n  return (\n    <TextInput\n      {...elementProps}\n      type=\"number\"\n      step=\"any\"\n      inputMode={onlyPositiveNumber ? 'numeric' : 'text'}\n      customValidity={validationError}\n      value={value}\n      placeholder={schemaType.placeholder}\n      pattern={onlyPositiveNumber ? '[d]*' : undefined}\n    />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box, Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport {TrashIcon} from '@sanity/icons'\nimport {FormPatch, PatchEvent, unset} from '../../patch'\nimport {Details} from '../../components/Details'\nimport {Alert} from '../../components/Alert'\nimport {isDev} from '../../../environment'\n\ntype Props = {\n  fieldNames: string[]\n  value?: Record<string, unknown>\n  onChange(patch: FormPatch): void\n  onChange(patch: FormPatch[]): void\n  onChange(patch: PatchEvent): void\n  readOnly?: boolean\n}\n\nexport function UnknownFields(props: Props) {\n  const {fieldNames, onChange, readOnly, value} = props\n  const fieldsLen = fieldNames.length\n\n  const handleUnsetClick = useCallback(\n    (fieldName: any) => {\n      onChange(unset([fieldName]))\n    },\n    [onChange]\n  )\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          {fieldsLen === 1 && <>Unknown field found</>}\n          {fieldsLen > 1 && <>Unknown fields found</>}\n        </>\n      }\n    >\n      <Text as=\"p\" muted size={1}>\n        {fieldsLen === 1 ? (\n          <>Encountered a field that is not defined in the schema.</>\n        ) : (\n          <>Encountered {fieldsLen} fields that are not defined in the schema.</>\n        )}\n      </Text>\n\n      <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n        <Box marginBottom={3}>\n          <Text as=\"p\" muted size={1}>\n            {fieldsLen === 1 ? (\n              <>\n                This field is not defined in the schema, which could mean that the field definition\n                has been removed or that someone else has added it to their own local project and\n                have not deployed their changes yet.\n              </>\n            ) : (\n              <>\n                These fields are not defined in the documents schema, which could mean that the\n                field definitions have been removed or that someone else has added them to their own\n                local project and have not deployed their changes yet.\n              </>\n            )}\n          </Text>\n        </Box>\n\n        <Stack as=\"ul\" space={3}>\n          {fieldNames.map((fieldName) => {\n            return (\n              <UnknownField\n                key={fieldName}\n                fieldName={fieldName}\n                onUnsetClick={handleUnsetClick}\n                readOnly={readOnly}\n                value={value?.[fieldName]}\n              />\n            )\n          })}\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n\nfunction UnknownField({\n  fieldName,\n  onUnsetClick,\n  readOnly,\n  value,\n}: {\n  fieldName: string\n  onUnsetClick: (fieldName: string) => void\n  readOnly?: boolean\n  value: unknown\n}) {\n  const handleUnsetClick = useCallback(() => {\n    onUnsetClick(fieldName)\n  }, [fieldName, onUnsetClick])\n\n  return (\n    <Card as=\"li\" padding={3} radius={2} shadow={1} tone=\"caution\">\n      <Stack space={2}>\n        <Card border radius={1}>\n          <Card borderBottom padding={3}>\n            <Code weight=\"medium\">{fieldName}</Code>\n          </Card>\n          <Box overflow=\"auto\" padding={3}>\n            <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n          </Box>\n        </Card>\n\n        {readOnly && (\n          <Text as=\"p\" muted size={1}>\n            This field is <strong>read only</strong> according to the documents schema and cannot\n            be unset. If you want to be able to unset this in Studio, make sure you remove the{' '}\n            <code>readOnly</code> field from the enclosing type in the schema.\n          </Text>\n        )}\n\n        {!readOnly && (\n          <Button\n            icon={TrashIcon}\n            onClick={handleUnsetClick}\n            tone=\"critical\"\n            text={<>Remove field</>}\n          />\n        )}\n      </Stack>\n    </Card>\n  )\n}\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\n// The negative margins here removes the extra space between the tabs and the fields when inside of a grid\nexport const FieldGroupTabsWrapper = styled(Card)<{$level?: number}>`\n  margin-bottom: ${({$level, theme}) => ($level === 0 ? 0 : theme.sanity.space[5] * -1)}px;\n  padding-bottom: ${({$level, theme}) =>\n    $level === 0 ? theme.sanity.space[4] : theme.sanity.space[4]}px;\n`\n","import React, {forwardRef} from 'react'\nimport {Tab} from '@sanity/ui'\n\ninterface GroupType {\n  'aria-controls': string\n  autoFocus?: boolean\n  disabled?: boolean\n  icon?: React.ComponentType\n  name: string\n  onClick?: (value: string) => void\n  selected: boolean\n  title: string\n}\n\nexport const GroupTab = forwardRef(function GroupTab(\n  props: GroupType,\n  ref: React.Ref<HTMLButtonElement>\n) {\n  // Separate props for resolving conditional hidden groups\n  const {onClick} = props\n\n  // Here goes the content of our component\n  const handleClick = React.useCallback(() => {\n    onClick?.(props.name)\n  }, [props.name, onClick])\n\n  return (\n    <Tab\n      data-testid={`group-tab-${name}`}\n      size={1}\n      id={`${props.name}-tab`}\n      label={props.title}\n      ref={ref}\n      {...props}\n      onClick={handleClick}\n    />\n  )\n})\n\nexport const GroupOption = (props: Omit<GroupType, 'onClick' | 'autoFocus'>) => {\n  const {name, title, ...rest} = props\n  const {selected} = props\n\n  return (\n    <option\n      title={title}\n      value={name}\n      id={`${name}-tab`}\n      aria-controls={rest['aria-controls']}\n      data-testid={`group-select-${name}`}\n      aria-selected={selected ? 'true' : 'false'}\n    >\n      {title || name}\n    </option>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {ElementQuery, Select, TabList} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FormFieldGroup} from '../../../store'\nimport {GroupOption, GroupTab} from './GroupTab'\n\ninterface FieldGroupTabsProps {\n  disabled?: boolean\n  groups: FormFieldGroup[]\n  inputId?: string\n  onClick?: (name: string) => void\n  shouldAutoFocus?: boolean\n}\n\nconst Root = styled(ElementQuery)`\n  /* Hide on small screens */\n  &[data-eq-max~='0'] [data-ui='TabList'] {\n    display: none;\n  }\n\n  /* Hide on medium to large screens */\n  [data-ui='Select'] {\n    display: none;\n  }\n\n  /* Show on small screens */\n  &[data-eq-max~='0'] [data-ui='Select'] {\n    display: block;\n  }\n`\n\n/* For medium to large screens, use TabList and Tab from Sanity UI  */\nconst GroupTabs = ({\n  inputId,\n  groups,\n  onClick,\n  shouldAutoFocus = true,\n  disabled,\n}: FieldGroupTabsProps) => (\n  <TabList space={2} data-testid=\"field-group-tabs\">\n    {groups\n      .map((group) => {\n        return (\n          <GroupTab\n            aria-controls={`${inputId}-field-group-fields`}\n            autoFocus={shouldAutoFocus && group.selected}\n            disabled={disabled || group.disabled}\n            icon={group?.icon}\n            key={`${inputId}-${group.name}-tab`}\n            name={group.name}\n            onClick={onClick}\n            selected={Boolean(group.selected)}\n            title={group.title || group.name}\n          />\n        )\n      })\n      .filter(Boolean)}\n  </TabList>\n)\n\n/* For small screens, use Select from Sanity UI  */\nconst GroupSelect = ({\n  disabled,\n  groups,\n  inputId,\n  onSelect,\n  shouldAutoFocus = true,\n}: Omit<FieldGroupTabsProps, 'onClick'> & {onSelect: (name: string) => void}) => {\n  const handleSelect = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      onSelect(event.currentTarget.value)\n    },\n    [onSelect]\n  )\n\n  return (\n    <Select\n      aria-label=\"Field groups\"\n      autoFocus={shouldAutoFocus}\n      data-testid=\"field-group-select\"\n      disabled={disabled}\n      fontSize={2}\n      muted\n      onChange={handleSelect}\n      value={groups.find((g) => g.selected)?.name}\n    >\n      {groups.map((group) => {\n        // Separate hidden in order to resolve it to a boolean type\n        return (\n          <GroupOption\n            aria-controls={`${inputId}-field-group-fields`}\n            disabled={group.disabled}\n            key={`${inputId}-${group.name}-tab`}\n            name={group.name}\n            selected={Boolean(group.selected)}\n            title={group.title || group.name}\n          />\n        )\n      })}\n    </Select>\n  )\n}\n\nexport const FieldGroupTabs = React.memo(function FieldGroupTabs({\n  disabled = false,\n  onClick,\n  ...props\n}: FieldGroupTabsProps) {\n  const handleClick = useCallback(\n    (groupName: any) => {\n      onClick?.(groupName)\n    },\n    [onClick]\n  )\n\n  return (\n    <Root data-testid=\"field-group-root\">\n      <GroupTabs {...props} disabled={disabled} onClick={handleClick} />\n      <GroupSelect {...props} disabled={disabled} onSelect={handleClick} />\n    </Root>\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Grid, Stack} from '@sanity/ui'\nimport {ObjectInputProps} from '../../types'\nimport {ObjectMembers} from '../../members'\nimport {UnknownFields} from './UnknownFields'\nimport {FieldGroupTabsWrapper} from './ObjectInput.styled'\nimport {FieldGroupTabs} from './fieldGroups/FieldGroupTabs'\n\n/** @beta */\nexport const ObjectInput = memo(function ObjectInput(props: ObjectInputProps) {\n  const {\n    schemaType,\n    groups,\n    members,\n    onChange,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    level,\n    value,\n    id,\n    path,\n    onFieldGroupSelect,\n  } = props\n\n  const {columns} = schemaType.options || {}\n\n  const renderedUnknownFields = useMemo(() => {\n    if (!schemaType.fields) {\n      return null\n    }\n\n    const knownFieldNames = schemaType.fields.map((field) => field.name)\n    const unknownFields = Object.keys(value || {}).filter(\n      (key) => !key.startsWith('_') && !knownFieldNames.includes(key)\n    )\n\n    if (unknownFields.length === 0) {\n      return null\n    }\n\n    return <UnknownFields fieldNames={unknownFields} value={value} onChange={onChange} />\n  }, [onChange, schemaType.fields, value])\n\n  const renderObjectMembers = useCallback(\n    () => (\n      <ObjectMembers\n        members={members}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    ),\n    [members, renderField, renderInput, renderItem, renderPreview]\n  )\n\n  if (members.length === 0) {\n    return null\n  }\n  return (\n    <Stack space={5}>\n      {groups.length > 0 ? (\n        <FieldGroupTabsWrapper $level={level} data-testid=\"field-groups\">\n          <FieldGroupTabs\n            groups={groups}\n            inputId={id}\n            onClick={onFieldGroupSelect}\n            shouldAutoFocus={path.length === 0}\n          />\n        </FieldGroupTabsWrapper>\n      ) : null}\n\n      {columns ? (\n        <Grid columns={columns} gap={4} marginTop={1}>\n          {renderObjectMembers()}\n        </Grid>\n      ) : (\n        renderObjectMembers()\n      )}\n\n      {renderedUnknownFields}\n    </Stack>\n  )\n})\n","import {SlugSchemaType, SlugSourceContext} from '@sanity/types'\nimport speakingurl from 'speakingurl'\nimport {FIXME} from '../../../../FIXME'\n\n// Fallback slugify function if not defined in field options\nconst defaultSlugify = (value: FIXME, type: SlugSchemaType): string => {\n  const maxLength = type.options?.maxLength\n  const slugifyOpts = {truncate: typeof maxLength === 'number' ? maxLength : 200, symbols: true}\n  return value ? speakingurl(value, slugifyOpts) : ''\n}\n\n// eslint-disable-next-line require-await\nexport async function slugify(\n  sourceValue: FIXME,\n  type: SlugSchemaType,\n  context: SlugSourceContext\n): Promise<string> {\n  if (!sourceValue) {\n    return sourceValue\n  }\n\n  const slugifier = type.options?.slugify || defaultSlugify\n  return slugifier(sourceValue, type, context)\n}\n","import React from 'react'\n\nexport type AsyncCompleteState<T> = {\n  status: 'complete'\n  result: T\n}\nexport type AsyncPendingState = {\n  status: 'pending'\n}\nexport type AsyncErrorState = {\n  status: 'error'\n  error: Error\n}\n\nexport type AsyncState<T> = AsyncPendingState | AsyncCompleteState<T> | AsyncErrorState\n\n/**\n * Takes an async function and returns a [AsyncState<value>, callback] pair.\n * Whenever the callback is invoked, a new AsyncState is returned.\n * If the returned callback is called again before the previous callback has settled, the resolution of the previous one will be ignored, thus preventing race conditions.\n * @param fn - an async function that returns a value\n * @param dependencies - list of dependencies that will return a new [value, callback] pair\n */\nexport function useAsync<T, U>(\n  fn: (arg: U) => Promise<T>,\n  dependencies: React.DependencyList\n): [null | AsyncState<T>, (arg: U) => void] {\n  const [state, setState] = React.useState<AsyncState<T> | null>(null)\n\n  const lastId = React.useRef(0)\n\n  const wrappedCallback = React.useCallback(\n    (arg: U) => {\n      const asyncId = ++lastId.current\n      setState({status: 'pending'})\n\n      Promise.resolve()\n        .then(() => fn(arg))\n        .then(\n          (res) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'complete', result: res})\n            }\n          },\n          (err) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'error', error: err})\n            }\n          }\n        )\n    },\n    [fn, ...dependencies]\n  )\n\n  return [state, wrappedCallback]\n}\n","import {SlugSourceContext} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {useCurrentUser, useDataset, useProjectId, useSchema, useSource} from '../../../../../core'\n\n/**\n * @internal\n */\nexport type SlugContext = Omit<SlugSourceContext, 'parent' | 'parentPath'>\n\n/**\n * @internal\n */\nexport function useSlugContext(): SlugContext {\n  const {getClient} = useSource()\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const projectId = useProjectId()\n  const dataset = useDataset()\n\n  return useMemo(() => {\n    return {\n      projectId,\n      dataset,\n      getClient,\n      schema,\n      currentUser,\n    }\n  }, [getClient, schema, currentUser, projectId, dataset])\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {\n  Path,\n  SanityDocument,\n  SlugParent,\n  SlugSchemaType,\n  SlugSourceContext,\n  SlugSourceFn,\n  SlugValue,\n} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Button, Card, Flex, Stack, TextInput} from '@sanity/ui'\nimport {PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {ObjectInputProps} from '../../types'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {slugify} from './utils/slugify'\nimport {useAsync} from './utils/useAsync'\nimport {SlugContext, useSlugContext} from './utils/useSlugContext'\n\n/**\n * @beta\n */\nexport type SlugInputProps = ObjectInputProps<SlugValue, SlugSchemaType>\n\nfunction getSlugSourceContext(\n  valuePath: Path,\n  document: SanityDocument,\n  context: SlugContext\n): SlugSourceContext {\n  const parentPath = valuePath.slice(0, -1)\n  const parent = PathUtils.get(document, parentPath) as SlugParent\n  return {parentPath, parent, ...context}\n}\n\n// eslint-disable-next-line require-await\nasync function getNewFromSource(\n  source: string | Path | SlugSourceFn,\n  document: SanityDocument,\n  context: SlugSourceContext\n): Promise<string | undefined> {\n  return typeof source === 'function'\n    ? source(document, context)\n    : (PathUtils.get(document, source) as string | undefined)\n}\n\n/**\n * @beta\n */\nexport function SlugInput(props: SlugInputProps) {\n  const {getDocument} = useFormBuilder().__internal\n  const {path, value, schemaType, validation, onChange, readOnly, elementProps} = props\n  const sourceField = schemaType.options?.source\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const slugContext = useSlugContext()\n\n  const updateSlug = useCallback(\n    (nextSlug: any) => {\n      if (!nextSlug) {\n        onChange(PatchEvent.from(unset([])))\n        return\n      }\n\n      onChange(\n        PatchEvent.from([setIfMissing({_type: schemaType.name}), set(nextSlug, ['current'])])\n      )\n    },\n    [onChange, schemaType.name]\n  )\n\n  const [generateState, handleGenerateSlug] = useAsync(() => {\n    if (!sourceField) {\n      return Promise.reject(\n        new Error(`Source is missing. Check source on type \"${schemaType.name}\" in schema`)\n      )\n    }\n\n    const doc = getDocument() || ({_type: schemaType.name} as SanityDocument)\n    const sourceContext = getSlugSourceContext(path, doc, slugContext)\n    return getNewFromSource(sourceField, doc, sourceContext)\n      .then((newFromSource) => slugify(newFromSource || '', schemaType, sourceContext))\n      .then((newSlug) => updateSlug(newSlug))\n  }, [path, updateSlug, getDocument, schemaType, slugContext])\n\n  const isUpdating = generateState?.status === 'pending'\n\n  const handleChange = React.useCallback(\n    (event: any) => updateSlug(event.currentTarget.value),\n    [updateSlug]\n  )\n\n  return (\n    <Stack space={3}>\n      <Flex>\n        <Box flex={1}>\n          <TextInput\n            customValidity={errors.length > 0 ? errors[0].message : ''}\n            disabled={isUpdating}\n            onChange={handleChange}\n            value={value?.current || ''}\n            readOnly={readOnly}\n            {...elementProps}\n          />\n\n          {generateState?.status === 'error' && (\n            <Card padding={2} tone=\"critical\">\n              {generateState.error.message}\n            </Card>\n          )}\n        </Box>\n        {sourceField && (\n          <Box marginLeft={1}>\n            <Button\n              mode=\"ghost\"\n              type=\"button\"\n              disabled={readOnly || isUpdating}\n              onClick={handleGenerateSlug}\n              text={generateState?.status === 'pending' ? 'Generating' : 'Generate'}\n            />\n          </Box>\n        )}\n      </Flex>\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport function StringInput(props: StringInputProps) {\n  const {validationError, elementProps} = props\n  return <TextInput {...elementProps} customValidity={validationError} data-testid=\"string-input\" />\n}\n","import React from 'react'\nimport {TextSchemaType} from '@sanity/types'\nimport {TextArea} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type TextInputProps = StringInputProps<TextSchemaType>\n\nconst StyledTextArea = styled(TextArea)`\n  &[data-as='textarea'] {\n    resize: vertical;\n  }\n`\n\n/**\n * @beta\n */\nexport function TextInput(props: TextInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  return (\n    <StyledTextArea\n      customValidity={validationError}\n      value={value || ''}\n      placeholder={schemaType.placeholder}\n      rows={typeof schemaType.rows === 'number' ? schemaType.rows : 10}\n      {...elementProps}\n    />\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type TelephoneInputProps = StringInputProps\n\n/**\n * @beta\n */\nexport function TelephoneInput(props: TelephoneInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  return (\n    <TextInput\n      type=\"tel\"\n      inputMode=\"tel\"\n      customValidity={validationError}\n      value={value || ''}\n      placeholder={schemaType.placeholder}\n      {...elementProps}\n    />\n  )\n}\n","import {isTitledListValue, TitledListValue} from '@sanity/types'\nimport {Box, Card, Flex, Inline, Radio, Select, Stack, Text} from '@sanity/ui'\nimport {capitalize} from 'lodash'\nimport React, {useId, forwardRef, useCallback, useMemo} from 'react'\nimport {ChangeIndicator} from '../../changeIndicators'\nimport {PatchEvent, set, unset} from '../patch'\nimport {StringInputProps} from '../types'\n\nfunction toSelectItem(\n  option: TitledListValue<string | number> | string | number\n): TitledListValue<string | number> {\n  return isTitledListValue(option) ? option : {title: capitalize(`${option}`), value: option}\n}\n\nconst EMPTY_ITEM = {title: '', value: undefined}\n\n/**\n * @beta\n */\nexport function SelectInput(props: StringInputProps) {\n  const {\n    value,\n    readOnly,\n    validationError,\n    schemaType,\n    onChange,\n    path,\n    changed,\n    focused,\n    elementProps,\n  } = props\n  const items = useMemo(\n    () => (schemaType.options?.list || []).map(toSelectItem),\n    [schemaType.options?.list]\n  )\n  const currentItem = items.find((item) => item.value === value)\n  const isRadio = schemaType.options && schemaType.options.layout === 'radio'\n\n  const itemFromOptionValue = useCallback(\n    (optionValue: any) => {\n      const index = Number(optionValue)\n\n      return items[index]\n    },\n    [items]\n  )\n\n  const optionValueFromItem = useCallback(\n    (item: any) => {\n      return String(items.indexOf(item))\n    },\n    [items]\n  )\n\n  const inputId = useId()\n\n  const handleChange = React.useCallback(\n    (nextItem: TitledListValue<string | number> | null) => {\n      onChange(\n        PatchEvent.from(typeof nextItem?.value === 'undefined' ? unset() : set(nextItem.value))\n      )\n    },\n    [onChange]\n  )\n\n  const handleSelectChange = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      const nextItem = itemFromOptionValue(event.currentTarget.value)\n\n      if (!nextItem) {\n        handleChange(EMPTY_ITEM)\n        return\n      }\n\n      handleChange(nextItem)\n    },\n    [handleChange, itemFromOptionValue]\n  )\n\n  const content = isRadio ? (\n    <RadioSelect\n      {...elementProps}\n      value={currentItem}\n      inputId={inputId}\n      items={items}\n      direction={schemaType.options?.direction || 'vertical'}\n      customValidity={validationError}\n      onChange={handleChange}\n    />\n  ) : (\n    <Select\n      {...elementProps}\n      customValidity={validationError}\n      value={optionValueFromItem(currentItem)}\n      onChange={handleSelectChange}\n    >\n      {[EMPTY_ITEM, ...items].map((item, i) => (\n        <option key={`${i - 1}`} value={i - 1}>\n          {item.title}\n        </option>\n      ))}\n    </Select>\n  )\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n      {content}\n    </ChangeIndicator>\n  )\n}\n\nconst RadioSelect = forwardRef(function RadioSelect(\n  props: {\n    items: TitledListValue<string | number>[]\n    value?: TitledListValue<string | number>\n    direction: 'horizontal' | 'vertical'\n    readOnly?: boolean\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    customValidity?: string\n    inputId?: string\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {items, value, onChange, onFocus, readOnly, customValidity, direction, inputId} = props\n\n  const Layout = direction === 'horizontal' ? Inline : Stack\n  return (\n    <Card border padding={3} radius={1}>\n      <Layout space={3} role=\"group\">\n        {items.map((item, index) => (\n          <RadioSelectItem\n            customValidity={customValidity}\n            inputId={inputId}\n            item={item}\n            key={index}\n            onChange={onChange}\n            onFocus={onFocus}\n            readOnly={readOnly}\n            ref={index === 0 ? ref : null}\n            value={value}\n          />\n        ))}\n      </Layout>\n    </Card>\n  )\n})\n\nconst RadioSelectItem = forwardRef(function RadioSelectItem(\n  props: {\n    customValidity?: string\n    inputId?: string\n    item: TitledListValue<string | number>\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    readOnly?: boolean\n    value?: TitledListValue<string | number>\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {customValidity, inputId, item, onChange, onFocus, readOnly, value} = props\n\n  const handleChange = useCallback(() => {\n    onChange(item)\n  }, [item, onChange])\n\n  return (\n    <Flex as=\"label\" align=\"center\">\n      <Radio\n        ref={ref}\n        checked={value === item}\n        onChange={handleChange}\n        onFocus={onFocus}\n        readOnly={readOnly}\n        customValidity={customValidity}\n        name={inputId}\n      />\n\n      <Box marginLeft={2}>\n        <Text size={1} weight=\"semibold\">\n          {item.title}\n        </Text>\n      </Box>\n    </Flex>\n  )\n})\n","import {TextInput} from '@sanity/ui'\nimport React from 'react'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type UrlInputProps = StringInputProps\n\n/**\n * @beta\n */\nexport function UrlInput(props: UrlInputProps) {\n  const {schemaType, validationError, elementProps} = props\n\n  const uriRule = getValidationRule(schemaType, 'uri')\n  const inputType = uriRule?.constraint?.options?.allowRelative ? 'text' : 'url'\n  return (\n    <TextInput\n      type={inputType}\n      inputMode=\"url\"\n      customValidity={validationError}\n      {...elementProps}\n    />\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\n/**\n * @beta\n */\nexport type EmailInputProps = StringInputProps\n\n/**\n * @beta\n */\nexport function EmailInput(props: EmailInputProps) {\n  const {validationError, elementProps} = props\n  return (\n    <TextInput {...elementProps} type=\"email\" inputMode=\"email\" customValidity={validationError} />\n  )\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport {StateTree} from './types'\n\n/** @internal */\nexport function setAtPath<T>(\n  currentTree: StateTree<T> | undefined,\n  path: Path,\n  value: T\n): StateTree<T> {\n  if (path.length === 0) {\n    return {...(currentTree || {}), value}\n  }\n  const [head, ...tail] = path\n  const key = isKeySegment(head) ? head._key : String(head)\n  const children = currentTree?.children ?? {}\n  return {\n    value: currentTree?.value,\n    children: {...children, [key]: setAtPath(children[key] || {}, tail, value)},\n  }\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport {castArray} from 'lodash'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfObjectsItemMember,\n  FieldMember,\n  FieldSetMember,\n  ObjectFormNode,\n} from '../types'\nimport {isMemberArrayOfObjects} from '../../members/fields/asserters'\n\n/** @internal */\nexport interface ExpandPathOperation {\n  type: 'expandPath'\n  path: Path\n}\n\n/** @internal */\nexport interface ExpandFieldSetOperation {\n  type: 'expandFieldSet'\n  path: Path\n}\n\n/** @internal */\nexport interface SetActiveGroupOperation {\n  type: 'setSelectedGroup'\n  path: Path\n  groupName: string\n}\n\n/** @internal */\nexport type ExpandOperation =\n  | ExpandPathOperation\n  | ExpandFieldSetOperation\n  | SetActiveGroupOperation\n\n/**\n * This takes a form state and returns a list of operations required to open a node at a particular path\n * @param state - The form state\n * @param path - The path to open\n *\n * @internal\n */\nexport function getExpandOperations(state: ObjectFormNode, path: Path): ExpandOperation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [fieldName, ...rest] = path\n\n  const fieldsetMember = state.members.find(\n    (member): member is FieldSetMember =>\n      member.kind === 'fieldSet' &&\n      member.fieldSet.members.some(\n        (field): field is FieldMember => field.kind === 'field' && field.name === fieldName\n      )\n  )\n\n  const ops: ExpandOperation[] = [{type: 'expandPath', path}]\n  if (fieldsetMember) {\n    ops.push({type: 'expandFieldSet', path: fieldsetMember.fieldSet.path})\n  }\n\n  const fieldMember = state.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === fieldName\n  )\n\n  const schemaField = state.schemaType.fields.find((field) => field.name === fieldName)\n  const selectedGroupName = state.groups.find((group) => group.selected)?.name\n  const inSelectedGroup =\n    selectedGroupName &&\n    (selectedGroupName === 'all-fields' ||\n      (schemaField && castArray(schemaField.group).includes(selectedGroupName)))\n\n  if (!inSelectedGroup) {\n    ops.push({type: 'setSelectedGroup', path: state.path, groupName: 'all-fields'})\n  }\n\n  if (fieldMember) {\n    ops.push({type: 'expandPath', path: fieldMember.field.path})\n  }\n\n  if (rest.length === 0) {\n    return ops\n  }\n\n  if (fieldMember && isMemberArrayOfObjects(fieldMember)) {\n    return ops.concat([\n      {type: 'expandPath', path: fieldMember.field.path},\n      ...expandArrayPath(fieldMember.field, rest),\n    ])\n  }\n  return ops\n}\n\nfunction expandArrayPath(state: ArrayOfObjectsFormNode, path: Path): ExpandOperation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [segment, ...rest] = path\n  if (!isKeySegment(segment)) {\n    throw new Error('Expected path segment to be an object with a _key property')\n  }\n\n  const foundMember = state.members.find(\n    (member): member is ArrayOfObjectsItemMember => member.key === segment._key\n  )\n\n  if (!foundMember) {\n    // tried to open a member that does not exist in the form state - it's likely hidden\n    return []\n  }\n  return [{type: 'expandPath', path: path}, ...getExpandOperations(foundMember.item, rest)]\n}\n","import {isArraySchemaType, SchemaType} from '@sanity/types'\nimport {get} from 'lodash'\n\nexport function getOption(type: SchemaType, optionName: string) {\n  return get(type.options, optionName)\n}\n\nconst PSEUDO_OBJECTS = ['array', 'file', 'image', 'reference', 'slug']\nconst HIDDEN_FIELDS = ['asset', 'crop', 'hotspot', '_ref', '_weak']\nconst NO_LEVEL_LAYOUTS = ['tags']\nconst NO_LEVEL_TYPES = ['slug']\n\nexport function getTypeChain(type: SchemaType | undefined, visited: Set<SchemaType>): SchemaType[] {\n  if (!type) return []\n  if (visited.has(type)) return []\n\n  visited.add(type)\n\n  const next = type.type ? getTypeChain(type.type, visited) : []\n  return [type, ...next]\n}\n\nexport function getFieldLevel(schemaType: SchemaType, currentLevel: number) {\n  return isArraySchemaType(schemaType)\n    ? getArrayFieldLevel(schemaType, currentLevel)\n    : getObjectFieldLevel(schemaType, currentLevel)\n}\n\nfunction getObjectFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {type, options} = schemaType\n  const typeIfRelevant = asType(type, PSEUDO_OBJECTS)\n  const fields = schemaType?.jsonType === 'object' ? schemaType.fields : undefined\n\n  const typeName = typeIfRelevant?.name || ''\n\n  if (NO_LEVEL_TYPES.includes(typeName)) {\n    return 0\n  }\n\n  const isPseudoObject = PSEUDO_OBJECTS.includes(typeName)\n  const hasVisibleFields = (fields?.filter((f) => !HIDDEN_FIELDS.includes(f.name)).length ?? 0) > 0\n  const hasListOptions = (options?.list?.length ?? 0) > 0\n\n  if (hasVisibleFields || hasListOptions || !isPseudoObject) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction getArrayFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {options} = schemaType\n\n  const hasListOptions = (options?.list || [])?.length > 0\n  const isNoLevelLayout = NO_LEVEL_LAYOUTS.includes(options?.layout || '')\n\n  if (hasListOptions && !isNoLevelLayout) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction asType(\n  schemaType: SchemaType | undefined,\n  asOneOfTypes: string[]\n): SchemaType | undefined {\n  if (schemaType?.name && asOneOfTypes.includes(schemaType?.name)) {\n    return schemaType\n  }\n  if (!schemaType) {\n    return undefined\n  }\n  return asType(schemaType.type, asOneOfTypes)\n}\n","/* eslint-disable no-nested-ternary */\nimport {ConditionalProperty, CurrentUser} from '@sanity/types'\n\nexport interface ConditionalPropertyCallbackContext {\n  parent?: unknown\n  document?: Record<string, unknown>\n  currentUser: Omit<CurrentUser, 'role'> | null\n  value: unknown\n}\n\nexport function resolveConditionalProperty(\n  property: ConditionalProperty,\n  context: ConditionalPropertyCallbackContext\n) {\n  const {currentUser, document, parent, value} = context\n\n  if (typeof property === 'boolean' || property === undefined) {\n    return Boolean(property)\n  }\n\n  return (\n    property({\n      document: document as any,\n      parent,\n      value,\n      currentUser,\n    }) === true // note: we can't strictly \"trust\" the return value here, so the conditional property should probably be typed as unknown\n  )\n}\n","/**\n * Max supported field depth. Fields deeper than this will be considered hidden.\n */\nexport const MAX_FIELD_DEPTH = 20\n\n/**\n * Start auto-collapsing fields at this nesting level unless schema/field configuration says otherwise\n */\nexport const AUTO_COLLAPSE_DEPTH = 3\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {resolveTypeName} from '@sanity/util/content'\n\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport function getPrimitiveItemType(\n  arrayType: ArraySchemaType,\n  item: unknown\n): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return arrayType?.of.find(\n    (memberType) => memberType.name === itemTypeName || memberType.jsonType === itemTypeName\n  )\n}\n","import {ObjectSchemaTypeWithOptions} from '@sanity/types'\nimport {AUTO_COLLAPSE_DEPTH} from '../constants'\n\ninterface CollapsibleOptions {\n  collapsible: boolean | undefined\n  // Initial collapsed state\n  collapsed: boolean | undefined\n}\n\n/**\n * Takes an option object that can optionally have a 'collapsed' property\n * (`{collapsed?: boolean, collapsible?: boolean}`)\n * and returns a resolved collapsed state based on configuration and whether it's below a certain nesting level threshold\n - collapsible: boolean - whether the field can be collapsed\n - collapsed: boolean - whether the field is initially collapsed\n * NOTE: If a field is configured with collapsed: true, ignore any collapsible configuration and make it collapsible no matter what, otherwise it will be left forever collapsed.\n *\n * If the nesting level is deeper than or equal to AUTO_COLLAPSE_DEPTH, the default for the field/fieldset becomes \"collapsed\"\n *\n * @param options - Whether the field or fieldset should be collapsed\n * @param level - Nesting level\n */\nexport function getCollapsedWithDefaults(\n  options: ObjectSchemaTypeWithOptions['options'] = {},\n  level: number\n): CollapsibleOptions {\n  if (options?.collapsible === false || options?.collapsable === false) {\n    return {collapsible: false, collapsed: false}\n  }\n\n  const collapsed =\n    // eslint-disable-next-line no-nested-ternary\n    typeof options?.collapsed === 'boolean'\n      ? options.collapsed\n      : level >= AUTO_COLLAPSE_DEPTH\n      ? true\n      : undefined\n\n  const collapsible =\n    options?.collapsible === true || options?.collapsable === true || collapsed === true\n      ? true\n      : undefined\n\n  return {\n    collapsible,\n    collapsed,\n  }\n}\n","/* eslint-disable max-statements */\n/* eslint-disable camelcase, no-else-return */\n\nimport {\n  ArraySchemaType,\n  BooleanSchemaType,\n  CurrentUser,\n  FieldGroup,\n  isArrayOfObjectsSchemaType,\n  isArraySchemaType,\n  isObjectSchemaType,\n  NumberSchemaType,\n  ObjectField,\n  ObjectSchemaType,\n  Path,\n  StringSchemaType,\n  ValidationMarker,\n} from '@sanity/types'\n\nimport {castArray, isEqual as _isEqual, pick} from 'lodash'\nimport {isEqual, pathFor, startsWith, toString, trimChildPath} from '@sanity/util/paths'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {isRecord} from '../../util'\nimport {getFieldLevel} from '../studio/inputResolver/helpers'\nimport {FIXME} from '../../FIXME'\nimport {FormNodePresence} from '../../presence'\nimport {ObjectArrayFormNode, PrimitiveFormNode, StateTree} from './types'\nimport {resolveConditionalProperty} from './conditional-property'\nimport {MAX_FIELD_DEPTH} from './constants'\nimport {getItemType, getPrimitiveItemType} from './utils/getItemType'\nimport {\n  ArrayOfObjectsMember,\n  ArrayOfPrimitivesMember,\n  FieldMember,\n  ObjectMember,\n} from './types/members'\nimport {ArrayOfObjectsFormNode, ArrayOfPrimitivesFormNode, ObjectFormNode} from './types/nodes'\nimport {FormFieldGroup} from './types/fieldGroup'\nimport {getCollapsedWithDefaults} from './utils/getCollapsibleOptions'\nimport {FieldError} from './types/memberErrors'\n\ntype PrimitiveSchemaType = BooleanSchemaType | NumberSchemaType | StringSchemaType\n\nconst ALL_FIELDS_GROUP: FieldGroup = {\n  name: 'all-fields',\n  title: 'All fields',\n  hidden: false,\n}\n\nfunction isFieldEnabledByGroupFilter(\n  // the groups config for the \"enclosing object\" type\n  groupsConfig: FormFieldGroup[],\n  field: ObjectField,\n  currentGroup: FormFieldGroup\n) {\n  if (currentGroup.name === ALL_FIELDS_GROUP.name) {\n    return true\n  }\n\n  // if there's no group config for the object type, all fields are visible\n  if (groupsConfig.length === 0) {\n    return true\n  }\n\n  return castArray(field.group).includes(currentGroup.name)\n}\n\nfunction isAcceptedObjectValue(value: any): value is Record<string, unknown> | undefined {\n  return typeof value === 'undefined' || isRecord(value)\n}\n\nfunction isValidArrayOfObjectsValue(value: any): value is unknown[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction isValidArrayOfPrimitivesValue(\n  value: any\n): value is (boolean | number | string)[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction everyItemIsObject(value: unknown[]): value is object[] {\n  return value.length === 0 || value.every((item) => isRecord(item))\n}\n\nfunction findDuplicateKeyEntries(array: {_key: string}[]) {\n  const seenKeys = new Set<string>()\n  return array.reduce((acc: [index: number, key: string][], item, index) => {\n    if (seenKeys.has(item._key)) {\n      acc.push([index, item._key])\n    }\n    seenKeys.add(item._key)\n    return acc\n  }, [])\n}\n\nfunction hasKey<T extends object>(value: T): value is T & {_key: string} {\n  return '_key' in value\n}\n\nfunction everyItemHasKey<T extends object>(array: T[]): array is (T & {_key: string})[] {\n  return array?.every((item) => isRecord(item) && hasKey(item))\n}\n\nfunction isChangedValue(value: any, comparisonValue: any) {\n  if (value && !comparisonValue) {\n    return true\n  }\n  return !_isEqual(value, comparisonValue)\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareFieldMember(props: {\n  field: ObjectField\n  parent: RawState<ObjectSchemaType, unknown>\n  index: number\n}): ObjectMember | null {\n  const {parent, field, index} = props\n  const fieldPath = pathFor([...parent.path, field.name])\n  const fieldLevel = getFieldLevel(field.type, parent.level + 1)\n\n  const parentValue = parent.value\n  const parentComparisonValue = parent.comparisonValue\n  if (!isAcceptedObjectValue(parentValue)) {\n    // Note: we validate each field, before passing it recursively to this function so getting this error means that the\n    // prepareFormState function itself has been called with a non-object value\n    throw new Error('Unexpected non-object value')\n  }\n\n  if (isObjectSchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name]\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (!isAcceptedObjectValue(fieldValue)) {\n      return {\n        kind: 'error',\n        key: field.name,\n        fieldName: field.name,\n        error: {\n          type: 'INCOMPATIBLE_TYPE',\n          expectedSchemaType: field.type,\n          resolvedValueType: resolveTypeName(fieldValue),\n          value: fieldValue,\n        },\n      }\n    }\n\n    // todo: consider requiring a _type annotation for object values on fields as well\n    // if (resolvedValueType !== field.type.name) {\n    //   return {\n    //     kind: 'error',\n    //     key: field.name,\n    //     error: {\n    //       type: 'TYPE_ANNOTATION_MISMATCH',\n    //       expectedSchemaType: field.type,\n    //       resolvedValueType,\n    //     },\n    //   }\n    // }\n\n    const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n    const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n    const scopedCollapsedFieldsets = parent.collapsedFieldSets?.children?.[field.name]\n\n    const inputState = prepareObjectInputState({\n      schemaType: field.type,\n      currentUser: parent.currentUser,\n      parent: parent.value,\n      document: parent.document,\n      value: fieldValue,\n      changed: isChangedValue(fieldValue, fieldComparisonValue),\n      comparisonValue: fieldComparisonValue,\n      presence: parent.presence,\n      validation: parent.validation,\n      fieldGroupState,\n      path: fieldPath,\n      level: fieldLevel,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      collapsedPaths: scopedCollapsedPaths,\n      collapsedFieldSets: scopedCollapsedFieldsets,\n      readOnly: parent.readOnly,\n      changesOpen: parent.changesOpen,\n    })\n\n    if (inputState === null) {\n      return null\n    }\n\n    const defaultCollapsedState = getCollapsedWithDefaults(field.type.options as FIXME, fieldLevel)\n    const collapsed = scopedCollapsedPaths\n      ? scopedCollapsedPaths.value\n      : defaultCollapsedState.collapsed\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n      open: startsWith(fieldPath, parent.openPath),\n      field: inputState,\n      collapsed,\n      collapsible: defaultCollapsedState.collapsible,\n    }\n  } else if (isArraySchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name] as unknown[] | undefined\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (isArrayOfObjectsSchemaType(field.type)) {\n      const hasValue = typeof fieldValue !== 'undefined'\n      if (hasValue && !isValidArrayOfObjectsValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemIsObject(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MIXED_ARRAY',\n            schemaType: field.type,\n            value: fieldValue,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemHasKey(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MISSING_KEYS',\n            value: fieldValue,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const duplicateKeyEntries = hasValue ? findDuplicateKeyEntries(fieldValue) : []\n      if (duplicateKeyEntries.length > 0) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'DUPLICATE_KEYS',\n            duplicates: duplicateKeyEntries,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfObjectsInputState({\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    } else {\n      // array of primitives\n      if (!isValidArrayOfPrimitivesValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfPrimitivesInputState({\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        // todo: consider support for collapsible arrays\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    }\n  } else {\n    // primitive fields\n\n    const fieldValue = parentValue?.[field.name] as undefined | boolean | string | number\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n\n    const conditionalPropertyContext = {\n      value: fieldValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    }\n\n    // note: we *only* want to call the conditional props here, as it's handled by the prepare<Object|Array>InputProps otherwise\n    const hidden = resolveConditionalProperty(field.type.hidden, conditionalPropertyContext)\n\n    if (hidden) {\n      return null\n    }\n\n    const readOnly =\n      parent.readOnly || resolveConditionalProperty(field.type.readOnly, conditionalPropertyContext)\n\n    const fieldState = preparePrimitiveInputState({\n      ...parent,\n      comparisonValue: fieldComparisonValue,\n      value: fieldValue as boolean | string | number | undefined,\n      schemaType: field.type as PrimitiveSchemaType,\n      path: fieldPath,\n      readOnly,\n    })\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n\n      open: startsWith(fieldPath, parent.openPath),\n\n      // todo: consider support for collapsible primitive fields\n      collapsible: false,\n      collapsed: false,\n      field: fieldState,\n    }\n  }\n}\n\ninterface RawState<SchemaType, T> {\n  schemaType: SchemaType\n  value?: T\n  comparisonValue?: T | null\n  changed?: boolean\n  document: FIXME_SanityDocument\n  currentUser: Omit<CurrentUser, 'role'> | null\n  parent?: unknown\n  hidden?: boolean\n  readOnly?: boolean\n  path: Path\n  openPath: Path\n  focusPath: Path\n  presence: FormNodePresence[]\n  validation: ValidationMarker[]\n  fieldGroupState?: StateTree<string>\n  collapsedPaths?: StateTree<boolean>\n  collapsedFieldSets?: StateTree<boolean>\n  // nesting level\n  level: number\n  changesOpen?: boolean\n}\n\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: false\n): ObjectFormNode\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: true\n): ObjectFormNode | null\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck = true\n): ObjectFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden =\n    enableHiddenCheck &&\n    resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  const schemaTypeGroupConfig = props.schemaType.groups || []\n  const defaultGroupName = (schemaTypeGroupConfig.find((g) => g.default) || ALL_FIELDS_GROUP)?.name\n\n  const groups = [ALL_FIELDS_GROUP, ...schemaTypeGroupConfig].flatMap((group): FormFieldGroup[] => {\n    const groupHidden = resolveConditionalProperty(group.hidden, conditionalPropertyContext)\n    const isSelected = group.name === (props.fieldGroupState?.value || defaultGroupName)\n\n    // Set the \"all-fields\" group as selected when review changes is open to enable review of all\n    // fields and changes together. When review changes is closed - switch back to the selected tab.\n    const selected = (props.changesOpen && group.name === ALL_FIELDS_GROUP.name) || isSelected\n\n    return groupHidden\n      ? []\n      : [\n          {\n            icon: group?.icon,\n            name: group.name,\n            selected,\n            title: group.title,\n          },\n        ]\n  })\n\n  const selectedGroup = groups.find((group) => group.selected)!\n\n  const parentProps: RawState<ObjectSchemaType, unknown> = {\n    ...props,\n    hidden,\n    readOnly,\n  }\n\n  // note: this is needed because not all object types gets a fieldsets property during schema parsing.\n  // ideally members should be normalized as part of the schema parsing and not here\n  const normalizedSchemaMembers: typeof props.schemaType.fieldsets = props.schemaType.fieldsets\n    ? props.schemaType.fieldsets\n    : props.schemaType.fields.map((field) => ({single: true, field}))\n\n  // create a members array for the object\n  const members = normalizedSchemaMembers.flatMap((fieldSet, index): ObjectMember[] => {\n    if (fieldSet.single) {\n      // \"single\" means not part of a fieldset\n      const fieldMember = prepareFieldMember({\n        field: fieldSet.field,\n        parent: parentProps,\n        index,\n      })\n      if (\n        fieldMember === null ||\n        !isFieldEnabledByGroupFilter(groups, fieldSet.field, selectedGroup)\n      ) {\n        return []\n      }\n      return [fieldMember]\n    }\n\n    // it's an actual fieldset\n    const fieldsetFieldNames = fieldSet.fields.map((f) => f.name)\n    const fieldsetHidden = resolveConditionalProperty(fieldSet.hidden, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    if (fieldsetHidden) {\n      return []\n    }\n\n    const fieldsetReadOnly = resolveConditionalProperty(fieldSet.readOnly, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    const fieldsetMembers = fieldSet.fields.flatMap((field): (FieldMember | FieldError)[] => {\n      const fieldState = prepareFieldMember({\n        field,\n        parent: parentProps,\n        index,\n\n        // the explicit type cast here is ok - we know that a fieldset can not have fieldsets\n      }) as FieldMember | FieldError | null\n      if (fieldState === null || !isFieldEnabledByGroupFilter(groups, field, selectedGroup)) {\n        return []\n      }\n\n      const fieldStateWithReadOnly = {\n        ...fieldState,\n        field: {\n          ...(fieldState as FieldMember)?.field,\n          readOnly: readOnly || fieldsetReadOnly,\n        },\n      }\n\n      return [fieldStateWithReadOnly]\n    })\n\n    // if all members of the fieldset is hidden, the fieldset should effectively also be hidden\n    if (fieldsetMembers.length === 0) {\n      return []\n    }\n    const defaultCollapsedState = getCollapsedWithDefaults(fieldSet.options, props.level)\n\n    const collapsed =\n      (props.collapsedFieldSets?.children || {})[fieldSet.name]?.value ??\n      defaultCollapsedState.collapsed\n\n    return [\n      {\n        kind: 'fieldSet',\n        key: `fieldset-${fieldSet.name}`,\n        fieldSet: {\n          path: pathFor(props.path.concat(fieldSet.name)),\n          name: fieldSet.name,\n          title: fieldSet.title,\n          description: fieldSet.description,\n          hidden: false,\n          level: props.level + 1,\n          members: fieldsetMembers,\n          collapsible: defaultCollapsedState?.collapsible,\n          collapsed,\n          columns: fieldSet?.options?.columns,\n        },\n      },\n    ]\n  })\n\n  const hasFieldGroups = schemaTypeGroupConfig.length > 0\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  // Return null here only when enableHiddenCheck, or we end up with array members that have 'item: null' when they\n  // really should not be. One example is when a block object inside the PT-input have a type with one single hidden field.\n  // Then it should still be possible to see the member item, even though all of it's fields are null.\n  if (members.length === 0 && enableHiddenCheck) {\n    return null\n  }\n\n  // Disable all groups except the \"all fields\" group when the review changes pane is open.\n  const _groups = hasFieldGroups\n    ? groups.map((g) => ({...g, disabled: props?.changesOpen && g.name !== ALL_FIELDS_GROUP.name}))\n    : []\n\n  return {\n    value: props.value as Record<string, unknown> | undefined,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    schemaType: props.schemaType,\n    readOnly: props.readOnly || readOnly,\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    presence,\n    validation,\n    members,\n    groups: _groups,\n  }\n}\n\nfunction prepareArrayOfPrimitivesInputState<T extends (boolean | string | number)[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfPrimitivesFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    comparisonValue: props.comparisonValue,\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfPrimitivesMember({arrayItem: item, parent: props, index})\n  )\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed), // TODO: is this correct? There could be field and fieldsets here?\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\nfunction prepareArrayOfObjectsInputState<T extends {_key: string}[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfObjectsFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfObjectsMember({\n      arrayItem: item,\n      parent: props,\n      index,\n    })\n  )\n\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed),\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfObjectsMember(props: {\n  arrayItem: {_key: string}\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfObjectsMember {\n  const {arrayItem, parent, index} = props\n\n  const itemType = getItemType(parent.schemaType, arrayItem) as ObjectSchemaType\n\n  const key = arrayItem._key\n\n  if (!itemType) {\n    const itemTypeName = resolveTypeName(arrayItem)\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        resolvedValueType: itemTypeName,\n        value: arrayItem,\n        validTypes: parent.schemaType.of,\n      },\n    }\n  }\n\n  const itemPath = pathFor([...parent.path, {_key: key}])\n  const itemLevel = parent.level + 1\n\n  const conditionalPropertyContext = {\n    value: parent.value,\n    parent: props.parent,\n    document: parent.document,\n    currentUser: parent.currentUser,\n  }\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(parent.schemaType.readOnly, conditionalPropertyContext)\n\n  const fieldGroupState = parent.fieldGroupState?.children?.[key]\n  const collapsedItemPaths = parent.collapsedPaths?.children?.[key]\n  const comparisonValue =\n    (Array.isArray(parent.comparisonValue) &&\n      parent.comparisonValue.find((i) => i._key === arrayItem._key)) ||\n    undefined\n\n  const itemState = prepareObjectInputState(\n    {\n      schemaType: itemType,\n      level: itemLevel,\n      document: parent.document,\n      value: arrayItem,\n      comparisonValue,\n      changed: isChangedValue(arrayItem, comparisonValue),\n      path: itemPath,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      currentUser: parent.currentUser,\n      collapsedPaths: collapsedItemPaths,\n      presence: parent.presence,\n      validation: parent.validation,\n      fieldGroupState,\n      readOnly,\n    },\n    false\n  ) as ObjectArrayFormNode\n\n  const defaultCollapsedState = getCollapsedWithDefaults(itemType.options, itemLevel)\n  const collapsed = collapsedItemPaths?.value ?? defaultCollapsedState.collapsed\n  return {\n    kind: 'item',\n    key,\n    index,\n    open: startsWith(itemPath, parent.openPath),\n    collapsed: collapsed,\n    collapsible: true,\n    parentSchemaType: parent.schemaType,\n    item: itemState,\n  }\n}\n\n/*\n * Takes a field in contet of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfPrimitivesMember(props: {\n  arrayItem: unknown\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfPrimitivesMember {\n  const {arrayItem, parent, index} = props\n  const itemType = getPrimitiveItemType(parent.schemaType, arrayItem)\n\n  const itemPath = pathFor([...parent.path, index])\n  const itemValue = (parent.value as unknown[] | undefined)?.[index] as string | boolean | number\n  const itemComparisonValue = (parent.comparisonValue as unknown[] | undefined)?.[index] as\n    | string\n    | boolean\n    | number\n  const itemLevel = parent.level + 1\n\n  // Best effort attempt to make a stable key for each item in the array\n  // Since items may be reordered and change at any time, there's no way to reliably address each item uniquely\n  // This is a \"best effort\"-attempt at making sure we don't re-use internal state for item inputs\n  // when items are added to or removed from the array\n  const key = `${itemType?.name || 'invalid-type'}-${String(index)}`\n\n  if (!itemType) {\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        validTypes: parent.schemaType.of,\n        resolvedValueType: resolveTypeName(itemType),\n        value: itemValue,\n      },\n    }\n  }\n\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(itemType.readOnly, {\n      value: itemValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    })\n\n  const item = preparePrimitiveInputState({\n    ...parent,\n    path: itemPath,\n    schemaType: itemType as PrimitiveSchemaType,\n    level: itemLevel,\n    value: itemValue,\n    comparisonValue: itemComparisonValue,\n    readOnly,\n  })\n\n  return {\n    kind: 'item',\n    key,\n    index,\n    parentSchemaType: parent.schemaType,\n    open: isEqual(itemPath, parent.openPath),\n    item,\n  }\n}\n\nfunction preparePrimitiveInputState<SchemaType extends PrimitiveSchemaType>(\n  props: RawState<SchemaType, unknown>\n): PrimitiveFormNode {\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  return {\n    schemaType: props.schemaType,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    value: props.value,\n    level: props.level,\n    id: toString(props.path),\n    readOnly: props.readOnly,\n    focused: isEqual(props.path, props.focusPath),\n    path: props.path,\n    presence,\n    validation,\n  } as PrimitiveFormNode\n}\n\n/** @internal */\nexport type FIXME_SanityDocument = Record<string, unknown>\n\n/** @internal */\nexport function prepareFormState<T extends FIXME_SanityDocument>(\n  props: RawState<ObjectSchemaType, T>\n): ObjectFormNode | null {\n  return prepareObjectInputState(props)\n}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport {useLayoutEffect, useMemo, useRef} from 'react'\nimport {pathFor} from '@sanity/util/paths'\nimport {FormNodePresence} from '../../presence'\nimport {useCurrentUser} from '../../store'\nimport {StateTree, ObjectFormNode} from './types'\nimport {prepareFormState, FIXME_SanityDocument} from './formState'\nimport {immutableReconcile} from './utils/immutableReconcile'\nimport {DocumentFormNode} from './types/nodes'\n\n/** @internal */\nexport type FormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n> = ObjectFormNode<T, S>\n\n/** @internal */\nexport function useFormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n>(\n  schemaType: ObjectSchemaType,\n  {\n    comparisonValue,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    openPath,\n    presence,\n    validation,\n    readOnly,\n    changesOpen,\n  }: {\n    fieldGroupState?: StateTree<string> | undefined\n    collapsedFieldSets?: StateTree<boolean> | undefined\n    collapsedPaths?: StateTree<boolean> | undefined\n    value: Partial<FIXME_SanityDocument>\n    comparisonValue: Partial<FIXME_SanityDocument> | null\n    openPath: Path\n    focusPath: Path\n    presence: FormNodePresence[]\n    validation: ValidationMarker[]\n    changesOpen?: boolean\n    readOnly?: boolean\n  }\n): FormState<T, S> | null {\n  // note: feel free to move these state pieces out of this hook\n  const currentUser = useCurrentUser()\n\n  const prev = useRef<DocumentFormNode | null>(null)\n\n  useLayoutEffect(() => {\n    prev.current = null\n  }, [schemaType])\n\n  return useMemo(() => {\n    // console.time('derive form state')\n    const next = prepareFormState({\n      schemaType,\n      document: value,\n      fieldGroupState,\n      collapsedFieldSets,\n      collapsedPaths,\n      value,\n      comparisonValue,\n      focusPath,\n      openPath,\n      readOnly,\n      path: pathFor([]),\n      level: 0,\n      currentUser,\n      presence,\n      validation,\n      changesOpen,\n    }) as ObjectFormNode<T, S> // TODO: remove type cast\n\n    const reconciled = immutableReconcile(prev.current, next)\n    prev.current = reconciled\n    // console.timeEnd('derive form state')\n    return reconciled\n  }, [\n    schemaType,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    comparisonValue,\n    focusPath,\n    openPath,\n    currentUser,\n    presence,\n    validation,\n    changesOpen,\n  ])\n}\n","import React from 'react'\nimport {Text} from '@sanity/ui'\n\n// This is the fallback marker renderer if the block editor didn't get the 'renderCustomMarkers' prop\n// You will probably only see this when you first start to play with custom markers as a developer\nexport function DefaultCustomMarkers() {\n  return (\n    <Text size={1}>\n      This is a example custom marker, please implement <code>renderCustomMarkers</code> function.\n    </Text>\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useEffect, useMemo, useRef} from 'react'\nimport {Source} from '../config'\nimport {FormNodePresence} from '../presence'\nimport {FIXME} from '../FIXME'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\nimport {\n  FormBuilderFilterFieldFn,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {FormFieldGroup, ObjectMember, StateTree} from './store'\nimport {ArrayOfObjectsFunctions} from './inputs/arrays/ArrayOfObjectsInput/ArrayOfObjectsFunctions'\nimport {DefaultMarkers} from './inputs/PortableText/_legacyDefaultParts/Markers'\nimport {DefaultCustomMarkers} from './inputs/PortableText/_legacyDefaultParts/CustomMarkers'\nimport {PatchChannel, PatchEvent} from './patch'\nimport {FormCallbacksProvider} from './studio/contexts/FormCallbacks'\nimport {PresenceProvider} from './studio/contexts/Presence'\nimport {ValidationProvider} from './studio/contexts/Validation'\n\nexport interface FormBuilderProviderProps {\n  /**\n   * @internal\n   */\n  __internal_patchChannel?: PatchChannel // eslint-disable-line camelcase\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  file: Source['form']['file']\n  filterField?: FormBuilderFilterFieldFn\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  image: Source['form']['image']\n  members: ObjectMember[]\n  onChange: (event: PatchEvent) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormNodePresence[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  unstable?: Source['form']['unstable']\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\nconst missingPatchChannel: PatchChannel = {\n  publish: () => undefined,\n  subscribe: () => {\n    console.warn(\n      'No patch channel provided to form-builder. If you need input based patch updates, please provide one'\n    )\n\n    return () => undefined\n  },\n}\n\nexport function FormBuilderProvider(props: FormBuilderProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel = missingPatchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    file,\n    filterField,\n    focusPath,\n    focused,\n    groups,\n    id,\n    image,\n    members,\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    unstable,\n    validation,\n    value: documentValue,\n  } = props\n\n  const documentValueRef = useRef(documentValue)\n\n  useEffect(() => {\n    documentValueRef.current = documentValue\n  }, [documentValue])\n\n  const __internal: FormBuilderContextValue['__internal'] = useMemo(\n    () => ({\n      patchChannel, // eslint-disable-line camelcase\n      components: {\n        ArrayFunctions: ArrayOfObjectsFunctions,\n        CustomMarkers: unstable?.CustomMarkers || DefaultCustomMarkers,\n        Markers: unstable?.Markers || DefaultMarkers,\n      },\n      file: {\n        assetSources: file.assetSources,\n        directUploads: file?.directUploads !== false,\n      },\n      filterField: filterField || (() => true),\n      image: {\n        assetSources: image.assetSources,\n        directUploads: image?.directUploads !== false,\n      },\n      getDocument: () => documentValueRef.current as FIXME,\n      onChange,\n    }),\n    [file, filterField, image, onChange, patchChannel, unstable]\n  )\n\n  const formBuilder: FormBuilderContextValue = useMemo(\n    () => ({\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n      value: documentValue,\n    }),\n    [\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      documentValue,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n    ]\n  )\n\n  return (\n    <FormBuilderContext.Provider value={formBuilder}>\n      <FormCallbacksProvider\n        onChange={onChange}\n        onFieldGroupSelect={onFieldGroupSelect}\n        onPathBlur={onPathBlur}\n        onPathFocus={onPathFocus}\n        onPathOpen={onPathOpen}\n        onSetPathCollapsed={onSetPathCollapsed}\n        onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      >\n        <PresenceProvider presence={presence}>\n          <ValidationProvider validation={validation}>{children}</ValidationProvider>\n        </PresenceProvider>\n      </FormCallbacksProvider>\n    </FormBuilderContext.Provider>\n  )\n}\n","import {map, mergeMap, startWith, switchMap} from 'rxjs/operators'\nimport {ReferenceFilterSearchOptions, ReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, EMPTY, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {ReferenceInfo, ReferenceSearchHit} from '../../../inputs/ReferenceInput/types'\nimport {DocumentPreviewStore, getPreviewPaths, prepareForPreview} from '../../../../preview'\nimport {collate, CollatedHit, getDraftId, getIdPair, isRecord} from '../../../../util'\nimport {createWeightedSearch} from '../../../../search'\n\nconst READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes an id and a reference schema type, returns metadata about it\n */\nexport function getReferenceInfo(\n  documentPreviewStore: DocumentPreviewStore,\n  id: string,\n  referenceType: ReferenceSchemaType\n): Observable<ReferenceInfo> {\n  const {publishedId, draftId} = getIdPair(id)\n\n  const pairAvailability$ = documentPreviewStore.unstable_observeDocumentPairAvailability(id)\n\n  return pairAvailability$.pipe(\n    switchMap((pairAvailability) => {\n      if (!pairAvailability.draft.available && !pairAvailability.published.available) {\n        // combine availability of draft + published\n        const availability =\n          pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n          pairAvailability.published.reason === 'PERMISSION_DENIED'\n            ? PERMISSION_DENIED\n            : NOT_FOUND\n\n        // short circuit, neither draft nor published is available so no point in trying to get preview\n        return of({\n          id,\n          type: undefined,\n          availability,\n          preview: {\n            draft: undefined,\n            published: undefined,\n          },\n        } as const)\n      }\n\n      const draftRef = {_type: 'reference', _ref: draftId}\n      const publishedRef = {_type: 'reference', _ref: publishedId}\n\n      const typeName$ = combineLatest([\n        documentPreviewStore.observeDocumentTypeFromId(draftId),\n        documentPreviewStore.observeDocumentTypeFromId(publishedId),\n      ]).pipe(\n        // assume draft + published are always same type\n        map(([draftTypeName, publishedTypeName]) => draftTypeName || publishedTypeName)\n      )\n\n      return typeName$.pipe(\n        switchMap((typeName) => {\n          if (!typeName) {\n            // we have already asserted that either the draft or the published document is readable, so\n            // if we get here we can't read the _type, so we're likely to be in an inconsistent state\n            // waiting for an update to reach the client. Since we're in the context of a reactive stream based on\n            // the _type we'll get it eventually\n            return EMPTY\n          }\n\n          // get schema type for the referenced document\n          const refSchemaType = referenceType.to.find((memberType) => memberType.name === typeName)!\n\n          if (!refSchemaType) {\n            return EMPTY\n          }\n\n          const previewPaths = [\n            ...(getPreviewPaths(refSchemaType?.preview) || []),\n            ['_updatedAt'],\n            ['_createdAt'],\n          ]\n\n          const draftPreview$ = documentPreviewStore.observePaths(draftRef, previewPaths).pipe(\n            map((result) =>\n              result\n                ? {\n                    _id: draftId,\n                    ...prepareForPreview(result, refSchemaType),\n                  }\n                : undefined\n            ),\n            startWith(undefined)\n          )\n\n          const publishedPreview$ = documentPreviewStore\n            .observePaths(publishedRef, previewPaths)\n            .pipe(\n              map((result) =>\n                result\n                  ? {\n                      _id: publishedId,\n                      ...prepareForPreview(result, refSchemaType),\n                    }\n                  : undefined\n              ),\n              startWith(undefined)\n            )\n\n          const value$ = combineLatest([draftPreview$, publishedPreview$]).pipe(\n            map(([draft, published]) => ({draft, published}))\n          )\n\n          return value$.pipe(\n            map((value): ReferenceInfo => {\n              const availability =\n                // eslint-disable-next-line no-nested-ternary\n                pairAvailability.draft.available || pairAvailability.published.available\n                  ? READABLE\n                  : pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n                    pairAvailability.published.reason === 'PERMISSION_DENIED'\n                  ? PERMISSION_DENIED\n                  : NOT_FOUND\n\n              return {\n                type: typeName,\n                id: publishedId,\n                availability,\n                preview: {\n                  draft: isRecord(value.draft) ? value.draft : undefined,\n                  published: isRecord(value.published) ? value.published : undefined,\n                },\n              }\n            })\n          )\n        })\n      )\n    })\n  )\n}\n\n/**\n * when we get a search result it may not include all [draft, published] id pairs for documents matching the\n * query. For example: searching for \"potato\" may yield a hit in the draft, but not the published (or vice versa)\n *\n * This method takes a list of collated search hits and returns an array of the missing \"counterpart\" ids\n */\nfunction getCounterpartIds(collatedHits: CollatedHit[]): string[] {\n  return collatedHits\n    .filter(\n      (collatedHit) =>\n        // we're interested in hits where either draft or published is missing\n        !collatedHit.draft || !collatedHit.published\n    )\n    .map((collatedHit) =>\n      // if we have the draft, return the published id or vice versa\n      collatedHit.draft ? collatedHit.id : getDraftId(collatedHit.id)\n    )\n}\n\nfunction getExistingCounterparts(client: SanityClient, ids: string[]) {\n  return ids.length === 0\n    ? of([])\n    : client.observable.fetch(`*[_id in $ids]._id`, {ids}, {tag: 'get-counterpart-ids'})\n}\n\nexport function referenceSearch(\n  client: SanityClient,\n  textTerm: string,\n  type: ReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<ReferenceSearchHit[]> {\n  const searchWeighted = createWeightedSearch(type.to, client, options)\n  return searchWeighted(textTerm, {includeDrafts: true}).pipe(\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    // pick the 100 best matches\n    map((collated) => collated.slice(0, 100)),\n    mergeMap((collated) => {\n      // Note: It might seem like this step is redundant, but it's here for a reason:\n      // The list of search hits returned from here will be passed as options to the reference input's autocomplete. When\n      // one of them gets selected by the user, it will then be passed as the argument to the `onChange` handler in the\n      // Reference Input. This handler will then look at the passed value to determine whether to make a link to a\n      // draft (using _strengthenOnPublish) or a published document.\n      //\n      // Without this step, in a case where both a draft and a published version exist but only the draft matches\n      // the search term, we'd end up making a reference with `_strengthenOnPublish: true`, when we instead should be\n      // making a normal reference to the published id\n      return getExistingCounterparts(client, getCounterpartIds(collated)).pipe(\n        map((existingCounterpartIds) => {\n          return collated.map((entry) => {\n            const draftId = getDraftId(entry.id)\n            return {\n              id: entry.id,\n              type: entry.type,\n              draft:\n                entry.draft || existingCounterpartIds.includes(draftId)\n                  ? {_id: draftId, _type: entry.type}\n                  : undefined,\n              published:\n                entry.published || existingCounterpartIds.includes(entry.id)\n                  ? {_id: entry.id, _type: entry.type}\n                  : undefined,\n            }\n          })\n        })\n      )\n    })\n  )\n}\n","import {Path, SanityDocument} from '@sanity/types'\nimport {isEqual} from 'lodash'\nimport {useEffect, useMemo, useState} from 'react'\nimport {Subject} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {getValueAtPath} from '../field'\nimport {useUnique} from '../util'\nimport {useFormBuilder} from './useFormBuilder'\n\n/**\n * @beta\n */\nexport function useFormValue(path: Path): unknown {\n  const uniquePath = useUnique(path)\n  const {getDocument, patchChannel} = useFormBuilder().__internal\n  const documentValueSubject = useMemo(() => new Subject<SanityDocument | undefined>(), [])\n  const documentValue$ = useMemo(() => documentValueSubject.asObservable(), [documentValueSubject])\n  const [value, setValue] = useState(() => getValueAtPath(getDocument(), uniquePath))\n\n  // Subscribe to all document changes\n  useEffect(\n    () => patchChannel.subscribe(() => documentValueSubject.next(getDocument())),\n    [documentValueSubject, getDocument, patchChannel]\n  )\n\n  // Subscribe to value at `path`\n  useEffect(() => {\n    const value$ = documentValue$.pipe(\n      map((documentValue) =>\n        uniquePath.length === 0 ? documentValue : getValueAtPath(documentValue, uniquePath)\n      ),\n      distinctUntilChanged((x, y) => isEqual(x, y))\n    )\n\n    const sub = value$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [documentValue$, uniquePath])\n\n  return value\n}\n","import React, {ComponentProps, ForwardedRef, forwardRef, useCallback, useMemo, useRef} from 'react'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport * as PathUtils from '@sanity/util/paths'\nimport {\n  Path,\n  Reference,\n  ReferenceFilterSearchOptions,\n  ReferenceOptions,\n  ReferenceSchemaType,\n  SanityDocument,\n} from '@sanity/types'\nimport {useClient, useSchema} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useDocumentPreviewStore} from '../../../store'\nimport {useReferenceInputOptions} from '../../studio'\nimport {useFormValue} from '../../useFormValue'\nimport {FIXME} from '../../../FIXME'\nimport * as adapter from '../../studio/inputs/client-adapters/reference'\nimport {isNonNullable} from '../../../util'\nimport {EditReferenceEvent} from './types'\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ninterface SearchError {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = PathUtils.get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\ninterface Options {\n  path: Path\n  schemaType: ReferenceSchemaType\n  value?: Reference\n}\n\nexport function useReferenceInput(options: Options) {\n  const {path, schemaType} = options\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const searchClient = useMemo(() => client.withConfig({apiVersion: '2021-03-25'}), [client])\n  const {EditReferenceLinkComponent, onEditReference, activePath, initialValueTemplateItems} =\n    useReferenceInputOptions()\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n\n  const documentTypeName = documentRef.current?._type\n\n  const isCurrentDocumentLiveEdit = useMemo(() => {\n    return schema.get(documentTypeName)?.liveEdit\n  }, [documentTypeName, schema])\n\n  const disableNew = schemaType.options?.disableNew === true\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          adapter.referenceSearch(searchClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [documentRef, path, searchClient, schemaType]\n  )\n\n  const template = options.value?._strengthenOnPublish?.template\n  const EditReferenceLink = useMemo(\n    () =>\n      forwardRef(function EditReferenceLink_(\n        _props: ComponentProps<NonNullable<typeof EditReferenceLinkComponent>>,\n        forwardedRef: ForwardedRef<'a'>\n      ) {\n        return EditReferenceLinkComponent ? (\n          <EditReferenceLinkComponent\n            {..._props}\n            ref={forwardedRef}\n            parentRefPath={path}\n            template={template}\n          />\n        ) : null\n      }),\n    [EditReferenceLinkComponent, path, template]\n  )\n\n  const handleEditReference = useCallback(\n    (event: EditReferenceEvent) => {\n      onEditReference?.({\n        parentRefPath: path,\n        id: event.id,\n        type: event.type,\n        template: event.template,\n      })\n    },\n    [onEditReference, path]\n  )\n\n  const selectedState = PathUtils.startsWith(path, activePath?.path || [])\n    ? activePath?.state\n    : 'none'\n\n  const createOptions = useMemo(() => {\n    if (disableNew) {\n      return []\n    }\n    return (\n      (initialValueTemplateItems || [])\n        // eslint-disable-next-line max-nested-callbacks\n        .filter((i) => schemaType.to.some((refType) => refType.name === i.template?.schemaType))\n        .map((item) =>\n          item.template?.schemaType\n            ? {\n                id: item.id,\n                title:\n                  item.title || `${item.template.schemaType} from template ${item.template.id}`,\n                type: item.template.schemaType,\n                icon: item.icon,\n                template: {\n                  id: item.template.id,\n                  params: item.parameters,\n                },\n\n                permission: {granted: item.granted, reason: item.reason},\n              }\n            : undefined\n        )\n        .filter(isNonNullable)\n    )\n  }, [disableNew, initialValueTemplateItems, schemaType.to])\n\n  const getReferenceInfo = useCallback(\n    (id: string) => adapter.getReferenceInfo(documentPreviewStore, id, schemaType),\n    [documentPreviewStore, schemaType]\n  )\n\n  return {\n    selectedState,\n    handleSearch,\n    isCurrentDocumentLiveEdit,\n    handleEditReference,\n    EditReferenceLink,\n    createOptions,\n    getReferenceInfo,\n  }\n}\n","import {useCallback, useMemo} from 'react'\nimport {catchError, concatMap, map, startWith} from 'rxjs/operators'\nimport {concat, Observable, of, Subject} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {ReferenceInfo} from './types'\n\nconst noop = () => undefined\n\nconst INITIAL_LOADING_STATE: Loadable<ReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\ntype GetReferenceInfo = (id: string) => Observable<ReferenceInfo>\n\nexport function useReferenceInfo(\n  id: string | undefined,\n  getReferenceInfo: GetReferenceInfo\n): Loadable<ReferenceInfo> {\n  // NOTE: this is a small message queue to handle retries\n  const msgSubject = useMemo(() => new Subject<{type: 'retry'}>(), [])\n  const msg$ = useMemo(() => msgSubject.asObservable(), [msgSubject])\n\n  const retry = useCallback(() => {\n    msgSubject.next({type: 'retry'})\n  }, [msgSubject])\n\n  const referenceInfo = useMemoObservable(\n    () =>\n      concat(of(null), msg$).pipe(\n        map(() => id),\n        concatMap((refId: string | undefined) =>\n          refId\n            ? getReferenceInfo(refId).pipe(\n                map((result) => {\n                  return {\n                    isLoading: false,\n                    result,\n                    error: undefined,\n                    retry,\n                  } as const\n                }),\n                startWith(INITIAL_LOADING_STATE),\n                catchError((err: Error) => {\n                  console.error(err)\n                  return of({isLoading: false, result: undefined, error: err, retry} as const)\n                })\n              )\n            : of(EMPTY_STATE)\n        )\n      ),\n    [getReferenceInfo, id, msg$, retry],\n    INITIAL_LOADING_STATE\n  )\n\n  // @todo test and see if this were fixed in `react-rx@2.1.x`\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(id, id)\n  if (id && previousId !== id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import React, {useEffect, useReducer} from 'react'\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow'\n\nfunction useInterval(ms: number) {\n  const [tick, update] = useReducer((n) => n + 1, 0)\n\n  useEffect(() => {\n    const i = setInterval(update, ms)\n    return () => clearInterval(i)\n  }, [ms])\n  return tick\n}\n\nexport function TimeAgo({time}: {time: string}) {\n  useInterval(1000)\n  const timeSince = formatDistanceToNow(new Date(time))\n  return <span title={timeSince}>{timeSince} ago</span>\n}\n","import React, {ComponentType, ReactNode, useMemo} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip, useRootTheme} from '@sanity/ui'\nimport {AccessDeniedIcon, EditIcon, HelpCircleIcon, PublishIcon} from '@sanity/icons'\nimport {RenderPreviewCallback} from '../../types'\nimport {DocumentAvailability} from '../../../preview'\nimport {PreviewLayoutKey, PreviewProps, TextWithTone} from '../../../components'\nimport {useDocumentPresence} from '../../../store'\nimport {DocumentPreviewPresence} from '../../../presence'\nimport {TimeAgo} from './utils/TimeAgo'\nimport {ReferenceInfo} from './types'\n\nfunction UnavailableMessage(props: {icon: ComponentType; children: ReactNode; title: ReactNode}) {\n  const Icon = props.icon\n  return (\n    <Flex padding={3}>\n      <Box>\n        <Text size={1}>\n          <Icon />\n        </Text>\n      </Box>\n      <Box flex={1} marginLeft={3}>\n        <Text size={1} weight=\"semibold\">\n          {props.title}\n        </Text>\n\n        <Box marginTop={3}>\n          <Text as=\"p\" muted size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </Flex>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function ReferencePreview(props: {\n  availability: DocumentAvailability\n  id: string\n  preview: ReferenceInfo['preview']\n  refType: ObjectSchemaType\n  layout: PreviewLayoutKey\n  renderPreview: RenderPreviewCallback\n  showTypeLabel?: boolean\n}) {\n  const {availability, id, layout, preview, refType, renderPreview, showTypeLabel} = props\n\n  const theme = useRootTheme()\n  const documentPresence = useDocumentPresence(id)\n\n  const notFound = availability.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability.reason === 'PERMISSION_DENIED'\n\n  const previewId =\n    preview.draft?._id ||\n    preview.published?._id ||\n    // note: during publish of the referenced document we might have both a missing draft and a missing published version\n    // this happens because the preview system tries to optimistically re-fetch as soon as it sees a mutation, but\n    // when publishing, the draft is deleted, and therefore both the draft and the published may be missing for a brief\n    // moment before the published version appears. In this case, it's safe to fallback to the given id, which is always\n    // the published id\n    id\n\n  // Note: we can't pass the preview values as-is to the Preview-component here since it's a \"prepared\" value and the\n  // Preview component expects the \"raw\"/unprepared value. By passing only _id and _type we make sure the Preview-component\n  // resolve the preview value it needs (this is cached in the runtime, so not likely to cause any fetch overhead)\n  const previewStub = useMemo(\n    () => ({_id: previewId, _type: refType.name}),\n    [previewId, refType.name]\n  )\n\n  const previewProps: Omit<PreviewProps, 'renderDefault'> = useMemo(\n    () => ({\n      layout,\n      schemaType: refType,\n      value: previewStub,\n    }),\n    [layout, previewStub, refType]\n  )\n\n  return (\n    <Flex align=\"center\">\n      {availability.available ? (\n        <Box flex={1}>{renderPreview(previewProps)}</Box>\n      ) : (\n        <Box flex={1}>\n          <Flex align=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={3}>\n          {showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title}\n            </Label>\n          )}\n\n          {insufficientPermissions || notFound ? (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage title=\"Not found\" icon={HelpCircleIcon}>\n                      The referenced document does not exist\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage title=\"Insufficcient permissions\" icon={AccessDeniedIcon}>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  <HelpCircleIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          ) : null}\n\n          {documentPresence && documentPresence.length > 0 && (\n            <DocumentPreviewPresence presence={documentPresence} />\n          )}\n\n          <Inline space={4}>\n            <Box>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.published?._updatedAt ? (\n                        <>\n                          Published <TimeAgo time={preview.published._updatedAt} />\n                        </>\n                      ) : (\n                        <>Not published</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'positive' : 'default'}\n                  size={1}\n                  dimmed={!preview.published}\n                  muted={!preview.published}\n                >\n                  <PublishIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n\n            <Box>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.draft?._updatedAt ? (\n                        <>\n                          Edited <TimeAgo time={preview.draft._updatedAt} />\n                        </>\n                      ) : (\n                        <>No unpublished edits</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'caution' : 'default'}\n                  size={1}\n                  dimmed={!preview.draft}\n                  muted={!preview.draft}\n                >\n                  <EditIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          </Inline>\n        </Inline>\n      </Box>\n    </Flex>\n  )\n}\n","/* eslint-disable max-nested-callbacks */\n/* eslint-disable no-nested-ternary */\n\nimport React from 'react'\nimport {ReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {RenderPreviewCallback} from '../../types'\nimport {ReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {ReferencePreview} from './ReferencePreview'\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function OptionPreview(props: {\n  id: string\n  type: ReferenceSchemaType\n  getReferenceInfo: (id: string) => Observable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n}) {\n  const {getReferenceInfo, id: documentId, renderPreview} = props\n  const {isLoading, result: referenceInfo, error} = useReferenceInfo(documentId, getReferenceInfo)\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">\n          <Text muted size={1}>\n            Error: {error.message}\n          </Text>\n        </Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.type.to.find((toType) => toType.name === referenceInfo.type)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n\n  return (\n    referenceInfo &&\n    refType && (\n      <ReferencePreview\n        availability={referenceInfo.availability}\n        id={referenceInfo.id}\n        layout=\"default\"\n        preview={referenceInfo.preview}\n        refType={refType}\n        renderPreview={renderPreview}\n        showTypeLabel={props.type.to.length > 1}\n      />\n    )\n  )\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\n\nimport React, {ComponentProps} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Box, Button, Menu, MenuButton, MenuItem, Tooltip} from '@sanity/ui'\nimport {InsufficientPermissionsMessage} from '../../../components'\nimport {CreateReferenceOption} from './types'\n\ninterface Props extends ComponentProps<typeof Button> {\n  id: string\n  createOptions: CreateReferenceOption[]\n  menuRef?: React.RefObject<HTMLDivElement>\n  onCreate: (option: CreateReferenceOption) => void\n}\n\nfunction ConditionalTooltip(\n  props: ComponentProps<typeof Tooltip> & {enabled: boolean}\n): React.ReactElement {\n  const {enabled, ...rest} = props\n  return enabled ? <Tooltip {...rest} /> : <>{props.children}</>\n}\n\nconst INLINE_BLOCK_STYLE = {display: 'inline-flex'}\nconst FULL_WIDTH = {width: '100%'}\n\nexport function CreateButton(props: Props) {\n  const {createOptions, onCreate, id, ...rest} = props\n\n  const canCreateAny = createOptions.some((option) => option.permission.granted)\n  if (!canCreateAny) {\n    return (\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <InsufficientPermissionsMessage operationLabel=\"create a new reference\" />\n          </Box>\n        }\n      >\n        {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n        <div style={INLINE_BLOCK_STYLE}>\n          <Button text=\"Create new\" mode=\"ghost\" disabled icon={AddIcon} style={FULL_WIDTH} />\n        </div>\n      </Tooltip>\n    )\n  }\n\n  return createOptions.length > 1 ? (\n    <MenuButton\n      button={<Button {...rest} text=\"Create new\" mode=\"ghost\" icon={AddIcon} />}\n      id={id}\n      menu={\n        <Menu ref={props.menuRef}>\n          {createOptions.map((createOption) => (\n            <ConditionalTooltip\n              enabled={!createOption.permission.granted}\n              key={createOption.id}\n              content={\n                <Box padding={2}>\n                  <InsufficientPermissionsMessage operationLabel=\"create this type of document\" />\n                </Box>\n              }\n              portal\n            >\n              {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n              <div>\n                <MenuItem\n                  disabled={!createOption.permission.granted}\n                  icon={createOption.icon}\n                  text={createOption.title}\n                  onClick={() => onCreate(createOption)}\n                />\n              </div>\n            </ConditionalTooltip>\n          ))}\n        </Menu>\n      }\n      placement=\"right\"\n      popover={{portal: true, tone: 'default', constrainSize: true}}\n    />\n  ) : (\n    <Button\n      {...rest}\n      text=\"Create new\"\n      mode=\"ghost\"\n      disabled={!createOptions[0].permission.granted}\n      onClick={() => onCreate(createOptions[0])}\n      icon={AddIcon}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>{props.searchString}</strong>\n                    {props.searchString?.toLowerCase() === 'capybara' ? (\n                      <>. What a shame. There should be more Capybaras.</>\n                    ) : null}\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {Grid, useElementRect} from '@sanity/ui'\nimport React, {ReactNode, ForwardedRef, forwardRef, useCallback, useState} from 'react'\nimport styled, {css} from 'styled-components'\n\nconst NARROW_LAYOUT = css`\n  grid-template-columns: minmax(0px, 1fr);\n`\n\nconst WIDE_LAYOUT = css`\n  grid-template-columns: 1fr min-content;\n`\n\nconst Root = styled(Grid)<{$narrow: boolean}>((props: {$narrow: boolean}) =>\n  props.$narrow ? NARROW_LAYOUT : WIDE_LAYOUT\n)\n\nexport const AutocompleteContainer = forwardRef(function AutocompleteContainer(\n  props: {\n    children: ReactNode\n  },\n  forwardedRef: ForwardedRef<HTMLDivElement>\n) {\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleNewRef = useCallback(\n    (element: HTMLDivElement) => {\n      // there's a bit of \"double bookkeeping\" here. since useElementRect needs to re-run whenever the ref updates,\n      // and thus we need to keep it in the state\n      setForwardedRef(forwardedRef, element)\n      setRootElement(element)\n    },\n    [forwardedRef]\n  )\n\n  const inputWrapperRect = useElementRect(rootElement)\n\n  return (\n    <Root ref={handleNewRef} gap={1} $narrow={(inputWrapperRect?.width || 0) < 480}>\n      {props.children}\n    </Root>\n  )\n})\n\nfunction setForwardedRef<T>(ref: ForwardedRef<T>, instance: T) {\n  if (typeof ref === 'function') {\n    ref(instance)\n  } else if (ref) {\n    ref.current = instance\n  }\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\n\nimport React, {KeyboardEvent, FocusEvent, useCallback, useRef, useState, useMemo} from 'react'\nimport {concat, Observable, of} from 'rxjs'\n\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {Box, Button, Stack, Text, useToast} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {uuid} from '@sanity/uuid'\nimport styled from 'styled-components'\nimport {set, setIfMissing, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {PreviewCard} from '../../../components'\nimport {getPublishedId, isNonNullable} from '../../../util'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {useReferenceInput} from './useReferenceInput'\nimport {\n  CreateReferenceOption,\n  ReferenceInputProps,\n  ReferenceSearchHit,\n  ReferenceSearchState,\n} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {CreateButton} from './CreateButton'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {AutocompleteContainer} from './AutocompleteContainer'\n\nconst StyledPreviewCard = styled(PreviewCard)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  there's probably better ways of solving this */\n  min-height: 36px;\n`\n\nconst INITIAL_SEARCH_STATE: ReferenceSearchState = {\n  hits: [],\n  isLoading: false,\n}\n\nconst NO_FILTER = () => true\n\nfunction nonNullable<T>(v: T): v is NonNullable<T> {\n  return v !== null\n}\n\ninterface AutocompleteOption {\n  hit: ReferenceSearchHit\n  value: string\n}\nexport function ReferenceInput(props: ReferenceInputProps) {\n  const {\n    createOptions,\n    onChange,\n    onEditReference,\n    onSearch,\n    schemaType,\n    readOnly,\n    id,\n    onPathFocus,\n    value,\n    renderPreview,\n    path,\n    elementProps,\n  } = props\n\n  const {getReferenceInfo} = useReferenceInput({\n    path,\n    schemaType,\n    value,\n  })\n\n  const [searchState, setSearchState] = useState<ReferenceSearchState>(INITIAL_SEARCH_STATE)\n\n  const handleCreateNew = useCallback(\n    (option: CreateReferenceOption) => {\n      const newDocumentId = uuid()\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(newDocumentId, ['_ref']),\n        set(true, ['_weak']),\n        set({type: option.type, weak: schemaType.weak, template: option.template}, [\n          '_strengthenOnPublish',\n        ]),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n\n      onEditReference({id: newDocumentId, type: option.type, template: option.template})\n      onPathFocus([])\n    },\n    [onChange, onEditReference, onPathFocus, schemaType]\n  )\n\n  const handleChange = useCallback(\n    (nextId: string) => {\n      if (!nextId) {\n        onChange(unset())\n        onPathFocus([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === nextId)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n      // if there's no published version of this document, set the reference to weak\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(getPublishedId(nextId), ['_ref']),\n        hit.published && !schemaType.weak ? unset(['_weak']) : set(true, ['_weak']),\n        hit.published\n          ? unset(['_strengthenOnPublish'])\n          : set({type: hit?.type, weak: schemaType.weak}, ['_strengthenOnPublish']),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n      // Move focus away from _ref and one level up\n      onPathFocus([])\n    },\n    [onChange, onPathFocus, schemaType.name, schemaType.weak, searchState.hits]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onPathFocus([])\n      }\n    },\n    [onPathFocus]\n  )\n\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfo)\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const {push} = useToast()\n\n  const handleQueryChange = useObservableCallback(\n    (inputValue$: Observable<string | null>) => {\n      return inputValue$.pipe(\n        filter(nonNullable),\n        distinctUntilChanged(),\n        switchMap((searchString) =>\n          concat(\n            of({isLoading: true}),\n            onSearch(searchString).pipe(\n              map((hits) => ({hits, searchString, isLoading: false})),\n              catchError((error) => {\n                push({\n                  title: 'Reference search failed',\n                  description: error.message,\n                  status: 'error',\n                  id: `reference-search-fail-${id}`,\n                })\n\n                console.error(error)\n                return of({hits: []})\n              })\n            )\n          )\n        ),\n\n        scan(\n          (prevState, nextState): ReferenceSearchState => ({...prevState, ...nextState}),\n          INITIAL_SEARCH_STATE\n        ),\n\n        tap(setSearchState)\n      )\n    },\n    [id, onSearch, push]\n  )\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const handleCreateButtonKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onPathFocus([])\n      }\n    },\n    [onPathFocus]\n  )\n\n  const renderOption = useCallback(\n    (option: AutocompleteOption) => {\n      const documentId = option.hit.draft?._id || option.hit.published?._id || option.value\n\n      return (\n        <StyledPreviewCard forwardedAs=\"button\" type=\"button\" radius={2} tone=\"inherit\">\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              getReferenceInfo={getReferenceInfo}\n              id={documentId}\n              renderPreview={renderPreview}\n              type={schemaType}\n            />\n          </Box>\n        </StyledPreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfo, renderPreview]\n  )\n\n  const renderValue = useCallback(() => {\n    return (\n      loadableReferenceInfo.result?.preview.draft?.title ||\n      loadableReferenceInfo.result?.preview.published?.title ||\n      ''\n    )\n  }, [\n    loadableReferenceInfo.result?.preview.draft?.title,\n    loadableReferenceInfo.result?.preview.published?.title,\n  ])\n\n  const handleFocus = useCallback(() => onPathFocus(['_ref']), [onPathFocus])\n  const handleBlur = useCallback(\n    (event: FocusEvent) => {\n      if (!autocompletePopoverReferenceElementRef.current?.contains(event.relatedTarget)) {\n        props.elementProps.onBlur(event)\n      }\n    },\n    [props.elementProps]\n  )\n\n  const isWeakRefToNonexistent =\n    loadableReferenceInfo?.result?.availability?.reason === 'NOT_FOUND' &&\n    !value?._strengthenOnPublish &&\n    value?._weak\n\n  useDidUpdate(props.focusPath?.[0] === '_ref', (hadFocusAtRef, hasFocusAtRef) => {\n    if (!hadFocusAtRef && hasFocusAtRef) {\n      elementProps.ref.current?.focus()\n    }\n  })\n  const hits: AutocompleteOption[] = useMemo(\n    () =>\n      searchState.hits.map((hit) => ({\n        value: hit.id,\n        hit: hit,\n      })),\n    [searchState.hits]\n  )\n  return (\n    <Stack space={1} data-testid=\"reference-input\">\n      <Stack space={2}>\n        {isWeakRefToNonexistent ? (\n          <Alert\n            data-testid=\"alert-nonexistent-document\"\n            title=\"Nonexistent document reference\"\n            suffix={\n              <Stack padding={2}>\n                <Button text=\"Clear\" onClick={handleClear} />\n              </Stack>\n            }\n          >\n            <Text size={1}>\n              This field is currently referencing a document that doesn't exist (ID:\n              <code>{value._ref}</code>). You can either remove the reference or replace it with\n              another document.\n            </Text>\n          </Alert>\n        ) : null}\n        <AutocompleteContainer ref={autocompletePopoverReferenceElementRef}>\n          <ReferenceAutocomplete\n            {...elementProps}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            data-testid=\"autocomplete\"\n            loading={searchState.isLoading}\n            referenceElement={autocompletePopoverReferenceElementRef.current}\n            options={hits}\n            radius={1}\n            placeholder=\"Type to search\"\n            onKeyDown={handleAutocompleteKeyDown}\n            readOnly={loadableReferenceInfo.isLoading}\n            onQueryChange={handleQueryChange}\n            searchString={searchState.searchString}\n            onChange={handleChange}\n            filterOption={NO_FILTER}\n            renderOption={renderOption as any}\n            renderValue={renderValue}\n            value={value?._ref}\n            openButton={{onClick: handleAutocompleteOpenButtonClick}}\n          />\n\n          {!readOnly && createOptions.length > 0 && (\n            <CreateButton\n              id={`${id}-selectTypeMenuButton`}\n              createOptions={createOptions}\n              onCreate={handleCreateNew}\n              onKeyDown={handleCreateButtonKeyDown}\n            />\n          )}\n        </AutocompleteContainer>\n      </Stack>\n    </Stack>\n  )\n}\n","import React, {ComponentType, createContext, HTMLProps, useContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {TemplatePermissionsResult} from '../../../store'\n\nconst Context = createContext<ReferenceInputOptions>({})\n\n/** @internal */\nexport interface TemplateOption {\n  id: string\n  params?: Record<string, string | number | boolean>\n}\n\n/**\n * @internal\n */\nexport interface EditReferenceOptions {\n  id: string\n  type: string\n  parentRefPath: Path\n  template: TemplateOption\n}\n\n/** @internal */\nexport interface EditReferenceLinkComponentProps {\n  documentId: string\n  documentType: string\n  parentRefPath: Path\n  template?: TemplateOption\n  children: React.ReactNode\n}\n\n/**\n * @internal\n */\nexport interface ReferenceInputOptions {\n  /**\n   * Represents the highlighted path if ths current document has a related open\n   * child (e.g. reference in place).\n   */\n  activePath?: {path: Path; state: 'selected' | 'pressed' | 'none'}\n  /**\n   * A specialized `EditReferenceLinkComponent` component that takes in the needed props to open a\n   * referenced document to the right\n   */\n  EditReferenceLinkComponent?: ComponentType<\n    Omit<HTMLProps<'a'>, 'children'> & EditReferenceLinkComponentProps\n  >\n\n  initialValueTemplateItems?: TemplatePermissionsResult[]\n\n  /**\n   * Similar to `EditReferenceChildLink` expect without the wrapping component\n   */\n  onEditReference?: (options: EditReferenceOptions) => void\n}\n\n/**\n * @internal\n */\nexport function useReferenceInputOptions() {\n  return useContext(Context)\n}\n\n/**\n * @internal\n */\nexport function ReferenceInputOptionsProvider(\n  props: ReferenceInputOptions & {children: React.ReactNode}\n) {\n  const {\n    children,\n    activePath,\n    EditReferenceLinkComponent,\n    onEditReference,\n    initialValueTemplateItems,\n  } = props\n\n  const contextValue = useMemo(\n    () => ({\n      activePath,\n      EditReferenceLinkComponent,\n      onEditReference,\n      initialValueTemplateItems,\n    }),\n    [activePath, EditReferenceLinkComponent, onEditReference, initialValueTemplateItems]\n  )\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>\n}\n","import {createContext} from 'react'\nimport {ReviewChangesContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ReviewChangesContext = createContext<ReviewChangesContextValue | null>(null)\n","import {useContext} from 'react'\nimport {ReviewChangesContext} from './ReviewChangesContext'\nimport {ReviewChangesContextValue} from './types'\n\n/**\n * @internal\n */\nexport function useReviewChanges(): ReviewChangesContextValue {\n  const reviewChanges = useContext(ReviewChangesContext)\n\n  if (!reviewChanges) {\n    throw new Error('Review changes: missing context value')\n  }\n\n  return reviewChanges\n}\n","import {\n  Path,\n  Reference,\n  ReferenceFilterSearchOptions,\n  ReferenceOptions,\n  ReferenceSchemaType,\n  SanityDocument,\n} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {get} from '@sanity/util/paths'\nimport React, {ComponentProps, ForwardedRef, forwardRef, useCallback, useMemo, useRef} from 'react'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport * as adapter from '../client-adapters/reference'\nimport {ReferenceInput} from '../../../inputs/ReferenceInput/ReferenceInput'\nimport {CreateReferenceOption, EditReferenceEvent} from '../../../inputs/ReferenceInput/types'\nimport {useReferenceInputOptions} from '../../contexts'\nimport {ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\nimport {useClient, useSchema} from '../../../../hooks'\nimport {useDocumentPreviewStore} from '../../../../store'\nimport {FIXME} from '../../../../FIXME'\nimport {isNonNullable} from '../../../../util'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\n/**\n * @beta\n */\nexport type StudioReferenceInputProps = ObjectInputProps<Reference, ReferenceSchemaType>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\n/**\n * @beta\n */\nexport function StudioReferenceInput(props: StudioReferenceInputProps) {\n  const searchClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {path, schemaType} = props\n  const {EditReferenceLinkComponent, onEditReference, activePath, initialValueTemplateItems} =\n    useReferenceInputOptions()\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n  const documentTypeName = documentRef.current?._type\n  const refType = schema.get(documentTypeName)\n\n  const isDocumentLiveEdit = useMemo(() => refType?.liveEdit, [refType])\n\n  const disableNew = schemaType.options?.disableNew === true\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          adapter.referenceSearch(searchClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [documentRef, path, searchClient, schemaType]\n  )\n\n  const template = props.value?._strengthenOnPublish?.template\n  const EditReferenceLink = useMemo(\n    () =>\n      forwardRef(function EditReferenceLink_(\n        _props: ComponentProps<NonNullable<typeof EditReferenceLinkComponent>>,\n        forwardedRef: ForwardedRef<'a'>\n      ) {\n        return EditReferenceLinkComponent ? (\n          <EditReferenceLinkComponent\n            {..._props}\n            ref={forwardedRef}\n            parentRefPath={path}\n            template={template}\n          />\n        ) : null\n      }),\n    [EditReferenceLinkComponent, path, template]\n  )\n\n  const handleEditReference = useCallback(\n    (event: EditReferenceEvent) => {\n      onEditReference?.({\n        parentRefPath: path,\n        id: event.id,\n        type: event.type,\n        template: event.template,\n      })\n    },\n    [onEditReference, path]\n  )\n\n  const selectedState = PathUtils.startsWith(path, activePath?.path || [])\n    ? activePath?.state\n    : 'none'\n\n  const createOptions = useMemo(() => {\n    if (disableNew) {\n      return []\n    }\n    return (\n      (initialValueTemplateItems || [])\n        // eslint-disable-next-line max-nested-callbacks\n        .filter((i) => {\n          return schemaType.to.some((_refType) => {\n            return _refType.name === i.template?.schemaType\n          })\n        })\n        .map((item): CreateReferenceOption | undefined =>\n          item.template?.schemaType\n            ? {\n                id: item.id,\n                title:\n                  item.title || `${item.template.schemaType} from template ${item.template?.id}`,\n                type: item.template.schemaType,\n                icon: item.icon,\n                template: {\n                  id: item.template?.id,\n                  params: item.parameters,\n                },\n\n                permission: {granted: item.granted, reason: item.reason},\n              }\n            : undefined\n        )\n        .filter(isNonNullable)\n    )\n  }, [disableNew, initialValueTemplateItems, schemaType.to])\n\n  const getReferenceInfo = useCallback(\n    (id: any, _type: any) => adapter.getReferenceInfo(documentPreviewStore, id, _type),\n    [documentPreviewStore]\n  )\n\n  return (\n    <ReferenceInput\n      {...props}\n      onSearch={handleSearch}\n      liveEdit={isDocumentLiveEdit}\n      getReferenceInfo={getReferenceInfo}\n      selectedState={selectedState}\n      editReferenceLinkComponent={EditReferenceLink}\n      createOptions={createOptions}\n      onEditReference={handleEditReference}\n    />\n  )\n}\n","import {ArraySchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport * as is from '../../utils/is'\nimport {ArrayOfOptionsInput} from '../../inputs/arrays/ArrayOfOptionsInput'\nimport {PortableTextInput} from '../../inputs/PortableText/PortableTextInput'\nimport {TagsArrayInput} from '../../inputs/TagsArrayInput'\nimport {ArrayOfPrimitivesInput} from '../../inputs/arrays/ArrayOfPrimitivesInput'\nimport {ArrayOfObjectsInput} from '../../inputs/arrays/ArrayOfObjectsInput'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function isArrayOfPrimitives(type: ArraySchemaType): boolean {\n  return type.of.every((ofType) => PRIMITIVES.includes(ofType.jsonType))\n}\n\nfunction isStringArray(type: ArraySchemaType): type is ArraySchemaType<string> {\n  return type.of.length === 1 && is.type('string', type.of[0])\n}\n\nfunction isTagsArray(type: ArraySchemaType<string>): boolean {\n  return type.options?.layout === 'tags'\n}\n\nfunction isPortableText(type: ArraySchemaType): boolean {\n  // TODO: better testing here, not only for type 'block' !\n  return type.of.some((memberType) => is.type('block', memberType))\n}\n\nfunction hasListOptions(type: ArraySchemaType): boolean {\n  return Boolean(type.options?.list)\n}\n\nexport function resolveArrayInput(type: ArraySchemaType): ComponentType<any> {\n  if (isStringArray(type) && isTagsArray(type)) {\n    return TagsArrayInput\n  }\n\n  // Schema provides predefines list\n  if (hasListOptions(type)) {\n    return ArrayOfOptionsInput\n  }\n\n  // Special component for array of primitive values\n  if (isArrayOfPrimitives(type)) {\n    return ArrayOfPrimitivesInput\n  }\n\n  // Use Portable Text editor if portable text.\n  if (isPortableText(type)) {\n    return PortableTextInput\n  }\n\n  return ArrayOfObjectsInput\n}\n","import {StringSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {getOption} from './helpers'\n\nexport function resolveStringInput(type: StringSchemaType) {\n  return getOption(type, 'list') ? SelectInput : StringInput\n}\n","import {NumberSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {getOption} from './helpers'\n\nexport function resolveNumberInput(type: NumberSchemaType) {\n  return getOption(type, 'list') ? SelectInput : NumberInput\n}\n","import {Button, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(Button).attrs({forwardedAs: 'label'})(\n  ({theme}: {theme: Theme}) => {\n    const {focusRing} = theme.sanity\n    const base = theme.sanity.color.base\n    const border = {width: 1, color: 'var(--card-border-color)'}\n\n    return css`\n      &:not([data-disabled='true']) {\n        &:focus-within {\n          box-shadow: ${focusRingStyle({base, border, focusRing})};\n        }\n      }\n\n      & input {\n        overflow: hidden;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        min-width: 0;\n        display: block;\n        appearance: none;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        opacity: 0;\n      }\n    `\n  }\n)\n","import React, {createElement, isValidElement, useId} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {Box, ButtonProps, Flex, Text, useTheme} from '@sanity/ui'\nimport {FileButton} from './styles'\n\nexport interface FileInputButtonProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputButton = React.forwardRef(function FileInputButton(\n  props: FileInputButtonProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = `${idProp || ''}-${useId()}`\n  const theme = useTheme()\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"center\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text\n          align={textAlign}\n          size={fontSize}\n          textOverflow=\"ellipsis\"\n          weight={theme.sanity.button.textWeight}\n        >\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton {...rest} htmlFor={id} padding={0} fontSize={2} disabled={disabled}>\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        ref={forwardedRef}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {useMemo} from 'react'\nimport {BinaryDocumentIcon, AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FileLike} from '../../../studio/uploads/types'\n\ninterface Props {\n  readOnly?: boolean\n  hoveringFiles: FileLike[]\n  type: string\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  directUploads?: boolean\n}\n\nconst RootFlex = styled(Flex)`\n  pointer-events: none;\n`\n\nexport function PlaceholderText(props: Props) {\n  const {hoveringFiles, type, readOnly, acceptedFiles, rejectedFilesCount, directUploads} = props\n  const isFileType = type === 'file'\n\n  const messageIcon = useMemo(() => {\n    if (readOnly) {\n      return <ReadOnlyIcon />\n    }\n\n    if ((hoveringFiles && rejectedFilesCount > 0) || !directUploads) {\n      return <AccessDeniedIcon />\n    }\n\n    return isFileType ? <BinaryDocumentIcon /> : <ImageIcon />\n  }, [directUploads, hoveringFiles, isFileType, readOnly, rejectedFilesCount])\n\n  const messageText = useMemo(() => {\n    let message = `Drag or paste ${type} here`\n\n    if (!directUploads) {\n      return `Can't upload files here`\n    }\n\n    if (readOnly) {\n      message = 'Read only'\n    }\n\n    if (hoveringFiles && directUploads && !readOnly) {\n      if (acceptedFiles.length > 0) {\n        message = `Drop to upload ${type}`\n      }\n      if (rejectedFilesCount > 0) {\n        message = `Can't upload ${rejectedFilesCount} file${rejectedFilesCount > 1 ? 's' : ''} here`\n      }\n    }\n\n    return message\n  }, [acceptedFiles.length, directUploads, hoveringFiles, readOnly, rejectedFilesCount, type])\n\n  return (\n    <RootFlex align=\"center\" gap={2} justify=\"center\">\n      <Text muted>{messageIcon}</Text>\n\n      <Text size={1} muted>\n        {messageText}\n      </Text>\n    </RootFlex>\n  )\n}\n","import React from 'react'\nimport {UploadIcon} from '@sanity/icons'\nimport {Flex, Inline} from '@sanity/ui'\nimport {FileLike} from '../../../studio/uploads/types'\nimport {FileInputButton} from './FileInputButton/FileInputButton'\nimport {PlaceholderText} from './PlaceholderText'\n\ntype UploadPlaceholderProps = {\n  onUpload?: (files: File[]) => void\n  browse?: React.ReactNode\n  readOnly?: boolean\n  type: string\n  hoveringFiles: FileLike[]\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  accept: string\n  directUploads?: boolean\n}\n\nexport const UploadPlaceholder = React.memo(function UploadPlaceholder({\n  browse,\n  onUpload,\n  readOnly,\n  type,\n  hoveringFiles,\n  acceptedFiles,\n  rejectedFilesCount,\n  accept,\n  directUploads,\n}: UploadPlaceholderProps) {\n  return (\n    <Flex\n      align=\"center\"\n      justify=\"space-between\"\n      gap={4}\n      direction={['column', 'column', 'row']}\n      paddingY={[2, 2, 0]}\n    >\n      <Flex align=\"center\" justify=\"center\" gap={2} flex={1}>\n        <PlaceholderText\n          readOnly={readOnly}\n          hoveringFiles={hoveringFiles}\n          acceptedFiles={acceptedFiles}\n          rejectedFilesCount={rejectedFilesCount}\n          type={type}\n          directUploads={directUploads}\n        />\n      </Flex>\n      <Inline space={2}>\n        <FileInputButton\n          icon={UploadIcon}\n          mode=\"ghost\"\n          onSelect={onUpload}\n          accept={accept}\n          text=\"Upload\"\n          data-testid=\"file-input-upload-button\"\n          disabled={readOnly || !directUploads}\n        />\n        {browse}\n      </Inline>\n    </Flex>\n  )\n})\n","import React, {ReactNode} from 'react'\nimport {Observable} from 'rxjs'\nimport {Reference} from '@sanity/types'\nimport {useMemoObservable} from 'react-rx'\n\ninterface Props<AssetDoc> {\n  reference: Reference\n  observeAsset: (assetId: string) => Observable<AssetDoc>\n  children: (assetDocument: AssetDoc) => ReactNode\n  waitPlaceholder?: ReactNode\n}\n\nexport function WithReferencedAsset<Asset>(props: Props<Asset>) {\n  const {reference, children, observeAsset, waitPlaceholder} = props\n  const documentId = reference?._ref\n  const asset = useMemoObservable(() => observeAsset(documentId), [documentId])\n  return <>{documentId && asset ? children(asset) : waitPlaceholder}</>\n}\n","/* eslint-disable import/named */\n\nimport {Card} from '@sanity/ui'\nimport {fileTarget} from '../../common/fileTarget'\nimport {withFocusRing} from '../../../components/withFocusRing'\n\nexport type {FileInfo} from '../../common/fileTarget'\n\n// Note: FileTarget needs its own focusRing because we need show it on click, not only when :focus-visible\nexport const FileTarget = fileTarget(withFocusRing(Card))\n","import {Card, Flex, Stack, Code} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardWrapper = styled(Card)`\n  min-height: 82px;\n  box-sizing: border-box;\n`\n\nexport const FlexWrapper = styled(Flex)`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`\n\nexport const LeftSection = styled(Stack)`\n  position: relative;\n  width: 60%;\n`\n\nexport const CodeWrapper = styled(Code)`\n  position: relative;\n  width: 100%;\n\n  code {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    position: relative;\n    max-width: 200px;\n  }\n`\n","import React, {useEffect} from 'react'\nimport {Flex, Text, Button, Inline, Card} from '@sanity/ui'\nimport {UploadState} from '@sanity/types'\nimport {LinearProgress} from '../../../../components'\nimport {CardWrapper, FlexWrapper, LeftSection, CodeWrapper} from './UploadProgress.styled'\n\ntype Props = {\n  uploadState: UploadState\n  onCancel?: () => void\n  onStale?: () => void\n  height?: number\n}\n\n// If it's more than this amount of milliseconds since last time upload state was reported,\n// the upload will be marked as stale/interrupted.\nconst STALE_UPLOAD_MS = 1000 * 60 * 2 // 2 minutes\n\nconst elapsedMs = (date: string): number => new Date().getTime() - new Date(date).getTime()\n\nexport function UploadProgress({uploadState, onCancel, onStale, height}: Props) {\n  const filename = uploadState.file.name\n\n  useEffect(() => {\n    if (elapsedMs(uploadState.updated) > STALE_UPLOAD_MS) {\n      onStale?.()\n    }\n  }, [uploadState.updated, onStale])\n\n  return (\n    <CardWrapper tone=\"primary\" padding={4} border style={{height: `${height}px`}}>\n      <FlexWrapper align=\"center\" justify=\"space-between\" height=\"fill\" direction=\"row\" gap={2}>\n        <LeftSection>\n          <Flex justify=\"center\" gap={[3, 3, 2, 2]} direction={['column', 'column', 'row']}>\n            <Text size={1}>\n              <Inline space={2}>\n                Uploading\n                <CodeWrapper size={1}>{filename ? filename : '...'}</CodeWrapper>\n              </Inline>\n            </Text>\n          </Flex>\n\n          <Card marginTop={3} radius={5} shadow={1}>\n            <LinearProgress value={uploadState.progress} />\n          </Card>\n        </LeftSection>\n\n        {onCancel ? (\n          <Button\n            fontSize={2}\n            text=\"Cancel upload\"\n            mode=\"ghost\"\n            tone=\"critical\"\n            onClick={onCancel}\n          />\n        ) : null}\n      </FlexWrapper>\n    </CardWrapper>\n  )\n}\n","import {uuid} from '@sanity/uuid'\nimport {FIXME} from '../../../../../FIXME'\n\nexport function urlToFile(url: string, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.onload = () => {\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        const string = reader.result?.toString()\n        const ext = string?.substring('data:image/'.length, string.indexOf(';base64'))\n        if (!ext && !filename) {\n          reject(new Error('Could not find mime type for image'))\n          return\n        }\n        resolve(dataURLtoFile(reader.result as FIXME, filename || `${uuid()}.${ext}`))\n      }\n      reader.readAsDataURL(xhr.response)\n    }\n    xhr.onerror = (error) => {\n      reject(error)\n    }\n    xhr.open('GET', url)\n    xhr.responseType = 'blob'\n    xhr.send()\n  })\n}\n\nexport function base64ToFile(base64Data: string | ArrayBuffer, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const string = base64Data.toString()\n    const ext = string.substring('data:image/'.length, string.indexOf(';base64'))\n    if (!ext && !filename) {\n      reject(new Error('Could not find mime type for image'))\n      return\n    }\n    resolve(dataURLtoFile(base64Data as FIXME, filename || `${uuid()}.${ext}`))\n  })\n}\n\nfunction dataURLtoFile(dataurl: string, filename: string) {\n  const arr = dataurl.split(',')\n  const mime = arr[0].match(/:(.*?);/)?.[1]\n  const bstr = atob(arr[1])\n  let n = bstr.length\n  const u8arr = new Uint8Array(n)\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n)\n  }\n  return new File([u8arr], filename, {type: mime})\n}\n","import {AssetFromSource, FileSchemaType} from '@sanity/types'\nimport {get} from 'lodash'\nimport {FIXME} from '../../../../FIXME'\nimport {FormPatch, PatchEvent, set, setIfMissing, unset} from '../../../patch'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {base64ToFile, urlToFile} from '../ImageInput/utils/image'\n\n// We alias DOM File type here to distinguish it from the type of the File value\ntype DOMFile = globalThis.File\n\ninterface Props {\n  assetFromSource: AssetFromSource[]\n  onChange: (patch: FormPatch | FormPatch[] | PatchEvent) => void\n  type: FileSchemaType\n  resolveUploader: UploaderResolver\n  uploadWith: (uploader: Uploader, file: DOMFile, assetDocumentProps?: UploadOptions) => void\n  isImage?: boolean\n}\n\nexport function handleSelectAssetFromSource({\n  assetFromSource,\n  onChange,\n  type,\n  resolveUploader,\n  uploadWith,\n  isImage,\n}: Props): void {\n  // const {onChange, type, resolveUploader} = this.props\n  if (!assetFromSource) {\n    throw new Error('No asset given')\n  }\n  if (!Array.isArray(assetFromSource) || assetFromSource.length === 0) {\n    throw new Error('Returned value must be an array with at least one item (asset)')\n  }\n  const firstAsset = assetFromSource[0]\n  const originalFilename = get(firstAsset, 'assetDocumentProps.originalFilename')\n  const label = get(firstAsset, 'assetDocumentProps.label')\n  const title = get(firstAsset, 'assetDocumentProps.title')\n  const description = get(firstAsset, 'assetDocumentProps.description')\n  const creditLine = get(firstAsset, 'assetDocumentProps.creditLine')\n  const source = get(firstAsset, 'assetDocumentProps.source')\n  const imagePatches = isImage ? [unset(['hotspot']), unset(['crop'])] : []\n  switch (firstAsset.kind) {\n    case 'assetDocumentId':\n      onChange([\n        setIfMissing({\n          _type: type.name,\n        }),\n        ...imagePatches,\n        set(\n          {\n            _type: 'reference',\n            _ref: firstAsset.value,\n          },\n\n          ['asset']\n        ),\n      ])\n\n      break\n    case 'file': {\n      const uploader = resolveUploader(type, firstAsset.value as FIXME)\n      if (uploader) {\n        uploadWith(uploader, firstAsset.value as FIXME, {\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n      }\n      break\n    }\n    case 'base64':\n      base64ToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    case 'url':\n      urlToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    default: {\n      throw new Error('Invalid value returned from asset source plugin')\n    }\n  }\n}\n","import {Theme, MenuItem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(MenuItem)(({theme}: {theme: Theme}) => {\n  const {focusRing} = theme.sanity\n  const base = theme.sanity.color.base\n  const border = {width: 1, color: 'var(--card-border-color)'}\n\n  return css`\n    position: relative;\n\n    &:not([data-disabled='true']) {\n      &:focus-within {\n        box-shadow: ${focusRingStyle({base, border, focusRing})};\n      }\n    }\n\n    & input {\n      overflow: hidden;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      min-width: 0;\n      display: block;\n      appearance: none;\n      padding: 0;\n      margin: 0;\n      border: 0;\n      opacity: 0;\n    }\n  `\n})\n","import React, {createElement, isValidElement, useId} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {Box, ButtonProps, Flex, Text} from '@sanity/ui'\nimport {FileButton} from './FileInputMenuItem.styled'\n\nexport interface FileInputMenuItemProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputMenuItem = React.forwardRef(function FileInputMenuItem(\n  props: FileInputMenuItemProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = `${idProp || ''}-${useId()}`\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"flex-start\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text align={textAlign} size={fontSize} textOverflow=\"ellipsis\">\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton\n      {...rest}\n      htmlFor={id}\n      padding={0}\n      fontSize={2}\n      disabled={disabled}\n      ref={forwardedRef}\n    >\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {MouseEventHandler, useCallback} from 'react'\n\nimport {UploadIcon, ClipboardIcon, ResetIcon, DownloadIcon} from '@sanity/icons'\nimport {Box, MenuItem, MenuDivider, Label, useToast} from '@sanity/ui'\nimport {FileInputMenuItem} from './FileInputMenuItem/FileInputMenuItem'\n\ninterface Props {\n  onUpload: (files: File[]) => void\n  browse: React.ReactNode\n  readOnly?: boolean\n  onReset: MouseEventHandler<HTMLDivElement>\n  accept: string\n  directUploads?: boolean\n  downloadUrl?: string\n  copyUrl?: string\n}\n\nexport function ActionsMenu(props: Props) {\n  const {onUpload, onReset, readOnly, accept, directUploads, browse, downloadUrl, copyUrl} = props\n\n  const {push: pushToast} = useToast()\n\n  const handleCopyURL = useCallback(() => {\n    navigator.clipboard.writeText(copyUrl || '')\n    pushToast({closable: true, status: 'success', title: 'The url is copied to the clipboard'})\n  }, [pushToast, copyUrl])\n\n  return (\n    <>\n      <Box padding={2}>\n        <Label muted size={1}>\n          Replace\n        </Label>\n      </Box>\n      <FileInputMenuItem\n        icon={UploadIcon}\n        mode=\"bleed\"\n        onSelect={onUpload}\n        accept={accept}\n        text=\"Upload\"\n        data-testid=\"file-input-upload-button\"\n        disabled={readOnly || !directUploads}\n        fontSize={2}\n      />\n      {browse}\n\n      {(downloadUrl || copyUrl) && <MenuDivider />}\n      {downloadUrl && <MenuItem as=\"a\" icon={DownloadIcon} text=\"Download\" href={downloadUrl} />}\n      {copyUrl && <MenuItem icon={ClipboardIcon} text=\"Copy URL\" onClick={handleCopyURL} />}\n\n      <MenuDivider />\n      <MenuItem\n        tone=\"critical\"\n        icon={ResetIcon}\n        text=\"Clear field\"\n        onClick={onReset}\n        disabled={readOnly}\n        data-testid=\"file-input-clear\"\n      />\n    </>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearStale?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function UploadWarning({onClearStale}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Incomplete upload\n          </Text>\n          <Text size={1}>\n            An upload has made no progress in the last 6m and likely got interrupted. You can safely\n            clear the incomplete upload and try uploading again.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Clear upload\" onClick={onClearStale} mode=\"ghost\" />\n    </Card>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RatioBox = styled(Box)<{ratio?: number}>`\n  position: relative;\n  padding-bottom: calc(${({ratio = 3 / 2}) => 1 / ratio} * 100%);\n\n  & > div {\n    position: absolute;\n    top: ${({padding = 0}) => padding}px;\n    left: ${({padding = 0}) => padding}px;\n    right: ${({padding = 0}) => padding}px;\n    bottom: ${({padding = 0}) => padding}px;\n  }\n`\n","/* eslint-disable @typescript-eslint/no-shadow */\nimport {useEffect, useState, type ReactElement} from 'react'\n\ninterface ImageLoaderProps {\n  src: string\n  children: (props: {\n    isLoading: boolean\n    image: HTMLImageElement | null\n    error: Error | null\n  }) => ReactElement | null\n}\n\nexport function ImageLoader(props: ImageLoaderProps) {\n  const {src, children} = props\n  const [isLoading, setIsLoading] = useState(true)\n  const [image, setImage] = useState<HTMLImageElement | null>(null)\n  const [error, setError] = useState<Error | null>(null)\n\n  useEffect(() => {\n    setImage(null)\n    setError(null)\n    setIsLoading(true)\n\n    const image = new Image()\n\n    image.onload = () => {\n      setImage(image)\n      setError(null)\n      setIsLoading(false)\n    }\n\n    image.onerror = () => {\n      setError(new Error(`Could not load image from ${JSON.stringify(src)}`))\n      setIsLoading(false)\n    }\n\n    image.referrerPolicy = 'strict-origin-when-cross-origin'\n    image.src = src\n  }, [src])\n\n  return children({image, error, isLoading})\n}\n","const testProperties = ['', 'webkit', 'moz', 'ms', 'o'].map(\n  (prefix) => `${prefix}backingStoreRatio`\n)\nlet foundProperty: number | string | undefined = -1\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getBackingStoreRatio(context: CanvasRenderingContext2D) {\n  if (foundProperty === -1) {\n    foundProperty = testProperties.find((testProperty) => testProperty in context)\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  //@ts-ignore\n  return foundProperty && context[foundProperty]\n}\n","import type {Coordinate} from '../types'\nimport type {Rect} from './shapes'\n\nexport function isPointInEllipse(point: Coordinate, ellipse: Rect): boolean {\n  const center = {x: ellipse.center.x, y: ellipse.center.y}\n  const xradius = ellipse.width / 2\n  const yradius = ellipse.height / 2\n\n  if (xradius <= 0 || yradius <= 0) {\n    return false\n  }\n\n  const normalized = {x: point.x - center.x, y: point.y - center.y}\n\n  return (\n    Math.pow(normalized.x, 2) / Math.pow(xradius, 2) +\n      Math.pow(normalized.y, 2) / Math.pow(yradius, 2) <=\n    1\n  )\n}\n\nexport function isPointInCircle(\n  {x, y}: Coordinate,\n  circle: Coordinate & {radius: number}\n): boolean {\n  return Math.pow(x - circle.x, 2) + Math.pow(y - circle.y, 2) < Math.pow(circle.radius, 2)\n}\n\nexport function isPointInRect(point: Coordinate, rect: Rect): boolean {\n  return (\n    point.x >= rect.left &&\n    point.x <= rect.left + rect.width &&\n    point.y >= rect.top &&\n    point.y <= rect.top + rect.height\n  )\n}\n\nexport function getPointAtCircumference(radians: number, ellipse: Rect): Coordinate {\n  return {\n    x: ellipse.center.x - (ellipse.width / 2) * Math.cos(radians),\n    y: ellipse.center.y - (ellipse.height / 2) * Math.sin(radians),\n  }\n}\n","import type {Crop} from '../types'\n\nexport class Size {\n  height: number\n  width: number\n  constructor(height: number, width: number) {\n    this.height = height\n    this.width = width\n  }\n}\nexport class Point {\n  x: number\n  y: number\n  constructor(x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n}\n\nclass HLine {\n  y: number\n  _left: number\n  _right: number\n  constructor(y: number, left: number, right: number) {\n    this.y = y\n    this._left = left\n    this._right = right\n  }\n\n  get right() {\n    return new Point(this._right, this.y)\n  }\n\n  get left() {\n    return new Point(this._left, this.y)\n  }\n\n  get length() {\n    return this._right - this._left\n  }\n}\n\nclass Corners {\n  rect: Rect\n  constructor(rect: Rect) {\n    this.rect = rect\n  }\n\n  get top() {\n    return new HLine(this.rect.top, this.rect.left, this.rect.right)\n  }\n\n  get bottom() {\n    return new HLine(this.rect.bottom, this.rect.left, this.rect.right)\n  }\n}\n\nexport class Rect {\n  left: number\n  top: number\n  width: number\n  height: number\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  static fromEdges({left, right, top, bottom}: Crop) {\n    return new Rect(left, top, 1 - left - right, 1 - top - bottom)\n  }\n\n  constructor(left = 0, top = 0, width = 0, height = 0) {\n    this.left = left\n    this.top = top\n    this.width = width\n    this.height = height\n  }\n\n  setTopLeft(left: number | undefined, top: number | undefined): Rect {\n    return new Rect(left, top, this.width || 0, this.height || 0)\n  }\n\n  setSize(width: number | undefined, height: number | undefined): Rect {\n    return new Rect(this.left || 0, this.top || 0, width, height)\n  }\n\n  setCenter(x: number, y: number): Rect {\n    const width = this.width || 0\n    const height = this.height || 0\n    return new Rect(x - width / 2, y - height / 2, width || 0, height || 0)\n  }\n\n  get center(): Point {\n    return new Point(this.left + this.width / 2, this.top + this.height / 2)\n  }\n\n  get corners(): Corners {\n    return new Corners(this)\n  }\n\n  get right(): number {\n    return this.left + this.width\n  }\n\n  get bottom(): number {\n    return this.top + this.height\n  }\n\n  multiply(rect: Rect): Rect {\n    return new Rect(\n      (this.left || 0) + this.width * rect.left,\n      (this.top || 0) + this.height * rect.top,\n      this.width * rect.width,\n      this.height * rect.height\n    )\n  }\n\n  grow(delta: number): Rect {\n    return new Rect(\n      this.left - delta,\n      this.top - delta,\n      this.width + delta * 2,\n      this.height + delta * 2\n    )\n  }\n\n  shrink(delta: number): Rect {\n    return this.grow(-delta)\n  }\n\n  cropRelative(crop: Rect): Rect {\n    const top = this.top + crop.top * this.height\n    const left = this.left + crop.left * this.width\n    const height = this.height * crop.height\n    const width = this.width * crop.width\n    return new Rect(left, top, width, height)\n  }\n\n  clamp(bounds: Rect): Rect {\n    // always try to fit the whole rect inside given bounds\n    // adjust top, left if we can, resize if we must\n    let {left, top, width, height} = this\n    if (bounds.width < width) {\n      width = bounds.width\n      left = bounds.left\n    }\n    if (bounds.height < height) {\n      height = bounds.height\n      top = bounds.top\n    }\n\n    if (left + width > bounds.left + bounds.width) {\n      left = bounds.right - width\n    }\n\n    if (top + height > bounds.top + bounds.height) {\n      top = bounds.bottom - height\n    }\n\n    return new Rect(Math.max(left, bounds.left), Math.max(top, bounds.top), width, height)\n  }\n}\n","import React from 'react'\nimport Debug from 'debug'\nimport type {Coordinate} from './types'\n\nconst debug = Debug('sanity-imagetool')\nconst supportsTouch = typeof window !== 'undefined' && 'ontouchstart' in window\n\ntype PositionableEvent =\n  | {touches: React.TouchEvent['touches'] | TouchEvent['touches']}\n  | {clientX: number; clientY: number}\n\n// Returns a component that emits `onDragStart, `onDrag` and `onDragEnd` events.\n// It handles mouse/touch events the same way\n// - `onDragStart` is called with the {x, y} positions relative from the dom node (e.g. where the mousedown event happened)\n// - `onDrag` and `onDragEnd` are both called with the {x, y} difference from the previous position\nexport interface DragAwareProps {\n  onDragStart: (pos: {x: number; y: number}) => void\n  onDrag: (pos: {x: number; y: number}) => void\n  onDragEnd: (pos: {x: number; y: number}) => void\n  readOnly?: boolean\n  [key: string]: unknown | undefined\n}\n\nexport function makeDragAware(Component: 'canvas') {\n  return class DragAware extends React.PureComponent<DragAwareProps> {\n    domNode: HTMLCanvasElement | null = null\n    currentPos: Coordinate | null = null\n    isDragging = false\n\n    componentDidMount() {\n      if (supportsTouch) {\n        document.body.addEventListener('touchmove', this.handleTouchMove, {passive: false})\n        document.body.addEventListener('touchend', this.handleDragEnd)\n        document.body.addEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.addEventListener('mousemove', this.handleDrag)\n        document.body.addEventListener('mouseup', this.handleDragEnd)\n        document.body.addEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    componentWillUnmount() {\n      if (supportsTouch) {\n        document.body.removeEventListener('touchmove', this.handleTouchMove)\n        document.body.removeEventListener('touchend', this.handleDragEnd)\n        document.body.removeEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.removeEventListener('mousemove', this.handleDrag)\n        document.body.removeEventListener('mouseup', this.handleDragEnd)\n        document.body.removeEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    handleTouchMove = (event: TouchEvent | MouseEvent) => {\n      // Disables mobile scroll by touch\n      if (this.isDragging) {\n        event.preventDefault()\n      }\n    }\n\n    handleDragStart = (event: PositionableEvent) => {\n      const {onDragStart, readOnly} = this.props\n\n      if (readOnly || !this.domNode) {\n        return\n      }\n\n      if (this.isDragging) {\n        debug('Start cancelled, already a drag in progress')\n        return\n      }\n\n      this.isDragging = true\n      const nextPos = getPos(event)\n      debug('Drag started %o', nextPos)\n      onDragStart(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n\n      this.currentPos = nextPos\n    }\n\n    handleDrag = (event: PositionableEvent) => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos) {\n        return\n      }\n\n      const {onDrag} = this.props\n      const nextPos = getPos(event)\n      const diff = diffPos(nextPos, this.currentPos)\n      onDrag(diff)\n      debug('moving by %o', diff)\n      this.currentPos = nextPos\n    }\n\n    handleDragEnd = (event: MouseEvent | TouchEvent) => {\n      const {onDragEnd, readOnly} = this.props\n      if (!this.isDragging || readOnly || !this.domNode) {\n        return\n      }\n      const nextPos = getPos(event)\n      onDragEnd(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n      this.isDragging = false\n      this.currentPos = null\n      debug('Done moving %o', nextPos)\n    }\n\n    handleDragCancel = () => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos || !this.domNode) {\n        return\n      }\n\n      const {onDragEnd} = this.props\n      this.isDragging = false\n      onDragEnd(\n        getPositionRelativeToRect(\n          this.currentPos.x,\n          this.currentPos.y,\n          this.domNode.getBoundingClientRect()\n        )\n      )\n\n      this.currentPos = null\n    }\n\n    setDomNode = (node: HTMLCanvasElement) => {\n      this.domNode = node\n    }\n\n    render() {\n      const {readOnly, onDragStart, onDragEnd, onDrag, ...rest} = this.props\n      return (\n        <Component\n          ref={this.setDomNode}\n          onTouchStart={readOnly ? undefined : this.handleDragStart}\n          onMouseDown={readOnly ? undefined : this.handleDragStart}\n          onTouchMove={readOnly ? undefined : this.handleDrag}\n          {...rest}\n        />\n      )\n    }\n  }\n}\n\nfunction getPositionRelativeToRect(x: number, y: number, rect: {left: number; top: number}) {\n  return {\n    x: x - rect.left,\n    y: y - rect.top,\n  }\n}\n\nfunction getPos(event: PositionableEvent): Coordinate {\n  if ('touches' in event) {\n    return event.touches.length > 0\n      ? {x: event.touches[0].clientX, y: event.touches[0].clientY}\n      : {x: 0, y: 0}\n  }\n\n  return {\n    x: event.clientX,\n    y: event.clientY,\n  }\n}\n\nfunction diffPos(pos: Coordinate, otherPos: Coordinate): Coordinate {\n  return {\n    x: pos.x - otherPos.x,\n    y: pos.y - otherPos.y,\n  }\n}\n","import styled from 'styled-components'\nimport {makeDragAware} from './makeDragAware'\n\nexport const DragAwareCanvas = makeDragAware('canvas')\n\nexport const RootContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const CanvasContainer = styled(DragAwareCanvas)`\n  display: block;\n  position: relative;\n  max-width: calc(100% - 0.5em); /* to prevent overlap with change bar */\n  max-height: calc(100% + 1em);\n  user-select: none;\n`\n","/* eslint-disable max-len */\n\nexport const OPEN_HAND =\n  'data:image/png;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8='\n\nexport const CLOSE_HAND =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABdSURBVEjH7ZA7DsAwCEMN6v2vTCdESpLKQRl5gxfzMQDNRQyWlEK83QAIRh3cH/QbIhQwMDl8gORl7A16WD/xxAdq6N6SgycKUblf41+wbFBT44RiCi11NU3TLHgBxRUUD4ITqnIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDEtMjFUMDA6MTM6NDMrMDE6MDC74T7AAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEyLTA0LTAyVDA0OjEzOjM3KzAyOjAwQJ35wQAAAABJRU5ErkJggg=='\n","import type {Crop, Hotspot} from './types'\n\nexport const DEFAULT_HOTSPOT: Hotspot = {\n  x: 0.5,\n  y: 0.5,\n  height: 1,\n  width: 1,\n}\n\nexport const DEFAULT_CROP: Crop = {\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n}\n","import React, {MouseEvent} from 'react'\nimport {memoize} from 'lodash'\nimport {getBackingStoreRatio} from './getBackingStoreRatio'\nimport * as utils2d from './2d/utils'\nimport {Rect} from './2d/shapes'\nimport {RootContainer, CanvasContainer} from './ToolCanvas.styles'\n\nimport * as cursors from './cursors'\nimport {DEFAULT_CROP, DEFAULT_HOTSPOT} from './constants'\nimport type {\n  Coordinate,\n  Crop,\n  CropAndHotspot,\n  CropHandles,\n  Dimensions,\n  Hotspot,\n  Offsets,\n  ToolCanvasProps,\n  ToolCanvasState,\n} from './types'\n\n// The margin available in all directions for drawing the crop tool\nconst MARGIN_PX = 8\nconst CROP_HANDLE_SIZE = 12\nconst HOTSPOT_HANDLE_SIZE = 10\n\nfunction normalizeRect(rect: Rect) {\n  const flippedY = rect.top > rect.bottom\n  const flippedX = rect.left > rect.right\n  return {\n    top: flippedY ? rect.bottom : rect.top,\n    bottom: flippedY ? rect.top : rect.bottom,\n    left: flippedX ? rect.right : rect.left,\n    right: flippedX ? rect.left : rect.right,\n  }\n}\n\nfunction checkCropBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  // Make the experience a little better. Still offsets when dragging back from outside\n  if (\n    !value ||\n    !value.crop ||\n    value.crop.top + delta.top < 0 ||\n    value.crop.left + delta.left < 0 ||\n    value.crop.right + delta.right < 0 ||\n    value.crop.bottom + delta.bottom < 0\n  ) {\n    return false\n  }\n  return true\n}\n\nfunction limitToBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  const {top, right, bottom, left} = value.crop || DEFAULT_CROP\n\n  const newValue = {\n    hotspot: value.hotspot,\n    crop: {\n      top: top + (delta.top || 0) > 0 ? top : 0,\n      right: right + (delta.right || 0) > 0 ? right : 0,\n      bottom: bottom + (delta.bottom || 0) > 0 ? bottom : 0,\n      left: left + (delta.left || 0) > 0 ? left : 0,\n    },\n  }\n\n  const newDelta = {\n    top: top + (delta.top || 0) > 0 ? delta.top || 0 : 0,\n    right: right + (delta.right || 0) > 0 ? delta.right || 0 : 0,\n    bottom: bottom + (delta.bottom || 0) > 0 ? delta.bottom || 0 : 0,\n    left: left + (delta.left || 0) > 0 ? delta.left || 0 : 0,\n  }\n\n  return {value: newValue, delta: newDelta}\n}\n\nfunction getCropCursorForHandle(handle: keyof CropHandles | boolean) {\n  switch (handle) {\n    case 'left':\n    case 'right':\n      return 'col-resize'\n\n    case 'top':\n    case 'bottom':\n      return 'row-resize'\n\n    case 'topRight':\n    case 'bottomLeft':\n      return 'nesw-resize'\n\n    case 'topLeft':\n    case 'bottomRight':\n      return 'nwse-resize'\n    default:\n      return null\n  }\n}\n\nconst getDevicePixelRatio = memoize(() => {\n  const devicePixelRatio = window.devicePixelRatio || 1\n  const ctx = document.createElement('canvas').getContext('2d')\n  const backingStoreRatio = (ctx && getBackingStoreRatio(ctx)) || 1\n  return devicePixelRatio / backingStoreRatio\n})\n\nconst cropHandleKeys: (keyof CropHandles)[] = [\n  'left',\n  'right',\n  'top',\n  'topLeft',\n  'topRight',\n  'bottom',\n  'bottomLeft',\n  'bottomRight',\n]\n\nexport class ToolCanvas extends React.PureComponent<ToolCanvasProps, ToolCanvasState> {\n  state: ToolCanvasState = {\n    cropping: false,\n    cropMoving: false,\n    moving: false,\n    resizing: false,\n    mousePosition: null,\n  }\n\n  canvas?: {domNode: HTMLCanvasElement}\n\n  getHotspotRect() {\n    const {value, image} = this.props\n\n    const hotspot: Hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect()\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .multiply(hotspotRect)\n  }\n\n  getCropRect() {\n    const {value, image} = this.props\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .cropRelative(Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1)))\n  }\n\n  getCropHandles(): CropHandles {\n    const inner = this.getCropRect()\n\n    const handleSize = CROP_HANDLE_SIZE * this.getScale()\n\n    const halfCropHandleSize = handleSize / 2\n\n    const cropHandle = new Rect(0, 0, handleSize, handleSize)\n    return {\n      left: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n      right: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n\n      top: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n\n      bottom: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n    }\n  }\n\n  getActiveCropHandleFor({x, y}: Coordinate) {\n    const cropHandles = this.getCropHandles()\n    for (const position of cropHandleKeys) {\n      if (utils2d.isPointInRect({x, y}, cropHandles[position])) {\n        return position\n      }\n    }\n    return false\n  }\n\n  emitMove(pos: Coordinate) {\n    const {image, value, onChange} = this.props\n    const scale = this.getScale()\n    const delta = {\n      x: (pos.x * scale) / image.width,\n      y: (pos.y * scale) / image.height,\n    }\n\n    onChange(applyHotspotMoveBy(value, delta))\n  }\n\n  emitCropMove(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    const left = (pos.x * scale) / image.width\n    const right = (-pos.x * scale) / image.width\n    const top = (pos.y * scale) / image.height\n    const bottom = (-pos.y * scale) / image.height\n    const delta = {left, right, top, bottom}\n\n    if (checkCropBoundaries(value, delta)) {\n      onChange(applyCropMoveBy(value, delta))\n    }\n  }\n\n  emitCrop(side: string | boolean, pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    let left = 0\n    let right = 0\n    let top = 0\n    let bottom = 0\n\n    if (side == 'left' || side === 'topLeft' || side === 'bottomLeft') {\n      left = (pos.x * scale) / image.width\n    } else if (side == 'right' || side === 'topRight' || side === 'bottomRight') {\n      right = (-pos.x * scale) / image.width\n    }\n\n    if (side == 'top' || side === 'topLeft' || side === 'topRight') {\n      top = (pos.y * scale) / image.height\n    } else if (side == 'bottom' || side === 'bottomLeft' || side === 'bottomRight') {\n      bottom = (-pos.y * scale) / image.height\n    }\n\n    const delta = {left, right, top, bottom}\n    const newValue = limitToBoundaries(value, delta).value\n    const newDelta = limitToBoundaries(value, delta).delta\n\n    onChange(applyCropMoveBy(newValue, newDelta))\n  }\n\n  emitResize(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n\n    const delta = {\n      x: (pos.x * scale * 2) / image.width,\n      y: (pos.y * scale * 2) / image.height,\n    }\n    onChange(applyHotspotResizeBy(value, {height: delta.y, width: delta.x}))\n  }\n\n  getClampedValue() {\n    const value = this.props.value\n\n    const crop = Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1))\n\n    const hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect(0, 0, 1, 1)\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n      .clamp(crop)\n\n    return {crop: crop, hotspot: hotspotRect}\n  }\n\n  paintHotspot(context: CanvasRenderingContext2D, opacity: number) {\n    const {image, readOnly} = this.props\n\n    const imageRect = new Rect().setSize(image.width, image.height)\n\n    const {hotspot, crop} = this.getClampedValue()\n\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    context.save()\n    drawBackdrop()\n    drawEllipse()\n    context.clip()\n    drawHole()\n    context.restore()\n    if (!readOnly) {\n      drawDragHandle(Math.PI * 1.25)\n    }\n\n    function drawEllipse() {\n      context.save()\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const scaleY = dest.height / dest.width\n\n      context.scale(1, scaleY)\n      context.beginPath()\n      context.globalAlpha = opacity\n      context.arc(\n        dest.center.x,\n        dest.center.y / scaleY,\n        Math.abs(dest.width / 2),\n        0,\n        2 * Math.PI,\n        false\n      )\n      context.strokeStyle = 'white'\n      context.lineWidth = 1.5 * scale\n      context.stroke()\n      context.closePath()\n\n      context.restore()\n    }\n\n    // eslint-disable-next-line max-params\n    function drawImage(\n      srcLeft: number,\n      srcTop: number,\n      srcWidth: number,\n      srcHeight: number,\n      destLeft: number,\n      destTop: number,\n      destWidth: number,\n      destHeight: number\n    ) {\n      context.save()\n      context.drawImage(\n        image,\n        srcLeft,\n        srcTop,\n        srcWidth,\n        srcHeight,\n        destLeft,\n        destTop,\n        destWidth,\n        destHeight\n      )\n      context.restore()\n    }\n\n    function drawHole() {\n      const src = imageRect.multiply(hotspot)\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n    }\n\n    function drawBackdrop() {\n      const src = imageRect.cropRelative(crop)\n\n      const dest = imageRect.shrink(margin).cropRelative(crop)\n\n      context.save()\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n      context.globalAlpha = 0.5\n      context.fillStyle = 'black'\n      context.fillRect(dest.left, dest.top, dest.width, dest.height)\n      context.restore()\n    }\n\n    function drawDragHandle(radians: number) {\n      context.save()\n\n      const radius = HOTSPOT_HANDLE_SIZE * scale\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const point = utils2d.getPointAtCircumference(radians, dest)\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.fillStyle = 'rgb(255,255,255)'\n      context.fill()\n      context.closePath()\n      context.restore()\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.strokeStyle = 'rgb(0, 0, 0)'\n      context.lineWidth = 0.5 * scale\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  getActualSize() {\n    const node = this.canvas?.domNode\n    return node ? {height: node.clientHeight, width: node.clientWidth} : {height: 0, width: 0}\n  }\n\n  getDragHandleCoords() {\n    const bbox = this.getHotspotRect()\n    const point = utils2d.getPointAtCircumference(Math.PI * 1.25, bbox)\n    return {\n      x: point.x,\n      y: point.y,\n      radius: 8 * this.getScale(),\n    }\n  }\n\n  debug(context: CanvasRenderingContext2D) {\n    context.save()\n\n    const {image} = this.props\n\n    const bbox = this.getHotspotRect()\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    // IE 10 doesn't support context.setLineDash\n    if (context.setLineDash) {\n      context.setLineDash([2 * scale, 2 * scale])\n    }\n    context.lineWidth = 0.5 * scale\n\n    context.strokeStyle = 'rgba(200, 200, 200, 0.5)'\n\n    // --- center line x\n    vline(bbox.center.x)\n    // --- center line y\n    hline(bbox.center.y)\n\n    context.strokeStyle = 'rgba(150, 150, 150, 0.5)'\n    // --- line top\n    hline(bbox.top)\n\n    // --- line bottom\n    hline(bbox.bottom)\n\n    // --- line left\n    vline(bbox.left)\n    // --- line right\n    vline(bbox.right)\n\n    context.restore()\n\n    function vline(x: number) {\n      line(x, margin, x, image.height - margin)\n    }\n\n    function hline(y: number) {\n      line(margin, y, image.width - margin, y)\n    }\n\n    function line(x1: number, y1: number, x2: number, y2: number) {\n      context.beginPath()\n      context.moveTo(x1, y1)\n      context.lineTo(x2, y2)\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  paintBackground(context: CanvasRenderingContext2D) {\n    const {image} = this.props\n    const inner = new Rect().setSize(image.width, image.height).shrink(MARGIN_PX * this.getScale())\n\n    context.save()\n    context.fillStyle = 'white'\n    context.clearRect(0, 0, image.width, image.height)\n\n    context.globalAlpha = 0.3\n    //context.globalCompositeOperation = 'lighten';\n\n    context.drawImage(image, inner.left, inner.top, inner.width, inner.height)\n    context.restore()\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    const {readOnly} = this.props\n    context.save()\n\n    const pxratio = getDevicePixelRatio()\n    context.scale(pxratio, pxratio)\n\n    const opacity = !readOnly && this.state.mousePosition ? 0.8 : 0.2\n\n    this.paintBackground(context)\n    //return context.restore();\n    this.paintHotspot(context, opacity)\n    //this.paintDragHandle(context);\n    this.debug(context)\n    this.paintCropBorder(context)\n\n    if (!readOnly) {\n      this.highlightCropHandles(context, opacity)\n    }\n\n    if (this.state.mousePosition) {\n      // this.paintMousePosition(context)\n    }\n\n    context.restore()\n  }\n\n  paintMousePosition(context: CanvasRenderingContext2D) {\n    if (!this.state.mousePosition) {\n      return\n    }\n\n    const {x, y} = this.state.mousePosition\n    context.beginPath()\n    context.arc(x, y, 14 * this.getScale(), 0, 2 * Math.PI, false)\n    context.fillStyle = 'lightblue'\n    context.fill()\n    context.restore()\n  }\n\n  paintCropBorder(context: CanvasRenderingContext2D) {\n    const cropRect = this.getCropRect()\n    context.save()\n    context.beginPath()\n    context.fillStyle = 'rgba(66, 66, 66, 0.9)'\n    context.lineWidth = 1\n    context.rect(cropRect.left, cropRect.top, cropRect.width, cropRect.height)\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  highlightCropHandles(context: CanvasRenderingContext2D, opacity: number) {\n    context.save()\n    const cropHandles = this.getCropHandles()\n\n    //context.globalCompositeOperation = \"difference\";\n\n    cropHandleKeys.forEach((handle) => {\n      context.fillStyle =\n        this.state.cropping === handle\n          ? `rgba(202, 54, 53, ${opacity})`\n          : `rgba(230, 230, 230, ${opacity + 0.4})`\n      const {left, top, height, width} = cropHandles[handle]\n      context.fillRect(left, top, width, height)\n      context.beginPath()\n      context.fillStyle = `rgba(66, 66, 66, ${opacity})`\n      context.rect(left, top, width, height)\n      context.closePath()\n      context.stroke()\n    })\n    context.restore()\n  }\n\n  getScale() {\n    const actualSize = this.getActualSize()\n    return this.props.image.width / actualSize.width\n  }\n\n  getCursor() {\n    const {mousePosition} = this.state\n    const {readOnly} = this.props\n    if (!mousePosition || readOnly) {\n      return 'auto'\n    }\n\n    const activeCropArea = this.state.cropping || this.getActiveCropHandleFor(mousePosition)\n    if (activeCropArea) {\n      return getCropCursorForHandle(activeCropArea) || 'auto'\n    }\n\n    const mouseOverDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    if (this.state.resizing || mouseOverDragHandle) {\n      return 'move'\n    }\n\n    if (this.state.moving || this.state.cropMoving) {\n      return `url(${cursors.CLOSE_HAND}), move`\n    }\n\n    const mouseoverHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n    const mouseoverCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n    if (mouseoverHotspot || mouseoverCropRect) {\n      return `url(${cursors.OPEN_HAND}), move`\n    }\n\n    return 'auto'\n  }\n\n  componentDidMount() {\n    this.draw()\n  }\n\n  componentDidUpdate() {\n    this.draw()\n  }\n\n  draw() {\n    if (!this.canvas) {\n      return\n    }\n\n    const domNode = this.canvas.domNode\n    const context = domNode.getContext('2d')\n    if (!context) {\n      return\n    }\n\n    this.paint(context)\n    const currentCursor = domNode.style.cursor\n    const newCursor = this.getCursor()\n    if (currentCursor !== newCursor) {\n      domNode.style.cursor = newCursor\n    }\n  }\n\n  handleDragStart = ({x, y}: Coordinate) => {\n    const mousePosition = {x: x * this.getScale(), y: y * this.getScale()}\n\n    const inHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n\n    const inDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    const activeCropHandle = this.getActiveCropHandleFor(mousePosition)\n\n    const inCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n\n    if (activeCropHandle) {\n      this.setState({cropping: activeCropHandle})\n    } else if (inDragHandle) {\n      this.setState({resizing: true})\n    } else if (inHotspot) {\n      this.setState({moving: true})\n    } else if (inCropRect) {\n      this.setState({cropMoving: true})\n    }\n  }\n\n  handleDrag = (pos: Coordinate) => {\n    if (this.state.cropping) {\n      this.emitCrop(this.state.cropping, pos)\n    } else if (this.state.cropMoving) {\n      this.emitCropMove(pos)\n    } else if (this.state.moving) {\n      this.emitMove(pos)\n    } else if (this.state.resizing) {\n      this.emitResize(pos)\n    }\n  }\n\n  handleDragEnd = () => {\n    const {onChange, onChangeEnd} = this.props\n    this.setState({moving: false, resizing: false, cropping: false, cropMoving: false})\n    const {hotspot, crop: rawCrop} = this.getClampedValue()\n\n    const crop = normalizeRect(rawCrop)\n\n    const finalValue = {\n      crop: {\n        top: crop.top,\n        bottom: 1 - crop.bottom,\n        left: crop.left,\n        right: 1 - crop.right,\n      },\n      hotspot: {\n        x: hotspot.center.x,\n        y: hotspot.center.y,\n        height: Math.abs(hotspot.height),\n        width: Math.abs(hotspot.width),\n      },\n    }\n    onChange(finalValue)\n    if (onChangeEnd) {\n      onChangeEnd(finalValue)\n    }\n  }\n\n  handleMouseOut = () => {\n    this.setState({mousePosition: null})\n  }\n\n  handleMouseMove = (event: MouseEvent<HTMLCanvasElement>) => {\n    const clientRect = event.currentTarget.getBoundingClientRect()\n    this.setState({\n      mousePosition: {\n        x: (event.clientX - clientRect.left) * this.getScale(),\n        y: (event.clientY - clientRect.top) * this.getScale(),\n      },\n    })\n  }\n\n  setCanvas = (node: {domNode: HTMLCanvasElement}) => {\n    this.canvas = node\n  }\n\n  render() {\n    const {image, readOnly} = this.props\n    const ratio = getDevicePixelRatio()\n    return (\n      <RootContainer>\n        <CanvasContainer\n          readOnly={readOnly}\n          ref={this.setCanvas}\n          onDrag={this.handleDrag}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          onMouseMove={this.handleMouseMove}\n          onMouseOut={this.handleMouseOut}\n          height={image.height * ratio}\n          width={image.width * ratio}\n        />\n      </RootContainer>\n    )\n  }\n}\n\nfunction applyHotspotMoveBy(value: Partial<CropAndHotspot>, delta: Coordinate): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      x: currentHotspot.x + delta.x,\n      y: currentHotspot.y + delta.y,\n    },\n  }\n}\n\nfunction applyHotspotResizeBy(\n  value: Partial<CropAndHotspot>,\n  delta: Dimensions\n): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      height: currentHotspot.height + delta.height,\n      width: currentHotspot.width + delta.width,\n    },\n  }\n}\n\nfunction applyCropMoveBy(value: Partial<CropAndHotspot>, delta: Offsets): {crop: Crop} {\n  const currentCrop = (value && value.crop) || DEFAULT_CROP\n  return {\n    ...value,\n    crop: {\n      left: currentCrop.left + (delta.left || 0),\n      right: currentCrop.right + (delta.right || 0),\n      top: currentCrop.top + (delta.top || 0),\n      bottom: currentCrop.bottom + (delta.bottom || 0),\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-shadow */\nimport React, {useCallback, useEffect, useState} from 'react'\n\nexport interface ResizeProps {\n  image: HTMLImageElement\n  maxHeight: number\n  maxWidth: number\n  children: (canvas: HTMLCanvasElement) => React.ReactNode\n}\n\nexport function Resize(props: ResizeProps): any {\n  const {image, maxHeight, maxWidth, children} = props\n\n  const [canvas] = useState<HTMLCanvasElement>(() => {\n    const canvasElement = document.createElement('canvas')\n    canvasElement.style.display = 'none'\n    return canvasElement\n  })\n  useEffect(() => {\n    document.body.appendChild(canvas)\n    return () => {\n      document.body.removeChild(canvas)\n    }\n  }, [canvas])\n\n  const resize = useCallback(\n    (image: HTMLImageElement, maxHeight: number, maxWidth: number) => {\n      const ratio = image.width / image.height\n      const width = Math.min(image.width, maxWidth)\n      const height = Math.min(image.height, maxHeight)\n\n      const landscape = image.width > image.height\n      const targetWidth = landscape ? width : height * ratio\n      const targetHeight = landscape ? width / ratio : height\n\n      canvas.width = targetWidth\n      canvas.height = targetHeight\n\n      const ctx = canvas.getContext('2d')\n      if (ctx) {\n        ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, targetWidth, targetHeight)\n      }\n\n      return canvas\n    },\n    [canvas]\n  )\n\n  return children(resize(image, maxHeight, maxWidth))\n}\n","import React from 'react'\nimport {ImageLoader} from './ImageLoader'\nimport {ToolCanvas} from './ToolCanvas'\nimport {Resize} from './Resize'\nimport type {ToolCanvasProps} from './types'\n\nexport interface ImageToolProps extends Omit<ToolCanvasProps, 'image'> {\n  image?: HTMLCanvasElement\n  src: string\n}\n\nexport function ImageTool(props: ImageToolProps) {\n  return (\n    <ImageLoader src={props.src}>\n      {({isLoading, image, error}) => {\n        if (isLoading) {\n          return <div>Loading...</div>\n        }\n        if (error) {\n          return <div>{error.message}</div>\n        }\n        if (image) {\n          return (\n            <Resize image={image} maxHeight={ImageTool.maxHeight} maxWidth={ImageTool.maxWidth}>\n              {(canvas) => <ToolCanvas image={canvas} {...props} />}\n            </Resize>\n          )\n        }\n        return null\n      }}\n    </ImageLoader>\n  )\n}\n\nImageTool.maxHeight = 500\nImageTool.maxWidth = 1000\n","import type {CSSProperties} from 'react'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {Crop, Hotspot, CropMethod, CropAndHotspot} from './types'\n\ninterface Options {\n  image?: {aspectRatio: number} | {height: number; width: number}\n  container?: {aspectRatio: number} | {height: number; width: number}\n  hotspot?: Hotspot\n  crop?: Crop\n  align?: CropAlignment\n}\n\ninterface CSSBox {\n  width: number\n  height: number\n  left: number\n  top: number\n}\n\ninterface CropAlignment {\n  x: 'left' | 'right' | 'center'\n  y: 'top' | 'bottom' | 'center'\n}\n\ninterface HotspotCropStyleResult {\n  crop: CSSBox\n  image: CSSBox\n  method: CropMethod\n}\n\nexport interface CalculatedStyles {\n  container: CSSProperties\n  padding: CSSProperties\n  crop: CSSProperties\n  image: CSSProperties\n  debug: {\n    result: HotspotCropStyleResult\n  }\n}\n\nexport function calculateStyles(options: Options = {}): CalculatedStyles {\n  const imageAspect = readAspectRatio(options.image) || 1\n\n  const hotspot = options.hotspot || DEFAULT_HOTSPOT\n  const crop = options.crop || DEFAULT_CROP\n  const containerAspect = readAspectRatio(options.container) || imageAspect * readCropAspect(crop)\n\n  const align = options.align || {x: 'center', y: 'center'}\n\n  const result = calculateHotSpotCrop(\n    imageAspect,\n    {hotspot, crop},\n    {aspect: containerAspect, align}\n  )\n\n  const containerHeight = styleFormat(round(100 / containerAspect))\n\n  return {\n    debug: {\n      result,\n    },\n    container: {\n      //outline: '1px solid cyan',\n      overflow: 'hidden',\n      position: 'relative',\n      width: '100%',\n      height: containerHeight,\n    },\n    padding: {\n      marginTop: containerHeight,\n    },\n    crop: {\n      position: 'absolute',\n      overflow: 'hidden',\n      height: toStylePercentage(result.crop.height),\n      width: toStylePercentage(result.crop.width),\n      top: toStylePercentage(result.crop.top),\n      left: toStylePercentage(result.crop.left),\n    },\n    image: {\n      position: 'absolute',\n      height: toStylePercentage(result.image.height),\n      width: toStylePercentage(result.image.width),\n      top: toStylePercentage(result.image.top),\n      left: toStylePercentage(result.image.left),\n    },\n  }\n}\n\nfunction readAspectRatio(opts: Options['image']): number | null {\n  if (!opts) {\n    return null\n  }\n\n  if ('aspectRatio' in opts) {\n    return opts.aspectRatio\n  }\n\n  if ('height' in opts || 'width' in opts) {\n    if (typeof opts.height !== 'number' && typeof opts.width !== 'number') {\n      throw new Error(`Height and width must be numbers, got ${JSON.stringify(opts)}`)\n    }\n\n    return opts.width / opts.height\n  }\n\n  return null\n}\n\nfunction round(num: number, decimals = 2): number {\n  const multiplier = Math.pow(10, decimals)\n  return Math.round(num * multiplier) / multiplier\n}\n\nfunction calculateHotSpotCrop(\n  sourceAspect: number,\n  descriptor: CropAndHotspot,\n  spec: {aspect: number; align: CropAlignment}\n): HotspotCropStyleResult {\n  const crop = descriptor.crop\n  const viewportAspect = spec.aspect\n  const alignment = spec.align\n\n  // The rational aspect of the cropped image\n  const netWidth = 1.0 - crop.left - crop.right\n  const netHeight = 1.0 - crop.top - crop.bottom\n\n  // Places the image inside the crop box\n  const outImg = {\n    top: -crop.top / netHeight,\n    left: -crop.left / netWidth,\n    width: 1 / netWidth,\n    height: 1 / netHeight,\n  }\n\n  // The rational aspect is the aspect ration of the crop in ratios of the image size meaning the image\n  // is always considered having the size 1.0*1.0\n  const cropRationalAspect = netWidth / netHeight\n\n  // cropAspect is the real aspect ratio of the crop box in pixel-space\n  const cropAspect = cropRationalAspect * sourceAspect\n\n  // Now we transform the hotspot to be expressed in ratios of the cropped area, not the\n  // full image:\n  const hotspot = {\n    x: (descriptor.hotspot.x - crop.left) / netWidth,\n    y: (descriptor.hotspot.y - crop.top) / netHeight,\n    height: descriptor.hotspot.height / netHeight,\n    width: descriptor.hotspot.width / netWidth,\n  }\n\n  // Lets calculate the maximum scale the image may be presented at without cropping the hotspot. A scale of\n  // 1.0 means the cropped image exactly fill the width of the viewport.\n\n  // The scale at which the hotspot would fill the viewport exactly in the X direction\n  const maxHotspotXScale = 1.0 / hotspot.width\n  // The scale at which the hotspot would fill the veiwport exactly in the Y direction\n  const maxHotspotYScale = ((1.0 / hotspot.height) * cropAspect) / viewportAspect\n  // This is the largest scale the image can have while still not cropping the hotspot:\n  const maxScale = Math.min(maxHotspotXScale, maxHotspotYScale)\n\n  // Now lets find the minimum scale we can have while maintaining full bleed (no letterboxing)\n  let minFullBleedScale\n  const cropIsTaller = cropAspect <= viewportAspect\n  if (cropIsTaller) {\n    // Crop is taller than viewport\n    minFullBleedScale = 1.0 // By definition 1.0 fills the width of the viewport exactly with the viewport cutting away from the height of the cropbox\n  } else {\n    // Image is wider than viewport\n    minFullBleedScale = cropAspect / viewportAspect // At this scale the viewport is filled exactly in the height while cutting away from the sides\n  }\n\n  let method: CropMethod\n  let outCrop: CSSBox\n\n  // Do we have to letterbox this image in order to leave the hotspot area uncropped?\n  if (minFullBleedScale > maxScale) {\n    // Yes :-( There is no way to protect the hot spot and still have full bleed, so we are letterboxing it\n    method = 'letterbox'\n    let letterboxScale\n    const diff = minFullBleedScale - maxScale\n\n    // Determine a scale where the image fills one dimension of the container\n    if (cropIsTaller) {\n      letterboxScale = 1.0 - diff\n    } else {\n      letterboxScale = maxScale\n    }\n\n    outCrop = {\n      width: letterboxScale,\n      height: (letterboxScale / cropAspect) * viewportAspect,\n\n      // Gets overwritten further down\n      left: 0,\n      top: 0,\n    }\n\n    const hotspotLeft = hotspot.x * outCrop.width - (hotspot.width * outCrop.width) / 2\n    switch (alignment.x) {\n      case 'left':\n        outCrop.left = cropIsTaller ? 0 : -hotspotLeft\n        break\n      case 'right':\n        // todo: broken atm\n        outCrop.left = cropIsTaller ? 1 - outCrop.width : hotspotLeft\n        break\n      case 'center':\n        outCrop.left = cropIsTaller ? (1 - outCrop.width) / 2 : -hotspotLeft\n        break\n      default:\n        throw new Error(\n          `Invalid x alignment: '${alignment.x}'. Must be either 'left', 'right' or 'center'`\n        )\n    }\n    const hotspotTop = hotspot.y * outCrop.height - (hotspot.height * outCrop.height) / 2\n    switch (alignment.y) {\n      case 'top':\n        outCrop.top = cropIsTaller ? -hotspotTop : 0\n        break\n      case 'bottom':\n        // todo: broken atm\n        outCrop.top = hotspotTop\n        break\n      case 'center':\n        outCrop.top = cropIsTaller ? -hotspotTop : (1 - outCrop.height) / 2\n        break\n      default:\n        throw new Error(\n          `Invalid y alignment: '${alignment.y}'. Must be either 'top', 'bottom' or 'center'`\n        )\n    }\n  } else if (cropIsTaller) {\n    // TODO: Clamp hotspot offset to avoid moving image off canvas\n    method = 'full_width'\n\n    let top = (-hotspot.y / cropAspect) * viewportAspect + 0.5\n    const height = (minFullBleedScale / cropAspect) * viewportAspect\n    // Clamp top so that we will not move the image off of the viewport\n    if (top > 0) {\n      top = 0\n    } else if (-top > height - 1.0) {\n      top = -(height - 1.0)\n    }\n\n    outCrop = {\n      width: minFullBleedScale,\n      height,\n      left: 0,\n      // Place the Y center of the hotspot near the center of the viewport\n      top,\n    }\n  } else {\n    // crop is wider\n    method = 'full_height'\n\n    const width = minFullBleedScale\n    let left = 0.5 - hotspot.x * minFullBleedScale\n    if (left > 0) {\n      left = 0\n    } else if (-left > width - 1.0) {\n      left = -(width - 1.0)\n    }\n    // Clamp left so that we will not move the image off of the viewport.\n    outCrop = {\n      width,\n      height: (minFullBleedScale / cropAspect) * viewportAspect,\n      top: 0,\n      // Place the X center of the hotspot at the center of the viewport\n      left,\n    }\n  }\n\n  return {\n    method,\n    crop: outCrop,\n    image: outImg,\n  }\n}\n\nfunction readCropAspect(crop: Crop) {\n  const height = 1 - crop.top - crop.bottom\n  const width = 1 - crop.left - crop.right\n  return width / height\n}\n\nfunction styleFormat(num: number) {\n  return num === 0 ? 0 : `${num}%`\n}\n\nfunction toStylePercentage(num: number) {\n  return styleFormat(round(num * 100))\n}\n","import styled from 'styled-components'\n\nexport const HotspotImageContainer = styled.div`\n  position: relative;\n  width: 100%;\n`\n","import React, {\n  memo,\n  startTransition,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport Debug from 'debug'\nimport {calculateStyles} from './calculateStyles'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {HotspotImageContainer} from './HotspotImage.styles'\nimport type {Crop, Hotspot} from './types'\n\nconst debug = Debug('sanity-imagetool')\n\nfunction getCropAspect(crop: Crop, srcAspect: number) {\n  const origHeight = 1 / srcAspect\n  const origWidth = srcAspect * origHeight\n  const cropWidth = origWidth - (crop.left + crop.right) * origWidth\n  const cropHeight = origHeight - (crop.top + crop.bottom) * origHeight\n  return cropWidth / cropHeight\n}\n\nexport interface HotspotImageProps {\n  src: string\n  srcAspectRatio: number\n  srcSet?: string\n  hotspot?: Hotspot\n  crop?: Crop\n  aspectRatio?: number | 'auto' | 'none'\n  alignX?: 'left' | 'center' | 'right'\n  alignY?: 'top' | 'center' | 'bottom'\n  className?: string\n  style?: React.CSSProperties\n  alt?: string\n  onError?: (event: React.SyntheticEvent<HTMLImageElement, Event>) => void\n  onLoad?: () => void\n}\n\nexport const HotspotImage = memo(function HotspotImage(props: HotspotImageProps) {\n  const {\n    alignX = 'center',\n    alignY = 'center',\n    alt,\n    aspectRatio = 'none',\n    className = '',\n    crop = DEFAULT_CROP,\n    hotspot = DEFAULT_HOTSPOT,\n    onError,\n    onLoad,\n    src,\n    srcAspectRatio,\n    srcSet,\n    style,\n  } = props\n  const [containerAspect, setContainerAspect] = useState<number | null>(null)\n  const containerElementRef = useRef<HTMLDivElement | null>(null)\n  const imageElementRef = useRef<HTMLImageElement | null>(null)\n\n  const updateContainerAspect = useCallback(() => {\n    if (!containerElementRef.current) return\n    if (aspectRatio === 'auto') {\n      const parentNode = containerElementRef.current.parentNode as HTMLElement\n      startTransition(() => setContainerAspect(parentNode.offsetWidth / parentNode.offsetHeight))\n    } else {\n      setContainerAspect(null)\n    }\n  }, [aspectRatio])\n\n  useEffect(() => {\n    const imageElement = imageElementRef.current\n\n    // Fixes issues that may happen if the component is rendered on server and mounted after the image has finished loading\n    // In these situations, neither the onLoad or the onError events will be called.\n    // Derived from http://imagesloaded.desandro.com/\n    const alreadyLoaded =\n      imageElement &&\n      imageElement.src &&\n      imageElement.complete &&\n      imageElement.naturalWidth !== undefined\n\n    if (alreadyLoaded) {\n      debug(\"Image '%s' already loaded, refreshing (from cache) to trigger onLoad / onError\", src)\n      // eslint-disable-next-line no-self-assign\n      imageElement.src = imageElement.src\n    }\n\n    updateContainerAspect()\n\n    window.addEventListener('resize', updateContainerAspect)\n\n    return () => {\n      window.removeEventListener('resize', updateContainerAspect)\n    }\n  }, [src, updateContainerAspect])\n\n  const targetAspect = useMemo(() => {\n    if (aspectRatio === 'none') {\n      return crop ? getCropAspect(crop, srcAspectRatio) : srcAspectRatio\n    }\n\n    if (aspectRatio === 'auto') {\n      return containerAspect\n    }\n\n    return aspectRatio || null\n  }, [aspectRatio, containerAspect, crop, srcAspectRatio])\n\n  const targetStyles = useMemo(\n    () =>\n      calculateStyles({\n        container: {aspectRatio: targetAspect || srcAspectRatio},\n        image: {aspectRatio: srcAspectRatio},\n        hotspot,\n        crop,\n        align: {\n          x: alignX,\n          y: alignY,\n        },\n      }),\n    [alignX, alignY, crop, hotspot, srcAspectRatio, targetAspect]\n  )\n\n  return (\n    <HotspotImageContainer className={`${className}`} style={style} ref={containerElementRef}>\n      <div style={targetStyles.container}>\n        <div style={targetStyles.padding} />\n        <div style={targetStyles.crop}>\n          <img\n            ref={imageElementRef}\n            src={src}\n            alt={alt}\n            srcSet={srcSet}\n            onLoad={onLoad}\n            onError={onError}\n            style={targetStyles.image}\n          />\n        </div>\n      </div>\n    </HotspotImageContainer>\n  )\n})\n","import {Observable} from 'rxjs'\nimport {useEffect, useState} from 'react'\n\n// http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever\nconst PROBABLY_THE_TINIEST_GIF_EVER = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n\nfunction isBlob(src: string) {\n  return src.startsWith('blob:')\n}\n\nexport function loadImage(src: string): Observable<HTMLImageElement> {\n  return new Observable((subscriber) => {\n    const image = document.createElement('img')\n\n    let completed = false\n    const onload = () => {\n      completed = true\n      subscriber.next(image)\n      subscriber.complete()\n    }\n\n    const onerror = () => {\n      completed = true\n      subscriber.error(new Error(`Could not load image from ${isBlob(src) ? 'blob' : src}`))\n    }\n\n    image.onload = onload\n    image.onerror = onerror\n    image.src = src\n\n    return () => {\n      image.onload = null\n      image.onerror = null\n\n      if (!completed) {\n        // if we unsubscribe before it's loaded this will cancel the image loading\n        image.src = PROBABLY_THE_TINIEST_GIF_EVER\n      }\n    }\n  })\n}\n\ntype ImageLoadState = {\n  isLoading: boolean\n  image?: HTMLImageElement\n  error?: Error\n}\n\nconst INITIAL_STATE = {isLoading: true}\n\nexport function useLoadImage(url: string): ImageLoadState {\n  const [state, setState] = useState<ImageLoadState>(INITIAL_STATE)\n\n  useEffect(() => {\n    setState(INITIAL_STATE)\n    const subscription = loadImage(url)\n      // .pipe(delay(2000))\n      .subscribe({\n        error: (err) => {\n          setState({isLoading: false, error: err})\n        },\n        next: (image) => {\n          setState({image, isLoading: false})\n        },\n      })\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [url])\n\n  return state\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport type {Image, ImageSchemaType} from '@sanity/types'\nimport {Box, Card, Flex, Text, Grid, Heading} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FormField} from '../../../components/formField'\nimport {set} from '../../../patch'\nimport {RatioBox} from '../common/RatioBox'\nimport type {ObjectInputProps} from '../../../types'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {EMPTY_ARRAY} from '../../../../util'\nimport {ImageTool, HotspotImage, DEFAULT_CROP, DEFAULT_HOTSPOT} from './imagetool'\nimport {useLoadImage} from './useLoadImage'\n\nexport interface ImageToolInputProps\n  extends Omit<ObjectInputProps<Image, ImageSchemaType>, 'markers' | 'renderDefault'> {\n  imageUrl: string\n}\n\nconst HOTSPOT_PATH = ['hotspot']\n\nconst PREVIEW_ASPECT_RATIOS = [\n  ['3:4', 3 / 4],\n  ['Square', 1 / 1],\n  ['16:9', 16 / 9],\n  ['Panorama', 4 / 1],\n] as const\n\nconst DEFAULT_VALUE: Partial<Image> = {\n  crop: DEFAULT_CROP,\n  hotspot: DEFAULT_HOTSPOT,\n}\n\nconst Placeholder = styled.div`\n  min-height: 6em;\n`\n\nfunction LoadStatus(props: {children: React.ReactNode}) {\n  return (\n    <Flex align=\"center\" justify=\"center\" padding={4} style={{overflowWrap: 'break-word'}}>\n      {props.children}\n    </Flex>\n  )\n}\n\nexport function ImageToolInput(props: ImageToolInputProps) {\n  const {\n    imageUrl,\n    value,\n    changed,\n    level,\n    path,\n    focusPath = EMPTY_ARRAY,\n    presence,\n    onChange,\n    schemaType,\n    onPathFocus,\n    readOnly,\n    elementProps,\n  } = props\n\n  const [localValue, setLocalValue] = useState(value || DEFAULT_VALUE)\n\n  const {image, isLoading: isImageLoading, error: imageLoadError} = useLoadImage(imageUrl)\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(HOTSPOT_PATH)\n  }, [onPathFocus])\n\n  useEffect(() => {\n    setLocalValue(value || DEFAULT_VALUE)\n  }, [value])\n\n  const hasFocus = focusPath[0] === 'hotspot'\n\n  useDidUpdate(hasFocus, (hadFocus) => {\n    if (!hadFocus && hasFocus) {\n      elementProps.ref.current?.focus()\n    }\n  })\n\n  const handleChangeEnd = useCallback(\n    (finalValue: any) => {\n      if (readOnly) {\n        return\n      }\n      // For backwards compatibility, where hotspot/crop might not have a named type yet\n      const cropField = schemaType.fields.find(\n        (field) => field.name === 'crop' && field.type.name !== 'object'\n      )\n\n      const hotspotField = schemaType.fields.find(\n        (field) => field.type.name !== 'object' && field.name === 'hotspot'\n      )\n\n      // Note: when either hotspot or crop change we fill in the default if the other is missing\n      // (we can't have one without the other)\n      const crop = cropField\n        ? {_type: cropField.type.name, ...(finalValue.crop || DEFAULT_CROP)}\n        : finalValue.crop\n\n      const hotspot = hotspotField\n        ? {_type: hotspotField.type.name, ...(finalValue.hotspot || DEFAULT_HOTSPOT)}\n        : finalValue.hotspot\n\n      onChange([set(crop, ['crop']), set(hotspot, ['hotspot'])])\n    },\n    [onChange, readOnly, schemaType.fields]\n  )\n\n  return (\n    <FormField\n      title=\"Hotspot &amp; crop\"\n      level={level}\n      description=\"Adjust the rectangle to crop image. Adjust the circle to specify the area that should always be visible.\"\n      __unstable_presence={presence}\n    >\n      <div>\n        <Card\n          __unstable_checkered\n          __unstable_focusRing\n          tabIndex={0}\n          ref={elementProps.ref}\n          onFocus={handleFocus}\n        >\n          <ChangeIndicator\n            path={path.concat(HOTSPOT_PATH)}\n            hasFocus={focusPath[0] === 'hotspot'}\n            isChanged={changed}\n          >\n            <RatioBox ratio={3 / 2}>\n              {(isImageLoading || imageLoadError) && (\n                <LoadStatus>\n                  {imageLoadError ? (\n                    <Card padding={4} radius={2} tone=\"critical\" border>\n                      <Text>Error: {imageLoadError.message}</Text>\n                    </Card>\n                  ) : (\n                    <Text muted>Loading image </Text>\n                  )}\n                </LoadStatus>\n              )}\n\n              {!isImageLoading && image && (\n                <Box margin={1}>\n                  <ImageTool\n                    value={localValue}\n                    src={image.src}\n                    readOnly={Boolean(readOnly)}\n                    onChangeEnd={handleChangeEnd}\n                    onChange={setLocalValue}\n                  />\n                </Box>\n              )}\n            </RatioBox>\n          </ChangeIndicator>\n        </Card>\n        <Box marginTop={3}>\n          <Grid columns={PREVIEW_ASPECT_RATIOS.length} gap={1}>\n            {PREVIEW_ASPECT_RATIOS.map(([title, ratio]) => (\n              <div key={ratio}>\n                <Heading as=\"h4\" size={0}>\n                  {title}\n                </Heading>\n                <Box marginTop={2}>\n                  <RatioBox ratio={ratio}>\n                    <Card __unstable_checkered>\n                      {!isImageLoading && image ? (\n                        <HotspotImage\n                          aspectRatio={ratio}\n                          src={image.src}\n                          srcAspectRatio={image.width / image.height}\n                          hotspot={localValue.hotspot || DEFAULT_HOTSPOT}\n                          crop={localValue.crop || DEFAULT_CROP}\n                        />\n                      ) : (\n                        <Placeholder />\n                      )}\n                    </Card>\n                  </RatioBox>\n                </Box>\n              </div>\n            ))}\n          </Grid>\n        </Box>\n      </div>\n    </FormField>\n  )\n}\n","import React, {MouseEventHandler, ReactNode} from 'react'\nimport {EllipsisVerticalIcon, CropIcon} from '@sanity/icons'\nimport {Button, Inline, Menu, MenuButton, MenuButtonProps} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {portal: true, constrainSize: true}\n\nexport const MenuActionsWrapper = styled(Inline)`\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\ninterface ImageActionsMenuProps {\n  children: ReactNode\n  onEdit: MouseEventHandler<HTMLButtonElement>\n  setHotspotButtonElement: (element: HTMLButtonElement | null) => void\n  setMenuButtonElement: (element: HTMLButtonElement | null) => void\n  showEdit: boolean\n}\n\nexport function ImageActionsMenu(props: ImageActionsMenuProps) {\n  const {onEdit, children, showEdit, setHotspotButtonElement, setMenuButtonElement} = props\n\n  return (\n    <MenuActionsWrapper data-buttons space={1} padding={2}>\n      {showEdit && (\n        <Button\n          aria-label=\"Open image edit dialog\"\n          data-testid=\"options-menu-edit-details\"\n          icon={CropIcon}\n          mode=\"ghost\"\n          onClick={onEdit}\n          ref={setHotspotButtonElement}\n        />\n      )}\n\n      <MenuButton\n        button={\n          <Button\n            aria-label=\"Open image options menu\"\n            data-testid=\"options-menu-button\"\n            icon={EllipsisVerticalIcon}\n            mode=\"ghost\"\n          />\n        }\n        id=\"image-actions-menu\"\n        menu={<Menu>{children}</Menu>}\n        popover={POPOVER_PROPS}\n        ref={setMenuButtonElement}\n      />\n    </MenuActionsWrapper>\n  )\n}\n","import {studioTheme, rgba, Card, Flex, CardTone, Spinner} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const MAX_DEFAULT_HEIGHT = 30\n\nexport const RatioBox = styled(Card)`\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  min-height: 3.75rem;\n  max-height: 20rem;\n\n  & > div[data-container] {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex !important;\n    align-items: center;\n    justify-content: center;\n  }\n\n  & img {\n    max-width: 100%;\n    max-height: 100%;\n  }\n`\n\nexport const SpinnerWrapper = styled(Spinner)`\n  position: absolute;\n`\n\nexport const Overlay = styled(Flex)(\n  ({tone, drag}: {tone: Exclude<CardTone, 'inherit'>; drag: boolean}) => {\n    const textColor = studioTheme.color.light[tone].card.enabled.fg\n    const backgroundColor = rgba(studioTheme.color.light[tone].card.enabled.bg, 0.8)\n\n    return css`\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      backdrop-filter: ${drag ? 'blur(10px)' : ''};\n      color: ${tone ? textColor : ''};\n      background-color: ${drag ? backgroundColor : 'transparent'};\n    `\n  }\n)\n\nexport const FlexOverlay = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`\n","import React, {ComponentProps, useCallback, useEffect, useState} from 'react'\n\nimport {AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Box, Card, CardTone, Heading, Text, useElementRect} from '@sanity/ui'\nimport {\n  MAX_DEFAULT_HEIGHT,\n  RatioBox,\n  Overlay,\n  FlexOverlay,\n  SpinnerWrapper,\n} from './ImagePreview.styled'\n\ninterface Props {\n  readOnly?: boolean | null\n  drag: boolean\n  isRejected: boolean\n  src: string\n  alt: string\n}\n\n/*\n  Used for setting the initial image height - specifically for images\n  that are small and so can take less space in the document\n*/\nconst getImageSize = (src: string): number[] => {\n  const imageUrlParams = new URLSearchParams(src.split('?')[1])\n  const rect = imageUrlParams.get('rect')\n\n  if (rect) {\n    return [rect.split(',')[2], rect.split(',')[3]].map(Number)\n  }\n\n  return src.split('-')[1].split('.')[0].split('x').map(Number)\n}\n\nexport function ImagePreview(props: ComponentProps<typeof Card> & Props) {\n  const {drag, readOnly, isRejected, src, ...rest} = props\n  const [isLoaded, setLoaded] = useState(false)\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const rootWidth = rootRect?.width || 0\n  const acceptTone = isRejected || readOnly ? 'critical' : 'primary'\n  const tone = drag ? acceptTone : 'default'\n\n  const maxHeightToPx = (MAX_DEFAULT_HEIGHT * document.documentElement.clientHeight) / 100 // convert from vh to px, max height of the input\n\n  const [imageWidth, imageHeight] = getImageSize(src)\n\n  const imageRatio = imageWidth / imageHeight\n\n  // is the image wider than root? if so calculate the resized height\n  const renderedImageHeight = imageWidth > rootWidth ? rootWidth / imageRatio : imageHeight\n\n  /*\n    if the rendered image is smaller than the max height then it doesn't require a height set\n    otherwise, set the max height (to prevent a large image in the document)\n  */\n  const rootHeight = renderedImageHeight < maxHeightToPx ? null : `${MAX_DEFAULT_HEIGHT}vh`\n\n  useEffect(() => {\n    /* set for when the src is being switched when the image input already had a image src\n    - meaning it already had an asset */\n    setLoaded(false)\n  }, [src])\n\n  const onLoadChange = useCallback(() => {\n    setLoaded(true)\n  }, [])\n\n  return (\n    <RatioBox {...rest} ref={setRootElement} style={{height: rootHeight}} tone=\"transparent\">\n      <Card data-container tone=\"inherit\">\n        {!isLoaded && <OverlayComponent cardTone=\"transparent\" drag content={<SpinnerWrapper />} />}\n        <img\n          src={src}\n          data-testid=\"hotspot-image-input\"\n          alt={props.alt}\n          onLoad={onLoadChange}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n        />\n      </Card>\n\n      {drag && (\n        <OverlayComponent\n          cardTone={tone}\n          drag={drag}\n          content={\n            <>\n              <Box marginBottom={3}>\n                <Heading>\n                  <HoverIcon isRejected={isRejected} readOnly={readOnly} />\n                </Heading>\n              </Box>\n              <HoverText isRejected={isRejected} readOnly={readOnly} />\n            </>\n          }\n        />\n      )}\n    </RatioBox>\n  )\n}\n\nfunction HoverIcon({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  if (isRejected) {\n    return <AccessDeniedIcon />\n  }\n  if (readOnly) {\n    return <ReadOnlyIcon />\n  }\n  return <ImageIcon />\n}\n\nfunction HoverText({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  let message = 'Drop image to upload'\n  if (isRejected) {\n    message = 'Cannot upload this file here'\n  }\n  if (readOnly) {\n    message = 'This field is read only'\n  }\n\n  return <Text size={1}>{message}</Text>\n}\n\nfunction OverlayComponent({\n  cardTone,\n  drag,\n  content,\n}: {\n  cardTone: Exclude<CardTone, 'inherit'>\n  drag: boolean\n  content: React.ReactNode\n}) {\n  return (\n    <Overlay justify=\"flex-end\" padding={3} tone={cardTone} drag={drag}>\n      <FlexOverlay direction=\"column\" align=\"center\" justify=\"center\">\n        {content}\n      </FlexOverlay>\n    </Overlay>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidImageWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid image value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid image. Resetting this field will let you choose a\n            new image.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable import/no-unresolved,react/jsx-handler-names */\n\nimport {\n  Box,\n  Button,\n  Card,\n  Dialog,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  Stack,\n  ToastParams,\n} from '@sanity/ui'\nimport {get} from 'lodash'\nimport {Observable, Subscription} from 'rxjs'\nimport {ChevronDownIcon, ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  AssetFromSource,\n  AssetSource,\n  Image as BaseImage,\n  ImageAsset,\n  ImageSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport React, {ReactNode} from 'react'\nimport {SanityClient} from '@sanity/client'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {FieldMember} from '../../../store'\nimport {InputProps, ObjectInputProps} from '../../../types'\nimport {\n  ResolvedUploader,\n  Uploader,\n  UploaderResolver,\n  UploadOptions,\n} from '../../../studio/uploads/types'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {FileTarget} from '../common/styles'\nimport {ImageUrlBuilder} from '../types'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {ImageToolInput} from '../ImageToolInput'\nimport {FormInput} from '../../../components'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {PresenceOverlay} from '../../../../presence'\nimport {FIXME} from '../../../../FIXME'\nimport {ImperativeToast} from '../../../../components'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {ImageActionsMenu} from './ImageActionsMenu'\nimport {ImagePreview} from './ImagePreview'\nimport {InvalidImageWarning} from './InvalidImageWarning'\n\n/** @beta */\nexport interface BaseImageInputValue extends Partial<BaseImage> {\n  _upload?: UploadState\n}\n\n/** @beta */\nexport interface BaseImageInputProps\n  extends ObjectInputProps<BaseImageInputValue, ImageSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  imageUrlBuilder: ImageUrlBuilder\n  observeAsset: (documentId: string) => Observable<ImageAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\nconst getDevicePixelRatio = () => {\n  if (typeof window === 'undefined' || !window.devicePixelRatio) {\n    return 1\n  }\n  return Math.round(Math.max(1, window.devicePixelRatio))\n}\n\ntype FileInfo = {\n  type: string // mime type\n  kind: string // 'file' or 'string'\n}\n\ntype BaseImageInputState = {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  // Metadata about files currently over the drop area\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  hotspotButtonElement: HTMLButtonElement | null\n  menuButtonElement: HTMLButtonElement | null\n}\n\ntype Focusable = {\n  focus: () => void\n  offsetHeight: number\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\n\nconst ASSET_FIELD_PATH = ['asset']\n\nconst ASSET_IMAGE_MENU_POPOVER: MenuButtonProps['popover'] = {portal: true}\n\n/** @internal */\nexport class BaseImageInput extends React.PureComponent<BaseImageInputProps, BaseImageInputState> {\n  _assetElementRef: null | Focusable = null\n  _assetPath: Path\n  uploadSubscription: null | Subscription = null\n\n  state: BaseImageInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    hotspotButtonElement: null,\n    menuButtonElement: null,\n  }\n\n  constructor(props: BaseImageInputProps) {\n    super(props)\n    this._assetPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  focus() {\n    if (this._assetElementRef) {\n      this._assetElementRef.focus()\n    }\n  }\n\n  setFocusElement = (el: HTMLElement | null) => {\n    this._assetElementRef = el\n  }\n\n  setMenuButtonElement = (el: HTMLButtonElement | null) => {\n    this.setState({menuButtonElement: el})\n  }\n\n  setHotspotButtonElement = (el: HTMLButtonElement | null) => {\n    this.setState({hotspotButtonElement: el})\n  }\n\n  isImageToolEnabled() {\n    return get(this.props.schemaType, 'options.hotspot') === true\n  }\n\n  clearUploadStatus() {\n    if (this.props.value?._upload) {\n      this.props.onChange(unset(['_upload']))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  getUploadOptions = (file: File): ResolvedUploader[] => {\n    const {schemaType, resolveUploader} = this.props\n    const uploader = resolveUploader && resolveUploader(schemaType, file)\n    return uploader ? [{type: schemaType, uploader}] : []\n  }\n\n  uploadFirstAccepted(files: File[]) {\n    const {schemaType, resolveUploader} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: resolveUploader(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n  }\n\n  uploadWith = (uploader: Uploader, file: File, assetDocumentProps: UploadOptions = {}) => {\n    const {schemaType, onChange, client} = this.props\n    const {label, title, description, creditLine, source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      label,\n      title,\n      description,\n      creditLine,\n      source,\n    }\n\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(setIfMissing({_type: schemaType.name}))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(uploadEvent.patches)\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        onChange([unset(['hotspot']), unset(['crop'])])\n        this.setState({isUploading: false})\n        // this.toast.push({\n        //   status: 'success',\n        //   title: 'Upload completed',\n        // })\n      },\n    })\n  }\n\n  handleRemoveButtonClick = () => {\n    const {value} = this.props\n\n    // When removing the image, we should also remove any crop and hotspot\n    // _type and _key are \"meta\"-properties and are not significant unless\n    // other properties are present. Thus, we want to remove the entire\n    // \"container\" object if these are the only properties present, BUT\n    // only if we're not an array element, as removing the array element\n    // will close the selection dialog. Instead, when closing the dialog,\n    // the array logic will check for an \"empty\" value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['crop', 'hotspot', '_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(isEmpty && !this.valueIsArrayElement() ? unset() : removeKeys)\n  }\n\n  handleFieldChange = (event: PatchEvent) => {\n    const {onChange, schemaType} = this.props\n\n    // When editing a metadata field for an image (eg `altText`), and no asset\n    // is currently selected, we want to unset the entire image field if the\n    // field we are currently editing goes blank and gets unset.\n    //\n    // For instance:\n    // An image field with an `altText` and a `title` subfield, where the image\n    // `asset` and the `title` field is empty, and we are erasing the `alt` field.\n    // We do _not_ however want to clear the field if any content is present in\n    // the other fields - but we do not consider `crop` and `hotspot`.\n    //\n    // Also, we don't want to use this logic for array items, since the parent will\n    // take care of it when closing the array dialog\n    if (!this.valueIsArrayElement() && this.eventIsUnsettingLastFilledField(event)) {\n      onChange(unset())\n      return\n    }\n\n    onChange(\n      event.prepend(\n        setIfMissing({\n          _type: schemaType.name,\n        })\n      ).patches\n    )\n  }\n\n  eventIsUnsettingLastFilledField = (event: PatchEvent): boolean => {\n    const patch = event.patches[0]\n    if (event.patches.length !== 1 || patch.type !== 'unset') {\n      return false\n    }\n\n    const allKeys = Object.keys(this.props.value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty =\n      event.patches[0].path.length === 1 &&\n      remainingKeys.length === 1 &&\n      remainingKeys[0] === event.patches[0].path[0]\n\n    return isEmpty\n  }\n\n  valueIsArrayElement = () => {\n    const {path} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    return typeof parentPathSegment !== 'string'\n  }\n\n  handleOpenDialog = () => {\n    const {onFieldOpen} = this.props\n    onFieldOpen('hotspot')\n  }\n\n  handleCloseDialog = () => {\n    const {onFieldClose} = this.props\n    onFieldClose('hotspot')\n\n    // Set focus on hotspot button in `ImageActionsMenu` when closing the dialog\n    this.state.hotspotButtonElement?.focus()\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n      isImage: true,\n    })\n\n    this.setState({selectedAssetSource: null})\n  }\n\n  handleFilesOver = (hoveringFiles: FileInfo[]) => {\n    this.setState({\n      hoveringFiles,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange([unset(['asset']), unset(['crop']), unset(['hotspot'])])\n  }\n\n  handleSelectFiles = (files: File[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectImageFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n\n    // Set focus on menu button in `ImageActionsMenu` when closing the dialog\n    this.state.menuButtonElement?.focus()\n  }\n\n  renderHotspotInput = (hotspotInputProps: Omit<InputProps, 'renderDefault'>) => {\n    const {value, changed, id, imageUrlBuilder} = this.props\n\n    const withImageTool = this.isImageToolEnabled() && value && value.asset\n\n    return (\n      <Dialog\n        header=\"Edit hotspot and crop\"\n        id={`${id}_dialog`}\n        onClose={this.handleCloseDialog}\n        width={1}\n        __unstable_autoFocus={false}\n      >\n        <PresenceOverlay>\n          <Box padding={4}>\n            <Stack space={5}>\n              {withImageTool && value?.asset && (\n                <ImageToolInput\n                  {...this.props}\n                  imageUrl={imageUrlBuilder.image(value.asset).url()}\n                  value={value as FIXME}\n                  presence={hotspotInputProps.presence}\n                  changed={changed}\n                />\n              )}\n            </Stack>\n          </Box>\n        </PresenceOverlay>\n      </Dialog>\n    )\n  }\n\n  renderPreview = () => {\n    const {value, schemaType, readOnly, directUploads, imageUrlBuilder, resolveUploader} =\n      this.props\n\n    if (!value || !isImageSource(value)) {\n      return null\n    }\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n    const imageUrl = imageUrlBuilder\n      .width(2000)\n      .fit('max')\n      .image(value)\n      .dpr(getDevicePixelRatio())\n      .auto('format')\n      .url()\n\n    return (\n      <ImagePreview\n        drag={!value?._upload && hoveringFiles.length > 0}\n        isRejected={rejectedFilesCount > 0 || !directUploads}\n        readOnly={readOnly}\n        src={imageUrl}\n        alt=\"Preview of uploaded image\"\n      />\n    )\n  }\n\n  renderAssetMenu() {\n    const {\n      value,\n      assetSources,\n      schemaType,\n      readOnly,\n      directUploads,\n      imageUrlBuilder,\n      observeAsset,\n    } = this.props\n\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    const showAdvancedEditButton = value && asset && this.isImageToolEnabled()\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Select\"\n          onClick={() => {\n            this.handleSelectImageFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources && assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.handleSelectImageFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n            disabled={readOnly}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset observeAsset={observeAsset} reference={asset}>\n        {({_id, originalFilename, extension}) => {\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isImageSource(value)) {\n            const filename = originalFilename || `download.${extension}`\n            downloadUrl = imageUrlBuilder.image(_id).forceDownload(filename).url()\n            copyUrl = imageUrlBuilder.image(_id).url()\n          }\n\n          return (\n            <ImageActionsMenu\n              onEdit={this.handleOpenDialog}\n              showEdit={showAdvancedEditButton}\n              setHotspotButtonElement={this.setHotspotButtonElement}\n              setMenuButtonElement={this.setMenuButtonElement}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                directUploads={directUploads}\n                accept={accept}\n              />\n            </ImageActionsMenu>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources && assetSources.length === 0) return null\n\n    if (assetSources && assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetImageButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n              iconRight={ChevronDownIcon}\n            />\n          }\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.handleSelectImageFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={ASSET_IMAGE_MENU_POPOVER}\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Select\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.handleSelectImageFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"image\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n    const elementHeight = this._assetElementRef?.offsetHeight\n    const height = elementHeight === 0 ? undefined : elementHeight\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n        height={height}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset observeAsset={observeAsset} reference={value.asset}>\n          {(imageAsset) => (\n            <Component\n              selectedAssets={[imageAsset]}\n              assetType=\"image\"\n              selectionType=\"single\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"image\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n\n  getFileTone() {\n    const {schemaType, value, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n\n    if (readOnly) {\n      return 'transparent'\n    }\n\n    return value?._upload && value?.asset ? 'transparent' : 'default'\n  }\n\n  renderAsset() {\n    const {value, readOnly, elementProps} = this.props\n\n    const {hoveringFiles, isStale} = this.state\n\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isImageSource(value)) {\n      return () => <InvalidImageWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: Omit<InputProps, 'renderDefault'>) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n\n        <ChangeIndicator\n          path={inputProps.path.concat(ASSET_FIELD_PATH)}\n          hasFocus={!!inputProps.focused}\n          isChanged={inputProps.changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              {!value?.asset && this.renderUploadPlaceholder()}\n              {!value?._upload && value?.asset && (\n                <div style={{position: 'relative'}}>\n                  {this.renderPreview()}\n                  {this.renderAssetMenu()}\n                </div>\n              )}\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  render() {\n    const {members, renderInput, renderField, renderItem, renderPreview} = this.props\n\n    const {selectedAssetSource} = this.state\n\n    // we use the hotspot field as the \"owner\" of both hotspot and crop\n    const hotspotField = members.find(\n      (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n    )\n\n    return (\n      <div data-testid=\"image-input\">\n        <ImperativeToast ref={this.setToast} />\n\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError key={member.key} member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {hotspotField?.open && (\n          <FormInput\n            {...this.props}\n            absolutePath={hotspotField.field.path}\n            renderInput={this.renderHotspotInput}\n          />\n        )}\n        {selectedAssetSource && this.renderAssetSource()}\n      </div>\n    )\n  }\n}\n","import React, {useCallback} from 'react'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {SchemaType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {BaseImageInput, BaseImageInputProps} from '../../inputs/files/ImageInput'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {FileLike} from '../uploads/types'\nimport {useDocumentPreviewStore} from '../../../store'\nimport {useClient} from '../../../hooks'\nimport {observeImageAsset} from './client-adapters/assets'\n\n/** @beta */\nexport type ImageInputProps = Omit<\n  BaseImageInputProps,\n  | 'assetSources'\n  | 'directUploads'\n  | 'imageUrlBuilder'\n  | 'observeAsset'\n  | 'client'\n  | 'resolveUploader'\n>\n\n/** @beta */\nexport function StudioImageInput(props: ImageInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const {image} = useFormBuilder().__internal\n  const documentPreviewStore = useDocumentPreviewStore()\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const formBuilder = useFormBuilder()\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!supportsImageUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [supportsImageUploads]\n  )\n\n  // note: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = React.useMemo(\n    () => sourcesFromSchema || image.assetSources,\n    [image, sourcesFromSchema]\n  )\n\n  const builder = React.useMemo(() => imageUrlBuilder(client), [client])\n\n  const observeAsset = useCallback(\n    (id: string) => observeImageAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <BaseImageInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={image.directUploads}\n      imageUrlBuilder={builder}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {Card, Flex} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardOverlay = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`\n\nexport const FlexContainer = styled(Flex)`\n  height: 100%;\n`\n","/* method which returns a file size in a readable format */\nexport function formatBytes(bytes: number, decimals = 2) {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`\n}\n","import {BinaryDocumentIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport React, {ReactNode, useState} from 'react'\n\nimport {Box, Button, Card, Flex, Menu, Popover, Stack, Text, useClickOutside} from '@sanity/ui'\nimport {formatBytes} from '../../common/helper'\n\ntype Props = {\n  children: ReactNode\n  size: number\n  originalFilename: string\n  onClick?: () => void\n  muted?: boolean\n  disabled?: boolean\n  isMenuOpen: boolean\n  onMenuOpen: (flag: boolean) => void\n}\n\nexport function FileDetails(props: Props) {\n  const {originalFilename, size, children, muted, disabled, onClick, isMenuOpen, onMenuOpen} = props\n\n  const [menuElement, setMenuRef] = useState<HTMLDivElement | null>(null)\n\n  const handleClick = React.useCallback(() => onMenuOpen(true), [onMenuOpen])\n\n  useClickOutside(\n    React.useCallback(() => onMenuOpen(false), [onMenuOpen]),\n    [menuElement]\n  )\n\n  return (\n    <Flex wrap=\"nowrap\" justify=\"space-between\" align=\"center\">\n      <Card\n        as={muted || disabled ? undefined : 'button'}\n        tabIndex={disabled ? undefined : 0}\n        __unstable_focusRing\n        radius={2}\n        padding={2}\n        tone=\"inherit\"\n        onClick={onClick}\n      >\n        <Flex wrap=\"nowrap\" align=\"center\">\n          <Card padding={3} tone=\"transparent\" shadow={1} radius={1}>\n            <Text muted={muted}>\n              <BinaryDocumentIcon />\n            </Text>\n          </Card>\n          <Stack flex={1} space={2} marginLeft={3}>\n            <Text size={2} textOverflow=\"ellipsis\" muted={muted} data-testid=\"file-name\">\n              {originalFilename}\n            </Text>\n            <Text size={1} muted data-testid=\"file-size\">\n              {formatBytes(size)}\n            </Text>\n          </Stack>\n        </Flex>\n      </Card>\n      <Box padding={2}>\n        <Flex justify=\"center\">\n          <Popover content={<Menu ref={setMenuRef}>{children}</Menu>} portal open={isMenuOpen}>\n            <Button\n              icon={EllipsisVerticalIcon}\n              mode=\"bleed\"\n              data-testid=\"options-menu-button\"\n              onClick={handleClick}\n            />\n          </Popover>\n        </Flex>\n      </Box>\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Skeleton, Flex, Stack, LabelSkeleton} from '@sanity/ui'\n\nexport function FileSkeleton() {\n  return (\n    <Flex align=\"center\" justify=\"flex-start\" padding={2}>\n      <Skeleton padding={3} radius={1} animated />\n      <Stack flex={1} space={2} marginLeft={3}>\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n      </Stack>\n    </Flex>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidFileWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid file value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid file. Resetting this field will let you choose a\n            new file.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable no-undef, import/no-unresolved */\n\nimport React, {ReactNode} from 'react'\nimport {Observable, Subscription} from 'rxjs'\nimport {get} from 'lodash'\nimport {\n  AssetFromSource,\n  AssetSource,\n  File as BaseFile,\n  FileAsset,\n  FileSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport {ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuItem,\n  ThemeColorToneKey,\n  ToastParams,\n} from '@sanity/ui'\nimport {SanityClient} from '@sanity/client'\nimport {isFileSource} from '@sanity/asset-utils'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {FileInfo, FileTarget} from '../common/styles'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {PlaceholderText} from '../common/PlaceholderText'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {InputProps, ObjectInputProps} from '../../../types'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {ImperativeToast} from '../../../../components'\nimport {ChangeIndicator} from '../../../../changeIndicators'\nimport {FIXME} from '../../../../FIXME'\nimport {CardOverlay, FlexContainer} from './styles'\nimport {FileDetails} from './FileDetails'\nimport {FileSkeleton} from './FileSkeleton'\nimport {InvalidFileWarning} from './InvalidFileWarning'\n\n/** @beta */\nexport interface BaseFileInputValue extends Partial<BaseFile> {\n  _upload?: UploadState\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\n\n/** @beta */\nexport interface BaseFileInputProps extends ObjectInputProps<BaseFileInputValue, FileSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  observeAsset: (documentId: string) => Observable<FileAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\n/** @internal */\nexport interface BaseFileInputState {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  isMenuOpen: boolean\n}\n\n/** @internal */\nexport type Focusable = {\n  focus: () => void\n}\nconst ASSET_FIELD_PATH = ['asset']\n\n/** @internal */\nexport class BaseFileInput extends React.PureComponent<BaseFileInputProps, BaseFileInputState> {\n  _focusRef: Focusable | null = null\n  _assetFieldPath: Path\n  uploadSubscription: Subscription | null = null\n\n  state: BaseFileInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    isMenuOpen: false,\n  }\n\n  constructor(props: BaseFileInputProps) {\n    super(props)\n    this._assetFieldPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  handleRemoveButtonClick = () => {\n    const {path, value} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    const isArrayElement = typeof parentPathSegment !== 'string'\n\n    // When removing the file, _type and _key are \"meta\"-properties and\n    // are not significant unless other properties are present. Thus, we\n    // want to remove the entire \"container\" object if these are the only\n    // properties present, BUT only if we're not an array element, as\n    // removing the array element will close the selection dialog. Instead,\n    // when closing the dialog, the array logic will check for an \"empty\"\n    // value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(PatchEvent.from(isEmpty && !isArrayElement ? unset() : removeKeys))\n  }\n\n  clearUploadStatus() {\n    // todo: this is kind of hackish\n    if (this.props.value?._upload) {\n      this.props.onChange(PatchEvent.from([unset(['_upload'])]))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange(unset(['asset']))\n  }\n\n  handleSelectFiles = (files: globalThis.File[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectFileFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n  }\n\n  uploadFirstAccepted(files: globalThis.File[]) {\n    const {schemaType} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: this.props.resolveUploader?.(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n\n    this.setState({isMenuOpen: false})\n  }\n\n  uploadWith = (\n    uploader: Uploader,\n    file: globalThis.File,\n    assetDocumentProps: UploadOptions = {}\n  ) => {\n    const {schemaType, onChange, client} = this.props\n    const {source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      source,\n    }\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(PatchEvent.from([setIfMissing({_type: schemaType.name})]))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(PatchEvent.from(uploadEvent.patches))\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        this.setState({isUploading: false})\n      },\n    })\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset\n          observeAsset={observeAsset}\n          reference={value.asset}\n          waitPlaceholder={<FileSkeleton />}\n        >\n          {(fileAsset) => (\n            <Component\n              selectedAssets={[fileAsset]}\n              selectionType=\"single\"\n              assetType=\"file\"\n              dialogHeaderTitle=\"Select file\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"file\"\n        dialogHeaderTitle=\"Select file\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n    })\n    this.setState({selectedAssetSource: null})\n  }\n\n  hasFileTargetFocus() {\n    return this.props.focusPath?.[0] === 'asset'\n  }\n\n  handleFileTargetFocus = (event: FIXME) => {\n    // We want to handle focus when the file target element *itself* receives\n    // focus, not when an interactive child element receives focus. Since React has decided\n    // to let focus bubble, so this workaround is needed\n    // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n    if (event.currentTarget === event.target && event.currentTarget === this._focusRef) {\n      this.props.onPathFocus(['asset'])\n    }\n  }\n\n  handleFilesOver = (fileInfo: FileInfo[]) => {\n    this.setState({\n      hoveringFiles: fileInfo,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  renderAsset() {\n    const {value, changed, readOnly, elementProps} = this.props\n    const {hoveringFiles, isStale} = this.state\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isFileSource(value)) {\n      return () => <InvalidFileWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: Omit<InputProps, 'renderDefault'>) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n        <ChangeIndicator\n          path={this._assetFieldPath}\n          hasFocus={!!inputProps.focused}\n          isChanged={changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              <div style={{position: 'relative'}}>\n                {!value?.asset && this.renderUploadPlaceholder()}\n                {value?.asset && hoveringFiles.length > 0\n                  ? this.renderAssetMenu(this.getFileTone())\n                  : null}\n                {!value?._upload && value?.asset && this.renderPreview()}\n              </div>\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  renderPreview() {\n    const {value, readOnly, assetSources, schemaType, directUploads, observeAsset} = this.props\n    const {isMenuOpen} = this.state\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources?.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Browse\"\n          onClick={() => {\n            this.setState({isMenuOpen: false})\n            this.handleSelectFileFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.setState({isMenuOpen: false})\n              this.handleSelectFileFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            disabled={readOnly}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset\n        reference={asset}\n        observeAsset={observeAsset}\n        waitPlaceholder={<FileSkeleton />}\n      >\n        {({originalFilename, extension, url, size}) => {\n          const filename = originalFilename || `download.${extension}`\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isFileSource(value)) {\n            downloadUrl = `${url}?dl`\n            copyUrl = url\n          }\n\n          return (\n            <FileDetails\n              size={size}\n              originalFilename={filename}\n              muted={!readOnly}\n              onMenuOpen={(isOpen) => this.setState({isMenuOpen: isOpen})}\n              isMenuOpen={isMenuOpen}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                accept={accept}\n                directUploads={directUploads}\n              />\n            </FileDetails>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderAssetMenu(tone: ThemeColorToneKey) {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    return (\n      <CardOverlay tone={tone}>\n        <FlexContainer align=\"center\" justify=\"center\" gap={2} flex={1}>\n          <PlaceholderText\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            directUploads={directUploads}\n            type=\"file\"\n          />\n        </FlexContainer>\n      </CardOverlay>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources.length === 0) return null\n\n    if (assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetFileButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n            />\n          }\n          data-testid=\"input-select-button\"\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.setState({isMenuOpen: false})\n                      this.handleSelectFileFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Browse\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.setState({isMenuOpen: false})\n          this.handleSelectFileFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {readOnly, schemaType, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"file\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  focus() {\n    if (this._focusRef) {\n      this._focusRef.focus()\n    }\n  }\n\n  setFocusElement = (ref: Focusable | null) => {\n    this._focusRef = ref\n  }\n\n  handleUpload = ({file, uploader}: {file: globalThis.File; uploader: Uploader}) => {\n    this.uploadWith(uploader, file)\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n  getFileTone() {\n    const {directUploads, schemaType, value, readOnly, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n    return value?._upload && value?.asset && readOnly ? 'transparent' : 'default'\n  }\n\n  render() {\n    const {members, renderItem, renderInput, renderField, renderPreview} = this.props\n    const {selectedAssetSource} = this.state\n\n    return (\n      <>\n        <ImperativeToast ref={this.setToast} />\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError key={member.key} member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {selectedAssetSource && this.renderAssetSource()}\n      </>\n    )\n  }\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {BaseFileInput, BaseFileInputProps} from '../../inputs/files/FileInput'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {FileLike} from '../uploads/types'\nimport {useDocumentPreviewStore} from '../../../store'\nimport {useClient} from '../../../hooks'\nimport {observeFileAsset} from './client-adapters/assets'\n\n/** @beta */\nexport type FileInputProps = Omit<\n  BaseFileInputProps,\n  'assetSources' | 'directUploads' | 'observeAsset' | 'resolveUploader' | 'client'\n>\n\n/** @beta */\nexport function StudioFileInput(props: FileInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {file: fileConfig} = useFormBuilder().__internal\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!fileConfig.directUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [fileConfig.directUploads]\n  )\n  // NOTE: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = useMemo(\n    () => sourcesFromSchema || fileConfig.assetSources,\n    [fileConfig, sourcesFromSchema]\n  )\n\n  const observeAsset = useCallback(\n    (id: string) => observeFileAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <BaseFileInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={fileConfig.directUploads}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Card, CardProps, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {Details} from './Details'\n\ninterface AlertProps extends Omit<CardProps, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error' | 'info'\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n  info: 'positive',\n} as const\n\nconst STATUS_ICONS = {\n  warning: <WarningOutlineIcon />,\n  error: <ErrorOutlineIcon />,\n  info: <InfoOutlineIcon />,\n}\n\nexport function AlertStrip(props: AlertProps & Omit<React.HTMLProps<HTMLDivElement>, 'ref'>) {\n  const {children, status = 'warning', title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={1}>\n        {children && (\n          <Box flex={1}>\n            <Details icon={STATUS_ICONS[status]} title={title}>\n              <Box marginLeft={3} marginTop={3}>\n                {children}\n              </Box>\n            </Details>\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import {RefObject, useEffect} from 'react'\n\n// This is a modified version of https://usehooks.com/useOnClickOutside that can take multiple element refs\n// There is currently a bug in the `useClickOutside` hook from @sanity/ui that requires the refs to be passed as\n// actual HTML elements instead of mutable refs. This requires the consumer to store elements in component state\n// which adds quite a bit of cruft and isn't always feasible\nexport function useOnClickOutside(\n  refs: RefObject<HTMLElement>[],\n  handler: (event: Event) => void\n): void {\n  useEffect(() => {\n    const listener = (event: Event) => {\n      const target = event.target\n      if (target instanceof HTMLElement) {\n        if (refs.some((ref) => ref.current?.contains(target))) {\n          return\n        }\n        handler(event)\n      }\n    }\n    document.addEventListener('mousedown', listener)\n    document.addEventListener('touchstart', listener)\n    return () => {\n      document.removeEventListener('mousedown', listener)\n      document.removeEventListener('touchstart', listener)\n    }\n  }, [refs, handler])\n}\n","import {useCallback, useState} from 'react'\nimport {catchError, map, startWith} from 'rxjs/operators'\nimport {Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {CrossDatasetReferenceInfo} from './types'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => {}\n\nconst INITIAL_LOADING_STATE: Loadable<CrossDatasetReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\nexport type GetReferenceInfoFn = (doc: {\n  _id: string\n  _type?: string\n}) => Observable<CrossDatasetReferenceInfo>\n\nexport function useReferenceInfo(\n  doc: {_id: string; _type?: string},\n  getReferenceInfo: GetReferenceInfoFn\n): Loadable<CrossDatasetReferenceInfo> {\n  const [retryAttempt, setRetryAttempt] = useState<number>(0)\n\n  const retry = useCallback(() => {\n    setRetryAttempt((current) => current + 1)\n  }, [])\n\n  const referenceInfo = useMemoObservable(\n    () =>\n      doc._id\n        ? getReferenceInfo(doc).pipe(\n            map(\n              (result) =>\n                ({\n                  isLoading: false,\n                  result,\n                  error: undefined,\n                  retry,\n                } as const)\n            ),\n            startWith(INITIAL_LOADING_STATE),\n            catchError((err: Error) => {\n              console.error(err)\n              return of({isLoading: false, result: undefined, error: err, retry} as const)\n            })\n          )\n        : of(EMPTY_STATE),\n    [retryAttempt, getReferenceInfo, doc?._id, doc?._type, retry],\n    INITIAL_LOADING_STATE\n  )\n\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(doc._id, doc._id)\n  if (previousId !== doc._id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import {Flex} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const StyledPreviewFlex = styled(Flex)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  or the message is not tall enough to fill the card\n  there's probably better ways of solving this */\n  min-height: 36px;\n`\n\nexport const TooltipContent = styled(Flex)`\n  /* This limits the width of the tooltip content */\n  max-width: 250px;\n`\n","import React, {createElement, ReactNode, useMemo} from 'react'\nimport {CrossDatasetType, PreviewValue} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip} from '@sanity/ui'\nimport {AccessDeniedIcon, HelpCircleIcon, LaunchIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {DocumentAvailability} from '../../../preview'\nimport {DefaultPreview, PreviewMediaDimensions, TextWithTone} from '../../../components'\nimport {FIXME} from '../../../FIXME'\n\nimport {StyledPreviewFlex, TooltipContent} from './CrossDatasetReferencePreview.styled'\n\nfunction UnavailableMessage(props: {children: ReactNode}) {\n  return (\n    <TooltipContent padding={3}>\n      <Box flex={1}>\n        <Box>\n          <Text as=\"p\" size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </TooltipContent>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function CrossDatasetReferencePreview(props: {\n  availability: DocumentAvailability | null\n  id: string\n  hasStudioUrl?: boolean\n  showStudioUrlIcon?: boolean\n  preview: {published: PreviewValue | undefined}\n  dataset: string\n  projectId: string\n  refType?: CrossDatasetType\n  showTypeLabel: boolean\n}) {\n  const {\n    refType,\n    showStudioUrlIcon,\n    hasStudioUrl,\n    showTypeLabel,\n    availability,\n    preview,\n    id,\n    dataset,\n    projectId,\n  } = props\n  const notFound = availability?.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability?.reason === 'PERMISSION_DENIED'\n\n  const previewMedia = preview.published?.media\n\n  const media = useMemo(() => {\n    if (previewMedia) {\n      const isValidImageAsset =\n        typeof (previewMedia as FIXME)?.asset !== 'undefined' && isImageSource(previewMedia)\n      const isValidElement = React.isValidElement(previewMedia)\n\n      if (!isValidImageAsset && !isValidElement) {\n        return null\n      }\n\n      return function MediaPreview({dimensions}: {dimensions: PreviewMediaDimensions}) {\n        return isValidElement ? (\n          previewMedia\n        ) : (\n          <img\n            src={imageUrlBuilder({dataset, projectId})\n              .image(previewMedia as FIXME)\n              .withOptions(dimensions)\n              .url()}\n            alt=\"Image preview of referenced document\"\n            referrerPolicy=\"strict-origin-when-cross-origin\"\n          />\n        )\n      }\n    }\n    return refType?.icon ? createElement(refType.icon) : null\n  }, [previewMedia, dataset, projectId, refType?.icon])\n\n  return (\n    <StyledPreviewFlex align=\"center\" justify=\"center\" flex={1} data-testid=\"preview\">\n      {availability?.available ? (\n        <Box flex={1}>\n          <DefaultPreview\n            title={preview.published?.title}\n            subtitle={preview.published?.subtitle}\n            media={media || false}\n          />\n        </Box>\n      ) : (\n        <Box flex={1}>\n          <Flex align=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={4}>\n          {refType && showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title || refType.type}\n            </Label>\n          )}\n\n          {(insufficientPermissions || notFound) && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage>\n                      The referenced document no longer exist and might have been deleted.\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  {insufficientPermissions ? <AccessDeniedIcon /> : <HelpCircleIcon />}\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n\n          {!(notFound || insufficientPermissions) && showStudioUrlIcon && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  <TooltipContent padding={2}>\n                    {hasStudioUrl ? (\n                      <Text size={1}>This document opens in another Studio</Text>\n                    ) : (\n                      <Text size={1}>\n                        This document cannot be opened <br /> (unable to resolve URL to Studio)\n                      </Text>\n                    )}\n                  </TooltipContent>\n                }\n              >\n                <TextWithTone size={1} tone=\"default\" muted={!hasStudioUrl}>\n                  <LaunchIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n        </Inline>\n      </Box>\n    </StyledPreviewFlex>\n  )\n}\n","import {useClient} from '../../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\n\nexport function useProjectId(): string {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  return client.config().projectId as string\n}\n","/* eslint-disable max-nested-callbacks,no-nested-ternary */\nimport React from 'react'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\nimport {useProjectId} from './utils/useProjectId'\n\n/**\n * Used to preview a referenced type\n * Takes as props the referenced document, the reference type and a hook to subscribe to\n * in order to listen for the reference info\n */\nexport function OptionPreview(props: {\n  document: {_id: string; _type: string}\n  referenceType: CrossDatasetReferenceSchemaType\n  getReferenceInfo: (doc: {_id: string; _type?: string}) => Observable<CrossDatasetReferenceInfo>\n}) {\n  const {\n    isLoading,\n    result: referenceInfo,\n    error,\n  } = useReferenceInfo(props.document, props.getReferenceInfo)\n  const projectId = useProjectId()\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">Error: {error.message}</Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability?.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.referenceType.to.find((toEntry) => toEntry.type === referenceInfo.type)\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n  return (\n    referenceInfo &&\n    refType && (\n      <CrossDatasetReferencePreview\n        id={referenceInfo.id}\n        availability={referenceInfo.availability}\n        preview={referenceInfo.preview}\n        refType={refType}\n        dataset={props.referenceType.dataset}\n        projectId={projectId}\n        showTypeLabel={props.referenceType.to.length > 1}\n      />\n    )\n  )\n}\n","import React from 'react'\nimport {CrossDatasetReferenceValue, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Loadable} from './useReferenceInfo'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\nimport {useProjectId} from './utils/useProjectId'\n\nexport function PreviewReferenceValue(props: {\n  value: CrossDatasetReferenceValue\n  showStudioUrlIcon?: boolean\n  hasStudioUrl?: boolean\n  type: CrossDatasetReferenceSchemaType\n  referenceInfo: Loadable<CrossDatasetReferenceInfo>\n}) {\n  const {value, type, showStudioUrlIcon, hasStudioUrl, referenceInfo} = props\n  const projectId = useProjectId()\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated={!referenceInfo.error} />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated={!referenceInfo.error} />\n      </Stack>\n    )\n  }\n  const showTypeLabel = type.to.length > 1\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.type === refTypeName)\n\n  if (referenceInfo.result.availability?.available && !refType) {\n    return (\n      <Stack space={2} padding={2}>\n        <Text as=\"p\">\n          The referenced document is of invalid type: ({refTypeName || 'unknown'})\n          <pre>{JSON.stringify(value, null, 2)}</pre>\n        </Text>\n      </Stack>\n    )\n  }\n\n  return (\n    <CrossDatasetReferencePreview\n      availability={referenceInfo.result.availability}\n      hasStudioUrl={hasStudioUrl}\n      showStudioUrlIcon={showStudioUrlIcon}\n      preview={referenceInfo.result.preview}\n      refType={refType}\n      projectId={projectId}\n      dataset={type.dataset}\n      id={value._ref}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        data-testid=\"autocomplete-popover\"\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>{props.searchString}</strong>\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {CrossDatasetReferenceValue} from '@sanity/types'\n\ntype Props = {\n  value?: CrossDatasetReferenceValue\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function DisabledFeatureWarning({value, onClearValue}: Props) {\n  const hasRef = useMemo(() => Boolean(value?._ref), [value?._ref])\n\n  return (\n    <Card\n      tone=\"caution\"\n      padding={4}\n      border\n      radius={2}\n      data-testid=\"alert-cross-dataset-reference-feature-disabled\"\n    >\n      <Flex gap={4} marginBottom={hasRef ? 4 : undefined}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text as=\"h2\" size={1} weight=\"semibold\">\n            Unavailable feature: Cross dataset reference\n          </Text>\n          {hasRef && (\n            <Stack space={3}>\n              <Text as=\"p\" size={1}>\n                This feature has been disabled. Read how to enable it in{' '}\n                <a\n                  href=\"https://www.sanity.io/docs/cross-dataset-references\"\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  documentation\n                </a>\n              </Text>\n              <Text as=\"p\" size={1}>\n                You can still clear this field's existing reference, but that cannot be revoked as\n                long as the feature is disabled.\n              </Text>\n            </Stack>\n          )}\n          {!hasRef && (\n            <Text as=\"p\" size={1}>\n              Read how to enable it in{' '}\n              <a\n                href=\"https://www.sanity.io/docs/cross-dataset-references\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                documentation\n              </a>\n            </Text>\n          )}\n        </Stack>\n      </Flex>\n      {onClearValue && hasRef && (\n        <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n      )}\n    </Card>\n  )\n}\n","import {catchError, map, shareReplay, startWith} from 'rxjs/operators'\nimport {Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {useMemoObservable} from 'react-rx'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\ninterface Features {\n  isLoading: boolean\n  enabled: boolean\n  features: string[]\n}\n\nconst INITIAL_LOADING_STATE: Features = {\n  isLoading: true,\n  enabled: true,\n  features: [],\n}\n\n/**\n * fetches all the enabled features for this project\n */\nfunction fetchFeatures({versionedClient}: {versionedClient: SanityClient}): Observable<string[]> {\n  return versionedClient.observable.request<string[]>({\n    uri: `/features`,\n    tag: 'features',\n  })\n}\n\nlet cachedFeatureRequest: Observable<string[]>\n\nexport function useFeatureEnabled(featureKey: string): Features {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  if (!cachedFeatureRequest) {\n    cachedFeatureRequest = fetchFeatures({versionedClient}).pipe(shareReplay())\n  }\n\n  const featureInfo = useMemoObservable(\n    () =>\n      cachedFeatureRequest.pipe(\n        map((features = []) => ({\n          isLoading: false,\n          enabled: Boolean(features?.includes(featureKey)),\n          features,\n        })),\n        startWith(INITIAL_LOADING_STATE),\n        catchError((err: Error) => {\n          console.error(err)\n          return of({isLoading: false, enabled: true, features: []})\n        })\n      ),\n    [featureKey],\n    INITIAL_LOADING_STATE\n  )\n\n  return featureInfo\n}\n","/* eslint-disable complexity, max-nested-callbacks, no-nested-ternary */\n\nimport React, {useCallback, useMemo, useRef, useState, useId} from 'react'\nimport {CrossDatasetReferenceValue, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {EllipsisVerticalIcon, ResetIcon as ClearIcon, SyncIcon as ReplaceIcon} from '@sanity/icons'\nimport {concat, Observable, of} from 'rxjs'\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Stack,\n  Text,\n  useToast,\n} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {FOCUS_TERMINATOR} from '@sanity/util/paths'\nimport {ObjectInputProps} from '../../types'\nimport {set, unset} from '../../patch'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {useOnClickOutside} from '../../hooks/useOnClickOutside'\nimport {getPublishedId, isNonNullable} from '../../../util'\nimport {FIXME} from '../../../FIXME'\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {PreviewCard} from '../../../components'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {CrossDatasetReferenceInfo, CrossDatasetSearchHit, SearchState} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {GetReferenceInfoFn, useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {DisabledFeatureWarning} from './DisabledFeatureWarning'\nimport {useFeatureEnabled} from './useFeatureEnabled'\nimport {useProjectId} from './utils/useProjectId'\n\nconst INITIAL_SEARCH_STATE: SearchState = {\n  hits: [],\n  isLoading: false,\n}\n\n/** @internal */\nexport interface CrossDatasetReferenceInputProps\n  extends ObjectInputProps<CrossDatasetReferenceValue, CrossDatasetReferenceSchemaType> {\n  getReferenceInfo: (\n    doc: {_id: string; _type?: string},\n    type: CrossDatasetReferenceSchemaType\n  ) => Observable<CrossDatasetReferenceInfo>\n  onSearch: (query: string) => Observable<CrossDatasetSearchHit[]>\n}\n\nconst NO_FILTER = () => true\n\nconst REF_PATH = ['_ref']\nconst CROSS_DATASET_FEATUREKEY = 'crossDatasetReferences'\n\n/** @internal */\nexport function CrossDatasetReferenceInput(props: CrossDatasetReferenceInputProps) {\n  const {\n    changed,\n    focused,\n    focusPath,\n    getReferenceInfo,\n    onChange,\n    onPathFocus,\n    onSearch,\n    path,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n    elementProps,\n  } = props\n\n  const projectId = useProjectId()\n\n  const [searchState, setSearchState] = useState<SearchState>(INITIAL_SEARCH_STATE)\n\n  const handleChange = useCallback(\n    (id: string) => {\n      if (!id) {\n        onChange(unset())\n        onPathFocus([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === id)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n\n      onChange(\n        set({\n          _type: schemaType.name,\n          _ref: getPublishedId(id),\n          _projectId: projectId,\n          _dataset: schemaType.dataset,\n          _weak: schemaType.weak,\n          // persist _key between mutations if the value is in an array\n          _key: value?._key,\n        })\n      )\n\n      onPathFocus([])\n    },\n    [\n      value?._key,\n      searchState.hits,\n      schemaType.name,\n      schemaType.dataset,\n      schemaType.weak,\n      projectId,\n      onChange,\n      onPathFocus,\n    ]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event: any) => {\n      // escape\n      if (event.keyCode === 27) {\n        onPathFocus?.([])\n      }\n    },\n    [onPathFocus]\n  )\n\n  const getReferenceInfoMemo: GetReferenceInfoFn = useCallback(\n    (doc) => getReferenceInfo(doc, schemaType),\n    [getReferenceInfo, schemaType]\n  )\n\n  const refDoc = useMemo(() => ({_id: value?._ref}), [value?._ref])\n\n  const loadableReferenceInfo = useReferenceInfo(refDoc as FIXME, getReferenceInfoMemo)\n  const featureInfo = useFeatureEnabled(CROSS_DATASET_FEATUREKEY)\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const hasFocusAtRef = focusPath.length === 1 && focusPath[0] === '_ref'\n\n  // --- focus handling\n  const focusElementRef = elementProps.ref\n  useDidUpdate({hasFocusAt: hasFocusAtRef, ref: value?._ref}, (prev, current) => {\n    const refUpdated = prev?.ref !== current.ref\n    const focusAtUpdated = prev?.hasFocusAt !== current.hasFocusAt\n\n    if ((focusAtUpdated || refUpdated) && current.hasFocusAt) {\n      // if search mode changed and we're having focus always ensure the\n      // ref element gets focus\n      focusElementRef.current?.focus()\n    }\n  })\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  const hasRef = Boolean(value?._ref)\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const {push} = useToast()\n\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const handleFocus = useCallback(\n    (event: FIXME) => {\n      if (event.currentTarget === elementProps.ref.current) {\n        onPathFocus?.([FOCUS_TERMINATOR])\n      }\n    },\n    [elementProps.ref, onPathFocus]\n  )\n\n  const handleAutocompleteFocus = useCallback(\n    (event: FIXME) => {\n      if (event.currentTarget === elementProps.ref.current) {\n        onPathFocus?.(REF_PATH)\n      }\n    },\n    [elementProps.ref, onPathFocus]\n  )\n  const handleReplace = useCallback(() => {\n    onPathFocus?.(REF_PATH)\n  }, [onPathFocus])\n\n  const inputId = useId()\n\n  const handleQueryChange = useObservableCallback(\n    (inputValue$: Observable<string | null>) => {\n      return inputValue$.pipe(\n        filter(isNonNullable),\n        distinctUntilChanged(),\n        switchMap((searchString) =>\n          concat(\n            of({isLoading: true}),\n            onSearch(searchString).pipe(\n              map((hits) => ({hits, searchString, isLoading: false})),\n              catchError((error) => {\n                push({\n                  title: 'Reference search failed',\n                  description: error.message,\n                  status: 'error',\n                  id: `reference-search-fail-${inputId}`,\n                })\n\n                console.error(error)\n                return of({hits: []})\n              })\n            )\n          )\n        ),\n\n        scan(\n          (prevState, nextState): SearchState => ({...prevState, ...nextState}),\n          INITIAL_SEARCH_STATE\n        ),\n\n        tap(setSearchState)\n      )\n    },\n    // @todo: add onSearch to the deps list when it's verified that it's safe to do so\n    [inputId, push]\n  )\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const showWeakRefMismatch = !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe\n\n  const studioUrl =\n    (value?._ref &&\n      schemaType.studioUrl?.({\n        id: value?._ref,\n        type: loadableReferenceInfo?.result?.type,\n      })) ||\n    null\n\n  const renderOption = useCallback(\n    (option: any) => {\n      return (\n        <PreviewCard as=\"button\" type=\"button\" radius={2}>\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              referenceType={schemaType}\n              document={option.hit.published}\n              getReferenceInfo={getReferenceInfoMemo}\n            />\n          </Box>\n        </PreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfoMemo]\n  )\n\n  const preview = loadableReferenceInfo.result?.preview.published\n\n  const isEditing = hasFocusAtRef || !value?._ref\n\n  // --- click outside handling\n  const clickOutsideBoundaryRef = useRef<HTMLDivElement | null>(null)\n  const autocompletePortalRef = useRef<HTMLDivElement | null>(null)\n  const createButtonMenuPortalRef = useRef<HTMLDivElement | null>(null)\n  useOnClickOutside(\n    [clickOutsideBoundaryRef, autocompletePortalRef, createButtonMenuPortalRef],\n    () => {\n      if (hasFocusAtRef) {\n        onPathFocus([])\n      }\n    }\n  )\n\n  return (\n    <>\n      {!featureInfo.isLoading && !featureInfo.enabled && (\n        <DisabledFeatureWarning value={value} onClearValue={handleClear} />\n      )}\n      {(featureInfo.isLoading || featureInfo.enabled) && (\n        <Stack space={1}>\n          {isEditing ? (\n            <Stack space={2} ref={clickOutsideBoundaryRef}>\n              <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n                <div ref={autocompletePopoverReferenceElementRef}>\n                  <ReferenceAutocomplete\n                    {...elementProps}\n                    data-testid=\"autocomplete\"\n                    loading={searchState.isLoading}\n                    referenceElement={autocompletePopoverReferenceElementRef.current}\n                    portalRef={autocompletePortalRef}\n                    id={inputId || ''}\n                    options={searchState.hits.map((hit) => ({\n                      value: hit.id,\n                      hit: hit,\n                    }))}\n                    onFocus={handleAutocompleteFocus}\n                    radius={1}\n                    placeholder=\"Type to search\"\n                    onKeyDown={handleAutocompleteKeyDown}\n                    readOnly={readOnly}\n                    disabled={loadableReferenceInfo.isLoading}\n                    onQueryChange={handleQueryChange}\n                    searchString={searchState.searchString}\n                    onChange={handleChange}\n                    filterOption={NO_FILTER}\n                    renderOption={renderOption}\n                    openButton={{onClick: handleAutocompleteOpenButtonClick}}\n                  />\n                </div>\n              </ChangeIndicator>\n            </Stack>\n          ) : (\n            <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n              <Card\n                padding={0}\n                border\n                flex={1}\n                radius={1}\n                tone={\n                  readOnly\n                    ? 'transparent'\n                    : loadableReferenceInfo.error || errors.length > 0\n                    ? 'critical'\n                    : 'default'\n                }\n              >\n                <Flex align=\"center\" padding={1}>\n                  {studioUrl ? (\n                    <PreviewCard\n                      as=\"a\"\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href={studioUrl}\n                      data-as=\"a\"\n                      flex={1}\n                      padding={1}\n                      paddingRight={3}\n                      radius={2}\n                      tone=\"inherit\"\n                      __unstable_focusRing\n                      tabIndex={0}\n                      onFocus={handleFocus}\n                      ref={elementProps.ref}\n                    >\n                      <PreviewReferenceValue\n                        value={value}\n                        referenceInfo={loadableReferenceInfo}\n                        showStudioUrlIcon\n                        hasStudioUrl={!!studioUrl}\n                        type={schemaType}\n                      />\n                    </PreviewCard>\n                  ) : (\n                    <PreviewCard\n                      flex={1}\n                      padding={1}\n                      paddingRight={3}\n                      radius={2}\n                      tone=\"inherit\"\n                      __unstable_focusRing\n                      tabIndex={0}\n                      onFocus={handleFocus}\n                      ref={elementProps.ref}\n                    >\n                      <PreviewReferenceValue\n                        value={value}\n                        referenceInfo={loadableReferenceInfo}\n                        showStudioUrlIcon\n                        type={schemaType}\n                      />\n                    </PreviewCard>\n                  )}\n\n                  <Inline paddingX={1}>\n                    <MenuButton\n                      button={\n                        <Button\n                          padding={2}\n                          mode=\"bleed\"\n                          icon={EllipsisVerticalIcon}\n                          data-testid=\"menu-button\"\n                        />\n                      }\n                      id={`${inputId}-menuButton`}\n                      menu={\n                        <Menu>\n                          {!readOnly && (\n                            <>\n                              <MenuItem\n                                text=\"Clear\"\n                                tone=\"critical\"\n                                icon={ClearIcon}\n                                data-testid=\"menu-item-clear\"\n                                onClick={handleClear}\n                              />\n\n                              <MenuItem\n                                text=\"Replace\"\n                                icon={ReplaceIcon}\n                                data-testid=\"menu-item-replace\"\n                                onClick={handleReplace}\n                              />\n                            </>\n                          )}\n                        </Menu>\n                      }\n                      placement=\"right\"\n                      popover={{portal: true, tone: 'default'}}\n                    />\n                  </Inline>\n                </Flex>\n                {showWeakRefMismatch && (\n                  <AlertStrip\n                    padding={1}\n                    title=\"Reference strength mismatch\"\n                    status=\"warning\"\n                    data-testid=\"alert-reference-strength-mismatch\"\n                  >\n                    <Stack space={3}>\n                      <Text as=\"p\" muted size={1}>\n                        This reference is <em>{weakIs}</em>, but according to the current schema it\n                        should be <em>{weakShouldBe}.</em>\n                      </Text>\n\n                      <Text as=\"p\" muted size={1}>\n                        {schemaType.weak ? (\n                          <>\n                            It will not be possible to delete the \"{preview?.title}\"-document\n                            without first removing this reference.\n                          </>\n                        ) : (\n                          <>\n                            This makes it possible to delete the \"{preview?.title}\"-document without\n                            first deleting this reference, leaving this field referencing a\n                            nonexisting document.\n                          </>\n                        )}\n                      </Text>\n                      <Button\n                        onClick={handleFixStrengthMismatch}\n                        text={<>Convert to {weakShouldBe} reference</>}\n                        tone=\"caution\"\n                      />\n                    </Stack>\n                  </AlertStrip>\n                )}\n\n                {loadableReferenceInfo.error && (\n                  <AlertStrip\n                    padding={1}\n                    title=\"Unable to load reference metadata\"\n                    status=\"warning\"\n                    data-testid=\"alert-reference-info-failed\"\n                  >\n                    <Stack space={3}>\n                      <Text as=\"p\" muted size={1}>\n                        Error: {loadableReferenceInfo.error.message}\n                      </Text>\n                      <Button\n                        onClick={loadableReferenceInfo.retry!}\n                        text={<>Retry</>}\n                        tone=\"primary\"\n                      />\n                    </Stack>\n                  </AlertStrip>\n                )}\n              </Card>\n            </ChangeIndicator>\n          )}\n        </Stack>\n      )}\n    </>\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {CrossDatasetReferenceSchemaType, ReferenceFilterSearchOptions} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {createWeightedSearch} from '../../../../../search'\nimport {collate} from '../../../../../util'\n\ninterface SearchHit {\n  id: string\n  type: string\n  published: undefined | {_id: string; _type: string}\n}\n\nexport function search(\n  client: SanityClient,\n  textTerm: string,\n  type: CrossDatasetReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<SearchHit[]> {\n  const searchWeighted = createWeightedSearch(\n    type.to.map((crossDatasetType) => ({\n      name: crossDatasetType.type,\n      // eslint-disable-next-line camelcase\n      __experimental_search: crossDatasetType.__experimental_search,\n    })),\n\n    client,\n    options\n  )\n\n  return searchWeighted(textTerm, {includeDrafts: false}).pipe(\n    // pick the 100 best matches\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    map((collated) =>\n      collated.map((entry) => ({\n        id: entry.id,\n        type: entry.type,\n        published: entry.published,\n      }))\n    )\n  )\n}\n","import {map, switchMap} from 'rxjs/operators'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {keyBy} from 'lodash'\nimport {CrossDatasetReferenceInfo} from '../../../../inputs/CrossDatasetReferenceInput/types'\nimport {\n  DocumentAvailability,\n  DocumentPreviewStore,\n  getPreviewPaths,\n  prepareForPreview,\n  Previewable,\n} from '../../../../../preview'\nimport {FIXME} from '../../../../../FIXME'\nimport {isRecord} from '../../../../../util'\n\nconst REQUEST_TAG_BASE = 'cross-dataset-refs'\n\nconst AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes a client instance and returns a function that can be called to retrieve reference information\n */\nexport function createGetReferenceInfo(context: {\n  client: SanityClient\n  documentPreviewStore: DocumentPreviewStore\n}) {\n  const {client, documentPreviewStore} = context\n  const {dataset, projectId} = client.config()\n  const apiConfig = dataset && projectId ? {dataset, projectId} : undefined\n\n  /**\n   * Takes an id and a reference schema type, returns metadata about it\n   * Assumption: _id is always published id\n   */\n  return function getReferenceInfo(\n    doc: {_id: string; _type?: string}, // pass {_id, _type} instead and we can skip the `fetchType`\n    referenceType: CrossDatasetReferenceSchemaType\n  ): Observable<CrossDatasetReferenceInfo> {\n    return (\n      doc._type\n        ? of(doc)\n        : documentPreviewStore\n            .observeDocumentTypeFromId(doc._id, apiConfig)\n            .pipe(map((docType): {_id: string; _type?: string} => ({_id: doc._id, _type: docType})))\n    ).pipe(\n      switchMap((resolvedDoc) => {\n        if (!resolvedDoc._type) {\n          // we still can't read the type of the referenced document. This may be due to either 1) lack of access 2) lack of existence\n          // we want to display a reason to the end user, so we're fetching metadata about it\n          return fetchDocumentAvailability(client, doc._id).pipe(\n            map((availability) => ({\n              id: doc._id,\n              type: undefined,\n              availability,\n              preview: {published: undefined},\n            }))\n          )\n        }\n        const refSchemaType = referenceType.to.find(\n          (candidate) => candidate.type === resolvedDoc._type\n        )\n\n        const previewPaths = [\n          ...(getPreviewPaths(refSchemaType?.preview) || []),\n          ['_updatedAt'],\n          ['_createdAt'],\n        ]\n\n        const publishedPreview$ = documentPreviewStore\n          .observePaths(doc as Previewable, previewPaths, apiConfig)\n          .pipe(\n            map((result) => (result ? prepareForPreview(result, refSchemaType as FIXME) : result))\n          )\n\n        return combineLatest([publishedPreview$]).pipe(\n          map(([publishedPreview]) => {\n            return {\n              type: resolvedDoc._type,\n              id: doc._id,\n              availability: AVAILABILITY_READABLE,\n              preview: {\n                published: isRecord(publishedPreview) ? publishedPreview : undefined,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n\nfunction fetchDocumentAvailability(\n  client: SanityClient,\n  id: string\n): Observable<DocumentAvailability | null> {\n  const requestOptions = {\n    uri: client.getDataUrl('doc', id),\n    json: true,\n    query: {excludeContent: 'true'},\n    tag: `${REQUEST_TAG_BASE}.availability`,\n  }\n\n  return client.observable.request(requestOptions).pipe(\n    map((response) => {\n      const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n      const omittedEntry = omitted[id]\n      if (!omittedEntry) {\n        // it's not omitted, so it exists and is readable\n        return AVAILABILITY_READABLE\n      }\n      // omitted because it doesn't exist\n      if (omittedEntry.reason === 'existence') {\n        return AVAILABILITY_NOT_FOUND\n      }\n      if (omittedEntry.reason === 'permission') {\n        // omitted because it's not readable\n        return AVAILABILITY_PERMISSION_DENIED\n      }\n      return null\n    })\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {\n  CrossDatasetReferenceValue,\n  CrossDatasetReferenceSchemaType,\n  Path,\n  ReferenceFilterOptions,\n  ReferenceFilterSearchOptions,\n  SanityDocument,\n} from '@sanity/types'\nimport {get} from '@sanity/util/paths'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {CrossDatasetReferenceInput} from '../../../inputs/CrossDatasetReferenceInput'\nimport {useClient} from '../../../../hooks'\nimport {ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\nimport {useDocumentPreviewStore} from '../../../../store'\nimport {FIXME} from '../../../../FIXME'\nimport {search} from './datastores/search'\nimport {createGetReferenceInfo} from './datastores/getReferenceInfo'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceFilterOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\n/**\n * @beta\n */\nexport type StudioCrossDatasetReferenceInputProps = ObjectInputProps<\n  CrossDatasetReferenceValue,\n  CrossDatasetReferenceSchemaType\n>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\n/**\n * @beta\n */\nexport function StudioCrossDatasetReferenceInput(props: StudioCrossDatasetReferenceInputProps) {\n  const {path, schemaType} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const crossDatasetClient = useMemo(() => {\n    return (\n      client\n        .withConfig({\n          dataset: schemaType.dataset,\n          apiVersion: '2022-03-07',\n          ignoreBrowserTokenWarning: true,\n        })\n\n        // seems like this is required to prevent this client from sometimes magically get mutated with a new projectId and dataset\n        .clone()\n    )\n  }, [client, schemaType.dataset])\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          search(crossDatasetClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.cross-dataset-reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [crossDatasetClient, documentRef, path, schemaType]\n  )\n\n  const getReferenceInfo = useMemo(\n    () => createGetReferenceInfo({client: crossDatasetClient, documentPreviewStore}),\n    [crossDatasetClient, documentPreviewStore]\n  )\n\n  return (\n    <CrossDatasetReferenceInput\n      {...props}\n      getReferenceInfo={getReferenceInfo}\n      onSearch={handleSearch}\n    />\n  )\n}\n","import React from 'react'\nimport {BooleanInput} from '../../inputs/BooleanInput'\nimport {EmailInput} from '../../inputs/EmailInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {ObjectInput} from '../../inputs/ObjectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {DateTimeInput, DateInput} from '../../inputs/DateInputs'\nimport {TextInput} from '../../inputs/TextInput'\nimport {UrlInput} from '../../inputs/UrlInput'\nimport {SlugInput} from '../../inputs/Slug/SlugInput'\nimport {StudioImageInput} from '../inputs/StudioImageInput'\nimport {StudioFileInput} from '../inputs/StudioFileInput'\nimport {StudioCrossDatasetReferenceInput} from '../inputs/crossDatasetReference/StudioCrossDatasetReferenceInput'\nimport {UniversalArrayInput} from '../../inputs/arrays/UniversalArrayInput'\nimport {FIXME} from '../../../FIXME'\n\nexport const defaultInputs: Record<string, React.ComponentType<FIXME>> = {\n  document: ObjectInput,\n  object: ObjectInput,\n  array: UniversalArrayInput,\n  boolean: BooleanInput,\n  number: NumberInput,\n  text: TextInput,\n  email: EmailInput,\n  datetime: DateTimeInput,\n  date: DateInput,\n  url: UrlInput,\n  image: StudioImageInput,\n  file: StudioFileInput,\n  string: StringInput,\n  slug: SlugInput,\n  crossDatasetReference: StudioCrossDatasetReferenceInput,\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {ArraySchemaType, NumberSchemaType, SchemaType, StringSchemaType} from '@sanity/types'\nimport React from 'react'\nimport {InputProps} from '../../types'\nimport * as is from '../../utils/is'\nimport {PreviewProps} from '../../../components'\nimport {SanityPreview} from '../../../preview'\nimport {FIXME} from '../../../FIXME'\nimport {StudioReferenceInput} from '../inputs/reference/StudioReferenceInput'\nimport {resolveArrayInput} from './resolveArrayInput'\nimport {resolveStringInput} from './resolveStringInput'\nimport {resolveNumberInput} from './resolveNumberInput'\nimport {defaultInputs} from './defaultInputs'\nimport {getTypeChain} from './helpers'\n\nfunction resolveComponentFromTypeVariants(\n  type: SchemaType\n): React.ComponentType<FIXME> | undefined {\n  if (is.type('array', type)) {\n    return resolveArrayInput(type as ArraySchemaType)\n  }\n\n  if (is.type('reference', type)) {\n    return StudioReferenceInput\n  }\n\n  // String input with a select\n  if (is.type('string', type)) {\n    return resolveStringInput(type as StringSchemaType)\n  }\n\n  if (is.type('number', type)) {\n    return resolveNumberInput(type as NumberSchemaType)\n  }\n\n  return undefined\n}\n\nexport function defaultResolveInputComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<InputProps, 'renderDefault'>> {\n  if (schemaType.components?.input) return schemaType.components.input\n\n  const componentFromTypeVariants = resolveComponentFromTypeVariants(schemaType)\n  if (componentFromTypeVariants) {\n    return componentFromTypeVariants\n  }\n\n  const typeChain = getTypeChain(schemaType, new Set())\n  const deduped = typeChain.reduce((acc, type) => {\n    acc[type.name] = type\n    return acc\n  }, {} as Record<string, SchemaType>)\n\n  // using an object + Object.values to de-dupe the type chain by type name\n  const subType = Object.values(deduped).find((t) => defaultInputs[t.name])\n\n  if (subType) {\n    return defaultInputs[subType.name]\n  }\n\n  throw new Error(`Could not find input component for schema type \\`${schemaType.name}\\``)\n}\n\nexport function defaultResolvePreviewComponent(): React.ComponentType<\n  Omit<PreviewProps, 'renderDefault'>\n> {\n  return SanityPreview as any\n}\n","import React from 'react'\nimport {Reference, ReferenceSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Stack} from '@sanity/ui'\nimport {RenderPreviewCallback} from '../../types'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {PreviewProps} from '../../../components'\nimport {ReferencePreview} from './ReferencePreview'\nimport {Loadable} from './useReferenceInfo'\nimport {ReferenceInfo} from './types'\n\nexport function PreviewReferenceValue(props: {\n  referenceInfo: Loadable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n  type: ReferenceSchemaType\n  value: Reference\n  showTypeLabel?: boolean\n}) {\n  const {referenceInfo, renderPreview, type, value, showTypeLabel} = props\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return <SanityDefaultPreview isPlaceholder />\n  }\n\n  if (referenceInfo.result?.availability.reason === 'NOT_FOUND' && value._strengthenOnPublish) {\n    const refType = type.to.find((toType) => toType.name === value?._strengthenOnPublish?.type)\n    if (!refType) {\n      return <div>Invalid reference type</div>\n    }\n    if (value._strengthenOnPublish) {\n      const stub = value._strengthenOnPublish?.type\n        ? {\n            _id: value._ref,\n            _type: value._strengthenOnPublish?.type,\n          }\n        : value\n\n      const previewProps: Omit<PreviewProps, 'renderDefault'> = {\n        layout: 'default',\n        schemaType: refType,\n        value: stub,\n      }\n\n      return (\n        <Flex align=\"center\">\n          <Box flex={1}>{renderPreview(previewProps)}</Box>\n          <Box>\n            <Inline space={4}>\n              {showTypeLabel && (\n                <Label size={1} muted>\n                  {refType.title}\n                </Label>\n              )}\n            </Inline>\n          </Box>\n        </Flex>\n      )\n    }\n  }\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.name === refTypeName)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={2}>\n        The referenced document is of invalid type: ({refTypeName || 'unknown'})\n        <pre>{JSON.stringify(value, null, 2)}</pre>\n      </Stack>\n    )\n  }\n\n  return (\n    <ReferencePreview\n      availability={referenceInfo.result?.availability}\n      id={value._ref}\n      layout=\"default\"\n      preview={referenceInfo.result?.preview}\n      refType={refType}\n      renderPreview={renderPreview}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","import {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Spinner,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {Reference, ReferenceSchemaType, SchemaType} from '@sanity/types'\nimport {\n  CloseIcon,\n  CopyIcon as DuplicateIcon,\n  EllipsisVerticalIcon,\n  LaunchIcon as OpenInNewTabIcon,\n  SyncIcon as ReplaceIcon,\n  TrashIcon,\n} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {ObjectItem, ObjectItemProps} from '../../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {randomKey} from '../../utils/randomKey'\nimport {FormFieldSet, FormFieldValidationStatus} from '../../components/formField'\nimport {FieldPresence} from '../../../presence'\n\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {RowLayout} from '../arrays/layouts/RowLayout'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {set, unset} from '../../patch'\nimport {createProtoArrayValue} from '../arrays/ArrayOfObjectsInput/createProtoArrayValue'\nimport {InsertMenu} from '../arrays/ArrayOfObjectsInput/InsertMenu'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {useReferenceInput} from './useReferenceInput'\n\nexport interface ReferenceItemValue extends Omit<ObjectItem, '_type'>, Omit<Reference, '_key'> {}\n\ninterface ReferenceItemProps<Item extends ReferenceItemValue>\n  extends Omit<ObjectItemProps<ReferenceItemValue>, 'renderDefault'> {\n  value: Item\n  schemaType: ReferenceSchemaType\n}\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\nconst INITIAL_VALUE_CARD_STYLE = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  opacity: 0.6,\n} as const\n\nexport const ReferencePreviewCard = styled(Card)`\n  /* this is a hack to avoid layout jumps while previews are loading\n     there's probably better ways of solving this */\n  min-height: 35px;\n\n  /* TextWithTone uses its own logic to set color, and we therefore need */\n  /* to override this logic in order to set the correct color in different states */\n  &[data-selected],\n  &[data-pressed],\n  &:active {\n    [data-ui='TextWithTone'] {\n      color: inherit;\n    }\n  }\n`\n\nexport function ReferenceItem<Item extends ReferenceItemValue = ReferenceItemValue>(\n  props: ReferenceItemProps<Item>\n) {\n  const {\n    schemaType,\n    parentSchemaType,\n    path,\n    readOnly,\n    onRemove,\n    value,\n    open,\n    onInsert,\n    onFocus,\n    presence,\n    validation,\n    inputId,\n    changed,\n    focused,\n    children,\n    inputProps: {onChange, focusPath, onPathFocus, renderPreview, elementProps},\n  } = props\n\n  const sortable = parentSchemaType.options?.sortable !== false\n  const insertableTypes = parentSchemaType.of\n\n  const elementRef = useRef<HTMLDivElement | null>(null)\n\n  const {EditReferenceLink, getReferenceInfo, selectedState, isCurrentDocumentLiveEdit} =\n    useReferenceInput({\n      path,\n      schemaType,\n      value,\n    })\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(elementRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && elementRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      elementRef.current?.focus()\n    }\n  })\n\n  const hasErrors = props.validation.some((v) => v.level === 'error')\n  const hasWarnings = props.validation.some((v) => v.level === 'warning')\n  const resolvingInitialValue = (value as any)._resolvingInitialValue\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [{...createProtoArrayValue(insertType), _key: randomKey()}],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfo)\n\n  const hasRef = value._ref\n  const refTypeName = loadableReferenceInfo.result?.type || value?._strengthenOnPublish?.type\n  const publishedReferenceExists = hasRef && loadableReferenceInfo.result?.preview?.published?._id\n\n  const handleRemoveStrengthenOnPublish = useCallback(() => {\n    onChange([\n      schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']),\n      unset(['_strengthenOnPublish']),\n    ])\n  }, [onChange, schemaType.weak])\n\n  const refType = refTypeName\n    ? schemaType.to.find((toType) => toType.name === refTypeName)\n    : undefined\n  const pressed = selectedState === 'pressed'\n  const selected = selectedState === 'selected'\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n  const isEditing = !hasRef || focusPath[0] === '_ref'\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <Box marginLeft={1}>\n          <MenuButton\n            button={<Button paddingY={3} paddingX={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n            id={`${inputId}-menuButton`}\n            menu={\n              <Menu>\n                {!readOnly && (\n                  <>\n                    <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n                    <MenuItem\n                      text={hasRef && isEditing ? 'Cancel replace' : 'Replace'}\n                      icon={hasRef && isEditing ? CloseIcon : ReplaceIcon}\n                      onClick={\n                        hasRef && isEditing ? () => onPathFocus([]) : () => onPathFocus(['_ref'])\n                      }\n                    />\n                    <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                    <InsertMenu onInsert={handleInsert} types={insertableTypes} />\n                  </>\n                )}\n\n                {!readOnly && !isEditing && hasRef && <MenuDivider />}\n                {!isEditing && hasRef && (\n                  <MenuItem\n                    as={EditReferenceLink}\n                    data-as=\"a\"\n                    text=\"Open in new tab\"\n                    icon={OpenInNewTabIcon}\n                  />\n                )}\n              </Menu>\n            }\n            popover={MENU_POPOVER_PROPS}\n          />\n        </Box>\n      ),\n    [\n      readOnly,\n      inputId,\n      onRemove,\n      hasRef,\n      isEditing,\n      handleDuplicate,\n      handleInsert,\n      insertableTypes,\n      EditReferenceLink,\n      onPathFocus,\n    ]\n  )\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  // If the reference value is marked with _strengthenOnPublish,\n  // we allow weak references if the reference points to a document that has a draft but not a published\n  // In all other cases we should display a \"weak mismatch\" warning\n  const weakWarningOverride =\n    hasRef && !loadableReferenceInfo.isLoading && value?._strengthenOnPublish\n\n  const showWeakRefMismatch =\n    !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe && !weakWarningOverride\n\n  const preview =\n    loadableReferenceInfo.result?.preview.draft || loadableReferenceInfo.result?.preview.published\n\n  const issues = (\n    <>\n      {isCurrentDocumentLiveEdit && publishedReferenceExists && value._strengthenOnPublish && (\n        <AlertStrip\n          padding={1}\n          title={schemaType.weak ? 'Finalize reference' : 'Convert to strong reference'}\n          status=\"info\"\n          data-testid=\"alert-reference-published\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              <strong>{loadableReferenceInfo.result?.preview.published?.title}</strong> is published\n              and this reference should now be{' '}\n              {schemaType.weak ? <>finalized</> : <>converted to a strong reference</>}.\n            </Text>\n            <Button\n              onClick={handleRemoveStrengthenOnPublish}\n              text={<>Convert to strong reference</>}\n              tone=\"positive\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {showWeakRefMismatch && (\n        <AlertStrip\n          padding={1}\n          title=\"Reference strength mismatch\"\n          status=\"warning\"\n          data-testid=\"alert-reference-strength-mismatch\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This reference is <em>{weakIs}</em>, but according to the current schema it should be{' '}\n              <em>{weakShouldBe}.</em>\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              {schemaType.weak ? (\n                <>\n                  It will not be possible to delete the \"{preview?.title}\"-document without first\n                  removing this reference.\n                </>\n              ) : (\n                <>\n                  This makes it possible to delete the \"{preview?.title}\"-document without first\n                  deleting this reference, leaving this field referencing a nonexisting document.\n                </>\n              )}\n            </Text>\n            <Button\n              onClick={handleFixStrengthMismatch}\n              text={<>Convert to {weakShouldBe} reference</>}\n              tone=\"caution\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {loadableReferenceInfo.error && (\n        <AlertStrip\n          padding={1}\n          title=\"Unable to load reference metadata\"\n          status=\"warning\"\n          data-testid=\"alert-reference-info-failed\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              Error: {loadableReferenceInfo.error.message}\n            </Text>\n            <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n          </Stack>\n        </AlertStrip>\n      )}\n    </>\n  )\n\n  const item = (\n    <RowLayout\n      dragHandle={sortable}\n      presence={\n        !isEditing && presence.length > 0 && <FieldPresence presence={presence} maxAvatars={1} />\n      }\n      validation={\n        !isEditing && validation.length > 0 && <FormFieldValidationStatus validation={validation} />\n      }\n      menu={menu}\n      footer={isEditing ? undefined : issues}\n      tone={isEditing ? undefined : tone}\n      focused={focused}\n    >\n      {isEditing ? (\n        <Box padding={1}>\n          <FormFieldSet\n            title={schemaType.title}\n            description={schemaType.description}\n            __unstable_presence={presence}\n            validation={validation}\n          >\n            {children}\n          </FormFieldSet>\n        </Box>\n      ) : (\n        <ReferencePreviewCard\n          forwardedAs={EditReferenceLink as any}\n          tone=\"inherit\"\n          radius={2}\n          data-as=\"a\"\n          documentId={value?._ref}\n          documentType={refType?.name}\n          disabled={resolvingInitialValue}\n          paddingX={2}\n          paddingY={1}\n          __unstable_focusRing\n          style={{position: 'relative'}}\n          selected={selected}\n          pressed={pressed}\n          data-selected={selected ? true : undefined}\n          data-pressed={pressed ? true : undefined}\n          {...elementProps}\n        >\n          <PreviewReferenceValue\n            value={value}\n            referenceInfo={loadableReferenceInfo}\n            renderPreview={renderPreview}\n            type={schemaType}\n          />\n          {resolvingInitialValue && (\n            <Card\n              style={INITIAL_VALUE_CARD_STYLE}\n              tone=\"transparent\"\n              radius={2}\n              as={Flex}\n              // @ts-expect-error composed from as={Flex}\n              justify=\"center\"\n            >\n              <Flex align=\"center\" justify=\"center\" padding={3}>\n                <Box marginX={3}>\n                  <Spinner muted />\n                </Box>\n                <Text>Resolving initial value</Text>\n              </Flex>\n            </Card>\n          )}\n        </ReferencePreviewCard>\n      )}\n    </RowLayout>\n  )\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={Boolean(focused)}>\n      <Box paddingX={1}>{item}</Box>\n    </ChangeIndicator>\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Reference, ReferenceSchemaType} from '@sanity/types'\nimport {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport {\n  CloseIcon,\n  EllipsisVerticalIcon,\n  LaunchIcon as OpenInNewTabIcon,\n  SyncIcon as ReplaceIcon,\n  TrashIcon,\n} from '@sanity/icons'\nimport {ObjectFieldProps, RenderPreviewCallback} from '../../types'\nimport {FormField} from '../../components'\nimport {useScrollIntoViewOnFocusWithin} from '../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {set, unset} from '../../patch'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {ReferencePreviewCard} from './ReferenceItem'\nimport {useReferenceInput} from './useReferenceInput'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\n\ninterface ReferenceFieldProps extends Omit<ObjectFieldProps, 'renderDefault'> {\n  schemaType: ReferenceSchemaType\n  renderPreview: RenderPreviewCallback\n}\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport function ReferenceField(props: ReferenceFieldProps) {\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const {schemaType, path, open, inputId, children, inputProps} = props\n  const {readOnly, focused, renderPreview, onChange} = props.inputProps\n\n  const handleClear = useCallback(() => inputProps.onChange(unset()), [inputProps])\n  const value: Reference | undefined = props.value as any\n\n  const {EditReferenceLink, getReferenceInfo, selectedState, isCurrentDocumentLiveEdit} =\n    useReferenceInput({\n      path,\n      schemaType,\n      value,\n    })\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(elementRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && elementRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      elementRef.current?.focus()\n    }\n  })\n\n  const hasErrors = props.validation.some((v) => v.level === 'error')\n  const hasWarnings = props.validation.some((v) => v.level === 'warning')\n\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfo)\n\n  const refTypeName = loadableReferenceInfo.result?.type || value?._strengthenOnPublish?.type\n\n  const refType = refTypeName\n    ? schemaType.to.find((toType) => toType.name === refTypeName)\n    : undefined\n  const pressed = selectedState === 'pressed'\n  const selected = selectedState === 'selected'\n\n  const hasRef = value?._ref\n  const publishedReferenceExists = hasRef && loadableReferenceInfo.result?.preview?.published?._id\n\n  const handleRemoveStrengthenOnPublish = useCallback(() => {\n    onChange([\n      schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']),\n      unset(['_strengthenOnPublish']),\n    ])\n  }, [onChange, schemaType.weak])\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  // If the reference value is marked with _strengthenOnPublish,\n  // we allow weak references if the reference points to a document that has a draft but not a published\n  // In all other cases we should display a \"weak mismatch\" warning\n  const weakWarningOverride =\n    hasRef && !loadableReferenceInfo.isLoading && value?._strengthenOnPublish\n\n  const showWeakRefMismatch =\n    !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe && !weakWarningOverride\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n  const isEditing = !value?._ref || inputProps.focusPath[0] === '_ref'\n  const preview =\n    loadableReferenceInfo.result?.preview.draft || loadableReferenceInfo.result?.preview.published\n\n  const footer = (\n    <>\n      {isCurrentDocumentLiveEdit && publishedReferenceExists && value._strengthenOnPublish && (\n        <AlertStrip\n          padding={1}\n          title={schemaType.weak ? 'Finalize reference' : 'Convert to strong reference'}\n          status=\"info\"\n          data-testid=\"alert-reference-published\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              <strong>{loadableReferenceInfo.result?.preview.published?.title as any}</strong> is\n              published and this reference should now be{' '}\n              {schemaType.weak ? <>finalized</> : <>converted to a strong reference</>}.\n            </Text>\n            <Button\n              onClick={handleRemoveStrengthenOnPublish}\n              text={<>Convert to strong reference</>}\n              tone=\"positive\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {showWeakRefMismatch && (\n        <AlertStrip\n          padding={1}\n          title=\"Reference strength mismatch\"\n          status=\"warning\"\n          data-testid=\"alert-reference-strength-mismatch\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This reference is <em>{weakIs}</em>, but according to the current schema it should be{' '}\n              <em>{weakShouldBe}.</em>\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              {schemaType.weak ? (\n                <>\n                  It will not be possible to delete the \"{preview?.title}\"-document without first\n                  removing this reference.\n                </>\n              ) : (\n                <>\n                  This makes it possible to delete the \"{preview?.title}\"-document without first\n                  deleting this reference, leaving this field referencing a nonexisting document.\n                </>\n              )}\n            </Text>\n            <Button\n              onClick={handleFixStrengthMismatch}\n              text={<>Convert to {weakShouldBe} reference</>}\n              tone=\"caution\"\n            />\n          </Stack>\n        </AlertStrip>\n      )}\n      {loadableReferenceInfo.error && (\n        <AlertStrip\n          padding={1}\n          title=\"Unable to load reference metadata\"\n          status=\"warning\"\n          data-testid=\"alert-reference-info-failed\"\n        >\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              Error: {loadableReferenceInfo.error.message}\n            </Text>\n            <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n          </Stack>\n        </AlertStrip>\n      )}\n    </>\n  )\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <Box marginLeft={1}>\n          <MenuButton\n            button={<Button paddingY={3} paddingX={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n            id={`${inputId}-menuButton`}\n            menu={\n              <Menu>\n                {!readOnly && (\n                  <>\n                    <MenuItem text=\"Clear\" tone=\"critical\" icon={TrashIcon} onClick={handleClear} />\n                    <MenuItem\n                      text={value?._ref && isEditing ? 'Cancel replace' : 'Replace'}\n                      icon={value?._ref && isEditing ? CloseIcon : ReplaceIcon}\n                      onClick={\n                        value?._ref && isEditing\n                          ? () => inputProps.onPathFocus([])\n                          : () => inputProps.onPathFocus(['_ref'])\n                      }\n                    />\n                  </>\n                )}\n\n                {!readOnly && !isEditing && value._ref && <MenuDivider />}\n                {!isEditing && value._ref && (\n                  <MenuItem\n                    as={EditReferenceLink}\n                    data-as=\"a\"\n                    text=\"Open in new tab\"\n                    icon={OpenInNewTabIcon}\n                  />\n                )}\n              </Menu>\n            }\n            popover={MENU_POPOVER_PROPS}\n          />\n        </Box>\n      ),\n    [readOnly, inputId, handleClear, value?._ref, isEditing, EditReferenceLink, inputProps]\n  )\n  return (\n    <FormField\n      level={props.level}\n      title={props.title}\n      description={props.description}\n      validation={props.validation}\n      __unstable_presence={props.presence}\n    >\n      {isEditing ? (\n        <Box paddingY={2}>{children}</Box>\n      ) : (\n        <Card shadow={1} radius={1} padding={1} tone={tone}>\n          <Stack space={1}>\n            <Flex gap={1} align=\"center\">\n              <ReferencePreviewCard\n                flex={1}\n                forwardedAs={EditReferenceLink as any}\n                tone=\"inherit\"\n                radius={2}\n                data-as=\"a\"\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                documentId={value?._ref}\n                documentType={refType?.name}\n                paddingX={2}\n                paddingY={1}\n                __unstable_focusRing\n                style={{position: 'relative'}}\n                selected={selected}\n                pressed={pressed}\n                data-selected={selected ? true : undefined}\n                data-pressed={pressed ? true : undefined}\n              >\n                <PreviewReferenceValue\n                  value={value}\n                  referenceInfo={loadableReferenceInfo}\n                  renderPreview={renderPreview}\n                  type={schemaType}\n                />\n              </ReferencePreviewCard>\n              <Box>{menu}</Box>\n            </Flex>\n            {footer}\n          </Stack>\n        </Card>\n      )}\n    </FormField>\n  )\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {isBooleanSchemaType, isReferenceSchemaType, SchemaType} from '@sanity/types'\nimport React from 'react'\nimport {ArrayFieldProps, FieldProps, ObjectFieldProps} from '../../types'\nimport {ReferenceField} from '../../inputs/ReferenceInput/ReferenceField'\nimport {FieldMember} from '../../store'\nimport {FormField, FormFieldSet} from '../../components'\nimport {ChangeIndicator} from '../../../changeIndicators'\nimport {getTypeChain} from './helpers'\n\nfunction PassThrough({children}: {children: React.ReactNode}) {\n  return <>{children}</>\n}\n\nfunction PrimitiveField(field: FieldProps) {\n  return (\n    <FormField\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      <ChangeIndicator\n        path={field.path}\n        hasFocus={Boolean(field.inputProps.focused)}\n        isChanged={field.inputProps.changed}\n      >\n        {field.children}\n      </ChangeIndicator>\n    </FormField>\n  )\n}\n\nfunction ObjectOrArrayField(field: ObjectFieldProps | ArrayFieldProps) {\n  return (\n    <FormFieldSet\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nfunction ImageOrFileField(field: ObjectFieldProps) {\n  // unless the hotspot tool dialog is open we want to show whoever is in there as the field presence\n  const hotspotField = field.inputProps.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n  )\n  const presence = hotspotField?.open\n    ? field.presence\n    : field.presence.concat(hotspotField?.field.presence || [])\n\n  return (\n    <FormFieldSet\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nexport function defaultResolveFieldComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<FieldProps, 'renderDefault'>> {\n  if (schemaType.components?.field) return schemaType.components.field\n\n  if (isBooleanSchemaType(schemaType)) {\n    return PassThrough\n  }\n\n  const typeChain = getTypeChain(schemaType, new Set())\n\n  if (typeChain.some((t) => t.name === 'image' || t.name === 'file')) {\n    return ImageOrFileField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n  }\n  if (typeChain.some((t) => isReferenceSchemaType(t))) {\n    return ReferenceField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n  }\n\n  if (schemaType.jsonType !== 'object' && schemaType.jsonType !== 'array') {\n    return PrimitiveField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n  }\n\n  return ObjectOrArrayField as React.ComponentType<Omit<FieldProps, 'renderDefault'>>\n}\n","import {\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Spinner,\n  Text,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {getSchemaTypeTitle} from '../../../../../schema'\nimport {ObjectItem, ObjectItemProps} from '../../../../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../../../hooks/useDidUpdate'\nimport {useChildPresence} from '../../../../studio/contexts/Presence'\nimport {randomKey} from '../../../../utils/randomKey'\nimport {FormFieldValidationStatus} from '../../../../components'\nimport {FieldPresence} from '../../../../../presence'\nimport {useChildValidation} from '../../../../studio/contexts/Validation'\nimport {ChangeIndicator} from '../../../../../changeIndicators'\nimport {RowLayout} from '../../layouts/RowLayout'\nimport {createProtoArrayValue} from '../createProtoArrayValue'\nimport {InsertMenu} from '../InsertMenu'\nimport {EditPortal} from '../../../../components/EditPortal'\n\ntype PreviewItemProps<Item extends ObjectItem> = Omit<ObjectItemProps<Item>, 'renderDefault'>\n\nfunction getTone({\n  readOnly,\n  hasErrors,\n  hasWarnings,\n}: {\n  readOnly: boolean | undefined\n  hasErrors: boolean\n  hasWarnings: boolean\n}): CardTone {\n  if (readOnly) {\n    return 'transparent'\n  }\n  if (hasErrors) {\n    return 'critical'\n  }\n  return hasWarnings ? 'caution' : 'default'\n}\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\nconst INITIAL_VALUE_CARD_STYLE = {\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  bottom: 0,\n  right: 0,\n  opacity: 0.6,\n} as const\n\nconst BUTTON_CARD_STYLE = {position: 'relative'} as const\n\nexport function PreviewItem<Item extends ObjectItem = ObjectItem>(props: PreviewItemProps<Item>) {\n  const {\n    schemaType,\n    parentSchemaType,\n    path,\n    readOnly,\n    onRemove,\n    value,\n    open,\n    onInsert,\n    onFocus,\n    onOpen,\n    onClose,\n    changed,\n    focused,\n    children,\n    inputProps: {renderPreview},\n  } = props\n\n  const sortable = parentSchemaType.options?.sortable !== false\n  const insertableTypes = parentSchemaType.of\n\n  const previewCardRef = useRef<HTMLDivElement | null>(null)\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(previewCardRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && previewCardRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      previewCardRef.current?.focus()\n    }\n  })\n\n  const resolvingInitialValue = (value as any)._resolvingInitialValue\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [createProtoArrayValue(insertType)],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n\n  const childPresence = useChildPresence(path, true)\n  const presence = useMemo(() => {\n    return childPresence.length === 0 ? null : (\n      <FieldPresence presence={childPresence} maxAvatars={1} />\n    )\n  }, [childPresence])\n\n  const childValidation = useChildValidation(path, true)\n  const validation = useMemo(() => {\n    return childValidation.length === 0 ? null : (\n      <Box marginLeft={1} paddingX={1} paddingY={3}>\n        <FormFieldValidationStatus validation={childValidation} __unstable_showSummary />\n      </Box>\n    )\n  }, [childValidation])\n\n  const hasErrors = childValidation.some((v) => v.level === 'error')\n  const hasWarnings = childValidation.some((v) => v.level === 'warning')\n\n  const menu = useMemo(\n    () =>\n      readOnly ? null : (\n        <MenuButton\n          button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n          id={`${props.inputId}-menuButton`}\n          menu={\n            <Menu>\n              <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n              <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n              <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n            </Menu>\n          }\n          popover={MENU_POPOVER_PROPS}\n        />\n      ),\n    [handleDuplicate, handleInsert, onRemove, insertableTypes, props.inputId, readOnly]\n  )\n\n  const tone = getTone({readOnly, hasErrors, hasWarnings})\n  const item = (\n    <RowLayout\n      menu={menu}\n      presence={presence}\n      validation={validation}\n      tone={tone}\n      focused={focused}\n      dragHandle={sortable}\n      selected={open}\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        tone=\"inherit\"\n        radius={2}\n        disabled={resolvingInitialValue}\n        padding={1}\n        onClick={onOpen}\n        ref={previewCardRef}\n        onFocus={onFocus}\n        __unstable_focusRing\n        style={BUTTON_CARD_STYLE}\n      >\n        {renderPreview({\n          schemaType: props.schemaType,\n          value: props.value,\n          layout: 'default',\n        })}\n        {resolvingInitialValue && (\n          <Card\n            style={INITIAL_VALUE_CARD_STYLE}\n            tone=\"transparent\"\n            radius={2}\n            as={Flex}\n            // @ts-expect-error composed from as={Flex}\n            justify=\"center\"\n          >\n            <Flex align=\"center\" justify=\"center\" padding={3}>\n              <Box marginX={3}>\n                <Spinner muted />\n              </Box>\n              <Text size={1} muted>\n                Resolving initial value\n              </Text>\n            </Flex>\n          </Card>\n        )}\n      </Card>\n    </RowLayout>\n  )\n\n  const itemTypeTitle = getSchemaTypeTitle(schemaType)\n  return (\n    <>\n      <ChangeIndicator path={path} isChanged={changed} hasFocus={Boolean(focused)}>\n        <Box paddingX={1}>{item}</Box>\n      </ChangeIndicator>\n      {open && (\n        <EditPortal\n          header={readOnly ? `View ${itemTypeTitle}` : `Edit ${itemTypeTitle}`}\n          type={parentSchemaType?.options?.modal?.type || 'dialog'}\n          width={parentSchemaType?.options?.modal?.width ?? 1}\n          id={value._key}\n          onClose={onClose}\n          legacy_referenceElement={previewCardRef.current}\n        >\n          {children}\n        </EditPortal>\n      )}\n    </>\n  )\n}\n","import {isReferenceSchemaType, SchemaType} from '@sanity/types'\nimport React from 'react'\nimport {ReferenceItem} from '../../inputs/ReferenceInput/ReferenceItem'\nimport {PreviewItem} from '../../inputs/arrays/ArrayOfObjectsInput/List/PreviewItem'\nimport {ItemProps} from '../../types'\nimport {FIXME} from '../../../FIXME'\n\nexport function defaultResolveItemComponent(\n  schemaType: SchemaType\n): React.ComponentType<Omit<ItemProps, 'renderDefault'>> {\n  if (schemaType.components?.item) return schemaType.components.item\n\n  if (isReferenceSchemaType(schemaType)) {\n    return ReferenceItem as FIXME\n  }\n\n  return PreviewItem as FIXME\n}\n","import {SchemaType} from '@sanity/types'\nimport React, {createElement, useCallback} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {\n  defaultResolveInputComponent,\n  defaultResolvePreviewComponent,\n} from '../studio/inputResolver/inputResolver'\nimport {FieldProps, InputProps, ItemProps} from '../types'\nimport {defaultResolveFieldComponent} from '../studio/inputResolver/fieldResolver'\nimport {defaultResolveItemComponent} from '../studio/inputResolver/itemResolver'\n\nfunction useResolveDefaultComponent<T extends {schemaType?: SchemaType}>(props: {\n  componentProps: Omit<T, 'renderDefault'>\n  componentResolver: (schemaType: SchemaType) => React.ComponentType<Omit<T, 'renderDefault'>>\n}): React.ReactElement<T> {\n  const {componentResolver, componentProps} = props\n\n  // NOTE: this will not happen, but we do this to avoid updating too many places\n  // TODO: We need to clean up the preview machinery + types to remove this\n  if (!componentProps.schemaType) {\n    throw new Error('the `schemaType` property must be defined')\n  }\n\n  const defaultResolvedComponent = componentResolver(componentProps.schemaType)\n\n  const renderDefault = useCallback(\n    (parentTypeProps: T) => {\n      if (!parentTypeProps.schemaType?.type) {\n        // In theory this should not be possible, and this error should never be thrown\n        throw new Error('Attempted to render form component of non-existent parent type')\n      }\n\n      // The components property is removed from the schemaType object\n      // in order to prevent that a component is render itself\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const {components, ...restSchemaType} = parentTypeProps.schemaType\n      const parentTypeResolvedComponent = componentResolver(restSchemaType)\n      return createElement(parentTypeResolvedComponent, parentTypeProps)\n    },\n    [componentResolver]\n  )\n\n  return createElement(defaultResolvedComponent, {\n    ...componentProps,\n    renderDefault,\n  }) as React.ReactElement<T>\n}\n\n/**\n * @internal\n */\nexport function DefaultInput(props: Omit<InputProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<InputProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolveInputComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function DefaultField(props: Omit<FieldProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<FieldProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolveFieldComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function DefaultItem(props: Omit<ItemProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<ItemProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolveItemComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function DefaultPreview(props: Omit<PreviewProps, 'renderDefault'>): React.ReactElement {\n  return useResolveDefaultComponent<Omit<PreviewProps, 'renderDefault'>>({\n    componentProps: props,\n    componentResolver: defaultResolvePreviewComponent,\n  })\n}\n","import {ComponentType} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {PluginOptions} from '../../config'\nimport {FieldProps, InputProps, ItemProps} from '../types'\n\nexport function pickInputComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<InputProps, 'renderDefault'>> {\n  return plugin.form?.components?.input as ComponentType<Omit<InputProps, 'renderDefault'>>\n}\n\nexport function pickFieldComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<FieldProps, 'renderDefault'>> {\n  return plugin.form?.components?.field as ComponentType<Omit<FieldProps, 'renderDefault'>>\n}\n\nexport function pickPreviewComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<PreviewProps, 'renderDefault'>> {\n  return plugin.form?.components?.preview as ComponentType<Omit<PreviewProps, 'renderDefault'>>\n}\n\nexport function pickItemComponent(\n  plugin: PluginOptions\n): ComponentType<Omit<ItemProps, 'renderDefault'>> {\n  return plugin.form?.components?.item as ComponentType<Omit<ItemProps, 'renderDefault'>>\n}\n","import {ComponentType} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {useMiddlewareComponents} from '../../config/components'\nimport {InputProps, FieldProps, ItemProps} from '../types'\nimport {DefaultInput, DefaultField, DefaultItem, DefaultPreview} from './components'\nimport {\n  pickInputComponent,\n  pickFieldComponent,\n  pickPreviewComponent,\n  pickItemComponent,\n} from './picks'\n\n/**\n * @internal\n */\nexport function useInputComponent(): ComponentType<Omit<InputProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultInput,\n    pick: pickInputComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useFieldComponent(): ComponentType<Omit<FieldProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultField,\n    pick: pickFieldComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function usePreviewComponent(): ComponentType<Omit<PreviewProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultPreview,\n    pick: pickPreviewComponent,\n  })\n}\n\n/**\n * @internal\n */\nexport function useItemComponent(): ComponentType<Omit<ItemProps, 'renderDefault'>> {\n  return useMiddlewareComponents({\n    defaultComponent: DefaultItem,\n    pick: pickItemComponent,\n  })\n}\n","/* eslint-disable camelcase */\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useCallback} from 'react'\nimport {useSource} from '../../studio'\nimport {PatchChannel, PatchEvent} from '../patch'\nimport {FormBuilderProvider} from '../FormBuilderProvider'\nimport {FormFieldGroup, ObjectMember, StateTree} from '../store'\nimport {FieldProps, InputProps, ItemProps} from '../types'\nimport {\n  useFieldComponent,\n  useInputComponent,\n  useItemComponent,\n  usePreviewComponent,\n} from '../form-components-hooks'\nimport {PreviewProps} from '../../components'\nimport {FormNodePresence} from '../../presence'\n\n/**\n * @alpha This API might change.\n */\nexport interface FormProviderProps {\n  /**\n   * @internal Considered internal, do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormNodePresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * Default wiring for `FormBuilderProvider` when used with Sanity\n *\n * @alpha This API might change.\n */\nexport function FormProvider(props: FormProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  const {file, image} = useSource().form\n\n  // These hooks may be stored in context as an perf optimization\n  const Input = useInputComponent()\n  const Field = useFieldComponent()\n  const Preview = usePreviewComponent()\n  const Item = useItemComponent()\n\n  const renderInput = useCallback(\n    (inputProps: Omit<InputProps, 'renderDefault'>) => <Input {...inputProps} />,\n    [Input]\n  )\n  const renderField = useCallback(\n    (fieldProps: Omit<FieldProps, 'renderDefault'>) => <Field {...fieldProps} />,\n    [Field]\n  )\n  const renderItem = useCallback(\n    (itemProps: Omit<ItemProps, 'renderDefault'>) => <Item {...itemProps} />,\n    [Item]\n  )\n  const renderPreview = useCallback(\n    (previewProps: Omit<PreviewProps, 'renderDefault'>) => <Preview {...previewProps} />,\n    [Preview]\n  )\n\n  return (\n    <FormBuilderProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      file={file}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      image={image}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      readOnly={readOnly}\n      renderField={renderField}\n      renderInput={renderInput}\n      renderItem={renderItem}\n      renderPreview={renderPreview}\n      schemaType={schemaType}\n      validation={validation}\n      value={value}\n    >\n      {children}\n    </FormBuilderProvider>\n  )\n}\n","/* eslint-disable camelcase */\n/* eslint-disable react/jsx-handler-names */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useCallback, useRef} from 'react'\nimport {FormPatch, PatchChannel, PatchEvent} from '../patch'\nimport {ObjectFormNode} from '../store/types/nodes'\nimport {ObjectInputProps} from '../types'\nimport {useFormBuilder} from '../useFormBuilder'\nimport {StateTree} from '../store'\nimport {EMPTY_ARRAY} from '../../util'\nimport {FormNodePresence} from '../../presence'\nimport {FormProvider} from './FormProvider'\nimport {useFormCallbacks} from './contexts/FormCallbacks'\n\n/**\n * @alpha\n */\nexport interface FormBuilderProps\n  extends Omit<ObjectFormNode, 'level' | 'path' | 'presence' | 'validation'> {\n  /**\n   * @internal Considered internal  do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  id: string\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormNodePresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @alpha\n */\nexport function FormBuilder(props: FormBuilderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  return (\n    <FormProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      validation={validation}\n      readOnly={readOnly}\n      schemaType={schemaType}\n      value={value}\n    >\n      <RootInput />\n    </FormProvider>\n  )\n}\n\nfunction RootInput() {\n  const {\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    value,\n  } = useFormBuilder()\n\n  const {\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n  } = useFormCallbacks()\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], true),\n    [onSetPathCollapsed]\n  )\n\n  const handleExpandField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], false),\n    [onSetPathCollapsed]\n  )\n\n  const handleBlur = useCallback(() => onPathBlur(EMPTY_ARRAY), [onPathBlur])\n\n  const handleFocus = useCallback(() => onPathFocus(EMPTY_ARRAY), [onPathFocus])\n\n  const handleChange = useCallback(\n    (patch: FormPatch | FormPatch[] | PatchEvent) => onChange(PatchEvent.from(patch)),\n    [onChange]\n  )\n\n  const focusRef = useRef(null)\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => onFieldGroupSelect(EMPTY_ARRAY, groupName),\n    [onFieldGroupSelect]\n  )\n\n  const handleOpenField = useCallback((fieldName: string) => onPathOpen([fieldName]), [onPathOpen])\n\n  const handleCloseField = useCallback(() => onPathOpen([]), [onPathOpen])\n\n  const handleCollapseFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], true),\n    [onSetFieldSetCollapsed]\n  )\n\n  const handleExpandFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], false),\n    [onSetFieldSetCollapsed]\n  )\n\n  const rootInputProps: Omit<ObjectInputProps, 'renderDefault'> = {\n    focusPath,\n    elementProps: {ref: focusRef, id, onBlur: handleBlur, onFocus: handleFocus},\n    changed: members.some((m) => m.kind === 'field' && m.field.changed),\n    focused,\n    groups,\n    id,\n    level: 0,\n    members,\n    onChange: handleChange,\n    onFieldClose: handleCloseField,\n    onFieldCollapse: handleCollapseField,\n    onFieldSetCollapse: handleCollapseFieldSet,\n    onFieldExpand: handleExpandField,\n    onFieldSetExpand: handleExpandFieldSet,\n    onPathFocus: onPathFocus,\n    onFieldOpen: handleOpenField,\n    onFieldGroupSelect: handleSelectFieldGroup,\n    path: EMPTY_ARRAY,\n    presence: EMPTY_ARRAY,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    validation: EMPTY_ARRAY,\n    value,\n  }\n\n  return <>{renderInput(rootInputProps)}</>\n}\n","import {createElement} from 'react'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {\n  defaultResolveInputComponent,\n  defaultResolvePreviewComponent,\n} from './inputResolver/inputResolver'\nimport {defaultResolveItemComponent} from './inputResolver/itemResolver'\nimport {defaultResolveFieldComponent} from './inputResolver/fieldResolver'\n\n/** @internal */\nexport const defaultRenderField: RenderFieldCallback = (props) => {\n  return createElement(defaultResolveFieldComponent(props.schemaType), props)\n}\n\n/** @internal */\nexport const defaultRenderInput: RenderInputCallback = (props) => {\n  return createElement(defaultResolveInputComponent(props.schemaType), props)\n}\n\n/** @internal */\nexport const defaultRenderItem: RenderItemCallback = (props) => {\n  return createElement(defaultResolveItemComponent(props.schemaType), props)\n}\n\n/** @internal */\nexport const defaultRenderPreview: RenderPreviewCallback = (props) => {\n  return createElement(defaultResolvePreviewComponent(), props)\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {Path, PathSegment} from '@sanity/types'\n\nconst IS_NUMERIC = /^\\d+$/\n\nfunction unquote(str: string) {\n  return str.replace(/^['\"]/, '').replace(/['\"]$/, '')\n}\n\nfunction splitAttr(segment: string) {\n  const [attr, key] = segment.split('==')\n  return {[attr]: unquote(key)}\n}\n\nfunction coerce(segment: string): PathSegment {\n  return IS_NUMERIC.test(segment) ? Number(segment) : segment\n}\n\nfunction parseGradientPath(focusPathStr: string): Path {\n  return focusPathStr\n    .split(/[[.\\]]/g)\n    .filter(Boolean)\n    .map((seg) => (seg.includes('==') ? splitAttr(seg) : coerce(seg))) as Path\n}\n\n/**\n * @internal\n */\nexport function encodePath(formBuilderPath: Path): string {\n  return arrayToJSONMatchPath(formBuilderPath)\n}\n\n/**\n * @internal\n */\nexport function decodePath(gradientPath: string): Path {\n  return parseGradientPath(gradientPath)\n}\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {decodePath, encodePath} from '../../utils/path'\n\n/** @internal */\nexport type HashFocusManagerChildArgs = {\n  onFocus: (path: Path) => void\n  onBlur: () => void\n  focusPath: Path\n}\n\n/** @internal */\nexport interface HashFocusManagerProps {\n  focusPath: any | null\n  onFocus: () => void\n  onBlur: () => void\n  children: (arg0: HashFocusManagerChildArgs) => any\n}\n\nfunction getHash() {\n  return decodeURIComponent(document.location.hash.substring(1))\n}\n\nfunction getPathFromHash() {\n  const hash = getHash()\n  return hash ? decodePath(hash) : []\n}\n\n/**\n * An example of how to sync focus path through document.location.hash\n *\n * @internal\n */\nexport function HashFocusManager(props: HashFocusManagerProps) {\n  const {children} = props\n  const [focusPath, setFocusPath] = useState(() => getPathFromHash())\n\n  const handleBlur = useCallback(() => {\n    // setFocusPath([])\n  }, [])\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  const handleFocus = useCallback((focusPath: Path) => {\n    document.location.hash = encodePath(focusPath)\n  }, [])\n\n  useEffect(() => {\n    const handleHashChange = () => {\n      setFocusPath(getPathFromHash())\n    }\n    window.addEventListener('hashchange', handleHashChange, false)\n    return () => window.removeEventListener('hashchange', handleHashChange, false)\n  }, [])\n\n  return children({onBlur: handleBlur, onFocus: handleFocus, focusPath})\n}\n","/* eslint-disable react/no-unused-prop-types */\n\nimport React from 'react'\nimport {Path} from '@sanity/types'\n\n/** @internal */\nexport interface SimpleFocusManagerProps {\n  path: any | null\n  onFocus: () => void\n  onBlur: () => void\n  children: (arg: any) => any\n}\n\n/** @internal */\nexport interface SimpleFocusManagerState {\n  focusPath: Array<any>\n}\n\n/** @internal */\nexport class SimpleFocusManager extends React.Component<\n  SimpleFocusManagerProps,\n  SimpleFocusManagerState\n> {\n  state = {\n    focusPath: [],\n  }\n\n  handleFocus = (path: Path) => {\n    this.setState({focusPath: path})\n  }\n\n  handleBlur = () => {\n    // do nothing\n  }\n\n  render() {\n    return this.props.children({\n      onBlur: this.handleBlur,\n      onFocus: this.handleFocus,\n      focusPath: this.state.focusPath,\n    })\n  }\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {flatten} from 'lodash'\nimport {SANITY_PATCH_TYPE} from '../patch'\nimport type {FormPatchOrigin, FormPatch} from '../patch/types'\nimport {decodePath} from './path'\n\n/**\n * @internal\n */\nexport type MutationPatch = Record<string, any> // @todo: complete this typing\n\n/**\n * @internal\n */\nexport function toMutationPatches(patches: FormPatch[]): MutationPatch[] {\n  return patches.map(toMutationPatch)\n}\n\n/**\n * @internal\n */\nexport function fromMutationPatches(\n  origin: FormPatchOrigin,\n  patches: MutationPatch[]\n): FormPatch[] {\n  return flatten(patches.map((patch) => toFormBuilderPatches(origin, patch)))\n}\n\nconst notIn = (values: unknown[]) => (value: unknown) => !values.includes(value)\n\nfunction toFormBuilderPatches(origin: FormPatchOrigin, patch: MutationPatch): FormPatch[] {\n  return flatten(\n    Object.keys(patch)\n      .filter(notIn(['id', 'ifRevisionID', 'query']))\n      .map((type) => {\n        if (type === 'unset') {\n          return patch.unset.map((path: any) => {\n            return {\n              type: 'unset',\n              path: decodePath(path),\n              origin,\n            }\n          })\n        }\n        if (type === 'insert') {\n          const position = 'before' in patch.insert ? 'before' : 'after'\n          return {\n            type: 'insert',\n            position: position,\n            path: decodePath(patch.insert[position]),\n            items: patch.insert.items,\n            origin,\n          }\n        }\n        return Object.keys(patch[type])\n          .map((gradientPath) => {\n            if (type === 'set') {\n              return {\n                type: 'set',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'inc' || type === 'dec') {\n              return {\n                type: type,\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'setIfMissing') {\n              return {\n                type: 'setIfMissing',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'diffMatchPatch') {\n              return {\n                type,\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            // eslint-disable-next-line no-console\n            console.warn(new Error(`Unsupported patch type: ${type}`))\n            return null\n          })\n          .filter(Boolean)\n      })\n  )\n}\n\nfunction toMutationPatch(patch: FormPatch): MutationPatch {\n  if (patch.patchType !== SANITY_PATCH_TYPE && patch.type) {\n    throw new Error(\n      `Patch is missing \"patchType\" - import and use \"${patch.type}()\" from \"sanity/form\"`\n    )\n  } else if (patch.patchType !== SANITY_PATCH_TYPE) {\n    throw new Error(\n      `Patch is missing \"patchType\" - import and use the patch method helpers from \"sanity/form\"`\n    )\n  }\n\n  const matchPath = arrayToJSONMatchPath(patch.path || [])\n  if (patch.type === 'insert') {\n    const {position, items} = patch\n    return {\n      insert: {\n        [position]: matchPath,\n        items: items,\n      },\n    }\n  }\n\n  if (patch.type === 'unset') {\n    return {\n      unset: [matchPath],\n    }\n  }\n\n  if (!patch.type) {\n    throw new Error(`Missing patch type in patch ${JSON.stringify(patch)}`)\n  }\n  if (matchPath) {\n    return {\n      [patch.type]: {\n        [matchPath]: patch.value,\n      },\n    }\n  }\n  return {\n    [patch.type]: patch.value,\n  }\n}\n","import {parseColor, rgbToHex, screen, multiply} from '@sanity/ui'\nimport {getLuminance, mix, parseToRgb, rgb} from 'polished'\nimport {LegacyThemeTints} from './types'\n\n/**\n * @internal\n */\nexport function _buildTints(bg: string, mid: string, fg: string): LegacyThemeTints {\n  return {\n    50: mix(0.1, mid, bg),\n    100: mix(0.2, mid, bg),\n    200: mix(0.4, mid, bg),\n    300: mix(0.6, mid, bg),\n    400: mix(0.8, mid, bg),\n    500: mid,\n    600: mix(0.8, mid, fg),\n    700: mix(0.6, mid, fg),\n    800: mix(0.4, mid, fg),\n    900: mix(0.2, mid, fg),\n    950: mix(0.1, mid, fg),\n  }\n}\n\n/**\n * @internal\n */\nexport function _toHex(color: string): string {\n  const {red, green, blue} = parseToRgb(color)\n  return rgb(red, green, blue)\n}\n\n/**\n * @internal\n */\nexport function _isDark(bg: string, fg: string): boolean {\n  return getLuminance(bg) < getLuminance(fg)\n}\n\n/**\n * Blend two colors using the \"screen\" blend mode\n * @internal\n */\nexport function _multiply(bg: string, fg: string): string {\n  const b = parseColor(bg)\n  const s = parseColor(fg)\n  const hex = rgbToHex(multiply(b, s))\n\n  return hex\n}\n\n/**\n * Blend two colors using the \"screen\" blend mode\n * @internal\n */\nexport function _screen(bg: string, fg: string): string {\n  const b = parseColor(bg)\n  const s = parseColor(fg)\n  const hex = rgbToHex(screen(b, s))\n\n  return hex\n}\n","import {hues} from '@sanity/color'\nimport {createColorTheme, rgba, ThemeColorSchemes} from '@sanity/ui'\nimport {_multiply, _screen, _isDark} from './helpers'\nimport {LegacyPalette} from './palette'\nimport {LegacyTones} from './tones'\nimport {LegacyThemeTints} from './types'\n\nconst NEUTRAL_TONES = ['default', 'transparent']\n\nexport function buildColor(\n  legacyPalette: LegacyPalette,\n  legacyTones: LegacyTones\n): ThemeColorSchemes {\n  return createColorTheme({\n    base: ({dark: navbar, name}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = navbar ? _screen : _multiply\n      const tints = stateTones[name] || stateTones.default\n\n      if (name === 'default') {\n        const skeletonFrom = stateTones.default[100]\n\n        return {\n          fg: stateTones.fg,\n          bg: stateTones.bg,\n          border: stateTones.default[200],\n          focusRing: legacyPalette.focus.base,\n          shadow: {\n            outline: rgba(stateTones.default[500], 0.4),\n            umbra: rgba(dark ? legacyPalette.black : stateTones.default[500], 0.2),\n            penumbra: rgba(dark ? legacyPalette.black : stateTones.default[500], 0.14),\n            ambient: rgba(dark ? legacyPalette.black : stateTones.default[500], 0.12),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (name === 'transparent') {\n        const bg = tints[50]\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          fg: tints[900],\n          bg,\n          border: tints[300],\n          focusRing: legacyPalette.focus.base,\n          shadow: {\n            outline: rgba(tints[500], dark ? 0.2 : 0.4),\n            umbra: rgba(dark ? legacyPalette.black : tints[500], 0.2),\n            penumbra: rgba(dark ? legacyPalette.black : tints[500], 0.14),\n            ambient: rgba(dark ? legacyPalette.black : tints[500], 0.12),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      const bg = tints[50]\n      const skeletonFrom = blend(bg, tints[100])\n\n      return {\n        fg: tints[900],\n        bg,\n        border: tints[200],\n        focusRing: tints[500],\n        shadow: {\n          outline: rgba(tints[500], dark ? 0.2 : 0.4),\n          umbra: rgba(dark ? legacyPalette.black : tints[500], 0.2),\n          penumbra: rgba(dark ? legacyPalette.black : tints[500], 0.14),\n          ambient: rgba(dark ? legacyPalette.black : tints[500], 0.12),\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    solid: ({base, dark: navbar, name, state, tone}) => {\n      const buttonTones = navbar ? legacyTones.button.navbar : legacyTones.button.default\n      const dark = buttonTones.dark\n      const blend = dark ? _screen : _multiply\n      const blendInvert = dark ? _multiply : _screen\n      const defaultTints = buttonTones[name] || buttonTones.default\n      const isNeutral = NEUTRAL_TONES.includes(name) && NEUTRAL_TONES.includes(tone)\n      let tints = buttonTones[tone === 'default' ? name : tone] || defaultTints\n\n      if (state === 'disabled') {\n        tints = defaultTints\n\n        const bg = blend(base.bg, tints[200])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[200]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[50]),\n          },\n          accent: {\n            fg: blend(base.bg, tints[50]),\n          },\n          link: {\n            fg: blend(base.bg, tints[50]),\n          },\n          code: {\n            bg,\n            fg: blend(base.bg, tints[50]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'hovered') {\n        const bg = blend(base.bg, tints[600])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[600]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[200]),\n          },\n          accent: {\n            fg: blendInvert(bg, buttonTones.critical[300]),\n          },\n          link: {\n            fg: blendInvert(bg, buttonTones.primary[200]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[200]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'pressed') {\n        const bg = blend(base.bg, tints[800])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[800]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[200]),\n          },\n          accent: {\n            fg: blendInvert(bg, buttonTones.critical[300]),\n          },\n          link: {\n            fg: blendInvert(bg, buttonTones.primary[200]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[200]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'selected') {\n        if (isNeutral) {\n          tints = buttonTones.primary\n        }\n\n        const bg = blend(base.bg, tints[800])\n        const skeletonFrom = blendInvert(bg, tints[800])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[800]),\n          fg: blend(base.bg, buttonTones.bg),\n          muted: {\n            fg: blend(base.bg, tints[200]),\n          },\n          accent: {\n            fg: blendInvert(bg, buttonTones.critical[300]),\n          },\n          link: {\n            fg: blendInvert(bg, buttonTones.primary[200]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[200]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      const bg = blend(base.bg, tints[500])\n      const skeletonFrom = blendInvert(bg, tints[800])\n\n      return {\n        bg,\n        border: blend(base.bg, tints[500]),\n        fg: blend(base.bg, buttonTones.bg),\n        muted: {\n          fg: blend(base.bg, tints[100]),\n        },\n        accent: {\n          fg: blendInvert(bg, buttonTones.critical[200]),\n        },\n        link: {\n          fg: blendInvert(bg, buttonTones.primary[100]),\n        },\n        code: {\n          bg: blend(bg, tints[50]),\n          fg: blend(base.bg, tints[100]),\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    muted: ({base, dark: navbar, name, state, tone}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n      const defaultTints = stateTones[name] || stateTones.default\n      const isNeutral = NEUTRAL_TONES.includes(name) && NEUTRAL_TONES.includes(tone)\n\n      let tints: LegacyThemeTints = stateTones[tone === 'default' ? name : tone] || defaultTints\n\n      if (state === 'disabled') {\n        tints = defaultTints\n\n        const bg = base.bg\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(base.bg, tints[50]),\n          fg: blend(base.bg, tints[200]),\n          muted: {\n            fg: blend(bg, tints[100]),\n          },\n          accent: {\n            fg: blend(bg, tints[100]),\n          },\n          link: {\n            fg: blend(bg, tints[100]),\n          },\n          code: {\n            bg,\n            fg: blend(bg, tints[100]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'hovered') {\n        const bg = blend(base.bg, tints[50])\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(bg, tints[100]),\n          fg: blend(base.bg, tints[900]),\n          muted: {\n            fg: blend(base.bg, tints[600]),\n          },\n          accent: {\n            fg: blend(base.bg, stateTones.critical[500]),\n          },\n          link: {\n            fg: blend(base.bg, stateTones.primary[600]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(base.bg, tints[600]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'pressed') {\n        if (isNeutral) {\n          tints = stateTones.primary\n        }\n\n        const bg = blend(base.bg, tints[100])\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(bg, tints[100]),\n          fg: blend(base.bg, tints[800]),\n          muted: {\n            fg: blend(base.bg, tints[600]),\n          },\n          accent: {\n            fg: blend(bg, stateTones.critical[500]),\n          },\n          link: {\n            fg: blend(bg, stateTones.primary[600]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(bg, tints[600]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      if (state === 'selected') {\n        if (isNeutral) {\n          tints = stateTones.primary\n        }\n\n        const bg = blend(base.bg, tints[100])\n        const skeletonFrom = blend(bg, tints[100])\n\n        return {\n          bg,\n          border: blend(bg, tints[100]),\n          fg: blend(bg, tints[800]),\n          muted: {\n            fg: blend(bg, tints[600]),\n          },\n          accent: {\n            fg: blend(bg, stateTones.critical[500]),\n          },\n          link: {\n            fg: blend(bg, stateTones.primary[600]),\n          },\n          code: {\n            bg: blend(bg, tints[50]),\n            fg: blend(bg, tints[600]),\n          },\n          skeleton: {\n            from: skeletonFrom,\n            to: rgba(skeletonFrom, 0.5),\n          },\n        }\n      }\n\n      const bg = base.bg\n      const skeletonFrom = blend(base.bg, tints[100])\n\n      return {\n        bg,\n        border: blend(bg, tints[100]),\n        fg: blend(bg, tints[700]),\n        muted: {\n          fg: blend(bg, tints[600]),\n        },\n        accent: {\n          fg: blend(bg, stateTones.critical[500]),\n        },\n        link: {\n          fg: blend(bg, stateTones.primary[600]),\n        },\n        code: {\n          bg: blend(bg, tints[50]),\n          fg: blend(bg, tints[600]),\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    button: ({base, mode, muted, solid}) => {\n      if (mode === 'bleed') {\n        return {\n          enabled: {\n            ...muted.enabled,\n            border: muted.enabled.bg,\n          },\n          hovered: {\n            ...muted.hovered,\n            border: muted.hovered.bg,\n          },\n          pressed: {\n            ...muted.pressed,\n            border: muted.pressed.bg,\n          },\n          selected: {\n            ...muted.selected,\n            border: muted.selected.bg,\n          },\n          disabled: {\n            ...muted.disabled,\n            border: muted.disabled.bg,\n          },\n        }\n      }\n\n      if (mode === 'ghost') {\n        return {\n          ...solid,\n          enabled: {\n            ...muted.enabled,\n            border: base.border,\n          },\n          disabled: muted.disabled,\n        }\n      }\n\n      return solid\n    },\n\n    card: ({base, dark: navbar, muted, name, solid, state}) => {\n      if (state === 'hovered') {\n        return muted[name].hovered\n      }\n\n      if (state === 'disabled') {\n        return muted[name].disabled\n      }\n\n      const isNeutral = NEUTRAL_TONES.includes(name)\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const tints: LegacyThemeTints = stateTones[name] || stateTones.default\n\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n\n      if (state === 'pressed') {\n        if (isNeutral) {\n          return muted.primary.pressed\n        }\n\n        return muted[name].pressed\n      }\n\n      if (state === 'selected') {\n        if (isNeutral) {\n          return solid.primary.enabled\n        }\n\n        return solid[name].enabled\n      }\n\n      const bg = base.bg\n      const skeletonFrom = blend(base.bg, tints[dark ? 900 : 100])\n\n      return {\n        bg,\n        fg: base.fg,\n        border: base.border,\n        muted: {\n          fg: blend(base.bg, tints[dark ? 400 : 600]),\n        },\n        accent: {\n          fg: blend(base.bg, stateTones.critical[dark ? 400 : 500]),\n        },\n        link: {\n          fg: blend(base.bg, stateTones.primary[dark ? 400 : 600]),\n        },\n        code: {\n          bg: blend(base.bg, tints[dark ? 950 : 50]),\n          fg: tints[dark ? 400 : 600],\n        },\n        skeleton: {\n          from: skeletonFrom,\n          to: rgba(skeletonFrom, 0.5),\n        },\n      }\n    },\n\n    input: ({base, dark: navbar, mode, state}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n\n      if (mode === 'invalid') {\n        const tints = stateTones.critical\n\n        return {\n          bg: blend(base.bg, tints[50]),\n          fg: blend(base.bg, tints[700]),\n          border: blend(base.bg, tints[200]),\n          placeholder: blend(base.bg, tints[400]),\n        }\n      }\n\n      if (state === 'hovered') {\n        return {\n          bg: base.bg,\n          fg: base.fg,\n          border: blend(base.bg, hues.gray[300].hex),\n          placeholder: blend(base.bg, hues.gray[400].hex),\n        }\n      }\n\n      if (state === 'disabled') {\n        return {\n          bg: blend(base.bg, hues.gray[50].hex),\n          fg: blend(base.bg, hues.gray[200].hex),\n          border: blend(base.bg, hues.gray[100].hex),\n          placeholder: blend(base.bg, hues.gray[100].hex),\n        }\n      }\n\n      if (state === 'readOnly') {\n        return {\n          bg: blend(base.bg, hues.gray[50].hex),\n          fg: blend(base.bg, hues.gray[800].hex),\n          border: blend(base.bg, hues.gray[200].hex),\n          placeholder: blend(base.bg, hues.gray[400].hex),\n        }\n      }\n\n      return {\n        bg: base.bg,\n        fg: base.fg,\n        border: base.border,\n        placeholder: blend(base.bg, hues.gray[700].hex),\n      }\n    },\n\n    selectable: ({base, muted, tone, solid, state}) => {\n      if (state === 'enabled') {\n        return {\n          ...muted[tone].enabled,\n          bg: base.bg,\n        }\n      }\n\n      if (state === 'pressed') {\n        if (tone === 'default') {\n          return muted.primary.pressed\n        }\n\n        return muted[tone].pressed\n      }\n\n      if (state === 'selected') {\n        if (tone === 'default') {\n          return solid.primary.enabled\n        }\n\n        return solid[tone].enabled\n      }\n\n      if (state === 'disabled') {\n        return {\n          ...muted[tone].disabled,\n          bg: base.bg,\n        }\n      }\n\n      return muted[tone][state]\n    },\n\n    spot: ({base, key}) => {\n      const dark = _isDark(base.bg, base.fg)\n      const blend = dark ? _screen : _multiply\n\n      return blend(base.bg, hues[key][dark ? 400 : 500].hex)\n    },\n\n    syntax: ({base, dark: navbar}) => {\n      const stateTones = navbar ? legacyTones.state.navbar : legacyTones.state.default\n      const dark = stateTones.dark\n      const blend = dark ? _screen : _multiply\n      const mainShade = 600\n      const secondaryShade = 400\n\n      return {\n        atrule: blend(base.bg, hues.purple[mainShade].hex),\n        attrName: blend(base.bg, stateTones.positive[mainShade]),\n        attrValue: blend(base.bg, stateTones.caution[mainShade]),\n        attribute: blend(base.bg, stateTones.caution[mainShade]),\n        boolean: blend(base.bg, hues.purple[mainShade].hex),\n        builtin: blend(base.bg, hues.purple[mainShade].hex),\n        cdata: blend(base.bg, stateTones.caution[mainShade]),\n        char: blend(base.bg, stateTones.caution[mainShade]),\n        class: blend(base.bg, hues.orange[mainShade].hex),\n        className: blend(base.bg, hues.cyan[mainShade].hex),\n        comment: blend(base.bg, stateTones.default[secondaryShade]),\n        constant: blend(base.bg, hues.purple[mainShade].hex),\n        deleted: blend(base.bg, stateTones.critical[mainShade]),\n        doctype: blend(base.bg, stateTones.default[secondaryShade]),\n        entity: blend(base.bg, stateTones.critical[mainShade]),\n        function: blend(base.bg, stateTones.positive[mainShade]),\n        hexcode: blend(base.bg, stateTones.primary[mainShade]),\n        id: blend(base.bg, hues.purple[mainShade].hex),\n        important: blend(base.bg, hues.purple[mainShade].hex),\n        inserted: blend(base.bg, stateTones.caution[mainShade]),\n        keyword: blend(base.bg, hues.magenta[mainShade].hex),\n        number: blend(base.bg, hues.purple[mainShade].hex),\n        operator: blend(base.bg, hues.magenta[mainShade].hex),\n        prolog: blend(base.bg, stateTones.default[secondaryShade]),\n        property: blend(base.bg, stateTones.primary[mainShade]),\n        pseudoClass: blend(base.bg, stateTones.caution[mainShade]),\n        pseudoElement: blend(base.bg, stateTones.caution[mainShade]),\n        punctuation: blend(base.bg, stateTones.default[mainShade]),\n        regex: blend(base.bg, stateTones.primary[mainShade]),\n        selector: blend(base.bg, stateTones.critical[mainShade]),\n        string: blend(base.bg, stateTones.caution[mainShade]),\n        symbol: blend(base.bg, hues.purple[mainShade].hex),\n        tag: blend(base.bg, stateTones.critical[mainShade]),\n        unit: blend(base.bg, hues.orange[mainShade].hex),\n        url: blend(base.bg, stateTones.critical[mainShade]),\n        variable: blend(base.bg, stateTones.critical[mainShade]),\n      }\n    },\n  })\n}\n","import {studioTheme as defaults, ThemeFonts} from '@sanity/ui'\nimport {LegacyThemeProps} from './types'\n\nexport function buildFonts(cssCustomProperties: LegacyThemeProps): ThemeFonts {\n  return {\n    ...defaults.fonts,\n    code: {\n      ...defaults.fonts.code,\n      family: cssCustomProperties['--font-family-monospace'] || defaults.fonts.code.family,\n    },\n    heading: {\n      ...defaults.fonts.heading,\n      family: cssCustomProperties['--font-family-base'] || defaults.fonts.code.family,\n    },\n    label: {\n      ...defaults.fonts.label,\n      family: cssCustomProperties['--font-family-base'] || defaults.fonts.code.family,\n    },\n    text: {\n      ...defaults.fonts.text,\n      family: cssCustomProperties['--font-family-base'] || defaults.fonts.code.family,\n    },\n  }\n}\n","import {_toHex} from './helpers'\nimport {LegacyThemeProps} from './types'\n\nexport interface LegacyPalette {\n  black: string\n  component: {\n    bg: string\n    fg: string\n  }\n  defaultButton: {\n    default: {\n      base: string\n    }\n    primary: {\n      base: string\n    }\n    success: {\n      base: string\n    }\n    warning: {\n      base: string\n    }\n    danger: {\n      base: string\n    }\n  }\n  focus: {\n    base: string\n  }\n  gray: {\n    base: string\n  }\n  mainNavigation: {\n    bg: string\n    fg: string\n  }\n  state: {\n    info: {\n      fg: string\n    }\n    success: {\n      fg: string\n    }\n    warning: {\n      fg: string\n    }\n    danger: {\n      fg: string\n    }\n  }\n}\n\nexport function buildLegacyPalette(cssCustomProperties: LegacyThemeProps): LegacyPalette {\n  return {\n    black: _toHex(cssCustomProperties['--black']),\n    component: {\n      bg: _toHex(cssCustomProperties['--component-bg']),\n      fg: _toHex(cssCustomProperties['--component-text-color']),\n    },\n    defaultButton: {\n      default: {\n        base: _toHex(cssCustomProperties['--default-button-color']),\n      },\n      primary: {\n        base: _toHex(cssCustomProperties['--default-button-primary-color']),\n      },\n      success: {\n        base: _toHex(cssCustomProperties['--default-button-success-color']),\n      },\n      warning: {\n        base: _toHex(cssCustomProperties['--default-button-warning-color']),\n      },\n      danger: {\n        base: _toHex(cssCustomProperties['--default-button-danger-color']),\n      },\n    },\n    focus: {\n      base: _toHex(cssCustomProperties['--focus-color']),\n    },\n    gray: {\n      base: _toHex(cssCustomProperties['--gray-base']),\n    },\n    mainNavigation: {\n      bg: _toHex(cssCustomProperties['--main-navigation-color']),\n      fg: _toHex(cssCustomProperties['--main-navigation-color--inverted']),\n    },\n    state: {\n      info: {\n        fg: _toHex(cssCustomProperties['--state-info-color']),\n      },\n      success: {\n        fg: _toHex(cssCustomProperties['--state-success-color']),\n      },\n      warning: {\n        fg: _toHex(cssCustomProperties['--state-warning-color']),\n      },\n      danger: {\n        fg: _toHex(cssCustomProperties['--state-danger-color']),\n      },\n    },\n  }\n}\n","import {_buildTints, _isDark} from './helpers'\nimport {LegacyThemeTints} from './types'\nimport {LegacyPalette} from './palette'\n\nexport interface LegacyTones {\n  button: {\n    default: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n\n    navbar: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n  }\n\n  state: {\n    default: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n\n    navbar: {\n      bg: string\n      fg: string\n      dark: boolean\n\n      default: LegacyThemeTints\n      transparent: LegacyThemeTints\n      primary: LegacyThemeTints\n      positive: LegacyThemeTints\n      caution: LegacyThemeTints\n      critical: LegacyThemeTints\n    }\n  }\n}\n\nexport function buildLegacyTones(legacyPalette: LegacyPalette): LegacyTones {\n  return {\n    state: {\n      default: {\n        bg: legacyPalette.component.bg,\n        fg: legacyPalette.component.fg,\n        dark: _isDark(legacyPalette.component.bg, legacyPalette.component.fg),\n        default: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.gray.base,\n          legacyPalette.component.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.gray.base,\n          legacyPalette.component.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.info.fg,\n          legacyPalette.component.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.success.fg,\n          legacyPalette.component.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.warning.fg,\n          legacyPalette.component.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.state.danger.fg,\n          legacyPalette.component.fg\n        ),\n      },\n      navbar: {\n        bg: legacyPalette.mainNavigation.bg,\n        fg: legacyPalette.mainNavigation.fg,\n        dark: _isDark(legacyPalette.mainNavigation.bg, legacyPalette.mainNavigation.fg),\n\n        default: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.gray.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.gray.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.info.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.success.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.warning.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.state.danger.fg,\n          legacyPalette.mainNavigation.fg\n        ),\n      },\n    },\n    button: {\n      default: {\n        bg: legacyPalette.component.bg,\n        fg: legacyPalette.component.fg,\n        dark: _isDark(legacyPalette.component.bg, legacyPalette.component.fg),\n\n        default: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.component.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.component.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.primary.base,\n          legacyPalette.component.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.success.base,\n          legacyPalette.component.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.warning.base,\n          legacyPalette.component.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.component.bg,\n          legacyPalette.defaultButton.danger.base,\n          legacyPalette.component.fg\n        ),\n      },\n      navbar: {\n        bg: legacyPalette.mainNavigation.bg,\n        fg: legacyPalette.mainNavigation.fg,\n        dark: _isDark(legacyPalette.mainNavigation.bg, legacyPalette.mainNavigation.fg),\n\n        default: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        transparent: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.default.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        primary: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.primary.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        positive: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.success.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        caution: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.warning.base,\n          legacyPalette.mainNavigation.fg\n        ),\n        critical: _buildTints(\n          legacyPalette.mainNavigation.bg,\n          legacyPalette.defaultButton.danger.base,\n          legacyPalette.mainNavigation.fg\n        ),\n      },\n    },\n  }\n}\n","import {black, blue, gray, green, red, white, yellow} from '@sanity/color'\nimport {studioTheme as defaults} from '@sanity/ui'\nimport {StudioTheme} from '../types'\nimport {buildColor} from './color'\nimport {buildFonts} from './fonts'\nimport {_isDark} from './helpers'\nimport {buildLegacyPalette} from './palette'\nimport {buildLegacyTones} from './tones'\nimport {LegacyThemeProps} from './types'\n\n/**\n * Build a Sanity UI theme from legacy CSS properties.\n *\n * @example\n * ```tsx\n * import {buildLegacyTheme, defineConfig} from 'sanity'\n *\n * export default defineConfig({\n *   // project configuration ...\n *\n *   // Customize theming\n *   theme: buildLegacyTheme({\n *     '--black': '#000',\n *     '--gray': '#777',\n *     '--focus-color': '#00f',\n *   })\n * })\n * ```\n *\n * @public\n */\nexport function buildLegacyTheme(partialLegacyTheme: Partial<LegacyThemeProps>): StudioTheme {\n  const legacyTheme = resolveLegacyTheme(partialLegacyTheme)\n  const legacyPalette = buildLegacyPalette(legacyTheme)\n  const legacyTones = buildLegacyTones(legacyPalette)\n\n  const color = buildColor(legacyPalette, legacyTones)\n  const fonts = buildFonts(legacyTheme)\n\n  return {\n    __dark: _isDark(color.light.default.base.bg, color.light.default.base.fg),\n    __legacy: true,\n    ...defaults,\n    color,\n    focusRing: {\n      offset: -1,\n      width: 2,\n    },\n    fonts,\n    media: [\n      parseInt(legacyTheme['--screen-medium-break'], 10) || 512,\n      parseInt(legacyTheme['--screen-default-break'], 10) || 640,\n      parseInt(legacyTheme['--screen-large-break'], 10) || 960,\n      parseInt(legacyTheme['--screen-xlarge-break'], 10) || 1600,\n    ],\n  }\n}\n\nconst defaultCustomProperties: LegacyThemeProps = {\n  '--font-family-monospace': defaults.fonts.code.family,\n  '--font-family-base': defaults.fonts.text.family,\n\n  '--black': black.hex,\n  '--white': white.hex,\n\n  // Brand\n  '--brand-primary': blue[500].hex,\n\n  // Component\n  '--component-bg': white.hex,\n  '--component-text-color': black.hex,\n\n  // Gray\n  '--gray': gray[500].hex,\n  '--gray-base': gray[500].hex,\n\n  // Default button\n  '--default-button-color': gray[500].hex,\n  '--default-button-danger-color': red[500].hex,\n  '--default-button-primary-color': blue[500].hex,\n  '--default-button-success-color': green[500].hex,\n  '--default-button-warning-color': yellow[500].hex,\n\n  // Focus\n  '--focus-color': blue[500].hex,\n\n  // Screen\n  '--screen-medium-break': '512px',\n  '--screen-default-break': '640px',\n  '--screen-large-break': '960px',\n  '--screen-xlarge-break': '1600px',\n\n  // State\n  '--state-info-color': blue[500].hex,\n  '--state-success-color': green[500].hex,\n  '--state-warning-color': yellow[500].hex,\n  '--state-danger-color': red[500].hex,\n\n  // Navbar\n  '--main-navigation-color': black.hex,\n  '--main-navigation-color--inverted': white.hex,\n}\n\nfunction resolveLegacyTheme(legacyTheme: Partial<LegacyThemeProps>): LegacyThemeProps {\n  const props: LegacyThemeProps = {\n    ...defaultCustomProperties,\n    ...legacyTheme,\n  }\n\n  // Update properties (order matters)\n  props['--focus-color'] = legacyTheme['--focus-color'] || props['--brand-primary']\n  props['--default-button-primary-color'] =\n    legacyTheme['--default-button-primary-color'] || props['--brand-primary']\n  props['--main-navigation-color'] = legacyTheme['--main-navigation-color'] || props['--black']\n  props['--main-navigation-color--inverted'] =\n    legacyTheme['--main-navigation-color--inverted'] || props['--white']\n  props['--state-info-color'] = legacyTheme['--brand-primary'] || props['--brand-primary']\n\n  return props\n}\n","import {studioTheme} from '@sanity/ui'\nimport {StudioTheme} from './types'\n\nexport * from './_legacy'\nexport * from './types'\n\n/** @internal */\nexport const defaultTheme: StudioTheme = {\n  ...studioTheme,\n  focusRing: {offset: -1, width: 2},\n}\n"],"names":["noop","NoopTracker","children","jsx","Fragment","createNoopTrackerScope","useReportedValues","Tracker","useReporter","isFunc","value","read","createUseReporter","Context","id","isEqual","Object","is","add","update","remove","React","useContext","previous","useRef","useLayoutEffect","current","createStore","reportedValues","Map","publish","subscribe","createPubsub","debouncedPublish","debounce","trailing","Array","from","entries","has","set","delete","didWarn","useReporterGuard","console","warn","Error","useReportedValueGuard","useSubscribeGuard","DEFAULT_CONTEXT","getNextId","createTrackerScope","createContext","context","values","setValues","useState","props","store","useMemo","Provider","useAutoIdReporter","CORNER_RADIUS","INTERACTIVE_STROKE_WIDTH","CONNECTOR_MARGIN","ARROW_MARGIN_X","ARROW_MARGIN_Y","ARROW_SIZE","ARROW_THRESHOLD","STROKE_WIDTH","DEBUG","DEBUG_LAYER_BOUNDS","trackerScope","ConnectorContext","isReviewChangesOpen","onOpenReviewChanges","onSetFocus","ChangeFieldWrapper","ref","isHover","setHover","onMouseEnter","useCallback","onMouseLeave","PathUtils","toString","path","element","isChanged","hasFocus","hasHover","hasRevertHover","deepCompare","handleClick","event","setFocusWithStopPropagation","onClick","stopPropagation","useUnique","valueRef","createHookFromObservableFactory","observableFactory","initialValue","initialLoadingTuple","initialResult","type","tuple","useLoadableFromCreateLoadable","_arg","memoArg","result","useMemoObservable","of","pipe","switchMap","arg","concat","map","scan","next","prevValue","distinctUntilChanged","prevIsLoading","nextValue","nextIsLoading","catchError","error","isNonNullable","DRAFTS_FOLDER","DRAFTS_PREFIX","isDraft","document","isDraftId","_id","startsWith","getIdPair","draftId","getDraftId","publishedId","getPublishedId","isPublishedId","slice","length","createDraftFrom","newDraftFrom","createPublishedFrom","collate","documents","byId","reduce","res","doc","entry","get","_type","published","draft","removeDupes","filter","EMPTY_OBJECT","freeze","EMPTY_ARRAY","getGlobalScope","globalThis","window","self","global","globalScope","isArray","isRecord","Boolean","isString","isTruthy","ResizeObserver","Polyfill","createSharedResizeObserver","createPubSub","resizeObserver","observe","observer","options","unsubscribe","find","e","target","unobserve","BUNDLED_DOC_TYPES","_isSanityDocumentTypeDefinition","def","includes","name","_isCustomDocumentTypeDefinition","GROQ_KEYWORDS","VALID_FIELD","fieldNeedsEscape","fieldName","test","escapeField","escapeFirst","isEmptyArray","joinPath","pathArray","i","pathSegment","isFirst","needsEscape","FONT_SANS_SERIF","FONT_MONOSPACE","uncaughtErrorHandler","join","LOADING_STATE","isLoading","useLoadable","value$","initial","asLoadable","useThrottledCallback","callback","wait","throttledCallback","throttle","animationSpeed","ChangeBarWrapper","styled","div","changed","disabled","isReviewChangeOpen","css","ChangeBar","ChangeBarButton","FieldWrapper","$zIndex","ChangeBarMarker","theme","notSelectedColor","sanity","color","spot","yellow","screenMedium","media","button","$withHoverEffect","ElementWithChangeBar","withHoverEffect","hover","zIndex","useLayer","handleMouseEnter","handleMouseLeave","changeBar","jsxs","tabIndex","focus","memo","className","layer","ChangeIndicator","ChangeIndicatorContext","fullPath","focusPath","ScrollContext","useOnScroll","parentContext","useEffect","ScrollContainer","forwardRef","as","onScroll","rest","forwardedRef","useForwardedRef","childContext","handleScroll","el","addEventListener","passive","capture","removeEventListener","createElement","ScrollMonitor","findMostSpecificTarget","targetType","pathString","indexOf","fromString","exactId","mostSpecific","targetId","numEqual","numEqualSegments","lastPathSegment","pathOnlyDiffersByKey","isKeyedObject","isChangeBar","v","hasOverflowScroll","overflow","getComputedStyle","isScrollable","scrollableContent","scrollHeight","offsetHeight","scrollWidth","offsetWidth","SCROLL_INTO_VIEW_TOP_PADDING","scrollIntoView","field","parentElementWithScroll","parentElement","scroll","top","scrollTop","rect","bounds","left","behavior","getOffsetsTo","source","height","width","foundScrollContainer","contains","offsetTop","offsetLeft","scrollLeft","offsetParent","arrowPath","x","y","dir","moveTo","lineTo","strings","delim","quadCurve","x1","y1","generateConnectorPath","line","to","fromX","fromY","toX","toY","cmds","r1","Math","min","abs","isAbove","push","isBelow","getConnectorLinePoint","centerY","startY","endY","outOfBounds","mapConnectorToLine","connector","fromBounds","bottom","right","toBounds","maxStartY","max","ClampedRect","ConnectorPath","strokeColor","InteractivePath","RightBarWrapper","Connector","linePathDescription","d","strokeWidth","useResizeObserver","onResize","SvgWrapper","svg","getState","allReportedValues","hovered","rootElement","changeBarsWithHover","changeBarsWithFocus","reportedChangeBar","isHoverConnector","changeBars","connectors","change","ConnectorsOverlay","setHovered","setState","visibleConnectors","sortBy","c","handleScrollOrResize","style","ConnectorGroup","onConnectorClick","EnabledChangeConnectorRoot","restProps","setRootElement","contextValue","DisabledChangeConnectorRoot","ChangeConnectorRoot","NoJsStyles","NoJavascript","href","errorHandlerScript","GlobalErrorHandler","dangerouslySetInnerHTML","__html","Favicons","basePath","base","replace","rel","sizes","globalStyles","DefaultDocument","entryPath","lang","charSet","content","src","InsufficientPermissionsMessage","currentUser","title","operationLabel","roles","plural","Box","padding","Inline","space","Text","size","AccessDeniedIcon","weight","marginTop","r","array","sep","item","IntentButton","Button","role","IntentLink","StyledCard","Card","PreviewCardContext","selected","usePreviewCard","PreviewCard","forwardedAs","TextWithToneStyle","$tone","tone","muted","enabled","fg","TextWithTone","dimmed","createMultiKeyWeakMap","rootMap","WeakMap","idCache","randomId","floor","random","padStart","assignId","key","cachedId","arrangeKeys","keys","Set","sort","a","b","localeCompare","getDeep","firstKey","restOfKeys","node","setDeep","ResourceCacheContext","ResourceCacheProvider","resourceCache","namespaces","nullReplacer","namespace","dependencies","dependenciesWithoutNull","dep","namespaceMap","useResourceCache","cache","CorsOriginError","constructor","projectId","supportsLocalStorage","localStorage","setItem","removeItem","err","memStore","getItem","createBroadcastChannel","storageEvents$","fromEvent","storageKey","broadcastedMessages$","Subject","messages$","merge","newValue","JSON","parse","shareReplay","broadcast","message","storage.setItem","stringify","storage.removeItem","messages","sidPattern","consumeSessionId","location","hash","sidParam","match","sid","newHash","newUrl","URL","history","replaceState","sessionId","GithubRoot","GithubLogo","xmlns","viewBox","GoogleLogo","fill","CustomLogo","provider","logo","alt","providerLogos","google","github","custom","getProviders","client","mode","providers","customProviders","thirdPartyLogin","sso","request","uri","isOfficial","some","official","url","isSupported","supported","createHrefForProvider","loginMethod","params","URLSearchParams","origin","createLoginComponent","getClient","redirectOnSingle","providerOptions","useClient","LoginComponent","setProviders","setError","then","catch","redirectUrl","loading","Flex","align","direction","gap","justify","sizing","Spinner","Stack","Heading","index","icon","text","getStorageKey","getToken","storage.getItem","token","clearToken","saveToken","time","Date","toISOString","getCurrentUser","broadcastToken","_a","user","withCredentials","tag","statusCode","config","invalidCorsConfig","isNetworkError","host","_createAuthStore","dataset","token$","startWith","state$","createClient","apiVersion","useCdn","requestTagPrefix","ignoreBrowserTokenWarning","allowReconfigure","defer","authenticated","handleCallbackUrl","requestClient","method","query","logout","auth","state","fromEntries","k","createAuthStore","memoize","createMockAuthStore","getProviderTitle","catchWithCount","selector","input$","errors","errorOp","caught","tap","onOnline$","onOffline$","expBackoff","retryCount","pow","CONNECTING","_callback","observableCallback","onRetry$","onRetry","createErrorStatus","isOffline","attemptNo","retryAt","createConnectionStatusStore","bifur","connectionStatus$","heartbeats","mergeMapTo","throwError","ts","lastHeartbeat","successiveErrorsCount","timeUntilRetry","getTime","expiry$","timer","navigator","onLine","initialErrorStatus","triggerRetry$","NEVER","takeUntil","take","GlobalStyle","createGlobalStyle","fonts","html","backgroundColor","bg","fontFamily","family","defineConfig","createConfig","validatePlugin","pluginResult","definePlugin","pluginFactory","createPlugin","slug","fields","hidden","geopoint","imageCrop","imageHotspot","assetSourceData","description","imageAsset","fieldsets","readOnly","fieldset","preview","select","mimeType","prepare","split","asset","_ref","subtitle","Number","toFixed","orderings","by","imagePalette","imagePaletteSwatch","imageDimensions","imageMetadata","collapsable","fileAsset","isError","problem","severity","builtinTypes","createSchema","schemaDef","validated","validateSchema","types","getTypes","validation","groupProblems","hasErrors","group","problems","compiled","SchemaBuilder","compile","_validation","inferValidation","getSchemaTypeTitle","jsonType","DEFAULT_STUDIO_CLIENT_OPTIONS","FullscreenLayer","Layer","FullscreenSpinner","SpinnerWithText","marginLeft","_extractUploadState","_upload","restValue","_resolveUploadValue","progress","initiated","updated","fileName","file","fileType","previewImage","_previewComponents","default","DefaultPreview","MediaPreview","detail","DetailPreview","inline","InlinePreview","block","BlockPreview","blockImage","BlockImagePreview","FallbackIcon","DocumentIcon","SanityDefaultPreview","descriptionProp","layout","mediaProp","subtitleProp","titleProp","valueProp","imageBuilder","imageUrlBuilder","component","String","renderMedia","isImage","dimensions","referrerPolicy","image","fit","dpr","renderIcon","isValidElementType","isValidElement","isReference","previewProps","imageUrl","INITIAL_STATE","useDocumentPreview","ordering","schemaType","previewValue","observeForPreview","useDocumentPreviewStore","snapshotEvent$","sub","snapshot","nextState","resize$","EMPTY","scroll$","orientationChange$","ROOT_MARGIN_PX","isIntersectionObserverSupported","IntersectionObserverEntry","prototype","defineProperty","intersectionRatio","intersectionObservableFor","createIntersectionObserverBased","createLegacyBased","intersectionObserverEntriesSubject","intersectionObserver","IntersectionObserver","forEach","threshold","rootMargin","Observable","mergeMap","asObservable","ev","isIntersecting","getViewport","innerWidth","innerHeight","intersects","viewport","margin","inViewport","getBoundingClientRect","isElementInViewport","observableOf","visibilityChange$","useVisibility","hideDelay","visible","setVisible","isDocumentVisible$","Document","inViewport$","visible$","isDocumentVisible","isVisible","delay","_HIDE_DELAY","_resolvePreviewComponent","components","SanityPreview","styleProp","setElement","isPTE","visibility","setRef","refValue","minWidth","minHeight","isPlaceholder","restSchemaType","getPreviewPaths","selection","isLiveEditEnabled","liveEdit","getPreviewStateObservable","documentPreviewStore","documentId","draft$","published$","combineLatest","getMissingDocumentFallback","WarningOutlineIcon","getPreviewValueWithFallback","assignWith","objValue","srcValue","INCLUDE_FIELDS_QUERY","INCLUDE_FIELDS","AVAILABILITY_READABLE","available","reason","AVAILABILITY_PERMISSION_DENIED","AVAILABILITY_NOT_FOUND","INVALID_PREVIEW_FALLBACK","isPortableTextArray","blocks","isBlock","extractTextFromBlocks","firstBlock","isSpan","span","keysOf","PRESERVE_KEYS","errorCollector","errorsByType","getAll","clear","reportErrors","uniqueErrors","flatten","typeName","uniqBy","errorCount","groupCollapsed","first","uniqued","hasPrepare","log","groupEnd","isRenderable","assignType","inspect","FIELD_NAME_VALIDATORS","date","val","prefixType","ellipse","prefix","validateFieldValue","fieldValue","validator","assign","validatePreparedValue","preparedValue","isPlainObject","acc","validateReturnedPreview","returnValue","defaultPrepare","invokePrepare","viewOptions","withErrors","selectedValue","hasEnumListOptions","listOptions","list","getListOptions","option","isTitledListValue","prepareForPreview","rawValue","_b","hasCustomPrepare","targetKeys","typeWithFields","targetFieldName","valueField","f","selectedOption","opt","prepareResult","returnValueResult","pick","debounceCollect","fn","queue","idx","debounced","args","obs","clearTimeout","setTimeout","flush","queueItem","completed","currentlyFlushingQueue","queueItemIds","collectedArgs","results","complete","MAX_DOCUMENT_ID_CHUNK_SIZE","chunkDocumentIds","documentIds","chunk","chunkSize","chunks","create_preview_availability","versionedClient","observePaths","observeDocumentPairAvailability","observeDocumentAvailability","shallowEquals","draftReadability","publishedReadability","_rev","hasRev","fetchDocumentReadability","uniqueIds","fetchDocumentReadabilityChunked","ids","requestOptions","getDataUrl","json","excludeContent","observable","response","omitted","keyBy","omittedEntry","setKey","object","keyObservables","isObservable","observableFrom","combineAll","pairs","mergeAll","createEmpty","resolveMissingHeads","paths","isReferenceLike","observeFields","apiConfig","currentValue","_weak","_dataset","_projectId","_strengthenOnPublish","pathsWithMissingHeads","nextHeads","uniq","refApiConfig","leads","head","tail","tails","normalizePaths","segment","createPathObserver","createPreviewObserver","observeDocumentTypeFromId","isCrossDatasetReferenceSchemaType","isCrossDatasetReference","refType","toType","isReferenceSchemaType","create_preview_documentPair","ALWAYS_INCLUDED_SNAPSHOT_PATHS","observePathsDocumentPair","availability","snapshotPaths","draftSnapshot","publishedSnapshot","combineSelections","selections","output","identity","stringifyId","maybeEscape","toSubQuery","allFields","toQuery","combinedSelections","reassemble","queryResult","reprojected","subResult","resultIdx","found","hasEqualFields","otherObject","every","isUniqueBy","itemSelector","prevItem","currItem","create_preview_observeFields","_globalListener","getGlobalEvents","allEvents$","listen","events","includeResult","share","welcome$","publishReplay","refCount","mutations$","globalEvents","fetchAllDocumentPathsWith","fetchAllDocumentPath","fetch","fetchDocumentPathsFast","fetchDocumentPathsSlow","currentDatasetListenFields","CACHE","getBatchFetcherForDataset","withConfig","fetchAll","CROSS_DATASET_PREVIEW_POLL_INTERVAL","visiblePoll$","visibilityState","crossDatasetListenFields","batchFetcher","createCachedFieldObserver","latest","changes$","cachedObserveFields","cacheKey","existingObservers","missingFields","difference","cachedFieldObserver","cachedFieldObservers","cached","snapshots","pickFrom","objects","getFirstFieldValue","createDocumentPreviewStore","__proxy_observePaths","unstable_observeDocumentPairAvailability","unstable_observePathsDocumentPair","DocumentList","assetType","referringDocuments","count","hasResults","filenamePlaceholder","originalFilename","borderBottom","paddingBottom","marginBottom","textOverflow","DocumentLink","schema","useSchema","LinkComponent","linkProps","intent","paddingY","paddingX","radius","STYLE_ASSET_IMAGE","maxWidth","objectFit","objectPosition","STYLE_CONFIRM_CARD","gridColumn","display","alignSelf","justifyContent","STYLE_IMAGE_WRAPPER","ConfirmMessage","border","Grid","columns","__unstable_checkered","MODE_CONFIRM_DELETE","MODE_LIST_USAGE","AssetUsageDialog","documentStore","useDocumentStore","WithReferringDocuments","InnerAssetUsageDialog","assetIsLoading","isDeleting","onClose","onDelete","isListMode","defaultHeaderTitle","canDelete","setCanDelete","isLoadingParent","setIsLoadingParent","publishedDocuments","setPublishedDocuments","showActionFooter","showDocumentList","noPaddingOnStack","footer","TrashIcon","drafts","documentsWithoutDrafts","Dialog","header","__unstable_autoFocus","AssetMenu","isSelected","onAction","triggerButtonMode","triggerButtonTone","MenuButton","EllipsisVerticalIcon","portal","menu","Menu","MenuItem","LinkIcon","placement","DPI","devicePixelRatio","round","Image","img","Container","Root","MenuContainer","AssetThumb","toast","useToast","deleteRef$","onKeyPress","onDeleteFinished","showUsageDialog","setShowUsageDialog","showDeleteDialog","setShowDeleteDialog","setIsDeleting","handleConfirmDelete","handleDialogClose","handleToggleUsageDialog","handleDeleteError","closable","status","handleDeleteSuccess","handleDeleteAsset","handleMenuAction","action","imgH","BYTE_UNITS","BIBYTE_UNITS","BIT_UNITS","BIBIT_UNITS","toLocaleString","number","locale","prettyBytes","input","bits","binary","signed","minimumFractionDigits","maximumFractionDigits","isFinite","TypeError","UNITS","isNegative","localeOptions","numberString","exponent","log10","toPrecision","unit","MIME_TYPES","convertMimeTypeToSomethingNice","part","charAt","toUpperCase","formatMimeType","CardIconWrapper","CustomFlex","CustomText","CustomCard","RowButton","STYLES_ROW_CARD","position","STYLES_ICON_CARD","flexShrink","STYLES_BUTTON_TEXT","STYLES_ASSETMENU_WRAPPER","DISABLED_DELETE_TITLE","AssetRow","isOpen","setIsOpen","isMobile","_createdAt","formattedTime","useTimeAgo","agoSuffix","formattedMimeType","formattedSize","showTooltip","handleToggleOpen","gridTemplateColumns","opacity","flex","paddingRight","fontSize","ChevronUpIcon","ChevronDownIcon","Label","Tooltip","fallbackPlacements","dateTime","STYLES_FILENAME","paddingLeft","STYLES_GRID","TableList","mediaIndex","useMediaIndex","assets","selectedAssets","paddingTop","PER_PAGE","ASSET_TYPE_IMAGE","ASSET_TYPE_FILE","buildQuery","start","end","ThumbGrid","CardLoadMore","DefaultAssetSource","_elementId","uniqueId","currentPageNumber","fetch$","setAssets","isLastPage","setIsLastPage","hasResetAutoFocus","setHasResetFocus","setIsLoading","dialogHeaderTitle","onSelect","fetchPage","pageNumber","isImageAssetType","assetTypeParam","prevState","handleDeleteFinished","selectedSource","kind","handleItemClick","preventDefault","currentTarget","getAttribute","handleItemKeyPress","handleClose","handleFetchNextPage","renderedThumbView","renderedTableView","DownloadIcon","DefaultSource","FileSource","DocumentsIcon","ImageSource","ImageIcon","initialDocumentBadges","initialDocumentActions","initialLanguageFilter","schemaTypesReducer","prev","schemaTypes","resolveProductionUrlReducer","resolveProductionUrl","productionUrl","toolsReducer","tools","schemaTemplatesReducer","schemaTemplates","templates","documentBadgesReducer","documentBadges","badges","documentActionsReducer","documentActions","actions","newDocumentOptionsResolver","resolveNewDocumentOptions","newDocumentOptions","fileAssetSourceResolver","form","assetSources","imageAssetSourceResolver","documentLanguageFilterReducer","resolveDocumentLanguageFilter","unstable_languageFilter","ConfigPropertyError","propertyName","cause","flattenConfig","plugins","currentConfig","flatMap","resolveConfigProperty","inputConfig","reducers","configs","reducer","asyncReducer","ConfigResolutionError","causes","SchemaError","pseudoRandomNumber","seed","hashCode","prevHash","currVal","charCodeAt","SvgText","heading","weights","bold","createDefaultIcon","rng1","huesWithoutGray","COLOR_HUES","hue","colorHue","possibleTints","rng2","tint","hues","hex","letters","word","darkened","darken","lightened","lighten","textColor","hasBadContrast","readableColor","rx","textAnchor","alignmentBaseline","dominantBaseline","normalizeIcon","prepareConfig","workspaceOptions","validateWorkspaces","workspaces","unstable_sources","nestedSources","rootSource","sources","resolvedSources","schemaValidationProblemGroups","schemaErrors","msg","p","source$","resolveSource","startCase","workspaceSummary","studioTheme","__internal","getBifurClient","bifurVersionedClient","getUrl","fromUrl","_c","_d","clients","wrappedClient","__proto__","original","hasOwnProperty","call","getTypeNames","template","initialTemplatesResponses","parameters","templateId","templateMap","creationContext","schemaTypeName","templateResponses","templateErrors","defaultSubtitle","initialDocumentId","staticInitialValueTemplateItems","partialContext","directUploads","resolveConfig","createWorkspaceFromConfig","workspace","toPromise","createSourceFromConfig","useConfigContextFromSource","getConfigContextFromSource","emptyRender","_createMiddlewareComponent","defaultComponent","middlewareComponents","outerProps","middleware","renderDefault","_collectPluginValues","plugin","_pickFromPluginOptions","_middleware","useMiddlewareComponents","useSource","StudioLogo","isDev","process","env","NODE_ENV","isProd","WorkspaceContext","WorkspaceProvider","useWorkspace","ColorSchemeContext","ColorSchemeProvider","onSchemeChange","scheme","schemeProp","prefersDark","usePrefersDark","setScheme","nextScheme","colorScheme","ThemeProvider","useColorScheme","WorkspacesContext","WorkspacesProvider","getWorkspaceIdentifier","trim","getNamelessWorkspaceIdentifier","withTitle","useWorkspaces","WorkspaceValidationError","identifier","validateNames","validateBasePaths","isSingleWorkspace","names","rawName","thisIdentifier","normalized","toLowerCase","existingWorkspace","prevIdentifier","hasBasePath","validateBasePath","firstWorkspace","restOfWorkspaces","firstWorkspaceSegmentCount","substring","workspaceSegmentCount","basePaths","NoToolsScreen","shadow","ToolNotFoundScreen","toolName","SearchFullscreenPortalCard","NavbarContext","onSearchFullscreenOpenChange","searchFullscreenOpen","searchFullscreenPortalEl","StudioLayout","routerState","useRouter","activeToolName","tool","activeTool","setSearchFullscreenOpen","setSearchFullscreenPortalEl","toolError","setToolError","documentTitle","mainTitle","handleSearchFullscreenOpenChange","open","resetToolError","useHotModuleReload","navbarContextValue","Navbar","useNavbarComponent","Code","stack","info","componentStack","RouteScope","scope","ErrorBoundary","onCatch","Suspense","fallback","LoadingTool","Google","clipPath","GitHub","Saml","LoginProviderLogo","isSaml","logoName","SanityMonogram","StyledMenu","AvatarBox","UserMenu","useRootTheme","providerTitle","popoverProps","preventOverflow","handleToggleScheme","UserAvatar","marginRight","email","__legacy","MenuDivider","SunIcon","MoonIcon","CogIcon","iconRight","LeaveIcon","popover","SourceContext","SourceProvider","parentSource","s","DocumentButton","TooltipContentBox","DisabledButtonWrapper","NewDocumentButton","newDocumentButtonEl","setNewDocumentButtonEl","setOpen","permissions","useTemplatePermissions","templateItems","keyedPermissions","hasNewDocumentOptions","canCreateDocument","t","granted","tooltipContent","handleOpen","handleLinkClick","ComposeIcon","cursor","onClickOutside","dot","StatusButton","active","statusTone","selectable","showDot","AvatarCard","PresenceMenuItem","presence","focused","onFocus","menuItemElement","setMenuItemElement","lastActiveLocation","orderBy","locations","hasLink","setAttribute","removeAttribute","handleFocus","displayName","MAX_AVATARS","AvatarStackCard","FooterStack","PresenceMenu","collapse","useGlobalPresence","hasPresence","focusedId","setFocusedId","handleItemFocus","handleClearFocusedItem","UsersIcon","AvatarStack","maxLength","constrainSize","ActiveWorkspaceMatcherContext","matchWorkspace","pathname","RegExp","escapeRegExp","workspaceSegments","commonBasePath","commonSegments","segments","commonSegment","createCommonBasePathRegex","createHistory","createMemoryHistory","createBrowserHistory","ActiveWorkspaceMatcher","LoadingComponent","NotFoundComponent","unstable_history","historyProp","activeWorkspace","setActiveWorkspace","notFound","setNotFound","pathname$","unlisten","subscription","setActiveWorkspaceName","workspaceName","foundWorkspace","defaultWorkspaceName","handleNavigateToDefaultWorkspace","onNavigateToDefaultWorkspace","useActiveWorkspace","STATE_TITLES","MediaCard","createIcon","WorkspacePreview","iconComponent","iconRightComponent","CheckmarkIcon","useWorkspaceAuthStates","LoadingScreen","TONES","warning","SegmentSpan","code","ErrorMessageText","SchemaProblemGroups","problemGroups","items","ret","problemGroup","isWarning","getTypeInfo","ErrorOutlineIcon","capitalize","Breadcrumbs","separator","j","_renderSegmentName","helpId","generateHelpUrl","str","parts","renderPath","reportWarnings","groupsWithWarnings","SchemaErrorsScreen","groupsWithErrors","NotFoundScreen","AuthenticateScreen","WorkspaceAuth","ConfigErrorsScreen","NotAuthenticatedScreen","setCurrentUser","handleError","handleLogout","providerHelp","ScreenReaderLabel","label","CorsOriginErrorScreen","corsUrl","searchParams","reload","TextInput","LaunchIcon","WORKSPACES_DOCS_URL","LINKS","StyledText","Layout","borderTop","SanityLogo","link","authStates","selectedWorkspaceName","setSelectedWorkspaceName","selectedWorkspace","handleBack","ArrowLeftIcon","omit","AddIcon","authState","handleSelectWorkspace","ChevronRightIcon","WorkspaceMenuButton","navigateUrl","SelectIcon","pressed","Backdrop","InnerCard","NavDrawer","closeButtonElement","setCloseButtonElement","innerCardElement","setInnerCardElement","useRovingFocus","navigation","useGlobalKeyDown","ToolMenu","useToolMenuComponent","CloseIcon","closeSidebar","isSidebarOpen","listStyles","SpaceBox","RootBox","ListBoxOuter","ListBox","ImageCard","$aspectRatio","$lqip","project","getProject","urlBuilder","auto","caption","lqip","metadata","aspectRatio","marginY","language","h1","h2","h3","h4","h5","h6","normal","bullet","listItem","PortableTextContent","PortableText","LABELS","bugfix","feature","ChangelogItem","changeType","ChangelogList","changeItems","isLatest","version","features","bugfixes","bugFixesDescription","flat","Badge","StickyBox","ChangelogDialog","changelog","currentVersion","dialogProps","latestVersion","changelogWithChangeItems","hasChangelog","showDivider","SANITY_VERSION","sanityModuleVersions","CACHED_LOOKUPS","checkModuleStatus","moduleVersions","getInstalledModules","buildQueryString","hashQuery","m","request$","installed","versions","pkg","useModuleStatus","moduleStatus$","COMMANDS","Icon","ToggleArrowRightIcon","ChangelogAccordion","defaultOpen","ChangelogButton","buttonElement","setButtonElement","isUpToDate","PackageIcon","ConfigIssuesButton","dialogId","useId","isDialogOpen","setDialogOpen","LogoButton","SearchContext","useSearchState","Instructions","ControlsIcon","PointerOverlayDiv","PointerOverlay","_props","supportsTouch","CommandListContext","CLICKABLE_CHILD_TAGS","CommandListProvider","ariaChildrenLabel","ariaHeaderLabel","ariaMultiselectable","autoFocus","childContainerElement","childCount","containerElement","initialSelectedIndex","level","headerInputElement","pointerOverlayElement","virtualList","selectedIndexRef","virtualListScrollToIndexRef","enableChildContainerPointerEvents","getChildDescendantId","handleAssignSelectedState","scrollSelectedIntoView","selectedIndex","childElements","child","childIndex","selectedElement","handleReassignSelectedStateThrottled","bind","setActiveIndex","handleChildMouseDown","handleChildClick","handleChildMouseEnter","handleSetVirtualListScrollToIndex","scrollToIndex","scrollToAdjacentItem","nextIndex","handleMouseMove","handleKeyDown","currentElement","clickableElement","tagName","querySelector","click","handleKeydown","parentOverflowElement","closest","handleMarkContainerAsFocused","handleMarkChildrenAsHovered","mutationObserver","MutationObserver","childList","subtree","disconnect","onChildClick","onChildMouseDown","onChildMouseEnter","setVirtualListScrollToIndex","useCommandList","DEFAULT_AVAILABLE_CHARS","PillCard","primary","$collapsible","RemainingCountBox","TypePills","availableCharacters","visibleTypes","remaining","typeTitle","remainingCount","DEFAULT_COMBINED_TYPE_COUNT","RecentSearchItemButton","$level","bleed","SearchItemPillsBox","SearchItemQueryBox","CloseButtonDiv","RecentSearchItem","maxVisibleTypePillChars","handleRecentSearchClick","typesSelected","onMouseDown","ClockIcon","MAX_COMBINED_TYPE_COUNT_SMALL","MAX_COMBINED_TYPE_COUNT_LARGE","RecentSearchesBox","RecentSearchesInnerBox","RecentSearches","setChildContainerRef","setPointerOverlayRef","showFiltersOnClick","onClear","dispatch","recentSearchesStore","recentSearches","handleClearRecentSearchesClick","updatedRecentSearches","removeSearchTerms","searchTerms","terms","addSearchTerm","handleRecentSearchDelete","removeSearchTermAtIndex","recentSearch","__recent","timestamp","CustomTextInputBox","smallClearButton","CustomTextInput","rotate","keyframes","AnimatedSpinnerIcon","SpinnerIcon","FilterBox","SearchHeaderCard","NotificationBadge","solid","semibold","SearchHeader","setHeaderInputRef","filterButtonElement","setFilterButtonRef","isMountedRef","filtersVisible","handleFiltersToggle","handleQueryChange","handleQueryClear","autoComplete","clearButton","SearchIcon","onChange","placeholder","spellCheck","borderLeft","IS_MAC","platform","DEBUG_FRAGMENT","FINDABILITY_MVI","SEARCH_LIMIT","GLOBAL_SEARCH_KEY","GLOBAL_SEARCH_KEY_MODIFIER","POPOVER_INPUT_PADDING","POPOVER_MAX_HEIGHT","POPOVER_MAX_WIDTH","SUBHEADER_HEIGHT_LARGE","SUBHEADER_HEIGHT_SMALL","VIRTUAL_LIST_ITEM_HEIGHT","VIRTUAL_LIST_OVERSCAN","Semibold","NoResults","SearchError","DebugScoreCard","DebugOverlay","data","score","matchingStories","stories","story","why","PRESENCE_MENU_POPOVER_PROPS","$selected","getTooltipText","DocumentPreviewPresence","useTheme","invertedScheme","dark","uniqueUsers","MAX_AVATARS_DOCK","DEFAULT_MAX_AVATARS_FIELDS","AVATAR_DISTANCE","AVATAR_SIZE","AVATAR_ARROW_HEIGHT","INTERSECTION_THRESHOLDS","INTERSECTION_ELEMENT_PADDING","SNAP_TO_DOCK_DISTANCE_TOP","SNAP_TO_DOCK_DISTANCE_BOTTOM","SLIDE_RIGHT_THRESHOLD_TOP","SLIDE_RIGHT_THRESHOLD_BOTTOM","splitRight","indexFromMax","FlexWrapper","InnerBox","FormFieldPresenceContext","PresenceTooltip","FieldPresence","FieldPresenceWithOverlay","contextPresence","maxAvatars","FieldPresenceWithoutOverlay","FieldPresenceInner","calcAvatarStackWidth","len","animateArrowFrom","uniquePresence","sorted","_presence","lastActiveAt","avatars","reverse","_visible","AvatarCounter","currWidth","av","transform","transitionProperty","transitionDuration","transitionTimingFunction","trimChildPath","childPath","trimLeft","PresenceScope","childPresence","createIntersectionObserver","entries$","subscriber","WithIntersection","onIntersection","io","RootWrapper","OverlayWrapper","RegionWrapper","TopRegionWrapper","$debug","margins","MiddleRegionWrapper","BottomRegionWrapper","toPx","num","negate","RegionsWithIntersections","regions","render","marginsProp","overlayRef","intersections","setIntersections","regionsWithIntersectionDetails","region","intersection","boundsBottom","boundsTop","boundingClientRect","aboveTop","belowBottom","distanceTop","intersectionRect","distanceBottom","forceWidth","ITEM_TRANSITION","withSpacerHeight","withIntersection","_regionsWithIntersectionDetails","prevRect","prevBottom","spacerHeight","orderByTop","plus","sum","regionsWithSpacerHeight","grouped","inside","groupBy","_withSpacerHeight","grp","indent","w","_withIntersection","Spacer","DEFAULT_MARGINS","HTMLElement","getRelativeRect","parent","regionsWithComputedRects","StickyOverlay","renderCallback","containerWidth","topSpacing","n","bottomSpacing","counts","_counts","nearTop","nearBottom","PresenceDock","closeCount","PresenceInside","allPresenceItems","topMargin","rightMargin","bottomMargin","leftMargin","leftOffset","flexDirection","alignItems","originalLeft","diffRight","pointerEvents","DebugValue","PassThrough","OverlayEnabled","OverlayDisabled","PresenceOverlay","SearchResultItemPreviewBox","TypeLabel","SearchResultItemPreview","sanityDocument","SearchResultItemBox","SearchResultItem","debug","virtualRow","hit","resultIndex","documentPresence","useDocumentPresence","marginX","ORDER_RELEVANCE","customMeasurementLabel","ORDER_CREATED_ASC","ignoreScore","ORDER_CREATED_DESC","ORDER_UPDATED_ASC","ORDER_UPDATED_DESC","MENU_ORDERINGS","IconWrapperBox","$visible","SortMenuContentFlex","$small","isSearchDivider","CustomMenuItem","currentOrdering","SortMenu","small","menuButtonId","currentMenuItem","SortIcon","SearchResultsFlex","SearchResultsInnerFlex","$loading","VirtualListBox","VirtualListChildBox","$height","SearchResults","childParentRef","getTotalSize","getVirtualItems","useVirtualizer","hits","enableSmoothScroll","getScrollElement","estimateSize","overscan","handleResultClick","hasSearchResults","loaded","isDocumentType","isSanityType","getSearchableTypes","getSelectableOmnisearchTypes","typeFilter","getSearchableOmnisearchTypes","inTypeFilter","sortTypes","__experimental_omnisearch_visibility","TypeFilterItemButton","TypeFilterItem","handleTypeAdd","handleTypeRemove","ClearButtonBox","SearchHeaderBox","SearchHeaderContentFlex","TypeFiltersContentBox","TypeFiltersContentDiv","TypeFiltersFlex","TypeFilters","setContainerRef","filtersContentElement","setFiltersContentRef","setTypeFilter","selectedTypes","selectableDocumentTypes","handleClearTypes","scrollTo","handleFilterChange","handleFilterClear","commandListId","$lightHighlight","useMeasureSearchResultsIndex","lastSearchIndex","setSavedSearchIndex","resetLastSearchIndex","setLastSearchIndex","childContainerParentElement","childContainerParentElementTop","childContainerElementTop","isSearchHotKey","isHotkey","isEscape","useSearchHotkeys","onOpen","isTopLayer","handleGlobalKeyDown","hasSearchableTerms","DialogContentCard","SearchDialogBox","SearchContentBox","StyledDialog","SearchDialog","hasValidTerms","Portal","FocusLock","returnFocus","SearchDialogFilters","cardRadius","KeyboardShortcutFlex","PlaceholderSearchInputFlex","PlaceholderTextInput","PlaceholderSearchInput","DummyInput","handleChange","onKeyDown","KBD","Overlay","ambient","SearchPopoverCard","$position","TypeFilterCard","SearchPopover","disableFocusLock","handleClearRecentSearches","handleClickOutside","useClickOutside","SearchPopoverFilters","SearchField","placeholderElement","setPlaceholderElement","popoverPosition","usePopoverPosition","calcDialogPosition","placeholderRect","setPopoverPosition","handleWindowResize","SEARCH_TERMS_KEY","MAX_RECENT_SEARCHES","CURRENT_VERSION","createRecentSearchesStore","lsKey","searchTerm","saveTerm","created","typeNames","comparator","newRecent","getRecentStoredSearchTerms","getRecentSearchTerms","recentString","storedSearchTerms","sanitizeStoredSearchTerms","studioSchema","searchableTypeNames","filteredSearchTerms","newStoredSearchTerms","calculateScore","phrases","uniqueSearchPhrases","words","uniqueSearchWords","partitionAndSanitizeSearchTerms","phraseScore","phraseWhy","calculatePhraseScore","wordScore","wordWhy","calculateWordScore","applyWeights","searchSpec","specByType","spec","typeSpec","pathSpec","totalScore","rank","sanitizedValue","fieldScore","matchCount","term","uniqueSearchTerms","uniqueValueTerms","compact","toLower","matches","all","union","searchPhrases","searchWords","partition","stripWrappingQuotes","SPECIAL_CHARS","STRIP_EDGE_CHARS","tokenize","string","DEFAULT_LIMIT","combinePaths","flow","createSearchSpecs","optimizeIndexedPaths","hasIndexedPaths","specs","__experimental_search","mapWith","pathWithMapper","createConstraints","combinedSearchPaths","configForType","constraints","_term","joinedPath","constraint","extractTermsFromQuery","quotedQueries","unquotedQuery","quotedTerms","remainingTerms","createSearchQuery","searchOpts","exactSearchSpecs","optimizedSpecs","filters","includeDrafts","cfg","sortDirection","sortField","groqComments","comments","updatedQuery","offset","limit","toGroqParams","__types","__limit","__offset","getSearchTerms","createWeightedSearch","commonOpts","search","unique","skipSortByScore","INITIAL_SEARCH_STATE","nonNullable","sanitizeRequest","useSearch","initialState","onComplete","onError","onStart","searchState","setSearchState","searchWeighted","useObservableCallback","inputValue$","debounceTime","handleClearSearch","handleSearch","searchRequest","isRecentSearchTerms","rootName","debugWithName","isDebugMode","initialSearchState","pageIndex","hasMore","searchReducer","stripRecent","SearchProvider","useCurrentUser","useReducer","previousOrderingRef","previousPageIndexRef","previousTermsRef","orderingChanged","pageIndexChanged","termsChanged","sortLabel","RootLayer","RootCard","LeftFlex","StudioNavbar","useRouterState","rootHref","handleRootClick","useStateLink","Logo","useLogoComponent","drawerOpen","setDrawerOpen","routerStateRef","workspaceNameRef","drawerButtonEl","setDrawerButtonEl","searchOpenButtonEl","setSearchOpenButtonEl","shouldRender","brandingCenter","collapsedPresenceMenu","loginStatus","searchFullscreen","configIssues","formattedName","handleOpenSearchFullscreen","handleCloseSearchFullscreen","handleCloseDrawer","handleOpenDrawer","zOffset","MenuIcon","LayerProvider","PortalProvider","borderRight","MENU_BUTTON_POPOVER_PROPS","CollapseOverflowMenu","disableRestoreFocusOnClose","menuButton","menuButtonProps","menuOptionsArray","onMenuClose","__unstable_disableRestoreFocusOnClose","collapsedProps","expandedProps","tooltipProps","tooltipText","dividerBefore","ObserveElement","setEl","DividerDiv","CollapseMenuDivider","FOCUS_RING_PADDING","OPTION_STYLE","OuterFlex","RootFlex","RowFlex","OptionObserveElement","OptionHiddenFlex","_isReactElement","CollapseMenu","childrenProp","collapsed","collapseText","rootEl","setRootEl","hiddenRowEl","setHiddenRowEl","rootRect","useElementRect","menuOptions","setMenuOptions","hasOverflow","intersectionOptions","root","Children","toArray","o","menuIsVisible","isInMenu","childKey","handleIntersection","exists","updatedOptions","modeProps","cloneElement","CollapseMenuButton","ToolLink","StateLink","ToolCollapseMenu","collapseMenuEl","setCollapseMenuEl","Link","UnknownIcon","ToolVerticalMenu","PlugIcon","StudioToolMenu","pickToolMenuComponent","studio","toolMenu","pickNavbarComponent","navbar","pickLayoutComponent","pickLogoComponent","useLayoutComponent","UserColorManagerContext","useUserColorManager","userColorManager","useUserColor","userId","manager","empty","defaultCurrentUserHue","USER_COLOR_EXCLUDE_HUES","defaultHues","defaultColors","colors","background","tints","defaultAnonymousColor","gray","createUserColorManager","userColors","anonymousColor","currentUserColor","userColorKeys","subscriptions","previouslyAssigned","assignedCounts","assigned","currentUserId","userStore","me","getUserHue","assignedHue","prevHue","hasUnusedColor","assignHue","preferredHue","getPreferredHue","getLeastUsedHue","getObservableColor","unassignHue","getUnusedColor","tieBreakerPreference","leastUses","Infinity","leastUsed","uses","userColor","UserColorManagerProvider","managerFromProps","AuthBoundary","AuthenticateComponent","NotAuthenticatedComponent","loggedIn","setLoggedIn","StudioThemeProvider","__dark","errorChannel","__sanityErrorChannel","isKnownError","StudioErrorBoundary","pushToast","handleResetError","duration","Z_OFFSET","attrs","createRouter","opts","toolRoute","route","create","toolParams","router","intents","getOrderedTools","pluginConfig","toolSwitcher","order","keyed","existing","toolIndex","tool1","tool2","toolA","toolB","indexA","indexB","resolveUrlStateWithDefaultTool","orderedTools","defaultTool","makeBackwardsCompatible","resolveDefaultState","urlStateWithDefaultTool","resolveIntentState","currentState","intentState","payload","currentTool","matchingTool","canHandleIntent","getIntentState","toolState","isNotFound","decodeUrlState","rootRouter","decode","createRouterEventStream","maybeHandleIntent","prevEvent","currentEvent","redirectState","encode","maybeRedirectDefaultState","defaultState","routerBasePath","getBasePath","mergeScan","isStateEvent","WorkspaceLoader","setWorkspace","handleNavigate","restOfSources","RouterProvider","onNavigate","WorkspaceLoaderBoundary","ConfigErrorsComponent","Refractor","registerLanguage","bash","javascript","typescript","StudioProvider","unstable_noAuthBoundary","noAuthBoundary","ConditionalAuthBoundary","ToastProvider","Studio","unstable_globalStyles","renderStudio","reactStrictMode","createRoot","StrictMode","unmount","clientOptions","INITIAL","useConnectionState","publishedDocId","docTypeName","pair","documentEvents","eventType","isConnected","mapTo","useDataset","useDocumentOperation","editOperations","useDocumentOperationEvent","operationEvents","useEditState","priority","editState","skip","useProjectId","SYNCING","isSyncing","NOT_SYNCING","useSyncState","documentType","consistencyStatus","isConsistent","useTemplates","FIVE_SECONDS","TWENTY_SECONDS","ONE_MINUTE","ONE_HOUR","minimal","resolved","formatRelativeTime","forceUpdate","timerId","tick","interval","refreshInterval","parsedDate","now","diffMonths","differenceInMonths","diffYears","differenceInYears","format","diffWeeks","differenceInWeeks","weekSuffix","pluralize","diffDays","differenceInDays","daysSuffix","daysSince","diffHours","differenceInHours","hoursSuffix","diffMins","differenceInMinutes","minsSuffix","diffSeconds","differenceInSeconds","secsSuffix","useTools","isValidating","useValidationStatus","useUserViaUserStore","getUser","useUser","useUserStore","getUpdatedSnapshot","bufferedDocument","LOCAL","HEAD","_updatedAt","toSnapshotEvent","getDocument","createObservableBufferedDocument","listenerEvent$","actions$","consistency$","BehaviorSubject","rebase$","remoteMutations","commitRequests","createInitialBufferedDocument","initialSnapshot","BufferedDocument","onMutation","mutation","remote","mutations","onRemoteMutation","transactionId","author","effects","onRebase","edge","nextRemoteMutations","localMutations","onConsistencyChanged","commitHandler","commitArg","currentBufferedDocument$","listenerEvent","commit","snapshotAfterSync$","withLatestFrom","mutationEvent","arrive","Mutation","actionHandler$","emitAction","addMutations","addMutation","snapshot$","remoteSnapshot$","updates$","commitRequest$","createBufferedDocument","prepareDoc","DELETE","patch","patches","createIfNotExists","createOrReplace","mutate","PENDING_START","phase","PENDING_END","isMutationEvent","isMultiTransactionEvent","transactionTotalEvents","allPendingTransactionEventsReceived","listenerEvents","groupedMutations","getPairListener","idPair","effectFormat","concatMap","fetchInitialDocumentSnapshots","createSnapshotEvent","buffer","isBuffering","isMulti","nextBuffer","getDocuments","isMutationEventForDocId","setVersion","commitMutations","mutationParams","resultRev","dataRequest","returnDocuments","submitCommitRequest","isBadRequest","cancel","failure","success","checkoutPair","listenerEvents$","reconnect$","transactionsPendingEvents$","commits$","commitRequest","keyGen","MEMO","memoizedPair","_typeName","_client","isSnapshotEvent","withSnapshots","snapshots$","snapshotPair","LOCKED","NOT_LOCKED","ctx","transactionSyncLock","ready","operationArgs","_ctx","del","execute","tx","transaction","skipCrossDatasetReferenceValidation","strengthenOnPublish","obj","weak","unset","ifRevisionID","initialDocument","discardChanges","unpublish","omitProps","duplicate","dupeId","restore","fromRevision","historyStore","draftIsConsistent","publishedIsConsistent","maybeObservable","operationImpls","operationName","operationArguments","extraArgs","operation","last","operationCalls$","emitOperation","REQUIRES_CONSISTENCY","listenerCache","getOperationEvents","result$","op","groups$","requiresConsistency","isConsistent$","ready$","AUTOCOMMIT_INTERVAL","autoCommit$","throttleTime","asyncScheduler","leading","listener","remoteSnapshots","INITIAL_VALIDATION_STATUS","findReferenceIds","reduceJSON","EMPTY_VALIDATION","listenDocumentExists","DOC_UPDATE_DELAY","REF_UPDATE_DELAY","document$","referenceIds$","referenceExistence$","id$","distinct","bufferSize","getDocumentExists","referenceExistence","referenceDocumentUpdates$","exhaustMapWithTrailing","revision","validateDocumentObservable","validationMarkers","createOperationGuard","opName","GUARDED","createEmitter","executeArgs","wrap","createOperationsAPI","operationResults$","operationArgs$","operations$","filterResponse","isWelcomeEvent","listenQuery","fetchQuery","listenerQuery","fetchOnce$","events$","mutationAndReconnect$","isRelevantEvent","transitions","transition","exhaustMapToWithTrailing","resolveTypeForDocument","specifiedType","ALLOWED_REF_PROPS","REQUIRED_TEMPLATE_PROPS","quote","validateTemplates","idMap","missing","prop","param","validateParameter","dupeIndex","dupe","validateInitialObjectValue","contextError","validateValue","parentIsArray","pathToString","_key","randomKey","validateReference","parameter","disallowed","deepAssign","sourceVal","targetVal","isBuilder","serialize","resolveValue","initialValueOpt","resolveInitialValue","resolvedValue","resolveInitialValueForType","DEFAULT_MAX_RECURSION_DEPTH","getItemType","arrayType","itemTypeName","resolveTypeName","memberType","maxDepth","Promise","resolve","isObjectSchemaType","resolveInitialObjectValue","isArraySchemaType","resolveInitialArrayValue","initialArray","initialItem","itemType","initialObject","fieldValues","initialFieldValue","merged","isEmpty","maybeSerialize","prepareTemplates","initialValueTemplates","serialized","defaultTemplateForType","defaultTemplatesForSchema","LOADING_MSG","getInitialValueStream","templateName","isResolving","initialValueWithParams$","templateParams","resolveError","getIdPairFromPublished","createDocumentStore","caches","ops","isLoaded","useDocumentType","isResolved","SYNC_RESOLVED_STATE","resolvedState","setDocumentType","useDocumentValues","documentValues$","useInitialValue","templateParamsRaw","useInitialValueResolverContext","defaultValue","initialValueOptions","initialValueMsg$","useResolveInitialValueForType","initialValueContext","getSchemaType","getPairPermissions","grantsStore","permission","effectiveVersion","effectiveVersionType","checkDocumentPermission","getDocumentPairPermissions","pairPermissions","permissionResults","permissionResult","useDocumentPairPermissionsFromHookFactory","useDocumentPairPermissions","overrideClient","overrideSchema","overrideGrantsStore","defaultClient","defaultSchema","defaultGrantsStore","useGrantsStore","getDocumentValuePermissions","useDocumentValuePermissionsFromHookFactory","useDocumentValuePermissions","getTemplatePermissions","resolvedInitialValue","promise","useTemplatePermissionsFromHookFactory","DEBUG_PREFIX","hashchange$","debugParams$","debugRolesParam$","administrator","editor","developer","contributor","viewer","requiresApproval","restricted","DEBUG_ROLE_GRANTS_MAP","grants.administrator","grants.editor","grants.developer","grants.contributor","grants.viewer","grants.restricted","grants.requiresApproval","write","debugGrants$","roleName","getDatasetGrants","grants","getParams","PARSED_FILTERS_MEMO","matchesFilter","parsed","evaluate","createGrantsStore","datasetGrants$","currentUserDatasetGrants","debugGrants","refCountDelay","grantsPermissionOn","matchingGrants","grant","foundMatch","getJsonStream","headers","Authorization","credentials","getStream","body","reader","cancelled","ReadableStream","controller","getReader","decoder","TextDecoder","processResult","done","close","enqueue","stream","lines","emptyVersionState","hasAttrs","rev","aligned","findIndex","evt","startFromSnapshot","Aligner","timeline","earliestTransactionId","_states","appendRemoteSnapshotEvent","_maybeInvalidateHistory","_apply","addRemoteMutation","prependHistoryEvent","acceptsHistory","_alignAtIndex","addTranslogEntry","didReachEarliestEntry","isAligned","_isComplete","currentDocument","mutEvt","applyPatch","apply","reset","Reconstruction","same","endAttributes","getAttrs","endDocument","_endDocument","replayBackwardsUntil","startAttributes","startDocument","_startDocument","replayBackwardsBetween","diff","_diff","calculateDiff","TRANSLOG_ENTRY_LIMIT","TimelineController","selectionState","_fetchMore","_fetchAtLeast","_isRunning","_didErr","_since","_sinceTime","_revTime","handler","_aligner","markChange","clearRange","setRange","since","setRevTime","setSinceTime","targetRev","lastChunk","setReconstruction","setLoadMore","flag","sinceTime","revTime","realRevChunk","onOlderRevision","changesPanelActive","findRangeForNewRev","revTimeId","isLatestChunk","createTimeId","sinceChunk","findRangeForNewSince","revChunk","parseTimeId","findLastPublishedBefore","sinceAttributes","_reconstruction","displayed","currentDiff","currentObjectDiff","handleRemoteMutation","shouldFetchMore","reachedEarliestEntry","chunkCount","fetchMoreTransactions","clientConfig","queryParams","tid","transactionsUrl","updateChunks","createObservableController","innerController","historyController","isSameAnnotation","ArrayContentWrapper","annotation","extractor","elements","at","wrapValue","annotationAt","meta","metas","fromMeta","ObjectContentWrapper","StringContentWrapper","sliceAnnotation","lst","subStart","subEnd","fromValue","raw","extractAnnotationForFromInput","firstChunk","annotationForTransactionIndex","transactionIndex","extractAnnotationForToInput","chunkIdx","transactionByIndex","chunkByTransactionIndex","diffValue","fromRaw","toRaw","fromInput","endMeta","toInput","startMeta","diffInput","TwoEndedArray","_postive","_negative","addToEnd","elem","addToBeginning","mergeAtEnd","merger","lastIdx","mergeAtBeginning","firstIdx","removeFromEnd","shift","pop","canMergeEdit","CHUNK_WINDOW","isWithinMergeWindow","mergeChunk","draftState","combineState","publishedState","endTimestamp","startTimestamp","authors","getChunkState","effect","modified","deleted","isDeletePatch","getChunkType","draftEffect","publishedEffect","chunkFromTransaction","modifiedDraft","modifiedPublished","draftDeleted","publishedDeleted","Timeline","_transactions","_chunks","_possiblePendingTransactions","enableTrace","_trace","__sanityTimelineTrace","mapChunks","mapper","_recreateTransactionsFrom","pending","_invalidateTransactionFrom","_removeInvalidatedChunks","_addChunksFromTransactions","_createInitialChunk","nextTransactionToChunk","firstTransactionChunked","firstTx","initialChunk","idSegments","timestampStr","chunkId","currentChunk","valueOf","startChunkIdx","revert","initialDoc","finalDoc","draftValue","incremental","publishedValue","getValue","initialAttributes","preDraftValue","prePublishedValue","didHaveDriaft","getType","haveDraft","havePublished","rebaseValue","finalValue","finalAttributes","documentRevisionCache","getHistory","getDocumentAtRevision","getTransactions","includeIdentifiedDocumentsOnly","transactions","getAllRefIds","jsonReduce","jsonMap","mapFn","mappedValue","mapRefNodes","removeMissingReferences","existingIds","refNode","documentExists","targetDocumentId","documentAtRevision","existingIdsQuery","refId","restoredDraft","createHistoryStore","getTimeline","getTimelineController","USERIDS","PATHS","mock$","sample","handleIncomingMessage","session","createBifurTransport","incomingEvents$","dispatchMessage","KEY","generate","nanoid","getSessionId","sessionStorage","setSessionId","SESSION_ID","__tmp_wrap_presenceStore","connectionStatusStore","presenceEvents$","sendMessage","currentLocation$","locationChange$","setLocation","nextLocation","reportLocations","requestRollCall","rollCallRequests$","REPORT_MIN_INTERVAL","reportLocationInterval$","reportLocation$","auditTime","myRollCall$","connectionChange$","statusType","debugPresenceParam$","useMock$","switchMapTo","debugIntrospect$","syncEvent$","stateEventToSession","stateEvent","states$","allSessions$","keyedSessions","sessions","userIds","sess","getUsers","users","userSessionPairHasUser","globalPresence$","userAndSessions","debugIntrospect","userAndSession","isCurrent","curr","setPresence","presenceStore","usePresenceStore","createProjectStore","getDatasets","useProject","projectStore","useProjectStore","setValue","project$","useProjectDatasets","tryParse","defValue","localStorageBackend","DB","memoryBackend","testKey","resolveBackend","createSettingsStore","storageBackend","set$","prefixNamespace","ns","forNamespace","forKey","namespacedKey","createUserStore","userLoader","DataLoader","batchScheduleFn","cb","raf","userFromCurrentUser","profileImage","prime","load","loadMany","useHistoryStore","useConnectionStatusStore","useSettingsStore","settingsStore","symbols","whitespace","LEGACY_TO_UI_AVATAR_SIZES","medium","large","nameToInitials","fullName","namesArray","withTooltip","TooltipUserAvatar","StaticUserAvatar","UserAvatarLoader","imageLoadError","setImageLoadError","Avatar","arrowPosition","initials","onImageLoadError","loadedProps","withPropsStream","connect","_WithReferringDocuments","receivedProps$","receivedProps","docId","docs","actionIds","counter","getHookId","actionHook","useShallowCompareMemoize","useShallowCompareEffect","HookStateContainer","hook","onNext","onReset","onRequestUpdate","hookState","requestIdleCallbackShim","didTimeout","timeRemaining","cancelIdleCallbackShim","handle","_requestIdleCallback","requestIdleCallback","_cancelIdleCallback","cancelIdleCallback","throttleOptions","GetHookCollectionState","hooks","statesRef","tickId","setTick","setKeys","ricHandle","handleRequestUpdate","handleRequestUpdateThrottled","handleNext","handleReset","currentKeys","hookIds","states","PopoverDialog","containerRef","focusFirstDescendant","Popover","PREVIEW_MEDIA_SIZE","PREVIEW_ICON_SIZE","MediaWrapper","$dimensions","$layout","$radius","$responsive","iconSize","rem","Media","responsive","styles","mediaString","renderPreviewMedia","renderPreviewNode","fallbackNode","DEFAULT_MEDIA_DIMENSIONS","aspect","getDevicePixelRatio","TitleSkeleton","TextSkeleton","animated","SubtitleSkeleton","rootClassName","classNames","hasSubtitle","statusNode","Skeleton","StatusBox","MediaSkeleton","DescriptionSkeleton","DescriptionText","textSize1","maxLines","maxHeight","lineHeight","mediaDimensions","SIZE","BgCircle","circle","ProgressCircle","blue","CircularProgress","circ","PI","cx","cy","strokeDasharray","strokeDashoffset","Bar","LinearProgress","MediaFlex","ProgressFlex","TooltipContentStack","withBorder","withRadius","STYLES_PADDER","HeaderFlex","$ratio","getRatio","fallbackTitle","RootSpan","MediaSpan","TextSpan","textFont","textSize","DEFAULT_MEDIA_DIMENSION","TemplatePreview","whiteSpace","MUTATION_ATTRIBUTE_FILTER","FOCUSABLE","getFocusableElements","querySelectorAll","hasAttribute","initialFocus","loop","pause","focusedIndex","setFocusedIndex","focusableElements","setFocusableElements","focusableLen","lastFocusableIndex","nextKey","prevKey","handleSetElements","els","focusPrev","prevIndex","focusNext","shiftKey","mo","attributeFilter","onfocus","onblur","initialIndex","ImperativeToast","_","useImperativeHandle","defaults","navbarPopover","navbarDialog","pane","paneHeader","paneFooter","paneResizer","modal","movingItem","drawershade","drawer","fullscreen","dropdown","navbarFixed","fullscreenEdit","popoverBackground","tooltip","modalBackground","spinner","ZIndexContext","useZIndex","LegacyLayerProvider","zOffsetKey","MENU_ITEM_TONES","ListItem","marker","truncate","menuItemTone","InfoOutlineIcon","ValidationList","isValidationErrorMarker","warnings","isValidationWarningMarker","isValidationInfoMarker","resolvePathTitle","hasWarnings","hasInfo","_error","_warning","_info","ZIndexProvider","rePropName","reKeySegment","segmentType","isKeySegment","getValueAtPath","rootValue","isIndexSegment","stringToPath","normalizePathSegment","normalizeIndexSegment","normalizeKeySegment","isIndexTuple","normalizeIndexTupleSegment","seg","pathsAreEqual","pathA","pathB","segmentA","segmentB","getItemKey","arrayItem","getItemKeySegment","isEmptyObject","getAnnotationColor","colorManager","getAnnotationAtPath","diffPath","getAnnotationAt","getDiffAtPath","getDiffAt","diffAt","parentPath","itemDiff","toIndex","itemMatchesKey","fieldDiff","toValue","visitDiff","visitor","visitArrayDiff","visitObjectDiff","visitStringDiff","getItemDiffIndex","fromIndex","useAnnotationColor","useDiffAnnotationColor","DiffTooltip","DiffTooltipWithAnnotation","annotations","textTransform","AnnotationItem","allowedAutoPlacements","timeAgo","borderRadius","card","EMPTY_PATH","DiffCard","annotationProp","disableHoverEffect","RoundedCard","AnnotationText","ChangeTitleSegment","hasMoved","CreatedTitleSegment","DeletedTitleSegment","MovedTitleSegment","readableIndex","diffAnnotation","textDecoration","indexDiff","indexSymbol","positions","ChangeBreadcrumb","titlePath","titleSegment","showSegment","showIndex","isThenable","useCheckCondition","checkProperty","checkPropertyName","isTrueIsh","useConditionalProperty","checkPropertyKey","isPropertyTruthy","DiffContext","getValueError","valueType","isObjectType","isObjectValue","fieldError","isTypedObject","resolveJSType","getArrayDiffItemType","resolveArrayMemberType","fromType","declared","candidate","ANNOTATION_SYMBOLS","CHILD_SYMBOL","DECORATOR_SYMBOLS","EMPTY_BLOCK_SYMBOL","INLINE_SYMBOLS","TRAILING_SPACE_SYMBOL","SEGMENT_START_SYMBOL","dmp","DiffMatchPatch","hasPTMemberType","isPTSchemaType","startMarkSymbols","TextSymbols.DECORATOR_SYMBOLS","TextSymbols.ANNOTATION_SYMBOLS","endMarkSymbols","allSymbols","TextSymbols.INLINE_SYMBOLS","TextSymbols.CHILD_SYMBOL","TextSymbols.SEGMENT_START_SYMBOL","symbolRegex","segmentRegex","isHeader","findChildDiff","childrenDiff","childDiff","getChildSchemaType","childrenField","cSchemaType","getDecorators","spanSchemaType","decorators","isDecorator","dec","blockToSymbolizedText","decoratorMap","annotationMap","inlineMap","returned","spanDiff","findSpanDiffFromChild","textDiff","marks","mark","_isDecorator","createPortableTextDiff","displayValue","allMarkDefs","getAllMarkDefs","markDef","inlines","getInlineObjects","fromText","toText","toPseudoValue","fromPseudoValue","pseudoDiff","buildSegments","dmpDiffs","diff_main","diff_cleanupEfficiency","fromIdx","toIdx","DIFF_EQUAL","DIFF_DELETE","DIFF_INSERT","newSegments","markMatches","matchAll","lastIndex","allChildren","cld","previousChildren","oCld","findAnnotationDiff","markDefKey","markDefs","allDefs","oldDefs","oDef","diffResolvers","Checkbox","checked","stroke","Switch","BooleanFieldDiff","Preview","showToValue","FromToArrow","DocumentChangeContext","useDocumentChange","documentChange","useRefValue","getSizeDiff","increase","pct","SizeDiff","positive","critical","FileFieldDiff","fromAsset","toAsset","changedFields","didAssetChange","nestedFields","prevSize","nextSize","pctDiff","roundedPrevSize","roundedNextSize","cardStyles","MetaInfo","FileAssetChange","FromTo","ChangeList","hexToRgba","rgba","exec","parseInt","simpleHash","char","getDeviceDpr","ceil","HotspotCropSVG","crop","hotspot","cropColor","hotspotColor","HotspotSVG","CropSVG","mask","rectProps","vectorEffect","ellipseProps","ry","ASSET_FIELDS","NoImagePreview","ImageWrapper","HotspotDiff","ImagePreview","imageError","setImageError","getImageDimensions","assetIsDeleted","imageSource","assetChanged","metaAction","isDefaultCrop","isDefaultHotspot","markRemoved","IMAGE_META_FIELDS","BASE_IMAGE_FIELDS","CARD_STYLES","ImageFieldDiff","fromRef","toRef","assetAnnotation","assetAction","didCropChange","didHotspotChange","didMetaChange","showImageDiff","showMetaChange","imageDiff","NumberWrapper","NumberPreview","NumberFieldDiff","DiffFromTo","previewComponent","Quote","blockquote","Blockquote","headingSizes","StyledHeading","Header","StyledParagraph","Paragraph","Block","isRemoved","fromStyle","borderStyle","InlineBox","InlineText","PreviewContainer","PopoverContainer","AnnotationWrapper","Annotation","AnnnotationWithDiff","popoverElement","setPopoverElement","emptyObject","markDefPath","annotationPath","myPath","myValue","isEditing","handleOpenPopup","popoverContent","DecoratorWrapper","decoration","Decorator","InlineObjectWrapper","InlineObject","InlineObjectWithDiff","FOCUS_TERMINATOR","PopoverContent","diffWithFallback","hasChanged","TextWithDiff","spanSegment","realSeg","rSeg","diffCard","decoratorSymbolsStart","decoratorSymbolsEnd","annotationSymbolsStart","annotationSymbolsEnd","allSymbolsStart","allSymbolsEnd","allDecoratorSymbols","markRegex","inlineObjects","renderChild","ptDiffChild","decoratorTypes","returnedChildren","annotationSegments","isEmptyTextChange","TextSymbols.EMPTY_BLOCK_SYMBOL","childToIndex","segIndex","activeAnnotations","endedAnnotation","isInline","isMarkStart","isMarkEnd","isChildStart","indexOfSymbol","sym","originChild","objectSchemaType","objectDiff","getChildFromFromValue","renderTextSegment","lastChild","annotationDiff","TextSymbols.TRAILING_SPACE_SYMBOL","activeMarks","renderDecorators","fromPtDiffText","indirectMarksAnnotation","marksDiff","marksAnnotation","marksChanged","ptDiffChildren","ptDiffMatchString","controlString","toTest","aSet","notClosed","lastIndexOf","xor","PTDiff","ptDiff","ReferenceWrapper","ReferencePreview","ReferenceFieldDiff","StringWrapper","StringPreview","StringFieldDiff","DiffString","defaultComponents","boolean","showHeader","reference","resolveDiffComponent","parentSchemaType","itType","tryResolve","resolvers","resolver","getChangeVerb","hadPrevValue","hasValue","hasNextValue","isFieldChange","isGroupChange","isAddedItemDiff","isRemovedItemDiff","isUnchangedDiff","buildChangeList","diffComponent","parentSchema","buildObjectChangeList","buildArrayChangeList","getFieldChange","diffContext","changes","fieldSets","single","fieldSet","buildFieldChange","buildFieldsetChangeList","reduceTitlePaths","fieldFilter","fieldPath","fieldTitlePath","fieldSetHidden","fieldsetReadOnly","fieldSetTitlePath","fieldsetName","changedOrMoved","isPortableText","memberTypes","itemPath","itemContext","parentDiff","itemTitlePath","attachItemDiff","siblings","byLength","isAddedAction","flattenChangeNode","changeNode","newSubChanges","cChange","isSubpathOf","subPath","pathSegmentOfCorrectType","nextItem","diffOptions","diffMatchPatch","undoChange","rootDiff","documentOperations","allChanges","unsetChanges","buildUnsetPatches","unsetChange","buildMovePatches","buildUndoPatches","buildUnsetPatch","concurrentUnsetPaths","previousValue","furthestEmptyAncestor","unsetByEarlierPatch","currentPath","ignorePaths","initialPath","ancestorPath","ancestorValue","updatedIgnorePaths","isStub","parentValue","getFromItem","insertLocation","before","prevItemKey","prevSegment","after","insert","diffItem","inserts","unsets","stubbedPaths","stubs","hasSets","sets","getParentStubs","stubbed","pathStr","nextSegment","nextIsArrayElement","itemValue","stub","getStubValue","indexAtPrev","prevSeg","setIfMissing","onlyContainsStubs","nextPath","isIgnoredPath","ignorePath","ConditionalReadOnlyContext","useConditionalReadOnly","DiffErrorBoundary","Component","arguments","getDerivedStateFromError","componentDidCatch","arrowComponents","down","ArrowDownIcon","ArrowRightIcon","arrowComponent","CodeWrapper","pre","Meta","DiffInspectWrapper","isHovering","isInspecting","setIsInspecting","toggleInspect","metaKey","DiffInspector","MetaLabel","printMeta","jsonify","INLINE_COLUMN_STYLES","BLOCK_COLUMN_STYLES","FLEX_ALIGN","center","layoutStyles","columnStyles","cardClassName","changeVerb","FallbackPreview","FallbackDiff","RevertChangesButton","RevertIcon","ValueError","FieldChangeContainer","DiffBorder","PopoverWrapper","FieldChange","conditionalReadOnly","DiffComponent","isComparingCurrent","confirmRevertOpen","setConfirmRevertOpen","revertHovered","setRevertHovered","revertButtonElement","setRevertButtonElement","isPermissionsLoading","handleRevertChanges","handleRevertChangesConfirm","closeRevertChangesConfirmDialog","handleRevertButtonMouseEnter","handleRevertButtonMouseLeave","useHover","handleMouseOver","handleMouseOut","ChangeListWrapper","GroupChangeContainer","GroupChange","groupPath","isNestedInDiff","revertButtonRef","isRevertButtonHovered","docOperations","revertPopoverElement","setRevertPopoverElement","ChangeResolver","isHidden","isReadOnly","NoChanges","isRoot","confirmRevertAllOpen","setConfirmRevertAllOpen","confirmRevertAllHover","setConfirmRevertAllHover","maybeFlatten","rootChange","revertAllChanges","handleRevertAllChangesClick","handleRevertAllChangesMouseEnter","handleRevertAllChangesMouseLeave","closeRevertAllChangesConfirmDialog","revertAllContainerElement","setRevertAllContainerElement","showFooter","ChangeSegment","DiffStringSegment","segmentIndex","MetaText","otherItem","otherObj","otherKeys","keyName","ArrayOfOptionsFieldDiff","normalizeItems","sortItems","isPresent","ItemPreview","wasPresent","isInArray","getItemTitle","resolveMemberType","itemIndex","getOptionIndex","itemA","itemB","jsType","isNamedOption","DEFAULT_DATE_FORMAT","DEFAULT_TIME_FORMAT","DatetimeWrapper","DatetimePreview","formatDateTime","dateFormat","timeFormat","legacyDateFormat","DatetimeFieldDiff","UrlFieldDiff","SlugWrapper","SlugPreview","SlugFieldDiff","diffResolver","FormBuilderContext","isObjectInputProps","inputProps","isArrayInputProps","FormCallbacksContext","FormCallbacksProvider","useFormCallbacks","usePrevious","useDidUpdate","didUpdate","compare","createPatchChannel","_subscribers","splice","SANITY_PATCH_TYPE","Symbol","for","patchType","inc","amount","prefixPath","PatchEvent","prepend","append","prefixAll","whatwgRNG","rnds8","Uint8Array","getRandomValues","getByteHexTable","table","hasKey","ensureKey","createProtoValue","createProtoArrayValue","DEFAULT_CONCURRENCY","withMaxConcurrency","func","concurrency","throttler","createThrottler","currentSubscriptions","pendingObservables","scheduleAndWait","check","MAX_CONCURRENT_UPLOADS","uploadSanityAsset","extract","preserveFilename","storeOriginalFilename","creditLine","hashFile","fetchExisting","upload","uploadAsset","uploadImageAsset","uploadFileAsset","observeAssetDoc","observeImageAsset","observeFileAsset","readFile","FileReader","onload","onerror","readAsArrayBuffer","abort","crypto","subtle","arrayBuffer","digest","hexFromBuffer","readFileAsArrayBuffer","SKIP_EXIF_ERROR_RE","EXIF_BUFFER_LENGTH","readExif","buf","exif","rotated","radians","degrees","translate","flip","canvas","getContext","scale","ORIENTATION_OPS","ORIENTATIONS","DEFAULT_ORIENTATION","THUMB_SIZE","_orient","orientationNumber","orientation","ratio","drawImage","orient","orientationId","toDataURL","loadImage","rotateImage","createObjectURL","UPLOAD_STATUS_KEY","UNSET_UPLOAD_PATCH","createUploadEvent","CLEANUP_EVENT","createInitialUploadEvent","uploadImage","upload$","stage","percent","setPreviewUrl$","exifData","uploadFile","UPLOAD_IMAGE","accepts","UPLOAD_FILE","UPLOAD_TEXT","uploaders","uploader","acceptedFiles","acceptedFilesArray","baseMimeType","validType","endsWith","resolveUploader","is.type","accept","useFormBuilder","formBuilder","IGNORE_KEYS","isEmptyItem","getMemberTypeOfItem","resolveInitialArrayValues","itemKey","ArrayOfObjectsField","onPathBlur","onPathFocus","onSetPathCollapsed","onSetFieldSetCollapsed","onPathOpen","onFieldGroupSelect","member","renderField","renderInput","renderItem","renderPreview","focusRef","uploadSubscriptions","hadFocus","handleBlur","handleCollapse","handleExpand","handleCollapseItem","handleExpandItem","handleOpenItem","handleCloseItem","handleInsert","itemsWithKeys","referenceItem","focusItemKey","shouldOpen","skipInitialValue","handleMoveItem","refItem","handlePrependItem","handleAppendItem","handleRemoveItem","handleFocusChildPath","elementProps","onBlur","supportsImageUploads","supportsFileUploads","defaultResolveUploader","handleUpload","uploadProgressEvent","members","onExpand","onCollapse","onItemExpand","onItemCollapse","onItemClose","onItemOpen","onInsert","onItemMove","onItemRemove","onItemAppend","onItemPrepend","onUpload","renderedInput","fieldProps","collapsible","inputId","PrimitiveField","handleNativeChange","inputValue","isNumberSchemaType","valueAsNumber","isBooleanSchemaType","hasEmptyValue","isNaN","validationError","ObjectField","handleCollapseField","handleExpandField","handleOpenField","handleCloseField","handleExpandFieldSet","handleCollapseFieldSet","handleSelectFieldGroup","groupName","onFieldOpen","onFieldClose","onFieldCollapse","onFieldExpand","onFieldSetExpand","onFieldSetCollapse","groups","readAsText","encoding","move","arr","copy","insertAfter","isStringNumeric","convertToSchemaType","candidates","acceptsBooleans","acceptsNumbers","acceptsStrings","isStringSchemaType","createPlainTextUploader","itemTypes","textContent","ArrayOfPrimitivesField","handleSetCollapsed","handleAppend","handlePrepend","insertIndex","referenceIndex","handleFocusIndex","plainTextUploader","onSetCollapsed","onMoveItem","onIndexFocus","isMemberObject","isMemberArrayOfPrimitives","ofType","isPrimitiveSchemaType","isMemberArrayOfObjects","MemberField","STATUS_TONES","SuffixBox","Alert","suffix","HeaderButton","ToggleArrow","IconBox","Details","openProp","handleToggle","TRUTHY_STRINGS","FALSEY_STRINGS","BOOL_STRINGS","TRUE","toLocalDate","newDate","getTimezoneOffset","hours","getHours","setHours","getTZName","Intl","DateTimeFormat","resolvedOptions","timeZone","converters","convert","richDate","isValidDate","local","toJSON","utc","timezone","datetime","SetMissingTypeButton","UnsetItemButton","validTypes","UntypedValueInput","isSingleValidType","isHoistedType","getConverters","actualType","CONVERTERS","converter","InvalidValueInput","handleClearClick","handleConvertTo","converted","ConvertButton","onConvert","VALIDATION_COLORS","red","VALIDATION_ICONS","FormFieldValidationStatus","__unstable_showSummary","showSummary","statusIcon","statusColor","FormFieldValidationSummary","FormFieldValidationStatusItem","errorMarkers","warningMarkers","errorLen","warningLen","errorsStr","warningsStr","errorText","warningText","hasBoth","FormFieldHeaderText","hasValidations","htmlFor","FormFieldHeader","__unstable_presence","FormField","focusRingBorderStyle","focusRingStyle","focusRing","focusRingOutsetWidth","focusRingInsetWidth","bgColor","legend","ToggleButton","ToggleIconBox","FormFieldSetLegend","getChildren","Content","$borderLeft","FormFieldSet","hasValidationMarkers","gapX","gapY","FormFieldStatus","MissingKeysAlert","handleFixMissingKeys","DuplicateKeysAlert","handleFixDuplicateKeys","duplicates","MixedArrayAlert","handleRemoveNonObjectValues","nonObjectIndices","MemberFieldError","resolvedValueType","expectedSchemaType","MemberFieldSet","fieldsetMember","ArrayOfObjectsItem","onRemove","isEmptyValue","itemProps","getEmptyValue","ArrayOfPrimitivesItem","PopoverCard","container","IncompatibleItemType","vertical","showDetails","setShowDetails","popoverRef","setPopoverRef","handleShowDetails","BulbOutlineIcon","__unstable_focusRing","MemberItemError","ObjectMembers","ArrayOfObjectsMembers","pass","hasAbsolutePath","FormInput","absolutePath","relativePath","FormInputInner","destinationRenderField","destinationRenderInput","destinationRenderItem","destinationRenderPreview","isDestinationReached","shouldRenderField","includeField","itemMember","fieldMember","OverlayContainer","ContentContainer","CardContainer","FlexContainer","isTouchDevice","maxTouchPoints","ActivateOnFocus","onActivate","isOverlayActive","setFocused","handleOnFocus","isTouch","activateVerb","createInsertCallback","allowedDecorators","toInsert","givenBlock","blk","normalizeBlock","createSetCallback","createUnsetCallback","BlockActions","usePortableTextEditor","renderBlockActions","decoratorValues","PortableTextEditor","getPortableTextFeatures","blockActions","blockActionProps","blur","contentEditable","ReviewChangesHighlightBlock","StyledChangeIndicatorWithProvidedFullPath","immutableReconcile","_immutableReconcile","WeakSet","parents","prevType","nextType","allEqual","nextKeys","ValidationContext","ValidationProvider","useValidationMarkers","useChildValidation","inclusive","_isBlockType","_isArrayOfObjectsFieldMember","NONEXISTENT_PATH","useMemberValidation","memberValidation","childValidation","hasError","hasWarning","reconciled","PortableTextMarkersContext","PortableTextMarkersProvider","markers","usePortableTextMarkers","PortableTextMemberItemsContext","PortableTextMemberItemsProvider","memberItems","usePortableTextMemberItem","usePortableTextMemberItems","debugRender","POPOVER_PROPS","BlockObjectPreview","isActive","onClickingDelete","onClickingEdit","isTabbing","isCustomPreviewComponent","isImageType","referenceLink","ReferenceLink","EyeOpenIcon","EditIcon","overlay","purple","caution","invalid","ChangeIndicatorWrapper","$hasChanges","InnerFlex","BlockActionsOuter","BlockActionsInner","TooltipBox","BlockObject","attributes","isFullscreen","renderCustomMarkers","Markers","elementRef","reviewChangesHovered","setReviewChangesHovered","memberItem","handleEdit","handleDoubleClickToOpen","handleDelete","sel","anchor","blockPreview","innerPaddingProps","hasMarkers","isImagePreview","tooltipEnabled","toolTipContent","onDoubleClick","onMouseOver","onMouseOut","ToolbarPopover","POPOVER_FALLBACK_PLACEMENTS","InlineObjectToolbarPopover","onEdit","referenceElement","scrollElement","editButtonRef","popoverScheme","boundaryElement","rootStyle","PreviewSpan","popoverOpen","setPopoverOpen","markersToolTip","handleRemoveClick","point","openItem","handlePopoverClose","getIcon","IconText","DefaultMarkers","CustomMarkers","AnnotationToolbarPopover","annotationElement","textElement","cursorRect","setCursorRect","setSelection","isClosingRef","rangeRef","cursorElement","handleSelectionChange","winSelection","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","range","getRangeAt","$toneKey","annotationRef","setTextElement","handleEditClick","removeAnnotation","isLink","toneKey","hasCustomMarkers","TEXT_LEVELS","TEXT_BULLET_MARKERS","TEXT_NUMBER_FORMATS","TEXT_DECORATOR_TAGS","em","underline","strong","TEXT_STYLE_PADDING","createListName","textBlockStyle","numberMarker","bulletMarker","TextRoot","TextBlockFlexWrapper","ListPrefixWrapper","BlockExtrasContainer","textSize2","capHeight1","ascenderHeight","descenderHeight","capHeight2","buttonHeight","negativeTop","TextFlex","TextContainer","Normal","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","BlockQuoteRoot","BlockQuote","TEXT_STYLES","TextBlock","handleChangeIndicatorMouseEnter","handleChangeIndicatorMouseLeave","TextStyle","outerPaddingProps","CustomIconDiv","CustomIcon","inlineStyle","backgroundImage","getPTEFormatActions","hotkeyOpts","decorator","shortCutKey","hotkeys","blockEditor","toggleMark","getPTEListActions","lists","toggleList","getAnnotationIcon","getPTEAnnotationActions","focusChild","hasText","getPTEToolbarActionGroups","onInsertAnnotation","getBlockStyles","styleComponent","getInsertMenuIcon","fallbackIcon","referenceIcon","getInsertMenuItems","onInsertBlock","onInsertInline","blockItems","blockObjects","BlockElementIcon","inlineItems","InlineElementIcon","filteredBlockItems","annotationIcons","formatIcons","BoldIcon","ItalicIcon","StrikethroughIcon","UnderlineIcon","CodeIcon","listStyleIcons","OlistIcon","UlistIcon","getActionIcon","useFocusBlock","usePortableTextEditorSelection","focusBlock","useFeatures","useActionGroups","handleInsertAnnotation","addAnnotation","useActiveActionKeys","activeAnnotationKeys","hasListStyle","isMarkActive","useActiveStyleKeys","hasBlockStyle","CollapseMenuMemo","MENU_POPOVER_PROPS","COLLAPSE_BUTTON_PROPS","ActionMenu","disabledProp","isVoidBlock","isEmptyTextBlock","actionIndex","firstInGroup","activeKeys","handleMenuClose","annotationDisabled","MenuButtonMemo","StyledMenuItem","StyledButton","TEXT_STYLE_OPTIONS","TEXT_STYLE_KEYS","emptyStyle","BlockStyleSelect","itemsProp","setChanged","_disabled","activeItems","_activeItems","_items","menuButtonText","toggleBlockStyle","renderOption","hasTextStyle","renderStyle","InsertMenu","isVoidFocus","StyleSelectBox","StyleSelectFlex","ActionMenuBox","$withInsertMenu","FullscreenButtonBox","SLOW_INITIAL_VALUE_LIMIT","InnerToolbar","actionGroups","blockStyles","insertMenuItems","onToggleFullscreen","actionsLen","showActionMenu","showInsertMenu","rootElementRect","Hotkeys","CollapseIcon","ExpandIcon","Toolbar","isSlow","slowTimer","finally","handleInsertBlock","insertBlock","handleInsertInline","insertChild","$fullscreen","ToolbarCard","EditableCard","Scroller","EditableContainer","EditableWrapper","l","$isFullscreen","useSpellcheck","spellCheckOption","portableTextFeatures","isChrome96","userAgent","useScrollSelectionIntoView","domRange","leafEl","startContainer","scrollMode","boundary","renderDecorator","mType","defaultRender","Editor","initialSelection","onCopy","onPaste","renderAnnotation","renderBlock","setPortalElement","setScrollElement","editableRef","useBoundaryElement","handleMouseDown","Node","renderPlaceholder","spellcheck","scrollSelectionIntoView","editable","PortableTextEditable","handleToolBarOnExpand","BoundaryElementProvider","ExpandedLayer","useHotkeys","initialHotkeys","defaultHotkeys","ptFeatures","parseResponsiveWidth","parseModalType","_getModalOption","DefaultEditDialog","usePortal","debugElement","RootPopover","ContentScrollerBox","ContentHeaderBox","PopoverEditDialog","setForceUpdate","virtualElement","contextElement","ObjectEditModal","modalOption","modalType","firstField","setFirstField","firstFieldMember","firstFieldElm","getElementById","useScrollToOpenedMember","editorRootPath","portableTextMemberItems","Compositor","wrapperElement","setWrapperElement","handleToggleFullscreen","hotkeysWithFullscreenToggle","editorHotkeys","hasContent","blockType","isTextBlock","childType","annotationType","portalElement","openMemberItems","editorNode","boundaryElm","handleEditModalClose","dMemberItem","portalElements","expanded","__unstable_elements","__unstable_name","InvalidValue","onIgnore","resolution","handleAction","usePatches","patchChannel","filteredPatches","_startsWith","shouldReset","_shouldReset","_getValueAtPath","_isSegmentEqual","segment1","segment2","segment1Type","subjectPath","checkPath","_isAncestor","path1","path2","PortableTextInput","editorRef","setHasFocus","ignoreValidationError","setIgnoreValidationError","invalidValue","setInvalidValue","setIsFullscreen","setIsActive","portableTextMemberItemsRef","patchSubject","remotePatch$","innerElementRef","prevSel","markDefArrayMember","existingItem","createRef","hasOpenItem","setFocusPathDebounced","handleEditorChange","toFormPatches","handleIgnoreInvalidValue","respondToInvalidContent","RespondToInvalidContent","handleActivate","incomingPatches$","maxBlocks","isObjectItemProps","isStringInputProps","isNumberInputProps","isBooleanInputProps","isArrayOfObjectsInputProps","isArrayOfObjectsSchemaType","isArrayOfPrimitivesInputProps","isArrayOfPrimitivesSchemaType","MOVING_ITEM_CLASS_NAME","DRAG_HANDLE_ATTRIBUTE","sortableHandle","SortableHandle","sortableItem","SortableElement","sortableContainer","SortableContainer","Sortable","SortableList","KeyCode","Space","Enter","Esc","Up","Left","Right","Down","KEYCODES","lift","drop","up","sortableList","helperClass","keyCodes","axis","lockAxis","useDragHandle","shouldCancelStart","isDragHandle","SortableListItem","List","sortable","handleSortEnd","oldIndex","newIndex","onSortEnd","Item","DragHandleButton","grid","DRAG_HANDLE_PROPS","DragHandle","DragHandleIcon","RowLayout","dragHandle","ErrorItem","handleRemove","withFocusRing","$border","extractPastedFiles","dataTransfer","files","extractDroppedFiles","webkitGetAsEntry","getAsFile","isDirectory","walk","isFile","reject","createReader","readEntries","entr","imageUrlToBlob","quality","loader","crossOrigin","toBlob","PASTE_INPUT_STYLE","fileTarget","FileTarget","onFiles","onFilesOver","onFilesOut","showPasteInput","setShowPasteInput","pasteInput","enteredElements","emitFiles","ctrlKey","handlePaste","clipboardData","convertImagesToFilesAndClearContentEditable","handleDrop","nativeEvent","handleDragOver","handleDragEnter","fileTypes","handleDragLeave","prevShowPasteInput","onDragOver","onDragEnter","onDragLeave","onDrop","targetFormat","isContentEditable","imageElements","innerHTML","images","imageBlobs","blob","File","createRange","selectNodeContents","removeAllRanges","addRange","DropMessage","hoveringFiles","rejectedFilesCount","multiple","UploadIcon","getUploadCandidates","uploadTarget","UploadTarget","resolvedUploader","handleFiles","tasks","uploaderCandidates","task","rejected","setHoveringFiles","handleFilesOut","UploadTargetCard","nearestIndexOf","startIdx","searchElement","nearestIndex","predicate","lowerIdx","upperIdx","upper","lower","InsertMenuGroup","pos","InsertAboveIcon","InsertBelowIcon","MenuGroup","insertableType","ItemRow","onEscapeKey","onEnterKey","insertableTypes","insertType","handleDuplicate","DuplicateIcon","CopyIcon","ArrayOfPrimitivesFunctions","onValueCreate","insertItem","handleAddBtnClick","memberDef","ArrayOfPrimitivesInput","PureComponent","_element","_lastAddedIndex","handleItemEnterKey","firstType","handleItemEscapeKey","renderArrayItem","getSnapshotBeforeUpdate","prevProps","prevFocusPath","focusIndex","HTMLInputElement","prevFocusedIndex","restoreSelection","selectionStart","selectionEnd","componentDidUpdate","prevFocusedValue","newInput","setSelectionRange","arrayFunctions","ArrayFunctions","isSortable","it","inArray","ArrayOfObjectOptionsInput","isChecked","changedOption","isGrid","optionType","isPrimitiveOption","normalizeOptions","ArrayOfPrimitiveOptionsInput","changedValue","optionValue","ArrayOfOptionsInput","ArrayOfObjectsFunctions","SCROLL_OPTIONS","useScrollIntoViewOnFocusWithin","hasFocusWithin","PresenceContext","PresenceProvider","useFormFieldPresence","useChildPresence","FooterFlex","PresenceFlex","DragHandleCard","CellLayout","PRESENCE_MARGINS","EditPortal","legacy_referenceElement","contents","getTone","INITIAL_VALUE_CARD_STYLE","GridItem","_e","_f","previewCardRef","resolvingInitialValue","_resolvingInitialValue","itemTypeTitle","GridArrayInput","ListArrayInput","ArrayOfObjectsInput","UniversalArrayInput","isArrayOfOptionsInput","boxShadow","verticalAlign","borderColor","Input","font","appearance","outline","fontWeight","regular","boxSizing","Placeholder","TagInput","placeholderProp","setInputValue","rootRef","handleRootPointerDown","isTagElement","isHTMLElement","inputElement","handleInputBlur","handleInputChange","handleInputFocus","handleInputKeyDown","handleTagRemove","onPointerDown","tagIndex","Tag","TagsArrayInput","tagInputValue","CenterAlignedBox","ZeroLineHeightBox","BooleanInput","indeterminate","LayoutSpecificInput","CalendarDay","isCurrentMonth","isToday","toDateString","textAlign","getDate","MONTH_NAMES","WEEK_DAY_NAMES","HOURS_24","ARROW_KEYS","TAIL_WEEKDAYS","getWeekStartsOfMonth","firstDay","startOfMonth","eachWeekOfInterval","lastDayOfMonth","getWeekDaysFromWeekStarts","weekStarts","weekStart","addDays","getWeeksOfMonth","days","getWeek","CalendarMonth","weekday","week","weekIdx","dayIdx","isSameDay","isSameMonth","dayPresets","timePresets","LazyTextInput","checkEvent","handleKeyPress","YearInput","numericValue","inputMode","PRESERVE_FOCUS_ELEMENT","Calendar","selectTime","onFocusedDateChange","selectedDate","focusedDate","timeStep","setFocusedDate","setFocusedDateMonth","month","setDate","setMonth","handleFocusedMonthChange","moveFocusedDate","addMonths","setFocusedDateYear","year","setYear","handleDateChange","setMinutes","getMinutes","handleMinutesChange","handleHoursChange","mins","focusCurrentWeekDay","currentFocusInCalendarGrid","activeElement","handleNowClick","CalendarMonthSelect","getMonth","CalendarYearSelect","getFullYear","Select","h","handlePrevMonthClick","handleNextMonthClick","ChevronLeftIcon","handlePrevYearClick","handleNextYearClick","DatePicker","setFocusedDay","handleSelect","nextDate","DateTimeInput","onInputChange","buttonRef","isPickerOpen","setPickerOpen","handleDeactivation","handleKeyUp","CalendarIcon","onDeactivation","onKeyUp","DEFAULT_PLACEHOLDER_TIME","CommonDateTimeInput","deserialize","formatInputValue","parseInputValue","localValue","setLocalValue","handleDatePickerInputChange","nextInputValue","isValid","handleDatePickerChange","parseResult","customValidity","parseOptions","calendarTodayLabel","isoString","deserialized","enforceTimeStep","dateString","parseISO","minutes","leftOver","VALUE_FORMAT","DateInput","normalizeRules","getValidationRule","ruleName","rule","ruleSpec","_rules","NumberInput","minRule","onlyPositiveNumber","step","pattern","UnknownFields","fieldNames","fieldsLen","handleUnsetClick","UnknownField","onUnsetClick","FieldGroupTabsWrapper","GroupTab","Tab","GroupOption","ElementQuery","GroupTabs","shouldAutoFocus","TabList","GroupSelect","g","FieldGroupTabs","ObjectInput","renderedUnknownFields","knownFieldNames","unknownFields","renderObjectMembers","defaultSlugify","slugifyOpts","speakingurl","slugify","sourceValue","slugifier","useAsync","lastId","wrappedCallback","asyncId","useSlugContext","getSlugSourceContext","valuePath","getNewFromSource","SlugInput","sourceField","slugContext","updateSlug","nextSlug","generateState","handleGenerateSlug","sourceContext","newFromSource","newSlug","isUpdating","StringInput","StyledTextArea","TextArea","rows","TelephoneInput","toSelectItem","EMPTY_ITEM","SelectInput","currentItem","isRadio","itemFromOptionValue","optionValueFromItem","handleSelectChange","RadioSelect","RadioSelectItem","Radio","UrlInput","uriRule","inputType","allowRelative","EmailInput","setAtPath","currentTree","getExpandOperations","schemaField","selectedGroupName","inSelectedGroup","castArray","expandArrayPath","foundMember","getOption","optionName","PSEUDO_OBJECTS","HIDDEN_FIELDS","NO_LEVEL_LAYOUTS","NO_LEVEL_TYPES","getTypeChain","visited","getFieldLevel","currentLevel","getArrayFieldLevel","getObjectFieldLevel","typeIfRelevant","asType","isPseudoObject","hasVisibleFields","hasListOptions","isNoLevelLayout","asOneOfTypes","resolveConditionalProperty","property","MAX_FIELD_DEPTH","AUTO_COLLAPSE_DEPTH","getPrimitiveItemType","getCollapsedWithDefaults","ALL_FIELDS_GROUP","isFieldEnabledByGroupFilter","groupsConfig","currentGroup","isAcceptedObjectValue","isValidArrayOfObjectsValue","isValidArrayOfPrimitivesValue","everyItemIsObject","findDuplicateKeyEntries","seenKeys","everyItemHasKey","isChangedValue","comparisonValue","_isEqual","prepareFieldMember","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","pathFor","fieldLevel","parentComparisonValue","fieldComparisonValue","fieldGroupState","scopedCollapsedPaths","collapsedPaths","scopedCollapsedFieldsets","collapsedFieldSets","inputState","prepareObjectInputState","openPath","changesOpen","defaultCollapsedState","duplicateKeyEntries","scopedCollapsedFieldSets","fieldState","prepareArrayOfObjectsInputState","prepareArrayOfPrimitivesInputState","conditionalPropertyContext","preparePrimitiveInputState","enableHiddenCheck","schemaTypeGroupConfig","defaultGroupName","groupHidden","selectedGroup","parentProps","normalizedSchemaMembers","fieldsetFieldNames","fieldsetHidden","fieldsetMembers","fieldStateWithReadOnly","hasFieldGroups","_groups","prepareArrayOfPrimitivesMember","prepareArrayOfObjectsMember","itemLevel","collapsedItemPaths","itemState","itemComparisonValue","prepareFormState","useFormState","DefaultCustomMarkers","missingPatchChannel","FormBuilderProvider","__internal_patchChannel","filterField","unstable","documentValue","documentValueRef","READABLE","PERMISSION_DENIED","NOT_FOUND","getReferenceInfo","referenceType","pairAvailability$","pairAvailability","draftRef","publishedRef","typeName$","draftTypeName","publishedTypeName","refSchemaType","previewPaths","draftPreview$","publishedPreview$","getCounterpartIds","collatedHits","collatedHit","getExistingCounterparts","referenceSearch","textTerm","collated","existingCounterpartIds","useFormValue","uniquePath","documentValueSubject","documentValue$","useValueRef","resolveUserDefinedFilter","filterParams","useReferenceInput","searchClient","EditReferenceLinkComponent","onEditReference","activePath","initialValueTemplateItems","useReferenceInputOptions","documentRef","documentTypeName","isCurrentDocumentLiveEdit","disableNew","searchString","adapter.referenceSearch","isQueryError","details","EditReferenceLink","EditReferenceLink_","parentRefPath","handleEditReference","selectedState","createOptions","adapter.getReferenceInfo","INITIAL_LOADING_STATE","retry","EMPTY_STATE","useReferenceInfo","msgSubject","msg$","referenceInfo","previousId","useInterval","ms","setInterval","clearInterval","TimeAgo","timeSince","formatDistanceToNow","UnavailableMessage","showTypeLabel","insufficientPermissions","previewId","previewStub","HelpCircleIcon","PublishIcon","OptionPreview","ConditionalTooltip","INLINE_BLOCK_STYLE","FULL_WIDTH","CreateButton","onCreate","canCreateAny","menuRef","createOption","StyledPopover","ReferenceAutocomplete","renderPopover","contentRef","arrow","portalRef","matchReferenceWidth","Autocomplete","NARROW_LAYOUT","WIDE_LAYOUT","$narrow","AutocompleteContainer","handleNewRef","setForwardedRef","inputWrapperRect","instance","StyledPreviewCard","NO_FILTER","ReferenceInput","onSearch","handleCreateNew","newDocumentId","uuid","nextId","handleClear","handleAutocompleteKeyDown","loadableReferenceInfo","autocompletePopoverReferenceElementRef","handleAutocompleteOpenButtonClick","handleCreateButtonKeyDown","renderValue","relatedTarget","isWeakRefToNonexistent","hadFocusAtRef","hasFocusAtRef","onQueryChange","filterOption","openButton","ReferenceInputOptionsProvider","ReviewChangesContext","useReviewChanges","reviewChanges","StudioReferenceInput","isDocumentLiveEdit","_refType","editReferenceLinkComponent","PRIMITIVES","isArrayOfPrimitives","isStringArray","isTagsArray","resolveArrayInput","resolveStringInput","resolveNumberInput","FileButton","FileInputButton","idProp","textWeight","PlaceholderText","isFileType","messageIcon","ReadOnlyIcon","BinaryDocumentIcon","messageText","UploadPlaceholder","browse","WithReferencedAsset","observeAsset","waitPlaceholder","CardWrapper","LeftSection","STALE_UPLOAD_MS","elapsedMs","UploadProgress","uploadState","onCancel","onStale","filename","urlToFile","xhr","XMLHttpRequest","onloadend","ext","dataURLtoFile","readAsDataURL","responseType","send","base64ToFile","base64Data","dataurl","mime","bstr","atob","u8arr","handleSelectAssetFromSource","assetFromSource","uploadWith","firstAsset","imagePatches","FileInputMenuItem","ActionsMenu","downloadUrl","copyUrl","handleCopyURL","clipboard","writeText","ClipboardIcon","ResetIcon","ButtonWrapper","UploadWarning","onClearStale","RatioBox","ImageLoader","setImage","testProperties","foundProperty","getBackingStoreRatio","testProperty","isPointInEllipse","xradius","yradius","isPointInCircle","isPointInRect","getPointAtCircumference","cos","sin","Point","HLine","_left","_right","Corners","Rect","fromEdges","setTopLeft","setSize","setCenter","corners","multiply","grow","delta","shrink","cropRelative","clamp","Debug","makeDragAware","DragAware","domNode","currentPos","isDragging","handleTouchMove","handleDragStart","onDragStart","nextPos","getPos","getPositionRelativeToRect","handleDrag","onDrag","diffPos","handleDragEnd","onDragEnd","handleDragCancel","setDomNode","componentDidMount","componentWillUnmount","onTouchStart","onTouchMove","touches","clientX","clientY","otherPos","DragAwareCanvas","RootContainer","CanvasContainer","OPEN_HAND","CLOSE_HAND","DEFAULT_HOTSPOT","DEFAULT_CROP","MARGIN_PX","CROP_HANDLE_SIZE","HOTSPOT_HANDLE_SIZE","normalizeRect","flippedY","flippedX","checkCropBoundaries","limitToBoundaries","newDelta","getCropCursorForHandle","backingStoreRatio","cropHandleKeys","ToolCanvas","cropping","cropMoving","moving","resizing","mousePosition","getScale","inHotspot","utils2d.isPointInEllipse","getHotspotRect","inDragHandle","utils2d.isPointInCircle","getDragHandleCoords","activeCropHandle","getActiveCropHandleFor","inCropRect","utils2d.isPointInRect","getCropRect","emitCrop","emitCropMove","emitMove","emitResize","onChangeEnd","rawCrop","getClampedValue","clientRect","setCanvas","hotspotRect","getCropHandles","inner","handleSize","halfCropHandleSize","cropHandle","topLeft","topRight","bottomLeft","bottomRight","cropHandles","applyHotspotMoveBy","applyCropMoveBy","side","applyHotspotResizeBy","paintHotspot","imageRect","save","drawBackdrop","drawEllipse","clip","drawHole","drawDragHandle","dest","scaleY","beginPath","globalAlpha","arc","strokeStyle","lineWidth","closePath","srcLeft","srcTop","srcWidth","srcHeight","destLeft","destTop","destWidth","destHeight","fillStyle","fillRect","utils2d.getPointAtCircumference","getActualSize","clientHeight","clientWidth","bbox","setLineDash","vline","hline","x2","y2","paintBackground","clearRect","paint","pxratio","paintCropBorder","highlightCropHandles","paintMousePosition","cropRect","actualSize","getCursor","activeCropArea","mouseOverDragHandle","cursors.CLOSE_HAND","mouseoverHotspot","mouseoverCropRect","cursors.OPEN_HAND","draw","currentCursor","newCursor","onMouseMove","currentHotspot","currentCrop","Resize","canvasElement","appendChild","removeChild","resize","landscape","targetWidth","targetHeight","ImageTool","calculateStyles","imageAspect","readAspectRatio","containerAspect","readCropAspect","calculateHotSpotCrop","containerHeight","styleFormat","toStylePercentage","decimals","multiplier","sourceAspect","descriptor","viewportAspect","alignment","netWidth","netHeight","outImg","cropRationalAspect","cropAspect","maxHotspotXScale","maxHotspotYScale","maxScale","minFullBleedScale","cropIsTaller","outCrop","letterboxScale","hotspotLeft","hotspotTop","HotspotImageContainer","getCropAspect","srcAspect","origHeight","origWidth","cropWidth","cropHeight","HotspotImage","alignX","alignY","onLoad","srcAspectRatio","srcSet","setContainerAspect","containerElementRef","imageElementRef","updateContainerAspect","parentNode","startTransition","imageElement","alreadyLoaded","naturalWidth","targetAspect","targetStyles","PROBABLY_THE_TINIEST_GIF_EVER","isBlob","useLoadImage","HOTSPOT_PATH","PREVIEW_ASPECT_RATIOS","DEFAULT_VALUE","LoadStatus","overflowWrap","ImageToolInput","isImageLoading","handleChangeEnd","cropField","hotspotField","MenuActionsWrapper","ImageActionsMenu","showEdit","setHotspotButtonElement","setMenuButtonElement","CropIcon","MAX_DEFAULT_HEIGHT","SpinnerWrapper","drag","light","FlexOverlay","getImageSize","imageUrlParams","isRejected","setLoaded","rootWidth","acceptTone","maxHeightToPx","documentElement","imageWidth","imageHeight","imageRatio","renderedImageHeight","rootHeight","onLoadChange","OverlayComponent","cardTone","HoverIcon","HoverText","InvalidImageWarning","onClearValue","passThrough","ASSET_FIELD_PATH","ASSET_IMAGE_MENU_POPOVER","BaseImageInput","_assetElementRef","uploadSubscription","isUploading","selectedAssetSource","isStale","hotspotButtonElement","menuButtonElement","setFocusElement","getUploadOptions","assetDocumentProps","cancelUpload","uploadEvent","clearUploadStatus","handleRemoveButtonClick","allKeys","remainingKeys","removeKeys","valueIsArrayElement","handleFieldChange","eventIsUnsettingLastFilledField","parentPathSegment","handleOpenDialog","handleCloseDialog","handleFilesOver","handleCancelUpload","handleClearUploadState","handleStaleUpload","handleClearField","handleSelectFiles","uploadFirstAccepted","handleSelectImageFromAssetSource","handleAssetSourceClosed","renderHotspotInput","hotspotInputProps","withImageTool","isImageToolEnabled","isImageSource","setToast","_assetPath","renderAssetMenu","showAdvancedEditButton","browseMenuItem","assetSource","extension","forceDownload","renderBrowser","renderUploadPlaceholder","renderUploadState","elementHeight","renderAssetSource","selectionType","getFileTone","renderAsset","hasValueOrUpload","StudioImageInput","sourcesFromSchema","builder","CardOverlay","formatBytes","bytes","dm","parseFloat","FileDetails","isMenuOpen","onMenuOpen","menuElement","setMenuRef","FileSkeleton","LabelSkeleton","InvalidFileWarning","BaseFileInput","_focusRef","isArrayElement","handleSelectFileFromAssetSource","handleFileTargetFocus","fileInfo","_assetFieldPath","hasFileTargetFocus","isFileSource","StudioFileInput","fileConfig","STATUS_ICONS","AlertStrip","useOnClickOutside","refs","retryAttempt","setRetryAttempt","StyledPreviewFlex","TooltipContent","CrossDatasetReferencePreview","showStudioUrlIcon","hasStudioUrl","previewMedia","isValidImageAsset","withOptions","toEntry","PreviewReferenceValue","refTypeName","DisabledFeatureWarning","hasRef","fetchFeatures","cachedFeatureRequest","useFeatureEnabled","featureKey","featureInfo","REF_PATH","CROSS_DATASET_FEATUREKEY","CrossDatasetReferenceInput","keyCode","getReferenceInfoMemo","refDoc","focusElementRef","hasFocusAt","refUpdated","focusAtUpdated","weakIs","weakShouldBe","handleFixStrengthMismatch","handleAutocompleteFocus","handleReplace","showWeakRefMismatch","studioUrl","clickOutsideBoundaryRef","autocompletePortalRef","createButtonMenuPortalRef","ClearIcon","ReplaceIcon","SyncIcon","crossDatasetType","REQUEST_TAG_BASE","createGetReferenceInfo","docType","resolvedDoc","fetchDocumentAvailability","publishedPreview","StudioCrossDatasetReferenceInput","crossDatasetClient","clone","defaultInputs","crossDatasetReference","resolveComponentFromTypeVariants","defaultResolveInputComponent","componentFromTypeVariants","typeChain","deduped","subType","defaultResolvePreviewComponent","ReferencePreviewCard","ReferenceItem","publishedReferenceExists","handleRemoveStrengthenOnPublish","OpenInNewTabIcon","weakWarningOverride","issues","ReferenceField","ObjectOrArrayField","ImageOrFileField","defaultResolveFieldComponent","BUTTON_CARD_STYLE","PreviewItem","defaultResolveItemComponent","useResolveDefaultComponent","componentResolver","componentProps","defaultResolvedComponent","parentTypeProps","parentTypeResolvedComponent","DefaultInput","DefaultField","DefaultItem","pickInputComponent","pickFieldComponent","pickPreviewComponent","pickItemComponent","useInputComponent","useFieldComponent","usePreviewComponent","useItemComponent","FormProvider","Field","FormBuilder","RootInput","fieldSetName","rootInputProps","defaultRenderField","defaultRenderInput","defaultRenderItem","defaultRenderPreview","IS_NUMERIC","unquote","splitAttr","attr","coerce","parseGradientPath","focusPathStr","encodePath","formBuilderPath","arrayToJSONMatchPath","decodePath","gradientPath","getHash","decodeURIComponent","getPathFromHash","HashFocusManager","setFocusPath","handleHashChange","SimpleFocusManager","toMutationPatches","toMutationPatch","fromMutationPatches","toFormBuilderPatches","notIn","matchPath","_buildTints","mid","mix","_toHex","green","parseToRgb","rgb","_isDark","getLuminance","_multiply","parseColor","rgbToHex","_screen","screen","NEUTRAL_TONES","buildColor","legacyPalette","legacyTones","createColorTheme","stateTones","blend","skeletonFrom","umbra","black","penumbra","skeleton","buttonTones","blendInvert","defaultTints","isNeutral","accent","syntax","mainShade","secondaryShade","atrule","attrName","attrValue","attribute","builtin","cdata","class","orange","cyan","comment","constant","doctype","entity","function","hexcode","important","inserted","keyword","magenta","operator","prolog","pseudoClass","pseudoElement","punctuation","regex","symbol","variable","buildFonts","cssCustomProperties","buildLegacyPalette","defaultButton","danger","mainNavigation","buildLegacyTones","transparent","buildLegacyTheme","partialLegacyTheme","legacyTheme","resolveLegacyTheme","defaultCustomProperties","white","defaultTheme"],"mappings":"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"}